From java-user-return-30108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 10:14:11 2007
Return-Path: <java-user-return-30108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98108 invoked from network); 1 Sep 2007 10:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 10:14:10 -0000
Received: (qmail 17822 invoked by uid 500); 1 Sep 2007 10:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17781 invoked by uid 500); 1 Sep 2007 10:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17770 invoked by uid 99); 1 Sep 2007 10:13:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 03:13:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of abdou.samir@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 10:13:54 +0000
Received: by an-out-0708.google.com with SMTP id c5so216693anc
        for <java-user@lucene.apache.org>; Sat, 01 Sep 2007 03:13:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sRwcg5nPynjvP5X7r31vDLUuo7Fk+WOqNGpK83IpuQxbJ5XYaepLWjVKbdtiQHsBwKrEtZs8Cu4hDQ/NYFx1H8bNrCb6R6RT31nzNok/q56hKpzWTinohnpcet4lJ3muo8o6trk1sKxJaBd+7azdY73PufbnkWbhJxEeq2ej9v8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r2opCV1gyq7TC4EQHJy3jMSYyOUlOqb/zEOkqobbKyEbAiPXkicBHKh/GTV9RR2lvEtlCBm+t3mPDnzVO2qDPF5XmajpgU4x0L8kGkYg4asG6V32NJz4qaOiv/jbJa+ibXvXCYOGxyl+nWAsMV4qGcURuY8rqVQJFpKxADO/Bic=
Received: by 10.100.91.6 with SMTP id o6mr2412032anb.1188641613589;
        Sat, 01 Sep 2007 03:13:33 -0700 (PDT)
Received: by 10.100.163.20 with HTTP; Sat, 1 Sep 2007 03:13:33 -0700 (PDT)
Message-ID: <18dfa6d40709010313s7d40cc72n1bdba3e9c86d1187@mail.gmail.com>
Date: Sat, 1 Sep 2007 12:13:33 +0200
From: "Samir Abdou" <abdou.samir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is there a Term ID for each distinctive term indexed in Lucene?
In-Reply-To: <5d91badf0708311543y2053032r1926e78c02a1beae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_490_3220491.1188641613535"
References: <5d91badf0708311541y636c6a0dgfda912a3ec30463d@mail.gmail.com>
	 <5d91badf0708311543y2053032r1926e78c02a1beae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_490_3220491.1188641613535
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

You should extend the SegmentReader (or IndexReader) class to implement the
following method:

*public* *long* termID(Term t) *throws* IOException {  *return*
tis.getPosition(t);
}

which will give you a mean to get the ID of a given term.  This ID is simply
the position of that term within ".ti?" file !

Hope this will help

Regards,

Samir





2007/9/1, Tao Cheng <tcheng3@gmail.com>:
>
> Hi all,
>
> I found that instead of storing a term ID for a term in the index, Lucene
> stores the actual term string value. I am wondering if there ever is such
> a
> "term ID" for each distinctive term indexed in Lucne, similar as a "doc
> ID"
> for each distinctive document indexed in Lucene.
>
> In other words, I am looking for a method like " int termId(string term)"
> in
> the IndexReader, such that it can return my an ID given a term's string
> value.
>
> Thanks a lot in advance.
>
> -Tao
>

------=_Part_490_3220491.1188641613535--

From java-user-return-30109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 10:15:10 2007
Return-Path: <java-user-return-30109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6201 invoked from network); 1 Sep 2007 10:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 10:15:08 -0000
Received: (qmail 19747 invoked by uid 500); 1 Sep 2007 10:14:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19704 invoked by uid 500); 1 Sep 2007 10:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19693 invoked by uid 99); 1 Sep 2007 10:14:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 03:14:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 10:15:55 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l81AE9Fp024978
	for <java-user@lucene.apache.org>; Sat, 1 Sep 2007 05:14:10 -0500
Received: (qmail 17216 invoked by uid 0); 1 Sep 2007 05:14:09 -0500
Date: 1 Sep 2007 05:14:09 -0500
Message-ID: <20070901101409.17215.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Is_there_a_Term_ID_for_each_distinctive_term_indexed_in_Lucene=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 10:16:06 2007
Return-Path: <java-user-return-30110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14297 invoked from network); 1 Sep 2007 10:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 10:16:04 -0000
Received: (qmail 24092 invoked by uid 500); 1 Sep 2007 10:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24058 invoked by uid 500); 1 Sep 2007 10:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24043 invoked by uid 99); 1 Sep 2007 10:15:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 03:15:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 10:16:49 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l81AF5Xa026833
	for <java-user@lucene.apache.org>; Sat, 1 Sep 2007 05:15:06 -0500
Received: (qmail 17808 invoked by uid 0); 1 Sep 2007 05:15:05 -0500
Date: 1 Sep 2007 05:15:05 -0500
Message-ID: <20070901101505.17807.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_Is_there_a_Term_ID_for_each_distinctive_term_indexed_in_Lucene=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 19:07:34 2007
Return-Path: <java-user-return-30111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51809 invoked from network); 1 Sep 2007 19:07:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 19:07:32 -0000
Received: (qmail 7569 invoked by uid 500); 1 Sep 2007 19:07:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7367 invoked by uid 500); 1 Sep 2007 19:07:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7355 invoked by uid 99); 1 Sep 2007 19:07:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 12:07:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 19:07:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so938695fkz
        for <java-user@lucene.apache.org>; Sat, 01 Sep 2007 12:06:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Swi5gfYhTbfu5E9C5JKXBxJY1wN8t+It391pk/hjJ/6mfcILPzIdMWJkNd3SQeNPmjSec5sICVLOTfEUEeotuYFZSiA2VM4jBulYls6KbYeMWKsRVJVrHiUqzSq63EQxebykMPYhQoi5a10F1cq90b5TzgdZpwuLm75ApzB7X8g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wvs0RB4oszqudFvg04ibNgFi6U7CdrPN4yChl93zjLFsbDKD/NjzrTOinXy1o+8WKkOj9Rf1lbEFP6J47x7HwYj+nldnVP0IiOUEb1ucQAuZEoN49r0yRiutXud6R9paTqcyjDy9DZjxtdV5h05ezdl0k28Gxavt/K7BNZOZ/wk=
Received: by 10.82.174.20 with SMTP id w20mr6688386bue.1188673615658;
        Sat, 01 Sep 2007 12:06:55 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Sat, 1 Sep 2007 12:06:55 -0700 (PDT)
Message-ID: <359a92830709011206o34a73094w4598d435c99b352b@mail.gmail.com>
Date: Sat, 1 Sep 2007 15:06:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError tokenizing a boring text file
In-Reply-To: <20070831141729.0BCBE72494C@athena.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2539_28718613.1188673615628"
References: <20070831141729.0BCBE72494C@athena.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2539_28718613.1188673615628
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't answer the question of why the same token
takes up memory, but I've indexed far more than
20M of data in a single document field. As in on the
order of 150M. Of course I allocated 1G or so to the
JVM, so you might try that....

Best
Erick

On 8/31/07, Per Lindberg <per@implior.com> wrote:
>
> I'm creating a tokenized "content" Field from a plain text file
> using an InputStreamReader and new Field("content", in);
>
> The text file is large, 20 MB, and contains zillions lines,
> each with the the same 100-character token.
>
> That causes an OutOfMemoryError.
>
> Given that all tokens are the *same*,
> why should this cause an OutOfMemoryError?
> Shouldn't StandardAnalyzer just chug along
> and just note "ho hum, this token is the same"?
> That shouldn't take too much memory.
>
> Or have I missed something?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2539_28718613.1188673615628--

From java-user-return-30112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 19:50:39 2007
Return-Path: <java-user-return-30112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68855 invoked from network); 1 Sep 2007 19:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 19:50:38 -0000
Received: (qmail 40198 invoked by uid 500); 1 Sep 2007 19:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40156 invoked by uid 500); 1 Sep 2007 19:50:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40145 invoked by uid 99); 1 Sep 2007 19:50:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 12:50:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 19:50:24 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1116364muf
        for <java-user@lucene.apache.org>; Sat, 01 Sep 2007 12:50:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EnrQEsrJ9RZP+uGTlEI/i9bX6hTpkfwCZNnqdPLrU69cEmzuWCLxLGMKPTF56O7MIKzm1QHf2aDe0O4Fgc7k0FUGhYWLOpbxk7ej1iMF1it4t04xhXdnmDBlcJPZz2A7T/rHkdF4xNBSTaHtmsJT3ZFd+U3gsysdsGQMZc3JZGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gdxovvtEDGXA2XmFSD7JhRYfwPvgyQ/9W09+J5JXmf/ouPVSk9lk3AI3Jl0OzR0i/lYHQ3t9vgQSSN/jwHVQP4kpQCUPdfZaikEINampbjV5nahW7TgO4tbjcIPtfXuAMdzk7BVlP6Fr5NbbtJqfWZtcjDV93zpVRVFfIPOpRbQ=
Received: by 10.82.111.8 with SMTP id j8mr6882242buc.1188676201799;
        Sat, 01 Sep 2007 12:50:01 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Sat, 1 Sep 2007 12:50:01 -0700 (PDT)
Message-ID: <c0c0e1d40709011250l572206aaseef63b8794f94e00@mail.gmail.com>
Date: Sat, 1 Sep 2007 15:50:01 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError tokenizing a boring text file
In-Reply-To: <359a92830709011206o34a73094w4598d435c99b352b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1293_26364611.1188676201741"
References: <20070831141729.0BCBE72494C@athena.apache.org>
	 <359a92830709011206o34a73094w4598d435c99b352b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1293_26364611.1188676201741
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have indexed around 100 M of data with 512M to the JVM heap. So that gives
you an idea. If every token is the same word in one file, shouldn't the
tokenizer recognize that ?

Try using Luke. That helps solving lots of issues.

-
AZ

On 9/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I can't answer the question of why the same token
> takes up memory, but I've indexed far more than
> 20M of data in a single document field. As in on the
> order of 150M. Of course I allocated 1G or so to the
> JVM, so you might try that....
>
> Best
> Erick
>
> On 8/31/07, Per Lindberg <per@implior.com> wrote:
> >
> > I'm creating a tokenized "content" Field from a plain text file
> > using an InputStreamReader and new Field("content", in);
> >
> > The text file is large, 20 MB, and contains zillions lines,
> > each with the the same 100-character token.
> >
> > That causes an OutOfMemoryError.
> >
> > Given that all tokens are the *same*,
> > why should this cause an OutOfMemoryError?
> > Shouldn't StandardAnalyzer just chug along
> > and just note "ho hum, this token is the same"?
> > That shouldn't take too much memory.
> >
> > Or have I missed something?
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_1293_26364611.1188676201741--

From java-user-return-30113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 20:07:00 2007
Return-Path: <java-user-return-30113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71394 invoked from network); 1 Sep 2007 20:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 20:06:58 -0000
Received: (qmail 47233 invoked by uid 500); 1 Sep 2007 20:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47198 invoked by uid 500); 1 Sep 2007 20:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47187 invoked by uid 99); 1 Sep 2007 20:06:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 13:06:47 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 20:06:43 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:52556 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IRZEb-0003qe-3L
	for java-user@lucene.apache.org; Sat, 01 Sep 2007 22:06:21 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40709011250l572206aaseef63b8794f94e00@mail.gmail.com>
References: <20070831141729.0BCBE72494C@athena.apache.org> <359a92830709011206o34a73094w4598d435c99b352b@mail.gmail.com> <c0c0e1d40709011250l572206aaseef63b8794f94e00@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2F38A9BE-413A-4E1A-93D7-99D59B237380@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: OutOfMemoryError tokenizing a boring text file
Date: Sat, 1 Sep 2007 22:00:25 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IRZEb-0003qe-3L.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IRZEb-0003qe-3L 244d1442e812710e39cf3b6b8ff5d538
X-Virus-Checked: Checked by ClamAV on apache.org

I belive the problem is that the text value is not the only data  
associated with a token, there is for instance the position offset.  
Depending on your JVM, each instance reference consume 64 bits or so,  
so even if the text value is flyweighted by String.intern() there is  
a cost. I doubt that a document is flushed to the segment prior to a  
fields token stream has been exhaused.

-- 
karl


1 sep 2007 kl. 21.50 skrev Askar Zaidi:

> I have indexed around 100 M of data with 512M to the JVM heap. So  
> that gives
> you an idea. If every token is the same word in one file, shouldn't  
> the
> tokenizer recognize that ?
>
> Try using Luke. That helps solving lots of issues.
>
> -
> AZ
>
> On 9/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> I can't answer the question of why the same token
>> takes up memory, but I've indexed far more than
>> 20M of data in a single document field. As in on the
>> order of 150M. Of course I allocated 1G or so to the
>> JVM, so you might try that....
>>
>> Best
>> Erick
>>
>> On 8/31/07, Per Lindberg <per@implior.com> wrote:
>>>
>>> I'm creating a tokenized "content" Field from a plain text file
>>> using an InputStreamReader and new Field("content", in);
>>>
>>> The text file is large, 20 MB, and contains zillions lines,
>>> each with the the same 100-character token.
>>>
>>> That causes an OutOfMemoryError.
>>>
>>> Given that all tokens are the *same*,
>>> why should this cause an OutOfMemoryError?
>>> Shouldn't StandardAnalyzer just chug along
>>> and just note "ho hum, this token is the same"?
>>> That shouldn't take too much memory.
>>>
>>> Or have I missed something?
>>>
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 13:05:05 2007
Return-Path: <java-user-return-30114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32993 invoked from network); 3 Sep 2007 13:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 13:05:04 -0000
Received: (qmail 76521 invoked by uid 500); 3 Sep 2007 13:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76474 invoked by uid 500); 3 Sep 2007 13:04:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76461 invoked by uid 99); 3 Sep 2007 13:04:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 06:04:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 13:04:47 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Mon, 3 Sep 2007 15:04:15 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Mon, 3 Sep 2007 15:04:13 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: SV: OutOfMemoryError tokenizing a boring text file
Date: Mon, 3 Sep 2007 15:04:03 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <2F38A9BE-413A-4E1A-93D7-99D59B237380@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Acfs07REWCy1a7SmS82e9ylr9FRHpABU46rA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=8.5
	tests=AWL: 0.182,BAYES_00: -1.665,TOTAL_SCORE: -1.483
Message-Id: <20070903130456.991BA724960@athena.apache.org>

Aha, that's interesting. However...

Setting writer.setMaxFieldLength(5000) (default is 10000)
seems to eliminate the risk for an OutOfMemoryError,
even with a JVM with only 64 MB max memory.
(I have tried larger values for JVM max memory, too).
=20
(The name is imho slightly misleading, I would have
called it setMaxFieldTerms or something like that).

Still, 64 bits x 10000 =3D 78 KB. I can't see why that should
eat up 64 MB, unless the 100 char tokens also are multiplied.

(The 20 MB text file contains roughly 200 000 copies of the
same 100 char string).

To me, it appears that simply calling

   new Field("content", new InputStreamReader(in, "ISO-8859-1"))

on a plain text file causes Lucene to buffer it *all*.


> -----Ursprungligt meddelande-----
> Fr=E5n: Karl Wettin [mailto:karl.wettin@gmail.com]=20
> Skickat: den 1 september 2007 22:00
> Till: java-user@lucene.apache.org
> =C4mne: Re: OutOfMemoryError tokenizing a boring text file
>=20
> I belive the problem is that the text value is not the only data =20
> associated with a token, there is for instance the position offset. =20
> Depending on your JVM, each instance reference consume 64=20
> bits or so, =20
> so even if the text value is flyweighted by String.intern() there is =20
> a cost. I doubt that a document is flushed to the segment prior to a =20
> fields token stream has been exhaused.
>=20
> --=20
> karl
>=20
>=20
> 1 sep 2007 kl. 21.50 skrev Askar Zaidi:
>=20
> > I have indexed around 100 M of data with 512M to the JVM heap. So =20
> > that gives
> > you an idea. If every token is the same word in one file,=20
> shouldn't =20
> > the
> > tokenizer recognize that ?
> >
> > Try using Luke. That helps solving lots of issues.
> >
> > -
> > AZ
> >
> > On 9/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >>
> >> I can't answer the question of why the same token
> >> takes up memory, but I've indexed far more than
> >> 20M of data in a single document field. As in on the
> >> order of 150M. Of course I allocated 1G or so to the
> >> JVM, so you might try that....
> >>
> >> Best
> >> Erick
> >>
> >> On 8/31/07, Per Lindberg <per@implior.com> wrote:
> >>>
> >>> I'm creating a tokenized "content" Field from a plain text file
> >>> using an InputStreamReader and new Field("content", in);
> >>>
> >>> The text file is large, 20 MB, and contains zillions lines,
> >>> each with the the same 100-character token.
> >>>
> >>> That causes an OutOfMemoryError.
> >>>
> >>> Given that all tokens are the *same*,
> >>> why should this cause an OutOfMemoryError?
> >>> Shouldn't StandardAnalyzer just chug along
> >>> and just note "ho hum, this token is the same"?
> >>> That shouldn't take too much memory.
> >>>
> >>> Or have I missed something?
> >>>
> >>>
> >>>
> >>>
> >>>=20
> --------------------------------------------------------------------=20
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 13:47:50 2007
Return-Path: <java-user-return-30115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50551 invoked from network); 3 Sep 2007 13:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 13:47:48 -0000
Received: (qmail 39483 invoked by uid 500); 3 Sep 2007 13:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39455 invoked by uid 500); 3 Sep 2007 13:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39444 invoked by uid 99); 3 Sep 2007 13:47:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 06:47:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gui@prosoma.com.br designates 67.19.26.18 as permitted sender)
Received: from [67.19.26.18] (HELO diesel.infoage.com.br) (67.19.26.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 13:48:45 +0000
Received: from davinci.prosoma (unknown [172.31.255.5])
	by diesel.infoage.com.br (Postfix) with ESMTP id C6C9D474173
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 10:44:32 -0300 (BRT)
Received: from [172.16.88.6] (unknown [172.16.88.6])
	by davinci.prosoma (Postfix) with ESMTP id 1E101B730F
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 10:51:45 -0300 (BRT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: quoted-printable
Message-Id: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Guilherme Barile <gui@prosoma.com.br>
Subject: JdbcDirectory
Date: Mon, 3 Sep 2007 10:46:51 -0300
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
	We're starting a new project, which basically catalogs =
everything we =20
have in the department (different objects with different metadata), =20
and as I used Lucene before, I'm preparing a presentation to the =20
team, as I think it would really simplify the storage of metadata and =20=

documents.
	The system will be pretty straightforward, all items will be =20
cataloged,  and most of them won't be changed too much ( I'll raise =20
this question later ).
	So, here are my main concerns, hope you can help

1) Storing all data (index and content) wasn't recommended in the =20
past, as the index could become corrupted. Do I have this problem if =20
I use a JdbcDirectory (PostgreSQL backend) ? I already read about the =20=

performance degradation when using a database as main storage, but =20
this won't be a problem.

2) Lucene doesn't support incremental editing (a new Document will be =20=

created when someone edits an item), so is it possible to manage some =20=

kind of versioning ? Anyone ever implemented something this way ?

Thanks a lot for the attention

Guilherme Barile
Prosoma Inform=E1tica=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 13:51:09 2007
Return-Path: <java-user-return-30116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51618 invoked from network); 3 Sep 2007 13:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 13:51:09 -0000
Received: (qmail 46042 invoked by uid 500); 3 Sep 2007 13:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45854 invoked by uid 500); 3 Sep 2007 13:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45843 invoked by uid 99); 3 Sep 2007 13:50:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 06:50:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 13:50:54 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1288168wxd
        for <java-user@lucene.apache.org>; Mon, 03 Sep 2007 06:50:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e0b6S0zD3DiHmCRpkWmNaNZfF5fMw/BeF4a9aUPfBbne/GEDQZBMYfjkefl23DhAm1Wseva/9GpgoCI/bNtLec7LruOvDwWkq/vCpk3vpxGScDLTR46OxSDWb9IZSfcD2dYSiMVsJgrMupFYN9DFtCKN8Q20n6Ttr43fo31t9ww=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t91cjK7sGqHncy+hwUq/0Ju2VO4H7WTcKyFf4M0kZQdWV1bHov90yWRtN5nuSLYXsM4UoFNh6/LqT+rf/guIpmtvNP8RLxoxCIcD26KLujNctimKpiyQT39EhC1wG69BLgz/ZqiaaK50DvnU2gHPeuRuu2UWSOzC6PNqqcOQT6M=
Received: by 10.90.79.6 with SMTP id c6mr3947757agb.1188827432899;
        Mon, 03 Sep 2007 06:50:32 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Mon, 3 Sep 2007 06:50:32 -0700 (PDT)
Message-ID: <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
Date: Mon, 3 Sep 2007 09:50:32 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JdbcDirectory
In-Reply-To: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8957_12699272.1188827432806"
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8957_12699272.1188827432806
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

1) I don't understand why the index would get corrupted. We store huge data
and meta-data using Lucene.
2) For this, I synced Lucene with the DB operations. If you use Hibernate,
theres an API for that. Or, you could just write your own factory methods t=
o
add/delete/edit index documents when a DB operation takes place (e.g edit).

On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>
> Hello,
>         We're starting a new project, which basically catalogs everything
> we
> have in the department (different objects with different metadata),
> and as I used Lucene before, I'm preparing a presentation to the
> team, as I think it would really simplify the storage of metadata and
> documents.
>         The system will be pretty straightforward, all items will be
> cataloged,  and most of them won't be changed too much ( I'll raise
> this question later ).
>         So, here are my main concerns, hope you can help
>
> 1) Storing all data (index and content) wasn't recommended in the
> past, as the index could become corrupted. Do I have this problem if
> I use a JdbcDirectory (PostgreSQL backend) ? I already read about the
> performance degradation when using a database as main storage, but
> this won't be a problem.
>
> 2) Lucene doesn't support incremental editing (a new Document will be
> created when someone edits an item), so is it possible to manage some
> kind of versioning ? Anyone ever implemented something this way ?
>
> Thanks a lot for the attention
>
> Guilherme Barile
> Prosoma Inform=E1tica
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8957_12699272.1188827432806--

From java-user-return-30117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 16:27:01 2007
Return-Path: <java-user-return-30117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94405 invoked from network); 3 Sep 2007 16:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 16:27:00 -0000
Received: (qmail 21382 invoked by uid 500); 3 Sep 2007 16:26:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21336 invoked by uid 500); 3 Sep 2007 16:26:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21325 invoked by uid 99); 3 Sep 2007 16:26:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 09:26:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 16:26:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISEkq-0003FH-37
	for java-user@lucene.apache.org; Mon, 03 Sep 2007 09:26:24 -0700
Message-ID: <12464430.post@talk.nabble.com>
Date: Mon, 3 Sep 2007 09:26:24 -0700 (PDT)
From: blueyben <bengyeow@gmail.com>
To: java-user@lucene.apache.org
Subject: FileDocument - Confused and Need Help.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: bengyeow@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear all, I am new to Lucene, am trying with the basics.

Basically I created sample text files with fields as follows:

textid 17
pubdate 63/01/04
pageid 20

I have been trying to edit FileDocument.java to read the fields above and

1. Index =E2=80=9Ctextid=E2=80=9D with value =E2=80=9C17=E2=80=9D
2. Index =E2=80=9Cpubdate=E2=80=9D with value =E2=80=9C19630104=E2=80=9D
3. Index =E2=80=9Cpageid=E2=80=9D with =E2=80=9C20=E2=80=9D

The pubdate field must be converted from the current format to the format
YYYYMMDD in order for a range search to be executed later.

Can anyone advise me how I can do this?

Thank you so much.
--=20
View this message in context: http://www.nabble.com/FileDocument---Confused=
-and-Need-Help.-tf4373049.html#a12464430
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 17:11:15 2007
Return-Path: <java-user-return-30118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55721 invoked from network); 3 Sep 2007 17:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 17:11:14 -0000
Received: (qmail 73793 invoked by uid 500); 3 Sep 2007 17:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73297 invoked by uid 500); 3 Sep 2007 17:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73286 invoked by uid 99); 3 Sep 2007 17:11:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 10:11:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gui@prosoma.com.br designates 67.19.26.18 as permitted sender)
Received: from [67.19.26.18] (HELO diesel.infoage.com.br) (67.19.26.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 17:12:10 +0000
Received: from davinci.prosoma (unknown [172.31.255.5])
	by diesel.infoage.com.br (Postfix) with ESMTP id 49E804742EA
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 14:07:55 -0300 (BRT)
Received: from [172.16.88.6] (unknown [172.16.88.6])
	by davinci.prosoma (Postfix) with ESMTP id 50BBBB77DE
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 14:15:09 -0300 (BRT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br> <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br>
Content-Transfer-Encoding: quoted-printable
From: Guilherme Barile <gui@prosoma.com.br>
Subject: Re: JdbcDirectory
Date: Mon, 3 Sep 2007 14:09:28 -0300
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

> 1) I don't understand why the index would get corrupted. We store =20
> huge data
> and meta-data using Lucene.

I got that information when lucene 1.4 was the lastest version, may =20
have changed. I'll trust you.

> 2) For this, I synced Lucene with the DB operations. If you use =20
> Hibernate,
> theres an API for that. Or, you could just write your own factory =20
> methods to
> add/delete/edit index documents when a DB operation takes place =20
> (e.g edit).

You mean every time you update the db, you update the index also ? =20
I'm actually planning not to use any external entity, and rely =20
everything on Lucene. Wondered if some simple query (get the lastest =20
document for example) would solve the versioning issue

Thanks a lot

Gui

>
> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>>
>> Hello,
>>         We're starting a new project, which basically catalogs =20
>> everything
>> we
>> have in the department (different objects with different metadata),
>> and as I used Lucene before, I'm preparing a presentation to the
>> team, as I think it would really simplify the storage of metadata and
>> documents.
>>         The system will be pretty straightforward, all items will be
>> cataloged,  and most of them won't be changed too much ( I'll raise
>> this question later ).
>>         So, here are my main concerns, hope you can help
>>
>> 1) Storing all data (index and content) wasn't recommended in the
>> past, as the index could become corrupted. Do I have this problem if
>> I use a JdbcDirectory (PostgreSQL backend) ? I already read about the
>> performance degradation when using a database as main storage, but
>> this won't be a problem.
>>
>> 2) Lucene doesn't support incremental editing (a new Document will be
>> created when someone edits an item), so is it possible to manage some
>> kind of versioning ? Anyone ever implemented something this way ?
>>
>> Thanks a lot for the attention
>>
>> Guilherme Barile
>> Prosoma Inform=E1tica
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 17:23:25 2007
Return-Path: <java-user-return-30119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61574 invoked from network); 3 Sep 2007 17:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 17:23:23 -0000
Received: (qmail 83245 invoked by uid 500); 3 Sep 2007 17:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83199 invoked by uid 500); 3 Sep 2007 17:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83188 invoked by uid 99); 3 Sep 2007 17:23:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 10:23:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 17:23:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A1DD271C043; Mon,  3 Sep 2007 10:22:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9D8F071C030
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 10:22:48 -0700 (PDT)
Date: Mon, 3 Sep 2007 10:22:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: SV: OutOfMemoryError tokenizing a boring text file
In-Reply-To: <20070903130456.991BA724960@athena.apache.org>
Message-ID: <Pine.LNX.4.62.0709031009460.15078@radix.cryptio.net>
References: <20070903130456.991BA724960@athena.apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; FORMAT=flowed
Content-ID: <Pine.LNX.4.62.0709031020491.15078@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


: Setting writer.setMaxFieldLength(5000) (default is 10000)
: seems to eliminate the risk for an OutOfMemoryError,

that's because it now gives up after parsing 5000 tokens.

: To me, it appears that simply calling
:    new Field("content", new InputStreamReader(in, "ISO-8859-1"))
: on a plain text file causes Lucene to buffer it *all*.

Looking at this purely from an outside in perspective: how could that
be true?  If it was then why would calling setMaxFieldLength(5000) 
solve your problem -- limiting the number of tokens wouldn't matter if the 
problem occured becuase Lucene was buffering the entire reader.


It definitely seems like there is some room for improvement here ... it 
sounds almost like mayber there is a [HAND WAVEY AIR QUOTES] memory/object 
leakish [/HAND WAVEY AIR QUOTES] situation where even after a Token is 
read off the TokenStream the Token isn't being GCed.

Per: perhaps you could open a Jira issue and attach a unit test 
demonstrating the problem?  maybe something with an artificial Reader that 
just churns out a repeating sequence of characters forever?




-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 17:35:42 2007
Return-Path: <java-user-return-30120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66995 invoked from network); 3 Sep 2007 17:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 17:35:41 -0000
Received: (qmail 88564 invoked by uid 500); 3 Sep 2007 17:35:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88527 invoked by uid 500); 3 Sep 2007 17:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88515 invoked by uid 99); 3 Sep 2007 17:35:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 10:35:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 17:35:26 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1303204nfd
        for <java-user@lucene.apache.org>; Mon, 03 Sep 2007 10:35:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XTlPaRoKMhm7EE3hIpXQkrCMSeOUDOaqzViBVtP123OM19oiESYhWHLM3eiKXLk0dsO8Yw4Wo9oIMyh5v4ll2crYvgRNefvgsaJlj+K9fFeJC/Z8sl73ylcKsKlG2WKKgt/He3vP7HC9NZFIjgZcySNmAR+Clx5VjiHiVptAC+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SG760yWzj9Plq/1FyIv2/B4xqTH60WtvTpqiJYy0BehoRdE7xM8sRufUUDTQ9ePkapWgxAT3S8dE+2zJC9FmssKFLW8TFfBarV9Hvxho9ftmGhNUvqcukNcUOMYE+Hyai6PXoWmcF8MC4ral88ltCQCOmYi3yVDFgKgtEN8t3QE=
Received: by 10.82.190.2 with SMTP id n2mr11525961buf.1188840898774;
        Mon, 03 Sep 2007 10:34:58 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Mon, 3 Sep 2007 10:34:58 -0700 (PDT)
Message-ID: <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com>
Date: Mon, 3 Sep 2007 13:34:58 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JdbcDirectory
In-Reply-To: <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10869_25267285.1188840898722"
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
	 <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
	 <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10869_25267285.1188840898722
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yes. Every time a user updates a piece of information, you do the update in
the DB as well as the Index. If you are using Hibernate, they have an API
that does this mapping. I am not sure why you plan to store data in the
Index ?? Storing data is the DBs job, searching is the Index job. I would
suggest you have both (a schema for your data and an index). Thats what I
did. I could have stored everything on the Lucene Index, but I am scared as
the application grows I will need a DB system eventually. I don't think
people use Lucene to "store" data just as they do it in a DBMS.

-
Askar

On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>
> > 1) I don't understand why the index would get corrupted. We store
> > huge data
> > and meta-data using Lucene.
>
> I got that information when lucene 1.4 was the lastest version, may
> have changed. I'll trust you.
>
> > 2) For this, I synced Lucene with the DB operations. If you use
> > Hibernate,
> > theres an API for that. Or, you could just write your own factory
> > methods to
> > add/delete/edit index documents when a DB operation takes place
> > (e.g edit).
>
> You mean every time you update the db, you update the index also ?
> I'm actually planning not to use any external entity, and rely
> everything on Lucene. Wondered if some simple query (get the lastest
> document for example) would solve the versioning issue
>
> Thanks a lot
>
> Gui
>
> >
> > On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
> >>
> >> Hello,
> >>         We're starting a new project, which basically catalogs
> >> everything
> >> we
> >> have in the department (different objects with different metadata),
> >> and as I used Lucene before, I'm preparing a presentation to the
> >> team, as I think it would really simplify the storage of metadata and
> >> documents.
> >>         The system will be pretty straightforward, all items will be
> >> cataloged,  and most of them won't be changed too much ( I'll raise
> >> this question later ).
> >>         So, here are my main concerns, hope you can help
> >>
> >> 1) Storing all data (index and content) wasn't recommended in the
> >> past, as the index could become corrupted. Do I have this problem if
> >> I use a JdbcDirectory (PostgreSQL backend) ? I already read about the
> >> performance degradation when using a database as main storage, but
> >> this won't be a problem.
> >>
> >> 2) Lucene doesn't support incremental editing (a new Document will be
> >> created when someone edits an item), so is it possible to manage some
> >> kind of versioning ? Anyone ever implemented something this way ?
> >>
> >> Thanks a lot for the attention
> >>
> >> Guilherme Barile
> >> Prosoma Inform=E1tica
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10869_25267285.1188840898722--

From java-user-return-30121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 18:48:10 2007
Return-Path: <java-user-return-30121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98865 invoked from network); 3 Sep 2007 18:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 18:48:09 -0000
Received: (qmail 47908 invoked by uid 500); 3 Sep 2007 18:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47867 invoked by uid 500); 3 Sep 2007 18:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47856 invoked by uid 99); 3 Sep 2007 18:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 11:47:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gui@prosoma.com.br designates 67.19.26.18 as permitted sender)
Received: from [67.19.26.18] (HELO diesel.infoage.com.br) (67.19.26.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 18:47:51 +0000
Received: from davinci.prosoma (unknown [172.31.255.5])
	by diesel.infoage.com.br (Postfix) with ESMTP id 0536B4742C1
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 15:44:47 -0300 (BRT)
Received: from [172.16.88.6] (unknown [172.16.88.6])
	by davinci.prosoma (Postfix) with ESMTP id DFF3DB77DE
	for <java-user@lucene.apache.org>; Mon,  3 Sep 2007 15:52:02 -0300 (BRT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com>
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br> <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com> <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br> <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <A4981700-4522-4E09-822C-BCD49CED72A9@prosoma.com.br>
Content-Transfer-Encoding: quoted-printable
From: Guilherme Barile <gui@prosoma.com.br>
Subject: Re: JdbcDirectory
Date: Mon, 3 Sep 2007 15:47:06 -0300
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Storing the data in the index, mainly for non-structured data.
We plan to implement something like this ThingDB from http://=20
demo.openlibrary.org/about/tech, and though that maybe lucene + =20
JdbcDirectory could act as a backend.

gui

On Sep 3, 2007, at 2:34 PM, Askar Zaidi wrote:

> Yes. Every time a user updates a piece of information, you do the =20
> update in
> the DB as well as the Index. If you are using Hibernate, they have =20
> an API
> that does this mapping. I am not sure why you plan to store data in =20=

> the
> Index ?? Storing data is the DBs job, searching is the Index job. I =20=

> would
> suggest you have both (a schema for your data and an index). Thats =20
> what I
> did. I could have stored everything on the Lucene Index, but I am =20
> scared as
> the application grows I will need a DB system eventually. I don't =20
> think
> people use Lucene to "store" data just as they do it in a DBMS.
>
> -
> Askar
>
> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>>
>>> 1) I don't understand why the index would get corrupted. We store
>>> huge data
>>> and meta-data using Lucene.
>>
>> I got that information when lucene 1.4 was the lastest version, may
>> have changed. I'll trust you.
>>
>>> 2) For this, I synced Lucene with the DB operations. If you use
>>> Hibernate,
>>> theres an API for that. Or, you could just write your own factory
>>> methods to
>>> add/delete/edit index documents when a DB operation takes place
>>> (e.g edit).
>>
>> You mean every time you update the db, you update the index also ?
>> I'm actually planning not to use any external entity, and rely
>> everything on Lucene. Wondered if some simple query (get the lastest
>> document for example) would solve the versioning issue
>>
>> Thanks a lot
>>
>> Gui
>>
>>>
>>> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>>>>
>>>> Hello,
>>>>         We're starting a new project, which basically catalogs
>>>> everything
>>>> we
>>>> have in the department (different objects with different metadata),
>>>> and as I used Lucene before, I'm preparing a presentation to the
>>>> team, as I think it would really simplify the storage of =20
>>>> metadata and
>>>> documents.
>>>>         The system will be pretty straightforward, all items =20
>>>> will be
>>>> cataloged,  and most of them won't be changed too much ( I'll raise
>>>> this question later ).
>>>>         So, here are my main concerns, hope you can help
>>>>
>>>> 1) Storing all data (index and content) wasn't recommended in the
>>>> past, as the index could become corrupted. Do I have this =20
>>>> problem if
>>>> I use a JdbcDirectory (PostgreSQL backend) ? I already read =20
>>>> about the
>>>> performance degradation when using a database as main storage, but
>>>> this won't be a problem.
>>>>
>>>> 2) Lucene doesn't support incremental editing (a new Document =20
>>>> will be
>>>> created when someone edits an item), so is it possible to manage =20=

>>>> some
>>>> kind of versioning ? Anyone ever implemented something this way ?
>>>>
>>>> Thanks a lot for the attention
>>>>
>>>> Guilherme Barile
>>>> Prosoma Inform=E1tica
>>>> -------------------------------------------------------------------=20=

>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 20:14:50 2007
Return-Path: <java-user-return-30122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22573 invoked from network); 3 Sep 2007 20:14:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 20:14:48 -0000
Received: (qmail 20993 invoked by uid 500); 3 Sep 2007 20:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20954 invoked by uid 500); 3 Sep 2007 20:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20943 invoked by uid 99); 3 Sep 2007 20:14:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 13:14:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 20:14:31 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1456717fkz
        for <java-user@lucene.apache.org>; Mon, 03 Sep 2007 13:14:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E6uGABXs6j9H+qWaqy+hnyO7MJL9EzWBkTfDPu/aFFNZHzbl8ahTbBUmnn9fjlAPtdULxfNTjZex5FXyelSVwiA0wKf9YHReeuBqbGn7AH3NphR+Uho/3x+zKUzcsagAR4zlDL2jE6parbU8rJsAp6Ujg2L/+rk0/eT5r8g+X3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HgefzhqOqa2F5SNkKbOztFmM+6/Dvn0OGeQxSnPuv81uHhp8TAeV7lRCsrZ92r6MixPKoQ9uH/XmNtkLkW0QPXd6gM8yelspxfuAS5080GsQBO8QfuoJG1e8ATCbbvVgIuQpowk85iHM5jVlNeIWj9XO6oH2G53WSeS6Rxjl/Ec=
Received: by 10.82.174.20 with SMTP id w20mr4802273bue.1188850448600;
        Mon, 03 Sep 2007 13:14:08 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Mon, 3 Sep 2007 13:14:08 -0700 (PDT)
Message-ID: <359a92830709031314l68e8668fj612a2784eebfe4c1@mail.gmail.com>
Date: Mon, 3 Sep 2007 16:14:08 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing in pieces?
In-Reply-To: <df27a55b0708311952n1d3d74d4s5b3c7f96565c2fd3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15732_25051033.1188850448559"
References: <20070831201144.M23585@www.botspiritcompany.com>
	 <6e3ae6310708311430p4a5731c7x68f60c38bf38aaa7@mail.gmail.com>
	 <df27a55b0708311952n1d3d74d4s5b3c7f96565c2fd3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15732_25051033.1188850448559
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below..

On 8/31/07, Berlin Brown <berlin.brown@gmail.com> wrote:
>
> So I am assuming that is not just a matter of "indexing" to that same
> directory as you "indexed" before.


No, that's all it is. When you open an index, for writing, there
is a flag indicating "overwrite or append". So if
you can just select new records from your index that
aren't already in your index, you can easily just add
the new ones. This assumes that each message is a
lucene document..


So, based on what you are saying, you would have to reload the
> previous index (eg, INDEX_DIR_OLD) and then index the new content.
> When I mean "index", I am talking about actually invoking lucene to
> merge the content.
>
> For example, it isnt just a matter of indexing to index_dir_old and
> then to index_dir_new and then copying the lucene index files into
> another directory index_dir_cur.


You don't need to copy that much. Just open the current
index and append more records. You can still search
the index even as you are adding new documents, although
you'll have to close and reopen your *reader* to see the
new content.


On 8/31/07, Chris Lu <chris.lu@gmail.com> wrote:
> > I think you can simply change you sql to select only the recently
> updated
> > messages, and add to your existing index. Although adding to an existing
>
> > large index also takes a long time, it should be quicker than
> re-building
> > the whole index.
> >
> > If your index continues to grow, you may need to have a dedicated server
> for
> > indexing and searching.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> >
> > On 8/31/07, bbrown <bbrown@botspiritcompany.com> wrote:
> > >
> > > I have been fine with my database (discussion forum) to lucene.  I am
> > > taking
> > > the simplest approach, eg; I have a discussion forum which are just
> text
> > > messages, I take those out of the databse and then index the content.
> > >
> > > I am having troubling because I have hundreds of thousands of messages
> and
> > > it
> > > takes a while, eating my server cpu.  I was thinking I would just
> index
> > > say a
> > > portion of the database.  For example, index records 1-100 and then
> > > 101-200.
> > > Can I just index to that index directory without deleting the existing
> > > index
> > > segment files that are already there?  Or is it more complicated than
> > > that.
> > >
> > > --
> > > Berlin Brown
> > > [berlin dot brown at gmail dot com]
> > > http://botspiritcompany.com/botlist/?
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> --
> Berlin Brown
> http://www.newspiritcompany.com - newspirit technologies
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15732_25051033.1188850448559--

From java-user-return-30123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 03 22:41:25 2007
Return-Path: <java-user-return-30123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43801 invoked from network); 3 Sep 2007 22:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Sep 2007 22:41:23 -0000
Received: (qmail 68571 invoked by uid 500); 3 Sep 2007 22:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68540 invoked by uid 500); 3 Sep 2007 22:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68529 invoked by uid 99); 3 Sep 2007 22:41:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 15:41:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 22:42:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISKb8-00049X-Ve
	for java-user@lucene.apache.org; Mon, 03 Sep 2007 15:40:46 -0700
Message-ID: <12468920.post@talk.nabble.com>
Date: Mon, 3 Sep 2007 15:40:46 -0700 (PDT)
From: blueyben <bengyeow@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileDocument - Confused and Need Help.
In-Reply-To: <12464430.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bengyeow@gmail.com
References: <12464430.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can anyone provide me some guidance?
-- 
View this message in context: http://www.nabble.com/FileDocument---Confused-and-Need-Help.-tf4373049.html#a12468920
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 05:04:10 2007
Return-Path: <java-user-return-30124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42435 invoked from network); 4 Sep 2007 05:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 05:04:08 -0000
Received: (qmail 80015 invoked by uid 500); 4 Sep 2007 05:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79960 invoked by uid 500); 4 Sep 2007 05:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79947 invoked by uid 99); 4 Sep 2007 05:03:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 22:03:57 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andreas.guther@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 05:03:53 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2255029wah
        for <java-user@lucene.apache.org>; Mon, 03 Sep 2007 22:03:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JMGEYVmcpt+qgVPzJFD5YaxxPCzBXKeJXjnT5b34j+iDH0D08e8TX6AqQgNJdBZbVOk2E/wzJ+4Iu3FWBoY6gLeXjVhN/LMwksyko2eBapkcwvDBjbmVlipOf9Du6Xb7J2nkneChQf/4iE/62g92Owex7A6pDg2uA6RKjeQOpr4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pqI/f85V63YzXYDeqtCzZxTuYDoMjiHEwoX11xjVWHTFNNRnvznpMCs9gXpxqVT2Eoeq2EMscTZ8L7CQs3+O+WdoSKWmYAinrD7YNrsYzEuJ8V41JjN8z855AeLZd260pPLI0EblCFubwScI3hno5pa57RefWCV8QUCBr8CO8wI=
Received: by 10.114.38.2 with SMTP id l2mr340998wal.1188882212610;
        Mon, 03 Sep 2007 22:03:32 -0700 (PDT)
Received: by 10.114.234.11 with HTTP; Mon, 3 Sep 2007 22:03:32 -0700 (PDT)
Message-ID: <c38ea6f20709032203wbbab751i8a6caef9056182cf@mail.gmail.com>
Date: Mon, 3 Sep 2007 22:03:32 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileDocument - Confused and Need Help.
In-Reply-To: <12464430.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15321_27917036.1188882212583"
References: <12464430.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15321_27917036.1188882212583
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Blueyben,

What you describe is a general Java time conversion problem, not a Lucene
related one.

You will need to do a search on "Java time format" which should bring you
amongst other links to
http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html.

You might also be interested for time formatting to look into
http://joda-time.sourceforge.net/.


Andreas


On 9/3/07, blueyben <bengyeow@gmail.com> wrote:
>
>
> Dear all, I am new to Lucene, am trying with the basics.
>
> Basically I created sample text files with fields as follows:
>
> textid 17
> pubdate 63/01/04
> pageid 20
>
> I have been trying to edit FileDocument.java to read the fields above and
>
> 1. Index "textid" with value "17"
> 2. Index "pubdate" with value "19630104"
> 3. Index "pageid" with "20"
>
> The pubdate field must be converted from the current format to the format
> YYYYMMDD in order for a range search to be executed later.
>
> Can anyone advise me how I can do this?
>
> Thank you so much.
> --
> View this message in context:
> http://www.nabble.com/FileDocument---Confused-and-Need-Help.-tf4373049.html#a12464430
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15321_27917036.1188882212583--

From java-user-return-30125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 05:14:28 2007
Return-Path: <java-user-return-30125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45953 invoked from network); 4 Sep 2007 05:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 05:14:26 -0000
Received: (qmail 86278 invoked by uid 500); 4 Sep 2007 05:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86240 invoked by uid 500); 4 Sep 2007 05:14:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86229 invoked by uid 99); 4 Sep 2007 05:14:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Sep 2007 22:14:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [63.133.162.100] (HELO mail.visvo.com) (63.133.162.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 05:15:25 +0000
Received: from [192.168.1.151] (unknown [192.168.1.151])
	by mail.visvo.com (Postfix) with ESMTP id 1514569BFB
	for <java-user@lucene.apache.org>; Tue,  4 Sep 2007 00:13:41 -0500 (CDT)
Message-ID: <46DCE97C.40601@visvo.com>
Date: Tue, 04 Sep 2007 00:13:32 -0500
From: Sagar Naik <sagar@visvo.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileDocument - Confused and Need Help.
References: <12464430.post@talk.nabble.com>
In-Reply-To: <12464430.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-visvo.com-MailScanner-Information: Please contact the ISP for more information
X-visvo.com-MailScanner: Found to be clean
X-visvo.com-MailScanner-From: sagar@visvo.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Hey

Have a look  at "org.apache.lucene.document.DateTools" class
I think u need not edit Document.java . U shud be able to use existing 
classes (atleast from the email content so far)

Also, take a look at org.apache.lucene.queryParser.QueryParser  for the 
DateTools usage

- Sagar Naik


blueyben wrote:
> Dear all, I am new to Lucene, am trying with the basics.
>
> Basically I created sample text files with fields as follows:
>
> textid 17
> pubdate 63/01/04
> pageid 20
>
> I have been trying to edit FileDocument.java to read the fields above and
>
> 1. Index textid with value 17
> 2. Index pubdate with value 19630104
> 3. Index pageid with 20
>
> The pubdate field must be converted from the current format to the format
> YYYYMMDD in order for a range search to be executed later.
>
> Can anyone advise me how I can do this?
>
> Thank you so much.
>   


-- 
This message has been scanned for viruses and
dangerous content and is believed to be clean.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 10:20:20 2007
Return-Path: <java-user-return-30126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41882 invoked from network); 4 Sep 2007 10:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 10:20:19 -0000
Received: (qmail 31067 invoked by uid 500); 4 Sep 2007 10:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30962 invoked by uid 500); 4 Sep 2007 10:20:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30951 invoked by uid 99); 4 Sep 2007 10:20:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 03:20:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 10:20:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISVVU-0003Hg-7G
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 03:19:40 -0700
Message-ID: <12475468.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 03:19:40 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Java Heap Space -Out Of Memory Error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
       i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB of
records using MultiReader class.

here is the following code snippet:


     
                                         Directory indexDir2 = 
                      FSDirectory.getDirectory(indexSourceDir02,false);
                                         IndexReader indexSource2 =
IndexReader.open(indexDir2);
                                       Directory indexDir3 = 
                                            
FSDirectory.getDirectory(indexSourceDir03,false);
                                         IndexReader indexSource3 =
IndexReader.open(indexDir3);
                                         Directory indexDir4 = 
                                            
FSDirectory.getDirectory(indexSourceDir04,false);
                                         IndexReader indexSource4 =
IndexReader.open(indexDir4); 
                                        
           
                                         
        IndexReader[] readArray = {indexSource2,indexSource3,indexSource4};
        //merged reader
        IndexReader mergedReader = new MultiReader(readArray);
        IndexSearcher is = new IndexSearcher(mergedReader);
        
                                
                                 QueryParser parser = 
                                     new QueryParser("contents" ,new
StandardAnalyzer());
                                 
                                 
                                String searchQuery= 
                                       new
StringBuffer().append(inputNo).append(" AND dateSc:["
).append(fromDate).append(" TO ").append(toDate).append("]").append("
").append("AND").append(" ").append(callTyp).toString();
                                   
                                 
                                 
                                 Query callDetailquery =
parser.parse(searchQuery);
                                 
                                 hits = is.search(callDetailquery); 


it takes 300 MB of RAM for every search and it is very very slow is there
any other way to control the Memory and to make search faster.i use
SINGLETON  to use the IndexSearcher as a one time used object for all the
instances.
-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12475468
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 11:35:29 2007
Return-Path: <java-user-return-30127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81722 invoked from network); 4 Sep 2007 11:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 11:35:28 -0000
Received: (qmail 12589 invoked by uid 500); 4 Sep 2007 11:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12551 invoked by uid 500); 4 Sep 2007 11:35:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12531 invoked by uid 99); 4 Sep 2007 11:35:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 04:35:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 11:36:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISWgB-0005Ck-U8
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 04:34:47 -0700
Message-ID: <12476389.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 04:34:47 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to implement searching "in time" efficiently
In-Reply-To: <359a92830708240653v5cceb3f1rfd5664f574b0d57e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <8E5BA7FAF994C6409A8E074B78EB4677013CE69C@14sha-msg02.zm.sd.mediazone.com> <359a92830708240653v5cceb3f1rfd5664f574b0d57e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,
         help me for this search in time efficiently.

Erick Erickson wrote:
> 
> This topic has been discussed a number of times, I suggest you
> search the mail archives as that will get you very complete answers
> more quickly. See
> http://www.gossamer-threads.com/lists/lucene/java-user/
> 
> If that doesn't get you any help, let us know.
> 
> Best
> Erick
> 
> On 8/24/07, Kai Hu <kai.hu@dusee.cn> wrote:
>>
>> Hi,all
>>
>>          I want user could search record after he/she insert a record
>> immediately use lucene,
>>
>> When user insert a record ,I add the document into the index files. When
>> search  I new an IndexSearcher instance everytime to search the new
>> records,but it is unefficient, because indexSearcher will cost much time
>> in read or sort documents. If I only use a single IndexSearcher , it
>> cannot search the newly committed changes . Is there any better way?
>> Help me ,thanks....
>>
>>
>>
>> kai
>>
>>
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-implement-searching-%22in-time%22-efficiently-tf4321594.html#a12476389
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 11:37:08 2007
Return-Path: <java-user-return-30128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82635 invoked from network); 4 Sep 2007 11:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 11:37:06 -0000
Received: (qmail 17192 invoked by uid 500); 4 Sep 2007 11:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17161 invoked by uid 500); 4 Sep 2007 11:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17150 invoked by uid 99); 4 Sep 2007 11:36:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 04:36:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 11:38:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISWhp-0005F2-CV
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 04:36:29 -0700
Message-ID: <12476392.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 04:36:29 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12475468.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I think you store dateSc with full precision i.e. with time. You should
consider to index it just date part or to the resolution you really need. It
should reduce the memory it use when constructing DateRangeQuery and plus it
will improve search performance as well.



Sebastin wrote:
> 
> Hi All,
>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB of
> records using MultiReader class.
> 
> here is the following code snippet:
> 
> 
>      
>                                          Directory indexDir2 = 
>                       FSDirectory.getDirectory(indexSourceDir02,false);
>                                          IndexReader indexSource2 =
> IndexReader.open(indexDir2);
>                                        Directory indexDir3 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir03,false);
>                                          IndexReader indexSource3 =
> IndexReader.open(indexDir3);
>                                          Directory indexDir4 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir04,false);
>                                          IndexReader indexSource4 =
> IndexReader.open(indexDir4); 
>                                         
>            
>                                          
>         IndexReader[] readArray =
> {indexSource2,indexSource3,indexSource4};
>         //merged reader
>         IndexReader mergedReader = new MultiReader(readArray);
>         IndexSearcher is = new IndexSearcher(mergedReader);
>         
>                                 
>                                  QueryParser parser = 
>                                      new QueryParser("contents" ,new
> StandardAnalyzer());
>                                  
>                                  
>                                 String searchQuery= 
>                                        new
> StringBuffer().append(inputNo).append(" AND dateSc:["
> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
> ").append("AND").append(" ").append(callTyp).toString();
>                                    
>                                  
>                                  
>                                  Query callDetailquery =
> parser.parse(searchQuery);
>                                  
>                                  hits = is.search(callDetailquery); 
> 
> 
> it takes 300 MB of RAM for every search and it is very very slow is there
> any other way to control the Memory and to make search faster.i use
> SINGLETON  to use the IndexSearcher as a one time used object for all the
> instances.
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12476392
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 11:50:23 2007
Return-Path: <java-user-return-30129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91455 invoked from network); 4 Sep 2007 11:50:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 11:50:22 -0000
Received: (qmail 39420 invoked by uid 500); 4 Sep 2007 11:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39296 invoked by uid 500); 4 Sep 2007 11:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39285 invoked by uid 99); 4 Sep 2007 11:50:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 04:50:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 11:50:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISWug-0005ZW-6Z
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 04:49:46 -0700
Message-ID: <12476607.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 04:49:46 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12475468.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Check out Wiki for more information at
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing



Sebastin wrote:
> 
> Hi All,
>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB of
> records using MultiReader class.
> 
> here is the following code snippet:
> 
> 
>      
>                                          Directory indexDir2 = 
>                       FSDirectory.getDirectory(indexSourceDir02,false);
>                                          IndexReader indexSource2 =
> IndexReader.open(indexDir2);
>                                        Directory indexDir3 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir03,false);
>                                          IndexReader indexSource3 =
> IndexReader.open(indexDir3);
>                                          Directory indexDir4 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir04,false);
>                                          IndexReader indexSource4 =
> IndexReader.open(indexDir4); 
>                                         
>            
>                                          
>         IndexReader[] readArray =
> {indexSource2,indexSource3,indexSource4};
>         //merged reader
>         IndexReader mergedReader = new MultiReader(readArray);
>         IndexSearcher is = new IndexSearcher(mergedReader);
>         
>                                 
>                                  QueryParser parser = 
>                                      new QueryParser("contents" ,new
> StandardAnalyzer());
>                                  
>                                  
>                                 String searchQuery= 
>                                        new
> StringBuffer().append(inputNo).append(" AND dateSc:["
> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
> ").append("AND").append(" ").append(callTyp).toString();
>                                    
>                                  
>                                  
>                                  Query callDetailquery =
> parser.parse(searchQuery);
>                                  
>                                  hits = is.search(callDetailquery); 
> 
> 
> it takes 300 MB of RAM for every search and it is very very slow is there
> any other way to control the Memory and to make search faster.i use
> SINGLETON  to use the IndexSearcher as a one time used object for all the
> instances.
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12476607
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 11:59:09 2007
Return-Path: <java-user-return-30130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97038 invoked from network); 4 Sep 2007 11:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 11:59:08 -0000
Received: (qmail 53095 invoked by uid 500); 4 Sep 2007 11:58:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53054 invoked by uid 500); 4 Sep 2007 11:58:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53043 invoked by uid 99); 4 Sep 2007 11:58:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 04:58:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gui@prosoma.com.br designates 67.19.26.18 as permitted sender)
Received: from [67.19.26.18] (HELO diesel.infoage.com.br) (67.19.26.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 12:00:05 +0000
Received: from davinci.prosoma (unknown [172.31.255.5])
	by diesel.infoage.com.br (Postfix) with ESMTP id 4334D474107
	for <java-user@lucene.apache.org>; Tue,  4 Sep 2007 08:55:41 -0300 (BRT)
Received: from [172.16.88.6] (unknown [172.16.88.6])
	by davinci.prosoma (Postfix) with ESMTP id 06E27B77DE
	for <java-user@lucene.apache.org>; Tue,  4 Sep 2007 09:03:06 -0300 (BRT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <A4981700-4522-4E09-822C-BCD49CED72A9@prosoma.com.br>
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br> <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com> <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br> <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com> <A4981700-4522-4E09-822C-BCD49CED72A9@prosoma.com.br>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <44C13303-6565-4391-804E-D8C5534332E3@prosoma.com.br>
Content-Transfer-Encoding: quoted-printable
From: Guilherme Barile <gui@prosoma.com.br>
Subject: Data in the Index [was: JdbcDirectory]
Date: Tue, 4 Sep 2007 08:58:07 -0300
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

So,
	Anyone ever stored the data in the index also ? What are your =20=

experiences ?

Thanks a lot

Gui

On Sep 3, 2007, at 3:47 PM, Guilherme Barile wrote:

> Storing the data in the index, mainly for non-structured data.
> We plan to implement something like this ThingDB from http://=20
> demo.openlibrary.org/about/tech, and though that maybe lucene + =20
> JdbcDirectory could act as a backend.
>
> gui
>
> On Sep 3, 2007, at 2:34 PM, Askar Zaidi wrote:
>
>> Yes. Every time a user updates a piece of information, you do the =20
>> update in
>> the DB as well as the Index. If you are using Hibernate, they have =20=

>> an API
>> that does this mapping. I am not sure why you plan to store data =20
>> in the
>> Index ?? Storing data is the DBs job, searching is the Index job. =20
>> I would
>> suggest you have both (a schema for your data and an index). Thats =20=

>> what I
>> did. I could have stored everything on the Lucene Index, but I am =20
>> scared as
>> the application grows I will need a DB system eventually. I don't =20
>> think
>> people use Lucene to "store" data just as they do it in a DBMS.
>>
>> -
>> Askar
>>
>> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>>>
>>>> 1) I don't understand why the index would get corrupted. We store
>>>> huge data
>>>> and meta-data using Lucene.
>>>
>>> I got that information when lucene 1.4 was the lastest version, may
>>> have changed. I'll trust you.
>>>
>>>> 2) For this, I synced Lucene with the DB operations. If you use
>>>> Hibernate,
>>>> theres an API for that. Or, you could just write your own factory
>>>> methods to
>>>> add/delete/edit index documents when a DB operation takes place
>>>> (e.g edit).
>>>
>>> You mean every time you update the db, you update the index also ?
>>> I'm actually planning not to use any external entity, and rely
>>> everything on Lucene. Wondered if some simple query (get the lastest
>>> document for example) would solve the versioning issue
>>>
>>> Thanks a lot
>>>
>>> Gui
>>>
>>>>
>>>> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>>>>>
>>>>> Hello,
>>>>>         We're starting a new project, which basically catalogs
>>>>> everything
>>>>> we
>>>>> have in the department (different objects with different =20
>>>>> metadata),
>>>>> and as I used Lucene before, I'm preparing a presentation to the
>>>>> team, as I think it would really simplify the storage of =20
>>>>> metadata and
>>>>> documents.
>>>>>         The system will be pretty straightforward, all items =20
>>>>> will be
>>>>> cataloged,  and most of them won't be changed too much ( I'll =20
>>>>> raise
>>>>> this question later ).
>>>>>         So, here are my main concerns, hope you can help
>>>>>
>>>>> 1) Storing all data (index and content) wasn't recommended in the
>>>>> past, as the index could become corrupted. Do I have this =20
>>>>> problem if
>>>>> I use a JdbcDirectory (PostgreSQL backend) ? I already read =20
>>>>> about the
>>>>> performance degradation when using a database as main storage, but
>>>>> this won't be a problem.
>>>>>
>>>>> 2) Lucene doesn't support incremental editing (a new Document =20
>>>>> will be
>>>>> created when someone edits an item), so is it possible to =20
>>>>> manage some
>>>>> kind of versioning ? Anyone ever implemented something this way ?
>>>>>
>>>>> Thanks a lot for the attention
>>>>>
>>>>> Guilherme Barile
>>>>> Prosoma Inform=E1tica
>>>>> ------------------------------------------------------------------=20=

>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 12:25:15 2007
Return-Path: <java-user-return-30131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10247 invoked from network); 4 Sep 2007 12:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 12:25:14 -0000
Received: (qmail 99705 invoked by uid 500); 4 Sep 2007 12:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98872 invoked by uid 500); 4 Sep 2007 12:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98861 invoked by uid 99); 4 Sep 2007 12:25:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 05:25:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 12:24:59 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1502203nfd
        for <java-user@lucene.apache.org>; Tue, 04 Sep 2007 05:24:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LwNxjHIldHIMC0/cPH0irh76dKrqF+KGdeGZ9KyxFDjLNJAz1NrfzOT2iYgpiX0TCZLuNHEU988RChSJEcvDln+T6/bPeQoV5uUW1WDQfTm21go0B50q83DnbpuWE3mhvWb+TR+xe8RYJbHkOFxreKk65FOAPukvaLxMMTYXa5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Q/Nn5ja8H8NgoQJMXRDXmNMPHaHtjjpHtKI5QVj5IApP0tSzFIRTPy/8HGPRnAzFweh5PFY3biCzuvNcItGtr/jsePvpHQXh74Eckpa3Ivb0T1qJVtFrlkY5bdqWJxHi0iaWDpb9l3pTR2YtkZEPd5kY+QibsBprVtJJYr5/tw4=
Received: by 10.78.138.14 with SMTP id l14mr4071273hud.1188908677673;
        Tue, 04 Sep 2007 05:24:37 -0700 (PDT)
Received: by 10.78.26.4 with HTTP; Tue, 4 Sep 2007 05:24:37 -0700 (PDT)
Message-ID: <48b038c60709040524n3f55fb82qdb8c4b8b5863e567@mail.gmail.com>
Date: Tue, 4 Sep 2007 08:24:37 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Data in the Index [was: JdbcDirectory]
In-Reply-To: <44C13303-6565-4391-804E-D8C5534332E3@prosoma.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
	 <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
	 <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br>
	 <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com>
	 <A4981700-4522-4E09-822C-BCD49CED72A9@prosoma.com.br>
	 <44C13303-6565-4391-804E-D8C5534332E3@prosoma.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

At first, we thought we would use a "dual" approach, an Lucene index
and a RDBMS for storage.

While prototyping, for simplicity sake, we used the Lucene index as
storage, thinking we could easily replace it later. So far, speed is
satisfying enough that we are going to keep data there util retrieval
performance becomes an issue.

But our data is mainly "static", with changes only a few times a week.

Our main data is an XML document.

Hope this helps.

Patrick

On 9/4/07, Guilherme Barile <gui@prosoma.com.br> wrote:
> So,
>         Anyone ever stored the data in the index also ? What are your
> experiences ?
>
> Thanks a lot
>
> Gui
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 14:08:51 2007
Return-Path: <java-user-return-30132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57548 invoked from network); 4 Sep 2007 14:08:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 14:08:49 -0000
Received: (qmail 51024 invoked by uid 500); 4 Sep 2007 14:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50983 invoked by uid 500); 4 Sep 2007 14:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50972 invoked by uid 99); 4 Sep 2007 14:08:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 07:08:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 14:08:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISZ4e-0001gf-Vc
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 07:08:12 -0700
Message-ID: <12478804.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 07:08:12 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12476607.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi testn,
           i index the dateSc as 070904(2007/09/04) format.i am not using
any timestamp here.how can we effectively reopen the IndexSearcher  for an
hour and save the memory because my index gets updated every minute.

testn wrote:
> 
> Check out Wiki for more information at
> http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
> 
> 
> 
> Sebastin wrote:
>> 
>> Hi All,
>>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB of
>> records using MultiReader class.
>> 
>> here is the following code snippet:
>> 
>> 
>>      
>>                                          Directory indexDir2 = 
>>                       FSDirectory.getDirectory(indexSourceDir02,false);
>>                                          IndexReader indexSource2 =
>> IndexReader.open(indexDir2);
>>                                        Directory indexDir3 = 
>>                                             
>> FSDirectory.getDirectory(indexSourceDir03,false);
>>                                          IndexReader indexSource3 =
>> IndexReader.open(indexDir3);
>>                                          Directory indexDir4 = 
>>                                             
>> FSDirectory.getDirectory(indexSourceDir04,false);
>>                                          IndexReader indexSource4 =
>> IndexReader.open(indexDir4); 
>>                                         
>>            
>>                                          
>>         IndexReader[] readArray =
>> {indexSource2,indexSource3,indexSource4};
>>         //merged reader
>>         IndexReader mergedReader = new MultiReader(readArray);
>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>         
>>                                 
>>                                  QueryParser parser = 
>>                                      new QueryParser("contents" ,new
>> StandardAnalyzer());
>>                                  
>>                                  
>>                                 String searchQuery= 
>>                                        new
>> StringBuffer().append(inputNo).append(" AND dateSc:["
>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>> ").append("AND").append(" ").append(callTyp).toString();
>>                                    
>>                                  
>>                                  
>>                                  Query callDetailquery =
>> parser.parse(searchQuery);
>>                                  
>>                                  hits = is.search(callDetailquery); 
>> 
>> 
>> it takes 300 MB of RAM for every search and it is very very slow is there
>> any other way to control the Memory and to make search faster.i use
>> SINGLETON  to use the IndexSearcher as a one time used object for all the
>> instances.
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12478804
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 14:39:17 2007
Return-Path: <java-user-return-30133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71355 invoked from network); 4 Sep 2007 14:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 14:39:17 -0000
Received: (qmail 16199 invoked by uid 500); 4 Sep 2007 14:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16170 invoked by uid 500); 4 Sep 2007 14:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16159 invoked by uid 99); 4 Sep 2007 14:39:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 07:39:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 14:40:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISZY8-0002am-0w
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 07:38:40 -0700
Message-ID: <12479370.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 07:38:40 -0700 (PDT)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Look for strange encodings -- tokenization
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I'd want to know the best way to look for strange encodings on a Lucene
index.
i have several inputs where input can have been encoded on different sets. I
not always know if my guess about the encoding has been ok. Hence, I'd
thought of querying the index for some typical strings that would show bad
encodings.

All the index has been already constructed using the StandardAnalyzer. I
have read using another analyzer could yield some unexpected results... But
I suppose that's ok for my purposes - testing quality of the index.

Which way do you think it is better to tackle this issue? I've been taking a
look at the Analyzers -- the StandardAnalyzer. I thought about creating a
custom tokenizer that splits on letter, number, spaces so it only leaves
"weird" strings as tokens -- they will show bad encodings. Still, and
possibly due to lack of knowledge of lucene .) I have the feeling this can
be done better somehow.

Thanks a lot in advance!
-- 
View this message in context: http://www.nabble.com/Look-for-strange-encodings----tokenization-tf4378064.html#a12479370
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 15:50:05 2007
Return-Path: <java-user-return-30134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74481 invoked from network); 4 Sep 2007 15:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 15:50:04 -0000
Received: (qmail 83058 invoked by uid 500); 4 Sep 2007 15:49:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83014 invoked by uid 500); 4 Sep 2007 15:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83003 invoked by uid 99); 4 Sep 2007 15:49:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 08:49:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 15:51:02 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 9C21126E93
	for <java-user@lucene.apache.org>; Tue,  4 Sep 2007 11:49:26 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Tue, 04 Sep 2007 11:49:26 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 8159622440; Tue,  4 Sep 2007 11:49:26 -0400 (EDT)
Message-Id: <1188920966.23565.1208828727@webmail.messagingengine.com>
X-Sasl-Enc: OByLJBKLOgmm2A/f8uH/AP8rjXx4JskzO0FhAr37s807 1188920966
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com>
   <1187613226.27279.1206273727@webmail.messagingengine.com>
   <5ECBAD93-FCC4-475C-B0E9-CE97E165FB20@gmail.com>
Subject: Re: Lockless read-only deletions in IndexReader?
In-Reply-To: <5ECBAD93-FCC4-475C-B0E9-CE97E165FB20@gmail.com>
Date: Tue, 04 Sep 2007 11:49:26 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Excellent, a much simpler approach!

I think it should work?  Maybe override numDocs() as well?

Mike

"Karl Wettin" <karl.wettin@gmail.com> wrote:
> 
> 20 aug 2007 kl. 14.33 skrev Michael McCandless:
> 
> > "karl wettin" <karl.wettin@gmail.com> wrote:
> >
> >> I want to set documents in my IndexReader as deleted, but I will
> >> never commit these deletions. Sort of a filter on a reader rather
> >> than on a searcher, and no write-locks.
> >
> 
> >> I could go hacking in IndexReader, definalizing it for decoration of
> >> deleteDocument(int), or something like that, but would really
> >> prefere not to.
> >
> > Yeah I think it may just be cleanest to modify IndexReader to not
> > acquire the write lock nor commit its changes to the Directory on
> > close.
> 
> How about something simple as this:
> 
> public class DeleteFilteredIndexReader extends FilterIndexReader {
> 
>    public DeleteFilteredIndexReader(IndexReader in) {
>      super(in);
>      filter = new BitSet(in.maxDoc());
>    }
> 
>    private BitSet filter;
> 
>    public boolean isDeleted(int n) {
>      return filter.get(n) || super.isDeleted(n);
>    }
> 
>    public boolean hasDeletions() {
>      return filter.nextSetBit(0) > -1 || super.hasDeletions();
>    }
> 
> 
> I did not look in the classpath code of BitSet yet, but I suppose
> the nextSetBit(0) could be optimized.
> 
> 
> -- 
> karl
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 17:38:09 2007
Return-Path: <java-user-return-30135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27444 invoked from network); 4 Sep 2007 17:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 17:38:07 -0000
Received: (qmail 59012 invoked by uid 500); 4 Sep 2007 17:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58974 invoked by uid 500); 4 Sep 2007 17:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58963 invoked by uid 99); 4 Sep 2007 17:37:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 10:37:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 17:37:48 +0000
Received: by ug-out-1314.google.com with SMTP id a2so490794ugf
        for <java-user@lucene.apache.org>; Tue, 04 Sep 2007 10:37:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ROqtD9mtgAXN+jwOq858jjqTF1x1bfgLc6lrlYSLPVAr8Ik8KD7mn5+mCBBo24pv3nNa3y+7hKbV84HG4n0U1bTWF4aIMQ8B8Y2x6f1rhAyoGoxIfuLOisNP68osO5SKNbp1EMagyN4j3IN5Ae0JpIRYppFWIh6L2McMd7YJ1WU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RRND3/6IDMmk/C5Ysqarepen911Jjj/9CN9mXY9ywTUrdelHc6Jd46hSEdRV9CxZIENMaTOA2yyIP95A/XdpCBJaKzXuHQ1qjgjiZnTuHxYwJNFwmvS3Td65YUIycx0rFnU04A2DuGxh6z8bd8vJ7tsL19N9ubyyOBcYqXitesE=
Received: by 10.78.142.14 with SMTP id p14mr4365157hud.1188927445442;
        Tue, 04 Sep 2007 10:37:25 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Tue, 4 Sep 2007 10:37:25 -0700 (PDT)
Message-ID: <6e3ae6310709041037i49b55c9h87c0e0a8c6573f07@mail.gmail.com>
Date: Tue, 4 Sep 2007 10:37:25 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Data in the Index [was: JdbcDirectory]
In-Reply-To: <44C13303-6565-4391-804E-D8C5534332E3@prosoma.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22706_9383692.1188927445411"
References: <F80C0536-F2FB-46D6-9BB2-5C2C2909F7D8@prosoma.com.br>
	 <c0c0e1d40709030650u6b736c7bgc1409270f6799c43@mail.gmail.com>
	 <F3E0FFE5-BD0F-41D5-88C2-C73F57B79FB8@prosoma.com.br>
	 <c0c0e1d40709031034j528c27f8he4d3d3d9493e552a@mail.gmail.com>
	 <A4981700-4522-4E09-822C-BCD49CED72A9@prosoma.com.br>
	 <44C13303-6565-4391-804E-D8C5534332E3@prosoma.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22706_9383692.1188927445411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I store Lucene index outside database, and run indexing periodically to get
the latest updates, not depending on ORM APIs.
In general, search data can be slower to update unless some realtime
requirements.

Storing data in index saves trips to databases. This usually is a huge
difference on rendering speed comparing to retrieve the rest data from
database.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 9/4/07, Guilherme Barile <gui@prosoma.com.br> wrote:
>
> So,
>         Anyone ever stored the data in the index also ? What are your
> experiences ?
>
> Thanks a lot
>
> Gui
>
> On Sep 3, 2007, at 3:47 PM, Guilherme Barile wrote:
>
> > Storing the data in the index, mainly for non-structured data.
> > We plan to implement something like this ThingDB from http://
> > demo.openlibrary.org/about/tech, and though that maybe lucene +
> > JdbcDirectory could act as a backend.
> >
> > gui
> >
> > On Sep 3, 2007, at 2:34 PM, Askar Zaidi wrote:
> >
> >> Yes. Every time a user updates a piece of information, you do the
> >> update in
> >> the DB as well as the Index. If you are using Hibernate, they have
> >> an API
> >> that does this mapping. I am not sure why you plan to store data
> >> in the
> >> Index ?? Storing data is the DBs job, searching is the Index job.
> >> I would
> >> suggest you have both (a schema for your data and an index). Thats
> >> what I
> >> did. I could have stored everything on the Lucene Index, but I am
> >> scared as
> >> the application grows I will need a DB system eventually. I don't
> >> think
> >> people use Lucene to "store" data just as they do it in a DBMS.
> >>
> >> -
> >> Askar
> >>
> >> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
> >>>
> >>>> 1) I don't understand why the index would get corrupted. We store
> >>>> huge data
> >>>> and meta-data using Lucene.
> >>>
> >>> I got that information when lucene 1.4 was the lastest version, may
> >>> have changed. I'll trust you.
> >>>
> >>>> 2) For this, I synced Lucene with the DB operations. If you use
> >>>> Hibernate,
> >>>> theres an API for that. Or, you could just write your own factory
> >>>> methods to
> >>>> add/delete/edit index documents when a DB operation takes place
> >>>> (e.g edit).
> >>>
> >>> You mean every time you update the db, you update the index also ?
> >>> I'm actually planning not to use any external entity, and rely
> >>> everything on Lucene. Wondered if some simple query (get the lastest
> >>> document for example) would solve the versioning issue
> >>>
> >>> Thanks a lot
> >>>
> >>> Gui
> >>>
> >>>>
> >>>> On 9/3/07, Guilherme Barile <gui@prosoma.com.br> wrote:
> >>>>>
> >>>>> Hello,
> >>>>>         We're starting a new project, which basically catalogs
> >>>>> everything
> >>>>> we
> >>>>> have in the department (different objects with different
> >>>>> metadata),
> >>>>> and as I used Lucene before, I'm preparing a presentation to the
> >>>>> team, as I think it would really simplify the storage of
> >>>>> metadata and
> >>>>> documents.
> >>>>>         The system will be pretty straightforward, all items
> >>>>> will be
> >>>>> cataloged,  and most of them won't be changed too much ( I'll
> >>>>> raise
> >>>>> this question later ).
> >>>>>         So, here are my main concerns, hope you can help
> >>>>>
> >>>>> 1) Storing all data (index and content) wasn't recommended in the
> >>>>> past, as the index could become corrupted. Do I have this
> >>>>> problem if
> >>>>> I use a JdbcDirectory (PostgreSQL backend) ? I already read
> >>>>> about the
> >>>>> performance degradation when using a database as main storage, but
> >>>>> this won't be a problem.
> >>>>>
> >>>>> 2) Lucene doesn't support incremental editing (a new Document
> >>>>> will be
> >>>>> created when someone edits an item), so is it possible to
> >>>>> manage some
> >>>>> kind of versioning ? Anyone ever implemented something this way ?
> >>>>>
> >>>>> Thanks a lot for the attention
> >>>>>
> >>>>> Guilherme Barile
> >>>>> Prosoma Inform=E1tica
> >>>>> ------------------------------------------------------------------
> >>>>> ---
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22706_9383692.1188927445411--

From java-user-return-30136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 18:46:53 2007
Return-Path: <java-user-return-30136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56810 invoked from network); 4 Sep 2007 18:46:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 18:46:51 -0000
Received: (qmail 65409 invoked by uid 500); 4 Sep 2007 18:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65366 invoked by uid 500); 4 Sep 2007 18:46:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65355 invoked by uid 99); 4 Sep 2007 18:46:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 11:46:39 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 18:46:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISdPi-0002Qa-Ch
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 11:46:14 -0700
Message-ID: <12484208.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 11:46:14 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12478804.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can you provide more info about your index? How many documents, fields and
what is the average document length?


Sebastin wrote:
> 
> Hi testn,
>            i index the dateSc as 070904(2007/09/04) format.i am not using
> any timestamp here.how can we effectively reopen the IndexSearcher  for an
> hour and save the memory because my index gets updated every minute.
> 
> testn wrote:
>> 
>> Check out Wiki for more information at
>> http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
>> 
>> 
>> 
>> Sebastin wrote:
>>> 
>>> Hi All,
>>>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB of
>>> records using MultiReader class.
>>> 
>>> here is the following code snippet:
>>> 
>>> 
>>>      
>>>                                          Directory indexDir2 = 
>>>                       FSDirectory.getDirectory(indexSourceDir02,false);
>>>                                          IndexReader indexSource2 =
>>> IndexReader.open(indexDir2);
>>>                                        Directory indexDir3 = 
>>>                                             
>>> FSDirectory.getDirectory(indexSourceDir03,false);
>>>                                          IndexReader indexSource3 =
>>> IndexReader.open(indexDir3);
>>>                                          Directory indexDir4 = 
>>>                                             
>>> FSDirectory.getDirectory(indexSourceDir04,false);
>>>                                          IndexReader indexSource4 =
>>> IndexReader.open(indexDir4); 
>>>                                         
>>>            
>>>                                          
>>>         IndexReader[] readArray =
>>> {indexSource2,indexSource3,indexSource4};
>>>         //merged reader
>>>         IndexReader mergedReader = new MultiReader(readArray);
>>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>>         
>>>                                 
>>>                                  QueryParser parser = 
>>>                                      new QueryParser("contents" ,new
>>> StandardAnalyzer());
>>>                                  
>>>                                  
>>>                                 String searchQuery= 
>>>                                        new
>>> StringBuffer().append(inputNo).append(" AND dateSc:["
>>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>>> ").append("AND").append(" ").append(callTyp).toString();
>>>                                    
>>>                                  
>>>                                  
>>>                                  Query callDetailquery =
>>> parser.parse(searchQuery);
>>>                                  
>>>                                  hits = is.search(callDetailquery); 
>>> 
>>> 
>>> it takes 300 MB of RAM for every search and it is very very slow is
>>> there any other way to control the Memory and to make search faster.i
>>> use SINGLETON  to use the IndexSearcher as a one time used object for
>>> all the instances.
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12484208
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 19:46:28 2007
Return-Path: <java-user-return-30137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84725 invoked from network); 4 Sep 2007 19:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 19:46:24 -0000
Received: (qmail 59069 invoked by uid 500); 4 Sep 2007 19:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59036 invoked by uid 500); 4 Sep 2007 19:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59025 invoked by uid 99); 4 Sep 2007 19:46:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 12:46:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tonyqian@hotmail.com designates 65.54.246.77 as permitted sender)
Received: from [65.54.246.77] (HELO bay0-omc1-s5.bay0.hotmail.com) (65.54.246.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 19:46:05 +0000
Received: from hotmail.com ([65.55.155.114]) by bay0-omc1-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 4 Sep 2007 12:45:45 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 4 Sep 2007 12:45:44 -0700
Message-ID: <BAY144-F3469DD69C3561DCCD1BBF9D4CA0@phx.gbl>
Received: from 65.55.155.123 by by144fd.bay144.hotmail.msn.com with HTTP;
	Tue, 04 Sep 2007 19:45:40 GMT
X-Originating-IP: [64.236.208.26]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
In-Reply-To: <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: open file descriptors for deleted index files
Date: Tue, 04 Sep 2007 19:45:40 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Sep 2007 19:45:44.0961 (UTC) FILETIME=[2F020710:01C7EF2C]
X-Virus-Checked: Checked by ClamAV on apache.org

All,

I'm facing an issue in which the file descriptors are not closed for deleted 
index files. I searched mailing list and didn't find the solution. Here is 
some info:

java      21488     wppd  139r      REG        8,7 152456865     571208 
/data/index/_idx.cfs (deleted)
java      21488     wppd  140r      REG        8,7 152501356     571211 
/data/index/_idz.cfs (deleted)
java      21488     wppd  141r      REG        8,7 152516369     571210 
/data/index/_ie1.cfs (deleted)
java      21488     wppd  142r      REG        8,7 152543537     571213 
/data/index/_ie3.cfs (deleted)
java      21488     wppd  143r      REG        8,7 152555274     571212 
/data/index/_ie5.cfs (deleted)
java      21488     wppd  144r      REG        8,7 152593068     571215 
/data/index/_ie7.cfs (deleted)
java      21488     wppd  145r      REG        8,7 152625253     571214 
/data/index/_ie9.cfs (deleted)

We run a servlet inside Tomcat. We transfer index files to search server 
every 5 minutes using rsync with --delete option. Also, we schedule a 
TimeTask inside servlet to check if index files are updated. If yes, create 
a new IndexSearcher object and assign it to searcher (IndexSearcher). I hope 
JVM will GC old IndexSearcher object along with file descriptors.

Will closing old IndexSearcher solve this problem? The concern I have by 
closing old IndexSearcher is that the client will get exception if client is 
using old IndexSearcher object.

Thanks for help.
Tony

_________________________________________________________________
Share your special parenting moments! 
http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 20:08:10 2007
Return-Path: <java-user-return-30138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93287 invoked from network); 4 Sep 2007 20:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 20:08:09 -0000
Received: (qmail 83339 invoked by uid 500); 4 Sep 2007 20:07:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83298 invoked by uid 500); 4 Sep 2007 20:07:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83287 invoked by uid 99); 4 Sep 2007 20:07:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 13:07:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 20:07:54 +0000
Received: by nz-out-0506.google.com with SMTP id i28so961814nzi
        for <java-user@lucene.apache.org>; Tue, 04 Sep 2007 13:07:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=R7TyK0b8P05z7tFASblfZRvj3hvjlP0+FtbYzh9tb1IS1pY0MmAN4qwoG85A7lbyt7Dz3Qo4ayyXzsPUIq9EVNUXq48CKgU5Oqbqml5537dQ9ylCvJxBk/m+OEoG+HaBHz3xo9aLbkws4DTo8MGHCvTxl22k19dJ+JXvun88Fl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=LeDVFZP5sdEgIupi7LxPomkr1/OKQvY018cGqqfMa+Nc20iVjvm0OUB7U2XVvVzYtfSMYuV6N/GikuALDzi2JYOU4435HbAAbAoh4Mc2mh3CpyTSl8aIBCcgLy7OqqU5pxNpfX+62qSPdFkXhyTL1ZQqZ/sn2LFo3y/MsySS99I=
Received: by 10.142.213.9 with SMTP id l9mr311906wfg.1188936452571;
        Tue, 04 Sep 2007 13:07:32 -0700 (PDT)
Received: by 10.143.33.20 with HTTP; Tue, 4 Sep 2007 13:07:32 -0700 (PDT)
Message-ID: <c68e39170709041307y552b6c92l34637d699092c29e@mail.gmail.com>
Date: Tue, 4 Sep 2007 16:07:32 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: open file descriptors for deleted index files
In-Reply-To: <BAY144-F3469DD69C3561DCCD1BBF9D4CA0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
	 <BAY144-F3469DD69C3561DCCD1BBF9D4CA0@phx.gbl>
X-Google-Sender-Auth: 13ce3346578f9c67
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/4/07, Tony Qian <tonyqian@hotmail.com> wrote:
> We run a servlet inside Tomcat. We transfer index files to search server
> every 5 minutes using rsync with --delete option. Also, we schedule a
> TimeTask inside servlet to check if index files are updated. If yes, create
> a new IndexSearcher object and assign it to searcher (IndexSearcher). I hope
> JVM will GC old IndexSearcher object along with file descriptors.
>
> Will closing old IndexSearcher solve this problem?

Yes... you can't really rely on GC to close open file descriptors (or
for GC to be called when descriptors are running low)

> The concern I have by
> closing old IndexSearcher is that the client will get exception if client is
> using old IndexSearcher object.

Solr uses reference counting to solve this problem.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 20:14:04 2007
Return-Path: <java-user-return-30139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95770 invoked from network); 4 Sep 2007 20:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 20:14:03 -0000
Received: (qmail 90549 invoked by uid 500); 4 Sep 2007 20:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90506 invoked by uid 500); 4 Sep 2007 20:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90495 invoked by uid 99); 4 Sep 2007 20:13:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 13:13:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bill.w.au@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 20:13:45 +0000
Received: by py-out-1112.google.com with SMTP id d32so5958025pye
        for <java-user@lucene.apache.org>; Tue, 04 Sep 2007 13:13:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A7zczU6ez67QK7pSeYBjQu/yPel0zYkIX4dlsNiHz7UfQKFbMp0T64luCZY1YwyefVl9BaniOhYn2QkZA/PULFMHDbSnA3ziLZFG7yG1dmh2hPBuOAcHJSBt2jmVr+i0QdE2aN1PH1yKF8vYB7k/5Km5B02CZlrFAcTqh57eHwo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dUlgHYJhBzvvIiO2UweW/d4JSeFqwyI2o7CppKVVaCnxRY4AbiJFDSPzLmXsy29ZcoVv55T5InGXv9nt5Pm5tVBu8ziDwDWrA9NRrJrtXgoJy8nlMKtEEW2CX3RFg6gBmppGd8hDdr2OgMKCzD+fqGOUYrDoFlai/VwIJ2qExF0=
Received: by 10.35.91.10 with SMTP id t10mr7747199pyl.1188936804295;
        Tue, 04 Sep 2007 13:13:24 -0700 (PDT)
Received: by 10.35.118.4 with HTTP; Tue, 4 Sep 2007 13:13:24 -0700 (PDT)
Message-ID: <3b5f72030709041313i2c0e0bc0g6e661bae2b374f37@mail.gmail.com>
Date: Tue, 4 Sep 2007 16:13:24 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: open file descriptors for deleted index files
In-Reply-To: <BAY144-F3469DD69C3561DCCD1BBF9D4CA0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32488_6429545.1188936804206"
References: <BAY144-F67A7115544E8B7DB85183D44E0@phx.gbl>
	 <BAY144-F3469DD69C3561DCCD1BBF9D4CA0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32488_6429545.1188936804206
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Closing old IndexSearcher should take care of this problem for you.  Take a
look at Solr.
It opens a new IndexSearcher and direct all requests to the new one.  It
then closes the old
IndexSearcher when all the requests that it is serving has completed.

Bill

On 9/4/07, Tony Qian <tonyqian@hotmail.com> wrote:
>
> All,
>
> I'm facing an issue in which the file descriptors are not closed for
> deleted
> index files. I searched mailing list and didn't find the solution. Here is
> some info:
>
> java      21488     wppd  139r      REG        8,7 152456865     571208
> /data/index/_idx.cfs (deleted)
> java      21488     wppd  140r      REG        8,7 152501356     571211
> /data/index/_idz.cfs (deleted)
> java      21488     wppd  141r      REG        8,7 152516369     571210
> /data/index/_ie1.cfs (deleted)
> java      21488     wppd  142r      REG        8,7 152543537     571213
> /data/index/_ie3.cfs (deleted)
> java      21488     wppd  143r      REG        8,7 152555274     571212
> /data/index/_ie5.cfs (deleted)
> java      21488     wppd  144r      REG        8,7 152593068     571215
> /data/index/_ie7.cfs (deleted)
> java      21488     wppd  145r      REG        8,7 152625253     571214
> /data/index/_ie9.cfs (deleted)
>
> We run a servlet inside Tomcat. We transfer index files to search server
> every 5 minutes using rsync with --delete option. Also, we schedule a
> TimeTask inside servlet to check if index files are updated. If yes,
> create
> a new IndexSearcher object and assign it to searcher (IndexSearcher). I
> hope
> JVM will GC old IndexSearcher object along with file descriptors.
>
> Will closing old IndexSearcher solve this problem? The concern I have by
> closing old IndexSearcher is that the client will get exception if client
> is
> using old IndexSearcher object.
>
> Thanks for help.
> Tony
>
> _________________________________________________________________
> Share your special parenting moments!
> http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32488_6429545.1188936804206--

From java-user-return-30140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 04 21:02:17 2007
Return-Path: <java-user-return-30140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11876 invoked from network); 4 Sep 2007 21:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Sep 2007 21:02:16 -0000
Received: (qmail 49287 invoked by uid 500); 4 Sep 2007 21:02:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49234 invoked by uid 500); 4 Sep 2007 21:02:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49223 invoked by uid 99); 4 Sep 2007 21:02:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 14:02:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.rossini@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 21:02:00 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1753199fkz
        for <java-user@lucene.apache.org>; Tue, 04 Sep 2007 14:01:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=CJv+BmZTtUpcoind/y8Ut6G/AZbkcI2BPQpVox9nEqsJg/VCQmtv93fb9Bni8J9uz/BT25gr2e5dOashGmQ4OJCwyQHztubtM/bwEv2pmW7W9JULbZBBW+X64147Bof6pEnKdm/dBi/Ty9L4KmPj4UH4VvcIwdicIiG6irZQdBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=MswFONT8lJDfTetZekFO7Xp8q4SVfl0cr45n28fr9LUV+l9AI0tuCVUxRRPpSgmNBJ2LF0+lex4lorzGZC0nIU7T+e2aOlsVWi+atHJbdFra8r4yegn5/MO0GdfAy633BaiFh9RJdYOH7rbx45148qEussZF7vwzhIjhur2yHGg=
Received: by 10.82.190.2 with SMTP id n2mr14470983buf.1188939699066;
        Tue, 04 Sep 2007 14:01:39 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Tue, 4 Sep 2007 14:01:39 -0700 (PDT)
Message-ID: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com>
Date: Tue, 4 Sep 2007 18:01:39 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Extract terms not by reader, but by documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30682_31172901.1188939699044"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30682_31172901.1188939699044
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

    In some custom highlighting, I often write a code like this:

       Set<Term> matchedTerms = new HashSet<Term>();
       query.rewrite(reader).extractTerms(matchedTerms);

    With this code the Term Set gets populated by the matched query in your
whole index. Is it possible to this with a document instead of the reader?
Something like
query.rewrite(documentId).extractTerms(matchedTerms) ?

[]s
     Rossini

------=_Part_30682_31172901.1188939699044--

From java-user-return-30141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 02:05:13 2007
Return-Path: <java-user-return-30141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17669 invoked from network); 5 Sep 2007 02:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 02:05:11 -0000
Received: (qmail 9299 invoked by uid 500); 5 Sep 2007 02:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9262 invoked by uid 500); 5 Sep 2007 02:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9251 invoked by uid 99); 5 Sep 2007 02:04:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 19:04:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 02:06:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 96DBBB863C
	for <java-user@lucene.apache.org>; Tue,  4 Sep 2007 19:04:18 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com>
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Extract terms not by reader, but by documents
Date: Tue, 4 Sep 2007 22:04:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if I am understanding what you are trying to do.  I think  
you are trying to find out which terms occurred in a particular  
document, correct?

I also am not sure about your first example.  My understanding of  
extractTerms is that it just gives you back the set of all terms that  
occur in the _query_, not necessarily those that matched in the  
document, although it has this effect for things like WildcardQuery  
and others that get expanded using TermEnum since they are expanded  
based on what is in the index.  I think this is best seen by the  
implementation of extractTerms() in TermQuery.java in which it just  
adds the term from the query into the set.  Likewise for BooleanQuery  
which loops over the clauses and extracts the terms from each clause  
and adds them to the set.  Thus, if you had a boolean query of all  
term queries, you would get back the set of all the terms.

As for the problem it sounds like you are interested in, you could  
use SpanQuery functionality with some post processing analysis or try  
using Term Vectors and the new (unreleased) TermVectorMapper (TVM)  
functionality (or possibly a combination of both).  In this case, you  
will need to write your own implementation of the TVM that takes in  
the query so it knows what terms to identify. If you go the latter  
route, know that it is new functionality and probably doesn't have a  
whole lot of users yet, so there may still be issues with it.  See  
the nightly build or nightly javadocs for info on these.

The other question that might be helpful, is what custom highlighting  
are you doing that isn't covered by the contrib/highlighter?  Perhaps  
you have some suggestions that are generic enough to help improve  
it?  Just a thought.

Hope this helps,
Grant

On Sep 4, 2007, at 5:01 PM, Rafael Rossini wrote:

> Hi all,
>
>     In some custom highlighting, I often write a code like this:
>
>        Set<Term> matchedTerms = new HashSet<Term>();
>        query.rewrite(reader).extractTerms(matchedTerms);
>
>     With this code the Term Set gets populated by the matched query  
> in your
> whole index. Is it possible to this with a document instead of the  
> reader?
> Something like
> query.rewrite(documentId).extractTerms(matchedTerms) ?
>
> []s
>      Rossini

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 06:12:55 2007
Return-Path: <java-user-return-30142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89218 invoked from network); 5 Sep 2007 06:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 06:12:53 -0000
Received: (qmail 82742 invoked by uid 500); 5 Sep 2007 06:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82333 invoked by uid 500); 5 Sep 2007 06:12:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82322 invoked by uid 99); 5 Sep 2007 06:12:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Sep 2007 23:12:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 06:12:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISo7b-0002xS-TH
	for java-user@lucene.apache.org; Tue, 04 Sep 2007 23:12:15 -0700
Message-ID: <12492218.post@talk.nabble.com>
Date: Tue, 4 Sep 2007 23:12:15 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12484208.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi testn,
           here is my index details:
                            Index fields :5 fields
                            Store Fileds:10 fields
           

Index code:              

  contents=new StringBuilder().append(compCallingPartyNumber).append("
").append(compCalledPartyNumber).append(" ").append(compImsiNumber).append("
").append(callType).toString();


records=new StringBuilder().append(compCallingPartyNumber).append("
").append(compCalledPartyNumber).append(" ").append(compchargDur).append("
").append(compTimeSc).append(" ").append(compImsiNumber).append("
").append(outgoingRoute).append(" ").append(incomingRoute).append("
").append(cgiLocation).toString();


                               Document document = new Document();
                                    document.add(new Field("contents",
                                                           contents,
                                                           Field.Store.NO,
                                                          
Field.Index.TOKENIZED));
                                    document.add(new Field("fil", filen,
                                                           Field.Store.NO,
                                                          
Field.Index.TOKENIZED));
                                    document.add(new Field("records",
records,
                                                           Field.Store.YES,
                                                           Field.Index.NO));
                                    document.add(new Field("dateSc", dateSc,
                                                           Field.Store.YES,
                                                          
Field.Index.TOKENIZED));
                                    
                                    indexWriter.addDocument(document);

inputs for the document:

compCallingPartyNumber="9840836588";
compCalledPartyNumber="9840861114";
compImsiNumber="984510005469874";
callType="1";
compChargDur="98456";
compTimeSc="984";
outgoingRoute="i987j";
incomingRoute="poi09";
cgiLocation="dft1234567";

here is my search code:

                                         Directory indexDir2 = 
                      FSDirectory.getDirectory(indexSourceDir02,false);
                                         IndexReader indexSource2 =
IndexReader.open(indexDir2);
                                       Directory indexDir3 = 
                                            
FSDirectory.getDirectory(indexSourceDir03,false);
                                         IndexReader indexSource3 =
IndexReader.open(indexDir3);
                                         Directory indexDir4 = 
                                            
FSDirectory.getDirectory(indexSourceDir04,false);
                                         IndexReader indexSource4 =
IndexReader.open(indexDir4); 
                                        
           
                                         
        IndexReader[] readArray = {indexSource2,indexSource3,indexSource4};
        //merged reader
        IndexReader mergedReader = new MultiReader(readArray);
        IndexSearcher is = new IndexSearcher(mergedReader);
        
                                
                                 QueryParser parser = 
                                     new QueryParser("contents" ,new
StandardAnalyzer());
                                 
                                 
                                String searchQuery= 
                                       new
StringBuffer().append(inputNo).append(" AND dateSc:["
).append(fromDate).append(" TO ").append(toDate).append("]").append("
").append("AND").append(" ").append(callTyp).toString();
                                   
                                 
                                 
                                 Query callDetailquery =
parser.parse(searchQuery);
                                 
                                 hits = is.search(callDetailquery); 




                                             
                                       
                                          
         

testn wrote:
> 
> Can you provide more info about your index? How many documents, fields and
> what is the average document length?
> 
> 
> Sebastin wrote:
>> 
>> Hi testn,
>>            i index the dateSc as 070904(2007/09/04) format.i am not using
>> any timestamp here.how can we effectively reopen the IndexSearcher  for
>> an hour and save the memory because my index gets updated every minute.
>> 
>> testn wrote:
>>> 
>>> Check out Wiki for more information at
>>> http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
>>> 
>>> 
>>> 
>>> Sebastin wrote:
>>>> 
>>>> Hi All,
>>>>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB
>>>> of records using MultiReader class.
>>>> 
>>>> here is the following code snippet:
>>>> 
>>>> 
>>>>      
>>>>                                          Directory indexDir2 = 
>>>>                       FSDirectory.getDirectory(indexSourceDir02,false);
>>>>                                          IndexReader indexSource2 =
>>>> IndexReader.open(indexDir2);
>>>>                                        Directory indexDir3 = 
>>>>                                             
>>>> FSDirectory.getDirectory(indexSourceDir03,false);
>>>>                                          IndexReader indexSource3 =
>>>> IndexReader.open(indexDir3);
>>>>                                          Directory indexDir4 = 
>>>>                                             
>>>> FSDirectory.getDirectory(indexSourceDir04,false);
>>>>                                          IndexReader indexSource4 =
>>>> IndexReader.open(indexDir4); 
>>>>                                         
>>>>            
>>>>                                          
>>>>         IndexReader[] readArray =
>>>> {indexSource2,indexSource3,indexSource4};
>>>>         //merged reader
>>>>         IndexReader mergedReader = new MultiReader(readArray);
>>>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>>>         
>>>>                                 
>>>>                                  QueryParser parser = 
>>>>                                      new QueryParser("contents" ,new
>>>> StandardAnalyzer());
>>>>                                  
>>>>                                  
>>>>                                 String searchQuery= 
>>>>                                        new
>>>> StringBuffer().append(inputNo).append(" AND dateSc:["
>>>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>>>> ").append("AND").append(" ").append(callTyp).toString();
>>>>                                    
>>>>                                  
>>>>                                  
>>>>                                  Query callDetailquery =
>>>> parser.parse(searchQuery);
>>>>                                  
>>>>                                  hits = is.search(callDetailquery); 
>>>> 
>>>> 
>>>> it takes 300 MB of RAM for every search and it is very very slow is
>>>> there any other way to control the Memory and to make search faster.i
>>>> use SINGLETON  to use the IndexSearcher as a one time used object for
>>>> all the instances.
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12492218
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 07:26:00 2007
Return-Path: <java-user-return-30143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15467 invoked from network); 5 Sep 2007 07:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 07:25:59 -0000
Received: (qmail 72078 invoked by uid 500); 5 Sep 2007 07:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72042 invoked by uid 500); 5 Sep 2007 07:25:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72031 invoked by uid 99); 5 Sep 2007 07:25:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 00:25:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 07:27:00 +0000
Content-class: urn:content-classes:message
Subject: =?gb2312?B?tPC4tDogdW5hYmxlIHRvIHNlYXJjaCBmcm9tIGEgc3RyaW5nIGNvbg==?=
	=?gb2312?B?dGFpbmluZyBudW1iZXJzIHNlcGVyYXRlZCBieSBjb21tYS4=?=
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 5 Sep 2007 15:25:09 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013CEA40@14sha-msg02.zm.sd.mediazone.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: unable to search from a string containing numbers seperated by comma.
Thread-Index: Acfq7Y4fA8ZNqUs7RaaOcN8beFI79gEnmPSg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
	I have this problem too. I made a test use StandardAnalyzer:

	Analyzer analyzer =3D new StandardAnalyzer();
	 Reader reader =3D new BufferedReader(new InputStreamReader(new =
StringBufferInputStream("Aaa,0982,abc")));
	  TokenStream tokenStream =3D analyzer.tokenStream("abc",reader);
	  org.apache.lucene.analysis.Token token =3D tokenStream.next();
	  while(token !=3D null){
		  System.out.println(token);
		 token =3D tokenStream.next();
		  }
  }

	The result is "(aaa,0982,abc,0,12,type=3D<NUM>)",the analyzer parsed =
the=20
"Aaa,0982,abc" as a "NUM" type word.


-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: prabin meitei [mailto:prabin.meitei@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C230=C8=D5 =D0=C7=C6=DA=CB=C4 =
18:07
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: unable to search from a string containing numbers =
seperated by comma.

Hi,
  I am trying to search from an idlist (string containing comma =
seperated
numeric values)

eg:
QueryParser vParser =3D new QueryParser("idlist", new =
AlphanumAnalyzer()); //
analyzer using custom lettertokenizer which tokenize nuber also. class =
is
given below.
Query q =3D vParser.parse("55"); // example

now even if the field idlist contains say (44, 55, 66)
my search returns 0 hit. is there any alternative solution or is there =
some
problem with wat i am using.

Thanks in advance.

public class AlphanumericTokenizer extends LetterTokenizer {
  public AlphanumericTokenizer(Reader reader) {
    super(reader);
  }

  protected boolean isTokenChar(char c) {
    return super.isTokenChar(c) || Character.isDigit(c);
  }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 11:57:09 2007
Return-Path: <java-user-return-30144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6157 invoked from network); 5 Sep 2007 11:57:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 11:57:05 -0000
Received: (qmail 47781 invoked by uid 500); 5 Sep 2007 11:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47643 invoked by uid 500); 5 Sep 2007 11:56:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47618 invoked by uid 99); 5 Sep 2007 11:56:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 04:56:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 11:57:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IStU3-0003FI-Pu
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 04:55:47 -0700
Message-ID: <12496515.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 04:55:47 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12492218.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


A couple things to make sure:
1. When you open IndexWriter, what is the analyzer you use?
StandardAnalyzer?
2. How many records are there?
3. Could you also check number of terms in your indices? If there are too
many terms, you could consider chop something in smaller piece for
example... store area code and phone number separately if the numbers are
pretty distributed.


Sebastin wrote:
> 
> Hi testn,
>            here is my index details:
>                             Index fields :5 fields
>                             Store Fileds:10 fields
>            
> 
> Index code:              
> 
>   contents=new StringBuilder().append(compCallingPartyNumber).append("
> ").append(compCalledPartyNumber).append("
> ").append(compImsiNumber).append(" ").append(callType).toString();
> 
> 
> records=new StringBuilder().append(compCallingPartyNumber).append("
> ").append(compCalledPartyNumber).append(" ").append(compchargDur).append("
> ").append(compTimeSc).append(" ").append(compImsiNumber).append("
> ").append(outgoingRoute).append(" ").append(incomingRoute).append("
> ").append(cgiLocation).toString();
> 
> 
>                                Document document = new Document();
>                                     document.add(new Field("contents",
>                                                            contents,
>                                                            Field.Store.NO,
>                                                           
> Field.Index.TOKENIZED));
>                                     document.add(new Field("fil", filen,
>                                                            Field.Store.NO,
>                                                           
> Field.Index.TOKENIZED));
>                                     document.add(new Field("records",
> records,
>                                                           
> Field.Store.YES,
>                                                           
> Field.Index.NO));
>                                     document.add(new Field("dateSc",
> dateSc,
>                                                           
> Field.Store.YES,
>                                                           
> Field.Index.TOKENIZED));
>                                     
>                                     indexWriter.addDocument(document);
> 
> inputs for the document:
> 
> compCallingPartyNumber="9840836588";
> compCalledPartyNumber="9840861114";
> compImsiNumber="984510005469874";
> callType="1";
> compChargDur="98456";
> compTimeSc="984";
> outgoingRoute="i987j";
> incomingRoute="poi09";
> cgiLocation="dft1234567";
> 
> here is my search code:
> 
>                                          Directory indexDir2 = 
>                       FSDirectory.getDirectory(indexSourceDir02,false);
>                                          IndexReader indexSource2 =
> IndexReader.open(indexDir2);
>                                        Directory indexDir3 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir03,false);
>                                          IndexReader indexSource3 =
> IndexReader.open(indexDir3);
>                                          Directory indexDir4 = 
>                                             
> FSDirectory.getDirectory(indexSourceDir04,false);
>                                          IndexReader indexSource4 =
> IndexReader.open(indexDir4); 
>                                         
>            
>                                          
>         IndexReader[] readArray =
> {indexSource2,indexSource3,indexSource4};
>         //merged reader
>         IndexReader mergedReader = new MultiReader(readArray);
>         IndexSearcher is = new IndexSearcher(mergedReader);
>         
>                                 
>                                  QueryParser parser = 
>                                      new QueryParser("contents" ,new
> StandardAnalyzer());
>                                  
>                                  
>                                 String searchQuery= 
>                                        new
> StringBuffer().append(inputNo).append(" AND dateSc:["
> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
> ").append("AND").append(" ").append(callTyp).toString();
>                                    
>                                  
>                                  
>                                  Query callDetailquery =
> parser.parse(searchQuery);
>                                  
>                                  hits = is.search(callDetailquery); 
> 
> 
> 
> 
>                                              
>                                        
>                                           
>          
> 
> testn wrote:
>> 
>> Can you provide more info about your index? How many documents, fields
>> and what is the average document length?
>> 
>> 
>> Sebastin wrote:
>>> 
>>> Hi testn,
>>>            i index the dateSc as 070904(2007/09/04) format.i am not
>>> using any timestamp here.how can we effectively reopen the IndexSearcher 
>>> for an hour and save the memory because my index gets updated every
>>> minute.
>>> 
>>> testn wrote:
>>>> 
>>>> Check out Wiki for more information at
>>>> http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
>>>> 
>>>> 
>>>> 
>>>> Sebastin wrote:
>>>>> 
>>>>> Hi All,
>>>>>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB
>>>>> of records using MultiReader class.
>>>>> 
>>>>> here is the following code snippet:
>>>>> 
>>>>> 
>>>>>      
>>>>>                                          Directory indexDir2 = 
>>>>>                      
>>>>> FSDirectory.getDirectory(indexSourceDir02,false);
>>>>>                                          IndexReader indexSource2 =
>>>>> IndexReader.open(indexDir2);
>>>>>                                        Directory indexDir3 = 
>>>>>                                             
>>>>> FSDirectory.getDirectory(indexSourceDir03,false);
>>>>>                                          IndexReader indexSource3 =
>>>>> IndexReader.open(indexDir3);
>>>>>                                          Directory indexDir4 = 
>>>>>                                             
>>>>> FSDirectory.getDirectory(indexSourceDir04,false);
>>>>>                                          IndexReader indexSource4 =
>>>>> IndexReader.open(indexDir4); 
>>>>>                                         
>>>>>            
>>>>>                                          
>>>>>         IndexReader[] readArray =
>>>>> {indexSource2,indexSource3,indexSource4};
>>>>>         //merged reader
>>>>>         IndexReader mergedReader = new MultiReader(readArray);
>>>>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>>>>         
>>>>>                                 
>>>>>                                  QueryParser parser = 
>>>>>                                      new QueryParser("contents" ,new
>>>>> StandardAnalyzer());
>>>>>                                  
>>>>>                                  
>>>>>                                 String searchQuery= 
>>>>>                                        new
>>>>> StringBuffer().append(inputNo).append(" AND dateSc:["
>>>>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>>>>> ").append("AND").append(" ").append(callTyp).toString();
>>>>>                                    
>>>>>                                  
>>>>>                                  
>>>>>                                  Query callDetailquery =
>>>>> parser.parse(searchQuery);
>>>>>                                  
>>>>>                                  hits = is.search(callDetailquery); 
>>>>> 
>>>>> 
>>>>> it takes 300 MB of RAM for every search and it is very very slow is
>>>>> there any other way to control the Memory and to make search faster.i
>>>>> use SINGLETON  to use the IndexSearcher as a one time used object for
>>>>> all the instances.
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12496515
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 12:54:49 2007
Return-Path: <java-user-return-30145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22713 invoked from network); 5 Sep 2007 12:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 12:54:49 -0000
Received: (qmail 44922 invoked by uid 500); 5 Sep 2007 12:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44686 invoked by uid 500); 5 Sep 2007 12:54:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44675 invoked by uid 99); 5 Sep 2007 12:54:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 05:54:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 12:54:31 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l85Cs9Re006024
	for <java-user@lucene.apache.org>; Wed, 5 Sep 2007 08:54:09 -0400
Message-ID: <46DEA655.6070108@syr.edu>
Date: Wed, 05 Sep 2007 08:51:33 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Look for strange encodings -- tokenization
References: <12479370.post@talk.nabble.com>
In-Reply-To: <12479370.post@talk.nabble.com>
X-Enigmail-Version: 0.95.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

poeta simbolista wrote:
> I'd want to know the best way to look for strange encodings on a Lucene
> index.
> i have several inputs where input can have been encoded on different sets. I
> not always know if my guess about the encoding has been ok. Hence, I'd
> thought of querying the index for some typical strings that would show bad
> encodings.

In my experience, the best thing to do first is to look at a random
sample of the data you suspect to be problematic, and keep track of what
you find.  Then, decide based on what you find whether it's worth it to
pursue it further.  (Data is messy, and sometimes it's not worth the
effort to find and fix everything, as long as you know that the
probability of problems is relatively low.)

If you do find that it's worth pursuing, I'd guess that the best spot to
find problems is at index time rather than query time, mostly because at
query time, you don't necessarily know what to look for.  If you did,
then you could already improve your guesser at index time, right?

One technique that you might find useful is to see if a document
contains too many previously unseen terms.  You could index documents in
the same language and subject domain as those which might have
problematic charset conversion issues, but which do not have those
issues themselves, and then tokenize potentially problematically
converted documents, checking for the existence of each term in the
index[1] and keeping track of the ratio of previously unseen terms to
the total number of terms.  If you compare this ratio to that for the
average known good document (and/or the worst-case near-last addition to
the index), you could get an idea about whether or not the document in
question has issues.

Steve

[1]
<http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/index/IndexReader.html#terms(org.apache.lucene.index.Term)>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 14:48:47 2007
Return-Path: <java-user-return-30146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70973 invoked from network); 5 Sep 2007 14:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 14:48:45 -0000
Received: (qmail 25133 invoked by uid 500); 5 Sep 2007 14:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24837 invoked by uid 500); 5 Sep 2007 14:48:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24814 invoked by uid 99); 5 Sep 2007 14:48:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 07:48:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.rossini@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 14:48:26 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1963636fkz
        for <java-user@lucene.apache.org>; Wed, 05 Sep 2007 07:48:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T+BmP4Hly/zkzpJIzn1cgOAn3BRLjSWN4BntigH1uW2oXRXKgJ13S8qgkdG714F8lyKqHPuCS6h5TWLk2QRhKobAZBR0WserKAzlxYweBhPm6/1kaFTZX/kWKQ9F4HFhmjzY3GEVsg3kAGUFqZNmYs58FjEAKVXLI0I/JI5Srdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZwYI/uJHPHiJD8+PrWCx+V/KH4D5Y5yFBqdiTy/Rp5imxs6zIlRNC+LSXDckCsI9YaqO//t3acF5kOiUCr+1ezJj+W1IQlZtJwrAS5bsigLDTRJmFdqp/3XjZU9/nGufDusTb7/Yj/Kbhkrxre0THjEGZ53jhi04/IsyLZG4XB0=
Received: by 10.82.154.12 with SMTP id b12mr1656681bue.1189003685031;
        Wed, 05 Sep 2007 07:48:05 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Wed, 5 Sep 2007 07:48:04 -0700 (PDT)
Message-ID: <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
Date: Wed, 5 Sep 2007 11:48:04 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extract terms not by reader, but by documents
In-Reply-To: <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40189_19741934.1189003684997"
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com>
	 <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40189_19741934.1189003684997
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thank=B4s for the reply Grant, let me try to explain exactly what I=B4d lik=
e to
do. Take the 2 docs:

Doc1: "Microsoft is a nice software company, and Xbox seems to be a nice
product too."
Doc2: "Nintendo and Sony have been in the game industry for a long time, bu=
t
now, Microsoft is trying to enter with Xbox"

Now If I have a query like this, "(Nintendo AND Sony AND Microsoft) OR
(Xbox)" and perform a query.rewrite(reader).extractTerms(set), my set is
going to have all the terms (Nintendo, Sony, Microsoft, Xbox) right? But
when I iterate the docs, I wanted to do something like
query.rewrite(doc).extracTerms(set),  [I know this method does not exist, i=
s
just and example of the funcionality].

So, for Doc1, my set would be populate with (Xbox) only, and for Doc2 the
set would be populated with (Nintendo, Sony, Microsoft, Xbox).
Is this possible? Is it clear now what I=B4m trying to achieve?

[]s
     Rossini

On 9/4/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Not sure if I am understanding what you are trying to do.  I think
> you are trying to find out which terms occurred in a particular
> document, correct?
>
> I also am not sure about your first example.  My understanding of
> extractTerms is that it just gives you back the set of all terms that
> occur in the _query_, not necessarily those that matched in the
> document, although it has this effect for things like WildcardQuery
> and others that get expanded using TermEnum since they are expanded
> based on what is in the index.  I think this is best seen by the
> implementation of extractTerms() in TermQuery.java in which it just
> adds the term from the query into the set.  Likewise for BooleanQuery
> which loops over the clauses and extracts the terms from each clause
> and adds them to the set.  Thus, if you had a boolean query of all
> term queries, you would get back the set of all the terms.
>
> As for the problem it sounds like you are interested in, you could
> use SpanQuery functionality with some post processing analysis or try
> using Term Vectors and the new (unreleased) TermVectorMapper (TVM)
> functionality (or possibly a combination of both).  In this case, you
> will need to write your own implementation of the TVM that takes in
> the query so it knows what terms to identify. If you go the latter
> route, know that it is new functionality and probably doesn't have a
> whole lot of users yet, so there may still be issues with it.  See
> the nightly build or nightly javadocs for info on these.
>
> The other question that might be helpful, is what custom highlighting
> are you doing that isn't covered by the contrib/highlighter?  Perhaps
> you have some suggestions that are generic enough to help improve
> it?  Just a thought.
>
> Hope this helps,
> Grant
>
> On Sep 4, 2007, at 5:01 PM, Rafael Rossini wrote:
>
> > Hi all,
> >
> >     In some custom highlighting, I often write a code like this:
> >
> >        Set<Term> matchedTerms =3D new HashSet<Term>();
> >        query.rewrite(reader).extractTerms(matchedTerms);
> >
> >     With this code the Term Set gets populated by the matched query
> > in your
> > whole index. Is it possible to this with a document instead of the
> > reader?
> > Something like
> > query.rewrite(documentId).extractTerms(matchedTerms) ?
> >
> > []s
> >      Rossini
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40189_19741934.1189003684997--

From java-user-return-30147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 15:38:42 2007
Return-Path: <java-user-return-30147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48424 invoked from network); 5 Sep 2007 15:38:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 15:38:41 -0000
Received: (qmail 3945 invoked by uid 500); 5 Sep 2007 15:38:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3904 invoked by uid 500); 5 Sep 2007 15:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3883 invoked by uid 99); 5 Sep 2007 15:38:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 08:38:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 15:38:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISwx2-0002QY-5a
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 08:37:56 -0700
Message-ID: <12500483.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 08:37:56 -0700 (PDT)
From: Adam Ruggles <a.ruggles@gmail.com>
To: java-user@lucene.apache.org
Subject: How to boost a document based on a field in the document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: a.ruggles@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm trying to find a query that would boost a document based on a field in
the document.

I have a simple index with title, description, date, ... I also have a field
called vote.  I want items that have been voted higher to be ranked as
higher in the search results.  Is there a query and or filter I could use to
accomplish this?
-- 
View this message in context: http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12500483
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 15:47:18 2007
Return-Path: <java-user-return-30148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64802 invoked from network); 5 Sep 2007 15:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 15:47:16 -0000
Received: (qmail 26928 invoked by uid 500); 5 Sep 2007 15:47:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26000 invoked by uid 500); 5 Sep 2007 15:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25989 invoked by uid 99); 5 Sep 2007 15:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 08:47:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 15:47:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISx5T-0002en-Jg
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 08:46:39 -0700
Message-ID: <12500824.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 08:46:39 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12496515.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I use StandardAnalyzer.the records daily ranges from 5 crore to 6 crore. for
every second i am updating my Index. i instantiate IndexSearcher object one
time for all the searches. for an hour can i see the updated records in the
indexstore by reinstantiating IndexSearcher object.but the problem when i
reinstantiate IndexSearcher ,my RAM memory gets appended.is there any
possibility to control the memory at that time without affecting
performance.

testn wrote:
> 
> A couple things to make sure:
> 1. When you open IndexWriter, what is the analyzer you use?
> StandardAnalyzer?
> 2. How many records are there?
> 3. Could you also check number of terms in your indices? If there are too
> many terms, you could consider chop something in smaller piece for
> example... store area code and phone number separately if the numbers are
> pretty distributed.
> 
> 
> Sebastin wrote:
>> 
>> Hi testn,
>>            here is my index details:
>>                             Index fields :5 fields
>>                             Store Fileds:10 fields
>>            
>> 
>> Index code:              
>> 
>>   contents=new StringBuilder().append(compCallingPartyNumber).append("
>> ").append(compCalledPartyNumber).append("
>> ").append(compImsiNumber).append(" ").append(callType).toString();
>> 
>> 
>> records=new StringBuilder().append(compCallingPartyNumber).append("
>> ").append(compCalledPartyNumber).append("
>> ").append(compchargDur).append(" ").append(compTimeSc).append("
>> ").append(compImsiNumber).append(" ").append(outgoingRoute).append("
>> ").append(incomingRoute).append(" ").append(cgiLocation).toString();
>> 
>> 
>>                                Document document = new Document();
>>                                     document.add(new Field("contents",
>>                                                            contents,
>>                                                           
>> Field.Store.NO,
>>                                                           
>> Field.Index.TOKENIZED));
>>                                     document.add(new Field("fil", filen,
>>                                                           
>> Field.Store.NO,
>>                                                           
>> Field.Index.TOKENIZED));
>>                                     document.add(new Field("records",
>> records,
>>                                                           
>> Field.Store.YES,
>>                                                           
>> Field.Index.NO));
>>                                     document.add(new Field("dateSc",
>> dateSc,
>>                                                           
>> Field.Store.YES,
>>                                                           
>> Field.Index.TOKENIZED));
>>                                     
>>                                     indexWriter.addDocument(document);
>> 
>> inputs for the document:
>> 
>> compCallingPartyNumber="9840836588";
>> compCalledPartyNumber="9840861114";
>> compImsiNumber="984510005469874";
>> callType="1";
>> compChargDur="98456";
>> compTimeSc="984";
>> outgoingRoute="i987j";
>> incomingRoute="poi09";
>> cgiLocation="dft1234567";
>> 
>> here is my search code:
>> 
>>                                          Directory indexDir2 = 
>>                       FSDirectory.getDirectory(indexSourceDir02,false);
>>                                          IndexReader indexSource2 =
>> IndexReader.open(indexDir2);
>>                                        Directory indexDir3 = 
>>                                             
>> FSDirectory.getDirectory(indexSourceDir03,false);
>>                                          IndexReader indexSource3 =
>> IndexReader.open(indexDir3);
>>                                          Directory indexDir4 = 
>>                                             
>> FSDirectory.getDirectory(indexSourceDir04,false);
>>                                          IndexReader indexSource4 =
>> IndexReader.open(indexDir4); 
>>                                         
>>            
>>                                          
>>         IndexReader[] readArray =
>> {indexSource2,indexSource3,indexSource4};
>>         //merged reader
>>         IndexReader mergedReader = new MultiReader(readArray);
>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>         
>>                                 
>>                                  QueryParser parser = 
>>                                      new QueryParser("contents" ,new
>> StandardAnalyzer());
>>                                  
>>                                  
>>                                 String searchQuery= 
>>                                        new
>> StringBuffer().append(inputNo).append(" AND dateSc:["
>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>> ").append("AND").append(" ").append(callTyp).toString();
>>                                    
>>                                  
>>                                  
>>                                  Query callDetailquery =
>> parser.parse(searchQuery);
>>                                  
>>                                  hits = is.search(callDetailquery); 
>> 
>> 
>> 
>> 
>>                                              
>>                                        
>>                                           
>>          
>> 
>> testn wrote:
>>> 
>>> Can you provide more info about your index? How many documents, fields
>>> and what is the average document length?
>>> 
>>> 
>>> Sebastin wrote:
>>>> 
>>>> Hi testn,
>>>>            i index the dateSc as 070904(2007/09/04) format.i am not
>>>> using any timestamp here.how can we effectively reopen the
>>>> IndexSearcher  for an hour and save the memory because my index gets
>>>> updated every minute.
>>>> 
>>>> testn wrote:
>>>>> 
>>>>> Check out Wiki for more information at
>>>>> http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
>>>>> 
>>>>> 
>>>>> 
>>>>> Sebastin wrote:
>>>>>> 
>>>>>> Hi All,
>>>>>>        i used to search 3 Lucene Index store of size 6 GB,10 GB,10 GB
>>>>>> of records using MultiReader class.
>>>>>> 
>>>>>> here is the following code snippet:
>>>>>> 
>>>>>> 
>>>>>>      
>>>>>>                                          Directory indexDir2 = 
>>>>>>                      
>>>>>> FSDirectory.getDirectory(indexSourceDir02,false);
>>>>>>                                          IndexReader indexSource2 =
>>>>>> IndexReader.open(indexDir2);
>>>>>>                                        Directory indexDir3 = 
>>>>>>                                             
>>>>>> FSDirectory.getDirectory(indexSourceDir03,false);
>>>>>>                                          IndexReader indexSource3 =
>>>>>> IndexReader.open(indexDir3);
>>>>>>                                          Directory indexDir4 = 
>>>>>>                                             
>>>>>> FSDirectory.getDirectory(indexSourceDir04,false);
>>>>>>                                          IndexReader indexSource4 =
>>>>>> IndexReader.open(indexDir4); 
>>>>>>                                         
>>>>>>            
>>>>>>                                          
>>>>>>         IndexReader[] readArray =
>>>>>> {indexSource2,indexSource3,indexSource4};
>>>>>>         //merged reader
>>>>>>         IndexReader mergedReader = new MultiReader(readArray);
>>>>>>         IndexSearcher is = new IndexSearcher(mergedReader);
>>>>>>         
>>>>>>                                 
>>>>>>                                  QueryParser parser = 
>>>>>>                                      new QueryParser("contents" ,new
>>>>>> StandardAnalyzer());
>>>>>>                                  
>>>>>>                                  
>>>>>>                                 String searchQuery= 
>>>>>>                                        new
>>>>>> StringBuffer().append(inputNo).append(" AND dateSc:["
>>>>>> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
>>>>>> ").append("AND").append(" ").append(callTyp).toString();
>>>>>>                                    
>>>>>>                                  
>>>>>>                                  
>>>>>>                                  Query callDetailquery =
>>>>>> parser.parse(searchQuery);
>>>>>>                                  
>>>>>>                                  hits = is.search(callDetailquery); 
>>>>>> 
>>>>>> 
>>>>>> it takes 300 MB of RAM for every search and it is very very slow is
>>>>>> there any other way to control the Memory and to make search faster.i
>>>>>> use SINGLETON  to use the IndexSearcher as a one time used object for
>>>>>> all the instances.
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12500824
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 16:12:49 2007
Return-Path: <java-user-return-30149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1058 invoked from network); 5 Sep 2007 16:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 16:12:48 -0000
Received: (qmail 1297 invoked by uid 500); 5 Sep 2007 16:12:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1255 invoked by uid 500); 5 Sep 2007 16:12:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1238 invoked by uid 99); 5 Sep 2007 16:12:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 09:12:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 16:12:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISxU9-0003c8-M8
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 09:12:09 -0700
Message-ID: <12504196.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 09:12:09 -0700 (PDT)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Look for strange encodings -- tokenization
In-Reply-To: <46DEA655.6070108@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <12479370.post@talk.nabble.com> <46DEA655.6070108@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you Steven,

I have problems while providing those searches, I think it is because of the
StandardAnalyzer is taking those bad-encoding characters as separators hence
not creating such tokens when reading...

Regarding the other idea you provided, did you mean then, that if a document
contains many unseen terms that may mean encoding problems?

Also, what I would like is to be able to at least, measure the impact of
such problems, so I can decide whether the effort will be paid back :)

Cheers
 P


Steven Rowe wrote:
> 
> poeta simbolista wrote:
>> I'd want to know the best way to look for strange encodings on a Lucene
>> index.
>> i have several inputs where input can have been encoded on different
>> sets. I
>> not always know if my guess about the encoding has been ok. Hence, I'd
>> thought of querying the index for some typical strings that would show
>> bad
>> encodings.
> 
> In my experience, the best thing to do first is to look at a random
> sample of the data you suspect to be problematic, and keep track of what
> you find.  Then, decide based on what you find whether it's worth it to
> pursue it further.  (Data is messy, and sometimes it's not worth the
> effort to find and fix everything, as long as you know that the
> probability of problems is relatively low.)
> 
> If you do find that it's worth pursuing, I'd guess that the best spot to
> find problems is at index time rather than query time, mostly because at
> query time, you don't necessarily know what to look for.  If you did,
> then you could already improve your guesser at index time, right?
> 
> One technique that you might find useful is to see if a document
> contains too many previously unseen terms.  You could index documents in
> the same language and subject domain as those which might have
> problematic charset conversion issues, but which do not have those
> issues themselves, and then tokenize potentially problematically
> converted documents, checking for the existence of each term in the
> index[1] and keeping track of the ratio of previously unseen terms to
> the total number of terms.  If you compare this ratio to that for the
> average known good document (and/or the worst-case near-last addition to
> the index), you could get an idea about whether or not the document in
> question has issues.
> 
> Steve
> 
> [1]
> <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/index/IndexReader.html#terms(org.apache.lucene.index.Term)>
> 
> -- 
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Look-for-strange-encodings----tokenization-tf4378064.html#a12504196
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 16:35:54 2007
Return-Path: <java-user-return-30150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37839 invoked from network); 5 Sep 2007 16:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 16:35:53 -0000
Received: (qmail 67288 invoked by uid 500); 5 Sep 2007 16:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67247 invoked by uid 500); 5 Sep 2007 16:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67236 invoked by uid 99); 5 Sep 2007 16:35:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 09:35:41 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 16:35:36 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1989572fkz
        for <java-user@lucene.apache.org>; Wed, 05 Sep 2007 09:35:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SkFo3UY1+umwF0NdkLWhVqPPE0OBLWESRc3LMjPMIn/GwJvFC+IUcgzO1a4Za/0j1VuquidODPicrkHeNeDSNjCA20kW8xB39eY/K00XRltCGGC+dflldbs5AEXbDOnO07YZHC2Q8mV24nZlrTX5rrK0yfRYwyeZbS7W8/waK/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qNv34jrM7uc9xQ5zkd8Nt9x+j8SfzwWORMS4H1eCMXFO6/OLNwnQSl85T6Cb7NmfgDjyYawHdfKhjkGENlNKFuoBUVApEIj45jXYxeAc+JveZFJ6U5LSZ3tkkrZlbYVBlAvRmj7a5ig92khRxYnTdiYRjTt/eyuxa5h32cAecCQ=
Received: by 10.82.119.17 with SMTP id r17mr11145015buc.1189010114415;
        Wed, 05 Sep 2007 09:35:14 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 5 Sep 2007 09:35:14 -0700 (PDT)
Message-ID: <359a92830709050935k17c01beana9642d40e6f0cd8e@mail.gmail.com>
Date: Wed, 5 Sep 2007 12:35:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to boost a document based on a field in the document
In-Reply-To: <12500483.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35847_16245353.1189010114399"
References: <12500483.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35847_16245353.1189010114399
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What would happen if you sorted by vote? Perhaps within ranges
of scores? There's a thread in the list in response to a post I
made about "buckets" that might be relevant....

Otherwise, you might think about boosting the relevant
parts of the document at *index* time based on the value
of vote....

Erick

On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
>
>
> I'm trying to find a query that would boost a document based on a field in
> the document.
>
> I have a simple index with title, description, date, ... I also have a
> field
> called vote.  I want items that have been voted higher to be ranked as
> higher in the search results.  Is there a query and or filter I could use
> to
> accomplish this?
> --
> View this message in context:
> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12500483
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35847_16245353.1189010114399--

From java-user-return-30151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 16:45:02 2007
Return-Path: <java-user-return-30151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51048 invoked from network); 5 Sep 2007 16:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 16:45:01 -0000
Received: (qmail 87075 invoked by uid 500); 5 Sep 2007 16:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86619 invoked by uid 500); 5 Sep 2007 16:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86608 invoked by uid 99); 5 Sep 2007 16:44:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 09:44:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 16:44:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISxzM-0004ce-Ba
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 09:44:24 -0700
Message-ID: <12506195.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 09:44:24 -0700 (PDT)
From: Adam Ruggles <a.ruggles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to boost a document based on a field in the document
In-Reply-To: <359a92830709050935k17c01beana9642d40e6f0cd8e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: a.ruggles@gmail.com
References: <12500483.post@talk.nabble.com> <359a92830709050935k17c01beana9642d40e6f0cd8e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well a sort would remove the relevance portion of the query, which I really
don't want to do.  I tried using  the ValueSourceQuery but it doesn't seem
to be able to handle negative vote values.  Buckets sound interesting but
since there is no max voting value it would be difficult to build the max
bucket. 


Erick Erickson wrote:
> 
> What would happen if you sorted by vote? Perhaps within ranges
> of scores? There's a thread in the list in response to a post I
> made about "buckets" that might be relevant....
> 
> Otherwise, you might think about boosting the relevant
> parts of the document at *index* time based on the value
> of vote....
> 
> Erick
> 
> On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
>>
>>
>> I'm trying to find a query that would boost a document based on a field
>> in
>> the document.
>>
>> I have a simple index with title, description, date, ... I also have a
>> field
>> called vote.  I want items that have been voted higher to be ranked as
>> higher in the search results.  Is there a query and or filter I could use
>> to
>> accomplish this?
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12500483
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12506195
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 16:51:21 2007
Return-Path: <java-user-return-30152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65614 invoked from network); 5 Sep 2007 16:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 16:51:20 -0000
Received: (qmail 5563 invoked by uid 500); 5 Sep 2007 16:51:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5529 invoked by uid 500); 5 Sep 2007 16:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5506 invoked by uid 99); 5 Sep 2007 16:51:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 09:51:07 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 16:51:02 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2518996muf
        for <java-user@lucene.apache.org>; Wed, 05 Sep 2007 09:50:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hxs4oVnJvlD9kenDZIYJJ/jdRtxEPdinueKTn6qPmwjFlUFKipy60hz4QPgJHQ5iJddnvUBj/oBtnHcMlocY/tG3uFLiXmSArDd8lh9L79RgyyDDEpl7SDBg1ZO3uK8Keq+M++y12L6IFZNiybiEeDgRZxKo3QJ9gKL3ikGX2T0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cqtPfzhBAO3jYRrp6Fc72kCH6RZFZ4Q5dJ1I0rtZ/gaYt0tmPwWpH7UzzU2N0hVsjW+g+P4VxnAXtQ/qhg08UsxOQQZrNDDuYsoV2TBRQWEt/p0WovlqPfo5d/Tu8/pHY1Iy2H4v80vkpHVMDsRbt+pg3Wx8GCntUGBDD7Yd6pw=
Received: by 10.82.153.5 with SMTP id a5mr101239bue.1189011040181;
        Wed, 05 Sep 2007 09:50:40 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 5 Sep 2007 09:50:40 -0700 (PDT)
Message-ID: <359a92830709050950x6ce3196ga9cb94d0d353509@mail.gmail.com>
Date: Wed, 5 Sep 2007 12:50:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to boost a document based on a field in the document
In-Reply-To: <12506195.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36007_5172005.1189011040148"
References: <12500483.post@talk.nabble.com>
	 <359a92830709050935k17c01beana9642d40e6f0cd8e@mail.gmail.com>
	 <12506195.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36007_5172005.1189011040148
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you misunderstand. The buckets are NOT the votes,
they are the relevance scores from the search. So your
search returns relevance scores (raw) from, say 1 - 100.
You could collect the results in 5 buckets and sort
by vote *within* the bucket. So the user still sees
the most relevant documents at the top, but within
that most relevant quintile she sees the order
munged a bit by vote. The thread I mentioned talks
about how to accomplish this with a FieldSortedHitQueue (?)
and a HitCollector.

Since you're massaging the sort however you want,
negative votes should be do-able.

Best
Erick

On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
>
>
> Well a sort would remove the relevance portion of the query, which I
> really
> don't want to do.  I tried using  the ValueSourceQuery but it doesn't seem
> to be able to handle negative vote values.  Buckets sound interesting but
> since there is no max voting value it would be difficult to build the max
> bucket.
>
>
> Erick Erickson wrote:
> >
> > What would happen if you sorted by vote? Perhaps within ranges
> > of scores? There's a thread in the list in response to a post I
> > made about "buckets" that might be relevant....
> >
> > Otherwise, you might think about boosting the relevant
> > parts of the document at *index* time based on the value
> > of vote....
> >
> > Erick
> >
> > On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
> >>
> >>
> >> I'm trying to find a query that would boost a document based on a field
> >> in
> >> the document.
> >>
> >> I have a simple index with title, description, date, ... I also have a
> >> field
> >> called vote.  I want items that have been voted higher to be ranked as
> >> higher in the search results.  Is there a query and or filter I could
> use
> >> to
> >> accomplish this?
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12500483
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12506195
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36007_5172005.1189011040148--

From java-user-return-30153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 17:02:51 2007
Return-Path: <java-user-return-30153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88238 invoked from network); 5 Sep 2007 17:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 17:02:49 -0000
Received: (qmail 50432 invoked by uid 500); 5 Sep 2007 17:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50393 invoked by uid 500); 5 Sep 2007 17:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50379 invoked by uid 99); 5 Sep 2007 17:02:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 10:02:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 17:03:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ISyGY-0005Ld-8X
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 10:02:10 -0700
Message-ID: <12506520.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 10:02:10 -0700 (PDT)
From: Adam Ruggles <a.ruggles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to boost a document based on a field in the document
In-Reply-To: <359a92830709050950x6ce3196ga9cb94d0d353509@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: a.ruggles@gmail.com
References: <12500483.post@talk.nabble.com> <359a92830709050935k17c01beana9642d40e6f0cd8e@mail.gmail.com> <12506195.post@talk.nabble.com> <359a92830709050950x6ce3196ga9cb94d0d353509@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Doh... Thanks.



Erick Erickson wrote:
> 
> I think you misunderstand. The buckets are NOT the votes,
> they are the relevance scores from the search. So your
> search returns relevance scores (raw) from, say 1 - 100.
> You could collect the results in 5 buckets and sort
> by vote *within* the bucket. So the user still sees
> the most relevant documents at the top, but within
> that most relevant quintile she sees the order
> munged a bit by vote. The thread I mentioned talks
> about how to accomplish this with a FieldSortedHitQueue (?)
> and a HitCollector.
> 
> Since you're massaging the sort however you want,
> negative votes should be do-able.
> 
> Best
> Erick
> 
> On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
>>
>>
>> Well a sort would remove the relevance portion of the query, which I
>> really
>> don't want to do.  I tried using  the ValueSourceQuery but it doesn't
>> seem
>> to be able to handle negative vote values.  Buckets sound interesting but
>> since there is no max voting value it would be difficult to build the max
>> bucket.
>>
>>
>> Erick Erickson wrote:
>> >
>> > What would happen if you sorted by vote? Perhaps within ranges
>> > of scores? There's a thread in the list in response to a post I
>> > made about "buckets" that might be relevant....
>> >
>> > Otherwise, you might think about boosting the relevant
>> > parts of the document at *index* time based on the value
>> > of vote....
>> >
>> > Erick
>> >
>> > On 9/5/07, Adam Ruggles <a.ruggles@gmail.com> wrote:
>> >>
>> >>
>> >> I'm trying to find a query that would boost a document based on a
>> field
>> >> in
>> >> the document.
>> >>
>> >> I have a simple index with title, description, date, ... I also have a
>> >> field
>> >> called vote.  I want items that have been voted higher to be ranked as
>> >> higher in the search results.  Is there a query and or filter I could
>> use
>> >> to
>> >> accomplish this?
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12500483
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12506195
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-boost-a-document-based-on-a-field-in-the-document-tf4384816.html#a12506520
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 18:57:05 2007
Return-Path: <java-user-return-30154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61200 invoked from network); 5 Sep 2007 18:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 18:57:04 -0000
Received: (qmail 44881 invoked by uid 500); 5 Sep 2007 18:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44850 invoked by uid 500); 5 Sep 2007 18:56:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44839 invoked by uid 99); 5 Sep 2007 18:56:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 11:56:51 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 18:56:45 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:50762 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IT033-0000d5-9X
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 20:56:24 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com> <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org> <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <25F21BB0-FEFA-4AEE-9FC6-0857C294F7D3@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Extract terms not by reader, but by documents
Date: Wed, 5 Sep 2007 20:50:20 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IT033-0000d5-9X.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IT033-0000d5-9X 54695c4c81424f5e59ef76f3c81f8db7
X-Virus-Checked: Checked by ClamAV on apache.org

Rafael, are you looking for IndexReader.getTermFreqVector?

--
karl

5 sep 2007 kl. 16.48 skrev Rafael Rossini:

> Thank=B4s for the reply Grant, let me try to explain exactly what I=B4d =
=20
> like to
> do. Take the 2 docs:
>
> Doc1: "Microsoft is a nice software company, and Xbox seems to be a =20=

> nice
> product too."
> Doc2: "Nintendo and Sony have been in the game industry for a long =20
> time, but
> now, Microsoft is trying to enter with Xbox"
>
> Now If I have a query like this, "(Nintendo AND Sony AND Microsoft) OR
> (Xbox)" and perform a query.rewrite(reader).extractTerms(set), my =20
> set is
> going to have all the terms (Nintendo, Sony, Microsoft, Xbox) =20
> right? But
> when I iterate the docs, I wanted to do something like
> query.rewrite(doc).extracTerms(set),  [I know this method does not =20
> exist, is
> just and example of the funcionality].
>
> So, for Doc1, my set would be populate with (Xbox) only, and for =20
> Doc2 the
> set would be populated with (Nintendo, Sony, Microsoft, Xbox).
> Is this possible? Is it clear now what I=B4m trying to achieve?
>
> []s
>      Rossini
>
> On 9/4/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Not sure if I am understanding what you are trying to do.  I think
>> you are trying to find out which terms occurred in a particular
>> document, correct?
>>
>> I also am not sure about your first example.  My understanding of
>> extractTerms is that it just gives you back the set of all terms that
>> occur in the _query_, not necessarily those that matched in the
>> document, although it has this effect for things like WildcardQuery
>> and others that get expanded using TermEnum since they are expanded
>> based on what is in the index.  I think this is best seen by the
>> implementation of extractTerms() in TermQuery.java in which it just
>> adds the term from the query into the set.  Likewise for BooleanQuery
>> which loops over the clauses and extracts the terms from each clause
>> and adds them to the set.  Thus, if you had a boolean query of all
>> term queries, you would get back the set of all the terms.
>>
>> As for the problem it sounds like you are interested in, you could
>> use SpanQuery functionality with some post processing analysis or try
>> using Term Vectors and the new (unreleased) TermVectorMapper (TVM)
>> functionality (or possibly a combination of both).  In this case, you
>> will need to write your own implementation of the TVM that takes in
>> the query so it knows what terms to identify. If you go the latter
>> route, know that it is new functionality and probably doesn't have a
>> whole lot of users yet, so there may still be issues with it.  See
>> the nightly build or nightly javadocs for info on these.
>>
>> The other question that might be helpful, is what custom highlighting
>> are you doing that isn't covered by the contrib/highlighter?  Perhaps
>> you have some suggestions that are generic enough to help improve
>> it?  Just a thought.
>>
>> Hope this helps,
>> Grant
>>
>> On Sep 4, 2007, at 5:01 PM, Rafael Rossini wrote:
>>
>>> Hi all,
>>>
>>>     In some custom highlighting, I often write a code like this:
>>>
>>>        Set<Term> matchedTerms =3D new HashSet<Term>();
>>>        query.rewrite(reader).extractTerms(matchedTerms);
>>>
>>>     With this code the Term Set gets populated by the matched query
>>> in your
>>> whole index. Is it possible to this with a document instead of the
>>> reader?
>>> Something like
>>> query.rewrite(documentId).extractTerms(matchedTerms) ?
>>>
>>> []s
>>>      Rossini
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 19:07:41 2007
Return-Path: <java-user-return-30155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64840 invoked from network); 5 Sep 2007 19:07:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 19:07:39 -0000
Received: (qmail 65366 invoked by uid 500); 5 Sep 2007 19:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64736 invoked by uid 500); 5 Sep 2007 19:07:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64725 invoked by uid 99); 5 Sep 2007 19:07:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 12:07:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 19:07:21 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1893439wxd
        for <java-user@lucene.apache.org>; Wed, 05 Sep 2007 12:07:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=al+38y3+RP3hYQcA21V5ntCM3OX9lQe43N2dZm7FOxh9gVE1NPGxlUTVPsRL0FsxMXG7N/SxF8WVRjGvsLYMZllj5VDMibPYUDvrlFpJCVbduhMRTuLCySUr5gCNU/puKIq9xm5Ru8dYxgphqO+ap/7CAFCPZVYckDvYTdfSr+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qpRzYcwnNqjUO6PyrTArm9pEDoY9tjYvYZgF80Oobgfl1vjigDlH8eO9ibQi9Z1TaNTfX5AaJEiG0TK81ujyFi2DBrj/mACix+PShoblBP7WfGwQ5KkEzaZYio1cLTMgV1vV0r1WNagIB1wTnvm/T8pYYSnSkX+Myz7gyGaCOoQ=
Received: by 10.90.118.12 with SMTP id q12mr7570610agc.1189019220409;
        Wed, 05 Sep 2007 12:07:00 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTPS id 6sm7850382agd.2007.09.05.12.06.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 05 Sep 2007 12:06:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com> <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org> <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <0B6973EE-9278-4831-9428-4E9EBF5EBE25@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Extract terms not by reader, but by documents
Date: Wed, 5 Sep 2007 15:06:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 5, 2007, at 10:48 AM, Rafael Rossini wrote:

> Thank=B4s for the reply Grant, let me try to explain exactly what I=B4d =
=20
> like to
> do. Take the 2 docs:
>
> Doc1: "Microsoft is a nice software company, and Xbox seems to be a =20=

> nice
> product too."
> Doc2: "Nintendo and Sony have been in the game industry for a long =20
> time, but
> now, Microsoft is trying to enter with Xbox"
>
> Now If I have a query like this, "(Nintendo AND Sony AND Microsoft) OR
> (Xbox)" and perform a query.rewrite(reader).extractTerms(set), my =20
> set is
> going to have all the terms (Nintendo, Sony, Microsoft, Xbox) =20
> right? But
> when I iterate the docs, I wanted to do something like
> query.rewrite(doc).extracTerms(set),  [I know this method does not =20
> exist, is
> just and example of the funcionality].
>
> So, for Doc1, my set would be populate with (Xbox) only, and for =20
> Doc2 the
> set would be populated with (Nintendo, Sony, Microsoft, Xbox).
> Is this possible? Is it clear now what I=B4m trying to achieve?
>

Yes, I think I understand.  You want to know what terms from your =20
query matched in a given document.

I still don't think query.rewrite.extractTerms is meaningful in the =20
context of a document.  extractTerms really is just used to figure =20
out the full set of terms that are going to be in a query, especially =20=

in light of a WildcardQuery or something similar.  Creating a new =20
method to do what you want named extractTerms would only confuse what =20=

the other version of the method does.

If I were doing this, I would probably do a combination of a =20
SpanQuery to get the positions of things that match in the document =20
(i.e. Xbox, Sony, etc.) and then do some analysis on those positions =20
to determine what terms matched from the query.  I think this =20
analysis could be facilitated by the new TermVectorMapper =20
functionality, but it isn't the only way to go.

Also, contrib/highlighter probably already does most of this, but I =20
am not an expert on Highlighter.  I would bet, however, it would tell =20=

you which terms are in the document and where.


-Grant

> []s
>      Rossini
>
> On 9/4/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Not sure if I am understanding what you are trying to do.  I think
>> you are trying to find out which terms occurred in a particular
>> document, correct?
>>
>> I also am not sure about your first example.  My understanding of
>> extractTerms is that it just gives you back the set of all terms that
>> occur in the _query_, not necessarily those that matched in the
>> document, although it has this effect for things like WildcardQuery
>> and others that get expanded using TermEnum since they are expanded
>> based on what is in the index.  I think this is best seen by the
>> implementation of extractTerms() in TermQuery.java in which it just
>> adds the term from the query into the set.  Likewise for BooleanQuery
>> which loops over the clauses and extracts the terms from each clause
>> and adds them to the set.  Thus, if you had a boolean query of all
>> term queries, you would get back the set of all the terms.
>>
>> As for the problem it sounds like you are interested in, you could
>> use SpanQuery functionality with some post processing analysis or try
>> using Term Vectors and the new (unreleased) TermVectorMapper (TVM)
>> functionality (or possibly a combination of both).  In this case, you
>> will need to write your own implementation of the TVM that takes in
>> the query so it knows what terms to identify. If you go the latter
>> route, know that it is new functionality and probably doesn't have a
>> whole lot of users yet, so there may still be issues with it.  See
>> the nightly build or nightly javadocs for info on these.
>>
>> The other question that might be helpful, is what custom highlighting
>> are you doing that isn't covered by the contrib/highlighter?  Perhaps
>> you have some suggestions that are generic enough to help improve
>> it?  Just a thought.
>>
>> Hope this helps,
>> Grant
>>
>> On Sep 4, 2007, at 5:01 PM, Rafael Rossini wrote:
>>
>>> Hi all,
>>>
>>>     In some custom highlighting, I often write a code like this:
>>>
>>>        Set<Term> matchedTerms =3D new HashSet<Term>();
>>>        query.rewrite(reader).extractTerms(matchedTerms);
>>>
>>>     With this code the Term Set gets populated by the matched query
>>> in your
>>> whole index. Is it possible to this with a document instead of the
>>> reader?
>>> Something like
>>> query.rewrite(documentId).extractTerms(matchedTerms) ?
>>>
>>> []s
>>>      Rossini
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 05 23:30:23 2007
Return-Path: <java-user-return-30156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59676 invoked from network); 5 Sep 2007 23:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Sep 2007 23:30:22 -0000
Received: (qmail 34755 invoked by uid 500); 5 Sep 2007 23:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34722 invoked by uid 500); 5 Sep 2007 23:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34711 invoked by uid 99); 5 Sep 2007 23:30:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 16:30:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 23:31:26 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 89B9F71C076; Wed,  5 Sep 2007 16:29:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 86A5A71C058
	for <java-user@lucene.apache.org>; Wed,  5 Sep 2007 16:29:45 -0700 (PDT)
Date: Wed, 5 Sep 2007 16:29:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12500824.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net>
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com>
 <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com>
 <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com>
 <12500824.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I use StandardAnalyzer.the records daily ranges from 5 crore to 6 crore. for
: every second i am updating my Index. i instantiate IndexSearcher object one
: time for all the searches. for an hour can i see the updated records in the
: indexstore by reinstantiating IndexSearcher object.but the problem when i
: reinstantiate IndexSearcher ,my RAM memory gets appended.is there any

skimming hte code below, you are opening an IndexSearcher over a 
MultiReader over 4 seperate IndexReaders ... when you instantiate a new 
IndexSearcher are you explicitly closing both the old IndexSearcher as 
well as all of 4 of those old IndexReaders and the MultiReader?

closing an IndexSearcher will only close the underlying Reader if it 
opened it .. and a MultiReader constructed from other IndexReaders will 
never close them.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 04:55:51 2007
Return-Path: <java-user-return-30157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48979 invoked from network); 6 Sep 2007 04:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 04:55:50 -0000
Received: (qmail 69336 invoked by uid 500); 6 Sep 2007 04:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69307 invoked by uid 500); 6 Sep 2007 04:55:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69296 invoked by uid 99); 6 Sep 2007 04:55:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 21:55:37 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 04:56:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IT9OZ-0006ko-Fw
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 21:55:11 -0700
Message-ID: <12515624.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 21:55:11 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


I set IndexSearcher as the application Object after the first search.

here is my code:

                             if(searcherOne.isOpen()==(true)){       
     
                                         Directory compressDir2 = 
                     
FSDirectory.getDirectory(compressionSourceDir02,false);
                                         IndexReader compressedSource2 =
IndexReader.open(compressDir2);
                                       Directory compressDir3 = 
                                            
FSDirectory.getDirectory(compressionSourceDir03,false);
                                         IndexReader compressedSource3 =
IndexReader.open(compressDir3);
                                         Directory compressDir4 = 
                                            
FSDirectory.getDirectory(compressionSourceDir04,false);
                                         IndexReader compressedSource4 =
IndexReader.open(compressDir4); 
                                        
          
                                         
        IndexReader[] readArray =
{compressedSource2,compressedSource3,compressedSource4};
        //merged reader
        IndexReader mergedReader = new MultiReader(readArray);
        IndexSearcher is = new IndexSearcher(mergedReader);
                                 BooleanQuery.setMaxClauseCount(1000000000);
        searcherOne.setIndexSearch(is);
                                         searcherOne.setOpen(false);
                                 BigInteger _l = new BigInteger(mobile1,
10);
                                 _mobile = _l.toString(36);
                                 QueryParser parser = 
                                     new QueryParser(AppConstants.CONTENTS,
new StandardAnalyzer());
                                 
                                 
                                searchQuery= 
                                       new
StringBuffer().append(_mobile).append(" AND dateSc:["
).append(fromDate).append(" TO ").append(toDate).append("]").append("
").append("AND").append(" ").append(callTyp).toString();
                                    
                                 
                                 
                                 
                                 Query callDetailquery =
parser.parse(searchQuery);
                                 
                                 hits = is.search(callDetailquery);
                                 System.out.println("FirstSearch");
                                 
                                 
                             }
      // System.out.println("No Of MAXIMUM dOCUMENTS : " +is.maxDoc());
      else{
          
       is=searcherOne.getIndexSearch();
      
        BigInteger _l = new BigInteger(mobile1, 10);
        _mobile = _l.toString(36);
   
        BooleanQuery.setMaxClauseCount(1000000000);
        QueryParser parser = 
            new QueryParser(AppConstants.CONTENTS, new StandardAnalyzer());
        
          searchQuery=new StringBuffer().append(_mobile).append("
").append(" AND dateSc:[" ).append(fromDate).append(" TO
").append(toDate).append("]").append(" ").append("AND").append("
").append(callTyp).toString(); 
         
              
           
       
        
        
         callDetailquery = parser.parse(searchQuery);
        
      hits = is.search(callDetailquery);
             

how can i reconstruct the new IndexSearcher for every hour to see the
updated records .
                                     


hossman wrote:
> 
> 
> : I use StandardAnalyzer.the records daily ranges from 5 crore to 6 crore.
> for
> : every second i am updating my Index. i instantiate IndexSearcher object
> one
> : time for all the searches. for an hour can i see the updated records in
> the
> : indexstore by reinstantiating IndexSearcher object.but the problem when
> i
> : reinstantiate IndexSearcher ,my RAM memory gets appended.is there any
> 
> skimming hte code below, you are opening an IndexSearcher over a 
> MultiReader over 4 seperate IndexReaders ... when you instantiate a new 
> IndexSearcher are you explicitly closing both the old IndexSearcher as 
> well as all of 4 of those old IndexReaders and the MultiReader?
> 
> closing an IndexSearcher will only close the underlying Reader if it 
> opened it .. and a MultiReader constructed from other IndexReaders will 
> never close them.
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12515624
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 05:25:38 2007
Return-Path: <java-user-return-30158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58819 invoked from network); 6 Sep 2007 05:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 05:25:36 -0000
Received: (qmail 95242 invoked by uid 500); 6 Sep 2007 05:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95207 invoked by uid 500); 6 Sep 2007 05:25:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95196 invoked by uid 99); 6 Sep 2007 05:25:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 22:25:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 05:26:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 011F171C0E9; Wed,  5 Sep 2007 22:24:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F20D271C0DC
	for <java-user@lucene.apache.org>; Wed,  5 Sep 2007 22:24:59 -0700 (PDT)
Date: Wed, 5 Sep 2007 22:24:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12515624.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net>
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com>
 <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com>
 <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com>
 <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net>
 <12515624.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I set IndexSearcher as the application Object after the first search.
	...
: how can i reconstruct the new IndexSearcher for every hour to see the
: updated records .

i'm confused ... my understanding based on the comments you made below 
(in an earlier message) was that you already *were* constructing a new  
IndexSearcher once an hour -- but every time you do that, your memory 
usage grows, and and that sometimes you got OOM Errors.

if that's not what you said, then i think you need to explain, in detail, 
in one message, exactly what your problem is.  And don't assume we 
understand anything -- tell us *EVERYTHING* (like, for example, what the 
word "crore" means, how "searcherOne" is implemented, and the answer to 
the specfic question i asked in my last message: does your application, 
contain anywhere in it, any code that will close anything (IndexSearchers 
or IndexReaders) ?


: > : I use StandardAnalyzer.the records daily ranges from 5 crore to 6 crore.
: > for
: > : every second i am updating my Index. i instantiate IndexSearcher object
: > one
: > : time for all the searches. for an hour can i see the updated records in
: > the
: > : indexstore by reinstantiating IndexSearcher object.but the problem when
: > i
: > : reinstantiate IndexSearcher ,my RAM memory gets appended.is there any


: > IndexSearcher are you explicitly closing both the old IndexSearcher as 
: > well as all of 4 of those old IndexReaders and the MultiReader?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 06:01:46 2007
Return-Path: <java-user-return-30159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72430 invoked from network); 6 Sep 2007 06:01:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 06:01:46 -0000
Received: (qmail 43484 invoked by uid 500); 6 Sep 2007 06:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43061 invoked by uid 500); 6 Sep 2007 06:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43050 invoked by uid 99); 6 Sep 2007 06:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Sep 2007 23:01:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 06:01:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITAQP-00084L-IL
	for java-user@lucene.apache.org; Wed, 05 Sep 2007 23:01:09 -0700
Message-ID: <12516112.post@talk.nabble.com>
Date: Wed, 5 Sep 2007 23:01:09 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12515624.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


i wont close the IndexReader after the First Search.when i instantiate
IndexSearcher object will it display the updated records in that directories

Sebastin wrote:
> 
> I set IndexSearcher as the application Object after the first search.
> 
> here is my code:
> 
>                              if(searcherOne.isOpen()==(true)){       
>      
>                                          Directory compressDir2 = 
>                      
> FSDirectory.getDirectory(compressionSourceDir02,false);
>                                          IndexReader compressedSource2 =
> IndexReader.open(compressDir2);
>                                        Directory compressDir3 = 
>                                             
> FSDirectory.getDirectory(compressionSourceDir03,false);
>                                          IndexReader compressedSource3 =
> IndexReader.open(compressDir3);
>                                          Directory compressDir4 = 
>                                             
> FSDirectory.getDirectory(compressionSourceDir04,false);
>                                          IndexReader compressedSource4 =
> IndexReader.open(compressDir4); 
>                                         
>           
>                                          
>         IndexReader[] readArray =
> {compressedSource2,compressedSource3,compressedSource4};
>         //merged reader
>         IndexReader mergedReader = new MultiReader(readArray);
>         IndexSearcher is = new IndexSearcher(mergedReader);
>                                 
> BooleanQuery.setMaxClauseCount(1000000000);
>         searcherOne.setIndexSearch(is);
>                                          searcherOne.setOpen(false);
>                                  BigInteger _l = new BigInteger(mobile1,
> 10);
>                                  _mobile = _l.toString(36);
>                                  QueryParser parser = 
>                                      new
> QueryParser(AppConstants.CONTENTS, new StandardAnalyzer());
>                                  
>                                  
>                                 searchQuery= 
>                                        new
> StringBuffer().append(_mobile).append(" AND dateSc:["
> ).append(fromDate).append(" TO ").append(toDate).append("]").append("
> ").append("AND").append(" ").append(callTyp).toString();
>                                     
>                                  
>                                  
>                                  
>                                  Query callDetailquery =
> parser.parse(searchQuery);
>                                  
>                                  hits = is.search(callDetailquery);
>                                  System.out.println("FirstSearch");
>                                  
>                                  
>                              }
>       // System.out.println("No Of MAXIMUM dOCUMENTS : " +is.maxDoc());
>       else{
>           
>        is=searcherOne.getIndexSearch();
>       
>         BigInteger _l = new BigInteger(mobile1, 10);
>         _mobile = _l.toString(36);
>    
>         BooleanQuery.setMaxClauseCount(1000000000);
>         QueryParser parser = 
>             new QueryParser(AppConstants.CONTENTS, new
> StandardAnalyzer());
>         
>           searchQuery=new StringBuffer().append(_mobile).append("
> ").append(" AND dateSc:[" ).append(fromDate).append(" TO
> ").append(toDate).append("]").append(" ").append("AND").append("
> ").append(callTyp).toString(); 
>          
>               
>            
>        
>         
>         
>          callDetailquery = parser.parse(searchQuery);
>         
>       hits = is.search(callDetailquery);
>              
> 
> how can i reconstruct the new IndexSearcher for every hour to see the
> updated records .
>                                      
> 
> 
> hossman wrote:
>> 
>> 
>> : I use StandardAnalyzer.the records daily ranges from 5 crore to 6
>> crore. for
>> : every second i am updating my Index. i instantiate IndexSearcher object
>> one
>> : time for all the searches. for an hour can i see the updated records in
>> the
>> : indexstore by reinstantiating IndexSearcher object.but the problem when
>> i
>> : reinstantiate IndexSearcher ,my RAM memory gets appended.is there any
>> 
>> skimming hte code below, you are opening an IndexSearcher over a 
>> MultiReader over 4 seperate IndexReaders ... when you instantiate a new 
>> IndexSearcher are you explicitly closing both the old IndexSearcher as 
>> well as all of 4 of those old IndexReaders and the MultiReader?
>> 
>> closing an IndexSearcher will only close the underlying Reader if it 
>> opened it .. and a MultiReader constructed from other IndexReaders will 
>> never close them.
>> 
>> -Hoss
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12516112
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 11:41:56 2007
Return-Path: <java-user-return-30160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79980 invoked from network); 6 Sep 2007 11:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 11:41:54 -0000
Received: (qmail 24522 invoked by uid 500); 6 Sep 2007 11:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24487 invoked by uid 500); 6 Sep 2007 11:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24474 invoked by uid 99); 6 Sep 2007 11:41:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 04:41:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 11:42:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITFjY-0000Ah-Np
	for java-user@lucene.apache.org; Thu, 06 Sep 2007 04:41:16 -0700
Message-ID: <12520740.post@talk.nabble.com>
Date: Thu, 6 Sep 2007 04:41:16 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Search performance question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I have an index which contains more than 20K documents. Each document has
the following structure :

field : ID (Index and store)                          typical value - "1000"
field : parameterName(index and store)          typical value -
"/mcp/data/parent1/parent2/child1/child2/status"
field : parameterValue(index and not store)    typical value - "draft"

When I search for a term which results in "all" the documents getting
returned, the search time is more than 1 sec. I have still not done
hits.doc(), which I understand, would be even worse.

My problem is, I am expecting the search itself to happen in the order of a
few milliseconds irrespective of the number of documents it matched. Am I
expecting too much ?
-- 
View this message in context: http://www.nabble.com/Search-performance-question-tf4391551.html#a12520740
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 12:06:50 2007
Return-Path: <java-user-return-30161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94156 invoked from network); 6 Sep 2007 12:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 12:06:48 -0000
Received: (qmail 67739 invoked by uid 500); 6 Sep 2007 12:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67670 invoked by uid 500); 6 Sep 2007 12:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67659 invoked by uid 99); 6 Sep 2007 12:06:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 05:06:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 12:06:32 +0000
Received: by py-out-1112.google.com with SMTP id d32so428023pye
        for <java-user@lucene.apache.org>; Thu, 06 Sep 2007 05:06:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Dv24iTPXV4d6P3yrFF2aE6Cna6OgbK7b8aqEYX6WXY4=;
        b=XY+N1sKX14DaMu96j57J1RZ3eB7UxFEFOHo+oSAU0gFkrBxqcJRQHhWpuI5mCOv6n5jOb9JkS8gJ2eqjbZ36a27+Beg/vnPmWulEXucVklRZNL8p10M+uWIJoySJvKY6dgAT/mzyi8eS6nxRApcWVIPMBPXEnVxn13aRezIwbfE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ifh1ITFH2vLc0nmvZ9UXQW8jL0p8J3QTazIZIVtKNxo7D99nUxTrF3v0AIkeq11JOVK1nRErG2v/LV2W5KCBBeblG7fjqcsy3ICOsxEBhaIn/HHW7qcbwJQN7QipT5XevDrSPzxnBzgRHpbxPEkkbNvOIPQF5EbCl18kimBwz0A=
Received: by 10.65.81.10 with SMTP id i10mr966365qbl.1189080370585;
        Thu, 06 Sep 2007 05:06:10 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e15sm3525612qbe.2007.09.06.05.06.09
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 06 Sep 2007 05:06:09 -0700 (PDT)
Message-ID: <46DFED00.2050009@gmail.com>
Date: Thu, 06 Sep 2007 08:05:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search performance question
References: <12520740.post@talk.nabble.com>
In-Reply-To: <12520740.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Your not expecting too much. On cheap hardware I watch searches on over 
5 mil + docs that match every doc come back in under a second. Able to 
post your search code?

makkhar wrote:
> Hi,
>
>    I have an index which contains more than 20K documents. Each document has
> the following structure :
>
> field : ID (Index and store)                          typical value - "1000"
> field : parameterName(index and store)          typical value -
> "/mcp/data/parent1/parent2/child1/child2/status"
> field : parameterValue(index and not store)    typical value - "draft"
>
> When I search for a term which results in "all" the documents getting
> returned, the search time is more than 1 sec. I have still not done
> hits.doc(), which I understand, would be even worse.
>
> My problem is, I am expecting the search itself to happen in the order of a
> few milliseconds irrespective of the number of documents it matched. Am I
> expecting too much ?
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 12:30:25 2007
Return-Path: <java-user-return-30162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99989 invoked from network); 6 Sep 2007 12:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 12:30:25 -0000
Received: (qmail 10659 invoked by uid 500); 6 Sep 2007 12:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10466 invoked by uid 500); 6 Sep 2007 12:30:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10454 invoked by uid 99); 6 Sep 2007 12:30:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 05:30:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 12:30:06 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id B9D2316159C
	for <java-user@lucene.apache.org>; Thu,  6 Sep 2007 05:29:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12520740.post@talk.nabble.com>
References: <12520740.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <07BB25BE-E2E5-4B31-BD59-49986D40CCEB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Search performance question
Date: Thu, 6 Sep 2007 08:29:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at http://wiki.apache.org/lucene-java/BasicsOfPerformance

Are you opening the IndexSearcher every time you search, even when no  
documents have changed?

-Grant

On Sep 6, 2007, at 7:41 AM, makkhar wrote:

>
> Hi,
>
>    I have an index which contains more than 20K documents. Each  
> document has
> the following structure :
>
> field : ID (Index and store)                          typical value  
> - "1000"
> field : parameterName(index and store)          typical value -
> "/mcp/data/parent1/parent2/child1/child2/status"
> field : parameterValue(index and not store)    typical value - "draft"
>
> When I search for a term which results in "all" the documents getting
> returned, the search time is more than 1 sec. I have still not done
> hits.doc(), which I understand, would be even worse.
>
> My problem is, I am expecting the search itself to happen in the  
> order of a
> few milliseconds irrespective of the number of documents it  
> matched. Am I
> expecting too much ?
> -- 
> View this message in context: http://www.nabble.com/Search- 
> performance-question-tf4391551.html#a12520740
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 13:52:54 2007
Return-Path: <java-user-return-30163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31851 invoked from network); 6 Sep 2007 13:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 13:52:52 -0000
Received: (qmail 13190 invoked by uid 500); 6 Sep 2007 13:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13150 invoked by uid 500); 6 Sep 2007 13:52:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13139 invoked by uid 99); 6 Sep 2007 13:52:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 06:52:39 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 13:53:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITHmJ-0004TD-Kz
	for java-user@lucene.apache.org; Thu, 06 Sep 2007 06:52:15 -0700
Message-ID: <12522976.post@talk.nabble.com>
Date: Thu, 6 Sep 2007 06:52:15 -0700 (PDT)
From: newbieoflucene <shanghai2k10@hotmail.com>
To: java-user@lucene.apache.org
Subject: highlight only some terms from query string?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shanghai2k10@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


When user inputs some terms to query by lucene, I want to only high light
some terms in some fields I specified. Is it possible?

For example:
The record has 3 fields: Name, Title, Desc.
and user search terms are: willas, SE, self des.
how can I set only the terms [willas] and [SE] high lighted in [Name] and
[Title] fields?
-- 
View this message in context: http://www.nabble.com/highlight-only-some-terms-from-query-string--tf4392290.html#a12522976
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 17:33:36 2007
Return-Path: <java-user-return-30164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65364 invoked from network); 6 Sep 2007 17:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 17:33:34 -0000
Received: (qmail 22079 invoked by uid 500); 6 Sep 2007 17:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22052 invoked by uid 500); 6 Sep 2007 17:33:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22041 invoked by uid 99); 6 Sep 2007 17:33:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 10:33:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rafael.rossini@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 17:33:19 +0000
Received: by mu-out-0910.google.com with SMTP id g7so279933muf
        for <java-user@lucene.apache.org>; Thu, 06 Sep 2007 10:32:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tkrPBLLPdrcfl2RmKJhDXtPXkS4ioCa1VepXdzUPWZc=;
        b=bYa0yoeP4lAPxTxLlLIDqFKYEm0GDQPoLF3W3UUTcw7LhO7qT5Mt07uXm/0H0DWcflk4jQveILjLkRuDUNOHw0mWIJ9yav7R3ZixUy6Um5SoCUxBEYVnFpiWEbd0niZBwEpzXReu8576NiEpcKUZMn/eBLD44xFs3rpjiIfKBN4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mc14k9cAjgb45whxy8nduyKr2ms6zKacfEntdemuMCiqYv3kiks67b0QUPblN58QRGZ7LTLsoce2zu6kdwx+PreCkFynKrqCw42+crhr0mY5ITtpOoHdNpYt+KaHLSGCJ4zyiHMUcHDRlwfhYSoPik5Pr3S6Zr2vRjRdML9M+AE=
Received: by 10.82.174.20 with SMTP id w20mr1404286bue.1189099977614;
        Thu, 06 Sep 2007 10:32:57 -0700 (PDT)
Received: by 10.82.113.12 with HTTP; Thu, 6 Sep 2007 10:32:57 -0700 (PDT)
Message-ID: <a8d89b3b0709061032t3b317ac7if72a93618ff49082@mail.gmail.com>
Date: Thu, 6 Sep 2007 14:32:57 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extract terms not by reader, but by documents
In-Reply-To: <0B6973EE-9278-4831-9428-4E9EBF5EBE25@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54861_9288784.1189099977590"
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com>
	 <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org>
	 <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com>
	 <0B6973EE-9278-4831-9428-4E9EBF5EBE25@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54861_9288784.1189099977590
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Karl, I=B4m aware of IndexReader.getTermFreqVector, with this I can get all
terms of a document, but I want all terms of a document that matched a
query.

Grant,

>Yes, I think I understand.  You want to know what terms from your
>query matched in a given document.

Yep, that=B4s what I want. In the contrib/highlighter package, the
query.rewrite.extractTerms is used to match the terms in the documents. So
all the highlight "magic" is done with that terms, and the problem remains,
because the "logic" of the query is lost when I get those terms. I=B4ll tak=
e a
look at the TermVectorMapper you mentioned, but if anyone have an ideia how
to achieve this, please post here.

[]s
    Rossini

------=_Part_54861_9288784.1189099977590--

From java-user-return-30165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 18:49:09 2007
Return-Path: <java-user-return-30165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96400 invoked from network); 6 Sep 2007 18:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 18:49:09 -0000
Received: (qmail 75466 invoked by uid 500); 6 Sep 2007 18:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75433 invoked by uid 500); 6 Sep 2007 18:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75418 invoked by uid 99); 6 Sep 2007 18:48:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 11:48:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 18:48:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 3FE3B7FAA
	for <java-user@lucene.apache.org>; Thu,  6 Sep 2007 11:48:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <a8d89b3b0709061032t3b317ac7if72a93618ff49082@mail.gmail.com>
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com> <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org> <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com> <0B6973EE-9278-4831-9428-4E9EBF5EBE25@gmail.com> <a8d89b3b0709061032t3b317ac7if72a93618ff49082@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <32538B65-6FB7-4A48-BE56-2671E920E9B1@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Extract terms not by reader, but by documents
Date: Thu, 6 Sep 2007 14:48:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 6, 2007, at 1:32 PM, Rafael Rossini wrote:

> Karl, I=B4m aware of IndexReader.getTermFreqVector, with this I can =20=

> get all
> terms of a document, but I want all terms of a document that matched a
> query.
>
> Grant,
>
>> Yes, I think I understand.  You want to know what terms from your
>> query matched in a given document.
>
> Yep, that=B4s what I want. In the contrib/highlighter package, the
> query.rewrite.extractTerms is used to match the terms in the =20
> documents. So
>

Can you point to where this is taking place in the contrib/=20
highlighter?  I am not a highlighter expert, but I would like to see =20
it.  The only place I see a call to extractTerms is in =20
QueryTermExtractor.java

-Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 18:49:24 2007
Return-Path: <java-user-return-30166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96595 invoked from network); 6 Sep 2007 18:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 18:49:24 -0000
Received: (qmail 77321 invoked by uid 500); 6 Sep 2007 18:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77282 invoked by uid 500); 6 Sep 2007 18:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77255 invoked by uid 99); 6 Sep 2007 18:49:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 11:49:11 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 18:50:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITMPF-00061J-IE
	for java-user@lucene.apache.org; Thu, 06 Sep 2007 11:48:45 -0700
Message-ID: <12528983.post@talk.nabble.com>
Date: Thu, 6 Sep 2007 11:48:45 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


The problem in my pplication are as follows:
                 1.I am not able to see the updated records in my index
store because i instantiate 
IndexReader and IndexSearcher class once that is in the first search.further
searches use the same IndexReaders(5 Directories) and IndexSearcher with
different queries.

                2.My search is very very slow First 2 Directories of size 10
GB each which are having old index records and no update in that remaining 3
Diretories are updated every second.

                3.i am Indexing 20 million records per day so the Index
store gets growing and it makes search very very slower.
 
               4.I am using searcherOne class as the global application
helper class ,with the scope as APPLICATION it consists of one IndexReader
and IndexSearcher get set method which will hold the IndexReader and
IndexSearcher object after the First Search.it is used for all other
searches.

              5.I am using Lucene 2.2.0 version, in a WEB Application which
index 15 fields per document and Index 5 Fieds,store 10 Fields.i am not
using any sort in my query.for a single query upto the maximum it fetches
600 records from the index store(5 direcories)    
                

hossman wrote:
> 
> 
> : I set IndexSearcher as the application Object after the first search.
> 	...
> : how can i reconstruct the new IndexSearcher for every hour to see the
> : updated records .
> 
> i'm confused ... my understanding based on the comments you made below 
> (in an earlier message) was that you already *were* constructing a new  
> IndexSearcher once an hour -- but every time you do that, your memory 
> usage grows, and and that sometimes you got OOM Errors.
> 
> if that's not what you said, then i think you need to explain, in detail, 
> in one message, exactly what your problem is.  And don't assume we 
> understand anything -- tell us *EVERYTHING* (like, for example, what the 
> word "crore" means, how "searcherOne" is implemented, and the answer to 
> the specfic question i asked in my last message: does your application, 
> contain anywhere in it, any code that will close anything (IndexSearchers 
> or IndexReaders) ?
> 
> 
> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to 6
> crore.
> : > for
> : > : every second i am updating my Index. i instantiate IndexSearcher
> object
> : > one
> : > : time for all the searches. for an hour can i see the updated records
> in
> : > the
> : > : indexstore by reinstantiating IndexSearcher object.but the problem
> when
> : > i
> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is there
> any
> 
> 
> : > IndexSearcher are you explicitly closing both the old IndexSearcher as 
> : > well as all of 4 of those old IndexReaders and the MultiReader?
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12528983
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 21:59:01 2007
Return-Path: <java-user-return-30167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95781 invoked from network); 6 Sep 2007 21:59:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 21:59:00 -0000
Received: (qmail 59202 invoked by uid 500); 6 Sep 2007 21:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59171 invoked by uid 500); 6 Sep 2007 21:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59160 invoked by uid 99); 6 Sep 2007 21:58:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 14:58:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 21:58:44 +0000
Received: by nz-out-0506.google.com with SMTP id i28so206647nzi
        for <java-user@lucene.apache.org>; Thu, 06 Sep 2007 14:58:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=vS8/OIO5zAFzcsa3S5GRevHLGDg10FXxJtxUv5Whne4=;
        b=D4I8VeRISv8EQXKfojA9dCNPKV3vHu4YEig10BWlHuAgicEPVtfpA5BNdVuXGhw4ceDaaUeMSic2ZFo7eNompCHGneecYOFbA6S64h+i/EHfU6tuD7Jf9pH7Yv3J/PsWDKxZ5tSb4Aw83jbwoRasIqsoar4FEEM2vqc3Z95HLpU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=IJojcLcqyzjOdAj6Jm1y7RTOobQoVah7ARaXgV4N4jaB1lbqmtVxyxJ7lUbeZ3o63eCW0zRbqS0dBmqzh1BNiQO2kdefCYBv3kMZEQ5aYIG63h3pfYyG/BXkOU7EBILg2ylJaVv8wUpad13SBaVLlg4aNbueDgk90oU5bEuVLeA=
Received: by 10.115.46.9 with SMTP id y9mr525828waj.1189115901814;
        Thu, 06 Sep 2007 14:58:21 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id m40sm34351waf.2007.09.06.14.58.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 06 Sep 2007 14:58:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <12520740.post@talk.nabble.com>
References: <12520740.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <85694B1D-9120-4E12-B140-68F558CA7F08@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Search performance question
Date: Thu, 6 Sep 2007 14:58:17 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 6-Sep-07, at 4:41 AM, makkhar wrote:

>
> Hi,
>
>    I have an index which contains more than 20K documents. Each  
> document has
> the following structure :
>
> field : ID (Index and store)                          typical value  
> - "1000"
> field : parameterName(index and store)          typical value -
> "/mcp/data/parent1/parent2/child1/child2/status"
> field : parameterValue(index and not store)    typical value - "draft"
>
> When I search for a term which results in "all" the documents getting
> returned, the search time is more than 1 sec. I have still not done
> hits.doc(), which I understand, would be even worse.
>
> My problem is, I am expecting the search itself to happen in the  
> order of a
> few milliseconds irrespective of the number of documents it  
> matched. Am I
> expecting too much ?

20K docs is not very many.  I would expect a simply TermQuery to be  
on the order of milliseconds, _after_ the OS has cached the index in  
memory.  Does the time improve after some warmup?

-MIke


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 06 21:59:59 2007
Return-Path: <java-user-return-30168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96135 invoked from network); 6 Sep 2007 21:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Sep 2007 21:59:57 -0000
Received: (qmail 62958 invoked by uid 500); 6 Sep 2007 21:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62917 invoked by uid 500); 6 Sep 2007 21:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62906 invoked by uid 99); 6 Sep 2007 21:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 14:59:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Sep 2007 21:59:41 +0000
Received: by nz-out-0506.google.com with SMTP id i28so206647nzi
        for <java-user@lucene.apache.org>; Thu, 06 Sep 2007 14:59:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=qLSi/MJMkrAOXM7M6u42vYvS0vxDkHToBUWEw6Cczzc=;
        b=gYsWCt6xewQVIbuRXRG5Ifl2G72Myx/qyka5vETBcYBT83fOa82W0AowaIq/3iogoH2B0vMU95jRz+wTN73H0BqxvB0TtegWkxNCq9ddSNLs9KqmbunkVrARRTEtbUIlsuwJj1lplw5SWrGygeb28+5BdPO3RgipoEsxVXNwG7s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=cY2lXj/24+7+FDLawAcjxCF1jZcoV8CTYRr/Fxx3zSVNXQYVhJlXno5enuDdv54d/TPTW9NqojiFLD19wu5hIJMjtDpomx3jBPuBOGZHV1Q+I0qhMgy3OdaKcIgBpQEa+n4nuyh/Uj9YacrDV3n6rM4GXEEVFQEmeelL+4qEHws=
Received: by 10.114.81.1 with SMTP id e1mr146855wab.1189115960635;
        Thu, 06 Sep 2007 14:59:20 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id m40sm34351waf.2007.09.06.14.59.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 06 Sep 2007 14:59:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <32538B65-6FB7-4A48-BE56-2671E920E9B1@apache.org>
References: <a8d89b3b0709041401o13a8fcfcvdd3721968ff4b3e4@mail.gmail.com> <6DA78A01-32C8-4979-AA3C-1F6D582EA6E4@apache.org> <a8d89b3b0709050748p5359ee73u877d5d668af703c2@mail.gmail.com> <0B6973EE-9278-4831-9428-4E9EBF5EBE25@gmail.com> <a8d89b3b0709061032t3b317ac7if72a93618ff49082@mail.gmail.com> <32538B65-6FB7-4A48-BE56-2671E920E9B1@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <6C679149-4C83-4C8E-883A-32E8F301DE56@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Extract terms not by reader, but by documents
Date: Thu, 6 Sep 2007 14:59:14 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 6-Sep-07, at 11:48 AM, Grant Ingersoll wrote:

>
> On Sep 6, 2007, at 1:32 PM, Rafael Rossini wrote:
>
>> Karl, I=B4m aware of IndexReader.getTermFreqVector, with this I can =20=

>> get all
>> terms of a document, but I want all terms of a document that =20
>> matched a
>> query.
>>
>> Grant,
>>
>>> Yes, I think I understand.  You want to know what terms from your
>>> query matched in a given document.
>>
>> Yep, that=B4s what I want. In the contrib/highlighter package, the
>> query.rewrite.extractTerms is used to match the terms in the =20
>> documents. So
>>
>
> Can you point to where this is taking place in the contrib/=20
> highlighter?  I am not a highlighter expert, but I would like to =20
> see it.  The only place I see a call to extractTerms is in =20
> QueryTermExtractor.java

The document is re-analyzed, or the token stream is retrieved from =20
term vector reconstruction.  Das ist allist.

-Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 08:03:22 2007
Return-Path: <java-user-return-30169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92734 invoked from network); 7 Sep 2007 08:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 08:03:20 -0000
Received: (qmail 85632 invoked by uid 500); 7 Sep 2007 08:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85599 invoked by uid 500); 7 Sep 2007 08:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85588 invoked by uid 99); 7 Sep 2007 08:03:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 01:03:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 08:03:05 +0000
Received: by rv-out-0910.google.com with SMTP id k20so314998rvb
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 01:02:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=3wVNNUfbiqhorUCT5HNozSnYQh6LzDjcP+CmXulJ02U=;
        b=Nse3L/qk9CCSnlyNnf8BxwNCHN+MbQGttg9ndFDQSMNRRXIEyqOHcUdpaMOKmfzDYq4mFje/JRL4m3l1V50G2p0aXkayAcYVL/l98Z7QOvoeQKhmHYrXWdMNeYuyVdWFxyvjhcDfqZdhJcuIIDsB1+WJD510cHPuuf/IBDNR02A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Ejx2BxJxCxB40SPRZYh6Tts6tOfGz+LJHdrkgXKvFRWJhVWx9kI1Mbrmgfbk91FGO6WzRpt0C4jKcdvVW0eHkOUjcFKXJSeoIPwdiaz2z/r4ahJZBtDQuh52myYmRiGCBS/3bGIesOp54VtHm0B5xRD/TnlwtwoY3TN5WV7hPnM=
Received: by 10.141.99.4 with SMTP id b4mr621381rvm.1189152164586;
        Fri, 07 Sep 2007 01:02:44 -0700 (PDT)
Received: by 10.140.131.9 with HTTP; Fri, 7 Sep 2007 01:02:44 -0700 (PDT)
Message-ID: <d5b3ea330709070102u5a95026ek4611d222bf69b4f@mail.gmail.com>
Date: Fri, 7 Sep 2007 13:32:44 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: How to distinct phrase matches between lines
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64_24740077.1189152164572"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64_24740077.1189152164572
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Is there a way to distinct adjacent words between lines. I have problem
while searching a phrase. Since I am using stopword analyzer, the newlines
starting with stopwords are ignored in phrase search. So, such documents
comes as search result.

Please help me to solve this issue.

Thanks,
Sonu

------=_Part_64_24740077.1189152164572--

From java-user-return-30170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 12:41:34 2007
Return-Path: <java-user-return-30170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90805 invoked from network); 7 Sep 2007 12:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 12:41:34 -0000
Received: (qmail 29442 invoked by uid 500); 7 Sep 2007 12:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29387 invoked by uid 500); 7 Sep 2007 12:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29353 invoked by uid 99); 7 Sep 2007 12:41:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 05:41:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lmenaria@chambal.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 12:41:11 +0000
Received: by rv-out-0910.google.com with SMTP id k20so363569rvb
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 05:40:50 -0700 (PDT)
Received: by 10.141.37.8 with SMTP id p8mr714026rvj.1189168850326;
        Fri, 07 Sep 2007 05:40:50 -0700 (PDT)
Received: by 10.140.170.15 with HTTP; Fri, 7 Sep 2007 05:40:50 -0700 (PDT)
Message-ID: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
Date: Fri, 7 Sep 2007 18:10:50 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Indexing Speed using Lucene 2.2
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_641_31125775.1189168850318"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_641_31125775.1189168850318
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

I have indexed a mysql database using Lucene2.0. It was taking less than 2
minutes for 14000 records. Then I indexed the same data using Lucene2.2. It
took about 4 minutes. I got affected indexing speed on using Lucene2.2. The
indexing code is same. I just updated the lucenejar.

What can be done to improve the indexing speed. Please let me know asap...

-- 
Thanks in advance,
Laxmilal menaria

http://www.chambal.net/

------=_Part_641_31125775.1189168850318--

From java-user-return-30171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 12:51:03 2007
Return-Path: <java-user-return-30171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92566 invoked from network); 7 Sep 2007 12:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 12:51:02 -0000
Received: (qmail 47885 invoked by uid 500); 7 Sep 2007 12:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47819 invoked by uid 500); 7 Sep 2007 12:50:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47794 invoked by uid 99); 7 Sep 2007 12:50:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 05:50:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 12:52:05 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E538E30EFC20; Fri,  7 Sep 2007 06:50:20 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 1E09F30EFC17
	for <java-user@lucene.apache.org>; Fri,  7 Sep 2007 06:50:18 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <d5b3ea330709070102u5a95026ek4611d222bf69b4f@mail.gmail.com>
References: <d5b3ea330709070102u5a95026ek4611d222bf69b4f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5507AF13-B608-4078-A32A-DEBCC741D1BD@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to distinct phrase matches between lines
Date: Fri, 7 Sep 2007 08:50:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Sep 7, 2007, at 4:02 AM, Sonu SR wrote:
> Hi,
> Is there a way to distinct adjacent words between lines. I have  
> problem
> while searching a phrase. Since I am using stopword analyzer, the  
> newlines
> starting with stopwords are ignored in phrase search. So, such  
> documents
> comes as search result.

You want phrase searches not to match across lines?   If you're  
indexing each line as a separate Field instance, you can set the  
position increment gap to something greater than the maximum phrase  
query slop that would be used.

I'm not currently understanding how stop word removal is getting in  
the way though.  An example would be useful to see.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 13:44:41 2007
Return-Path: <java-user-return-30172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18558 invoked from network); 7 Sep 2007 13:44:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 13:44:39 -0000
Received: (qmail 63332 invoked by uid 500); 7 Sep 2007 13:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63300 invoked by uid 500); 7 Sep 2007 13:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63289 invoked by uid 99); 7 Sep 2007 13:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 06:44:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 13:44:21 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 28987109F30
	for <java-user@lucene.apache.org>; Fri,  7 Sep 2007 06:43:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
References: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <21565F92-89B2-44D3-AA07-4CA2392E6232@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Indexing Speed using Lucene 2.2
Date: Fri, 7 Sep 2007 09:43:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Your "to" field on the email makes me wonder if you are using .NET or  
Java...

On Sep 7, 2007, at 8:40 AM, Laxmilal Menaria wrote:

> Hello everyone,
>
> I have indexed a mysql database using Lucene2.0. It was taking less  
> than 2
> minutes for 14000 records. Then I indexed the same data using  
> Lucene2.2. It
> took about 4 minutes. I got affected indexing speed on using  
> Lucene2.2. The
> indexing code is same. I just updated the lucenejar.
>
> What can be done to improve the indexing speed. Please let me know  
> asap...
>
> -- 
> Thanks in advance,
> Laxmilal menaria
>
> http://www.chambal.net/

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 14:46:12 2007
Return-Path: <java-user-return-30173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44598 invoked from network); 7 Sep 2007 14:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 14:46:11 -0000
Received: (qmail 57309 invoked by uid 500); 7 Sep 2007 14:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57265 invoked by uid 500); 7 Sep 2007 14:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57121 invoked by uid 99); 7 Sep 2007 14:45:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 07:45:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 14:45:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITf5R-0007LB-9z
	for java-user@lucene.apache.org; Fri, 07 Sep 2007 07:45:33 -0700
Message-ID: <12556701.post@talk.nabble.com>
Date: Fri, 7 Sep 2007 07:45:33 -0700 (PDT)
From: pkimber <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1183544020.31233.1198452157@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mailing.patrick.kimber@gmail.com
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com> <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com> <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com> <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com> <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com> <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com> <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com> <1183205087.22530.1197845153@webmail.messagingengine.com> <4f9b23800707030317i343559e2ufda83bfd724c9326@mail.gmail.com> <OF71D72A15.1866A8CF-ON6525730D.00398806-6525730D.003ADC81@hewitt.com> <4f9b23800707030346h748a6feet7f9f47235e20cc52@mail.gmail.com> <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com> <1183461674.2220.1198268681@webmail.messagingengine.com> <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com> <1183465207.11743.1198277029@webmail.messagingengine.com> <4f9b23800707030650y6139a19f
 n2870bef783636f46@mail.gmail.com> <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com> <1183476448.14138.1198311153@webmail.messagingengine.com> <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com> <1183544020.31233.1198452157@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

We are still getting various issues on our Lucene indexes running on an NFS
share.  It has taken me some time to find some useful information to report
to the mailing list.

I have created a test application which is running on two Linux servers. 
The Lucene index is on an NFS share.  After running for some time, both
instances throw this exception:

Caused by: java.io.FileNotFoundException:
/tmp/nfstest/repository/lucene/lucene-test/_zr.cfs (No such file or
directory)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
    at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
    at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
    at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
    at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
    at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:211)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:132)
    at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:201)
    at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:614)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:180)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:162)
    at org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:56)
    at
com.subshell.lucene.indexaccess.impl.IndexAccessProvider.getSearcher(IndexAccessProvider.java:110)
    at
com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getSearcher(LuceneIndexAccessor.java:291)
    at
com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getSearcher(LuceneIndexAccessor.java:256)
    at
com.subshell.lucene.indexaccess.impl.LuceneIndexAccessor.getSearcher(LuceneIndexAccessor.java:249)
    at
com.thecompany.lucene.index.LuceneIndexManager.getSearcher(LuceneIndexManager.java:196)
    ... 15 more

I have enabled the info stream on the IndexWriter object using
IndexWriter.setDefaultInfoStream().  The output from the two servers is as
follows:

Server 1:
$ cat index-writer-info-stream.out | grep _zr.cfs
org.apache.lucene.index.IndexFileDeleter@1984a9d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 0
org.apache.lucene.index.IndexFileDeleter@1984a9d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 1
org.apache.lucene.index.IndexFileDeleter@1984a9d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 2
org.apache.lucene.index.IndexFileDeleter@1984a9d
lucene.icm.test.Write.main():   DecRef "_zr.cfs": pre-decr count is 3
org.apache.lucene.index.IndexFileDeleter@1984a9d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 2

Server 2:
$ cat index-writer-info-stream.out | grep _zr.cfs
org.apache.lucene.index.IndexFileDeleter@20a83c2a
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 0
org.apache.lucene.index.IndexFileDeleter@20a83c2a
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 1
org.apache.lucene.index.IndexFileDeleter@20a83c2a
lucene.icm.test.Write.main():   DecRef "_zr.cfs": pre-decr count is 2
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 0
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 1
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 2
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   DecRef "_zr.cfs": pre-decr count is 3
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 2
org.apache.lucene.index.IndexFileDeleter@4b69d75d
lucene.icm.test.Write.main():   DecRef "_zr.cfs": pre-decr count is 3
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 0
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 1
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 2
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 3
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   DecRef "_zr.cfs": pre-decr count is 4
org.apache.lucene.index.IndexFileDeleter@4ecd51ad
lucene.icm.test.Write.main():   IncRef "_zr.cfs": pre-incr count is 3

I have added logging to our ExpirationTimeDeletionPolicy and I don't think
it is deleting the "_zr.cfs" file.

Once again, I would really appreciate your help solving this issue,

Thanks for your help,

Patrick


Michael McCandless-2 wrote:
> 
> 
> Very good!  Keep us posted, and good luck,
> 
> Mike
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-2.2%2C-NFS%2C-Lock-obtain-timed-out-tf3998926.html#a12556701
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 15:10:21 2007
Return-Path: <java-user-return-30174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67435 invoked from network); 7 Sep 2007 15:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 15:10:19 -0000
Received: (qmail 27255 invoked by uid 500); 7 Sep 2007 15:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27209 invoked by uid 500); 7 Sep 2007 15:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27192 invoked by uid 99); 7 Sep 2007 15:10:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 08:10:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 15:09:53 +0000
Received: by nf-out-0910.google.com with SMTP id g16so430264nfd
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 08:09:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NUVRUgka0ZTzDSg1L9r9AJjKOoGQA5t5C7CKESIViw0=;
        b=s4lfH6pPoCYOFbOHNbcDp5mUQQxcJ6PlQ8rYh8ZA5nzzzo7v7lYfPs1aryzW557o9w+EILkTGI40r5P03oE2ZlRalxJ8BLvKglzN6bTN7weYJn+oYTUqBn1CBuDbHoUPWz+oPhKAkE8eJno2yJ/tWlz/AfhRWmeE+c0XMQWqAo8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d0GRVOLRHXBXb0oNichDSW2B3O2GtQpX//YwXey2gjLSeF9FMMIX+vDjDpQqNyQDXoLJnNB/v8OMw36skbyQll1smGk9abjMeFGHCFsqAtf6a7tbcLAQY0iCL1Yqz5Rye9m498TAzZukOeItFa438xi1L51aGWXQ7MEZtj1vt6g=
Received: by 10.78.206.9 with SMTP id d9mr838314hug.1189177771829;
        Fri, 07 Sep 2007 08:09:31 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 7 Sep 2007 08:09:31 -0700 (PDT)
Message-ID: <6e3ae6310709070809o3cbcd9f5u708490fbd60b0cdb@mail.gmail.com>
Date: Fri, 7 Sep 2007 08:09:31 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed using Lucene 2.2
In-Reply-To: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_337_29336928.1189177771821"
References: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_337_29336928.1189177771821
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it repeatable? Maybe the database is slower during that time.

Myself didn't any major slowness when upgrading to Lucene 2.2.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 9/7/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> Hello everyone,
>
> I have indexed a mysql database using Lucene2.0. It was taking less than 2
> minutes for 14000 records. Then I indexed the same data using Lucene2.2.
> It
> took about 4 minutes. I got affected indexing speed on using Lucene2.2.
> The
> indexing code is same. I just updated the lucenejar.
>
> What can be done to improve the indexing speed. Please let me know asap...
>
> --
> Thanks in advance,
> Laxmilal menaria
>
> http://www.chambal.net/
>

------=_Part_337_29336928.1189177771821--

From java-user-return-30175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 15:22:32 2007
Return-Path: <java-user-return-30175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85626 invoked from network); 7 Sep 2007 15:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 15:22:31 -0000
Received: (qmail 57096 invoked by uid 500); 7 Sep 2007 15:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56986 invoked by uid 500); 7 Sep 2007 15:22:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56970 invoked by uid 99); 7 Sep 2007 15:22:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 08:22:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 15:22:14 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 90EDD30EFC20; Fri,  7 Sep 2007 09:21:53 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 0C49430EFC17;
	Fri,  7 Sep 2007 09:21:46 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <8D192175-B4F8-4422-953F-CB1203792201@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: solr-user@lucene.apache.org,
 java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Lucene/Solr "OnTheRoad"
Date: Fri, 7 Sep 2007 11:21:40 -0400
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

I just added brief mentions of some upcoming Lucene/Solr-related  
events to this page:

   http://wiki.apache.org/lucene-java/OnTheRoad

Below is some self-promotion of an upcoming class I have agreed to  
teach.  It's uncomfortable to send this sort of thing out, but if I  
don't then you might never stumble up on it since its being marketed  
in a low key way.

I'll be teaching a week long Lucene/Solr course October 28-November  
2.  More details here:

	http://opensourceretreat.com/courses/category/solr/


<marketing>
Want to get on the cutting edge of Solr and Lucene? Join me and a few  
crack developers between October 28 and November 2 at the Four  
Diamond Boar's Head Inn in beautiful Charlottesville, Virginia!  
Imagine five all-inclusive days of training, mentoring, and maybe  
even some recreation at the Open Source Retreat. Find out more at  
http://www.opensourceretreat.com.

What are you going to get?
In depth training including
(Your bullet points)

Plus our signature features:

* Class size limited to 25 students
* One-on-one instructor time with me!
* Meals and lodging included in the course price

There is a $250 discount off the price of the course for signing up  
21 days in advance of the course start!

Sign up today at http://opensourceretreat.com/courses/category/solr/!  
Space is limited!

About the Boar's Head Inn

Spa
The spa offers more than 30 distinct services including therapeutic  
massage, LaStone, and more.
Birdwood Golf Course
Enjoy a round of golf at our Birdwood Golf Course, which has been  
recognized by Washington Golf Monthly as one of the Mid-Atlantic's  
top 100 courses.
Dining
Dining at the Inn is a Four-Diamond experience. The Old Mill Room has  
received this prestigious award for nineteen consecutive years.
Vineyards
Tour area wineries and taste some of the finest vintages produced in  
the country. Many premier Virginia vineyards are located within a  
short drive from Boar's Head Inn.
</marketing>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 16:06:49 2007
Return-Path: <java-user-return-30176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57180 invoked from network); 7 Sep 2007 16:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 16:06:48 -0000
Received: (qmail 12172 invoked by uid 500); 7 Sep 2007 16:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12139 invoked by uid 500); 7 Sep 2007 16:06:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12128 invoked by uid 99); 7 Sep 2007 16:06:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 09:06:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 16:07:56 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 26CEF2BF42
	for <java-user@lucene.apache.org>; Fri,  7 Sep 2007 12:06:09 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Fri, 07 Sep 2007 12:06:09 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5B2221B007; Fri,  7 Sep 2007 12:06:08 -0400 (EDT)
Message-Id: <1189181168.26118.1209446985@webmail.messagingengine.com>
X-Sasl-Enc: wfZZ9Go8NnwlZ6OLNpRhb4Vf1FSnJstxNNqxrG30s+0+ 1189181168
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
   <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
   <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
   <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
   <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
   <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
   <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com>
   <1183205087.22530.1197845153@webmail.messagingengine.com>
   <4f9b23800707030317i343559e2ufda83bfd724c9326@mail.gmail.com>
   <OF71D72A15.1866A8CF-ON6525730D.00398806-6525730D.003ADC81@hewitt.com>
   <4f9b23800707030346h748a6feet7f9f47235e20cc52@mail.gmail.com>
   <OF19D3F11C.A08B201A-ON6525730D.003B9E55-6525730D.003DD835@hewitt.com>
   <1183461674.2220.1198268681@webmail.messagingengine.com>
   <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
   <1183465207.11743.1198277029@webmail.messagingengine.com>
   <4f9b23800707030650y6139a19f n2870bef783636f46@mail.gmail.com>
   <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
   <1183476448.14138.1198311153@webmail.messagingengine.com>
   <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
   <1183544020.31233.1198452157@webmail.messagingengine.com>
   <12556701.post@talk.nabble.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <12556701.post@talk.nabble.com>
Date: Fri, 07 Sep 2007 12:06:08 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"pkimber" <mailing.patrick.kimber@gmail.com> wrote:

> We are still getting various issues on our Lucene indexes running on
> an NFS share.  It has taken me some time to find some useful
> information to report to the mailing list.

Bummer!

Can you zip up your test application that shows the issue, as well as
the full logs from both servers?  I can look at them & try to
reproduce the error.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 16:27:21 2007
Return-Path: <java-user-return-30177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77947 invoked from network); 7 Sep 2007 16:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 16:27:19 -0000
Received: (qmail 58577 invoked by uid 500); 7 Sep 2007 16:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58545 invoked by uid 500); 7 Sep 2007 16:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58524 invoked by uid 99); 7 Sep 2007 16:21:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 09:21:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 16:21:21 +0000
Received: by fk-out-0910.google.com with SMTP id z23so470799fkz
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 09:21:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=//sEIF2puAug/Qu+/BVcfxd73m24jYJWF72e2rNGl/g=;
        b=BRKapwWUbIyATUf2C6VVhahPH9VVo13GCsluSKrwW7zSKt5JpHqt6FE3w97SCTEWVeLW42hJ1ykRRn4izv2YTRL0ZfYmpd7LR5wr/36MLWPCh36STa20d/meEH2gv87Vm3R7HYsA74L10AAddFnTA76LXZ4f0lzPMe0jZS41xmc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=En2QBqnJoHVbtgJS1ZKzs2x5zWW6nJIPoxG4Vqnqb6xtoSukOmBzVuSluvTaagRYweCp9yyZVTbQvIzJXJwjpoGnDRR0cayVVmnojjaiFrMG+Ah+NzNdnGT781aicHI9NmogWGzEygM2nCZxoGl3LXYO/CjaXsnoipuObBm7SyE=
Received: by 10.82.190.2 with SMTP id n2mr2707907buf.1189182060120;
        Fri, 07 Sep 2007 09:21:00 -0700 (PDT)
Received: by 10.82.171.8 with HTTP; Fri, 7 Sep 2007 09:21:00 -0700 (PDT)
Message-ID: <4f9b23800709070921i6672a51etbc2eb7c2cf7151de@mail.gmail.com>
Date: Fri, 7 Sep 2007 17:21:00 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <1189181168.26118.1209446985@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <1183461674.2220.1198268681@webmail.messagingengine.com>
	 <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
	 <1183465207.11743.1198277029@webmail.messagingengine.com>
	 <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
	 <1183476448.14138.1198311153@webmail.messagingengine.com>
	 <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
	 <1183544020.31233.1198452157@webmail.messagingengine.com>
	 <12556701.post@talk.nabble.com>
	 <1189181168.26118.1209446985@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>
> "pkimber" <mailing.patrick.kimber@gmail.com> wrote:
>
> > We are still getting various issues on our Lucene indexes running on
> > an NFS share.  It has taken me some time to find some useful
> > information to report to the mailing list.
>
> Bummer!
>
> Can you zip up your test application that shows the issue, as well as
> the full logs from both servers?  I can look at them & try to
> reproduce the error.
>
> Mike
>

Yeh, I know!

I cannot send you the source code without speaking to my manager
first.  I guess he would want me to change the code before sending it
to you.  You could have the log files now, but I expect you want to
wait until the test application is ready to send?

Thanks for your help,

Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 07 18:07:45 2007
Return-Path: <java-user-return-30178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94660 invoked from network); 7 Sep 2007 18:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Sep 2007 18:07:43 -0000
Received: (qmail 29917 invoked by uid 500); 7 Sep 2007 18:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29870 invoked by uid 500); 7 Sep 2007 18:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29859 invoked by uid 99); 7 Sep 2007 18:07:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 11:07:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 18:07:29 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id A222B2B8FA
	for <java-user@lucene.apache.org>; Fri,  7 Sep 2007 14:07:06 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Fri, 07 Sep 2007 14:07:06 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 85C5F10CFF; Fri,  7 Sep 2007 14:07:06 -0400 (EDT)
Message-Id: <1189188426.15113.1209467703@webmail.messagingengine.com>
X-Sasl-Enc: M7HepCNZAiFNPLhfTgK0IuTi3ZKdQBSkMyCDRd/xZz2X 1189188426
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
   <1183461674.2220.1198268681@webmail.messagingengine.com>
   <4f9b23800707030432i1067a67auc8fc0f83abeeea0@mail.gmail.com>
   <1183465207.11743.1198277029@webmail.messagingengine.com>
   <4f9b23800707030813m998f3e5u1984d913f51d13b6@mail.gmail.com>
   <1183476448.14138.1198311153@webmail.messagingengine.com>
   <4f9b23800707040028g209341f8l24ce8363723d9729@mail.gmail.com>
   <1183544020.31233.1198452157@webmail.messagingengine.com>
   <12556701.post@talk.nabble.com>
   <1189181168.26118.1209446985@webmail.messagingengine.com>
   <4f9b23800709070921i6672a51etbc2eb7c2cf7151de@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800709070921i6672a51etbc2eb7c2cf7151de@mail.gmail.com>
Date: Fri, 07 Sep 2007 14:07:06 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote:

> I cannot send you the source code without speaking to my manager
> first.  I guess he would want me to change the code before sending it
> to you.  You could have the log files now, but I expect you want to
> wait until the test application is ready to send?

I can try to start with the full logs.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 08 04:30:23 2007
Return-Path: <java-user-return-30179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7871 invoked from network); 8 Sep 2007 04:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2007 04:30:22 -0000
Received: (qmail 32202 invoked by uid 500); 8 Sep 2007 04:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32173 invoked by uid 500); 8 Sep 2007 04:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32162 invoked by uid 99); 8 Sep 2007 04:30:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 21:30:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lmenaria@chambal.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 04:30:05 +0000
Received: by rv-out-0910.google.com with SMTP id k20so514989rvb
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 21:29:44 -0700 (PDT)
Received: by 10.141.210.5 with SMTP id m5mr996247rvq.1189225784283;
        Fri, 07 Sep 2007 21:29:44 -0700 (PDT)
Received: by 10.140.170.15 with HTTP; Fri, 7 Sep 2007 21:29:44 -0700 (PDT)
Message-ID: <1324e4e20709072129y38871d4cs7238f88c09de8f1c@mail.gmail.com>
Date: Sat, 8 Sep 2007 09:59:44 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org, gsingers@apache.org
Subject: Re: Indexing Speed using Lucene 2.2
In-Reply-To: <21565F92-89B2-44D3-AA07-4CA2392E6232@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2671_6473571.1189225784274"
References: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
	 <21565F92-89B2-44D3-AA07-4CA2392E6232@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2671_6473571.1189225784274
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have tested both Java Lucene 2.0 and Lucene.Net 2.0, but now
Lucene.Net 2.1in development.

On 9/7/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Your "to" field on the email makes me wonder if you are using .NET or
> Java...
>
> On Sep 7, 2007, at 8:40 AM, Laxmilal Menaria wrote:
>
> > Hello everyone,
> >
> > I have indexed a mysql database using Lucene2.0. It was taking less
> > than 2
> > minutes for 14000 records. Then I indexed the same data using
> > Lucene2.2. It
> > took about 4 minutes. I got affected indexing speed on using
> > Lucene2.2. The
> > indexing code is same. I just updated the lucenejar.
> >
> > What can be done to improve the indexing speed. Please let me know
> > asap...
> >
> > --
> > Thanks in advance,
> > Laxmilal menaria
> >
> > http://www.chambal.net/
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks,
Laxmilal menaria

http://www.chambal.net/

------=_Part_2671_6473571.1189225784274--

From java-user-return-30180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 08 04:32:07 2007
Return-Path: <java-user-return-30180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8580 invoked from network); 8 Sep 2007 04:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2007 04:32:06 -0000
Received: (qmail 34151 invoked by uid 500); 8 Sep 2007 04:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34105 invoked by uid 500); 8 Sep 2007 04:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34094 invoked by uid 99); 8 Sep 2007 04:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Sep 2007 21:31:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lmenaria@chambal.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 04:31:50 +0000
Received: by rv-out-0910.google.com with SMTP id k20so515137rvb
        for <java-user@lucene.apache.org>; Fri, 07 Sep 2007 21:31:29 -0700 (PDT)
Received: by 10.141.175.5 with SMTP id c5mr997964rvp.1189225889759;
        Fri, 07 Sep 2007 21:31:29 -0700 (PDT)
Received: by 10.140.170.15 with HTTP; Fri, 7 Sep 2007 21:31:29 -0700 (PDT)
Message-ID: <1324e4e20709072131y45fc186frfed86b1e8ea15f86@mail.gmail.com>
Date: Sat, 8 Sep 2007 10:01:29 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed using Lucene 2.2
In-Reply-To: <6e3ae6310709070809o3cbcd9f5u708490fbd60b0cdb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2678_2988265.1189225889748"
References: <1324e4e20709070540h1d2d8555lcc26438230bff7cb@mail.gmail.com>
	 <6e3ae6310709070809o3cbcd9f5u708490fbd60b0cdb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2678_2988265.1189225889748
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have just commented the Index writer method and check the performance, it
shows me appx 10 sec. to process all rows. and againg uncommented that its
show 4 minutes.

On 9/7/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Is it repeatable? Maybe the database is slower during that time.
>
> Myself didn't any major slowness when upgrading to Lucene 2.2.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> On 9/7/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> >
> > Hello everyone,
> >
> > I have indexed a mysql database using Lucene2.0. It was taking less than
> 2
> > minutes for 14000 records. Then I indexed the same data using Lucene2.2.
> > It
> > took about 4 minutes. I got affected indexing speed on using Lucene2.2.
> > The
> > indexing code is same. I just updated the lucenejar.
> >
> > What can be done to improve the indexing speed. Please let me know
> asap...
> >
> > --
> > Thanks in advance,
> > Laxmilal menaria
> >
> > http://www.chambal.net/
> >
>



-- 
Thanks,
Laxmilal menaria

http://www.chambal.net/

------=_Part_2678_2988265.1189225889748--

From java-user-return-30181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 08 10:41:45 2007
Return-Path: <java-user-return-30181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98154 invoked from network); 8 Sep 2007 10:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2007 10:41:44 -0000
Received: (qmail 72531 invoked by uid 500); 8 Sep 2007 10:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72490 invoked by uid 500); 8 Sep 2007 10:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72479 invoked by uid 99); 8 Sep 2007 10:41:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 03:41:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 10:42:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ITxkR-00047B-UD
	for java-user@lucene.apache.org; Sat, 08 Sep 2007 03:41:07 -0700
Message-ID: <12568500.post@talk.nabble.com>
Date: Sat, 8 Sep 2007 03:41:07 -0700 (PDT)
From: moshe <moshe@egis-software.com>
To: java-user@lucene.apache.org
Subject: Performance Questions
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moshe@egis-software.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a couple questions regarding performance of lucene. First off my
environment:

Data
1-10M Documents
5 - 30 fields < 10B
1-3 Fields 1KB - 500KB

I have three types of queries:

Query 1 : 85% usage 
1-2  phrase terms i.e. +id:"651" +id2:"241"
sorting by an arbitrary field normally the date
5-20 security terms
5k-1M results
can never return stale data

Query 2:  13%
10 full wildcard terms i.e. *search*
sorting is optional
0-200 results
20-200 security terms
can return slightly stale data

Query 3: 2%
1-20 mixed terms
sorting is optional
0-200 results
20-200 security terms
can return slightly stale data

1) Does re-opening an IndexSearcher flush all of the caches (filter and
sort) ? 

2) What is the overhead of opening an IndexSearcher? What does it depend on?

3) What is the recommended approach for updating and refreshing the index
where there is 1 update for every 5 queries? 

4) Is query 1 better off done using a database as I would have to re-open
the IndexSeacher every couple of queries?

5) What would perform better Solr or Lucence? When is it better to use one
or the other?

6) What else should I look out for?

7) Why is refreshing an IndexSearcher not supported? 


Any help is greatly appreciated 
Thanks
Moshe 


 

-- 
View this message in context: http://www.nabble.com/Performance-Questions-tf4405513.html#a12568500
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 08 18:41:19 2007
Return-Path: <java-user-return-30182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49312 invoked from network); 8 Sep 2007 18:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Sep 2007 18:41:18 -0000
Received: (qmail 25541 invoked by uid 500); 8 Sep 2007 18:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25142 invoked by uid 500); 8 Sep 2007 18:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25093 invoked by uid 99); 8 Sep 2007 18:41:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 11:41:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Sep 2007 18:42:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1DE2371C004; Sat,  8 Sep 2007 11:40:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1A88071C002;
	Sat,  8 Sep 2007 11:40:32 -0700 (PDT)
Date: Sat, 8 Sep 2007 11:40:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>, general@lucene.apache.org, 
    solr-user@lucene.apache.org, nutch-user@lucene.apache.org, 
    hadoop-user@lucene.apache.org, lucy-user@lucene.apache.org, 
    lucene-net-user@incubator.apache.org
Subject: Apachecon early bird registration extended to September 22, 2007
Message-ID: <Pine.LNX.4.62.0709081114340.14138@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


(NOTE: cross posted apache announcement to all Lucene project user lists, 
please be careful about your reply-to)

Hey everybody, just wanted to forward some info from the ApacheCon US 
organizers ... the deadline for the discounted "early bird" price has been 
extended.

On the last day of the Con one room is going to be almost almost 
completely dedicated to Lucene talks from Me, Ken Krugler, Grant 
Ingersoll, and Michael Busch (with a Tomcat session in the middle just to 
cleanse your pallet).  Plus Grant is doing an all day Pre-Confrence Lucene 
training session as well for those that really want some hands on time.

With this much Lucene talk going on, I'm also confident there will be a 
nice big BOF session, plus you never know who might be sitting next to you 
at lunch :)

-----------------------------------------------------------------------------

ApacheCon US 2007  -  Atlanta GA

To support everyone in the community attending this conference we are
extending the Early Bird Registration to September 22, 2007.

Register now and save money PLUS your registration supports the Open
Source Community.

And PLEASE get this message out to your friends and others at work.

Buttons and banners available on site http://www.apachecon.com by
September 7,2007

Please help us get the word out!

Thanks,
ApacheCon Team

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 09 18:35:36 2007
Return-Path: <java-user-return-30183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21291 invoked from network); 9 Sep 2007 18:35:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2007 18:35:35 -0000
Received: (qmail 73279 invoked by uid 500); 9 Sep 2007 18:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73191 invoked by uid 500); 9 Sep 2007 18:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73180 invoked by uid 99); 9 Sep 2007 18:35:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Sep 2007 11:35:21 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=ASF_LIST_OPS,HEAD_LONG,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of carlosjosepita@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Sep 2007 18:36:45 +0000
Received: by nf-out-0910.google.com with SMTP id g16so697270nfd
        for <java-user@lucene.apache.org>; Sun, 09 Sep 2007 11:34:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=OZj068z8ihhBPx3I/zlj+7Pl3sq4pMsZoen57KrN5Xk=;
        b=pDBGd2FQoiCP4NEjdBdIxrdesHee1rYZU8jLli/3XkwZvPvM5NF1pDt++RfNT8852dNhdDtjqBDsn+MF3eaorATg6yPlzn4Mhwp9jbQ3zmLJHzl4Z5SNaDzuHAunE3diYURoEbhYKgTLvLzu5z1SIBmGAJZtcJUtju4/l5hZO3A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=hEaMoSdiOxLwXabUT9UqX80DJuCcO5ejZ62WObCBAK18wKOY7Bzfn118VqZW+BBodRtvzaVNdfngU+Zwk3vR4TxO/Kb5G3rQCJFNKTn9Zt+NIl0Ka4wHG+mygsEAzSOIsL7fl6do0L6VTffx/m5xsJ3w4Z1/gVT7eL5tGzNaUWk=
Received: by 10.78.206.9 with SMTP id d9mr1537399hug.1189362888695;
        Sun, 09 Sep 2007 11:34:48 -0700 (PDT)
Received: by 10.78.165.19 with HTTP; Sun, 9 Sep 2007 11:34:48 -0700 (PDT)
Message-ID: <7798eaa0709091134i4771f58dxc8af9e8bfb9a868e@mail.gmail.com>
Date: Sun, 9 Sep 2007 15:34:48 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: "zoe riamonde" <zoeriamonde@gmail.com>, wscheele@gmail.com, 
	Wikispaces <help@wikispaces.com>, 
	wicket-user-request@lists.sourceforge.net, 
	wicket-user@lists.sourceforge.net, Vontrier <vontrierlars@gmail.com>, 
	"viviana lysyj" <vivilysy@hotmail.com>, 
	vistaenla_soledad@hotmail.com, vidaldamian@yahoo.com.ar, 
	"Victor Braberman" <vbraber@dc.uba.ar>, 
	"valeria perez" <valeriadx@gmail.com>, 
	"valeria p" <valeriadx@yahoo.com.ar>, valeria@livra.com, 
	users-unsubscribe@tomcat.apache.org, 
	users-uc.1168428599.beihhjohcobmnkglhmdf-carlosjosepita=gmail.com@tomcat.apache.org, 
	users-subscribe@tomcat.apache.org, users-subscribe@wicket.apache.org, 
	users-sc.1185863203.hgoogpdbmkhihonlcdod-carlosjosepita=gmail.com@wicket.apache.org, 
	users-sc.1167942042.mcgagfggagmkbennegla-carlosjosepita=gmail.com@tomcat.apache.org, 
	users@wicket.apache.org, user@groovy.codehaus.org, 
	"Tomcat Users List" <users@tomcat.apache.org>, Todos <h1@livra.com>, 
	thefeeliesweb@yahoo.com, tech@livra.com, 
	stk-request@ccrma.stanford.edu, stk@ccrma.stanford.edu, 
	spoon-discuss-request@lists.gforge.inria.fr, 
	spoon-discuss@lists.gforge.inria.fr, sofia@livra.com, 
	"Simon Marlow" <simonmar@microsoft.com>, 
	"Sebastian Uchitel" <su2@doc.ic.ac.uk>, 
	scala-subscribe@listes.epfl.ch, 
	scala-sc.1180791918.ahodaelbenfkmjhhmbjm-carlosjosepita=gmail.com@listes.epfl.ch, 
	scala@listes.epfl.ch, "Santiago Lombardi" <slombardi@livra.com>, 
	"Santiago Bustelo" <santiago@bustelo.com.ar>, 
	"Santiago Bazerque" <sbazerque@gmail.com>, 
	"santiago@livra.net" <santiago@livra.net>, santiago@livra.com, 
	"Sabrina Castano" <SCASTANO@cti.com.ar>, 
	"Rui Nuno Capela" <rncbc@rncbc.org>, 
	"Rodrigo Villanueva" <rodrigo@ditelco.com.ar>, 
	"Robert ." <robert.maillists@gmail.com>, pixieonline@gmail.com, 
	pd-list-request@iem.at, pd-list@iem.at, pdecris@gmail.com, 
	paulati@hotmail.com, "Paula Beati" <paulati@gmail.com>, 
	"Paula Beati" <paulati@yahoo.com.ar>, paul@linuxaudiosystems.com, 
	"Patricia Arakaki" <patricia@livra.com>, 
	"Patricia ." <c_an_d@hotmail.com>, "Pat ." <c_an_d@yahoo.com.ar>, 
	"Pablo Picatto" <PPicatto@livra.com>, 
	"=?ISO-8859-1?Q?Pablo_Nicol=E1s_N=FA=F1ez_P=F6lcher?=" <pablo@livra.com>, 
	"=?ISO-8859-1?Q?Pablo_De_Crist=F3foris?=" <pablodc@livra.com>, 
	"=?ISO-8859-1?Q?Pablo_De_Crist=F3foris?=" <pdecris@dc.uba.ar>, 
	"Pablo Cababie" <pcababie@livra.com>, 
	PabloC <pablocababie@gmail.com>, "Nur Malek Pascha" <nur@livra.com>, 
	nurmalek@hotmail.com, numpy-discussion-request@lists.sourceforge.net, 
	numpy-discussion@scipy.org, nubis <gnubis@gmail.com>, 
	nubis@livra.com, "Nombre Apellido" <beijingsilk@gmail.com>, 
	noc@cubecorp.com.ar, niusleter@niusleter.com.ar, 
	"Nicolas Lanaro" <nicolas@devego.com>, nevermind__pab@hotmail.com, 
	nemerle-en@googlegroups.com, "Natalia Kostoff" <natalia@livra.com>, 
	"Natalia Kostoff" <natalia@livra.net>, 
	"Natalia Fainberg" <nfainberg@livra.com>, 
	"Nahuel Greco" <ngreco@gmail.com>, nahuel.greco@vonsrl.com.ar, 
	nahuel@puntorojo.com.ar, mpoisson@gmail.com, 
	"Miguel Angel Saez" <miguel@livra.net>, 
	"Miguel Angel Saez" <miguel@livra.com>, mfrias@dc.uba.ar, 
	mconte@livra.com, mconte@kannel.org, 
	"mbeati@dc.uba.ar" <mbeati@dc.uba.ar>, maxi@movenext.com.ar, 
	"Matias Puerto" <matiaspuerto@hotmail.com>, 
	"=?ISO-8859-1?Q?Mat=EDas_Poisson?=" <matias@devego.com>, 
	"=?ISO-8859-1?Q?Mat=EDas_Poisson?=" <mpoisson@livra.com>, 
	matiasgon <matiasgon@livra.com>, 
	"=?ISO-8859-1?Q?Mat=EDas_Brunstein_Macri?=" <mbmacri@gmail.com>, 
	matias@livra.com, "Matej Knopp (JIRA)" <jira@apache.org>, 
	"mashita sha" <smashita@yahoo.com>, 
	"Martin Etchegaray" <mnetchegaray@yahoo.com.ar>, 
	"=?ISO-8859-1?Q?Mart=EDn_A=F1azco?=" <martin@livra.com>, 
	"=?ISO-8859-1?Q?Martin_A=F1azco?=" <martin.anazco@gmail.com>, 
	"Mark Edgar" <medgar@student.gc.maricopa.edu>, 
	"marina oybin" <marinaoybin@yahoo.com.ar>, 
	"Mariano Lago - Comunidad Livra .com" <marianolake@livra.com>, 
	"Mariano Korendij" <mariano@devego.com>, 
	"Mariano Goldman" <marianogoldman@gmail.com>, 
	"mariano@livra.com" <mariano@livra.com>, 
	mariano <mariano.korendij@gmail.com>, 
	"Marco Rodrigo Albanesi" <mrac@sion.com>, 
	"Marco Rodrigo Albanesi" <rodrigo@livra.com>, mailroot@livra.com, 
	"Luis Angel Avalos" <luisavalos@fibertel.com.ar>, luciano@livra.com, 
	"lucia@livra.com" <lucia@livra.com>, lsantillan@cubecorp.com.ar, 
	lperosio@dc.uba.ar, losmartesmiento@gmail.com, 
	"Lorena Irizarri" <lirizarri@yahoo.com.ar>, 
	"Livra Panels - Tech" <tech@livrapanels.com>, 
	libc-announce-unsubscribe@sourceware.org, 
	libc-announce-uc.1166763336.ghnppndnfmhkjegfbjed-carlosjosepita=gmail.com@sourceware.org, 
	libc-announce-sc.1166763267.caimboamnmhkmclnhdbb-carlosjosepita=gmail.com@sourceware.org, 
	libc-alpha-uc.1182272347.lakcchmdededoimideda-carlosjosepita=gmail.com@sourceware.org, 
	libc-alpha-sc.1166763351.lhoklnfjdniepokfdmjp-carlosjosepita=gmail.com@sourceware.org, 
	libc-alpha@sourceware.org, "Lee Revell" <rlrevell@joe-job.com>, 
	"Leandro Ezequiel Lovisolo" <leandro@livra.com>, 
	Leandro <cafesolo@gmail.com>, "Laura Guerrero" <laura@livra.com>, 
	kimasamasaki@hotmail.com, "Karol Cronin" <karolcronin@hotmail.com>, 
	"Julia Lera" <julia@livra.com>, 
	"Juan E. Bongiovanni" <bongio@livra.net>, 
	"Juan Bongiovanni" <bongio@livra.com>, 
	"Juan_Cabral@artear.com.ar" <Juan_Cabral@artear.com.ar>, 
	"Jose Pita" <jospit@gmail.com>, jos <jospit@mr.com.ar>, 
	"jorge lancelotti" <jorge@pespasa.com.ar>, jonathan@livra.com, 
	"Jean-Baptiste Quenot" <jbq@apache.org>, 
	"Jean-Baptiste Quenot" <jbq@joost.com>, jbongio@gmail.com, 
	java-user-subscribe@lucene.apache.org, 
	java-user-sc.1179976838.lennbjdbcbgfoglmmodo-carlosjosepita=gmail.com@lucene.apache.org, 
	java-user@lucene.apache.org, 
	javapathfinder-user-request@lists.sourceforge.net, 
	javapathfinder-user@lists.sourceforge.net, 
	jackit-devel-request@lists.sourceforge.net, 
	jackit-devel@lists.sourceforge.net, 
	"isveztia isveztia" <isveztia@gmail.com>, 
	"IOhannes m zmoelnig" <zmoelnig@iem.at>, 
	"Horacio Fucaraccio" <horacio@livra.com>, 
	"Hernan Dupuy" <hernan@movenext.com.ar>, 
	"Hernan Dupuy" <h@rss.com.ar>, haskell-cafe-request@haskell.org, 
	haskell-cafe-owner@haskell.org, haskell-cafe@haskell.org, 
	"gustepi@yahoo.com.ar" <gustepi@yahoo.com.ar>, 
	"Gustavo Pita" <gustepi@gmail.com>, 
	"Guillermo Pita" <guillermopita@yahoo.com.ar>, 
	"guillermo pita" <guille.pita@gmail.com>, 
	"Guido Chari" <guido@livra.com>, guehara@cubecorp.com.ar, 
	"Guadalupe Molina" <guadalupemol@gmail.com>, 
	"GOPITAM@repsolypf.com" <GOPITAM@repsolypf.com>, 
	"Gonzalo Javier Larralde" <gonzalo@livra.com>, gonmatias@livra.com, 
	gdiego@livra.com, 
	"=?ISO-8859-1?Q?GDB_Inform=E1tica?=" <gdb_ventas@hotmail.com>, 
	"=?ISO-8859-1?Q?GDB_Inform=E1tica?=" <gedebe@speedy.com.ar>, 
	"Gary P. Scavone" <gary@music.mcgill.ca>, gaby04.10@hotmail.com, 
	"Gabriel Lajmanovich" <gabriel@livra.com>, gabrieladopazo@gmail.com, 
	"Fundadores de Livra.com" <fundadores@livra.com>, 
	"Francisco Diaz Trepat - gmail" <francisco.diaztrepat@gmail.com>, 
	florgutman@hotmail.com, flext-request@grrrr.org, flext@grrrr.org, 
	"Federico Poore - Comunidad Livra.com" <federico@livra.com>, 
	"Favio Daniel DeMarco" <favio@livra.com>, Favio <faviod@gmail.com>, 
	"Fabiano, Daniel" <Daniel.Fabiano@bdk.com>, 
	"Ezequiel Saudino" <Ezequiel.Saudino@bancogalicia.com.ar>, 
	"Ezequiel Glinsky" <ezequiel@livra.com>, 
	"Ezequiel Glinsky" <ezequiel@livra.net>, everybody@livra.com, 
	eric@enthought.com, emarcet@intramed.net.ar, emarcet@intramed.net, 
	"elizabeth alvarez gonzalez" <stocktelmo@hotmail.com>, 
	eglinsky@gmail.com, efeuerst@dc.uba.ar, 
	"edward_me@tom.com" <edward_me@tom.com>, 
	"Eduardo Sabbatella" <eduardo.sabbatella@gmail.com>, 
	drchip@campbellfamily.biz, "Diego Park" <diegopark@gmail.com>, 
	"Diego Meller" <diego@livra.net>, "Diego Meller" <diego@livra.com>, 
	"Diego Maslo" <dmaslo@livra.com>, "Diego Maslo" <dmaslo@livra.net>, 
	"Diego Gavinowich" <gdiego@gmail.com>, 
	"Diego Gavinowich" <dgavinowich@livra.com>, diana_gs6@hotmail.com, 
	"Demetrius - Livra" <demetrius@livra.com>, 
	"Debora@livra.com" <debora@livra.com>, DBautis@cubecorp.com.ar, 
	"Dario Esteban Brozzi" <dbrozzi@gmail.com>, cpitadev@yahoo.com.ar, 
	"Claudio Freire" <klaussfreire@gmail.com>, 
	"Claudio Freire" <claudio@livra.com>, chinnybravo@yahoo.co.in, 
	chicken-users-request@nongnu.org, chicken-users@nongnu.org, 
	"Carlos Pita" <carlos@livra.com>, 
	"Carlos Pita" <cpitaper@yahoo.com.ar>, 
	"Carlos Pita" <cpitaar@gmail.com>, carlosjosepita@yahoo.com.ar, 
	"Carlos Bruscoli" <gugote@livra.com>, 
	carlos <carlosjosepita@gmail.com>, carlos@livra.net, 
	"Bottini, Facundo" <Facundo.Bottini@bdk.com>, 
	b.zdanowski@autoguard.pl, audacity-help@lists.sourceforge.net, 
	aspectj-users-request@eclipse.org, aspectj-users@eclipse.org, 
	armandofeles_mtz@hotmail.com, 
	"=?ISO-8859-1?Q?Ariel_Hern=E1n_Pillet?=" <apillet@gmail.com>, 
	aquereilhac <aquereilhac@gmail.com>, 
	"Antonella Condello" <antonella@livra.com>, angie@cmm.com.py, 
	"=?ISO-8859-1?Q?Andr=E9s_Elencwajg?=" <andreselen@livra.net>, 
	"Andres Elencwajg" <andreselen@livra.com>, 
	"Ana Paula" <apcastro@livra.com>, amr6axl@ups.com, 
	alsa-user-request@lists.sourceforge.net, 
	alsa-user@lists.sourceforge.net, "allaria@ups.com" <allaria@ups.com>, 
	alina <alina@livra.com>, "Alexis Garbarz" <alexis@livra.com>, 
	"Alejandro Karageorgos" <Alejandro.Karageorgos.ADVISION@petrobras.com>, 
	"Alejandra Fishkel" <alejandra@livra.net>, 
	"Alberto Siless" <asiless@gmail.com>, 
	"Alberto Llaria" <alberto.llaria@gmail.com>, 
	"Alberto Llaria" <afllaria@hotmail.com>, alamoslista@gmail.com, 
	"Aitor Ituarte" <aitorituarte@hotmail.com>, adrianenlared@gmail.com
Subject: quechup.com spam
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hola / Hi,

queria pedir disculpas y advertir a todo aquel que haya recibido una
invitacion mia para quechup.com. Yo me registre por una invitacion que
a mi vez recibi de un contacto de confianza, sin prestar demasiada
atencion al procedimiento y sin saber muy bien de que se trataba. En
determinado paso, la registracion brinda la posibilidad de averiguar
que contactos de gmail se encuentran ya registrados en el sitio, y es
claro que luego usan de mala fe los contactos importados para spamear
(http://groups.google.es/group/Gmail-Users/browse_thread/thread/656ae3699f1c06d1).
Hecho el descargo, proceda cada uno a su criterio respecto de la
invitacion.


I would like to apologize to and warn everyone that has recently
received an invitation from mine to join quechup.com. I registered
myself because of an invitation that I got from a trusted contact,
without paying a lot of attention to the registration procedure and
without a solid understanding of what quechup.com was about. At some
step in the registration, they offer you the chance to find out which
of your gmail contacts are already quechup members, and it's pretty
obvious that afterwards they act in bad faith using this information
to spam you contacts with new invitations
(http://groups.google.es/group/Gmail-Users/browse_thread/thread/656ae3699f1c06d1).
That said, act according to your own will regarding the invitation, of
course.

Saludos / Regards,
Carlos

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 09 19:24:33 2007
Return-Path: <java-user-return-30184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33467 invoked from network); 9 Sep 2007 19:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Sep 2007 19:24:31 -0000
Received: (qmail 94233 invoked by uid 500); 9 Sep 2007 19:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94199 invoked by uid 500); 9 Sep 2007 19:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94188 invoked by uid 99); 9 Sep 2007 19:24:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Sep 2007 12:24:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Sep 2007 19:24:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUSNw-0001wd-DK
	for java-user@lucene.apache.org; Sun, 09 Sep 2007 12:23:56 -0700
Message-ID: <12582067.post@talk.nabble.com>
Date: Sun, 9 Sep 2007 12:23:56 -0700 (PDT)
From: Jeff French <jeff@mdbconsulting.com>
To: java-user@lucene.apache.org
Subject: Question about Qsol parser and phrase searches
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jeff@mdbconsulting.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a document that contains the phrase "recent stent placement". Here is
the result of some queries using the Qsol parser:

  "recent stent placement"  => YES
  "recent placement" => YES
  "recent placement":0  => NO
  "recent placement":1  => YES

where YES/NO indicates whether the document was returned. The "recent
placement" query result surprised me, as I had expected it not to return the
document. From the other queries, it looks like phrase searches have a
default slop of one. Is that correct? If so, is there a way to default to no
slop, preferrably without changing all of our queries?

Thanks for any pointers.

  Jeff
-- 
View this message in context: http://www.nabble.com/Question-about-Qsol-parser-and-phrase-searches-tf4410480.html#a12582067
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 08:13:21 2007
Return-Path: <java-user-return-30185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25743 invoked from network); 10 Sep 2007 08:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 08:13:20 -0000
Received: (qmail 60898 invoked by uid 500); 10 Sep 2007 08:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60865 invoked by uid 500); 10 Sep 2007 08:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60854 invoked by uid 99); 10 Sep 2007 08:13:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 01:13:08 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 08:14:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUeNv-0000sQ-D0
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 01:12:43 -0700
Message-ID: <12588494.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 01:12:43 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Finding out which field caused the search hit
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
X-Virus-Checked: Checked by ClamAV on apache.org


This question has been asked numerous times here. But the answer has never
been satisfactory. Can someone answer it full and final, please ?

If you get back a document as a search hit. How do you find out which field
in it matched ? Just the position of the field is sufficient !

-thanks

-- 
View this message in context: http://www.nabble.com/Finding-out-which-field-caused-the-search-hit-tf4412955.html#a12588494
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 09:15:27 2007
Return-Path: <java-user-return-30186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40357 invoked from network); 10 Sep 2007 09:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 09:15:26 -0000
Received: (qmail 25166 invoked by uid 500); 10 Sep 2007 09:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25130 invoked by uid 500); 10 Sep 2007 09:15:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25119 invoked by uid 99); 10 Sep 2007 09:15:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 02:15:14 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.86] (HELO web26012.mail.ukl.yahoo.com) (217.12.10.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Sep 2007 09:15:09 +0000
Received: (qmail 11299 invoked by uid 60001); 10 Sep 2007 09:14:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=JmpiZjmglr+tC3n7mxDzJL6BfWjrxOqDnsZvr5r4S7Wa4DDgzTDOgzPXCmCRqVr04fNrrRXjR5K488IsxNzAskr+TxZG/2aLIuWJw6grDINwTUM+7GuoQNsPWrtysFBU21RDezCLQzJBYjJCwAYcZux6v6cSNcbj+QqelTetBiE=;
X-YMail-OSG: O0GMkxUVM1mnEswZV5saD8AI35UVDVhKsvjbvrBO0BY1oudYmp_rK_1Qowb4bKonNakz7DKpU.o_SY7yXJIvPznK1LuoerXGPzjpNbdRH3xxiugzyQckAZgOdCMy2fZmYSwCf.bYzdlhRQ--
Received: from [193.36.230.96] by web26012.mail.ukl.yahoo.com via HTTP; Mon, 10 Sep 2007 09:14:47 GMT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Mon, 10 Sep 2007 09:14:47 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Finding out which field caused the search hit
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <820788.11020.qm@web26012.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>> the answer has never been satisfactory=0A=0AIs this the original questio=
n?=0A    http://www.nabble.com/Which-field-matched---tf4141549.html#a117807=
57=0A=0A=0AWhat actually formed the basis of a document match is hidden in =
a tree of=0Aheterogeneous Query objects and to be efficient their match out=
put is=0Alimited to document ids and scores-  not some detailed analysis of=
=0Awhich sections of a document matched. It is therefore hard/impossible=0A=
to have any highlighting solution which provides answers for all query=0Aty=
pes and the existing Highlighter relies on a rough heuristic where QueryTer=
mExtractor output is used to find the list of query terms used and field To=
kenStreams are analyzed for content.=0A=0AYou mention Highlighter performan=
ce would be bad for wildcard queries. Have you tried it? If it does turn ou=
t to be bad (many wildcard variants produced) might I suggest the following=
:=0A=0A1) Dissect the unrewritten Query and find all WildcardQuery objects=
=0A2) Create a custom analyzer that re-implements the wildcard logic and pr=
oduces a highlighter-friendly token stream i,e=0A    Given a query of =0A  =
          Fred W*=0A    and data of=0A            Fred West was arrested=0A=
    the analyzer would produce:=0A            Fred [W*|West] was arrested=
=0A    ..where the tokens "W*" and "West" appear at the same position=0A3) =
Add a special wildcard term (W*) to the list of Query terms given to the Hi=
ghlighter. This would then match with the W* injected into the content in s=
tep 2)=0A=0AThis would avoid the overhead of picking through all the wildca=
rd variants produced by the wildcardQuery but at the cost of extra coding o=
n your part and the runtime cost of re-executing wildcard logic on all term=
s in the selected documents' TokenStreams. The difference in runtime cost m=
ay prove minimal.=0A=0ACheers=0AMark=0A=0A=0A=0A=0A=0A=0A      ____________=
_______________________________________________=0AYahoo! Answers - Got a qu=
estion? Someone out there knows the answer. Try it=0Anow.=0Ahttp://uk.answe=
rs.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 11:15:08 2007
Return-Path: <java-user-return-30187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86032 invoked from network); 10 Sep 2007 11:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 11:15:08 -0000
Received: (qmail 95100 invoked by uid 500); 10 Sep 2007 11:14:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94841 invoked by uid 500); 10 Sep 2007 11:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94829 invoked by uid 99); 10 Sep 2007 11:14:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 04:14:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 11:14:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUhDr-0005Rq-So
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 04:14:31 -0700
Message-ID: <12590769.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 04:14:31 -0700 (PDT)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: search results with sort
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I have this exception there are more terms than documents in field
"Title", but it's impossible to sort on tokenized fields.

   I'm try to sort the result by Title and the field title is un_tokenized
and it has only one term such as document, 06, rational, etc, and some other
fields have tokenized.

   The query that I build is something like that: documentName:a or
documentDescription:a or contents:a etc, sort = new Sort("Title"); then
searcHits = searcher.search(query,sort);

   I don't know why I get this error message, anyone can help?

   Thank you.
  
-- 
View this message in context: http://www.nabble.com/search-results-with-sort-tf4413911.html#a12590769
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 11:53:12 2007
Return-Path: <java-user-return-30188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4628 invoked from network); 10 Sep 2007 11:53:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 11:53:10 -0000
Received: (qmail 33273 invoked by uid 500); 10 Sep 2007 11:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33229 invoked by uid 500); 10 Sep 2007 11:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33218 invoked by uid 99); 10 Sep 2007 11:52:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 04:52:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 11:54:26 +0000
Received: by nz-out-0506.google.com with SMTP id i28so409422nzi
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 04:52:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ya4JI8/Gg+AfyPwL0gjNT7VZyoA3K4jYkun2ivYcT+M=;
        b=Oh3kAHgZ9mN8j41dHzWQnwDkafhqKiW/XL25QlKzj0NWWhxY2bFD2Af4wahrmgfafpGxKDOak82PcQWSe5AOhxgEAgBW7QhPSUrEqFYmqtE/cG1YcoQlfIJLiwbJaMVsfV06MKXhOGAtecJMTju/283Oy58BSg4lnReOrqo+a18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VaqwOe3JPLlK/+Dr7T3FTrreIQSbefqKQHGY3SLKXFYDhGHuhco/13Qmkb+SQHyS8kHEZsM33XqD1TrqJA+ywqdwykcGwansSeVg9y/tYxnA5pWiRi5N84ky6F2v784OHkBFdTzdqc7irWwlZdfCNEiZxibVUKSZNHnJHasjY2g=
Received: by 10.65.214.19 with SMTP id r19mr9309326qbq.1189425148886;
        Mon, 10 Sep 2007 04:52:28 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id 1sm2213073qbh.2007.09.10.04.52.26
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 10 Sep 2007 04:52:27 -0700 (PDT)
Message-ID: <46E52F95.90808@gmail.com>
Date: Mon, 10 Sep 2007 07:50:45 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question about Qsol parser and phrase searches
References: <12582067.post@talk.nabble.com>
In-Reply-To: <12582067.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The default slop is one and it really should be 0. Sorry about the slip 
up Jeff and thanks for catching it. I'll make an adjustment, and a 
method to allow changing the default anyway, and then point you to an 
updated jar.

- Mark

Jeff French wrote:
> I have a document that contains the phrase "recent stent placement". Here is
> the result of some queries using the Qsol parser:
>
>   "recent stent placement"  => YES
>   "recent placement" => YES
>   "recent placement":0  => NO
>   "recent placement":1  => YES
>
> where YES/NO indicates whether the document was returned. The "recent
> placement" query result surprised me, as I had expected it not to return the
> document. From the other queries, it looks like phrase searches have a
> default slop of one. Is that correct? If so, is there a way to default to no
> slop, preferrably without changing all of our queries?
>
> Thanks for any pointers.
>
>   Jeff
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 11:58:25 2007
Return-Path: <java-user-return-30189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6516 invoked from network); 10 Sep 2007 11:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 11:58:23 -0000
Received: (qmail 38979 invoked by uid 500); 10 Sep 2007 11:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38631 invoked by uid 500); 10 Sep 2007 11:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38620 invoked by uid 99); 10 Sep 2007 11:58:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 04:58:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 11:59:39 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7BD5C30EFC17; Mon, 10 Sep 2007 05:57:44 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 8B90730EFC16
	for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 05:57:41 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12588494.post@talk.nabble.com>
References: <12588494.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <55124D28-28B6-4F32-AE82-749A62C94B8A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Finding out which field caused the search hit
Date: Mon, 10 Sep 2007 07:57:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Sep 10, 2007, at 4:12 AM, makkhar wrote:
> This question has been asked numerous times here. But the answer  
> has never
> been satisfactory. Can someone answer it full and final, please ?
>
> If you get back a document as a search hit. How do you find out  
> which field
> in it matched ? Just the position of the field is sufficient !

Short answer is you can't.  Longer answer, of course Lucene matches  
on a per-field basis, so it is determining those sorts of things  
during the search operation, but it does not keep that information  
handy along with the Hit.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 12:29:49 2007
Return-Path: <java-user-return-30190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20139 invoked from network); 10 Sep 2007 12:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 12:29:49 -0000
Received: (qmail 76370 invoked by uid 500); 10 Sep 2007 12:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76336 invoked by uid 500); 10 Sep 2007 12:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76325 invoked by uid 99); 10 Sep 2007 12:29:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 05:29:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lmenaria@chambal.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 12:29:33 +0000
Received: by rv-out-0910.google.com with SMTP id k20so906080rvb
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 05:29:13 -0700 (PDT)
Received: by 10.141.79.12 with SMTP id g12mr1802209rvl.1189427353025;
        Mon, 10 Sep 2007 05:29:13 -0700 (PDT)
Received: by 10.141.87.15 with HTTP; Mon, 10 Sep 2007 05:29:13 -0700 (PDT)
Message-ID: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
Date: Mon, 10 Sep 2007 17:59:13 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Searching Exact Word from Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6008_20415176.1189427353025"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6008_20415176.1189427353025
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hello Everyone,

I want to search 'abc-d' as exact keyword not 'abc d'. KeywordAnalyzer can
be used for this purpose. StandradAnalyzer create different tokens for
'abc-d' as 'abc' and 'd'.
But I can not use this, becuase I am indexing the content of a text file. It
will search whole content as a single keyword.
But I want to search any word from the content.

Please let me now how it is possible..

Using : Java Lucene 2.2

-- 
Thanks in advance,
Laxmilal menaria

http://www.chambal.net/

------=_Part_6008_20415176.1189427353025--

From java-user-return-30191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 13:00:22 2007
Return-Path: <java-user-return-30191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32438 invoked from network); 10 Sep 2007 13:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 13:00:20 -0000
Received: (qmail 13917 invoked by uid 500); 10 Sep 2007 13:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13877 invoked by uid 500); 10 Sep 2007 13:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13866 invoked by uid 99); 10 Sep 2007 13:00:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 06:00:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lmenaria@chambal.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 13:01:33 +0000
Received: by rv-out-0910.google.com with SMTP id k20so911626rvb
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 05:59:39 -0700 (PDT)
Received: by 10.140.226.14 with SMTP id y14mr1823628rvg.1189429179337;
        Mon, 10 Sep 2007 05:59:39 -0700 (PDT)
Received: by 10.141.87.15 with HTTP; Mon, 10 Sep 2007 05:59:39 -0700 (PDT)
Message-ID: <1324e4e20709100559g5ef0bc48h1fb64be3283c4aa1@mail.gmail.com>
Date: Mon, 10 Sep 2007 18:29:39 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Indexing Speed using Java Lucene 2.0 and Lucene.NET 2.0
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6076_23482858.1189429179328"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6076_23482858.1189429179328
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Everyone,

I have created a Index Application using Java lucene 2.0 in java and
Lucene.Net 2.0 in VB.net. Both application have same logic. But when I have
indexed a database with 14000 rows from both application and same machine, I
surprised that Java lucene took (198 Seconds) more than double time from
.net.(87 Seconds). Is there are any specific reason for that.. or any other
thing..

Also have tried with same of Java Lucene 2.2. Its also took same time..(190
Seconds)

Please let me know if any one have got same..

Thanks in advance,
Laxmilal Menaria


http://www.chambal.net/

------=_Part_6076_23482858.1189429179328--

From java-user-return-30192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 13:11:26 2007
Return-Path: <java-user-return-30192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38814 invoked from network); 10 Sep 2007 13:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 13:11:25 -0000
Received: (qmail 32485 invoked by uid 500); 10 Sep 2007 13:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32445 invoked by uid 500); 10 Sep 2007 13:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32434 invoked by uid 99); 10 Sep 2007 13:11:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 06:11:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 13:12:42 +0000
Received: from [192.168.3.102] (ATuileries-152-1-92-236.w90-2.abo.wanadoo.fr [90.2.243.236])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 679A55E3D
	for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 15:10:48 +0200 (CEST)
Message-ID: <46E54256.9050807@garambrogne.net>
Date: Mon, 10 Sep 2007 15:10:46 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
In-Reply-To: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
X-Enigmail-Version: 0.95.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Laxmilal Menaria a crit :
>  Hello Everyone,
>
> I want to search 'abc-d' as exact keyword not 'abc d'. KeywordAnalyzer can
> be used for this purpose. StandradAnalyzer create different tokens for
> 'abc-d' as 'abc' and 'd'.
> But I can not use this, becuase I am indexing the content of a text file. It
> will search whole content as a single keyword.
> But I want to search any word from the content.
>
> Please let me now how it is possible..
>
> Using : Java Lucene 2.2
>
>   
choose an analyzer wich doesn't cut word on "-" or build it yourself.
You can use a basic one and add filter on it.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 13:53:46 2007
Return-Path: <java-user-return-30193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57985 invoked from network); 10 Sep 2007 13:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 13:53:45 -0000
Received: (qmail 11137 invoked by uid 500); 10 Sep 2007 13:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11092 invoked by uid 500); 10 Sep 2007 13:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11077 invoked by uid 99); 10 Sep 2007 13:53:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 06:53:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 13:54:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUjhK-0001T0-Cp
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 06:53:06 -0700
Message-ID: <12593257.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 06:53:06 -0700 (PDT)
From: AnkitSinghal <ankisinghal@gmail.com>
To: java-user@lucene.apache.org
Subject: Storing Host and IP Information in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ankisinghal@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

I have query about storing hostname and IP information in lucene,

For eg: In my Application I have some field with name host.
In my App sometimes i get value as host name and sometimes as ipaddress.
like sometimes i get ankit.xyz.com and sometimes i get 10.10.01.01

In my code i have made the Lucene field as
Field("host",value,TOKENIZED,NOSTORE).

Now the problem with above is that I cannot search for host:10.10.*

And if i make the field as UNTOKENIZED  i cannot search for queries like
host:xyz.* .

The only solution that came to my mind is to parse the value and decide if
it contains the IPaddress or hostname and then decide which type of
tokenizing to use.

But this seems to a pretty big overhead as my data us huge and parsing for
each record is not feasible.

Can any body provide with some better approach. I believe this is a very
common problem.

Ankit
-- 
View this message in context: http://www.nabble.com/Storing-Host-and-IP-Information-in-Lucene-tf4414865.html#a12593257
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 15:31:15 2007
Return-Path: <java-user-return-30194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34103 invoked from network); 10 Sep 2007 15:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 15:31:14 -0000
Received: (qmail 10580 invoked by uid 500); 10 Sep 2007 15:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10539 invoked by uid 500); 10 Sep 2007 15:31:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10528 invoked by uid 99); 10 Sep 2007 15:31:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 08:31:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 15:32:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUlDg-000507-I2
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 08:30:36 -0700
Message-ID: <12595489.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 08:30:36 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12528983.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


1. You can close the searcher once you're done. If you want to reopen the
index, you can close and reopen only the updated 3 readers and keep the 2
old indexreaders and reuse it. It should reduce the time to reopen it.
2. Make sure that you optimize it every once in a while
3. You might consider separating indices in separated storage and use
ParallelReader



Sebastin wrote:
> 
> The problem in my pplication are as follows:
>                  1.I am not able to see the updated records in my index
> store because i instantiate 
> IndexReader and IndexSearcher class once that is in the first
> search.further searches use the same IndexReaders(5 Directories) and
> IndexSearcher with different queries.
> 
>                 2.My search is very very slow First 2 Directories of size
> 10 GB each which are having old index records and no update in that
> remaining 3 Diretories are updated every second.
> 
>                 3.i am Indexing 20 million records per day so the Index
> store gets growing and it makes search very very slower.
>  
>                4.I am using searcherOne class as the global application
> helper class ,with the scope as APPLICATION it consists of one IndexReader
> and IndexSearcher get set method which will hold the IndexReader and
> IndexSearcher object after the First Search.it is used for all other
> searches.
> 
>               5.I am using Lucene 2.2.0 version, in a WEB Application
> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i am
> not using any sort in my query.for a single query upto the maximum it
> fetches 600 records from the index store(5 direcories)    
>                 
> 
> hossman wrote:
>> 
>> 
>> : I set IndexSearcher as the application Object after the first search.
>> 	...
>> : how can i reconstruct the new IndexSearcher for every hour to see the
>> : updated records .
>> 
>> i'm confused ... my understanding based on the comments you made below 
>> (in an earlier message) was that you already *were* constructing a new  
>> IndexSearcher once an hour -- but every time you do that, your memory 
>> usage grows, and and that sometimes you got OOM Errors.
>> 
>> if that's not what you said, then i think you need to explain, in detail, 
>> in one message, exactly what your problem is.  And don't assume we 
>> understand anything -- tell us *EVERYTHING* (like, for example, what the 
>> word "crore" means, how "searcherOne" is implemented, and the answer to 
>> the specfic question i asked in my last message: does your application, 
>> contain anywhere in it, any code that will close anything (IndexSearchers 
>> or IndexReaders) ?
>> 
>> 
>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to 6
>> crore.
>> : > for
>> : > : every second i am updating my Index. i instantiate IndexSearcher
>> object
>> : > one
>> : > : time for all the searches. for an hour can i see the updated
>> records in
>> : > the
>> : > : indexstore by reinstantiating IndexSearcher object.but the problem
>> when
>> : > i
>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is there
>> any
>> 
>> 
>> : > IndexSearcher are you explicitly closing both the old IndexSearcher
>> as 
>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>> 
>> 
>> 
>> 
>> -Hoss
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12595489
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 18:18:11 2007
Return-Path: <java-user-return-30195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56317 invoked from network); 10 Sep 2007 18:18:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 18:18:10 -0000
Received: (qmail 86841 invoked by uid 500); 10 Sep 2007 18:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86515 invoked by uid 500); 10 Sep 2007 18:17:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86504 invoked by uid 99); 10 Sep 2007 18:17:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 11:17:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.29 as permitted sender)
Received: from [80.67.29.29] (HELO smtprelay12.ispgateway.de) (80.67.29.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 18:19:23 +0000
Received: (qmail 29728 invoked from network); 10 Sep 2007 18:17:30 -0000
Received: from unknown (HELO p54bfc8fc.dip.t-dialin.net) (695637@[84.191.200.252])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay12.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 10 Sep 2007 18:17:30 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed using Java Lucene 2.0 and Lucene.NET 2.0
Date: Mon, 10 Sep 2007 20:11:31 +0200
User-Agent: KMail/1.8.2
References: <1324e4e20709100559g5ef0bc48h1fb64be3283c4aa1@mail.gmail.com>
In-Reply-To: <1324e4e20709100559g5ef0bc48h1fb64be3283c4aa1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709102011.31922@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 10 September 2007 14:59, Laxmilal Menaria wrote:

> I have created a Index Application using Java lucene 2.0 in java and
> Lucene.Net 2.0 in VB.net. Both application have same logic. But when I
> have indexed a database with 14000 rows from both application and same
> machine, I surprised that Java lucene took (198 Seconds) more than
> double time from .net.(87 Seconds).

Have you checked that both indexed are the same size to make sure they are 
really the same? How much memory does the .net version use? Fast indexing 
is simple if you have a lot of memory.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 18:27:35 2007
Return-Path: <java-user-return-30196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62681 invoked from network); 10 Sep 2007 18:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 18:27:34 -0000
Received: (qmail 3891 invoked by uid 500); 10 Sep 2007 18:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3865 invoked by uid 500); 10 Sep 2007 18:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3854 invoked by uid 99); 10 Sep 2007 18:27:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 11:27:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 18:27:16 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1852777wah
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 11:26:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=pTMU+PXSonkCE/7BR9ewYa4nAR0MuvUPYwbzgdWLVCI=;
        b=Dn/L2CmkW5L1W8TrMNEcL41VCjSlrePfDZujSwOLT3Afrzqfbh1Vr5fdI5xAQFLcM1VzWenjTx9vCE/Hu9Fk+EqYTdggBkPW0Vp8xB//X5YnnbQKXpmC0TJd8Or3P/JHMYYtKl7FnJRRIJRVnx3yT9pDsHNevyPMPt5O7h24284=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=IgwTclp8eVKLNBSCIIbne/afT7e//OOIqZ7TMDUk6ASHDdb65LSehNNK4naiybykbGiUIZD9zHhZENK9J4bhk2mFRFLYBIhRt4ztQXggrEJk7GdAYB7eDDPxs/0NwK93l4WWk5RTWOk5mrMjH86DFxQAq9WekjbTnnVMAnr0y1o=
Received: by 10.114.38.2 with SMTP id l2mr173773wal.1189448814853;
        Mon, 10 Sep 2007 11:26:54 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id k24sm7493075waf.2007.09.10.11.26.53
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 10 Sep 2007 11:26:54 -0700 (PDT)
In-Reply-To: <1324e4e20709100559g5ef0bc48h1fb64be3283c4aa1@mail.gmail.com>
References: <1324e4e20709100559g5ef0bc48h1fb64be3283c4aa1@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <06ADD170-44CB-4479-8A92-BA0B51DAC210@gmail.com>
Cc: lucene-net-user@incubator.apache.org
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Indexing Speed using Java Lucene 2.0 and Lucene.NET 2.0
Date: Mon, 10 Sep 2007 11:26:52 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 10-Sep-07, at 5:59 AM, Laxmilal Menaria wrote:

> Hello Everyone,
>
> I have created a Index Application using Java lucene 2.0 in java and
> Lucene.Net 2.0 in VB.net. Both application have same logic. But  
> when I have
> indexed a database with 14000 rows from both application and same  
> machine, I
> surprised that Java lucene took (198 Seconds) more than double time  
> from
> .net.(87 Seconds). Is there are any specific reason for that.. or  
> any other
> thing..
>
> Also have tried with same of Java Lucene 2.2. Its also took same  
> time..(190
> Seconds)

Are you using the same index settings? (mergefactor, maxBufferedDocs,  
etc)?  Are you using StandardAnalyzer (the trunk version should be  
many times faster)?

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 19:00:46 2007
Return-Path: <java-user-return-30197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75405 invoked from network); 10 Sep 2007 19:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 19:00:45 -0000
Received: (qmail 67254 invoked by uid 500); 10 Sep 2007 19:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67219 invoked by uid 500); 10 Sep 2007 19:00:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67208 invoked by uid 99); 10 Sep 2007 19:00:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 12:00:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alicelista@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 19:00:30 +0000
Received: by py-out-1112.google.com with SMTP id d32so4398213pye
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 12:00:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:x-mimeole:thread-index;
        bh=kr7PuSVxka9vziJzb9hQFE5jbB/wRLwC5QOhOJ86Kaw=;
        b=gRALr7qQIEYdSkSTLFr1rqopNj/1HQlERgChR4HcL8zuOOw/6cfeLYQY5mtWP+pOFGTPcnb7Wy8EQLHkR/tlPGJyRrz/LFlX/Z1lrxHLfi3LbsnTAAbM3digrcI5SDb1ETCuFqBhsP4wuvjzFvwHR7FJ7a1Ff5Tciq9iWKtGlUY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:x-mimeole:thread-index;
        b=UojGMMZNFmeDENaqm0yY1N7RROD17KOR7REB+XND5eL9tH0Z+KritvzXyNWbVXZ6eL0dX61iENpUpvW/8wTO/uE8a2/BAUK1d2knEmkJYUQBgpEdPCwXZmZDhxTgJ1QSuEHEiqkufa9EGc6/Us9hLYqRW13QbDeydDbFcuHPmgk=
Received: by 10.35.17.8 with SMTP id u8mr6403888pyi.1189450806241;
        Mon, 10 Sep 2007 12:00:06 -0700 (PDT)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTPS id n27sm4566691pyh.2007.09.10.12.00.03
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 10 Sep 2007 12:00:05 -0700 (PDT)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Query without Analyzer
Date: Mon, 10 Sep 2007 15:59:59 -0300
Message-ID: <00ec01c7f3dc$cbc098a0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00ED_01C7F3C3.A67360A0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Acfz3MkdsS005aEqSGG1lWQHDnrk6g==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00ED_01C7F3C3.A67360A0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi folks!

 

I'm using Lucene to provide search on my application.

 

The final query is a BooleanQuery with many fields, there are fields where
I'll look for the entered keyword and some others to restrict the search, as
the id of a category.

 

I read, and seems to be true, that when using TermQuery, it uses the same
analyzer used when indexing.

 

As, there are some fields (like category Id) that I don't want to use the
analyzer, the result is not what I expect because the term was analyzed.

 

My question is: is there any way to search for fields without using an
analyzer?

 

Thank you!

 

 


------=_NextPart_000_00ED_01C7F3C3.A67360A0--


From java-user-return-30198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 20:03:06 2007
Return-Path: <java-user-return-30198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2225 invoked from network); 10 Sep 2007 20:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 20:03:05 -0000
Received: (qmail 51459 invoked by uid 500); 10 Sep 2007 20:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51425 invoked by uid 500); 10 Sep 2007 20:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51414 invoked by uid 99); 10 Sep 2007 20:02:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 13:02:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kohan.massoud@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 20:02:48 +0000
Received: by py-out-1112.google.com with SMTP id d32so4462287pye
        for <java-user@lucene.apache.org>; Mon, 10 Sep 2007 13:02:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=H/d2y+eHBQyZU8R6gSio6bAZFk5YyAqJjbYJJ+IcCB8=;
        b=UOF2Xh+V8dA9tXdz2th47NSJOl9xxgLyRPFgsPF8pVm/c1teMxhkmKF3BPJZP74cQ7f9W3mdPMFcafnTJzUv3/SjEkSiCZCvnBOuSN6mphBxDoucBcqJl2UA7qu8sZe3DIm1gnWHAo5bGz2Yh0bLI+nd8v7kuMu6ABXIO5ssT2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=GwwQZPmzv5bv/ttj/sjZDQizqBdeEYE4V1yuxUjNAYeeOhq9T4SGiOsDb2556/DKojyF9tLf4i3PEnNma3lZROE9BiOr5wI28cQwGEvyQ+nTc9BPathK1ulNGGnwZ0BdR+QwxZABlszSm8m/q39GV1lKZsmDQOH16MUpAPwbPR8=
Received: by 10.65.40.16 with SMTP id s16mr10198294qbj.1189454547197;
        Mon, 10 Sep 2007 13:02:27 -0700 (PDT)
Received: by 10.64.253.14 with HTTP; Mon, 10 Sep 2007 13:02:27 -0700 (PDT)
Message-ID: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
Date: Mon, 10 Sep 2007 13:02:27 -0700
From: M.K <kohan.massoud@gmail.com>
To: java-user@lucene.apache.org
Subject: Implement a filter to the search results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10518_18040725.1189454547190"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10518_18040725.1189454547190
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have a search form which has an input area for key search and also  three
optional select boxs  *Catagory, Department and Year. *
 My question is how can I filter the results if users select a category or
 a department or a year or a combination of them.

*index *:

IndexWriter indexWriter =
*new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
*new*StandardAnalyzer(),true);

Document document = *new* Document();

document.add(Field.*Text*("text", docText));

document.add(Field.*UnIndexed*("department", depart));

document.add(Field.*UnIndexed*(
"category", courseId));

document.add(Field.*UnIndexed*(
"year", year));

indexWriter.addDocument(document);

indexWriter.close();



*search: *

*Searcher searcher = new IndexSearcher(API.getRootPath() + "/data/LUCENE/");
Analyzer analyzer = new StandardAnalyzer();*

* Query query = QueryParser.parse(request.getParameter("query"), "text",
analyzer);
 Hits hits = searcher.search (query);*

I do not konw how implement a filter to the results of the search for
catgory or year or department.

Thanks,

Massoud

------=_Part_10518_18040725.1189454547190--

From java-user-return-30199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 10 23:18:22 2007
Return-Path: <java-user-return-30199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71588 invoked from network); 10 Sep 2007 23:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Sep 2007 23:18:21 -0000
Received: (qmail 50233 invoked by uid 500); 10 Sep 2007 23:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50197 invoked by uid 500); 10 Sep 2007 23:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50186 invoked by uid 99); 10 Sep 2007 23:18:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 16:18:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 23:19:40 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 9B75A4A81F5
	for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 09:15:38 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Storing Host and IP Information in Lucene
Date: Tue, 11 Sep 2007 09:14:25 +1000
User-Agent: KMail/1.9.7
References: <12593257.post@talk.nabble.com>
In-Reply-To: <12593257.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709110914.25237.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 10 September 2007 23:53:06 AnkitSinghal wrote:
> And if i make the field as UNTOKENIZED  i cannot search for queries like
> host:xyz.* .

I'm not sure why that wouldn't work.  If the stored token is xyz.example.com, 
then xyz.* will certainly match it.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 01:34:05 2007
Return-Path: <java-user-return-30200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48651 invoked from network); 11 Sep 2007 01:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 01:34:04 -0000
Received: (qmail 14229 invoked by uid 500); 11 Sep 2007 01:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14012 invoked by uid 500); 11 Sep 2007 01:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14001 invoked by uid 99); 11 Sep 2007 01:33:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 18:33:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 01:33:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUud4-0005hT-A9
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 18:33:26 -0700
Message-ID: <12606295.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 18:33:26 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It's probably easier to add category, department, year as a part of query and
then requery to get the hits you need. 

M.K wrote:
> 
> Hi All,
> 
> I have a search form which has an input area for key search and also 
> three
> optional select boxs  *Catagory, Department and Year. *
>  My question is how can I filter the results if users select a category or
>  a department or a year or a combination of them.
> 
> *index *:
> 
> IndexWriter indexWriter =
> *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> *new*StandardAnalyzer(),true);
> 
> Document document = *new* Document();
> 
> document.add(Field.*Text*("text", docText));
> 
> document.add(Field.*UnIndexed*("department", depart));
> 
> document.add(Field.*UnIndexed*(
> "category", courseId));
> 
> document.add(Field.*UnIndexed*(
> "year", year));
> 
> indexWriter.addDocument(document);
> 
> indexWriter.close();
> 
> 
> 
> *search: *
> 
> *Searcher searcher = new IndexSearcher(API.getRootPath() +
> "/data/LUCENE/");
> Analyzer analyzer = new StandardAnalyzer();*
> 
> * Query query = QueryParser.parse(request.getParameter("query"), "text",
> analyzer);
>  Hits hits = searcher.search (query);*
> 
> I do not konw how implement a filter to the results of the search for
> catgory or year or department.
> 
> Thanks,
> 
> Massoud
> 
> 

-- 
View this message in context: http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 01:48:14 2007
Return-Path: <java-user-return-30201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55776 invoked from network); 11 Sep 2007 01:48:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 01:48:13 -0000
Received: (qmail 31273 invoked by uid 500); 11 Sep 2007 01:48:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31234 invoked by uid 500); 11 Sep 2007 01:48:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31223 invoked by uid 99); 11 Sep 2007 01:48:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 18:48:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 01:47:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUuqn-0005w9-5O
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 18:47:37 -0700
Message-ID: <12606415.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 18:47:37 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Query without Analyzer
In-Reply-To: <00ec01c7f3dc$cbc098a0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: test1@doramail.com
References: <00ec01c7f3dc$cbc098a0$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org


Alice,

You need to do the following:
- When you create a document, you need to add category id field using
something like
doc.add(new Field(=E2=80=9DcategoryId=E2=80=9D, categoryId, Field.Store.YES=
,
Field.Index.UN_TOKENIZED));




Alice-21 wrote:
>=20
> Hi folks!
>=20
> =20
>=20
> I'm using Lucene to provide search on my application.
>=20
> =20
>=20
> The final query is a BooleanQuery with many fields, there are fields wher=
e
> I'll look for the entered keyword and some others to restrict the search,
> as
> the id of a category.
>=20
> =20
>=20
> I read, and seems to be true, that when using TermQuery, it uses the same
> analyzer used when indexing.
>=20
> =20
>=20
> As, there are some fields (like category Id) that I don't want to use the
> analyzer, the result is not what I expect because the term was analyzed.
>=20
> =20
>=20
> My question is: is there any way to search for fields without using an
> analyzer?
>=20
> =20
>=20
> Thank you!
>=20
> =20
>=20
> =20
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Query-without-Analyzer-=
tf4417646.html#a12606415
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 02:13:58 2007
Return-Path: <java-user-return-30202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63809 invoked from network); 11 Sep 2007 02:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 02:13:56 -0000
Received: (qmail 51034 invoked by uid 500); 11 Sep 2007 02:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50992 invoked by uid 500); 11 Sep 2007 02:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50981 invoked by uid 99); 11 Sep 2007 02:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 19:13:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 02:13:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUvFg-0006XH-MK
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 19:13:20 -0700
Message-ID: <12606587.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 19:13:20 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance Questions
In-Reply-To: <12568500.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12568500.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


- Searcher itself doesn't cost much. The cost came from the construction of
TermsInfoReader from IndexReader
- This means you can construct a number of searchers based on different
combination of indices.
- If I were you, I would construct a number of indices based on the demand
of freshness.
    - Reopen indices that stale is not an open very often... using
IndexReader.isCurrent() to help you
    - Reopen indices that stale is ok less often say every 10-20 minutes
- Then when you want to search, you just need to construct an IndexSearcher
using MultiReader/ParallelReader of those indices above
- Make sure you close the stale indices that you already opened an updated
indices
- If that's not enough and using HEAD code won't make you fainted, you can
try HEAD code that has LUCENE-743 implemented.
- For frequently updated data, it is probably better to use database
especially if you don't need scoring and keyword analyzing capability since
it's pretty costly to reopen IndexReader every time the data has been
updated.
- IndexSearcher doesn't support refreshing as it is based on IndexReader to
do the work. The caching of terms is done inside
IndexReader/TermsInfoReader. So if you want to update IndexSearcher, you
need to reopen it with more updated version of IndexReader.
- To get the best performance, you should really query just the data you
need. 

moshe wrote:
> 
> I have a couple questions regarding performance of lucene. First off my
> environment:
> 
> Data
> 1-10M Documents
> 5 - 30 fields < 10B
> 1-3 Fields 1KB - 500KB
> 
> I have three types of queries:
> 
> Query 1 : 85% usage 
> 1-2  phrase terms i.e. +id:"651" +id2:"241"
> sorting by an arbitrary field normally the date
> 5-20 security terms
> 5k-1M results
> can never return stale data
> 
> Query 2:  13%
> 10 full wildcard terms i.e. *search*
> sorting is optional
> 0-200 results
> 20-200 security terms
> can return slightly stale data
> 
> Query 3: 2%
> 1-20 mixed terms
> sorting is optional
> 0-200 results
> 20-200 security terms
> can return slightly stale data
> 
> 1) Does re-opening an IndexSearcher flush all of the caches (filter and
> sort) ? 
> 
> 2) What is the overhead of opening an IndexSearcher? What does it depend
> on?
> 
> 3) What is the recommended approach for updating and refreshing the index
> where there is 1 update for every 5 queries? 
> 
> 4) Is query 1 better off done using a database as I would have to re-open
> the IndexSeacher every couple of queries?
> 
> 5) What would perform better Solr or Lucence? When is it better to use one
> or the other?
> 
> 6) What else should I look out for?
> 
> 7) Why is refreshing an IndexSearcher not supported? 
> 
> 
> Any help is greatly appreciated 
> Thanks
> Moshe 
> 
> 
>  
> 
> 

-- 
View this message in context: http://www.nabble.com/Performance-Questions-tf4405513.html#a12606587
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 03:38:00 2007
Return-Path: <java-user-return-30203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80712 invoked from network); 11 Sep 2007 03:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 03:37:59 -0000
Received: (qmail 1881 invoked by uid 500); 11 Sep 2007 03:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1841 invoked by uid 500); 11 Sep 2007 03:37:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1830 invoked by uid 99); 11 Sep 2007 03:37:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Sep 2007 20:37:47 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 03:37:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IUwZ1-00083u-E6
	for java-user@lucene.apache.org; Mon, 10 Sep 2007 20:37:23 -0700
Message-ID: <12607238.post@talk.nabble.com>
Date: Mon, 10 Sep 2007 20:37:23 -0700 (PDT)
From: AnkitSinghal <ankisinghal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing Host and IP Information in Lucene
In-Reply-To: <200709110914.25237.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ankisinghal@gmail.com
References: <12593257.post@talk.nabble.com> <200709110914.25237.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org


But i think the query like host:example* will not work in this case
Actually it was typo in my question. I want to search for above type of
query only.

Ankit


Daniel Noll-3 wrote:
> 
> On Monday 10 September 2007 23:53:06 AnkitSinghal wrote:
>> And if i make the field as UNTOKENIZED  i cannot search for queries like
>> host:xyz.* .
> 
> I'm not sure why that wouldn't work.  If the stored token is
> xyz.example.com, 
> then xyz.* will certainly match it.
> 
> Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Storing-Host-and-IP-Information-in-Lucene-tf4414865.html#a12607238
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 12:15:41 2007
Return-Path: <java-user-return-30204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60681 invoked from network); 11 Sep 2007 12:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 12:15:37 -0000
Received: (qmail 24053 invoked by uid 500); 11 Sep 2007 12:15:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24016 invoked by uid 500); 11 Sep 2007 12:15:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 16563 invoked by uid 99); 11 Sep 2007 12:10:41 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jlal@chambal.com designates 209.85.198.184 as permitted sender)
Message-ID: <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com>
Date: Tue, 11 Sep 2007 17:40:16 +0530
From: "Jawahar Lal" <jlal@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
In-Reply-To: <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8699_14610894.1189512616483"
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
	 <46E54256.9050807@garambrogne.net>
	 <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8699_14610894.1189512616483
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Can we made StandardAnalyzer not to cut the word on '-' by setting some
property or something like that ?


On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
>
>
> ---------- Forwarded message ----------
> From: Mathieu Lecarme <mathieu@garambrogne.net>
> Date: Sep 10, 2007 6:40 PM
> Subject: Re: Searching Exact Word from Index
> To: java-user@lucene.apache.org
>
> Laxmilal Menaria a =E9crit :
> >  Hello Everyone,
> >
> > I want to search 'abc-d' as exact keyword not 'abc d'. KeywordAnalyzer
> can
> > be used for this purpose. StandradAnalyzer create different tokens for
> > 'abc-d' as 'abc' and 'd'.
> > But I can not use this, becuase I am indexing the content of a text
> file. It
> > will search whole content as a single keyword.
> > But I want to search any word from the content.
> >
> > Please let me now how it is possible..
> >
> > Using : Java Lucene 2.2
> >
> >
> choose an analyzer wich doesn't cut word on "-" or build it yourself.
> You can use a basic one and add filter on it.
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> --
> Thanks,
> Laxmilal menaria
>
> http://www.chambal.net/

------=_Part_8699_14610894.1189512616483--

From java-user-return-30205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 13:17:07 2007
Return-Path: <java-user-return-30205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86767 invoked from network); 11 Sep 2007 13:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 13:17:06 -0000
Received: (qmail 95789 invoked by uid 500); 11 Sep 2007 13:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95566 invoked by uid 500); 11 Sep 2007 13:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95555 invoked by uid 99); 11 Sep 2007 13:16:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 06:16:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:16:50 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1040105nfc
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 06:16:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jeaEKLCRCll9K72oxJGndpnOgbsdph+ezVTG9pk7yQ0=;
        b=U7dNeck7H1GniHjJOME/w5duk3HFKmJ/G73KArcEUP3K+r0eC7YNa+DXu86uKtmjBIgHEzcd3+M5ZbSh3jfqKIm5ZfikuhoFadrR3U7COqHLxJ37DmAhO3zO66/b6InChMb/jruR5QuQIkRIz3WpnpAM76gumYDzOSxG381JD+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pJ6gCTv7UsU3pDlCHR0fhymzfk1yWDMgCCKAKJ7Nuhz1HnyPYBg/r2Z4lYd2NB0c1IxSS1dIW4C5Q+GVfQgX+6dWblg4cJNDku7VYL1w1rL7lwTJPj+Nc6dZnyyYYALapwxkPgmzbkqyd51y0m0ossfoZJCcCN9+ObxRVLmot2c=
Received: by 10.82.106.14 with SMTP id e14mr6394936buc.1189516588168;
        Tue, 11 Sep 2007 06:16:28 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 11 Sep 2007 06:16:27 -0700 (PDT)
Message-ID: <359a92830709110616h90aa5a9pe0cbbbc18e395f9f@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:16:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query without Analyzer
In-Reply-To: <00ec01c7f3dc$cbc098a0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11432_17151428.1189516587717"
References: <Acfz3MkdsS005aEqSGG1lWQHDnrk6g==>
	 <00ec01c7f3dc$cbc098a0$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11432_17151428.1189516587717
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, but it's probably not what you want to do. You can use a
PerFieldAnalyzerWrapper to analyze different fields with
different analyzers. So your category field could be both
indexed and analyzed with, say, WhitespaceAnalyzer or some
such.

Or, as testn suggests, store it UN_TOKENIZED.

Each has its tradeoffs....

Erick


On 9/10/07, Alice <alicelista@gmail.com> wrote:
>
> Hi folks!
>
>
>
> I'm using Lucene to provide search on my application.
>
>
>
> The final query is a BooleanQuery with many fields, there are fields where
> I'll look for the entered keyword and some others to restrict the search,
> as
> the id of a category.
>
>
>
> I read, and seems to be true, that when using TermQuery, it uses the same
> analyzer used when indexing.
>
>
>
> As, there are some fields (like category Id) that I don't want to use the
> analyzer, the result is not what I expect because the term was analyzed.
>
>
>
> My question is: is there any way to search for fields without using an
> analyzer?
>
>
>
> Thank you!
>
>
>
>
>
>

------=_Part_11432_17151428.1189516587717--

From java-user-return-30206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 13:19:48 2007
Return-Path: <java-user-return-30206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87607 invoked from network); 11 Sep 2007 13:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 13:19:48 -0000
Received: (qmail 2253 invoked by uid 500); 11 Sep 2007 13:19:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2224 invoked by uid 500); 11 Sep 2007 13:19:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2213 invoked by uid 99); 11 Sep 2007 13:19:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 06:19:35 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:19:30 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2037977muf
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 06:19:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/xTACXu9BNSf+VA+yFXftcCIiA0wgp1Dq96LXdVGJnw=;
        b=k0Z76JpsfR033bHDkmMMEbxAqeg0E099p37gBS7pPzuQlkgTOoVTo+OW1TKR7U2cLEDH7cguv09aipcmls7KkamkoRBD6H786rcvGNWBYsQsztB37Ti3MBnBa0ZiHBJZHgUNJhfbBfTvGr9W4VAk+HUX5bmqG6S36u+owT5wWok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pAIy59d+7f/lixF510uyMb0pWWaYQ1XIWqeg+fjeF1LWDDK+NlDOcpvWt/2W4q5NoXNRNA/oXXG6TIMMtEqQrpvxRRKiD36WZ+3eK+oWHEnB/bof7OlOS3T9SneitJPrdbS4XkYKYLZWDjbCQLBgbj7oGbAIKaTAxXnw0cvL5GU=
Received: by 10.82.175.17 with SMTP id x17mr6417440bue.1189516747894;
        Tue, 11 Sep 2007 06:19:07 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 11 Sep 2007 06:19:07 -0700 (PDT)
Message-ID: <359a92830709110619l5c98eec3te615b63b26cd143d@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:19:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing Host and IP Information in Lucene
In-Reply-To: <12607238.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11446_29173669.1189516747891"
References: <12593257.post@talk.nabble.com>
	 <200709110914.25237.daniel@nuix.com> <12607238.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11446_29173669.1189516747891
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What kind of analyzers are you using for this? Might it work for you
to put it in a special field and analyze and search with, say,
WhitespaceAnalyzer (or an analyzer that lowercases and breaks
on whitespace)?

PerFIeldAnalyzerWrapper is your friend.

Best
Erick

On 9/10/07, AnkitSinghal <ankisinghal@gmail.com> wrote:
>
>
> But i think the query like host:example* will not work in this case
> Actually it was typo in my question. I want to search for above type of
> query only.
>
> Ankit
>
>
> Daniel Noll-3 wrote:
> >
> > On Monday 10 September 2007 23:53:06 AnkitSinghal wrote:
> >> And if i make the field as UNTOKENIZED  i cannot search for queries
> like
> >> host:xyz.* .
> >
> > I'm not sure why that wouldn't work.  If the stored token is
> > xyz.example.com,
> > then xyz.* will certainly match it.
> >
> > Daniel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Storing-Host-and-IP-Information-in-Lucene-tf4414865.html#a12607238
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11446_29173669.1189516747891--

From java-user-return-30207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 13:20:29 2007
Return-Path: <java-user-return-30207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87765 invoked from network); 11 Sep 2007 13:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 13:20:27 -0000
Received: (qmail 4282 invoked by uid 500); 11 Sep 2007 13:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4030 invoked by uid 500); 11 Sep 2007 13:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4019 invoked by uid 99); 11 Sep 2007 13:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 06:20:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:20:07 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1513545fkz
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 06:19:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=hGla1dxSU5sNfzxoiOJWLOfyTk+LzMkJ6FO49nxBqJ0=;
        b=GM2GIPr5y641cH1QDbtfWonLMmQMrJ96kUAKe/KSQKXvQpYvmSIsUuvwi3AGJXTvetUi+Lt9J4FWkfxqADOlaTNn3fY4eRfX66R5173Sc9ffoyPX8my8aIgiyg+HnYwDbO1+J9uWIq3pUTKNVBp6iFYzrmVofY0JRPm2lWDe1JY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iK+qjhZtYaoGJfcuTZx1FVFX+G7ZCoQjJNfVnAG1Zc+3aUBPF5Nb9pAYalllyIuiaRH30/NISlyZmPWBem9hM7AOFac3byV9xyTNoIzJxHbZgB1F0cvx3LIjICnZtSZ+wI81NRVEhK4ayvIIy+wGyHn8DKqEwagKPMSa+7gg0DA=
Received: by 10.82.160.19 with SMTP id i19mr6374745bue.1189516786058;
        Tue, 11 Sep 2007 06:19:46 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 11 Sep 2007 06:19:46 -0700 (PDT)
Message-ID: <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:19:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
In-Reply-To: <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11448_21638419.1189516786050"
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
	 <46E54256.9050807@garambrogne.net>
	 <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com>
	 <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11448_21638419.1189516786050
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

No, but you can create your own custom analyzer that does whatever
you want it to.

Best
Erick

On 9/11/07, Jawahar Lal <jlal@chambal.com> wrote:
>
> Can we made StandardAnalyzer not to cut the word on '-' by setting some
> property or something like that ?
>
>
> On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> >
> >
> >
> > ---------- Forwarded message ----------
> > From: Mathieu Lecarme <mathieu@garambrogne.net>
> > Date: Sep 10, 2007 6:40 PM
> > Subject: Re: Searching Exact Word from Index
> > To: java-user@lucene.apache.org
> >
> > Laxmilal Menaria a =E9crit :
> > >  Hello Everyone,
> > >
> > > I want to search 'abc-d' as exact keyword not 'abc d'. KeywordAnalyze=
r
> > can
> > > be used for this purpose. StandradAnalyzer create different tokens fo=
r
> > > 'abc-d' as 'abc' and 'd'.
> > > But I can not use this, becuase I am indexing the content of a text
> > file. It
> > > will search whole content as a single keyword.
> > > But I want to search any word from the content.
> > >
> > > Please let me now how it is possible..
> > >
> > > Using : Java Lucene 2.2
> > >
> > >
> > choose an analyzer wich doesn't cut word on "-" or build it yourself.
> > You can use a basic one and add filter on it.
> >
> > M.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > --
> > Thanks,
> > Laxmilal menaria
> >
> > http://www.chambal.net/
>

------=_Part_11448_21638419.1189516786050--

From java-user-return-30208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 13:29:19 2007
Return-Path: <java-user-return-30208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95387 invoked from network); 11 Sep 2007 13:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 13:29:18 -0000
Received: (qmail 15741 invoked by uid 500); 11 Sep 2007 13:29:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15705 invoked by uid 500); 11 Sep 2007 13:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15693 invoked by uid 99); 11 Sep 2007 13:29:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 06:29:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:29:02 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Tue, 11 Sep 2007 15:28:33 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Tue, 11 Sep 2007 15:28:32 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: SV: SV: OutOfMemoryError tokenizing a boring text file
Date: Tue, 11 Sep 2007 15:28:12 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.62.0709031009460.15078@radix.cryptio.net>
Thread-Index: AcfuTzFI3+rglU7tRp+OUT7N9E7ERAGJ/urg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.1 required=8.5
	tests=AWL: -1.401,BAYES_50: 1.567,TOTAL_SCORE: 0.166
Message-Id: <20070911132911.88366724966@athena.apache.org>


> Fr=E5n: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20

> : Setting writer.setMaxFieldLength(5000) (default is 10000)
> : seems to eliminate the risk for an OutOfMemoryError,
>=20
> that's because it now gives up after parsing 5000 tokens.
>=20
> : To me, it appears that simply calling
> :    new Field("content", new InputStreamReader(in, "ISO-8859-1"))
> : on a plain text file causes Lucene to buffer it *all*.
>=20
> Looking at this purely from an outside in perspective: how could that
> be true?  If it was then why would calling setMaxFieldLength(5000)=20
> solve your problem -- limiting the number of tokens wouldn't=20
> matter if the=20
> problem occured becuase Lucene was buffering the entire reader.
>=20
>=20
> It definitely seems like there is some room for improvement=20
> here ... it=20
> sounds almost like mayber there is a [HAND WAVEY AIR QUOTES]=20
> memory/object=20
> leakish [/HAND WAVEY AIR QUOTES] situation where even after a=20
> Token is=20
> read off the TokenStream the Token isn't being GCed.
>=20
> Per: perhaps you could open a Jira issue and attach a unit test=20
> demonstrating the problem?  maybe something with an=20
> artificial Reader that=20
> just churns out a repeating sequence of characters forever?

Isolating the problem is exactly what I did. It took some time,
but the memory leak turned out to be somewhere else, not in
Lucene. (Memory leaks are slippery beasts!)

Just wanted to let y'all know.

Thanks and cheers,
Per




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 13:35:37 2007
Return-Path: <java-user-return-30209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98190 invoked from network); 11 Sep 2007 13:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 13:35:36 -0000
Received: (qmail 23945 invoked by uid 500); 11 Sep 2007 13:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23915 invoked by uid 500); 11 Sep 2007 13:35:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23904 invoked by uid 99); 11 Sep 2007 13:35:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 06:35:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jaejoo@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:35:20 +0000
Received: by nz-out-0506.google.com with SMTP id i28so611908nzi
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 06:35:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=G39Hb+VobSN4rckNyZw+/ronNdmI+NZSP4SCIW34J7w=;
        b=YwNQxXhjF/8Ya72wpBUz/2bPoC/Lb9MP0R/zOac3xFrfYvOnBswK81rDCFMbNye8xTU+UEza6ShXs9D9UTOgSEiguT8TV9Wl1WFp/FE1+6v+s587W8YCU0BvNClfahVy9AXIHb85vZO+biFpozZcELvzDK8IFPiDWb7eDA1BZek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WcHrPkYtTYhtbEF9P28UHjvF3Ns8rsJoUAR4jWquifsLDo+uPlsjd6B/CxQTTGcskgBvhMXv+BJle1tzT8uhqm7uLpa1MnsjZWrrBVmg0qmtpTskYN2TOSYZPPrR0mT0exoNPwUDPCo56J62PJNqIat/cF6B1YlnHkA5x2hMK5Y=
Received: by 10.143.42.3 with SMTP id u3mr294725wfj.1189517699315;
        Tue, 11 Sep 2007 06:34:59 -0700 (PDT)
Received: by 10.142.90.13 with HTTP; Tue, 11 Sep 2007 06:34:59 -0700 (PDT)
Message-ID: <efb141ed0709110634v50d542a5vf1c1b3d13f744729@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:34:59 -0400
From: "Jae Joo" <jaejoo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
In-Reply-To: <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20776_6460909.1189517699318"
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
	 <46E54256.9050807@garambrogne.net>
	 <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com>
	 <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com>
	 <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20776_6460909.1189517699318
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Use the string type for the field.

    <!-- The StrField type is not analyzed, but indexed/stored verbatim.
       - StrField and TextField support an optional compressThreshold which
       limits compression (if enabled in the derived fields) to values whic=
h
       exceed a certain size (in characters).
    -->
    <fieldType name=3D"string" class=3D"solr.StrField" sortMissingLast=3D"t=
rue"
omitNorms=3D"true"/>


Jae

On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> No, but you can create your own custom analyzer that does whatever
> you want it to.
>
> Best
> Erick
>
> On 9/11/07, Jawahar Lal <jlal@chambal.com> wrote:
> >
> > Can we made StandardAnalyzer not to cut the word on '-' by setting some
> > property or something like that ?
> >
> >
> > On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> > >
> > >
> > >
> > > ---------- Forwarded message ----------
> > > From: Mathieu Lecarme <mathieu@garambrogne.net>
> > > Date: Sep 10, 2007 6:40 PM
> > > Subject: Re: Searching Exact Word from Index
> > > To: java-user@lucene.apache.org
> > >
> > > Laxmilal Menaria a =E9crit :
> > > >  Hello Everyone,
> > > >
> > > > I want to search 'abc-d' as exact keyword not 'abc d'.
> KeywordAnalyzer
> > > can
> > > > be used for this purpose. StandradAnalyzer create different tokens
> for
> > > > 'abc-d' as 'abc' and 'd'.
> > > > But I can not use this, becuase I am indexing the content of a text
> > > file. It
> > > > will search whole content as a single keyword.
> > > > But I want to search any word from the content.
> > > >
> > > > Please let me now how it is possible..
> > > >
> > > > Using : Java Lucene 2.2
> > > >
> > > >
> > > choose an analyzer wich doesn't cut word on "-" or build it yourself.
> > > You can use a basic one and add filter on it.
> > >
> > > M.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > > --
> > > Thanks,
> > > Laxmilal menaria
> > >
> > > http://www.chambal.net/
> >
>

------=_Part_20776_6460909.1189517699318--

From java-user-return-30210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 14:17:49 2007
Return-Path: <java-user-return-30210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11711 invoked from network); 11 Sep 2007 14:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 14:17:48 -0000
Received: (qmail 20332 invoked by uid 500); 11 Sep 2007 14:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20286 invoked by uid 500); 11 Sep 2007 14:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20275 invoked by uid 99); 11 Sep 2007 14:17:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 07:17:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 14:19:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IV6YA-00088m-EH
	for java-user@lucene.apache.org; Tue, 11 Sep 2007 07:17:10 -0700
Message-ID: <12615745.post@talk.nabble.com>
Date: Tue, 11 Sep 2007 07:17:10 -0700 (PDT)
From: melix <cedric.champeau@lingway.com>
To: java-user@lucene.apache.org
Subject: Span queries and complex scoring
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cedric.champeau@lingway.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm working on an application which requires a complex scoring (based on
semantics analysis). The scoring must be highly configurable, and I've found
ways to do that, but I'm facing a discrete but annoying problem. All my
queries are, basically, complex span queries. I mean for example a
SpanNearQuery which embeds a SpanOrQuery which itself may embed another
SpanNearQuery etc...

I've followed the instructions at
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/package-summary.html#changingScoring
about changing scoring. The problem is that a document score is highly
dependent on *what* matched, and that the getSpans() method on spanqueries
does not provide that kind of information.

I created my own SpanQuery subclasses which override the createWeight method
so that the scorer used is my own too. It basically replaces the SpanScorer,
and should recurse the spans tree to compose a score based on the type of
subqueries (near, and, or, not) and what matched. The problem is that the
getspans() methods that exists in Lucene are either anonymous classes which
I cannot browse, or that I have not access to the required information.

Basically, in a SpanOrQuery, I am not able to find out what matched. Have
any of you faced that kind of problem, and found out an elegant way to do it
without having to completely rewrite each getSpans() method for all types of
queries (this is basically what was done in a previous version of the
application) ?

Thanks,

Cedric

-- 
View this message in context: http://www.nabble.com/Span-queries-and-complex-scoring-tf4422915.html#a12615745
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 14:46:53 2007
Return-Path: <java-user-return-30211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18954 invoked from network); 11 Sep 2007 14:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 14:46:52 -0000
Received: (qmail 65691 invoked by uid 500); 11 Sep 2007 14:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65640 invoked by uid 500); 11 Sep 2007 14:46:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65629 invoked by uid 99); 11 Sep 2007 14:46:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 07:46:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 14:48:09 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l8BEkBt6012170;
	Tue, 11 Sep 2007 10:46:12 -0400
Message-ID: <46E6AA0A.60405@syr.edu>
Date: Tue, 11 Sep 2007 10:45:30 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Durga.Tirunagari@Sun.COM
Subject: Re: Questions Lucene
References: <5BA38AB5-EB3B-46C3-A59B-402400BBC610@gmail.com> <E9A400D3-B60A-40C3-AABD-6B99F811B602@apache.org> <1C737A1D-820C-4B0D-B45C-AA20063E17F2@gmail.com> <46E5D9BA.40908@Sun.COM>
In-Reply-To: <46E5D9BA.40908@Sun.COM>
X-Enigmail-Version: 0.95.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Durga,

I have moved this discussion to the java-user list, since the java-dev
list is devoted to development of the Java Lucene library, and not to
questions about its capabilities.  My answers are inline below.

Durga.Tirunagari@Sun.COM wrote:
>        1) What are the various languages supported by Lucene.? Looks
> like its able to handle only English . We are trying to see if it works
> with Japanese / Chinese and other characters

Lucene's native encoding is the Unicode character set, which covers most
languages.  If you have a way to convert your documents' encoding into
Unicode, then Lucene can index them.  The short answer is that Lucene
can handle most languages.  However, precision and/or recall may suffer
for those languages for which Lucene does not provide any specific
resources.  Read on for the long answer.

In Lucene parlance, "analysis" is the process whereby raw text is
converted to index terms, a.k.a. tokens.  There are three areas of
analysis where Lucene does not fully support all languages:
tokenization, stopword lists, and stemming.  Most of the "analyzers"
(processing pipelines) in Lucene include these three components.

1. Tokenization: Lucene's StandardTokenizer[1] handles languages that
use spaces between words; however, since the Chinese and Japanese
orthographies do not employ word-separating characters,
StandardTokenizer produces single-character tokens for these languages,
rather than single-word tokens.  See the Lucene Sandbox for
CJKTokenizer[2], which instead produces overlapping bigram tokens.
Notably, however, there are no word-segmenting analyzers for Chinese or
Japanese in Lucene.  Contributions are welcome!

2. Stopword lists: Lucene's StandardAnalyzer employs the English
stopword list in StopAnalyzer[3] to remove stopwords.  There are several
analyzers in the Lucene Sandbox that include language-specific stopword
lists.[4]

3. Stemming: In the Lucene Sandbox, there are pre-compiled Snowball
stemmers for several Western languages[5].

>        2) After Lucene indexes a given data set, how does Lucene handle
> incremental / dymanic change in the data. In other words, our data keeps
> changing ; how does Lucene handle this changing data. Does it re-index every
> new file entering this data set ?. Or Does it do it index the data in
> increments ?

Lucene can be used to index incrementally.  It has no document update
functionality, however; one must first delete and then re-add a modified
document.  See my answer to your question #3, below, for more info.

>       3) How does Lucene handle deleted files from a particular data set
> ?. What we are concerned is that, does Lucene automatically figure out
> if a particular file is deleted from the data set ?. and it immediately
> removes the index to that particular file ?

Lucene can handle document deletion.  However, Lucene's index readers
are only aware of the state of an index at the point at which they were
opened -- in order to see the changes introduced by document deletion
(and addition), one must close and re-open the index reader.  This
process can be less than "immediate".

>       4) Please consider the following Scenario. When Lucene is
> given the following files to Index.
> 
>          a) Files under /xyz/abc ( Say x.txt, y.txt, a.txt, b.txt, c.txt
> etc.. )
>          b) Files under /def/ghi ( Say none.txt, dude.txt, hello.txt etc.. )
>            So after Lucene finished indexing these file under these two
> directories. And a subsequent search for say a "key word" in hello.txt
> is made
>          What does Lucene return; does it return i.e the fully qualified
> location of this file ? /def/ghi/hello.txt

Lucene returns an ordered list of matching documents.  Lucene documents
are each comprised of a user-specified set of "field"s.  If you wish to
remember the name of the file from which a document was constructed, you
can store the filename in a field, and then retrieve this field's
contents for a document returned by a search.

>            5) How does Lucene index a particular set of files. I.e
> *based* on key words ?. Based on sentences ? Based on what criterion ?

You decide :).  See the discussion above under your first question.

>       6) is Lucene multi-threaded ?. For example if Lucene is indexing a
> set of files in a given data set, and for example if there is a Huge
> file ( 2 GB file ). Does Lucene index this file in parts (i.e parallely
>            i.e in multi-threaded fashion ? or does it index this file
> sequentially

The Lucene API is not multi-threaded, but it can be used in a
multi-threaded application.  Unless otherwise noted in the API
documentation[6], Lucene methods should be thread-safe.

>      7) Also if a data set has multiple files, does Lucene process each
> file seperately in a different thread ? or does it do it sequentially

Again, Lucene can be used in a multi-threaded application, but it is not
itself multi-threaded.  Populating a single index from multiple threads
is a standard, supported use of the Lucene API.

>      8) Does lucene index only text files ?. We have few data bases is
> it possible for us to Index the data in these data bases ?

Extracting analyzable text from original sources is not part of Lucene's
functionality.  See the FAQ[7] for some information on extracting text
from different file types, and also on indexing databases[8].

>      9) Are there any performance Bench Marks for Lucene

Yes: <http://lucene.apache.org/java/docs/benchmarks.html>.  Also, search
the java-user and java-dev lists.

Steve


[1] StandardTokenizer and StandardAnalyzer:
<http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/>

[2] CJKTokenizer and CJKAnalyzer:
<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/cjk/>

[3] StopAnalyzer:
<http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/analysis/StopAnalyzer.java>

[4] Sandbox Analyzers:
<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/>

[5] Sandbox Snowball stemmers:
<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/snowball/src/java/net/sf/snowball/ext/>

[6] Lucene trunk API docs:
<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/index.html>

[7] Lucene FAQ: <http://wiki.apache.org/lucene-java/LuceneFAQ>

[8] How to index a database from the Lucene FAQ:
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-109358021acbfc89456e446740dc2bbf9049950f>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 15:51:33 2007
Return-Path: <java-user-return-30212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6309 invoked from network); 11 Sep 2007 15:51:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 15:51:32 -0000
Received: (qmail 33413 invoked by uid 500); 11 Sep 2007 15:51:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33383 invoked by uid 500); 11 Sep 2007 15:51:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33372 invoked by uid 99); 11 Sep 2007 15:51:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 08:51:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 15:51:17 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1200012rvb
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 08:50:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=znrFPBcyaL2tPA4+uxqayuJibWscrUYIRV4w9eYmsu8=;
        b=Bz3pDwP1Lc0wXXK6d9w9E+Ex0nA2rUN/JR+pgX7LuzYwkwsvcAV6d9hBh2ob/R80nSAmKTk10zDvW0eZ4gJHbkvceSk8XxxwpT4lpEQ1Q+BsNqHO9GMxsafkxS7Eq82wHpdjjkXwgoogUmmd/r7fVWeIKVQgUEDfs/D98bngMVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=tedpZYIZtQWxQsDzC7xt0YlAag2plrMiRI0u6kqLOzaOKQc1d1HfjW/OTP6+pBfZFxhM1Rd3U0wjAnol0FCumWHRP0ggszBeux35GtbZOjzZaEJ5klYf4KQD777exrOso5tuhpf5wlc96kbUKPWek84w/2ZlW8JaezxFYdipWqo=
Received: by 10.140.139.3 with SMTP id m3mr2410296rvd.1189525857328;
        Tue, 11 Sep 2007 08:50:57 -0700 (PDT)
Received: by 10.140.143.6 with HTTP; Tue, 11 Sep 2007 08:50:57 -0700 (PDT)
Message-ID: <bf1404350709110850o1fca4d19l3389aeafd1419763@mail.gmail.com>
Date: Tue, 11 Sep 2007 11:50:57 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get documents similar to other document ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6640_30634471.1189525857326"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6640_30634471.1189525857326
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi every body:

My question is if there is an api function of lucene to obtain similar
documents to other document comparing the term frequence vector of a field
???
I supposed a lot of people have asked this before but I haven't found the
answer neither with google nor api lucene.
This could be a very useful functionality of the lucene api. I am using
lucene version 1.9
I hope you can help me.
Greetings.
Ariel

------=_Part_6640_30634471.1189525857326--

From java-user-return-30213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 16:00:05 2007
Return-Path: <java-user-return-30213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20875 invoked from network); 11 Sep 2007 16:00:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 16:00:03 -0000
Received: (qmail 57777 invoked by uid 500); 11 Sep 2007 15:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57726 invoked by uid 500); 11 Sep 2007 15:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57715 invoked by uid 99); 11 Sep 2007 15:59:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 08:59:50 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kohan.massoud@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 15:59:46 +0000
Received: by py-out-1112.google.com with SMTP id d32so5326390pye
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 08:59:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qEZXoAVgqbJkuETv0XoDmRKzvPWJiW+XY1FJEsqaTRY=;
        b=Het05mYWuhlNqCE52qc692iCzaYXWEQO1Vz6jMKTLeqypuIhjITHwtTWQiIcN+U4ELLtssxHsAzflhm0KP/SpNB6Dg7dzwYK9qS2iDRJC+Nh/U8z5IZ8uiFuNFZMdUkEQcuSEPVr8L3U8loJOFil+7XP6IaTMWNe1DI9FlRDhU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z3vrRDa3ZgCbqP/kzS0c0/tBhyNiNQp1lGwFEvGn40e7yl6ef1pxMj0gt2D0ZP+watPvm2vpS6N63JnUJHpHJuZB4Sdw6gWAMcM+D4xha+A7Y9JYFNPRKXc2rEB15OGb1Fbe1/wej07I4Oqev6VwMS5SWkxrr6vGhPU2U9BW8YE=
Received: by 10.65.242.11 with SMTP id u11mr12374238qbr.1189526365159;
        Tue, 11 Sep 2007 08:59:25 -0700 (PDT)
Received: by 10.64.253.14 with HTTP; Tue, 11 Sep 2007 08:59:24 -0700 (PDT)
Message-ID: <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
Date: Tue, 11 Sep 2007 08:59:24 -0700
From: M.K <kohan.massoud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <12606295.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15358_17209988.1189526365154"
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
	 <12606295.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15358_17209988.1189526365154
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 I am not sure, I understant perfectly.
Is this the way you said:


document.add(Field.*UnStored*("text", docText));
document.add(Field.*Text*("category", category));
document.add(Field.*Text*("department",department));
document.add(Field.*Text*("year", year));

*search:*


String[] fields = { "text", "category","department","year" };

BooleanQuery bQuery = *new* BooleanQuery();

*for* (*int* i = 0; i < fields.length; i++) {

QueryParser parser = *new* QueryParser(fields[i],  analyzer);

Query q = parser.parse(query);

bQuery.add(q, *false*, *false*); // combine the queries, neither requiring
or prohibiting matches

}
  Hits hits = searcher.search(bQuery);


MK



On 9/10/07, testn <test1@doramail.com> wrote:
>
>
> It's probably easier to add category, department, year as a part of query
> and
> then requery to get the hits you need.
>
> M.K wrote:
> >
> > Hi All,
> >
> > I have a search form which has an input area for key search and also
> > three
> > optional select boxs  *Catagory, Department and Year. *
> >  My question is how can I filter the results if users select a category
> or
> >  a department or a year or a combination of them.
> >
> > *index *:
> >
> > IndexWriter indexWriter =
> > *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> > *new*StandardAnalyzer(),true);
> >
> > Document document = *new* Document();
> >
> > document.add(Field.*Text*("text", docText));
> >
> > document.add(Field.*UnIndexed*("department", depart));
> >
> > document.add(Field.*UnIndexed*(
> > "category", courseId));
> >
> > document.add(Field.*UnIndexed*(
> > "year", year));
> >
> > indexWriter.addDocument(document);
> >
> > indexWriter.close();
> >
> >
> >
> > *search: *
> >
> > *Searcher searcher = new IndexSearcher(API.getRootPath() +
> > "/data/LUCENE/");
> > Analyzer analyzer = new StandardAnalyzer();*
> >
> > * Query query = QueryParser.parse(request.getParameter("query"), "text",
> > analyzer);
> >  Hits hits = searcher.search (query);*
> >
> > I do not konw how implement a filter to the results of the search for
> > catgory or year or department.
> >
> > Thanks,
> >
> > Massoud
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15358_17209988.1189526365154--

From java-user-return-30214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 16:28:51 2007
Return-Path: <java-user-return-30214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52522 invoked from network); 11 Sep 2007 16:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 16:28:49 -0000
Received: (qmail 94291 invoked by uid 500); 11 Sep 2007 16:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94251 invoked by uid 500); 11 Sep 2007 16:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94240 invoked by uid 99); 11 Sep 2007 16:28:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 09:28:37 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 16:28:23 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1556822fkz
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 09:28:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PP1MLxbBxpnnT6UsA3xpRCHIIK7AXEUuXE2pADeH4VI=;
        b=bcIijeTVEwiwMiqWObiOxo+26KgzxXdFXHtLEMkI3/BP2goh1/7sebfnunA2teYMf/dFeMqdzHSf5mrXsAmmMOJub9aQL/pQZvHSotPi/su5YMElH+rDfH+2XVSV9pL4CA8HtpJ4NnU5m4C++ua/RrWjwkkcCaVyeQGeRyHvQlk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ssGE2bDYqSSUySJ33QkL8UkfBNVjxMZ09AwZtVJwKy6azNb+PzBZp86jX9c7x09ldJYOV0bSUhUDJkWDYvXgJlClnAYMd/SPO/NmhhOGi1ruwjRv8dVuK0ICxFDlN2Z+u0HE06hgbhGbVK0e9bRAImnOPTpDBdsV0u8NCeNCDbI=
Received: by 10.82.181.10 with SMTP id d10mr4005855buf.1189528081222;
        Tue, 11 Sep 2007 09:28:01 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 11 Sep 2007 09:28:01 -0700 (PDT)
Message-ID: <359a92830709110928g3140191q7249217d0efbec18@mail.gmail.com>
Date: Tue, 11 Sep 2007 12:28:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12601_7193846.1189528081223"
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
	 <12606295.post@talk.nabble.com>
	 <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12601_7193846.1189528081223
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What version of Lucene are you using? I don't think the form
b.add(query, false, false) is current.

Be that as it may, I'm not quite sure what you mean by
filter. If I'm reading your intent correctly, wouldn't requiring
each non-empty field accomplish what you want? Which would
be something like
b.add(query, BooleanClause.MUST);

Best
Erick

On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
>
> I am not sure, I understant perfectly.
> Is this the way you said:
>
>
> document.add(Field.*UnStored*("text", docText));
> document.add(Field.*Text*("category", category));
> document.add(Field.*Text*("department",department));
> document.add(Field.*Text*("year", year));
>
> *search:*
>
>
> String[] fields = { "text", "category","department","year" };
>
> BooleanQuery bQuery = *new* BooleanQuery();
>
> *for* (*int* i = 0; i < fields.length; i++) {
>
> QueryParser parser = *new* QueryParser(fields[i],  analyzer);
>
> Query q = parser.parse(query);
>
> bQuery.add(q, *false*, *false*); // combine the queries, neither requiring
> or prohibiting matches
>
> }
>   Hits hits = searcher.search(bQuery);
>
>
> MK
>
>
>
> On 9/10/07, testn <test1@doramail.com> wrote:
> >
> >
> > It's probably easier to add category, department, year as a part of
> query
> > and
> > then requery to get the hits you need.
> >
> > M.K wrote:
> > >
> > > Hi All,
> > >
> > > I have a search form which has an input area for key search and also
> > > three
> > > optional select boxs  *Catagory, Department and Year. *
> > >  My question is how can I filter the results if users select a
> category
> > or
> > >  a department or a year or a combination of them.
> > >
> > > *index *:
> > >
> > > IndexWriter indexWriter =
> > > *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> > > *new*StandardAnalyzer(),true);
> > >
> > > Document document = *new* Document();
> > >
> > > document.add(Field.*Text*("text", docText));
> > >
> > > document.add(Field.*UnIndexed*("department", depart));
> > >
> > > document.add(Field.*UnIndexed*(
> > > "category", courseId));
> > >
> > > document.add(Field.*UnIndexed*(
> > > "year", year));
> > >
> > > indexWriter.addDocument(document);
> > >
> > > indexWriter.close();
> > >
> > >
> > >
> > > *search: *
> > >
> > > *Searcher searcher = new IndexSearcher(API.getRootPath() +
> > > "/data/LUCENE/");
> > > Analyzer analyzer = new StandardAnalyzer();*
> > >
> > > * Query query = QueryParser.parse(request.getParameter("query"),
> "text",
> > > analyzer);
> > >  Hits hits = searcher.search (query);*
> > >
> > > I do not konw how implement a filter to the results of the search for
> > > catgory or year or department.
> > >
> > > Thanks,
> > >
> > > Massoud
> > >
> > >
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_12601_7193846.1189528081223--

From java-user-return-30215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 16:46:05 2007
Return-Path: <java-user-return-30215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80714 invoked from network); 11 Sep 2007 16:46:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 16:46:04 -0000
Received: (qmail 20596 invoked by uid 500); 11 Sep 2007 16:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20554 invoked by uid 500); 11 Sep 2007 16:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20543 invoked by uid 99); 11 Sep 2007 16:45:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 09:45:52 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kohan.massoud@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 16:45:48 +0000
Received: by nz-out-0506.google.com with SMTP id i28so654297nzi
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 09:45:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yh3Ri65X4YIFV9ACq/wJp++WQsshuNr1U9Qq/WnODx0=;
        b=HA6yy5mqKtZ3VUb25hj4x5PpJLIWkFzwggvLXL661ym7MKsXFktBbeNV7OEvj18YhMn4/WMt8b4ndLn9Winykxa2M07SoMX3w1wWe4RMBmQhxOJHYNF4oRZybqG0xNYo/bbr1jVmimNDakQ9BqIC3XN8aHN93aUarYVU9Lo9iwM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aEMVHQ+rm0tEzJwt12Mby803SnxQr/WmJZOGw3E0B+3smLT69XWbJwtHxZxKiYyzpzaEOoDp8BBscNcgg0uVzU+Sqf/pVimHqObyLZ2mXRwOCDEY7IQUclWvHrTXUdL7kAapPpwjfT9rnCbIHflJy89kxJX670DerzZ+zt62yyU=
Received: by 10.65.233.16 with SMTP id k16mr12441419qbr.1189529126197;
        Tue, 11 Sep 2007 09:45:26 -0700 (PDT)
Received: by 10.64.253.14 with HTTP; Tue, 11 Sep 2007 09:45:26 -0700 (PDT)
Message-ID: <60f15f3e0709110945h110c4d41wc997671c8abd0616@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:45:26 -0700
From: M.K <kohan.massoud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <359a92830709110928g3140191q7249217d0efbec18@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15700_15574239.1189529126194"
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
	 <12606295.post@talk.nabble.com>
	 <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
	 <359a92830709110928g3140191q7249217d0efbec18@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15700_15574239.1189529126194
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene 1.4.3

ignor the filter words.
My question was:
I have a search form which has an input area for key search and also three
optional select boxs *Catagory, Department and Year. *
How can I implement that?  Is it correct the way I wrote in my last email.
Thanks,
MK



On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> What version of Lucene are you using? I don't think the form
> b.add(query, false, false) is current.
>
> Be that as it may, I'm not quite sure what you mean by
> filter. If I'm reading your intent correctly, wouldn't requiring
> each non-empty field accomplish what you want? Which would
> be something like
> b.add(query, BooleanClause.MUST);
>
> Best
> Erick
>
> On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
> >
> > I am not sure, I understant perfectly.
> > Is this the way you said:
> >
> >
> > document.add(Field.*UnStored*("text", docText));
> > document.add(Field.*Text*("category", category));
> > document.add(Field.*Text*("department",department));
> > document.add(Field.*Text*("year", year));
> >
> > *search:*
> >
> >
> > String[] fields = { "text", "category","department","year" };
> >
> > BooleanQuery bQuery = *new* BooleanQuery();
> >
> > *for* (*int* i = 0; i < fields.length; i++) {
> >
> > QueryParser parser = *new* QueryParser(fields[i],  analyzer);
> >
> > Query q = parser.parse(query);
> >
> > bQuery.add(q, *false*, *false*); // combine the queries, neither
> requiring
> > or prohibiting matches
> >
> > }
> >   Hits hits = searcher.search(bQuery);
> >
> >
> > MK
> >
> >
> >
> > On 9/10/07, testn <test1@doramail.com> wrote:
> > >
> > >
> > > It's probably easier to add category, department, year as a part of
> > query
> > > and
> > > then requery to get the hits you need.
> > >
> > > M.K wrote:
> > > >
> > > > Hi All,
> > > >
> > > > I have a search form which has an input area for key search and also
> > > > three
> > > > optional select boxs  *Catagory, Department and Year. *
> > > >  My question is how can I filter the results if users select a
> > category
> > > or
> > > >  a department or a year or a combination of them.
> > > >
> > > > *index *:
> > > >
> > > > IndexWriter indexWriter =
> > > > *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> > > > *new*StandardAnalyzer(),true);
> > > >
> > > > Document document = *new* Document();
> > > >
> > > > document.add(Field.*Text*("text", docText));
> > > >
> > > > document.add(Field.*UnIndexed*("department", depart));
> > > >
> > > > document.add(Field.*UnIndexed*(
> > > > "category", courseId));
> > > >
> > > > document.add(Field.*UnIndexed*(
> > > > "year", year));
> > > >
> > > > indexWriter.addDocument(document);
> > > >
> > > > indexWriter.close();
> > > >
> > > >
> > > >
> > > > *search: *
> > > >
> > > > *Searcher searcher = new IndexSearcher(API.getRootPath() +
> > > > "/data/LUCENE/");
> > > > Analyzer analyzer = new StandardAnalyzer();*
> > > >
> > > > * Query query = QueryParser.parse(request.getParameter("query"),
> > "text",
> > > > analyzer);
> > > >  Hits hits = searcher.search (query);*
> > > >
> > > > I do not konw how implement a filter to the results of the search
> for
> > > > catgory or year or department.
> > > >
> > > > Thanks,
> > > >
> > > > Massoud
> > > >
> > > >
> > >
> > > --
> > > View this message in context:
> > >
> >
> http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
> > > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_15700_15574239.1189529126194--

From java-user-return-30216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 16:52:08 2007
Return-Path: <java-user-return-30216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90691 invoked from network); 11 Sep 2007 16:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 16:52:06 -0000
Received: (qmail 30964 invoked by uid 500); 11 Sep 2007 16:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30920 invoked by uid 500); 11 Sep 2007 16:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30909 invoked by uid 99); 11 Sep 2007 16:51:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 09:51:54 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 16:51:51 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2101722muf
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 09:51:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=hPZKlSfV1n0BgTV2BY+u/XdvZRenylMgEl7xIzgOnI0=;
        b=U8IRwfMq8qtIGCyxWXi0+mDi4NYhGS+vLWlJ6mQAv1irexzvUkx4dqQEaGJr3OuNkCezzhcSq6FSbkU3MJfgdLrUHxOUlPtTXj+mCsygWfjtD9qAK7zA2L1LRahKs1odfvNsGJ70KYCTLE1yXbylQlYmoiaGGRxAFH5yqhcs89U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q2fo+gE4ZAjT0rUh/cCmlZ0TOfhVlUI903DfxX9MS83xR8nVFF8wyS5yroZjGqXIwMBfLOmqS1aOwG7mi8REz/fwBUKGZhpRV09g08YI/YWGuLeXkG25t5/4KKNo2fpF0jREnKpNLkaLl+4YVYplOfosRqhL5dVNT0woCYp2z6Y=
Received: by 10.82.165.13 with SMTP id n13mr6619903bue.1189529488050;
        Tue, 11 Sep 2007 09:51:28 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 11 Sep 2007 09:51:27 -0700 (PDT)
Message-ID: <359a92830709110951y3f9c47es292ec86b4bc299bd@mail.gmail.com>
Date: Tue, 11 Sep 2007 12:51:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <60f15f3e0709110945h110c4d41wc997671c8abd0616@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12716_31392108.1189529487982"
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
	 <12606295.post@talk.nabble.com>
	 <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
	 <359a92830709110928g3140191q7249217d0efbec18@mail.gmail.com>
	 <60f15f3e0709110945h110c4d41wc997671c8abd0616@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12716_31392108.1189529487982
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it depends upon how you indexed things <G>....

Your previous post was along the right lines as
far as I can see though...

Erick

Assuming that you have

On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
>
> Lucene 1.4.3
>
> ignor the filter words.
> My question was:
> I have a search form which has an input area for key search and also three
> optional select boxs *Catagory, Department and Year. *
> How can I implement that?  Is it correct the way I wrote in my last email.
> Thanks,
> MK
>
>
>
> On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > What version of Lucene are you using? I don't think the form
> > b.add(query, false, false) is current.
> >
> > Be that as it may, I'm not quite sure what you mean by
> > filter. If I'm reading your intent correctly, wouldn't requiring
> > each non-empty field accomplish what you want? Which would
> > be something like
> > b.add(query, BooleanClause.MUST);
> >
> > Best
> > Erick
> >
> > On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
> > >
> > > I am not sure, I understant perfectly.
> > > Is this the way you said:
> > >
> > >
> > > document.add(Field.*UnStored*("text", docText));
> > > document.add(Field.*Text*("category", category));
> > > document.add(Field.*Text*("department",department));
> > > document.add(Field.*Text*("year", year));
> > >
> > > *search:*
> > >
> > >
> > > String[] fields = { "text", "category","department","year" };
> > >
> > > BooleanQuery bQuery = *new* BooleanQuery();
> > >
> > > *for* (*int* i = 0; i < fields.length; i++) {
> > >
> > > QueryParser parser = *new* QueryParser(fields[i],  analyzer);
> > >
> > > Query q = parser.parse(query);
> > >
> > > bQuery.add(q, *false*, *false*); // combine the queries, neither
> > requiring
> > > or prohibiting matches
> > >
> > > }
> > >   Hits hits = searcher.search(bQuery);
> > >
> > >
> > > MK
> > >
> > >
> > >
> > > On 9/10/07, testn <test1@doramail.com> wrote:
> > > >
> > > >
> > > > It's probably easier to add category, department, year as a part of
> > > query
> > > > and
> > > > then requery to get the hits you need.
> > > >
> > > > M.K wrote:
> > > > >
> > > > > Hi All,
> > > > >
> > > > > I have a search form which has an input area for key search and
> also
> > > > > three
> > > > > optional select boxs  *Catagory, Department and Year. *
> > > > >  My question is how can I filter the results if users select a
> > > category
> > > > or
> > > > >  a department or a year or a combination of them.
> > > > >
> > > > > *index *:
> > > > >
> > > > > IndexWriter indexWriter =
> > > > > *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> > > > > *new*StandardAnalyzer(),true);
> > > > >
> > > > > Document document = *new* Document();
> > > > >
> > > > > document.add(Field.*Text*("text", docText));
> > > > >
> > > > > document.add(Field.*UnIndexed*("department", depart));
> > > > >
> > > > > document.add(Field.*UnIndexed*(
> > > > > "category", courseId));
> > > > >
> > > > > document.add(Field.*UnIndexed*(
> > > > > "year", year));
> > > > >
> > > > > indexWriter.addDocument(document);
> > > > >
> > > > > indexWriter.close();
> > > > >
> > > > >
> > > > >
> > > > > *search: *
> > > > >
> > > > > *Searcher searcher = new IndexSearcher(API.getRootPath() +
> > > > > "/data/LUCENE/");
> > > > > Analyzer analyzer = new StandardAnalyzer();*
> > > > >
> > > > > * Query query = QueryParser.parse(request.getParameter("query"),
> > > "text",
> > > > > analyzer);
> > > > >  Hits hits = searcher.search (query);*
> > > > >
> > > > > I do not konw how implement a filter to the results of the search
> > for
> > > > > catgory or year or department.
> > > > >
> > > > > Thanks,
> > > > >
> > > > > Massoud
> > > > >
> > > > >
> > > >
> > > > --
> > > > View this message in context:
> > > >
> > >
> >
> http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
> > > > Sent from the Lucene - Java Users mailing list archive at Nabble.com
> .
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>

------=_Part_12716_31392108.1189529487982--

From java-user-return-30217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 16:55:07 2007
Return-Path: <java-user-return-30217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99212 invoked from network); 11 Sep 2007 16:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 16:55:05 -0000
Received: (qmail 38902 invoked by uid 500); 11 Sep 2007 16:54:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38861 invoked by uid 500); 11 Sep 2007 16:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38850 invoked by uid 99); 11 Sep 2007 16:54:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 09:54:53 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kohan.massoud@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 16:54:48 +0000
Received: by nz-out-0506.google.com with SMTP id i28so656204nzi
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 09:54:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Xh9RKjnb/KhcoTQeIqAJfKs1QRlBhE8aFRN65ySyY7s=;
        b=eHuGDHIppnQBVCqNUzqhNC/Be2a+CnkN4E+i2vd146A3gG3HGS3ivFK+5psOl9KX4kK+vjBuV69XbAMO8nx8TxIupOFVRMIo0AeqLOd7v9XyI4BM/uFMIaENNDKm54turkLPUymcbfxnPgwFZGA8bbUGV73spgtWkZeRSeC7lCs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kn79Zbs+kUTx32M+5zZdR7ZkP4khFxnEM2/GpFYMvQnpQMUOqw7JkmttcvosmlGxVCO3noR3BZsOqFpAsGsw7NE4oBml35xKlmL6ndChxtDaOL+bCJNW0TOyY8fOpM2Oix1qDnNqofy7mGvHOb89qviCab+hj3goTqINZDxiFRo=
Received: by 10.65.232.19 with SMTP id j19mr12416316qbr.1189529666718;
        Tue, 11 Sep 2007 09:54:26 -0700 (PDT)
Received: by 10.64.253.14 with HTTP; Tue, 11 Sep 2007 09:54:26 -0700 (PDT)
Message-ID: <60f15f3e0709110954s6783157fif4070296ba26cb93@mail.gmail.com>
Date: Tue, 11 Sep 2007 09:54:26 -0700
From: M.K <kohan.massoud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a filter to the search results
In-Reply-To: <359a92830709110951y3f9c47es292ec86b4bc299bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15759_21072427.1189529666717"
References: <60f15f3e0709101302h70d5fdc2oc97526146f0b853d@mail.gmail.com>
	 <12606295.post@talk.nabble.com>
	 <60f15f3e0709110859y3b134f34te32bafa5b4ffa58c@mail.gmail.com>
	 <359a92830709110928g3140191q7249217d0efbec18@mail.gmail.com>
	 <60f15f3e0709110945h110c4d41wc997671c8abd0616@mail.gmail.com>
	 <359a92830709110951y3f9c47es292ec86b4bc299bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15759_21072427.1189529666717
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick.
MK
On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, it depends upon how you indexed things <G>....
>
> Your previous post was along the right lines as
> far as I can see though...
>
> Erick
>
> Assuming that you have
>
> On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
> >
> > Lucene 1.4.3
> >
> > ignor the filter words.
> > My question was:
> > I have a search form which has an input area for key search and also
> three
> > optional select boxs *Catagory, Department and Year. *
> > How can I implement that?  Is it correct the way I wrote in my last
> email.
> > Thanks,
> > MK
> >
> >
> >
> > On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > What version of Lucene are you using? I don't think the form
> > > b.add(query, false, false) is current.
> > >
> > > Be that as it may, I'm not quite sure what you mean by
> > > filter. If I'm reading your intent correctly, wouldn't requiring
> > > each non-empty field accomplish what you want? Which would
> > > be something like
> > > b.add(query, BooleanClause.MUST);
> > >
> > > Best
> > > Erick
> > >
> > > On 9/11/07, M. K <kohan.massoud@gmail.com> wrote:
> > > >
> > > > I am not sure, I understant perfectly.
> > > > Is this the way you said:
> > > >
> > > >
> > > > document.add(Field.*UnStored*("text", docText));
> > > > document.add(Field.*Text*("category", category));
> > > > document.add(Field.*Text*("department",department));
> > > > document.add(Field.*Text*("year", year));
> > > >
> > > > *search:*
> > > >
> > > >
> > > > String[] fields = { "text", "category","department","year" };
> > > >
> > > > BooleanQuery bQuery = *new* BooleanQuery();
> > > >
> > > > *for* (*int* i = 0; i < fields.length; i++) {
> > > >
> > > > QueryParser parser = *new* QueryParser(fields[i],  analyzer);
> > > >
> > > > Query q = parser.parse(query);
> > > >
> > > > bQuery.add(q, *false*, *false*); // combine the queries, neither
> > > requiring
> > > > or prohibiting matches
> > > >
> > > > }
> > > >   Hits hits = searcher.search(bQuery);
> > > >
> > > >
> > > > MK
> > > >
> > > >
> > > >
> > > > On 9/10/07, testn <test1@doramail.com> wrote:
> > > > >
> > > > >
> > > > > It's probably easier to add category, department, year as a part
> of
> > > > query
> > > > > and
> > > > > then requery to get the hits you need.
> > > > >
> > > > > M.K wrote:
> > > > > >
> > > > > > Hi All,
> > > > > >
> > > > > > I have a search form which has an input area for key search and
> > also
> > > > > > three
> > > > > > optional select boxs  *Catagory, Department and Year. *
> > > > > >  My question is how can I filter the results if users select a
> > > > category
> > > > > or
> > > > > >  a department or a year or a combination of them.
> > > > > >
> > > > > > *index *:
> > > > > >
> > > > > > IndexWriter indexWriter =
> > > > > > *new* IndexWriter(API.*getRootPath*() + "\\data\\LUCENE" ,
> > > > > > *new*StandardAnalyzer(),true);
> > > > > >
> > > > > > Document document = *new* Document();
> > > > > >
> > > > > > document.add(Field.*Text*("text", docText));
> > > > > >
> > > > > > document.add(Field.*UnIndexed*("department", depart));
> > > > > >
> > > > > > document.add(Field.*UnIndexed*(
> > > > > > "category", courseId));
> > > > > >
> > > > > > document.add(Field.*UnIndexed*(
> > > > > > "year", year));
> > > > > >
> > > > > > indexWriter.addDocument(document);
> > > > > >
> > > > > > indexWriter.close();
> > > > > >
> > > > > >
> > > > > >
> > > > > > *search: *
> > > > > >
> > > > > > *Searcher searcher = new IndexSearcher(API.getRootPath() +
> > > > > > "/data/LUCENE/");
> > > > > > Analyzer analyzer = new StandardAnalyzer();*
> > > > > >
> > > > > > * Query query = QueryParser.parse(request.getParameter("query"),
> > > > "text",
> > > > > > analyzer);
> > > > > >  Hits hits = searcher.search (query);*
> > > > > >
> > > > > > I do not konw how implement a filter to the results of the
> search
> > > for
> > > > > > catgory or year or department.
> > > > > >
> > > > > > Thanks,
> > > > > >
> > > > > > Massoud
> > > > > >
> > > > > >
> > > > >
> > > > > --
> > > > > View this message in context:
> > > > >
> > > >
> > >
> >
> http://www.nabble.com/Implement-a-filter-to-the-search-results-tf4418068.html#a12606295
> > > > > Sent from the Lucene - Java Users mailing list archive at
> Nabble.com
> > .
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> >
>

------=_Part_15759_21072427.1189529666717--

From java-user-return-30218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 17:52:21 2007
Return-Path: <java-user-return-30218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58799 invoked from network); 11 Sep 2007 17:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 17:52:19 -0000
Received: (qmail 13130 invoked by uid 500); 11 Sep 2007 17:52:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13090 invoked by uid 500); 11 Sep 2007 17:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13079 invoked by uid 99); 11 Sep 2007 17:52:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 10:52:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 17:52:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 1C721FFDF3
	for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 10:51:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <bf1404350709110850o1fca4d19l3389aeafd1419763@mail.gmail.com>
References: <bf1404350709110850o1fca4d19l3389aeafd1419763@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8F32E5F8-DF9D-406C-9858-CBD8AEB27F40@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to get documents similar to other document ?
Date: Tue, 11 Sep 2007 13:51:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

See the MoreLikeThis functionality in the contrib package, also  
search this archive for MoreLikeThis.


On Sep 11, 2007, at 11:50 AM, Ariel wrote:

> Hi every body:
>
> My question is if there is an api function of lucene to obtain similar
> documents to other document comparing the term frequence vector of  
> a field
> ???
> I supposed a lot of people have asked this before but I haven't  
> found the
> answer neither with google nor api lucene.
> This could be a very useful functionality of the lucene api. I am  
> using
> lucene version 1.9
> I hope you can help me.
> Greetings.
> Ariel

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 17:53:32 2007
Return-Path: <java-user-return-30219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60411 invoked from network); 11 Sep 2007 17:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 17:53:31 -0000
Received: (qmail 17158 invoked by uid 500); 11 Sep 2007 17:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16745 invoked by uid 500); 11 Sep 2007 17:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16734 invoked by uid 99); 11 Sep 2007 17:53:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 10:53:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 17:54:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id B5F09B8575
	for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 10:52:21 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <efb141ed0709110634v50d542a5vf1c1b3d13f744729@mail.gmail.com>
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com> <46E54256.9050807@garambrogne.net> <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com> <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com> <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com> <efb141ed0709110634v50d542a5vf1c1b3d13f744729@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <87DC87D9-C81A-4A17-A219-8BEC62B8B711@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Searching Exact Word from Index
Date: Tue, 11 Sep 2007 13:52:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Note, this is a Solr construct and does not apply to a custom Lucene =20
application, even if the intent is correct.

On Sep 11, 2007, at 9:34 AM, Jae Joo wrote:

> Use the string type for the field.
>
>     <!-- The StrField type is not analyzed, but indexed/stored =20
> verbatim.
>        - StrField and TextField support an optional =20
> compressThreshold which
>        limits compression (if enabled in the derived fields) to =20
> values which
>        exceed a certain size (in characters).
>     -->
>     <fieldType name=3D"string" class=3D"solr.StrField" =20
> sortMissingLast=3D"true"
> omitNorms=3D"true"/>
>
>
> Jae
>
> On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> No, but you can create your own custom analyzer that does whatever
>> you want it to.
>>
>> Best
>> Erick
>>
>> On 9/11/07, Jawahar Lal <jlal@chambal.com> wrote:
>>>
>>> Can we made StandardAnalyzer not to cut the word on '-' by =20
>>> setting some
>>> property or something like that ?
>>>
>>>
>>> On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>>>>
>>>>
>>>>
>>>> ---------- Forwarded message ----------
>>>> From: Mathieu Lecarme <mathieu@garambrogne.net>
>>>> Date: Sep 10, 2007 6:40 PM
>>>> Subject: Re: Searching Exact Word from Index
>>>> To: java-user@lucene.apache.org
>>>>
>>>> Laxmilal Menaria a =E9crit :
>>>>>  Hello Everyone,
>>>>>
>>>>> I want to search 'abc-d' as exact keyword not 'abc d'.
>> KeywordAnalyzer
>>>> can
>>>>> be used for this purpose. StandradAnalyzer create different tokens
>> for
>>>>> 'abc-d' as 'abc' and 'd'.
>>>>> But I can not use this, becuase I am indexing the content of a =20
>>>>> text
>>>> file. It
>>>>> will search whole content as a single keyword.
>>>>> But I want to search any word from the content.
>>>>>
>>>>> Please let me now how it is possible..
>>>>>
>>>>> Using : Java Lucene 2.2
>>>>>
>>>>>
>>>> choose an analyzer wich doesn't cut word on "-" or build it =20
>>>> yourself.
>>>> You can use a basic one and add filter on it.
>>>>
>>>> M.
>>>>
>>>> -------------------------------------------------------------------=20=

>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> --
>>>> Thanks,
>>>> Laxmilal menaria
>>>>
>>>> http://www.chambal.net/
>>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 18:06:06 2007
Return-Path: <java-user-return-30220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68306 invoked from network); 11 Sep 2007 18:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 18:06:05 -0000
Received: (qmail 37220 invoked by uid 500); 11 Sep 2007 18:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37182 invoked by uid 500); 11 Sep 2007 18:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37171 invoked by uid 99); 11 Sep 2007 18:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 11:05:52 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 18:05:47 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id l8BI5Q22084283
	for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 20:05:26 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Span queries and complex scoring
Date: Tue, 11 Sep 2007 20:05:25 +0200
User-Agent: KMail/1.8.2
References: <12615745.post@talk.nabble.com>
In-Reply-To: <12615745.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709112005.25433.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Cedric,

In case your requirements allow this, try and use subclass of Spans
that has a score() method that returns a value that is used together
with the other span info to provide a score value to your own
SpanScorer at the top level.
This score value can summarize the influence of the individual
span scores of the subqueries.
For this you will need to change the whole span package, but
it is somewhat simpler than using a complete Scorer for each
SpanQuery in the query tree.

With a lot of nested SpanOrQueries, merging the Spans can become
a performance bottleneck. The current situation can be improved
by creating a specialized PriorityQueue for Spans, much like the
ScorerDocQueue that is used by DisjunctionSumScorer.
With this, it is possible to avoid SpanOrQuery by using term payloads
to compute the score value for the Spans of a SpanTermQuery, 
but iirc the payloads are not yet in the trunk.

Regards,
Paul Elschot


On Tuesday 11 September 2007 16:17, melix wrote:
> 
> Hi,
> 
> I'm working on an application which requires a complex scoring (based on
> semantics analysis). The scoring must be highly configurable, and I've found
> ways to do that, but I'm facing a discrete but annoying problem. All my
> queries are, basically, complex span queries. I mean for example a
> SpanNearQuery which embeds a SpanOrQuery which itself may embed another
> SpanNearQuery etc...
> 
> I've followed the instructions at
> 
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/package-summary.html#changingScoring
> about changing scoring. The problem is that a document score is highly
> dependent on *what* matched, and that the getSpans() method on spanqueries
> does not provide that kind of information.
> 
> I created my own SpanQuery subclasses which override the createWeight method
> so that the scorer used is my own too. It basically replaces the SpanScorer,
> and should recurse the spans tree to compose a score based on the type of
> subqueries (near, and, or, not) and what matched. The problem is that the
> getspans() methods that exists in Lucene are either anonymous classes which
> I cannot browse, or that I have not access to the required information.
> 
> Basically, in a SpanOrQuery, I am not able to find out what matched. Have
> any of you faced that kind of problem, and found out an elegant way to do it
> without having to completely rewrite each getSpans() method for all types of
> queries (this is basically what was done in a previous version of the
> application) ?
> 
> Thanks,
> 
> Cedric
> 
> -- 
> View this message in context: 
http://www.nabble.com/Span-queries-and-complex-scoring-tf4422915.html#a12615745
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 19:12:07 2007
Return-Path: <java-user-return-30221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86972 invoked from network); 11 Sep 2007 19:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 19:12:05 -0000
Received: (qmail 8014 invoked by uid 500); 11 Sep 2007 19:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7974 invoked by uid 500); 11 Sep 2007 19:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7958 invoked by uid 99); 11 Sep 2007 19:11:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 12:11:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 19:13:23 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1241684rvb
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 12:11:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=UlvOAotpjyv973x0HquOnvMwB5J40gGoaQGBePb7TLs=;
        b=fO+jxoIG/Gf+cOOLzKsfa4vgsX/0szknt4lrpFhZe0MH8MpF6Y8XtIUtZvum5ZRYo5Q8j57CVqxveYg18+SjpTRvzLAOXLnh1TVMA/S3A32zkKCt5J/mGJtWrMOpSZnfAfudBE4IuOWsBoM/UfoHYTVoKh5uJGqDiFHbyleU6Ws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ni8IgtlOjigXio4D/hJXOix9xKX9Af5BA3mL5ng3yAD5J1Wrkj0mBAGSgphQ2Z4RhzPFi7F2MhAWhyeWBXjFISb/1XMeAl+KXGYRocfZm8b6+tkZZKgdkl3yMdx/hmOkix76oZY3i8veHI5Otow+dhqlqdfL+0SOdlEZ2HmYvs4=
Received: by 10.141.20.7 with SMTP id x7mr2504985rvi.1189537886054;
        Tue, 11 Sep 2007 12:11:26 -0700 (PDT)
Received: by 10.140.143.6 with HTTP; Tue, 11 Sep 2007 12:11:26 -0700 (PDT)
Message-ID: <bf1404350709111211h1734097ev31d780127d607180@mail.gmail.com>
Date: Tue, 11 Sep 2007 15:11:26 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org, "Grant Ingersoll" <gsingers@apache.org>
Subject: Re: How to get documents similar to other document ?
In-Reply-To: <8F32E5F8-DF9D-406C-9858-CBD8AEB27F40@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7192_7655431.1189537886035"
References: <bf1404350709110850o1fca4d19l3389aeafd1419763@mail.gmail.com>
	 <8F32E5F8-DF9D-406C-9858-CBD8AEB27F40@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7192_7655431.1189537886035
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Excuse me, Could you give more details ?
Are you telling me that functionality exists ?
Which class should I use for this ?
I hope not being bothering you.
Greetings

On 9/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> See the MoreLikeThis functionality in the contrib package, also
> search this archive for MoreLikeThis.
>
>
> On Sep 11, 2007, at 11:50 AM, Ariel wrote:
>
> > Hi every body:
> >
> > My question is if there is an api function of lucene to obtain similar
> > documents to other document comparing the term frequence vector of
> > a field
> > ???
> > I supposed a lot of people have asked this before but I haven't
> > found the
> > answer neither with google nor api lucene.
> > This could be a very useful functionality of the lucene api. I am
> > using
> > lucene version 1.9
> > I hope you can help me.
> > Greetings.
> > Ariel
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7192_7655431.1189537886035--

From java-user-return-30222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 20:21:26 2007
Return-Path: <java-user-return-30222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15587 invoked from network); 11 Sep 2007 20:21:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 20:21:23 -0000
Received: (qmail 63026 invoked by uid 500); 11 Sep 2007 20:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62986 invoked by uid 500); 11 Sep 2007 20:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62975 invoked by uid 99); 11 Sep 2007 20:21:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 13:21:09 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 20:21:04 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1255260rvb
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 13:20:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=6RohNsXkUDLiWjgV8R8XnCUNNL/8VbnXlbrIg/XpAFs=;
        b=PRZOcSri5GjkOFsIVg3dwIwSB8eVYw81w2441HXRhkXpBKGvpygGxUAKVR1ibHEqo98EdYbcc5AolYtsXInRymsSZFEytG0/KaR8rZlALZQvfYvg8JNtMoPrvlBM16AI9L2Clc4FrZJYjedY6iBkQVH/muTzaSIN3xCVMFFRryE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=VxTikSc40owObv7Py+WbvpWSRnjEH+4Mm1QKjwCIjTA3kBsyuEPsviC/wue/9VYbz/H9mfuabeobFrUFex2Y1vVYlNOjPI5W9SvtMeQ2ZqpFfq2Yj3rkM6PgsEPi40JZE8+tSpHoPirZgV/jMBYWOGFQr6zMaVM7bR15+u2bmvU=
Received: by 10.141.70.18 with SMTP id x18mr185757rvk.1189542043721;
        Tue, 11 Sep 2007 13:20:43 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id l38sm9574074rvb.2007.09.11.13.20.39
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Sep 2007 13:20:40 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <12607238.post@talk.nabble.com>
References: <12593257.post@talk.nabble.com> <200709110914.25237.daniel@nuix.com> <12607238.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <059BB14F-7D92-4821-B5BA-DBFA97854393@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Storing Host and IP Information in Lucene
Date: Tue, 11 Sep 2007 13:20:34 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 10-Sep-07, at 8:37 PM, AnkitSinghal wrote:

>
> But i think the query like host:example* will not work in this case
> Actually it was typo in my question. I want to search for above  
> type of
> query only.

Hosts are best stored in reverse domain format:

xyz.example.com -> com.example.xyz

Then you can query docs from example.com via:
(com.example com.example.*)

If you want 'example' to be searchable as a term, then additionally  
store the host in a different, tokenized field.

-Mike

> Ankit
>
>
> Daniel Noll-3 wrote:
>>
>> On Monday 10 September 2007 23:53:06 AnkitSinghal wrote:
>>> And if i make the field as UNTOKENIZED  i cannot search for  
>>> queries like
>>> host:xyz.* .
>>
>> I'm not sure why that wouldn't work.  If the stored token is
>> xyz.example.com,
>> then xyz.* will certainly match it.
>>
>> Daniel
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Storing-Host- 
> and-IP-Information-in-Lucene-tf4414865.html#a12607238
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 11 22:57:18 2007
Return-Path: <java-user-return-30223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59380 invoked from network); 11 Sep 2007 22:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Sep 2007 22:57:17 -0000
Received: (qmail 98717 invoked by uid 500); 11 Sep 2007 22:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98682 invoked by uid 500); 11 Sep 2007 22:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98671 invoked by uid 99); 11 Sep 2007 22:57:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 15:57:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jaejoo@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Sep 2007 22:56:59 +0000
Received: by nz-out-0506.google.com with SMTP id i28so14348nzi
        for <java-user@lucene.apache.org>; Tue, 11 Sep 2007 15:56:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XKeI1ln75qTsPO1HeA8NTfIgqmf/iA8lzx1rX6JIA2U=;
        b=sPNsnVk3WUYVt2fetWZ+wA31QNVvpiYqPMxoooac7r5/ZaVLtPb1QN4v/jqHzGCvvCqYlTiT5H22hJpka17XhjeSE8yLQQ516EvQgNOJLsYskf2vYJM72HaX7ANLY9n12DTHZBRNJQUgP7Vsheqcsl6u8zOAqtatKlI6x4EeVsU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KGNGzno6G+P9keXUTDerBSuVLRWJP1EX4kgKxg/HWvlrB79w0iEbvG4B5STQxZ+Q+wYxD+c/eRNJoJ7zw5rSVOIWrCqbZJ7NzRVG3I200Lh9RyU4Sg15GAeZipNkoOou5BRUrcB1HmlAMGy9NfAn2/rpm+kAbe1tFt21xnMyzgQ=
Received: by 10.142.229.4 with SMTP id b4mr338844wfh.1189551397699;
        Tue, 11 Sep 2007 15:56:37 -0700 (PDT)
Received: by 10.142.90.13 with HTTP; Tue, 11 Sep 2007 15:56:37 -0700 (PDT)
Message-ID: <efb141ed0709111556v1f059fcel6cefc745a68cf5ae@mail.gmail.com>
Date: Tue, 11 Sep 2007 18:56:37 -0400
From: "Jae Joo" <jaejoo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
In-Reply-To: <87DC87D9-C81A-4A17-A219-8BEC62B8B711@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25219_32924940.1189551397704"
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com>
	 <46E54256.9050807@garambrogne.net>
	 <1324e4e20709110434nf1bfd28uc9e748ed3a8a3861@mail.gmail.com>
	 <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com>
	 <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com>
	 <efb141ed0709110634v50d542a5vf1c1b3d13f744729@mail.gmail.com>
	 <87DC87D9-C81A-4A17-A219-8BEC62B8B711@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25219_32924940.1189551397704
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Sorry. I was confused Solr and Lucene mailing list.

Jae

On 9/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Note, this is a Solr construct and does not apply to a custom Lucene
> application, even if the intent is correct.
>
> On Sep 11, 2007, at 9:34 AM, Jae Joo wrote:
>
> > Use the string type for the field.
> >
> >     <!-- The StrField type is not analyzed, but indexed/stored
> > verbatim.
> >        - StrField and TextField support an optional
> > compressThreshold which
> >        limits compression (if enabled in the derived fields) to
> > values which
> >        exceed a certain size (in characters).
> >     -->
> >     <fieldType name=3D"string" class=3D"solr.StrField"
> > sortMissingLast=3D"true"
> > omitNorms=3D"true"/>
> >
> >
> > Jae
> >
> > On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >>
> >> No, but you can create your own custom analyzer that does whatever
> >> you want it to.
> >>
> >> Best
> >> Erick
> >>
> >> On 9/11/07, Jawahar Lal <jlal@chambal.com> wrote:
> >>>
> >>> Can we made StandardAnalyzer not to cut the word on '-' by
> >>> setting some
> >>> property or something like that ?
> >>>
> >>>
> >>> On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> >>>>
> >>>>
> >>>>
> >>>> ---------- Forwarded message ----------
> >>>> From: Mathieu Lecarme <mathieu@garambrogne.net>
> >>>> Date: Sep 10, 2007 6:40 PM
> >>>> Subject: Re: Searching Exact Word from Index
> >>>> To: java-user@lucene.apache.org
> >>>>
> >>>> Laxmilal Menaria a =E9crit :
> >>>>>  Hello Everyone,
> >>>>>
> >>>>> I want to search 'abc-d' as exact keyword not 'abc d'.
> >> KeywordAnalyzer
> >>>> can
> >>>>> be used for this purpose. StandradAnalyzer create different tokens
> >> for
> >>>>> 'abc-d' as 'abc' and 'd'.
> >>>>> But I can not use this, becuase I am indexing the content of a
> >>>>> text
> >>>> file. It
> >>>>> will search whole content as a single keyword.
> >>>>> But I want to search any word from the content.
> >>>>>
> >>>>> Please let me now how it is possible..
> >>>>>
> >>>>> Using : Java Lucene 2.2
> >>>>>
> >>>>>
> >>>> choose an analyzer wich doesn't cut word on "-" or build it
> >>>> yourself.
> >>>> You can use a basic one and add filter on it.
> >>>>
> >>>> M.
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>> --
> >>>> Thanks,
> >>>> Laxmilal menaria
> >>>>
> >>>> http://www.chambal.net/
> >>>
> >>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25219_32924940.1189551397704--

From java-user-return-30224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 09:13:47 2007
Return-Path: <java-user-return-30224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57109 invoked from network); 12 Sep 2007 09:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 09:13:46 -0000
Received: (qmail 93957 invoked by uid 500); 12 Sep 2007 09:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93547 invoked by uid 500); 12 Sep 2007 09:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93536 invoked by uid 99); 12 Sep 2007 09:13:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 02:13:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 09:13:31 +0000
Received: by py-out-1112.google.com with SMTP id d32so464937pye
        for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 02:13:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Es4WuZccgFvoSHjnLv4u9h75SjFLuNbNJVjzBS66Cy4=;
        b=FoxVWA+L4HpUAxnLy1DMp75AJ9vR/QlPUcFqZrECBWugFIR6sRoEJcAQbEFITMeDq93H/Z4AVo2o5aYNDA2+iBGzA5rb8aZFX9MwQK7wr2BBhhL8pHazKcmEM9S260+HJr3rcJIkrQYjF23ogys+WIEpWzGZWeFaCa14LFWEedg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=maLtq1YGoXl/qqOWYjzQKHDMuMmPuDymQqyrJZ5oTLdmWE8S2IZBFAKsd30va+qYzZH2tvCPZ6zAoVBaJ+uDux0fMVLYczZ/vj5v84jCuQJHAv9f3CgVbhR+tUm7XrU5MaRofTAoz3/t225Q9KqHhE8bGaLXy0Yt1AwsCYSwJdQ=
Received: by 10.65.214.2 with SMTP id r2mr14209986qbq.1189588390586;
        Wed, 12 Sep 2007 02:13:10 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Wed, 12 Sep 2007 02:13:10 -0700 (PDT)
Message-ID: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
Date: Wed, 12 Sep 2007 12:43:10 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: regarding FieldSelector
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22851_771170.1189588390584"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22851_771170.1189588390584
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Can anyone explain what is the FieldSelector and the usage or benefits of
this structure? I read the javadocs but I can't get for what goal it is
provided in Lucene.

Thanks in advance

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_22851_771170.1189588390584--

From java-user-return-30225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 09:37:40 2007
Return-Path: <java-user-return-30225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63154 invoked from network); 12 Sep 2007 09:37:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 09:37:39 -0000
Received: (qmail 20853 invoked by uid 500); 12 Sep 2007 09:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20813 invoked by uid 500); 12 Sep 2007 09:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 36892 invoked by uid 99); 12 Sep 2007 08:35:29 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Wed, 12 Sep 2007 09:35:04 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Some questions on transactions
Message-ID: <20070912083504.GS23307@thegestalt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.16 (2007-06-09)
Sender: Simon Wistow <simon@bacchus.thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm looking at doing a system which is looks something like this - I 
have an IndexSearcher open with a on-disk index but all writes go to a 
RAM based IndexWriter. Periodically I do

	1. Close IndexSearcher
	2. Open new  IndexWriter in same location
	3. Use addIndexes with old RAM based IndexWriter
	4. Close new IndexWriter
      4a. Inform something that outstanding writes have been committed 
	5. Close and then open afresh old RAM based IndexWriter
	6. Open new IndexSearcher

A few questions which may showcase my ignorance.

1. Is this transactional? Is there at any point where the Index can be 
left in an undefined state? One of the reasons for doing this is that if 
a crash happens I can know exactly what documents have been 'committed' 
and which are still in memory and need to be reindexed. Also, since 
addIndexes is transactional there's should be no chance of the index 
getting corrupted which was a problem we'd had before.

2. This seems an awful lot like what IndexWriter does anyway - am I just 
reimplementing the wheel?

3. Because the IndexSearcher (or, more appropriately, its underlying 
IndexReader) can have deletes I need to close() it before merging and 
reopen it. I also need to reopen it to get all the new documents in the 
new merged index. Currently I'm doing something roughly like this



	private void reopenIndex() {
		index_closed = true;
		index.close();
		index = new IndexSearcher(path);
		index_close = false;
	}


and

	public Results search(String query) {
		// make sure the index is open
		while (index_closed) {
			sleep(1);
		}
		// now do the search
		...
	}

But I'm convinced there must be a better way than this. A quick 
first attempt of this


	private void reopenIndex() {
    	IndexSearcher old_index = index;
		index = new IndexSearcher(path);
		old_index.close();
    }

throws StaleIndex exceptions.

Any ideas?

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 10:24:25 2007
Return-Path: <java-user-return-30226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99145 invoked from network); 12 Sep 2007 10:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 10:24:24 -0000
Received: (qmail 814 invoked by uid 500); 12 Sep 2007 10:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 790 invoked by uid 500); 12 Sep 2007 10:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 779 invoked by uid 99); 12 Sep 2007 10:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 03:24:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 10:24:09 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 2E1462E2D5
	for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 06:23:46 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 12 Sep 2007 06:23:46 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 873B022372; Wed, 12 Sep 2007 06:23:45 -0400 (EDT)
Message-Id: <1189592625.15658.1210219797@webmail.messagingengine.com>
X-Sasl-Enc: vHmCiDa5ge+J0DkiU6gTNas8ZTEjX2WQm6Xt/9jeu1gf 1189592625
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <20070912083504.GS23307@thegestalt.org>
Subject: Re: Some questions on transactions
In-Reply-To: <20070912083504.GS23307@thegestalt.org>
Date: Wed, 12 Sep 2007 06:23:45 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Simon Wistow" <simon@thegestalt.org> wrote:
> I'm looking at doing a system which is looks something like this - I 
> have an IndexSearcher open with a on-disk index but all writes go to a 
> RAM based IndexWriter. Periodically I do
> 
> 	1. Close IndexSearcher
> 	2. Open new  IndexWriter in same location
> 	3. Use addIndexes with old RAM based IndexWriter
> 	4. Close new IndexWriter
>       4a. Inform something that outstanding writes have been committed 
> 	5. Close and then open afresh old RAM based IndexWriter
> 	6. Open new IndexSearcher
> 
> A few questions which may showcase my ignorance.
> 
> 1. Is this transactional? Is there at any point where the Index can be 
> left in an undefined state? One of the reasons for doing this is that if 
> a crash happens I can know exactly what documents have been 'committed' 
> and which are still in memory and need to be reindexed. Also, since 
> addIndexes is transactional there's should be no chance of the index 
> getting corrupted which was a problem we'd had before.

This should be transactional.

The one small caveat is on hitting an exception during addIndexes you
don't actually know whether all indices were in fact added or not.
It's possible they were all successfully added but that an exception
was then hit during the followon optimize().  Though, if you use
addIndexesNoOptimize I believe hitting an exception will always mean
no indices were added.

> 2. This seems an awful lot like what IndexWriter does anyway - am I just 
> reimplementing the wheel?

I think you could simply open IndexWriter with "autoCommit=false",
instead of using a RAM-based IndexWriter?  Then on closing this
IndexWriter, all changes are committed.  In the meantime, readers will
always see the index at its starting point, nomatter what you are
doing with the writer.  You can also call abort() to close the
IndexWriter & revert to the starting state of the index.

But, one difference with this approach is you'd have to use the writer
to do deletes on these index, and these deletes would not be visible
until the writer commits (is closed).  So if that's a problem you
should stick with your current approach.

> 3. Because the IndexSearcher (or, more appropriately, its underlying 
> IndexReader) can have deletes I need to close() it before merging and 
> reopen it. I also need to reopen it to get all the new documents in the 
> new merged index. Currently I'm doing something roughly like this
> 
> 
> 
> 	private void reopenIndex() {
> 		index_closed = true;
> 		index.close();
> 		index = new IndexSearcher(path);
> 		index_close = false;
> 	}
> 
> 
> and
> 
> 	public Results search(String query) {
> 		// make sure the index is open
> 		while (index_closed) {
> 			sleep(1);
> 		}
> 		// now do the search
> 		...
> 	}
> 
> But I'm convinced there must be a better way than this. A quick 
> first attempt of this
> 
> 
> 	private void reopenIndex() {
>     	IndexSearcher old_index = index;
> 		index = new IndexSearcher(path);
> 		old_index.close();
>     }
> 
> throws StaleIndex exceptions.

Is that a StaleReaderException?

The problem here is that your newly opened reader is stale because
when you close your old index, it flushes its deletes and advances the
index.  If you can do transactional deletes with IndexWriter (above)
then this problem should go away.  If you cannot, then I think you'd
have to re-open your new IndexReader once the old IndexReader has
been closed (and flushed its deletes) before trying to do any deletes
with the new IndexReader.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 10:50:13 2007
Return-Path: <java-user-return-30227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7489 invoked from network); 12 Sep 2007 10:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 10:50:13 -0000
Received: (qmail 31512 invoked by uid 500); 12 Sep 2007 10:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31232 invoked by uid 500); 12 Sep 2007 10:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31221 invoked by uid 99); 12 Sep 2007 10:50:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 03:50:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 10:51:32 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 22CA0129B30
	for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 03:49:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: regarding FieldSelector
Date: Wed, 12 Sep 2007 06:49:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mohammad,

The typical use cases are:
1. You have several small fields used in a results display and one or  
two large fields (i.e. the original document) and you don't want to  
pay the cost of loading the large fields for results display because  
most of them won't be chosen.  When a result is chosen, the lazily  
loaded field will be retrieved.

2. You only want to load certain fields, or the first field, or you  
just want to know the size of a field.

Basically, it gives you control over how fields are loaded from disk  
in Lucene.

See my ApacheCon Europe presentation http://cnlp.org/presentations/ 
slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on  
FieldSelector.

On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:

> Hi all,
>
> Can anyone explain what is the FieldSelector and the usage or  
> benefits of
> this structure? I read the javadocs but I can't get for what goal  
> it is
> provided in Lucene.
>
> Thanks in advance
>
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 11:41:10 2007
Return-Path: <java-user-return-30228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34520 invoked from network); 12 Sep 2007 11:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 11:41:09 -0000
Received: (qmail 2880 invoked by uid 500); 12 Sep 2007 11:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2850 invoked by uid 500); 12 Sep 2007 11:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2836 invoked by uid 99); 12 Sep 2007 11:40:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 04:40:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 11:40:52 +0000
Received: by nz-out-0506.google.com with SMTP id i28so82034nzi
        for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 04:40:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5i1/yMboBwN3pDP8mGFa4t7mtANOw3NVoFC8rPAlWrg=;
        b=nFXcv90sBb4q56MMvP6xgIxnm8+Mmt+H9RcbyC/foRFOl6qrXbv1xwGreDW7nswfIppWUq2n/OZ+TiqtfLT60nG4pyLtNB8FJZJLAiLAKRUB2RFsRWc2AGHKdB8RkxSC8GboYPgCQ9FapLxIOGl9oDKf7ZtcwVWKTF2IOsgw9+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VZ10H2icN4hSAYv0u+09/+um2X5f9oTUdeOppI8rgvTUzAr00AqRW+Ip1wj34Tieua8u2hQvDcmE+aaLhuD7tcePoW9WHa5kdoqAl4pAcuPejkq3EvczpMp3qyupfNi/O3mBqm1q5HNNRWvJwcfRTq9D2CpE3i9ZRQoVYOdXAvM=
Received: by 10.65.119.14 with SMTP id w14mr479608qbm.1189597230703;
        Wed, 12 Sep 2007 04:40:30 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Wed, 12 Sep 2007 04:40:30 -0700 (PDT)
Message-ID: <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
Date: Wed, 12 Sep 2007 15:10:30 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23320_20520644.1189597230325"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23320_20520644.1189597230325
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,
Really thanks for your nice document about advanced Lucene. it was very
useful for me.

as I understand, we can set some large fields to be lazily loading, now my
question is when it will be loaded? it make sense when we call
doc.get("field_name")
it will load from the index, Am I right?

in my application, I've provided a result set structure to navigate between
results and documents and provide a get(String fieldname) method just like
java.sql.ResultSet.getString() method, and also this result set implements
HitCollector in order to collect my own ID rather than Lucene's document id,
so I think I can set my field ID to be loaded always and the other fields to
be lazily loading, Does this improve the search process?

again, thank you very much indeed.


On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Hi Mohammad,
>
> The typical use cases are:
> 1. You have several small fields used in a results display and one or
> two large fields (i.e. the original document) and you don't want to
> pay the cost of loading the large fields for results display because
> most of them won't be chosen.  When a result is chosen, the lazily
> loaded field will be retrieved.
>
> 2. You only want to load certain fields, or the first field, or you
> just want to know the size of a field.
>
> Basically, it gives you control over how fields are loaded from disk
> in Lucene.
>
> See my ApacheCon Europe presentation http://cnlp.org/presentations/
> slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> FieldSelector.
>
> On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
>
> > Hi all,
> >
> > Can anyone explain what is the FieldSelector and the usage or
> > benefits of
> > this structure? I read the javadocs but I can't get for what goal
> > it is
> > provided in Lucene.
> >
> > Thanks in advance
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_23320_20520644.1189597230325--

From java-user-return-30229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 13:14:10 2007
Return-Path: <java-user-return-30229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73054 invoked from network); 12 Sep 2007 13:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 13:14:09 -0000
Received: (qmail 65927 invoked by uid 500); 12 Sep 2007 13:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65887 invoked by uid 500); 12 Sep 2007 13:13:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65875 invoked by uid 99); 12 Sep 2007 13:13:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 06:13:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.125.28.11] (HELO east.infosec.navy.mil) (150.125.28.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 13:13:53 +0000
Received: from krista (warnote.infosec.navy.mil [150.125.28.67])
	by east.infosec.navy.mil (8.13.6+Sun/8.13.6) with ESMTP id l8CDERjO013381
	for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 09:14:33 -0400 (EDT)
From: "Krista Leopold" <leopoldk@east.infosec.navy.mil>
To: <java-user@lucene.apache.org>
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com> <11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
In-Reply-To: <46B1D51A.3000702@mac.com>
Subject: PowerPoint Extraction
Date: Wed, 12 Sep 2007 09:13:16 -0400
Message-ID: <005e01c7f53e$b1640c90$142c25b0$@navy.mil>
X-Mailer: Microsoft Office Outlook 12.0
MIME-Version: 1.0
Thread-Index: AcfVBSqfc4MzUypLTgS/UH4RZsIrUwgOJ+fQ
Content-Language: en-us
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	boundary="----=_NextPart_000_0059_01C7F51D.1BA73C70";
	micalg=SHA1
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0059_01C7F51D.1BA73C70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello all,

I realize that I am asking a "just barely Lucene" question, but I am certain
someone on this list knows the answer to what I am on a quest for.  I want
to use the HSLF portion of apache's POI to do text extraction for my index,
but I am having a really hard time obtaining either the source files or a
jar?  I have clicked every link I can find that promises the source code,
downloaded POI 3.0 Final, and scratchpad and....  I'm still empty-handed!
If you have a link or a file or something that can help me, I will be
indebted to you.

Thanks so much for your consideration!
Krista

------=_NextPart_000_0059_01C7F51D.1BA73C70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIQjTCCA3Aw
ggJYoAMCAQICAQUwDQYJKoZIhvcNAQEFBQAwWzELMAkGA1UEBhMCVVMxGDAWBgNVBAoTD1UuUy4g
R292ZXJubWVudDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kxFjAUBgNVBAMTDURvRCBSb290
IENBIDIwHhcNMDQxMjEzMTUwMDEwWhcNMjkxMjA1MTUwMDEwWjBbMQswCQYDVQQGEwJVUzEYMBYG
A1UEChMPVS5TLiBHb3Zlcm5tZW50MQwwCgYDVQQLEwNEb0QxDDAKBgNVBAsTA1BLSTEWMBQGA1UE
AxMNRG9EIFJvb3QgQ0EgMjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMAswfaNO6z/
PzzWcb64dCIH7HBBFfyrQOMHqsHD2J/+2kw6vz/I2Ch7SzYBwKxFJcPSDgqPhRhkED0aE3Aqb47X
3I2Ts0EPOCHNravCPSoF01cRNw3NjFH5k+PMRkkhjhS0zcsUPjjNcjHuqxLyZeo0LlZd/+5jdctt
upE0/J7z9C0cvlDEQt9ZiP9qs/qobD3LVnFxBZa7n4DlgEVZZ0Gw68OtYKSAdQYXnA70Q+CZDhv7
f/WzzLKBgrH9MsG4vkGkZLVgOlpRMIzO3kEsGUdcSRBkuXSph0GvfW66wbihv2UxOgRn+bW7jpKK
AGO4seaMOF+D/1DVO6Jda7IQzGMCAwEAAaM/MD0wHQYDVR0OBBYEFEl0uwxeunr+AlTve6DGlcYJ
gHCWMAsGA1UdDwQEAwIBhjAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQCYkY0/
ici79cBpcyk7Nay6swh2PXAJkumERCEBfRR2G+5RbB2NFTctezFp9JpEuK9GzDT6I8sDJxnSgyF1
K+fgG5km3IRAleio0sz2WFxm7z9KlxCCHboKot1bBiudp2RO6y4BNaS0PxOtVeTVc6hpmxHxmPIx
Hm9A1Ph4n46RoG9wBJBmqgYrzuF6krV94eDRluehOi3MsZ0fBUTth5nTTRpwOcEEDOV+2fGv1yAO
8SJ6JaRzmcw/pAcnlqiile2CuRbTnguHwsHyiPVi32jfx7xpUe2xXNxUVCkPCTmarAPB2wxNrm8K
ehZJ8b+R0jiU0/aVLLdsyUK2jcqQjYXZMIIEOjCCAyKgAwIBAgIBDDANBgkqhkiG9w0BAQUFADBb
MQswCQYDVQQGEwJVUzEYMBYGA1UEChMPVS5TLiBHb3Zlcm5tZW50MQwwCgYDVQQLEwNEb0QxDDAK
BgNVBAsTA1BLSTEWMBQGA1UEAxMNRG9EIFJvb3QgQ0EgMjAeFw0wNjAxMDkxMzU0NDVaFw0xMjAx
MDgxMzU0NDVaMF0xCzAJBgNVBAYTAlVTMRgwFgYDVQQKEw9VLlMuIEdvdmVybm1lbnQxDDAKBgNV
BAsTA0RvRDEMMAoGA1UECxMDUEtJMRgwFgYDVQQDEw9ET0QgRU1BSUwgQ0EtMTIwgZ8wDQYJKoZI
hvcNAQEBBQADgY0AMIGJAoGBAOMipu6KoqTRAUZ7UkNWpnsU8LTqgVNUzytsai1+xI4quLLLY0ap
i8kp/wt5XfJO2crkWrNAQN3/RdQc1E5aiyLa8xJ/k7jpaYc3oqqsQxCZmGpaUfya61LlTbGZ9V33
2rxW5Y6dHWKSWiG3S9cWgmKV1YaVyvAckEB0Wl9GvG0DAgMBAAGjggGJMIIBhTAOBgNVHQ8BAf8E
BAMCAYYwHwYDVR0jBBgwFoAUSXS7DF66ev4CVO97oMaVxgmAcJYwHQYDVR0OBBYEFNXDKYygd9wc
KAhOd0//6RMRY0EzMAwGA1UdJAQFMAOAAQAwDwYDVR0TAQH/BAUwAwEB/zAwBgNVHSAEKTAnMAsG
CWCGSAFlAgELBTALBglghkgBZQIBCwkwCwYJYIZIAWUCAQsKMIHhBgNVHR8EgdkwgdYwOqA4oDaG
NGh0dHA6Ly9jcmwuY2hhbWIuZGlzYS5taWwvZ2V0Y3JsP0RvRCUyMFJvb3QlMjBDQSUyMDIwgZeg
gZSggZGGgY5sZGFwOi8vY3JsLmNoYW1iLmRpc2EubWlsL2NuJTNkRG9EJTIwUm9vdCUyMENBJTIw
MiUyY291JTNkUEtJJTJjb3UlM2REb0QlMmNvJTNkVS5TLiUyMEdvdmVybm1lbnQlMmNjJTNkVVMl
M2ZjZXJ0aWZpY2F0ZXJldm9jYXRpb25saXN0JTNiYmluYXJ5MA0GCSqGSIb3DQEBBQUAA4IBAQAq
Hwqddw7lm/rkkc1tqF2eng0WP83QoU9Ubb5rlu4hjV8TszREYoAQwt60DIccMEaZvni9YUhy6CZQ
m2aTHugiE/FL/y3r5Z8/iKUv3XtXtmCyBnxnC39dzqcbONSo5N7GPbKSlwf3BGrFWJdS4aiNtbIV
FEeAeDLDBTv6LECiSXLfZbv1rJZtGAXakoozRwPRSYhOxNc4C6QI9e6Qf2FK3pnB0vaG3ojd5IAH
1PhPpDworgMX3kYzSUNDrQaQJ6aPQbeeZuhvJOEturlhndxDfA4t8kN6VPNziqGfMtwpVx4uW59z
WoL0Yx3rHWMQzmZA5Cnf14reZ3q/nI3Qx7foMIIERDCCA62gAwIBAgIDGZYzMA0GCSqGSIb3DQEB
BQUAMF0xCzAJBgNVBAYTAlVTMRgwFgYDVQQKEw9VLlMuIEdvdmVybm1lbnQxDDAKBgNVBAsTA0Rv
RDEMMAoGA1UECxMDUEtJMRgwFgYDVQQDEw9ET0QgRU1BSUwgQ0EtMTIwHhcNMDYxMjIxMDAwMDAw
WhcNMDgwMjEwMjM1OTU5WjCBhTELMAkGA1UEBhMCVVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVu
dDEMMAoGA1UECxMDRG9EMQwwCgYDVQQLEwNQS0kxEzARBgNVBAsTCkNPTlRSQUNUT1IxKzApBgNV
BAMTIkxFT1BPTEQuS1JJU1RBLk1JQ0hFTExFLjEyOTQ3NTMzNDIwgZ8wDQYJKoZIhvcNAQEBBQAD
gY0AMIGJAoGBAJnuySrFoOPVLNPhIDDIhFdMSAON+cQasMNMpc6NXX2KB/LpROdB7j5Of9sDz6cO
aGBXwt/belPB7vOGO0LCddwrs2IvedyX2LWnV88DVcQijSIZCSxG8FKP//jGERtdL6l8fYrgymrW
zyeo1YabBSup+NlmrwbtKuWFlaR43WEPAgMBAAGjggHnMIIB4zAOBgNVHQ8BAf8EBAMCBSAwJAYD
VR0RBB0wG4EZbGVvcG9sZGtAaW5mb3NlYy5uYXZ5Lm1pbDAfBgNVHSMEGDAWgBTVwymMoHfcHCgI
TndP/+kTEWNBMzAdBgNVHQ4EFgQUMMZWqeCXyq2Wgsc9Ktb/1B3S1oUwFgYDVR0gBA8wDTALBglg
hkgBZQIBCwkwcwYIKwYBBQUHAQEEZzBlMEEGCCsGAQUFBzAChjVodHRwOi8vY3JsLmNoYW1iLmRp
c2EubWlsL2dldHNpZ24/RE9EJTIwRU1BSUwlMjBDQS0xMjAgBggrBgEFBQcwAYYUaHR0cDovL29j
c3AuZGlzYS5taWwwgd0GA1UdHwSB1TCB0jA6oDigNoY0aHR0cDovL2NybC5jaGFtYi5kaXNhLm1p
bC9nZXRjcmw/RE9EJTIwRU1BSUwlMjBDQS0xMjCBk6CBkKCBjYaBimxkYXA6Ly9jcmwuY2hhbWIu
ZGlzYS5taWwvY24lM2RET0QlMjBFTUFJTCUyMENBLTEyJTJjb3UlM2RQS0klMmNvdSUzZERvRCUy
Y28lM2RVLlMuJTIwR292ZXJubWVudCUyY2MlM2RVUz9jZXJ0aWZpY2F0ZXJldm9jYXRpb25saXN0
O2JpbmFyeTANBgkqhkiG9w0BAQUFAAOBgQDYP2bxsD6Qdg9LsdYcZFw15PqIGxEc3FBOL9AKaEZX
rVI3RhVeEUnW4m9++iQctYiFzPlIiBllweYlKUnVCIru/es8UEjMwRhbOkLApe1Bjgrk4vTDU4x3
RqcQaTZRbNgv6O4IgRbG+UZvXYcti9hfYSA3HetMx7MMV0myL8+xOjCCBI8wggP4oAMCAQICAxmW
KzANBgkqhkiG9w0BAQUFADBdMQswCQYDVQQGEwJVUzEYMBYGA1UEChMPVS5TLiBHb3Zlcm5tZW50
MQwwCgYDVQQLEwNEb0QxDDAKBgNVBAsTA1BLSTEYMBYGA1UEAxMPRE9EIEVNQUlMIENBLTEyMB4X
DTA2MTIyMTAwMDAwMFoXDTA4MDIxMDIzNTk1OVowgYUxCzAJBgNVBAYTAlVTMRgwFgYDVQQKEw9V
LlMuIEdvdmVybm1lbnQxDDAKBgNVBAsTA0RvRDEMMAoGA1UECxMDUEtJMRMwEQYDVQQLEwpDT05U
UkFDVE9SMSswKQYDVQQDEyJMRU9QT0xELktSSVNUQS5NSUNIRUxMRS4xMjk0NzUzMzQyMIGfMA0G
CSqGSIb3DQEBAQUAA4GNADCBiQKBgQDMmtrklym28RBR+hbQILRAj2aC+Ct7NdUUdyMJLi7eo/C/
akYThq08vHLSRUcwq5uH4YPGPyOnGWvnrCVc+TGZUwkTUjMMv/KqEPp8SyRwKlSCPWPytfVdbaDk
pLV35DXXkN42Khb9vglPD1YROIKiarfRMlnz/85vfr1lkRMtzQIDAQABo4ICMjCCAi4wDgYDVR0P
AQH/BAQDAgbAMB8GA1UdIwQYMBaAFNXDKYygd9wcKAhOd0//6RMRY0EzMB0GA1UdDgQWBBTV7hQb
rPrbdNhC07rFliXmV/5llzAWBgNVHSAEDzANMAsGCWCGSAFlAgELCTBzBggrBgEFBQcBAQRnMGUw
QQYIKwYBBQUHMAKGNWh0dHA6Ly9jcmwuY2hhbWIuZGlzYS5taWwvZ2V0c2lnbj9ET0QlMjBFTUFJ
TCUyMENBLTEyMCAGCCsGAQUFBzABhhRodHRwOi8vb2NzcC5kaXNhLm1pbDCB3QYDVR0fBIHVMIHS
MDqgOKA2hjRodHRwOi8vY3JsLmNoYW1iLmRpc2EubWlsL2dldGNybD9ET0QlMjBFTUFJTCUyMENB
LTEyMIGToIGQoIGNhoGKbGRhcDovL2NybC5jaGFtYi5kaXNhLm1pbC9jbiUzZERPRCUyMEVNQUlM
JTIwQ0EtMTIlMmNvdSUzZFBLSSUyY291JTNkRG9EJTJjbyUzZFUuUy4lMjBHb3Zlcm5tZW50JTJj
YyUzZFVTP2NlcnRpZmljYXRlcmV2b2NhdGlvbmxpc3Q7YmluYXJ5MCkGA1UdJQQiMCAGCisGAQQB
gjcUAgIGCCsGAQUFBwMEBggrBgEFBQcDAjBEBgNVHREEPTA7gRlsZW9wb2xka0BpbmZvc2VjLm5h
dnkubWlsoB4GCisGAQQBgjcUAgOgEAwOMTI5NDc1MzM0MkBtaWwwDQYJKoZIhvcNAQEFBQADgYEA
rBP95NJG9l5CQTDSfBJPQlNVpgcmPs6BrnFI/Zg3qN4YPMjhDLDJXB5EYJbdAwUmMBq/CtncucEY
xYxPYBl+GM4Jp5YayWL7gsNmirTa2FrTSF0MCMmEHh1YNlIno0MV2GWT5nLOgiVTBaQbLGN4qmIA
lpxkAuLdGdVd/iH55m4xggKxMIICrQIBATBkMF0xCzAJBgNVBAYTAlVTMRgwFgYDVQQKEw9VLlMu
IEdvdmVybm1lbnQxDDAKBgNVBAsTA0RvRDEMMAoGA1UECxMDUEtJMRgwFgYDVQQDEw9ET0QgRU1B
SUwgQ0EtMTICAxmWKzAJBgUrDgMCGgUAoIIBozAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwG
CSqGSIb3DQEJBTEPFw0wNzA5MTIxMzEyNTdaMCMGCSqGSIb3DQEJBDEWBBRXjtRb1MxaLUEXRUm9
J47hsE/kezBYBgkqhkiG9w0BCQ8xSzBJMAoGCCqGSIb3DQMHMA4GCCqGSIb3DQMCAgIAgDAHBgUr
DgMCBzANBggqhkiG9w0DAgIBKDAHBgUrDgMCGjAKBggqhkiG9w0CBTBzBgkrBgEEAYI3EAQxZjBk
MF0xCzAJBgNVBAYTAlVTMRgwFgYDVQQKEw9VLlMuIEdvdmVybm1lbnQxDDAKBgNVBAsTA0RvRDEM
MAoGA1UECxMDUEtJMRgwFgYDVQQDEw9ET0QgRU1BSUwgQ0EtMTICAxmWMzB1BgsqhkiG9w0BCRAC
CzFmoGQwXTELMAkGA1UEBhMCVVMxGDAWBgNVBAoTD1UuUy4gR292ZXJubWVudDEMMAoGA1UECxMD
RG9EMQwwCgYDVQQLEwNQS0kxGDAWBgNVBAMTD0RPRCBFTUFJTCBDQS0xMgIDGZYzMA0GCSqGSIb3
DQEBAQUABIGAp1sXRngTcelksBbgKsgIqFiBDjDFsoRti3pyKMUk+VLf8YM2lzbtZ4WEEvDik6Dw
TpdA1YKZB2lx4Md63b4RNP3bpLwQdSIs0W9f/13k8rqXPeaKF3TFtGxxq2EF+3/N1TvAfcFqf2hL
DJYil9SHgxgrNddKN8AxMvTwTo759hAAAAAAAAA=

------=_NextPart_000_0059_01C7F51D.1BA73C70--



From java-user-return-30230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 13:54:36 2007
Return-Path: <java-user-return-30230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95651 invoked from network); 12 Sep 2007 13:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 13:54:35 -0000
Received: (qmail 41760 invoked by uid 500); 12 Sep 2007 13:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41730 invoked by uid 500); 12 Sep 2007 13:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41719 invoked by uid 99); 12 Sep 2007 13:54:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 06:54:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 13:54:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so184725fkz
        for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 06:53:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1b+esF/Z0yP1WLzdmcEjXLO5teptOUDUqhLjWNDU7lA=;
        b=a9TJgg6CW77pwy+nnuPNi9Y28s8jCJ5n4VQ6HQTsLMUrMXeA4aH7PR1YfxSg4zhBPKDktMD+JZRt2K7scmiy8mHZWIYDlklqqR7nd1EwOGViOVGMGtGvs7iyF4WJXbs4un2B13Fwkaru6lY+asILCDo+Ptoyg+Q2cEWT11ZkSyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cmOksM6YLWb3MXWCNtJXEjE8Sjs62wumv9l9IyP/t8/QAy7HFGZDmha42kBM5FvGMN3ykpRxF9FY0oUPTtcgugcqywIHmZXYjVHXYsrb3KxZCLffXihzq/Ue3YzuIQL4lw/Y6q5GV1DZ5H6svSXHFwTo8KEbH/FW6eAxMMjfzTU=
Received: by 10.82.146.14 with SMTP id t14mr2523118bud.1189605235244;
        Wed, 12 Sep 2007 06:53:55 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 12 Sep 2007 06:53:55 -0700 (PDT)
Message-ID: <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
Date: Wed, 12 Sep 2007 09:53:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16349_3646739.1189605235135"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16349_3646739.1189605235135
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it depends on what "improve the search process" means
in your context <G>..

But I had a case similar to yours that I wrote up in the Wiki where
my search times improved about 10X by using lazy loading. You
might want to read that entry here...

http://wiki.apache.org/lucene-java/FieldSelectorPerformance

Note the peculiar characteristics of my data set, I really suspect
that a 10x improvement in retrieval speed is atypical...

As for when lazily-loaded fields actually get loaded, I didn't really
have to explore it very fully, but a short experiment should do it
for you.....

Best
Erick

On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi Grant,
> Really thanks for your nice document about advanced Lucene. it was very
> useful for me.
>
> as I understand, we can set some large fields to be lazily loading, now my
> question is when it will be loaded? it make sense when we call
> doc.get("field_name")
> it will load from the index, Am I right?
>
> in my application, I've provided a result set structure to navigate
> between
> results and documents and provide a get(String fieldname) method just like
> java.sql.ResultSet.getString() method, and also this result set implements
> HitCollector in order to collect my own ID rather than Lucene's document
> id,
> so I think I can set my field ID to be loaded always and the other fields
> to
> be lazily loading, Does this improve the search process?
>
> again, thank you very much indeed.
>
>
> On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > Hi Mohammad,
> >
> > The typical use cases are:
> > 1. You have several small fields used in a results display and one or
> > two large fields (i.e. the original document) and you don't want to
> > pay the cost of loading the large fields for results display because
> > most of them won't be chosen.  When a result is chosen, the lazily
> > loaded field will be retrieved.
> >
> > 2. You only want to load certain fields, or the first field, or you
> > just want to know the size of a field.
> >
> > Basically, it gives you control over how fields are loaded from disk
> > in Lucene.
> >
> > See my ApacheCon Europe presentation http://cnlp.org/presentations/
> > slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> > FieldSelector.
> >
> > On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> >
> > > Hi all,
> > >
> > > Can anyone explain what is the FieldSelector and the usage or
> > > benefits of
> > > this structure? I read the javadocs but I can't get for what goal
> > > it is
> > > provided in Lucene.
> > >
> > > Thanks in advance
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_16349_3646739.1189605235135--

From java-user-return-30231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 14:02:49 2007
Return-Path: <java-user-return-30231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2339 invoked from network); 12 Sep 2007 14:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 14:02:47 -0000
Received: (qmail 85082 invoked by uid 500); 12 Sep 2007 14:02:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85033 invoked by uid 500); 12 Sep 2007 14:02:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84873 invoked by uid 99); 12 Sep 2007 14:02:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 07:02:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 14:01:59 +0000
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.63)
	(envelope-from <nick@torchbox.com>)
	id 1IVSmf-0002V0-3Z
	for java-user@lucene.apache.org; Wed, 12 Sep 2007 15:01:37 +0100
Date: Wed, 12 Sep 2007 15:04:22 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: PowerPoint Extraction
In-Reply-To: <005e01c7f53e$b1640c90$142c25b0$@navy.mil>
Message-ID: <Pine.LNX.4.64.0709121501370.4180@localhost.localdomain>
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
 <11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
 <005e01c7f53e$b1640c90$142c25b0$@navy.mil>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -103.3 (---------------------------------------------------)
Organization: Torchbox Ltd, Registered Company #3983354, Unit 9, Southill Business Park, OX7 3EW, UK
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 12 Sep 2007, Krista Leopold wrote:
> I realize that I am asking a "just barely Lucene" question, but I am 
> certain someone on this list knows the answer to what I am on a quest 
> for.  I want to use the HSLF portion of apache's POI to do text 
> extraction for my index, but I am having a really hard time obtaining 
> either the source files or a jar?

Go to http://poi.apache.org/

Follow the download link from the left hand menu to 
http://www.apache.org/dyn/closer.cgi/poi/ , and pick which mirror you want 
to use

You'll probably want a release rather than dev, then pick between source 
(src) and binary (bin). Download in your prefered archive format

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 20:44:55 2007
Return-Path: <java-user-return-30232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16767 invoked from network); 12 Sep 2007 20:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 20:44:54 -0000
Received: (qmail 82712 invoked by uid 500); 12 Sep 2007 20:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82642 invoked by uid 500); 12 Sep 2007 20:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82630 invoked by uid 99); 12 Sep 2007 20:44:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 13:44:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 20:44:40 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 19AF171C00B; Wed, 12 Sep 2007 13:44:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 16A6971C006;
	Wed, 12 Sep 2007 13:44:20 -0700 (PDT)
Date: Wed, 12 Sep 2007 13:44:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
cc: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to get documents similar to other document ?
In-Reply-To: <bf1404350709111211h1734097ev31d780127d607180@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0709121338560.8527@radix.cryptio.net>
References: <bf1404350709110850o1fca4d19l3389aeafd1419763@mail.gmail.com> 
 <8F32E5F8-DF9D-406C-9858-CBD8AEB27F40@apache.org>
 <bf1404350709111211h1734097ev31d780127d607180@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Excuse me, Could you give more details ?
: Are you telling me that functionality exists ?
: Which class should I use for this ?

"MoreListThis" is a class name ... it is in a "contrib" (which means it is 
not inlcuded in the main lucene jar, but it can be found by looking in the 
"contrib" directory of lucene releases.  The Lucene FAQ has a question 
titled "How do I find similar documents?" which talks specificly about 
where to find this class in various releases of Lucene (because it was 
moved)...

http://wiki.apache.org/lucene-java/LuceneFAQ#head-75e29a52d06d81692a606366cc79f280146d5e9a

when googling for "MoreLikeThis" the top two hits are a blog article on 
using it, and a link to the javadocs.  explicilty searching the mailing 
list archives give you lots more great info.

: > See the MoreLikeThis functionality in the contrib package, also
: > search this archive for MoreLikeThis.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 12 21:07:37 2007
Return-Path: <java-user-return-30233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23269 invoked from network); 12 Sep 2007 21:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Sep 2007 21:07:36 -0000
Received: (qmail 15662 invoked by uid 500); 12 Sep 2007 21:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15314 invoked by uid 500); 12 Sep 2007 21:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15303 invoked by uid 99); 12 Sep 2007 21:07:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 14:07:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Sep 2007 21:07:20 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 2048B2711D
	for <java-user@lucene.apache.org>; Wed, 12 Sep 2007 17:06:59 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 12 Sep 2007 17:06:59 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 410F110283; Wed, 12 Sep 2007 17:06:59 -0400 (EDT)
Message-Id: <1189631219.740.1210334963@webmail.messagingengine.com>
X-Sasl-Enc: IOsEUMER5YKLvymFefAzUYAfSLD+iZWNN9Cbk5f2lFGH 1189631219
From: "Dan Luria" <dan@dotdan.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
Subject: Tokenization question
Reply-To: dan@dotdan.com
Date: Wed, 12 Sep 2007 17:06:59 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

If I have a tokenized unstored field in a document, and I want to
transfer the document to another index, is it possible to carry of the
tokenization with terms?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 07:26:12 2007
Return-Path: <java-user-return-30234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35468 invoked from network); 13 Sep 2007 07:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 07:26:11 -0000
Received: (qmail 81372 invoked by uid 500); 13 Sep 2007 07:25:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81330 invoked by uid 500); 13 Sep 2007 07:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81319 invoked by uid 99); 13 Sep 2007 07:25:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 00:25:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:25:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVj4v-0005PE-Tz
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 00:25:33 -0700
Message-ID: <12650012.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 00:25:33 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12595489.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


HI testn,
             1.I optimize the Large Indexes of size 10 GB using Luke.it
optimize all the content into a single CFS file and it generates
segments.gen and segments_8 file when i search the item it shows an error
that segments file is not there.could you help me in this 

testn wrote:
> 
> 1. You can close the searcher once you're done. If you want to reopen the
> index, you can close and reopen only the updated 3 readers and keep the 2
> old indexreaders and reuse it. It should reduce the time to reopen it.
> 2. Make sure that you optimize it every once in a while
> 3. You might consider separating indices in separated storage and use
> ParallelReader
> 
> 
> 
> Sebastin wrote:
>> 
>> The problem in my pplication are as follows:
>>                  1.I am not able to see the updated records in my index
>> store because i instantiate 
>> IndexReader and IndexSearcher class once that is in the first
>> search.further searches use the same IndexReaders(5 Directories) and
>> IndexSearcher with different queries.
>> 
>>                 2.My search is very very slow First 2 Directories of size
>> 10 GB each which are having old index records and no update in that
>> remaining 3 Diretories are updated every second.
>> 
>>                 3.i am Indexing 20 million records per day so the Index
>> store gets growing and it makes search very very slower.
>>  
>>                4.I am using searcherOne class as the global application
>> helper class ,with the scope as APPLICATION it consists of one
>> IndexReader and IndexSearcher get set method which will hold the
>> IndexReader and IndexSearcher object after the First Search.it is used
>> for all other searches.
>> 
>>               5.I am using Lucene 2.2.0 version, in a WEB Application
>> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i am
>> not using any sort in my query.for a single query upto the maximum it
>> fetches 600 records from the index store(5 direcories)    
>>                 
>> 
>> hossman wrote:
>>> 
>>> 
>>> : I set IndexSearcher as the application Object after the first search.
>>> 	...
>>> : how can i reconstruct the new IndexSearcher for every hour to see the
>>> : updated records .
>>> 
>>> i'm confused ... my understanding based on the comments you made below 
>>> (in an earlier message) was that you already *were* constructing a new  
>>> IndexSearcher once an hour -- but every time you do that, your memory 
>>> usage grows, and and that sometimes you got OOM Errors.
>>> 
>>> if that's not what you said, then i think you need to explain, in
>>> detail, 
>>> in one message, exactly what your problem is.  And don't assume we 
>>> understand anything -- tell us *EVERYTHING* (like, for example, what the 
>>> word "crore" means, how "searcherOne" is implemented, and the answer to 
>>> the specfic question i asked in my last message: does your application, 
>>> contain anywhere in it, any code that will close anything
>>> (IndexSearchers 
>>> or IndexReaders) ?
>>> 
>>> 
>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to 6
>>> crore.
>>> : > for
>>> : > : every second i am updating my Index. i instantiate IndexSearcher
>>> object
>>> : > one
>>> : > : time for all the searches. for an hour can i see the updated
>>> records in
>>> : > the
>>> : > : indexstore by reinstantiating IndexSearcher object.but the problem
>>> when
>>> : > i
>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is there
>>> any
>>> 
>>> 
>>> : > IndexSearcher are you explicitly closing both the old IndexSearcher
>>> as 
>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>> 
>>> 
>>> 
>>> 
>>> -Hoss
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12650012
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 08:50:51 2007
Return-Path: <java-user-return-30235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69344 invoked from network); 13 Sep 2007 08:50:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 08:50:50 -0000
Received: (qmail 92210 invoked by uid 500); 13 Sep 2007 08:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91701 invoked by uid 500); 13 Sep 2007 08:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91690 invoked by uid 99); 13 Sep 2007 08:50:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 01:50:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 08:50:32 +0000
Received: by py-out-1112.google.com with SMTP id d32so1666682pye
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 01:50:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=K2oqjT6DfYHT/2zeokHQXDR1x7ZIxWWhvwn1gLGEceU=;
        b=orNOK/zX2cBxIwvATpCzRAiPznSlfl5IiADMXTXg3G5cOcu/Wg61ga+K/nlVxGorv+5ilOu9gJjsXS3pJyeMqLqKfxBJWcMQqZaR4BQvp1zIiBllxtjb3zT7PcwqagbRkB0PcBmAzyPiBPiYeascKvnhcybqe09Af3XhFjPTe5c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cbNOaSePERjFJcuu4RdfXWgW2R3njJbvc476K+Zw1tRveb26T9+NAfytyJBqIr9FefFTJkjh7zYH7bKnMaG0xU7TqFnkQLXERleP12RJ7AITULp6pDNUz2em/Y/09RLxxT37Qq25UqGP+xfFWJpKVOH+Y1LeGk6lBcMZ6C8nkLg=
Received: by 10.65.138.4 with SMTP id q4mr1191256qbn.1189673410637;
        Thu, 13 Sep 2007 01:50:10 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Thu, 13 Sep 2007 01:50:10 -0700 (PDT)
Message-ID: <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
Date: Thu, 13 Sep 2007 12:20:10 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29266_28969775.1189673410630"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29266_28969775.1189673410630
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks
as I saw the documents, we can only use this great field selector in
IndexReader.document() method the problem is I have a Searcher in my result
set structure and when the client calls getString("a_field_name") at that
time I invoke the searcher.doc(current_doc_id).get("a_field_name),
I already collected the result IDs. so in my case, I can't use
FieldSelector.

Do I have to revise the way of retrieving documents in my code?



On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, it depends on what "improve the search process" means
> in your context <G>..
>
> But I had a case similar to yours that I wrote up in the Wiki where
> my search times improved about 10X by using lazy loading. You
> might want to read that entry here...
>
> http://wiki.apache.org/lucene-java/FieldSelectorPerformance
>
> Note the peculiar characteristics of my data set, I really suspect
> that a 10x improvement in retrieval speed is atypical...
>
> As for when lazily-loaded fields actually get loaded, I didn't really
> have to explore it very fully, but a short experiment should do it
> for you.....
>
> Best
> Erick
>
> On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hi Grant,
> > Really thanks for your nice document about advanced Lucene. it was very
> > useful for me.
> >
> > as I understand, we can set some large fields to be lazily loading, now
> my
> > question is when it will be loaded? it make sense when we call
> > doc.get("field_name")
> > it will load from the index, Am I right?
> >
> > in my application, I've provided a result set structure to navigate
> > between
> > results and documents and provide a get(String fieldname) method just
> like
> > java.sql.ResultSet.getString() method, and also this result set
> implements
> > HitCollector in order to collect my own ID rather than Lucene's document
> > id,
> > so I think I can set my field ID to be loaded always and the other
> fields
> > to
> > be lazily loading, Does this improve the search process?
> >
> > again, thank you very much indeed.
> >
> >
> > On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > >
> > > Hi Mohammad,
> > >
> > > The typical use cases are:
> > > 1. You have several small fields used in a results display and one or
> > > two large fields (i.e. the original document) and you don't want to
> > > pay the cost of loading the large fields for results display because
> > > most of them won't be chosen.  When a result is chosen, the lazily
> > > loaded field will be retrieved.
> > >
> > > 2. You only want to load certain fields, or the first field, or you
> > > just want to know the size of a field.
> > >
> > > Basically, it gives you control over how fields are loaded from disk
> > > in Lucene.
> > >
> > > See my ApacheCon Europe presentation http://cnlp.org/presentations/
> > > slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> > > FieldSelector.
> > >
> > > On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> > >
> > > > Hi all,
> > > >
> > > > Can anyone explain what is the FieldSelector and the usage or
> > > > benefits of
> > > > this structure? I read the javadocs but I can't get for what goal
> > > > it is
> > > > provided in Lucene.
> > > >
> > > > Thanks in advance
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > http://lucene.grantingersoll.com
> > >
> > > Lucene Helpful Hints:
> > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_29266_28969775.1189673410630--

From java-user-return-30236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 11:08:28 2007
Return-Path: <java-user-return-30236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19688 invoked from network); 13 Sep 2007 11:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 11:08:26 -0000
Received: (qmail 75154 invoked by uid 500); 13 Sep 2007 11:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75123 invoked by uid 500); 13 Sep 2007 11:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75112 invoked by uid 99); 13 Sep 2007 11:08:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 04:08:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 11:09:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVmY1-0002aA-Bz
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 04:07:49 -0700
Message-ID: <12652765.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 04:07:49 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: OutOfMemoryError: allocLargeArray
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I got this intermittent stacktrace 3 times in a month from using Lucene with
JRockIt. Has anyone ever seen this in Lucene 2.2?

java.lang.OutOfMemoryError: allocLargeArray
        at
org.apache.lucene.util.PriorityQueue.initialize(PriorityQueue.java:36)
        at
org.apache.lucene.index.SegmentMergeQueue.<init>(SegmentMergeQueue.java:25)
        at
org.apache.lucene.index.MultiTermEnum.<init>(MultiReader.java:280)
        at org.apache.lucene.index.MultiReader.terms(MultiReader.java:208)
        at
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:275)
        at
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
        at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
        at
org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
        at
org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLuceneIndexWriter.java:44)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.addDocumentsInIndex(DefaultDatabaseIndexer.java:274
)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(DefaultDatabaseIndexer.java:306)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDatabaseIndexer.java:354)
-- 
View this message in context: http://www.nabble.com/OutOfMemoryError%3A-allocLargeArray-tf4435037.html#a12652765
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 11:13:30 2007
Return-Path: <java-user-return-30237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20563 invoked from network); 13 Sep 2007 11:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 11:13:29 -0000
Received: (qmail 79171 invoked by uid 500); 13 Sep 2007 11:13:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79133 invoked by uid 500); 13 Sep 2007 11:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79122 invoked by uid 99); 13 Sep 2007 11:13:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 04:13:15 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 11:13:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVmcs-0002hi-OV
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 04:12:50 -0700
Message-ID: <12652816.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 04:12:50 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12650012.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


What is the error message? Probably Mike, Erick or Yonik can help you better
on this since I'm no one in index area.

Sebastin wrote:
> 
> HI testn,
>              1.I optimize the Large Indexes of size 10 GB using Luke.it
> optimize all the content into a single CFS file and it generates
> segments.gen and segments_8 file when i search the item it shows an error
> that segments file is not there.could you help me in this 
> 
> testn wrote:
>> 
>> 1. You can close the searcher once you're done. If you want to reopen the
>> index, you can close and reopen only the updated 3 readers and keep the 2
>> old indexreaders and reuse it. It should reduce the time to reopen it.
>> 2. Make sure that you optimize it every once in a while
>> 3. You might consider separating indices in separated storage and use
>> ParallelReader
>> 
>> 
>> 
>> Sebastin wrote:
>>> 
>>> The problem in my pplication are as follows:
>>>                  1.I am not able to see the updated records in my index
>>> store because i instantiate 
>>> IndexReader and IndexSearcher class once that is in the first
>>> search.further searches use the same IndexReaders(5 Directories) and
>>> IndexSearcher with different queries.
>>> 
>>>                 2.My search is very very slow First 2 Directories of
>>> size 10 GB each which are having old index records and no update in that
>>> remaining 3 Diretories are updated every second.
>>> 
>>>                 3.i am Indexing 20 million records per day so the Index
>>> store gets growing and it makes search very very slower.
>>>  
>>>                4.I am using searcherOne class as the global application
>>> helper class ,with the scope as APPLICATION it consists of one
>>> IndexReader and IndexSearcher get set method which will hold the
>>> IndexReader and IndexSearcher object after the First Search.it is used
>>> for all other searches.
>>> 
>>>               5.I am using Lucene 2.2.0 version, in a WEB Application
>>> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i
>>> am not using any sort in my query.for a single query upto the maximum it
>>> fetches 600 records from the index store(5 direcories)    
>>>                 
>>> 
>>> hossman wrote:
>>>> 
>>>> 
>>>> : I set IndexSearcher as the application Object after the first search.
>>>> 	...
>>>> : how can i reconstruct the new IndexSearcher for every hour to see the
>>>> : updated records .
>>>> 
>>>> i'm confused ... my understanding based on the comments you made below 
>>>> (in an earlier message) was that you already *were* constructing a new  
>>>> IndexSearcher once an hour -- but every time you do that, your memory 
>>>> usage grows, and and that sometimes you got OOM Errors.
>>>> 
>>>> if that's not what you said, then i think you need to explain, in
>>>> detail, 
>>>> in one message, exactly what your problem is.  And don't assume we 
>>>> understand anything -- tell us *EVERYTHING* (like, for example, what
>>>> the 
>>>> word "crore" means, how "searcherOne" is implemented, and the answer to 
>>>> the specfic question i asked in my last message: does your application, 
>>>> contain anywhere in it, any code that will close anything
>>>> (IndexSearchers 
>>>> or IndexReaders) ?
>>>> 
>>>> 
>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to 6
>>>> crore.
>>>> : > for
>>>> : > : every second i am updating my Index. i instantiate IndexSearcher
>>>> object
>>>> : > one
>>>> : > : time for all the searches. for an hour can i see the updated
>>>> records in
>>>> : > the
>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>> problem when
>>>> : > i
>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is there
>>>> any
>>>> 
>>>> 
>>>> : > IndexSearcher are you explicitly closing both the old IndexSearcher
>>>> as 
>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>>> 
>>>> 
>>>> 
>>>> 
>>>> -Hoss
>>>> 
>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12652816
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 13:56:11 2007
Return-Path: <java-user-return-30238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95010 invoked from network); 13 Sep 2007 13:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 13:56:10 -0000
Received: (qmail 32135 invoked by uid 500); 13 Sep 2007 13:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32101 invoked by uid 500); 13 Sep 2007 13:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32090 invoked by uid 99); 13 Sep 2007 13:55:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 06:55:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 13:55:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so482758fkz
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 06:55:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=K870e9ihTFFs9Mb6TXKGVY5obiHfL5QT+RePK4My1+s=;
        b=ZqKt34j8MJtCY5ttUAaFrp7NEc9EIOxFPPI4ai276A9wa8dMmzeyw0ul0UA8rmeYLUJihW7E4IQ5Hl+NfRIntxn9OSneGMlufD2m9R4YzLjgTSlqdLiXkmLc1hb7V7Rt5Uqmam46b2LPLBIC753zeeAoODNeQol+nXQfv4DYUv8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=orcLxv1LSdhS38IDJpIk/rrLm5uEmI/0c8tUzZg/zdRhUGJKOnVYg4xZGxDs1bY3LFDk6vpC+Y7hZDNGET7czf02KehP/CHTv+6lSZxRWO4FvMp7X0HhAyRwy9CCSE96cNeychLwZ1dVEKQPevMYaCI/vAGPl+6wtS0lCSsKmr8=
Received: by 10.82.183.19 with SMTP id g19mr933022buf.1189691731878;
        Thu, 13 Sep 2007 06:55:31 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Thu, 13 Sep 2007 06:55:31 -0700 (PDT)
Message-ID: <359a92830709130655l2bb67bfcud26276aa0a1036de@mail.gmail.com>
Date: Thu, 13 Sep 2007 09:55:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, dan@dotdan.com
Subject: Re: Tokenization question
In-Reply-To: <1189631219.740.1210334963@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20953_21029621.1189691731873"
References: <1189631219.740.1210334963@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20953_21029621.1189691731873
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I'm understanding you correctly, the answer is... maybe, kinda.
Take a look at some of the Luke code. That tries to reconstruct
document fields from the index, but it's lossy. So it depends
upon what kind of fidelity you need.

Erick

On 9/12/07, Dan Luria <dan@dotdan.com> wrote:
>
> If I have a tokenized unstored field in a document, and I want to
> transfer the document to another index, is it possible to carry of the
> tokenization with terms?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20953_21029621.1189691731873--

From java-user-return-30239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:02:38 2007
Return-Path: <java-user-return-30239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98173 invoked from network); 13 Sep 2007 14:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:02:37 -0000
Received: (qmail 42089 invoked by uid 500); 13 Sep 2007 14:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42050 invoked by uid 500); 13 Sep 2007 14:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42039 invoked by uid 99); 13 Sep 2007 14:02:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:02:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:02:18 +0000
Received: by fk-out-0910.google.com with SMTP id z23so484314fkz
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 07:01:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=2J2GMNQ2nIU4xFB6Qyql/oAOYnaeIdLK5/S7YDYOuCA=;
        b=KG/fgm88iaz7sREEj8pKmmFO50LB5riMIoCgR6UCCsej3Vtdg39wtCwr/WN5uiR6/jxtStFuXOf8wSZdcso/+0LjoeyEt4ZKHBASxBzuJXobvzxOey6OagV0I+VfeT6XU5BcdC2aizYvqpirs7Nvno1ov0/gV7Xo0nx0KcTCH64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R9cXczRN66tqA7vmpYNTn41u70H9C5RICtWNtRj9qwbuBCJCYp0LYzL4XS79ooEzy2EudJi7JBIJR6yzf29X7jXOOfPeDkovJbzQeZ7Glp9NMjd5Lfd/x8wX+DoAIGvG3XpLXU9UtZyuavNGuqV/3Ip9/NWc+zdToFuY5l/cqSI=
Received: by 10.82.186.5 with SMTP id j5mr946816buf.1189692116404;
        Thu, 13 Sep 2007 07:01:56 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Thu, 13 Sep 2007 07:01:56 -0700 (PDT)
Message-ID: <359a92830709130701m6a67d299k7f43936ee55c86f5@mail.gmail.com>
Date: Thu, 13 Sep 2007 10:01:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20987_7506825.1189692116400"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20987_7506825.1189692116400
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Do you have any evidence that you're having a performance issue? If
not, I'd just do the simple thing and ignore the rest. The performance
issues I found were because I was spinning through many, many
documents. If you're only worrying about one document at a time,
it may not be an issue.

If you *are* having performance issues, I'd *strongly* recommend
that you measure to find out where the problem is before trying
a solution. Otherwise you'll optimize code that isn't the problem.

Best
Erick

On 9/13/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Thanks
> as I saw the documents, we can only use this great field selector in
> IndexReader.document() method the problem is I have a Searcher in my
> result
> set structure and when the client calls getString("a_field_name") at that
> time I invoke the searcher.doc(current_doc_id).get("a_field_name),
> I already collected the result IDs. so in my case, I can't use
> FieldSelector.
>
> Do I have to revise the way of retrieving documents in my code?
>
>
>
> On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Well, it depends on what "improve the search process" means
> > in your context <G>..
> >
> > But I had a case similar to yours that I wrote up in the Wiki where
> > my search times improved about 10X by using lazy loading. You
> > might want to read that entry here...
> >
> > http://wiki.apache.org/lucene-java/FieldSelectorPerformance
> >
> > Note the peculiar characteristics of my data set, I really suspect
> > that a 10x improvement in retrieval speed is atypical...
> >
> > As for when lazily-loaded fields actually get loaded, I didn't really
> > have to explore it very fully, but a short experiment should do it
> > for you.....
> >
> > Best
> > Erick
> >
> > On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hi Grant,
> > > Really thanks for your nice document about advanced Lucene. it was
> very
> > > useful for me.
> > >
> > > as I understand, we can set some large fields to be lazily loading,
> now
> > my
> > > question is when it will be loaded? it make sense when we call
> > > doc.get("field_name")
> > > it will load from the index, Am I right?
> > >
> > > in my application, I've provided a result set structure to navigate
> > > between
> > > results and documents and provide a get(String fieldname) method just
> > like
> > > java.sql.ResultSet.getString() method, and also this result set
> > implements
> > > HitCollector in order to collect my own ID rather than Lucene's
> document
> > > id,
> > > so I think I can set my field ID to be loaded always and the other
> > fields
> > > to
> > > be lazily loading, Does this improve the search process?
> > >
> > > again, thank you very much indeed.
> > >
> > >
> > > On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > > >
> > > > Hi Mohammad,
> > > >
> > > > The typical use cases are:
> > > > 1. You have several small fields used in a results display and one
> or
> > > > two large fields (i.e. the original document) and you don't want to
> > > > pay the cost of loading the large fields for results display because
> > > > most of them won't be chosen.  When a result is chosen, the lazily
> > > > loaded field will be retrieved.
> > > >
> > > > 2. You only want to load certain fields, or the first field, or you
> > > > just want to know the size of a field.
> > > >
> > > > Basically, it gives you control over how fields are loaded from disk
> > > > in Lucene.
> > > >
> > > > See my ApacheCon Europe presentation http://cnlp.org/presentations/
> > > > slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> > > > FieldSelector.
> > > >
> > > > On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> > > >
> > > > > Hi all,
> > > > >
> > > > > Can anyone explain what is the FieldSelector and the usage or
> > > > > benefits of
> > > > > this structure? I read the javadocs but I can't get for what goal
> > > > > it is
> > > > > provided in Lucene.
> > > > >
> > > > > Thanks in advance
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > > --------------------------
> > > > > see my blog: http://brainable.blogspot.com/
> > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > >
> > > > --------------------------
> > > > Grant Ingersoll
> > > > http://lucene.grantingersoll.com
> > > >
> > > > Lucene Helpful Hints:
> > > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > > >
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_20987_7506825.1189692116400--

From java-user-return-30240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:05:59 2007
Return-Path: <java-user-return-30240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99785 invoked from network); 13 Sep 2007 14:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:05:59 -0000
Received: (qmail 49252 invoked by uid 500); 13 Sep 2007 14:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49218 invoked by uid 500); 13 Sep 2007 14:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49202 invoked by uid 99); 13 Sep 2007 14:05:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:05:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sand.chawla@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:05:43 +0000
Received: by rv-out-0910.google.com with SMTP id k20so353894rvb
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 07:05:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=9bd6l7/KdE4pXaTLR07T+w6q2zZfDk6G7VL4e4blEh8=;
        b=RckosLOuQpXXb9mPrcssFjiXFBmQaegDoBkalqCk+LRzfcXF5iyyoAr9W55HJi/d+kNTB7U+Qj5zYM18RwbfI5AOthDC7SbRTylq940ltHnbDvrdW/x3WyX0AMWmX8G6wh16WiQ57UGriIRD+CCz0P78ct+3gEEKk7c9Sq5ZF5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Ct2OqYWOJLEHyDKAR5EiZLBRRj3pa7g5CiMGU3/+v+OQlUjTkFUzBkeN2G65w01BocV9L24l30TvOCuk1J8oesQPNWrkqS6ck1WKPitEqXvo5iLpiqj5v/tWwPQTggtNh+GfADYwtx46yh8DwjyYqZcWLOhbaT74Z5j/kQnPL0c=
Received: by 10.141.172.6 with SMTP id z6mr219793rvo.1189692323037;
        Thu, 13 Sep 2007 07:05:23 -0700 (PDT)
Received: by 10.141.18.12 with HTTP; Thu, 13 Sep 2007 07:05:22 -0700 (PDT)
Message-ID: <a70e4c2b0709130705o1cb28710v9a07aff42860391f@mail.gmail.com>
Date: Thu, 13 Sep 2007 19:35:22 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem in building Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have to change lucene code for some reason.

I changed the source code of the lucene and ran the ant command on build.xml.

it created a jar file in build directory then i added the jar file to
my project in eclipse .

I am facing a bizarre problem now. Changes i have made in source code
are not reflected in new jar file..

Any help in this regards..please

Thanks
Sandeep

-- 
SANDEEP CHAWLA
House No- 23
10th main
BTM 1st  Stage
Bangalore Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:14:56 2007
Return-Path: <java-user-return-30241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4365 invoked from network); 13 Sep 2007 14:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:14:54 -0000
Received: (qmail 73834 invoked by uid 500); 13 Sep 2007 14:14:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72918 invoked by uid 500); 13 Sep 2007 14:14:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72907 invoked by uid 99); 13 Sep 2007 14:14:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:14:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:14:34 +0000
Received: by py-out-1112.google.com with SMTP id d32so1895470pye
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 07:14:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9mVl07wUUpyanImEwMOXSN/yqYgldKSMFiph9O8qjMI=;
        b=WrGTkfXsh/IaQn6q3RsHnWSGLh/Zx7M95CBHnZYMlnWz5D2wrw5+S+WBfL/P45rYxcxifHso8iDH2kL8/S7Pql+cqWbttJGlCT75g5ZzoqeQH+wREc1rs5jGAXjBDbQECbVX90zdXcJ3EOW5L5iZ7zfr34SQ9yTeRsNrI5Gve1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YxATnxk7ShNaE5A/RcCYxy9ze+9288dtk6AcDoHFi8SU5ky9GbtBIwPI/0VQqMNPGzEcGa870Tdywnb0ajBFkhx4gJtDTN7b0tfkfyHfdRyvrD88cBhkZKIWnl9zuYhrfaKLgbsXzmYAAnNl7oKivC+Spxz6zCrV5hbK8ovSztw=
Received: by 10.64.243.10 with SMTP id q10mr1785536qbh.1189692852654;
        Thu, 13 Sep 2007 07:14:12 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Thu, 13 Sep 2007 07:14:12 -0700 (PDT)
Message-ID: <34b8543c0709130714j465b1f44j71f904928ad7b2a4@mail.gmail.com>
Date: Thu, 13 Sep 2007 17:44:12 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <359a92830709130701m6a67d299k7f43936ee55c86f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30894_26215864.1189692852647"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
	 <359a92830709130701m6a67d299k7f43936ee55c86f5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30894_26215864.1189692852647
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, actually, I have 5 index directory and it will increase in future. and
the thing is that each document about 20 fields on average. considering many
users may connect to the system (we anticipate 500 users at this time) I
want to know whether this will make performance issue or not.

 we provided a feature to select which fields they want to be displayed so I
know that only 5 or 6 fields are important to my users. I don't know the way
I stated in my last email, I mean searcher.doc(doc_id).get("field_name"),
make the Lucene to load all fields of the document or only the given name?
if yes, I mean if all the fields are loaded I think it's better to make them
lazy.

what do you suggest?

thanks


On 9/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Do you have any evidence that you're having a performance issue? If
> not, I'd just do the simple thing and ignore the rest. The performance
> issues I found were because I was spinning through many, many
> documents. If you're only worrying about one document at a time,
> it may not be an issue.
>
> If you *are* having performance issues, I'd *strongly* recommend
> that you measure to find out where the problem is before trying
> a solution. Otherwise you'll optimize code that isn't the problem.
>
> Best
> Erick
>
> On 9/13/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Thanks
> > as I saw the documents, we can only use this great field selector in
> > IndexReader.document() method the problem is I have a Searcher in my
> > result
> > set structure and when the client calls getString("a_field_name") at
> that
> > time I invoke the searcher.doc(current_doc_id).get("a_field_name),
> > I already collected the result IDs. so in my case, I can't use
> > FieldSelector.
> >
> > Do I have to revise the way of retrieving documents in my code?
> >
> >
> >
> > On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Well, it depends on what "improve the search process" means
> > > in your context <G>..
> > >
> > > But I had a case similar to yours that I wrote up in the Wiki where
> > > my search times improved about 10X by using lazy loading. You
> > > might want to read that entry here...
> > >
> > > http://wiki.apache.org/lucene-java/FieldSelectorPerformance
> > >
> > > Note the peculiar characteristics of my data set, I really suspect
> > > that a 10x improvement in retrieval speed is atypical...
> > >
> > > As for when lazily-loaded fields actually get loaded, I didn't really
> > > have to explore it very fully, but a short experiment should do it
> > > for you.....
> > >
> > > Best
> > > Erick
> > >
> > > On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > >
> > > > Hi Grant,
> > > > Really thanks for your nice document about advanced Lucene. it was
> > very
> > > > useful for me.
> > > >
> > > > as I understand, we can set some large fields to be lazily loading,
> > now
> > > my
> > > > question is when it will be loaded? it make sense when we call
> > > > doc.get("field_name")
> > > > it will load from the index, Am I right?
> > > >
> > > > in my application, I've provided a result set structure to navigate
> > > > between
> > > > results and documents and provide a get(String fieldname) method
> just
> > > like
> > > > java.sql.ResultSet.getString() method, and also this result set
> > > implements
> > > > HitCollector in order to collect my own ID rather than Lucene's
> > document
> > > > id,
> > > > so I think I can set my field ID to be loaded always and the other
> > > fields
> > > > to
> > > > be lazily loading, Does this improve the search process?
> > > >
> > > > again, thank you very much indeed.
> > > >
> > > >
> > > > On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > > > >
> > > > > Hi Mohammad,
> > > > >
> > > > > The typical use cases are:
> > > > > 1. You have several small fields used in a results display and one
> > or
> > > > > two large fields (i.e. the original document) and you don't want
> to
> > > > > pay the cost of loading the large fields for results display
> because
> > > > > most of them won't be chosen.  When a result is chosen, the lazily
> > > > > loaded field will be retrieved.
> > > > >
> > > > > 2. You only want to load certain fields, or the first field, or
> you
> > > > > just want to know the size of a field.
> > > > >
> > > > > Basically, it gives you control over how fields are loaded from
> disk
> > > > > in Lucene.
> > > > >
> > > > > See my ApacheCon Europe presentation
> http://cnlp.org/presentations/
> > > > > slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> > > > > FieldSelector.
> > > > >
> > > > > On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > Can anyone explain what is the FieldSelector and the usage or
> > > > > > benefits of
> > > > > > this structure? I read the javadocs but I can't get for what
> goal
> > > > > > it is
> > > > > > provided in Lucene.
> > > > > >
> > > > > > Thanks in advance
> > > > > >
> > > > > > --
> > > > > > Regards,
> > > > > > Mohammad
> > > > > > --------------------------
> > > > > > see my blog: http://brainable.blogspot.com/
> > > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > >
> > > > > --------------------------
> > > > > Grant Ingersoll
> > > > > http://lucene.grantingersoll.com
> > > > >
> > > > > Lucene Helpful Hints:
> > > > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > > > >
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > >
> > >
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_30894_26215864.1189692852647--

From java-user-return-30242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:41:08 2007
Return-Path: <java-user-return-30242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18875 invoked from network); 13 Sep 2007 14:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:41:08 -0000
Received: (qmail 41466 invoked by uid 500); 13 Sep 2007 14:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41436 invoked by uid 500); 13 Sep 2007 14:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41425 invoked by uid 99); 13 Sep 2007 14:40:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:40:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:40:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVprq-0000Eo-Er
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 07:40:30 -0700
Message-ID: <12655013.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 07:40:30 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12652816.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


java.io.IoException:File Not Found- Segments  is the error message

testn wrote:
> 
> What is the error message? Probably Mike, Erick or Yonik can help you
> better on this since I'm no one in index area.
> 
> Sebastin wrote:
>> 
>> HI testn,
>>              1.I optimize the Large Indexes of size 10 GB using Luke.it
>> optimize all the content into a single CFS file and it generates
>> segments.gen and segments_8 file when i search the item it shows an error
>> that segments file is not there.could you help me in this 
>> 
>> testn wrote:
>>> 
>>> 1. You can close the searcher once you're done. If you want to reopen
>>> the index, you can close and reopen only the updated 3 readers and keep
>>> the 2 old indexreaders and reuse it. It should reduce the time to reopen
>>> it.
>>> 2. Make sure that you optimize it every once in a while
>>> 3. You might consider separating indices in separated storage and use
>>> ParallelReader
>>> 
>>> 
>>> 
>>> Sebastin wrote:
>>>> 
>>>> The problem in my pplication are as follows:
>>>>                  1.I am not able to see the updated records in my index
>>>> store because i instantiate 
>>>> IndexReader and IndexSearcher class once that is in the first
>>>> search.further searches use the same IndexReaders(5 Directories) and
>>>> IndexSearcher with different queries.
>>>> 
>>>>                 2.My search is very very slow First 2 Directories of
>>>> size 10 GB each which are having old index records and no update in
>>>> that remaining 3 Diretories are updated every second.
>>>> 
>>>>                 3.i am Indexing 20 million records per day so the Index
>>>> store gets growing and it makes search very very slower.
>>>>  
>>>>                4.I am using searcherOne class as the global application
>>>> helper class ,with the scope as APPLICATION it consists of one
>>>> IndexReader and IndexSearcher get set method which will hold the
>>>> IndexReader and IndexSearcher object after the First Search.it is used
>>>> for all other searches.
>>>> 
>>>>               5.I am using Lucene 2.2.0 version, in a WEB Application
>>>> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i
>>>> am not using any sort in my query.for a single query upto the maximum
>>>> it fetches 600 records from the index store(5 direcories)    
>>>>                 
>>>> 
>>>> hossman wrote:
>>>>> 
>>>>> 
>>>>> : I set IndexSearcher as the application Object after the first
>>>>> search.
>>>>> 	...
>>>>> : how can i reconstruct the new IndexSearcher for every hour to see
>>>>> the
>>>>> : updated records .
>>>>> 
>>>>> i'm confused ... my understanding based on the comments you made below 
>>>>> (in an earlier message) was that you already *were* constructing a new  
>>>>> IndexSearcher once an hour -- but every time you do that, your memory 
>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>> 
>>>>> if that's not what you said, then i think you need to explain, in
>>>>> detail, 
>>>>> in one message, exactly what your problem is.  And don't assume we 
>>>>> understand anything -- tell us *EVERYTHING* (like, for example, what
>>>>> the 
>>>>> word "crore" means, how "searcherOne" is implemented, and the answer
>>>>> to 
>>>>> the specfic question i asked in my last message: does your
>>>>> application, 
>>>>> contain anywhere in it, any code that will close anything
>>>>> (IndexSearchers 
>>>>> or IndexReaders) ?
>>>>> 
>>>>> 
>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to
>>>>> 6 crore.
>>>>> : > for
>>>>> : > : every second i am updating my Index. i instantiate IndexSearcher
>>>>> object
>>>>> : > one
>>>>> : > : time for all the searches. for an hour can i see the updated
>>>>> records in
>>>>> : > the
>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>>> problem when
>>>>> : > i
>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>>>>> there any
>>>>> 
>>>>> 
>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>> IndexSearcher as 
>>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>>>> 
>>>>> 
>>>>> 
>>>>> 
>>>>> -Hoss
>>>>> 
>>>>> 
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655013
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:50:23 2007
Return-Path: <java-user-return-30243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23040 invoked from network); 13 Sep 2007 14:50:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:50:22 -0000
Received: (qmail 61348 invoked by uid 500); 13 Sep 2007 14:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61310 invoked by uid 500); 13 Sep 2007 14:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61274 invoked by uid 99); 13 Sep 2007 14:50:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:50:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:50:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVq0k-0000Uh-Eq
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 07:49:42 -0700
Message-ID: <12655880.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 07:49:42 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12655013.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Should the file be "segments_8" and "segments.gen"? Why is it "Segment"? The
case is different.


Sebastin wrote:
> 
> java.io.IoException:File Not Found- Segments  is the error message
> 
> testn wrote:
>> 
>> What is the error message? Probably Mike, Erick or Yonik can help you
>> better on this since I'm no one in index area.
>> 
>> Sebastin wrote:
>>> 
>>> HI testn,
>>>              1.I optimize the Large Indexes of size 10 GB using Luke.it
>>> optimize all the content into a single CFS file and it generates
>>> segments.gen and segments_8 file when i search the item it shows an
>>> error that segments file is not there.could you help me in this 
>>> 
>>> testn wrote:
>>>> 
>>>> 1. You can close the searcher once you're done. If you want to reopen
>>>> the index, you can close and reopen only the updated 3 readers and keep
>>>> the 2 old indexreaders and reuse it. It should reduce the time to
>>>> reopen it.
>>>> 2. Make sure that you optimize it every once in a while
>>>> 3. You might consider separating indices in separated storage and use
>>>> ParallelReader
>>>> 
>>>> 
>>>> 
>>>> Sebastin wrote:
>>>>> 
>>>>> The problem in my pplication are as follows:
>>>>>                  1.I am not able to see the updated records in my
>>>>> index store because i instantiate 
>>>>> IndexReader and IndexSearcher class once that is in the first
>>>>> search.further searches use the same IndexReaders(5 Directories) and
>>>>> IndexSearcher with different queries.
>>>>> 
>>>>>                 2.My search is very very slow First 2 Directories of
>>>>> size 10 GB each which are having old index records and no update in
>>>>> that remaining 3 Diretories are updated every second.
>>>>> 
>>>>>                 3.i am Indexing 20 million records per day so the
>>>>> Index store gets growing and it makes search very very slower.
>>>>>  
>>>>>                4.I am using searcherOne class as the global
>>>>> application helper class ,with the scope as APPLICATION it consists of
>>>>> one IndexReader and IndexSearcher get set method which will hold the
>>>>> IndexReader and IndexSearcher object after the First Search.it is used
>>>>> for all other searches.
>>>>> 
>>>>>               5.I am using Lucene 2.2.0 version, in a WEB Application
>>>>> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i
>>>>> am not using any sort in my query.for a single query upto the maximum
>>>>> it fetches 600 records from the index store(5 direcories)    
>>>>>                 
>>>>> 
>>>>> hossman wrote:
>>>>>> 
>>>>>> 
>>>>>> : I set IndexSearcher as the application Object after the first
>>>>>> search.
>>>>>> 	...
>>>>>> : how can i reconstruct the new IndexSearcher for every hour to see
>>>>>> the
>>>>>> : updated records .
>>>>>> 
>>>>>> i'm confused ... my understanding based on the comments you made
>>>>>> below 
>>>>>> (in an earlier message) was that you already *were* constructing a
>>>>>> new  
>>>>>> IndexSearcher once an hour -- but every time you do that, your memory 
>>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>> 
>>>>>> if that's not what you said, then i think you need to explain, in
>>>>>> detail, 
>>>>>> in one message, exactly what your problem is.  And don't assume we 
>>>>>> understand anything -- tell us *EVERYTHING* (like, for example, what
>>>>>> the 
>>>>>> word "crore" means, how "searcherOne" is implemented, and the answer
>>>>>> to 
>>>>>> the specfic question i asked in my last message: does your
>>>>>> application, 
>>>>>> contain anywhere in it, any code that will close anything
>>>>>> (IndexSearchers 
>>>>>> or IndexReaders) ?
>>>>>> 
>>>>>> 
>>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to
>>>>>> 6 crore.
>>>>>> : > for
>>>>>> : > : every second i am updating my Index. i instantiate
>>>>>> IndexSearcher object
>>>>>> : > one
>>>>>> : > : time for all the searches. for an hour can i see the updated
>>>>>> records in
>>>>>> : > the
>>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>>>> problem when
>>>>>> : > i
>>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>>>>>> there any
>>>>>> 
>>>>>> 
>>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>> IndexSearcher as 
>>>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> -Hoss
>>>>>> 
>>>>>> 
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:52:14 2007
Return-Path: <java-user-return-30244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23590 invoked from network); 13 Sep 2007 14:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:52:14 -0000
Received: (qmail 67995 invoked by uid 500); 13 Sep 2007 14:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67958 invoked by uid 500); 13 Sep 2007 14:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67947 invoked by uid 99); 13 Sep 2007 14:52:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:52:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:53:37 +0000
Received: from [127.0.0.1] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 2D79464B7
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 23:51:32 +0900 (JST)
Message-ID: <46E94E5C.5060606@r.email.ne.jp>
Date: Thu, 13 Sep 2007 23:51:08 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem in building Lucene
References: <a70e4c2b0709130705o1cb28710v9a07aff42860391f@mail.gmail.com>
In-Reply-To: <a70e4c2b0709130705o1cb28710v9a07aff42860391f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Try to reread jar file on Eclipse.
To do it, right-click on your project,
then choose refresh.

Thank you,

Koji

sandeep chawla wrote:
> I have to change lucene code for some reason.
>
> I changed the source code of the lucene and ran the ant command on build.xml.
>
> it created a jar file in build directory then i added the jar file to
> my project in eclipse .
>
> I am facing a bizarre problem now. Changes i have made in source code
> are not reflected in new jar file..
>
> Any help in this regards..please
>
> Thanks
> Sandeep
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 14:54:07 2007
Return-Path: <java-user-return-30245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24147 invoked from network); 13 Sep 2007 14:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 14:54:06 -0000
Received: (qmail 74132 invoked by uid 500); 13 Sep 2007 14:53:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74095 invoked by uid 500); 13 Sep 2007 14:53:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74083 invoked by uid 99); 13 Sep 2007 14:53:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 07:53:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:55:20 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 8B85A2DA74
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 10:53:16 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 13 Sep 2007 10:53:16 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id C2C7D19234; Thu, 13 Sep 2007 10:53:16 -0400 (EDT)
Message-Id: <1189695196.8650.1210472501@webmail.messagingengine.com>
X-Sasl-Enc: 2sTfN7qGUzmAEg8QqY4zfofZ3xoqTS3qbUFH11jaXuSC 1189695196
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com>
   <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com>
   <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com>
   <12500824.post@talk.nabble.com>
   <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net>
   <12515624.post@talk.nabble.com>
   <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net>
   <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com>
   <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com>
   <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com>
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12655880.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 10:53:16 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


It sounds like there may be a Lucene version mismatch?  When Luke was used
it was likely based on Lucene 2.2, but it sounds like an older version of
Lucene is now being used to open the index?

Mike

"testn" <test1@doramail.com> wrote:
> 
> Should the file be "segments_8" and "segments.gen"? Why is it "Segment"?
> The
> case is different.
> 
> 
> Sebastin wrote:
> > 
> > java.io.IoException:File Not Found- Segments  is the error message
> > 
> > testn wrote:
> >> 
> >> What is the error message? Probably Mike, Erick or Yonik can help you
> >> better on this since I'm no one in index area.
> >> 
> >> Sebastin wrote:
> >>> 
> >>> HI testn,
> >>>              1.I optimize the Large Indexes of size 10 GB using Luke.it
> >>> optimize all the content into a single CFS file and it generates
> >>> segments.gen and segments_8 file when i search the item it shows an
> >>> error that segments file is not there.could you help me in this 
> >>> 
> >>> testn wrote:
> >>>> 
> >>>> 1. You can close the searcher once you're done. If you want to reopen
> >>>> the index, you can close and reopen only the updated 3 readers and keep
> >>>> the 2 old indexreaders and reuse it. It should reduce the time to
> >>>> reopen it.
> >>>> 2. Make sure that you optimize it every once in a while
> >>>> 3. You might consider separating indices in separated storage and use
> >>>> ParallelReader
> >>>> 
> >>>> 
> >>>> 
> >>>> Sebastin wrote:
> >>>>> 
> >>>>> The problem in my pplication are as follows:
> >>>>>                  1.I am not able to see the updated records in my
> >>>>> index store because i instantiate 
> >>>>> IndexReader and IndexSearcher class once that is in the first
> >>>>> search.further searches use the same IndexReaders(5 Directories) and
> >>>>> IndexSearcher with different queries.
> >>>>> 
> >>>>>                 2.My search is very very slow First 2 Directories of
> >>>>> size 10 GB each which are having old index records and no update in
> >>>>> that remaining 3 Diretories are updated every second.
> >>>>> 
> >>>>>                 3.i am Indexing 20 million records per day so the
> >>>>> Index store gets growing and it makes search very very slower.
> >>>>>  
> >>>>>                4.I am using searcherOne class as the global
> >>>>> application helper class ,with the scope as APPLICATION it consists of
> >>>>> one IndexReader and IndexSearcher get set method which will hold the
> >>>>> IndexReader and IndexSearcher object after the First Search.it is used
> >>>>> for all other searches.
> >>>>> 
> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB Application
> >>>>> which index 15 fields per document and Index 5 Fieds,store 10 Fields.i
> >>>>> am not using any sort in my query.for a single query upto the maximum
> >>>>> it fetches 600 records from the index store(5 direcories)    
> >>>>>                 
> >>>>> 
> >>>>> hossman wrote:
> >>>>>> 
> >>>>>> 
> >>>>>> : I set IndexSearcher as the application Object after the first
> >>>>>> search.
> >>>>>> 	...
> >>>>>> : how can i reconstruct the new IndexSearcher for every hour to see
> >>>>>> the
> >>>>>> : updated records .
> >>>>>> 
> >>>>>> i'm confused ... my understanding based on the comments you made
> >>>>>> below 
> >>>>>> (in an earlier message) was that you already *were* constructing a
> >>>>>> new  
> >>>>>> IndexSearcher once an hour -- but every time you do that, your memory 
> >>>>>> usage grows, and and that sometimes you got OOM Errors.
> >>>>>> 
> >>>>>> if that's not what you said, then i think you need to explain, in
> >>>>>> detail, 
> >>>>>> in one message, exactly what your problem is.  And don't assume we 
> >>>>>> understand anything -- tell us *EVERYTHING* (like, for example, what
> >>>>>> the 
> >>>>>> word "crore" means, how "searcherOne" is implemented, and the answer
> >>>>>> to 
> >>>>>> the specfic question i asked in my last message: does your
> >>>>>> application, 
> >>>>>> contain anywhere in it, any code that will close anything
> >>>>>> (IndexSearchers 
> >>>>>> or IndexReaders) ?
> >>>>>> 
> >>>>>> 
> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore to
> >>>>>> 6 crore.
> >>>>>> : > for
> >>>>>> : > : every second i am updating my Index. i instantiate
> >>>>>> IndexSearcher object
> >>>>>> : > one
> >>>>>> : > : time for all the searches. for an hour can i see the updated
> >>>>>> records in
> >>>>>> : > the
> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
> >>>>>> problem when
> >>>>>> : > i
> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
> >>>>>> there any
> >>>>>> 
> >>>>>> 
> >>>>>> : > IndexSearcher are you explicitly closing both the old
> >>>>>> IndexSearcher as 
> >>>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
> >>>>>> 
> >>>>>> 
> >>>>>> 
> >>>>>> 
> >>>>>> -Hoss
> >>>>>> 
> >>>>>> 
> >>>>>> ---------------------------------------------------------------------
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>> 
> >>>>>> 
> >>>>>> 
> >>>>> 
> >>>>> 
> >>>> 
> >>>> 
> >>> 
> >>> 
> >> 
> >> 
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 15:25:08 2007
Return-Path: <java-user-return-30246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67407 invoked from network); 13 Sep 2007 15:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 15:25:07 -0000
Received: (qmail 56090 invoked by uid 500); 13 Sep 2007 15:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56050 invoked by uid 500); 13 Sep 2007 15:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56030 invoked by uid 99); 13 Sep 2007 15:24:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 08:24:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 15:26:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVqYN-0001p5-3w
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 08:24:27 -0700
Message-ID: <12657227.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 08:24:27 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12655880.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi testn,
             i wrote the case wrongly actually the error is 

java.io.ioexception file not found-segments

testn wrote:
> 
> Should the file be "segments_8" and "segments.gen"? Why is it "Segment"?
> The case is different.
> 
> 
> Sebastin wrote:
>> 
>> java.io.IoException:File Not Found- Segments  is the error message
>> 
>> testn wrote:
>>> 
>>> What is the error message? Probably Mike, Erick or Yonik can help you
>>> better on this since I'm no one in index area.
>>> 
>>> Sebastin wrote:
>>>> 
>>>> HI testn,
>>>>              1.I optimize the Large Indexes of size 10 GB using Luke.it
>>>> optimize all the content into a single CFS file and it generates
>>>> segments.gen and segments_8 file when i search the item it shows an
>>>> error that segments file is not there.could you help me in this 
>>>> 
>>>> testn wrote:
>>>>> 
>>>>> 1. You can close the searcher once you're done. If you want to reopen
>>>>> the index, you can close and reopen only the updated 3 readers and
>>>>> keep the 2 old indexreaders and reuse it. It should reduce the time to
>>>>> reopen it.
>>>>> 2. Make sure that you optimize it every once in a while
>>>>> 3. You might consider separating indices in separated storage and use
>>>>> ParallelReader
>>>>> 
>>>>> 
>>>>> 
>>>>> Sebastin wrote:
>>>>>> 
>>>>>> The problem in my pplication are as follows:
>>>>>>                  1.I am not able to see the updated records in my
>>>>>> index store because i instantiate 
>>>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>> search.further searches use the same IndexReaders(5 Directories) and
>>>>>> IndexSearcher with different queries.
>>>>>> 
>>>>>>                 2.My search is very very slow First 2 Directories of
>>>>>> size 10 GB each which are having old index records and no update in
>>>>>> that remaining 3 Diretories are updated every second.
>>>>>> 
>>>>>>                 3.i am Indexing 20 million records per day so the
>>>>>> Index store gets growing and it makes search very very slower.
>>>>>>  
>>>>>>                4.I am using searcherOne class as the global
>>>>>> application helper class ,with the scope as APPLICATION it consists
>>>>>> of one IndexReader and IndexSearcher get set method which will hold
>>>>>> the IndexReader and IndexSearcher object after the First Search.it is
>>>>>> used for all other searches.
>>>>>> 
>>>>>>               5.I am using Lucene 2.2.0 version, in a WEB Application
>>>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>>> Fields.i am not using any sort in my query.for a single query upto
>>>>>> the maximum it fetches 600 records from the index store(5 direcories)    
>>>>>>                 
>>>>>> 
>>>>>> hossman wrote:
>>>>>>> 
>>>>>>> 
>>>>>>> : I set IndexSearcher as the application Object after the first
>>>>>>> search.
>>>>>>> 	...
>>>>>>> : how can i reconstruct the new IndexSearcher for every hour to see
>>>>>>> the
>>>>>>> : updated records .
>>>>>>> 
>>>>>>> i'm confused ... my understanding based on the comments you made
>>>>>>> below 
>>>>>>> (in an earlier message) was that you already *were* constructing a
>>>>>>> new  
>>>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>>>>> memory 
>>>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>>> 
>>>>>>> if that's not what you said, then i think you need to explain, in
>>>>>>> detail, 
>>>>>>> in one message, exactly what your problem is.  And don't assume we 
>>>>>>> understand anything -- tell us *EVERYTHING* (like, for example, what
>>>>>>> the 
>>>>>>> word "crore" means, how "searcherOne" is implemented, and the answer
>>>>>>> to 
>>>>>>> the specfic question i asked in my last message: does your
>>>>>>> application, 
>>>>>>> contain anywhere in it, any code that will close anything
>>>>>>> (IndexSearchers 
>>>>>>> or IndexReaders) ?
>>>>>>> 
>>>>>>> 
>>>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore
>>>>>>> to 6 crore.
>>>>>>> : > for
>>>>>>> : > : every second i am updating my Index. i instantiate
>>>>>>> IndexSearcher object
>>>>>>> : > one
>>>>>>> : > : time for all the searches. for an hour can i see the updated
>>>>>>> records in
>>>>>>> : > the
>>>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>>>>> problem when
>>>>>>> : > i
>>>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>>>>>>> there any
>>>>>>> 
>>>>>>> 
>>>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>>> IndexSearcher as 
>>>>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>>> -Hoss
>>>>>>> 
>>>>>>> 
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12657227
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 15:28:23 2007
Return-Path: <java-user-return-30247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70507 invoked from network); 13 Sep 2007 15:28:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 15:28:22 -0000
Received: (qmail 69208 invoked by uid 500); 13 Sep 2007 15:28:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69171 invoked by uid 500); 13 Sep 2007 15:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69160 invoked by uid 99); 13 Sep 2007 15:28:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 08:28:08 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 15:29:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IVqbX-0001uA-Is
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 08:27:43 -0700
Message-ID: <12657298.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 08:27:43 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12657227.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <12657227.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


As Mike mentioned, what is the version of Lucene you are using? Plus can you
also post the stacktrace?


Sebastin wrote:
> 
> Hi testn,
>              i wrote the case wrongly actually the error is 
> 
> java.io.ioexception file not found-segments
> 
> testn wrote:
>> 
>> Should the file be "segments_8" and "segments.gen"? Why is it "Segment"?
>> The case is different.
>> 
>> 
>> Sebastin wrote:
>>> 
>>> java.io.IoException:File Not Found- Segments  is the error message
>>> 
>>> testn wrote:
>>>> 
>>>> What is the error message? Probably Mike, Erick or Yonik can help you
>>>> better on this since I'm no one in index area.
>>>> 
>>>> Sebastin wrote:
>>>>> 
>>>>> HI testn,
>>>>>              1.I optimize the Large Indexes of size 10 GB using
>>>>> Luke.it optimize all the content into a single CFS file and it
>>>>> generates segments.gen and segments_8 file when i search the item it
>>>>> shows an error that segments file is not there.could you help me in
>>>>> this 
>>>>> 
>>>>> testn wrote:
>>>>>> 
>>>>>> 1. You can close the searcher once you're done. If you want to reopen
>>>>>> the index, you can close and reopen only the updated 3 readers and
>>>>>> keep the 2 old indexreaders and reuse it. It should reduce the time
>>>>>> to reopen it.
>>>>>> 2. Make sure that you optimize it every once in a while
>>>>>> 3. You might consider separating indices in separated storage and use
>>>>>> ParallelReader
>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> Sebastin wrote:
>>>>>>> 
>>>>>>> The problem in my pplication are as follows:
>>>>>>>                  1.I am not able to see the updated records in my
>>>>>>> index store because i instantiate 
>>>>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>>> search.further searches use the same IndexReaders(5 Directories) and
>>>>>>> IndexSearcher with different queries.
>>>>>>> 
>>>>>>>                 2.My search is very very slow First 2 Directories of
>>>>>>> size 10 GB each which are having old index records and no update in
>>>>>>> that remaining 3 Diretories are updated every second.
>>>>>>> 
>>>>>>>                 3.i am Indexing 20 million records per day so the
>>>>>>> Index store gets growing and it makes search very very slower.
>>>>>>>  
>>>>>>>                4.I am using searcherOne class as the global
>>>>>>> application helper class ,with the scope as APPLICATION it consists
>>>>>>> of one IndexReader and IndexSearcher get set method which will hold
>>>>>>> the IndexReader and IndexSearcher object after the First Search.it
>>>>>>> is used for all other searches.
>>>>>>> 
>>>>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>>>> Application which index 15 fields per document and Index 5
>>>>>>> Fieds,store 10 Fields.i am not using any sort in my query.for a
>>>>>>> single query upto the maximum it fetches 600 records from the index
>>>>>>> store(5 direcories)    
>>>>>>>                 
>>>>>>> 
>>>>>>> hossman wrote:
>>>>>>>> 
>>>>>>>> 
>>>>>>>> : I set IndexSearcher as the application Object after the first
>>>>>>>> search.
>>>>>>>> 	...
>>>>>>>> : how can i reconstruct the new IndexSearcher for every hour to see
>>>>>>>> the
>>>>>>>> : updated records .
>>>>>>>> 
>>>>>>>> i'm confused ... my understanding based on the comments you made
>>>>>>>> below 
>>>>>>>> (in an earlier message) was that you already *were* constructing a
>>>>>>>> new  
>>>>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>>>>>> memory 
>>>>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>>>> 
>>>>>>>> if that's not what you said, then i think you need to explain, in
>>>>>>>> detail, 
>>>>>>>> in one message, exactly what your problem is.  And don't assume we 
>>>>>>>> understand anything -- tell us *EVERYTHING* (like, for example,
>>>>>>>> what the 
>>>>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>>>>>> answer to 
>>>>>>>> the specfic question i asked in my last message: does your
>>>>>>>> application, 
>>>>>>>> contain anywhere in it, any code that will close anything
>>>>>>>> (IndexSearchers 
>>>>>>>> or IndexReaders) ?
>>>>>>>> 
>>>>>>>> 
>>>>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore
>>>>>>>> to 6 crore.
>>>>>>>> : > for
>>>>>>>> : > : every second i am updating my Index. i instantiate
>>>>>>>> IndexSearcher object
>>>>>>>> : > one
>>>>>>>> : > : time for all the searches. for an hour can i see the updated
>>>>>>>> records in
>>>>>>>> : > the
>>>>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>>>>>> problem when
>>>>>>>> : > i
>>>>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>>>>>>>> there any
>>>>>>>> 
>>>>>>>> 
>>>>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>>>> IndexSearcher as 
>>>>>>>> : > well as all of 4 of those old IndexReaders and the MultiReader?
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>>> -Hoss
>>>>>>>> 
>>>>>>>> 
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>> 
>>>>>>>> 
>>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12657298
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 15:48:03 2007
Return-Path: <java-user-return-30248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8818 invoked from network); 13 Sep 2007 15:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 15:48:02 -0000
Received: (qmail 15514 invoked by uid 500); 13 Sep 2007 15:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15479 invoked by uid 500); 13 Sep 2007 15:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15468 invoked by uid 99); 13 Sep 2007 15:47:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 08:47:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 15:49:25 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id l8DFlDmC020111
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 11:47:14 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <46E95A99.2070605@informatics.jax.org>
Date: Thu, 13 Sep 2007 11:43:21 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.13 (Windows/20070809)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem in building Lucene
References: <a70e4c2b0709130705o1cb28710v9a07aff42860391f@mail.gmail.com> <46E94E5C.5060606@r.email.ne.jp>
In-Reply-To: <46E94E5C.5060606@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.3.310218, Antispam-Engine: 2.5.2.313940, Antispam-Data: 2007.9.13.82422
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='__CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Also, ensure that you didn't inadvertently add an older version of your 
Jar file somewhere in your classpath.  Eclipse will take the first it 
comes to, and skip any others found later on in the path.

Right Click on your Project -> Properties -> Java Build Path and ensure 
you don't have an older version in there.

Matt

Koji Sekiguchi wrote:
> Try to reread jar file on Eclipse.
> To do it, right-click on your project,
> then choose refresh.
>
> Thank you,
>
> Koji
>
> sandeep chawla wrote:
>> I have to change lucene code for some reason.
>>
>> I changed the source code of the lucene and ran the ant command on 
>> build.xml.
>>
>> it created a jar file in build directory then i added the jar file to
>> my project in eclipse .
>>
>> I am facing a bizarre problem now. Changes i have made in source code
>> are not reflected in new jar file..
>>
>> Any help in this regards..please
>>
>> Thanks
>> Sandeep
>>
>>   
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 17:20:41 2007
Return-Path: <java-user-return-30249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35476 invoked from network); 13 Sep 2007 17:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 17:20:39 -0000
Received: (qmail 17358 invoked by uid 500); 13 Sep 2007 17:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17317 invoked by uid 500); 13 Sep 2007 17:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17306 invoked by uid 99); 13 Sep 2007 17:20:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 10:20:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.135] (HELO redhat.sirma.bg) (62.213.161.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 17:22:04 +0000
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l8DHJx53025132
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 20:20:00 +0300
Message-ID: <46E9713E.2050404@sirma.bg>
Date: Thu, 13 Sep 2007 20:19:58 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Treating values of numeric fields as numbers
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I have made some changes in my Lucene source, so that values of numeric 
fields to be treated as numbers but not as Strings. After testing 
everything seems to work correctly, but I still would like to know your 
opinion about this.
So my approach is the following:

1. As during the indexing process the terms are ordered according their 
values I made changes in the methods TermBuffer.compareTo(TermBuffer 
other) and Term.compareTo(Term other) so that when the filed contains 
numeric data comparison to be made based on numeric logic 
(Integer.compareto(..), Float.compareTo(..)). So this orders terms based 
on numeric logic but not based on lexicographical one.

2. To work correctly range searches similar changes were made in 
RangeFilter.bits(IndexReader reader) and RangeQuery.rewrite(IndexReader 
reader) methods.

Changes seem to be very simple, but I did not found case when they lead 
to wrong behavior.
Before these changes to make range queries on numeric fields I made 
values of those fields with fixed length so that the lexicographical 
order to be the same like the numeric one. So I had to keep dates in 
some fields and I made them 13 length fields that keep UTC 
representation of the date. When the UTC was short I prefixed it with 
zeroes. This made range searches to work correctly for the time interval 
1970 - 2280 approximately. Now with the new implementation I do not have 
any restrictions about this time interval.

So before some time I digged in Lucene forum and saw there were some 
discussions about this. So if anybody uses also such approach, or have 
bad experience with it, please tell me.
Tanks in advance.


Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 18:45:49 2007
Return-Path: <java-user-return-30250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72738 invoked from network); 13 Sep 2007 18:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 18:45:48 -0000
Received: (qmail 85472 invoked by uid 500); 13 Sep 2007 18:45:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85441 invoked by uid 500); 13 Sep 2007 18:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85430 invoked by uid 99); 13 Sep 2007 18:45:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 11:45:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 18:45:29 +0000
Received: by nf-out-0910.google.com with SMTP id d3so525985nfc
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 11:45:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5YhaE70kLm8Dr8nSYNMimQ5zBNE+XccKr95DPFkXrvU=;
        b=Xw3e2sAYaR9t+rbkuA+PMQ9yq4RRZwue5gp6u67r7Bgyj8la9CiEl4eGTZlt8lT87Kw4/iuoyvIxyEkBXvz/5bb9CrNu00nz1OeEDhQA/kxq9dK9is14XYWclIS70lbMnM+y8e627a+vZbU2i80e7KkSlzCMvTRyHYtbMumz3Pc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A/KmlKvE89SNkw6pgiBZPOPsaQ2jjglEUFDgG4yhOTWnq/yruZe6ARpcEKCYYTq2jkpNrIq1kMeiQOs/9OUHTlBgoxuZcnAcr/GtVAPGxyaKUnYSC5/IgWymTimgl4THKlUejFFK2wIxX89w0oiSHv0pBgA/z5e0xF6Fzq458Hs=
Received: by 10.82.134.12 with SMTP id h12mr1272628bud.1189709107391;
        Thu, 13 Sep 2007 11:45:07 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Thu, 13 Sep 2007 11:45:07 -0700 (PDT)
Message-ID: <359a92830709131145v5e5b43a0ha42576a546fb61dc@mail.gmail.com>
Date: Thu, 13 Sep 2007 14:45:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <34b8543c0709130714j465b1f44j71f904928ad7b2a4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22295_1438996.1189709107363"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
	 <359a92830709130701m6a67d299k7f43936ee55c86f5@mail.gmail.com>
	 <34b8543c0709130714j465b1f44j71f904928ad7b2a4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22295_1438996.1189709107363
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not entirely sure. So what I'd do if I were you is write a
little test program and step through it in the debugger and
see <G>....

But, if you're only allowing the user to fetch a single document
at a time, I don't think it matters enough to worry about. If, on the
other hand, you're allowing the user to display some combination
of, say, 5 fields for a *list* of documents, I'd make them all lazy
and then you can write a HitCollector to get the list "lazily".

Best
Erick

On 9/13/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> well, actually, I have 5 index directory and it will increase in future.
> and
> the thing is that each document about 20 fields on average. considering
> many
> users may connect to the system (we anticipate 500 users at this time) I
> want to know whether this will make performance issue or not.
>
> we provided a feature to select which fields they want to be displayed so
> I
> know that only 5 or 6 fields are important to my users. I don't know the
> way
> I stated in my last email, I mean searcher.doc(doc_id).get("field_name"),
> make the Lucene to load all fields of the document or only the given name?
> if yes, I mean if all the fields are loaded I think it's better to make
> them
> lazy.
>
> what do you suggest?
>
> thanks
>
>
> On 9/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Do you have any evidence that you're having a performance issue? If
> > not, I'd just do the simple thing and ignore the rest. The performance
> > issues I found were because I was spinning through many, many
> > documents. If you're only worrying about one document at a time,
> > it may not be an issue.
> >
> > If you *are* having performance issues, I'd *strongly* recommend
> > that you measure to find out where the problem is before trying
> > a solution. Otherwise you'll optimize code that isn't the problem.
> >
> > Best
> > Erick
> >
> > On 9/13/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Thanks
> > > as I saw the documents, we can only use this great field selector in
> > > IndexReader.document() method the problem is I have a Searcher in my
> > > result
> > > set structure and when the client calls getString("a_field_name") at
> > that
> > > time I invoke the searcher.doc(current_doc_id).get("a_field_name),
> > > I already collected the result IDs. so in my case, I can't use
> > > FieldSelector.
> > >
> > > Do I have to revise the way of retrieving documents in my code?
> > >
> > >
> > >
> > > On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > >
> > > > Well, it depends on what "improve the search process" means
> > > > in your context <G>..
> > > >
> > > > But I had a case similar to yours that I wrote up in the Wiki where
> > > > my search times improved about 10X by using lazy loading. You
> > > > might want to read that entry here...
> > > >
> > > > http://wiki.apache.org/lucene-java/FieldSelectorPerformance
> > > >
> > > > Note the peculiar characteristics of my data set, I really suspect
> > > > that a 10x improvement in retrieval speed is atypical...
> > > >
> > > > As for when lazily-loaded fields actually get loaded, I didn't
> really
> > > > have to explore it very fully, but a short experiment should do it
> > > > for you.....
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > >
> > > > > Hi Grant,
> > > > > Really thanks for your nice document about advanced Lucene. it was
> > > very
> > > > > useful for me.
> > > > >
> > > > > as I understand, we can set some large fields to be lazily
> loading,
> > > now
> > > > my
> > > > > question is when it will be loaded? it make sense when we call
> > > > > doc.get("field_name")
> > > > > it will load from the index, Am I right?
> > > > >
> > > > > in my application, I've provided a result set structure to
> navigate
> > > > > between
> > > > > results and documents and provide a get(String fieldname) method
> > just
> > > > like
> > > > > java.sql.ResultSet.getString() method, and also this result set
> > > > implements
> > > > > HitCollector in order to collect my own ID rather than Lucene's
> > > document
> > > > > id,
> > > > > so I think I can set my field ID to be loaded always and the other
> > > > fields
> > > > > to
> > > > > be lazily loading, Does this improve the search process?
> > > > >
> > > > > again, thank you very much indeed.
> > > > >
> > > > >
> > > > > On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > > > > >
> > > > > > Hi Mohammad,
> > > > > >
> > > > > > The typical use cases are:
> > > > > > 1. You have several small fields used in a results display and
> one
> > > or
> > > > > > two large fields (i.e. the original document) and you don't want
> > to
> > > > > > pay the cost of loading the large fields for results display
> > because
> > > > > > most of them won't be chosen.  When a result is chosen, the
> lazily
> > > > > > loaded field will be retrieved.
> > > > > >
> > > > > > 2. You only want to load certain fields, or the first field, or
> > you
> > > > > > just want to know the size of a field.
> > > > > >
> > > > > > Basically, it gives you control over how fields are loaded from
> > disk
> > > > > > in Lucene.
> > > > > >
> > > > > > See my ApacheCon Europe presentation
> > http://cnlp.org/presentations/
> > > > > > slides/AdvancedLuceneEU.pdf for a few slides (towards the end)
> on
> > > > > > FieldSelector.
> > > > > >
> > > > > > On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> > > > > >
> > > > > > > Hi all,
> > > > > > >
> > > > > > > Can anyone explain what is the FieldSelector and the usage or
> > > > > > > benefits of
> > > > > > > this structure? I read the javadocs but I can't get for what
> > goal
> > > > > > > it is
> > > > > > > provided in Lucene.
> > > > > > >
> > > > > > > Thanks in advance
> > > > > > >
> > > > > > > --
> > > > > > > Regards,
> > > > > > > Mohammad
> > > > > > > --------------------------
> > > > > > > see my blog: http://brainable.blogspot.com/
> > > > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > > >
> > > > > > --------------------------
> > > > > > Grant Ingersoll
> > > > > > http://lucene.grantingersoll.com
> > > > > >
> > > > > > Lucene Helpful Hints:
> > > > > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > > > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > > --------------------------
> > > > > see my blog: http://brainable.blogspot.com/
> > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_22295_1438996.1189709107363--

From java-user-return-30251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 19:34:48 2007
Return-Path: <java-user-return-30251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91602 invoked from network); 13 Sep 2007 19:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 19:34:47 -0000
Received: (qmail 86392 invoked by uid 500); 13 Sep 2007 19:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86359 invoked by uid 500); 13 Sep 2007 19:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86348 invoked by uid 99); 13 Sep 2007 19:34:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 12:34:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 19:36:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1303271C3C0; Thu, 13 Sep 2007 12:34:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0EF9771C3BF
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 12:34:11 -0700 (PDT)
Date: Thu, 13 Sep 2007 12:34:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search results with sort
In-Reply-To: <12590769.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0709131232090.25770@radix.cryptio.net>
References: <12590769.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    I have this exception there are more terms than documents in field
: "Title", but it's impossible to sort on tokenized fields.
: 
:    I'm try to sort the result by Title and the field title is un_tokenized
: and it has only one term such as document, 06, rational, etc, and some other
: fields have tokenized.

if you are getting that exception, then i'm 99% certain you have at least 
one doc in your index that either:
  a) has multiple values for the Title field
  b) has a Title field that was added as TOKENIZED

... the only possible way i can think of for the code path that 
generates that error to be triggered is in one of those situations ... 
perhaps you changed your code at some point and didn't remove all the old 
documents from your index?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 19:38:17 2007
Return-Path: <java-user-return-30252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92110 invoked from network); 13 Sep 2007 19:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 19:38:16 -0000
Received: (qmail 95003 invoked by uid 500); 13 Sep 2007 19:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94892 invoked by uid 500); 13 Sep 2007 19:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94881 invoked by uid 99); 13 Sep 2007 19:38:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 12:38:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 19:39:42 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 6FF942EF2E
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 15:37:40 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 13 Sep 2007 15:37:40 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 9F5311E9A3; Thu, 13 Sep 2007 15:37:40 -0400 (EDT)
Message-Id: <1189712260.26961.1210521695@webmail.messagingengine.com>
X-Sasl-Enc: sKaGa8cq+VhzYQ1m/l4V51lHH+uy0K+OC82aHomIM0LX 1189712260
From: "Dan Luria" <dan@dotdan.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <1189631219.740.1210334963@webmail.messagingengine.com>
   <359a92830709130655l2bb67bfcud26276aa0a1036de@mail.gmail.com>
Subject: Re: Tokenization question
In-Reply-To: <359a92830709130655l2bb67bfcud26276aa0a1036de@mail.gmail.com>
Reply-To: dan@dotdan.com
Date: Thu, 13 Sep 2007 15:37:40 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

What I do is

Doc1 = source_doc
Doc2 = new Document()
foreach (field f in doc1.getfields) {
Doc2.Add(new Field(doc1.getField(key), doc1.getField(value));
}

but when i pull the fields from Doc1, i never get the tokenized field..
it just doesnt appear. 

so my question is -- i can see that field in the index, and search
against it, but how do i transfer it to a different index?

(PS: The above is pseudo-code... not syntax)


On Thu, 13 Sep 2007 09:55:31 -0400, "Erick Erickson"
<erickerickson@gmail.com> said:
> If I'm understanding you correctly, the answer is... maybe, kinda.
> Take a look at some of the Luke code. That tries to reconstruct
> document fields from the index, but it's lossy. So it depends
> upon what kind of fidelity you need.
> 
> Erick
> 
> On 9/12/07, Dan Luria <dan@dotdan.com> wrote:
> >
> > If I have a tokenized unstored field in a document, and I want to
> > transfer the document to another index, is it possible to carry of the
> > tokenization with terms?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 13 21:06:23 2007
Return-Path: <java-user-return-30253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19263 invoked from network); 13 Sep 2007 21:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Sep 2007 21:06:21 -0000
Received: (qmail 12645 invoked by uid 500); 13 Sep 2007 21:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12610 invoked by uid 500); 13 Sep 2007 21:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12570 invoked by uid 99); 13 Sep 2007 21:06:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 14:06:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 21:06:03 +0000
Received: by nz-out-0506.google.com with SMTP id i28so429910nzi
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 14:05:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=XCBXQPV9A0/lluWon0qRW8kbmVoCdRqoRuD0VdCItVw=;
        b=cAJSZE3T5kJPkGHHL3vkCctHIb9JiDsjf6SMbvpq5pE8Uy/k41EgWSHKuVXYczSCeqGjK2RHMYL7dEli9FspsI9YxP+r0GIyM6c4Z7q7gbMKzgqpRZeQm9LJpH7Heka9H69fVKhMxVVG9MWTuxm6+g9U3Tz3Kte3U8hnAqZMn3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=DXLeCBMuWLoeayGHNrybPumz+BAxlgcQ/GcEdQSsE3oyJwwKDxa+fvfznOW4xRn9EvTsKHq2CfYx74SwRje2oERKADbIBHRW3BLTATjUMTld0YYlvUd2PXRLS6i76d1E8i0GASQjL5weTnNqxF07E6j/g56XLKIAm/0c2pMhOmY=
Received: by 10.142.154.20 with SMTP id b20mr254795wfe.1189717541005;
        Thu, 13 Sep 2007 14:05:41 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id n9sm8231183wag.2007.09.13.14.05.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Sep 2007 14:05:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1189712260.26961.1210521695@webmail.messagingengine.com>
References: <1189631219.740.1210334963@webmail.messagingengine.com> <359a92830709130655l2bb67bfcud26276aa0a1036de@mail.gmail.com> <1189712260.26961.1210521695@webmail.messagingengine.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ABD5BA47-3D4B-472B-88CF-4860553AD6FD@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Tokenization question
Date: Thu, 13 Sep 2007 14:05:34 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 13-Sep-07, at 12:37 PM, Dan Luria wrote:

> What I do is
>
> Doc1 = source_doc
> Doc2 = new Document()
> foreach (field f in doc1.getfields) {
> Doc2.Add(new Field(doc1.getField(key), doc1.getField(value));
> }
>
> but when i pull the fields from Doc1, i never get the tokenized  
> field..
> it just doesnt appear.
>
> so my question is -- i can see that field in the index, and search
> against it, but how do i transfer it to a different index?
>
> (PS: The above is pseudo-code... not syntax)

indexed document fields are not stored anywhere.  There are bits and  
pieces of the document all over the place (this is the nature of an  
inverted index).

You can (quite time-consumedly) reconstruct by iterating over the  
whole index.  I think luke can do this.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 01:52:51 2007
Return-Path: <java-user-return-30254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22498 invoked from network); 14 Sep 2007 01:52:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 01:52:50 -0000
Received: (qmail 30119 invoked by uid 500); 14 Sep 2007 01:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30081 invoked by uid 500); 14 Sep 2007 01:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30070 invoked by uid 99); 14 Sep 2007 01:52:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 18:52:37 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 01:54:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IW0Lu-0002Ce-4S
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 18:52:14 -0700
Message-ID: <12667066.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 18:52:14 -0700 (PDT)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search results with sort
In-Reply-To: <Pine.LNX.4.62.0709131232090.25770@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <12590769.post@talk.nabble.com> <Pine.LNX.4.62.0709131232090.25770@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks.

   However, I tested with more terms in title field, for instance, lucene
sort, abc_def, and that works.

   I deleted the old index file and re-index the whole documents again, and
it works fine. So, I'm little bit confuse about how that really work.

   Please advise.
-- 
View this message in context: http://www.nabble.com/search-results-with-sort-tf4413911.html#a12667066
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 02:18:44 2007
Return-Path: <java-user-return-30255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29212 invoked from network); 14 Sep 2007 02:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 02:18:41 -0000
Received: (qmail 48036 invoked by uid 500); 14 Sep 2007 02:18:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47993 invoked by uid 500); 14 Sep 2007 02:18:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47982 invoked by uid 99); 14 Sep 2007 02:18:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 19:18:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 02:20:08 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B6CB030EFC17; Thu, 13 Sep 2007 20:18:04 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 3055630EFC16
	for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 20:17:54 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46E9713E.2050404@sirma.bg>
References: <46E9713E.2050404@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A15748DE-1E14-41FC-BD4D-F48D4D35F57C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Treating values of numeric fields as numbers
Date: Thu, 13 Sep 2007 22:17:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

Ivan - have you considered using NumberUtils?

   <http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
javadoc/org/apache/lucene/document/NumberTools.html>


I'm curious if those utility methods solve the same problem you're  
working on.

	Erik


On Sep 13, 2007, at 1:19 PM, Ivan Vasilev wrote:

> Hi All,
>
> I have made some changes in my Lucene source, so that values of  
> numeric fields to be treated as numbers but not as Strings. After  
> testing everything seems to work correctly, but I still would like  
> to know your opinion about this.
> So my approach is the following:
>
> 1. As during the indexing process the terms are ordered according  
> their values I made changes in the methods TermBuffer.compareTo 
> (TermBuffer other) and Term.compareTo(Term other) so that when the  
> filed contains numeric data comparison to be made based on numeric  
> logic (Integer.compareto(..), Float.compareTo(..)). So this orders  
> terms based on numeric logic but not based on lexicographical one.
>
> 2. To work correctly range searches similar changes were made in  
> RangeFilter.bits(IndexReader reader) and RangeQuery.rewrite 
> (IndexReader reader) methods.
>
> Changes seem to be very simple, but I did not found case when they  
> lead to wrong behavior.
> Before these changes to make range queries on numeric fields I made  
> values of those fields with fixed length so that the  
> lexicographical order to be the same like the numeric one. So I had  
> to keep dates in some fields and I made them 13 length fields that  
> keep UTC representation of the date. When the UTC was short I  
> prefixed it with zeroes. This made range searches to work correctly  
> for the time interval 1970 - 2280 approximately. Now with the new  
> implementation I do not have any restrictions about this time  
> interval.
>
> So before some time I digged in Lucene forum and saw there were  
> some discussions about this. So if anybody uses also such approach,  
> or have bad experience with it, please tell me.
> Tanks in advance.
>
>
> Best Regards,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 04:22:11 2007
Return-Path: <java-user-return-30256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48782 invoked from network); 14 Sep 2007 04:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 04:22:10 -0000
Received: (qmail 8270 invoked by uid 500); 14 Sep 2007 04:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8239 invoked by uid 500); 14 Sep 2007 04:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8228 invoked by uid 99); 14 Sep 2007 04:21:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 21:21:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devinbhullar@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 04:21:56 +0000
Received: by wa-out-1112.google.com with SMTP id j40so936110wah
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 21:21:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=mw9hQvGTDMQ56toyT1bjqx5mgKXYD04ugfMxFfm+Xqk=;
        b=YoLmFGVWPvClboB6l3nIShcST1Thk2ffrybW3bIGa0DdFlqHlpJWiq4oqL2s4KY1qBOvDYQ6pd75hCwmllP437w0KgahK1z7No9BahTQW4xHTugpHgTfijgN/SdSiOcxa1+9QJ2cydF/BE3HNpzEsSx4s1hOt3Iu7uF+3TTZnB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Mb8Xx+4SlvMumXAz3PgU3xKLlEDSkc4O3jUzwqu3hc8bCn5XnwRrukN9Sn+2VPpqTfyXz2dHGEVbIs3LkTF1rykNxouI5VzkNWPUtXP2hbxgNh3RshOzA7azFW+np7vwsQ5yba/16KBhYljY6SFcX0ZWs3Ns3FLqSDvxU0tmARc=
Received: by 10.114.176.1 with SMTP id y1mr1262422wae.1189743695558;
        Thu, 13 Sep 2007 21:21:35 -0700 (PDT)
Received: by 10.141.29.4 with HTTP; Thu, 13 Sep 2007 21:21:35 -0700 (PDT)
Message-ID: <8a8640570709132121o3bc5e794iac21c289a69d16b9@mail.gmail.com>
Date: Fri, 14 Sep 2007 12:21:35 +0800
From: "Devinder Singh" <devinbhullar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene
In-Reply-To: <46E96278.7090803@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_264_27982078.1189743695539"
References: <8a8640570709130233p7dbcc2b6hcfb072f5a3e8f7b0@mail.gmail.com>
	 <46E96278.7090803@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_264_27982078.1189743695539
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> Hi
>
> I want to use Apache Lucene to do a full text search for Postgresql.
>
> May i know the set up requirements and if it supports postgresql
>
> --
> Devinder




-- 
Devinder

------=_Part_264_27982078.1189743695539--

From java-user-return-30257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 05:20:45 2007
Return-Path: <java-user-return-30257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63187 invoked from network); 14 Sep 2007 05:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 05:20:43 -0000
Received: (qmail 35176 invoked by uid 500); 14 Sep 2007 05:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35137 invoked by uid 500); 14 Sep 2007 05:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35125 invoked by uid 99); 14 Sep 2007 05:20:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 22:20:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 05:20:26 +0000
Received: by nf-out-0910.google.com with SMTP id d3so551698nfc
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 22:20:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=7UFcDksPOK6BRixtQGiIKOEBgfJjLn7AkKiyFxlfwg4=;
        b=i8OsHWEGvSwauL5871+eLEuP3KvHuHswZJRIU1pDfmHClvr6KYtdvone49djdwQfCykQwHMMjByDKC87M5C6CzutP93PXPrmYdAbT6GNuByH5FBbKrCOh+r+YXCwxswGS18Do7BkaFXDBnK5SASleK0Jxx2Ltcb47ckM0HZ8Qcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uPCBccPrvjo/8fBlF3s+V8eE7bDn7Y5cqYEsaOmGOKrGhz/srglPLuAX/NqeX6qfAATpyw2F294/xoA6FpAPJLRJIrq9cyRCtVYnRgmf9WLbtABHgipBKy7lh2dk9Nm2aJh2n/HicxoiUOXJ5lLMAF7FYZyZB45RlKES6xBTu5k=
Received: by 10.78.140.16 with SMTP id n16mr762982hud.1189747203949;
        Thu, 13 Sep 2007 22:20:03 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Thu, 13 Sep 2007 22:20:03 -0700 (PDT)
Message-ID: <6e3ae6310709132220v31cda16apa0b1f7541c27dbf8@mail.gmail.com>
Date: Thu, 13 Sep 2007 22:20:03 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene
In-Reply-To: <8a8640570709132121o3bc5e794iac21c289a69d16b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_255_21865418.1189747203946"
References: <8a8640570709130233p7dbcc2b6hcfb072f5a3e8f7b0@mail.gmail.com>
	 <46E96278.7090803@apache.org>
	 <8a8640570709132121o3bc5e794iac21c289a69d16b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_255_21865418.1189747203946
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, Devinder,

Lucene is agnostic of any database configuration. You need to pull data via
jdbc out, and feed it to Lucene to create an index file, and then use Lucene
API to search on it.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 9/13/07, Devinder Singh <devinbhullar@gmail.com> wrote:
>
> > Hi
> >
> > I want to use Apache Lucene to do a full text search for Postgresql.
> >
> > May i know the set up requirements and if it supports postgresql
> >
> > --
> > Devinder
>
>
>
>
> --
> Devinder
>

------=_Part_255_21865418.1189747203946--

From java-user-return-30258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 05:22:40 2007
Return-Path: <java-user-return-30258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64163 invoked from network); 14 Sep 2007 05:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 05:22:39 -0000
Received: (qmail 38911 invoked by uid 500); 14 Sep 2007 05:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38872 invoked by uid 500); 14 Sep 2007 05:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38860 invoked by uid 99); 14 Sep 2007 05:22:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 22:22:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devinbhullar@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 05:22:22 +0000
Received: by wa-out-1112.google.com with SMTP id j40so951541wah
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 22:22:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=A4Xl4hZHPbtA20fZOoT6Yj5LjoaZINRYBQvjAIQ1QD4=;
        b=TiS6ccjzLMHwTmxBF7/rnDCbsqxyexQg9P1+82poNd1T9pIvx1aPXYx8Qi0PErplnw7rqRUfCyRTr6om7t0x+FuR4CvNMn6eGzys1MOdley5la1hKLeLaTvmK3E2dd/Zgo6vZp0gmw463NaI16dnjQ5alelUObbshuEGT2/jyQ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IkuYQ5+bENvdaPfLYHemDgco0xVZSWqp0JZ0gn0uIn1G8inY7tAhWZSlvTWf1T2WIV1yF9CLwd8OiVipVBkEr3XhBpKPBBKOWdsM2nkzHsOlMYMK6vuXwp76ICgKgw7DwRjDCoHxxFYbac9Z1JFy8FCCpnu1UFmvwlG4HR1kMTw=
Received: by 10.114.202.15 with SMTP id z15mr1312562waf.1189747321441;
        Thu, 13 Sep 2007 22:22:01 -0700 (PDT)
Received: by 10.141.29.4 with HTTP; Thu, 13 Sep 2007 22:22:01 -0700 (PDT)
Message-ID: <8a8640570709132222o78056475gdb4b074a16f6df0b@mail.gmail.com>
Date: Fri, 14 Sep 2007 13:22:01 +0800
From: "Devinder Singh" <devinbhullar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene
In-Reply-To: <6e3ae6310709132220v31cda16apa0b1f7541c27dbf8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_335_24056700.1189747321421"
References: <8a8640570709130233p7dbcc2b6hcfb072f5a3e8f7b0@mail.gmail.com>
	 <46E96278.7090803@apache.org>
	 <8a8640570709132121o3bc5e794iac21c289a69d16b9@mail.gmail.com>
	 <6e3ae6310709132220v31cda16apa0b1f7541c27dbf8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_335_24056700.1189747321421
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris

Thanks do you also have a channel on IRC so we wan communicate.

Devinder


On 14/09/2007, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi, Devinder,
>
> Lucene is agnostic of any database configuration. You need to pull data
> via
> jdbc out, and feed it to Lucene to create an index file, and then use
> Lucene
> API to search on it.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> On 9/13/07, Devinder Singh <devinbhullar@gmail.com> wrote:
> >
> > > Hi
> > >
> > > I want to use Apache Lucene to do a full text search for Postgresql.
> > >
> > > May i know the set up requirements and if it supports postgresql
> > >
> > > --
> > > Devinder
> >
> >
> >
> >
> > --
> > Devinder
> >
>



-- 
Devinder

------=_Part_335_24056700.1189747321421--

From java-user-return-30259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 05:24:18 2007
Return-Path: <java-user-return-30259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64733 invoked from network); 14 Sep 2007 05:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 05:24:17 -0000
Received: (qmail 41809 invoked by uid 500); 14 Sep 2007 05:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41510 invoked by uid 500); 14 Sep 2007 05:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41499 invoked by uid 99); 14 Sep 2007 05:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 22:24:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devinbhullar@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 05:24:00 +0000
Received: by rv-out-0910.google.com with SMTP id k20so526740rvb
        for <java-user@lucene.apache.org>; Thu, 13 Sep 2007 22:23:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=r0xmME/nMHdcQv7+f0MOeNFquXIPPpr8IbhvlOYF+0g=;
        b=ckuvv5yPhJZzm3ZgUjakM0nlplyFDuVQETrrYQP9vyyqe4rnMrv5fD1MeXs+dyAxsSX0cRDS0+TEjUeRAW1WXYkTlcIo1TNcNEPj2rhu5UHSVnn83ULxUqssjKhWQaf+XgrPtLCqraraOJLq9kFPMsY9AWNtMfMLnTpvNtOPgLg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uUnV5kl+d0ZEoL6Rg9Yq+gpmt5MnjFoWvkvoZdh3EGL+f1QsxdRXIyDzVp+G/uReRlX/X8pt2tN6gC8rdLvma/ciSpEgl+ZxDsvwC7wRPap9r+t8h7jPztbNUD6ZKiaYwComsKx3FBL3JsESZ2Qn+vHJoeJEx1vvEdP+anCTxPk=
Received: by 10.115.58.1 with SMTP id l1mr1315184wak.1189747416748;
        Thu, 13 Sep 2007 22:23:36 -0700 (PDT)
Received: by 10.141.29.4 with HTTP; Thu, 13 Sep 2007 22:23:36 -0700 (PDT)
Message-ID: <8a8640570709132223q3e1f59d5g12e5283913932eea@mail.gmail.com>
Date: Fri, 14 Sep 2007 13:23:36 +0800
From: "Devinder Singh" <devinbhullar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene
In-Reply-To: <8a8640570709132222o78056475gdb4b074a16f6df0b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_338_11844324.1189747416744"
References: <8a8640570709130233p7dbcc2b6hcfb072f5a3e8f7b0@mail.gmail.com>
	 <46E96278.7090803@apache.org>
	 <8a8640570709132121o3bc5e794iac21c289a69d16b9@mail.gmail.com>
	 <6e3ae6310709132220v31cda16apa0b1f7541c27dbf8@mail.gmail.com>
	 <8a8640570709132222o78056475gdb4b074a16f6df0b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_338_11844324.1189747416744
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to know what type of setup i need to get started with Lucene.

Do i need Java and Apache Tomcat on Windows XP.


Devinder


On 14/09/2007, Devinder Singh <devinbhullar@gmail.com> wrote:
>
> Hi Chris
>
> Thanks do you also have a channel on IRC so we wan communicate.
>
> Devinder
>
>
>  On 14/09/2007, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi, Devinder,
> >
> > Lucene is agnostic of any database configuration. You need to pull data
> > via
> > jdbc out, and feed it to Lucene to create an index file, and then use
> > Lucene
> > API to search on it.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> >
> > On 9/13/07, Devinder Singh <devinbhullar@gmail.com> wrote:
> > >
> > > > Hi
> > > >
> > > > I want to use Apache Lucene to do a full text search for Postgresql.
> >
> > > >
> > > > May i know the set up requirements and if it supports postgresql
> > > >
> > > > --
> > > > Devinder
> > >
> > >
> > >
> > >
> > > --
> > > Devinder
> > >
> >
>
>
>
> --
> Devinder




-- 
Devinder

------=_Part_338_11844324.1189747416744--

From java-user-return-30260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 05:28:26 2007
Return-Path: <java-user-return-30260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65752 invoked from network); 14 Sep 2007 05:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 05:28:25 -0000
Received: (qmail 43880 invoked by uid 500); 14 Sep 2007 05:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43836 invoked by uid 500); 14 Sep 2007 05:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43825 invoked by uid 99); 14 Sep 2007 05:28:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Sep 2007 22:28:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 05:29:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IW3iU-0006RT-UI
	for java-user@lucene.apache.org; Thu, 13 Sep 2007 22:27:46 -0700
Message-ID: <12668746.post@talk.nabble.com>
Date: Thu, 13 Sep 2007 22:27:46 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <1189695196.8650.1210472501@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It works finally .i use Lucene 2.2  in my application.thanks testn and Mike

Michael McCandless-2 wrote:
> 
> 
> It sounds like there may be a Lucene version mismatch?  When Luke was used
> it was likely based on Lucene 2.2, but it sounds like an older version of
> Lucene is now being used to open the index?
> 
> Mike
> 
> "testn" <test1@doramail.com> wrote:
>> 
>> Should the file be "segments_8" and "segments.gen"? Why is it "Segment"?
>> The
>> case is different.
>> 
>> 
>> Sebastin wrote:
>> > 
>> > java.io.IoException:File Not Found- Segments  is the error message
>> > 
>> > testn wrote:
>> >> 
>> >> What is the error message? Probably Mike, Erick or Yonik can help you
>> >> better on this since I'm no one in index area.
>> >> 
>> >> Sebastin wrote:
>> >>> 
>> >>> HI testn,
>> >>>              1.I optimize the Large Indexes of size 10 GB using
>> Luke.it
>> >>> optimize all the content into a single CFS file and it generates
>> >>> segments.gen and segments_8 file when i search the item it shows an
>> >>> error that segments file is not there.could you help me in this 
>> >>> 
>> >>> testn wrote:
>> >>>> 
>> >>>> 1. You can close the searcher once you're done. If you want to
>> reopen
>> >>>> the index, you can close and reopen only the updated 3 readers and
>> keep
>> >>>> the 2 old indexreaders and reuse it. It should reduce the time to
>> >>>> reopen it.
>> >>>> 2. Make sure that you optimize it every once in a while
>> >>>> 3. You might consider separating indices in separated storage and
>> use
>> >>>> ParallelReader
>> >>>> 
>> >>>> 
>> >>>> 
>> >>>> Sebastin wrote:
>> >>>>> 
>> >>>>> The problem in my pplication are as follows:
>> >>>>>                  1.I am not able to see the updated records in my
>> >>>>> index store because i instantiate 
>> >>>>> IndexReader and IndexSearcher class once that is in the first
>> >>>>> search.further searches use the same IndexReaders(5 Directories)
>> and
>> >>>>> IndexSearcher with different queries.
>> >>>>> 
>> >>>>>                 2.My search is very very slow First 2 Directories
>> of
>> >>>>> size 10 GB each which are having old index records and no update in
>> >>>>> that remaining 3 Diretories are updated every second.
>> >>>>> 
>> >>>>>                 3.i am Indexing 20 million records per day so the
>> >>>>> Index store gets growing and it makes search very very slower.
>> >>>>>  
>> >>>>>                4.I am using searcherOne class as the global
>> >>>>> application helper class ,with the scope as APPLICATION it consists
>> of
>> >>>>> one IndexReader and IndexSearcher get set method which will hold
>> the
>> >>>>> IndexReader and IndexSearcher object after the First Search.it is
>> used
>> >>>>> for all other searches.
>> >>>>> 
>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>> Application
>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>> Fields.i
>> >>>>> am not using any sort in my query.for a single query upto the
>> maximum
>> >>>>> it fetches 600 records from the index store(5 direcories)    
>> >>>>>                 
>> >>>>> 
>> >>>>> hossman wrote:
>> >>>>>> 
>> >>>>>> 
>> >>>>>> : I set IndexSearcher as the application Object after the first
>> >>>>>> search.
>> >>>>>> 	...
>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour to
>> see
>> >>>>>> the
>> >>>>>> : updated records .
>> >>>>>> 
>> >>>>>> i'm confused ... my understanding based on the comments you made
>> >>>>>> below 
>> >>>>>> (in an earlier message) was that you already *were* constructing a
>> >>>>>> new  
>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>> memory 
>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>> >>>>>> 
>> >>>>>> if that's not what you said, then i think you need to explain, in
>> >>>>>> detail, 
>> >>>>>> in one message, exactly what your problem is.  And don't assume we 
>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for example,
>> what
>> >>>>>> the 
>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>> answer
>> >>>>>> to 
>> >>>>>> the specfic question i asked in my last message: does your
>> >>>>>> application, 
>> >>>>>> contain anywhere in it, any code that will close anything
>> >>>>>> (IndexSearchers 
>> >>>>>> or IndexReaders) ?
>> >>>>>> 
>> >>>>>> 
>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5 crore
>> to
>> >>>>>> 6 crore.
>> >>>>>> : > for
>> >>>>>> : > : every second i am updating my Index. i instantiate
>> >>>>>> IndexSearcher object
>> >>>>>> : > one
>> >>>>>> : > : time for all the searches. for an hour can i see the updated
>> >>>>>> records in
>> >>>>>> : > the
>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>> >>>>>> problem when
>> >>>>>> : > i
>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>> >>>>>> there any
>> >>>>>> 
>> >>>>>> 
>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>> >>>>>> IndexSearcher as 
>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>> MultiReader?
>> >>>>>> 
>> >>>>>> 
>> >>>>>> 
>> >>>>>> 
>> >>>>>> -Hoss
>> >>>>>> 
>> >>>>>> 
>> >>>>>>
>> ---------------------------------------------------------------------
>> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>>> 
>> >>>>>> 
>> >>>>>> 
>> >>>>> 
>> >>>>> 
>> >>>> 
>> >>>> 
>> >>> 
>> >>> 
>> >> 
>> >> 
>> > 
>> > 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12668746
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 07:48:51 2007
Return-Path: <java-user-return-30261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21680 invoked from network); 14 Sep 2007 07:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 07:48:50 -0000
Received: (qmail 94546 invoked by uid 500); 14 Sep 2007 07:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94506 invoked by uid 500); 14 Sep 2007 07:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94495 invoked by uid 99); 14 Sep 2007 07:48:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 00:48:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 07:48:34 +0000
Received: by nz-out-0506.google.com with SMTP id i28so521663nzi
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 00:48:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=24cn0cvBFZ7B7akNxLyoU1HPssZpxG8F8bEO6ZPFyd4=;
        b=XFtkcjqI9omVWbxhqkM0g0W3kKrAt4uNDdfCJ8AMLeD9L5vBiNHcFxvymqSKQE8LHtfpZxcrLo498hBpOi16nmhf5UJ81fkpgHGYtBrDQl9LjCYG0JHNFW1Wd8J46colq2SJ9wp3uxI+6r1b8qlrkoqbfpRtuhaU+DXuCiavJP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Vq1eLBQQD1vpJzGk1SDFAo9gb3bp+ISCUv6jQWIWyPV5kVSipqOwyY1DUoE31juI73eZZP8b+fmPPRb98bDhlIGRaEUsm/UYoOaFWZCquy8A26nGBI5sTy5GtngjL/9JVKFMAgOkJFZ5a1xrMf59LVD5vtq8Ew+Z3suTcWZbLRs=
Received: by 10.65.103.14 with SMTP id f14mr3590298qbm.1189756092996;
        Fri, 14 Sep 2007 00:48:12 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Fri, 14 Sep 2007 00:48:12 -0700 (PDT)
Message-ID: <34b8543c0709140048h7dadfc6aoba04ce46fae4d3f8@mail.gmail.com>
Date: Fri, 14 Sep 2007 11:18:12 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <359a92830709131145v5e5b43a0ha42576a546fb61dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_813_4659853.1189756092985"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
	 <359a92830709130701m6a67d299k7f43936ee55c86f5@mail.gmail.com>
	 <34b8543c0709130714j465b1f44j71f904928ad7b2a4@mail.gmail.com>
	 <359a92830709131145v5e5b43a0ha42576a546fb61dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_813_4659853.1189756092985
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

actually, I show the result with pagination support, and they have option to
choose the number of records per page. and yes, I should provide a test
program, but about the HitCollector, I already created one, and collect all
lucene's document id and also my needed ID that stored in the index

>> you can write a HitCollector to get the list "lazily".

do you mean by writing a HitCollector, all the list will load lazily and no
need to use FieldSelector?


thanks

On 9/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I'm not entirely sure. So what I'd do if I were you is write a
> little test program and step through it in the debugger and
> see <G>....
>
> But, if you're only allowing the user to fetch a single document
> at a time, I don't think it matters enough to worry about. If, on the
> other hand, you're allowing the user to display some combination
> of, say, 5 fields for a *list* of documents, I'd make them all lazy
> and then you can write a HitCollector to get the list "lazily".
>
> Best
> Erick
>
>
-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_813_4659853.1189756092985--

From java-user-return-30262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 10:24:18 2007
Return-Path: <java-user-return-30262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60362 invoked from network); 14 Sep 2007 10:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 10:24:17 -0000
Received: (qmail 86982 invoked by uid 500); 14 Sep 2007 10:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86938 invoked by uid 500); 14 Sep 2007 10:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86927 invoked by uid 99); 14 Sep 2007 10:24:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 03:24:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 10:24:00 +0000
Received: from ix.urz.uni-heidelberg.de (cyrus1.urz.uni-heidelberg.de [129.206.119.235])
	by relay2.uni-heidelberg.de (8.13.8/8.13.8) with ESMTP id l8EANd1X028100
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 12:23:39 +0200
Received: from extmail.urz.uni-heidelberg.de (extmail.urz.uni-heidelberg.de [129.206.100.140])
	by ix.urz.uni-heidelberg.de (8.8.8/8.8.8) with ESMTP id MAA17768558
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 12:23:37 +0200
Received: from [192.168.2.100] (p57B1A6D1.dip0.t-ipconnect.de [87.177.166.209])
	(authenticated bits=0)
	by extmail.urz.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id l8EANYKw015146
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 12:23:35 +0200
Message-ID: <46EA614B.7090200@sino.uni-heidelberg.de>
Date: Fri, 14 Sep 2007 12:24:11 +0200
From: Jennifer May <jenny@sino.uni-heidelberg.de>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: HTMLParser and Chinese
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I want to index an HTML document with the lucene demo, but have problems 
parsing some Chinese files.

I changed code in the HTMLDocument class as to be able to define the 
encoding of the document to be parsed:
InputStreamReader fis = new InputStreamReader(new FileInputStream(f), 
IndexHTML.encoding);
HTMLParser parser = new HTMLParser(fis);

It works fine for most of my files in GB, Big5 or UTF-8. However, I get 
the following exception for some of my files:
Parse Aborted: Lexical error at line 6, column 24. Encountered: "\u4f53" 
(20307), after : ""

The HTML document looks like this:

<HTML><HEAD><meta http-equiv="Content-Type" content="text/html; charset=GB2312"><TITLE>()</TITLE>
<META NAME="keywords" CONTENT="  ">...

Obviously, the Chinese in the meta-tag is the problem. But why? And how 
to solve it?

JTidy parses the same file without errors, but than I have problems with 
the indexing as the JTidyparser takes only InputStreams without 
specified encoding, not InputStreamReaders (at least as far as I found 
out). Even if I convert my file from the original GB to UTF-8 I get only 
gibberish in the Lucene index when using JTidy for parsing.

Thanks in advance for any suggestions either to get around the 
HTMLParser problem or get JTidy to handle different encodings,
Jenny

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 12:27:23 2007
Return-Path: <java-user-return-30263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12286 invoked from network); 14 Sep 2007 12:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 12:27:22 -0000
Received: (qmail 19666 invoked by uid 500); 14 Sep 2007 12:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19408 invoked by uid 500); 14 Sep 2007 12:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19397 invoked by uid 99); 14 Sep 2007 12:27:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 05:27:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.135] (HELO redhat.sirma.bg) (62.213.161.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 12:28:44 +0000
Received: from [192.168.128.140] ([192.168.128.140])
	(authenticated bits=0)
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id l8ECQV53031472
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 15:26:36 +0300
Message-ID: <46EA7DF5.8010909@sirma.bg>
Date: Fri, 14 Sep 2007 15:26:29 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Treating values of numeric fields as numbers
References: <46E9713E.2050404@sirma.bg> <A15748DE-1E14-41FC-BD4D-F48D4D35F57C@ehatchersolutions.com>
In-Reply-To: <A15748DE-1E14-41FC-BD4D-F48D4D35F57C@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

Yes they help for particularly this problem - they shrik all avilable 
Longs to 14 character strings. So they free me from the limitation that 
I wrote about (1970 - 2280 years).
So now the advantage that I have with treating fields representing UTC 
dates as numbers (but not as strings) seems to be some times smaller. If 
storing UTCs in radix 36 and considering the real situation in my case - 
I have only 2 UTC-fields with which keep dates of theese years I will 
save approximate 20MB for 1 million docs which is 0,5 - 2 % of the index 
size.

But may be this approach that I describe in my first mail (and tested it 
successfully by now) will help to someone who uses float values in the 
index or longs that vary reasonably in length.

Best Regards,
Ivan

Erik Hatcher wrote:
> Ivan - have you considered using NumberUtils?
>
>   
> <http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/NumberTools.html> 
>
>
>
> I'm curious if those utility methods solve the same problem you're 
> working on.
>
>     Erik
>
>
> On Sep 13, 2007, at 1:19 PM, Ivan Vasilev wrote:
>
>> Hi All,
>>
>> I have made some changes in my Lucene source, so that values of 
>> numeric fields to be treated as numbers but not as Strings. After 
>> testing everything seems to work correctly, but I still would like to 
>> know your opinion about this.
>> So my approach is the following:
>>
>> 1. As during the indexing process the terms are ordered according 
>> their values I made changes in the methods 
>> TermBuffer.compareTo(TermBuffer other) and Term.compareTo(Term other) 
>> so that when the filed contains numeric data comparison to be made 
>> based on numeric logic (Integer.compareto(..), Float.compareTo(..)). 
>> So this orders terms based on numeric logic but not based on 
>> lexicographical one.
>>
>> 2. To work correctly range searches similar changes were made in 
>> RangeFilter.bits(IndexReader reader) and 
>> RangeQuery.rewrite(IndexReader reader) methods.
>>
>> Changes seem to be very simple, but I did not found case when they 
>> lead to wrong behavior.
>> Before these changes to make range queries on numeric fields I made 
>> values of those fields with fixed length so that the lexicographical 
>> order to be the same like the numeric one. So I had to keep dates in 
>> some fields and I made them 13 length fields that keep UTC 
>> representation of the date. When the UTC was short I prefixed it with 
>> zeroes. This made range searches to work correctly for the time 
>> interval 1970 - 2280 approximately. Now with the new implementation I 
>> do not have any restrictions about this time interval.
>>
>> So before some time I digged in Lucene forum and saw there were some 
>> discussions about this. So if anybody uses also such approach, or 
>> have bad experience with it, please tell me.
>> Tanks in advance.
>>
>>
>> Best Regards,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2528 (20070913) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 13:40:16 2007
Return-Path: <java-user-return-30264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46037 invoked from network); 14 Sep 2007 13:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 13:40:15 -0000
Received: (qmail 14755 invoked by uid 500); 14 Sep 2007 13:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14463 invoked by uid 500); 14 Sep 2007 13:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14449 invoked by uid 99); 14 Sep 2007 13:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 06:40:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 13:39:56 +0000
Received: by an-out-0708.google.com with SMTP id c5so129305anc
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 06:39:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=XVPp+TamNRvIVbS8azsMSEArR0QUmDo4gmMrjIqXdOo=;
        b=P9GGgL3+8PHtxoNtnYmQhGXREHdKmZ6Ox3DuWo00Sd5Wuwrwj5YnBXHkgkuFfAkKvUyv3+g9KLFJNiXxI7a21fd24g3jPGvic3pIeetCrPBjULMjZBciYuTumxmiw01b6QS2f4q0I4hyxscm2zZfW8Jv4Ts7v/kNsNl0+oq0eaA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=AS++iJPduoOhGrqeRSPEqqfMUmNy1BsTFyGekcZzpWyTTNom+SH+WMDPKqXXHiSgjOCbWiDK+FN8595yysu1lLXo5kBp02S/J//tJx/rwIQvDUM6xsUrsAX3IXIcVT7TeOR7hOGuYSQkIPSKAbjYxbEgFOqrIRm3Ftw+A1w0IZw=
Received: by 10.100.137.18 with SMTP id k18mr2566055and.1189777175268;
        Fri, 14 Sep 2007 06:39:35 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTPS id c1sm1296778ana.2007.09.14.06.39.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 14 Sep 2007 06:39:33 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com> <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org> <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com> <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com> <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: regarding FieldSelector
Date: Fri, 14 Sep 2007 09:39:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Searcher is a Searchable and Searchable defines the doc() method with  
FieldSelector, but I suppose we could add an abstract declaration of  
it to Searcher, since it has to be implemented on all derived   
classes anyway due to it being on the Searchable interface.

So, you can either cast to a known Searcher or I suppose you can  
figure out a way to get the IndexReader.  What kind of Searcher are  
you using?

-Grant

On Sep 13, 2007, at 4:50 AM, Mohammad Norouzi wrote:

> Thanks
> as I saw the documents, we can only use this great field selector in
> IndexReader.document() method the problem is I have a Searcher in  
> my result
> set structure and when the client calls getString("a_field_name")  
> at that
> time I invoke the searcher.doc(current_doc_id).get("a_field_name),
> I already collected the result IDs. so in my case, I can't use
> FieldSelector.
>
> Do I have to revise the way of retrieving documents in my code?
>
>
>
> On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> Well, it depends on what "improve the search process" means
>> in your context <G>..
>>
>> But I had a case similar to yours that I wrote up in the Wiki where
>> my search times improved about 10X by using lazy loading. You
>> might want to read that entry here...
>>
>> http://wiki.apache.org/lucene-java/FieldSelectorPerformance
>>
>> Note the peculiar characteristics of my data set, I really suspect
>> that a 10x improvement in retrieval speed is atypical...
>>
>> As for when lazily-loaded fields actually get loaded, I didn't really
>> have to explore it very fully, but a short experiment should do it
>> for you.....
>>
>> Best
>> Erick
>>
>> On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>>>
>>> Hi Grant,
>>> Really thanks for your nice document about advanced Lucene. it  
>>> was very
>>> useful for me.
>>>
>>> as I understand, we can set some large fields to be lazily  
>>> loading, now
>> my
>>> question is when it will be loaded? it make sense when we call
>>> doc.get("field_name")
>>> it will load from the index, Am I right?
>>>
>>> in my application, I've provided a result set structure to navigate
>>> between
>>> results and documents and provide a get(String fieldname) method  
>>> just
>> like
>>> java.sql.ResultSet.getString() method, and also this result set
>> implements
>>> HitCollector in order to collect my own ID rather than Lucene's  
>>> document
>>> id,
>>> so I think I can set my field ID to be loaded always and the other
>> fields
>>> to
>>> be lazily loading, Does this improve the search process?
>>>
>>> again, thank you very much indeed.
>>>
>>>
>>> On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>>>
>>>> Hi Mohammad,
>>>>
>>>> The typical use cases are:
>>>> 1. You have several small fields used in a results display and  
>>>> one or
>>>> two large fields (i.e. the original document) and you don't want to
>>>> pay the cost of loading the large fields for results display  
>>>> because
>>>> most of them won't be chosen.  When a result is chosen, the lazily
>>>> loaded field will be retrieved.
>>>>
>>>> 2. You only want to load certain fields, or the first field, or you
>>>> just want to know the size of a field.
>>>>
>>>> Basically, it gives you control over how fields are loaded from  
>>>> disk
>>>> in Lucene.
>>>>
>>>> See my ApacheCon Europe presentation http://cnlp.org/presentations/
>>>> slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
>>>> FieldSelector.
>>>>
>>>> On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> Can anyone explain what is the FieldSelector and the usage or
>>>>> benefits of
>>>>> this structure? I read the javadocs but I can't get for what goal
>>>>> it is
>>>>> provided in Lucene.
>>>>>
>>>>> Thanks in advance
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Mohammad
>>>>> --------------------------
>>>>> see my blog: http://brainable.blogspot.com/
>>>>> another in Persian: http://fekre-motefavet.blogspot.com/
>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://lucene.grantingersoll.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> Regards,
>>> Mohammad
>>> --------------------------
>>> see my blog: http://brainable.blogspot.com/
>>> another in Persian: http://fekre-motefavet.blogspot.com/
>>>
>>
>
>
>
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 13:57:10 2007
Return-Path: <java-user-return-30265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52789 invoked from network); 14 Sep 2007 13:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 13:57:09 -0000
Received: (qmail 61048 invoked by uid 500); 14 Sep 2007 13:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60866 invoked by uid 500); 14 Sep 2007 13:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60855 invoked by uid 99); 14 Sep 2007 13:56:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 06:56:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 13:58:40 +0000
Received: by nz-out-0506.google.com with SMTP id i28so575866nzi
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 06:56:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=GLbzIM9tvnC+ShE6632kDx7gVnOnq1oqo3cOUVqnW1k=;
        b=JaDYhJMR97jjtMc0nP6Xx/ugiotImVodM7cmZ3zeBeAqbzEccC8p629+yz+B598XQVb2uzeDqSjFEKckhPeQuZHwRAaP3UoluTcljj/+XUHRjGWKJXZe9XWxwLXcc9IxH4YEvaOSdJdwakYhfYoWE/DyvE9xZYWINOqRj0PzwQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kNCMyHgzyvlGx0Bcv6lRbcVidJoBhat2925g3DhH0iHCHdeIrYBI/BWpo/6u3FA2voWL/WjTPesiF0Cc2G2BshjjPxwwMKY9L27fSS743o5VFPyOk4aXYHRY6tXoHHW9D9N253hd8dLr9/0sCyUDEdNERQe3odg8SvMHba4e9K4=
Received: by 10.142.12.14 with SMTP id 14mr458450wfl.1189778194747;
        Fri, 14 Sep 2007 06:56:34 -0700 (PDT)
Received: by 10.141.32.1 with HTTP; Fri, 14 Sep 2007 06:56:34 -0700 (PDT)
Message-ID: <126142c0709140656k52001745re4011468a4d89602@mail.gmail.com>
Date: Fri, 14 Sep 2007 10:56:34 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Oracle-Lucene integration (OJVMDirectory and Lucene Domain Index) - LONG
In-Reply-To: <e6537db80709131527q4261b508p636b8446a98201fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e6537db80709131527q4261b508p636b8446a98201fb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

From: J. Delgado <jdelgado@lendingclub.com>
Date: Sep 13, 2007 7:27 PM
Subject: Oracle-Lucene integration (OJVMDirectory and Lucene Domain
Index) - LONG
To: java-dev@lucene.apache.org
Cc: solr-dev@lucene.apache.org


I'm very happy to announce the partial rework and extension to
LUCENE-724 (Oracle-Lucene Integration), primarily based on new
requirements from LendingClub.com, who commissioned the work to
Marcelo Ochoa, the contributer of the original patch (great job
Marcelo!). As contribution of LendingClub.com to the Lucene community
we have posted the code on a public CVS (sourceforge) as explained
below.

Here at Lending Club ( www.lendingclub.com) we have very specific
needs regarding the indexing of both structured and unstructured data,
most of it transactional in nature and siting in our Oracle !0gR2 DB,
with a highly complex schema. Our "ranking" of loans in the inventory
includes components of exact, textual and hardcore mathematical
calculations including time, amount and spatial constraints. This
integration of Lucene into Oracle as a Domain Index will now allow us
to query this inventory in real-time. Going against the Lucene index,
created on "synthetic documents" comprised of fields being populated
from diverse tables (user data store), eliminates the need to create
very complex joins to link data from different tables at query time.
This, along with the support of the full Lucene query language, makes
this a great alternative to:

Using Lucene outside the database which requires "crawling" the data
and storing the index outside the database, loosing all the benefits
of a fully transactional system and a secure environment.

Using Oracle Text, which is very powerful but lacks the extensibility
and flexibility that Lucene offers (for example, being able to query
directly the index from the Java layer or implementing our our ranking
algorithm), though to be completely fair some of it is addressed in
the new Oracle DB 11g version. If anyone is interested in learning
more how we are going to use this within Lending Club, please drop me
a line. BTW, please make sure you check us out: "Lending Club (
http://www.lendingclub.com/), the rapidly growing people-to-people
(P2P) lending service that launched as a Facebook application in May
2007, today announced the public availability of its services with the
launch of LendingClub.com. Lending Club connects lenders and borrowers
based upon shared affinities, enabling them to bypass banks to secure
better interest rates on loans"... more about the announcement here
http://www.sys-con.com/read/428678.htm. We have seen man entrepreneurs
applying for loans and being helped by regular people to build their
business with the money obtained at very low interest.

OK, without further marketing stuff (sorry for that), here is the
original note sent to me by Marcelo that summarizes all the new cool
functionalities:

OJVMDirectory, a Lucene Integration running inside the Oracle JVM is
going one step further.

This new release includes:

Synchronized with latest Lucene 2.2.0 production
Replaced in memory storage using Vector based implementation by direct
BLOB IO, reducing memory usage for large index.
Support for user data stores, it means you can not only index one
column at time (limited by Data Cartridge API on 10g), now you can
index multiples columns at base table and columns on related tabled
joined together.
User Data Stores can be customized by the user, it means writing a
simple Java Class users can control which column are indexed, padding
used or any other functionality previous to document adding step.
There is a DefaultUserDataStore which gets all columns of the query
and built a Lucene Document with Fields representing each database
columns these fields are automatically padded if they have NUMBER or
rounded if they have DATE data, for example.
lcontains() SQL operator support full Lucene's QueryParser syntax to
provide access to all columns indexed, see examples below.
Support for DOMAIN_INDEX_SORT and FIRST_ROWS hint, it means that if
you want to get rows order by lscore() operator (ascending,descending)
the optimizer hint will assume that Lucene Domain Index will returns
rowids in proper order avoided an inline-view to sort it.
Automatic index synchronization by using AQ's Call Back.
Lucene Domain Index creates extra tables named IndexName$T and an
Oracle AQ named IndexName$Q with his storage table IndexName$QT at
user's schema, so you can alter storage's preference if you want.
 ojvm project is at SourceForge.net CVS, so anybody can get it and
collaborate ;)
Tested against 10gR2 and 11g database.
Some sample usages:

create table t2 (
  f4 number primary key,
  f5 VARCHAR2(200));
create table t1 (
  f1 number,
  f2 CLOB,
  f3 number,
  CONSTRAINT t1_t2_fk FOREIGN KEY (f3)
      REFERENCES t2(f4) ON DELETE cascade);
create index it1 on t1(f3) indextype is lucene.LuceneIndex
  parameters('Analyzer:org.apache.lucene.analysis
.SimpleAnalyzer;ExtraCols:f2');

alter index it1
parameters('ExtraCols:f2,t2.f5;ExtraTabs:t2;WhereCondition:t1.f3=t2.f4;DecimalFormat:000');

Lucene domain index will store f2 and f3 columns of table t1 plus f5
of table t2.

So you can query then with:

 select lscore(1),f2 from t1 where lcontains(f3, 'f2:test',1) > 0;
or
 select lscore(1),f2 from t1 where lcontains(f3, 'f2:test and f3:[001
to 200]',1) > 0;

 select /*+ DOMAIN_INDEX_SORT */ lscore(1),f2,t2.f5
  from t1,t2
  where lcontains(f3, 'f2:test1 and f3:[001 to 200] and t2.f5:test2',1) > 0
  and t1.f3=t2.f4
  order by lscore(1) asc;

In latest example Oracle's optimizer will assume that Lucene Domain
Index will resolve first a set of rowid matching "f2:test1 and f3:[001
to 200] and t2.f5:test2" then will direct access by by index rowid on
table t1 and perform the join with t2.

More examples and information can be found at:
 http://dbprism.cvs.sourceforge.net/dbprism/ojvm/Readme.txt?revision=1.10&view=markup

--
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home

Cheers!

Joaquin Delgado, PhD
CTO, Lending Club
www.lendingclub.com



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 14:00:19 2007
Return-Path: <java-user-return-30266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53317 invoked from network); 14 Sep 2007 14:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 14:00:18 -0000
Received: (qmail 66415 invoked by uid 500); 14 Sep 2007 14:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66376 invoked by uid 500); 14 Sep 2007 14:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66355 invoked by uid 99); 14 Sep 2007 14:00:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 07:00:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [74.202.71.1] (HELO mars.cyc.com) (74.202.71.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 14:00:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by mars.cyc.com (Postfix) with ESMTP id 089925143F
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 08:59:42 -0500 (CDT)
Received: from mars.cyc.com ([127.0.0.1])
 by localhost (mx1.cyc.com [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03142-02 for <java-user@lucene.apache.org>;
 Fri, 14 Sep 2007 08:59:41 -0500 (CDT)
Received: from [10.1.1.148] (george.cyc.com [10.1.1.148])
	by mars.cyc.com (Postfix) with ESMTP id A5C9651184
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 08:59:41 -0500 (CDT)
Message-ID: <46EA93D5.4090909@cyc.com>
Date: Fri, 14 Sep 2007 08:59:49 -0500
From: Dave Schneider <daves@cyc.com>
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: multiple Tokens in a Tokengroup not matching
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com> <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org> <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com> <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com> <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com> <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
In-Reply-To: <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
Content-Type: multipart/mixed;
 boundary="------------050202030608040206010403"
X-Virus-Scanned: by amavisd-new using Sophos and ClamAV at cyc.com
X-Virus-Checked: Checked by ClamAV on apache.org

--------------050202030608040206010403
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I've inherited some Lucene 1.9.1 code, and have run into the following 
problem:

I have a TokenGroup with multiple tokens in it, and a query that should 
match against multiple tokens (e.g. X and Y) in the TokenGroup.  
However, when I look in the Hit that results, I see that one of the 
Tokens in the TokenGroup has a weight of 1.0, while all the rest have a 
weight of 0.  If I run a search with just X in the query, it matches the 
TokenGroup, and when I run a search with just Y in the query, it also 
matches the TokenGroup, just as I'd expect.  But a query that includes 
both X and Y looks like only X matches.  I need to see that both X and Y 
matched in order to get my highlighting to work correctly.

Can anyone provide any hints as to what might be going on here, and what 
I might do to fix it?  We have a vague suspicion that it's related to 
the weight on the matching token being 1.0 that's causing Lucene to not 
both with any other tokens (because the weight for the TokenGroup is 
already as high as it can be), but it's just a suspicion.

Thanks,

Dave Schneider


--------------050202030608040206010403
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------050202030608040206010403--

From java-user-return-30267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 14:24:44 2007
Return-Path: <java-user-return-30267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58682 invoked from network); 14 Sep 2007 14:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 14:24:42 -0000
Received: (qmail 93853 invoked by uid 500); 14 Sep 2007 14:24:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93032 invoked by uid 500); 14 Sep 2007 14:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93021 invoked by uid 99); 14 Sep 2007 14:24:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 07:24:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 14:24:33 +0000
Received: by wr-out-0506.google.com with SMTP id c55so464834wra
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 07:24:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jdk7r3wUFBliQLl2md8m7swst7mdKoDpotukyP4w2T4=;
        b=T9PC7m0mJz2PFoQSH8qFmnzZ21Nv9rmNar7xVqvdU1/fHHmLhRmEeTsPIJCM5saWJDgsBExgiEl0mSdmLoIGEczRSFb6VppgJVFuRtN1vEN+kfROR2XjJCcaIn7Oie5Ql1Z5p9tC9lkI3hpO8Jgh78+zGZ1MwIWA9EZcS/RtNxY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pV20Z2t0M5lm0u4uclN+Ku2ilvevcUYS+TiSUAEHzNtb/q3A7Zs1Mbsr936F+h5t54IesZ8/Ekf0MZR43TKbLe5IlfiW/f3/eo4wtmaDaL8eoSyUnV1JQa09aF7AVYA/VgtYYVfWhBTztqpifQdS9hWn7bSfKUySztWkm5ZuVi0=
Received: by 10.78.172.20 with SMTP id u20mr1091252hue.1189779850794;
        Fri, 14 Sep 2007 07:24:10 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 14 Sep 2007 07:24:10 -0700 (PDT)
Message-ID: <6e3ae6310709140724xbf813eat4d4e26b13c97970e@mail.gmail.com>
Date: Fri, 14 Sep 2007 07:24:10 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle-Lucene integration (OJVMDirectory and Lucene Domain Index) - LONG
In-Reply-To: <126142c0709140656k52001745re4011468a4d89602@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1673_1437173.1189779850781"
References: <e6537db80709131527q4261b508p636b8446a98201fb@mail.gmail.com>
	 <126142c0709140656k52001745re4011468a4d89602@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1673_1437173.1189779850781
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, Joaquin,

Very interested to know the indexing performance inside Oracle JVM,
especially with large amount of data.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 9/14/07, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:
>
> From: J. Delgado <jdelgado@lendingclub.com>
> Date: Sep 13, 2007 7:27 PM
> Subject: Oracle-Lucene integration (OJVMDirectory and Lucene Domain
> Index) - LONG
> To: java-dev@lucene.apache.org
> Cc: solr-dev@lucene.apache.org
>
>
> I'm very happy to announce the partial rework and extension to
> LUCENE-724 (Oracle-Lucene Integration), primarily based on new
> requirements from LendingClub.com, who commissioned the work to
> Marcelo Ochoa, the contributer of the original patch (great job
> Marcelo!). As contribution of LendingClub.com to the Lucene community
> we have posted the code on a public CVS (sourceforge) as explained
> below.
>
> Here at Lending Club ( www.lendingclub.com) we have very specific
> needs regarding the indexing of both structured and unstructured data,
> most of it transactional in nature and siting in our Oracle !0gR2 DB,
> with a highly complex schema. Our "ranking" of loans in the inventory
> includes components of exact, textual and hardcore mathematical
> calculations including time, amount and spatial constraints. This
> integration of Lucene into Oracle as a Domain Index will now allow us
> to query this inventory in real-time. Going against the Lucene index,
> created on "synthetic documents" comprised of fields being populated
> from diverse tables (user data store), eliminates the need to create
> very complex joins to link data from different tables at query time.
> This, along with the support of the full Lucene query language, makes
> this a great alternative to:
>
> Using Lucene outside the database which requires "crawling" the data
> and storing the index outside the database, loosing all the benefits
> of a fully transactional system and a secure environment.
>
> Using Oracle Text, which is very powerful but lacks the extensibility
> and flexibility that Lucene offers (for example, being able to query
> directly the index from the Java layer or implementing our our ranking
> algorithm), though to be completely fair some of it is addressed in
> the new Oracle DB 11g version. If anyone is interested in learning
> more how we are going to use this within Lending Club, please drop me
> a line. BTW, please make sure you check us out: "Lending Club (
> http://www.lendingclub.com/), the rapidly growing people-to-people
> (P2P) lending service that launched as a Facebook application in May
> 2007, today announced the public availability of its services with the
> launch of LendingClub.com. Lending Club connects lenders and borrowers
> based upon shared affinities, enabling them to bypass banks to secure
> better interest rates on loans"... more about the announcement here
> http://www.sys-con.com/read/428678.htm. We have seen man entrepreneurs
> applying for loans and being helped by regular people to build their
> business with the money obtained at very low interest.
>
> OK, without further marketing stuff (sorry for that), here is the
> original note sent to me by Marcelo that summarizes all the new cool
> functionalities:
>
> OJVMDirectory, a Lucene Integration running inside the Oracle JVM is
> going one step further.
>
> This new release includes:
>
> Synchronized with latest Lucene 2.2.0 production
> Replaced in memory storage using Vector based implementation by direct
> BLOB IO, reducing memory usage for large index.
> Support for user data stores, it means you can not only index one
> column at time (limited by Data Cartridge API on 10g), now you can
> index multiples columns at base table and columns on related tabled
> joined together.
> User Data Stores can be customized by the user, it means writing a
> simple Java Class users can control which column are indexed, padding
> used or any other functionality previous to document adding step.
> There is a DefaultUserDataStore which gets all columns of the query
> and built a Lucene Document with Fields representing each database
> columns these fields are automatically padded if they have NUMBER or
> rounded if they have DATE data, for example.
> lcontains() SQL operator support full Lucene's QueryParser syntax to
> provide access to all columns indexed, see examples below.
> Support for DOMAIN_INDEX_SORT and FIRST_ROWS hint, it means that if
> you want to get rows order by lscore() operator (ascending,descending)
> the optimizer hint will assume that Lucene Domain Index will returns
> rowids in proper order avoided an inline-view to sort it.
> Automatic index synchronization by using AQ's Call Back.
> Lucene Domain Index creates extra tables named IndexName$T and an
> Oracle AQ named IndexName$Q with his storage table IndexName$QT at
> user's schema, so you can alter storage's preference if you want.
> ojvm project is at SourceForge.net CVS, so anybody can get it and
> collaborate ;)
> Tested against 10gR2 and 11g database.
> Some sample usages:
>
> create table t2 (
>   f4 number primary key,
>   f5 VARCHAR2(200));
> create table t1 (
>   f1 number,
>   f2 CLOB,
>   f3 number,
>   CONSTRAINT t1_t2_fk FOREIGN KEY (f3)
>       REFERENCES t2(f4) ON DELETE cascade);
> create index it1 on t1(f3) indextype is lucene.LuceneIndex
>   parameters('Analyzer:org.apache.lucene.analysis
> .SimpleAnalyzer;ExtraCols:f2');
>
> alter index it1
> parameters('ExtraCols:f2,t2.f5;ExtraTabs:t2;WhereCondition:t1.f3=t2.f4
> ;DecimalFormat:000');
>
> Lucene domain index will store f2 and f3 columns of table t1 plus f5
> of table t2.
>
> So you can query then with:
>
> select lscore(1),f2 from t1 where lcontains(f3, 'f2:test',1) > 0;
> or
> select lscore(1),f2 from t1 where lcontains(f3, 'f2:test and f3:[001
> to 200]',1) > 0;
>
> select /*+ DOMAIN_INDEX_SORT */ lscore(1),f2,t2.f5
>   from t1,t2
>   where lcontains(f3, 'f2:test1 and f3:[001 to 200] and t2.f5:test2',1) >
> 0
>   and t1.f3=t2.f4
>   order by lscore(1) asc;
>
> In latest example Oracle's optimizer will assume that Lucene Domain
> Index will resolve first a set of rowid matching "f2:test1 and f3:[001
> to 200] and t2.f5:test2" then will direct access by by index rowid on
> table t1 and perform the join with t2.
>
> More examples and information can be found at:
>
> http://dbprism.cvs.sourceforge.net/dbprism/ojvm/Readme.txt?revision=1.10&view=markup
>
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
>
> Cheers!
>
> Joaquin Delgado, PhD
> CTO, Lending Club
> www.lendingclub.com
>
>
>
> --
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1673_1437173.1189779850781--

From java-user-return-30268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 15:46:20 2007
Return-Path: <java-user-return-30268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47202 invoked from network); 14 Sep 2007 15:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 15:46:19 -0000
Received: (qmail 62111 invoked by uid 500); 14 Sep 2007 15:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62064 invoked by uid 500); 14 Sep 2007 15:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62046 invoked by uid 99); 14 Sep 2007 15:46:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 08:46:05 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Chris.Sizemore@bbc.co.uk designates 132.185.144.142 as permitted sender)
Received: from [132.185.144.142] (HELO mailgw2.mh.bbc.co.uk) (132.185.144.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 15:47:47 +0000
Received: from bbcxue219.national.core.bbc.co.uk ([10.164.8.50])
	by mailgw2.mh.bbc.co.uk (8.13.7/8.13.7) with ESMTP id l8EFjiKL005853
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 16:45:44 +0100 (BST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7F6E6.4F7A92D2"
Subject: how best to limit search result to a subset of document ids?
Date: Fri, 14 Sep 2007 16:45:43 +0100
Message-ID: <22E75701DF55CB459F5EC560C366846703F0E5B8@bbcxue219.national.core.bbc.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how best to limit search result to a subset of document ids?
Thread-Index: Acf25k94IexqelQvTnaU22CqGVlDcw==
From: "Chris Sizemore" <Chris.Sizemore@bbc.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7F6E6.4F7A92D2
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


hello--

i'm trying to figure out the best way to limit a query to a small subset =
if a lucene index's documents, and i'm a bit of a novice and a bit stumpe=
d...

my scenario is:

1) search the index for a term (very boring normal case)
2) take the top 5 results from that search result set=20
3) next, do a MoreLikeThis query where ONLY those 5 documents are valid t=
o search against (BTW, the MLT query is based on a separately supplied do=
c which needs to be compared)

hoping this scenario makes some sense...

should i put together a boolean query with the 5 doc ids, a la:

"id:282707 OR id:389447"

or should i try to set up a QueryFilter with a list of document ids? and =
any pointers as to what the syntax should be to add doc ids to a QueryFil=
ter?

also, is it possible that Lucene in Action (which i have) is a bit out of=
 date in this area now?

any thoughts would be greatly appreciated...


best--

--chris sizemore

http://www.bbc.co.uk/
This e-mail (and any attachments) is confidential and may contain persona=
l views which are not the views of the BBC unless specifically stated.
If you have received it in error, please delete it from your system.
Do not use, copy or disclose the information in any way nor act in relian=
ce on it and notify the sender immediately.
Please note that the BBC monitors e-mails sent or received.
Further communication will signify your consent to this.
				=09

------_=_NextPart_001_01C7F6E6.4F7A92D2--

From java-user-return-30269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 16:15:53 2007
Return-Path: <java-user-return-30269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83190 invoked from network); 14 Sep 2007 16:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 16:15:53 -0000
Received: (qmail 13460 invoked by uid 500); 14 Sep 2007 16:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13426 invoked by uid 500); 14 Sep 2007 16:15:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13415 invoked by uid 99); 14 Sep 2007 16:15:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 09:15:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Sep 2007 16:17:20 +0000
Received: (qmail 66630 invoked by uid 60001); 14 Sep 2007 16:15:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Afmt3xMIsOm72Ns7pIT4qU3Pf7/2HIvHk7TSQanYHFWYy/9gpBfG3dV/dwaKqpM+RYpZJeVLNAj7dotUUm/wRamDw6DBgqnN36nSKyg8gfbGdhzFGSbOY1m4qQolqa+43LZamH0ZJ/9Z0BLCgAOp3AvBSuTglk6Du/p5glE1db8=;
X-YMail-OSG: VbdnoJgVM1njhRx2FqkCG7Klktvs1_sS6DMZGJpQsWeU6jpUhc5WCiIzuRi9lnFy7qt91qmEKY8EAKGemC5DotlKA5nKDpaTLwCoshDUj.RICQOU1SSL38Vo6Js-
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Fri, 14 Sep 2007 16:15:15 GMT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Fri, 14 Sep 2007 16:15:15 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: how best to limit search result to a subset of document ids?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <537666.65774.qm@web26010.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,=0A=0AHave a look at the "TermsFilter" in contrib/queries.=0AThe c=
ode would look something like this:=0A=0A    TermsFilter filter=3Dnew Terms=
Filter()=0A//    for( all 5 id terms....=0A      filter.addTerm(new Term("i=
d", id[i]));=0A  =0A   hits=3Dsearcher.search(moreLikeThisQuery, filter);=
=0A=0A=0ACheers=0AMark=0A=0A----- Original Message ----=0AFrom: Chris Sizem=
ore <Chris.Sizemore@bbc.co.uk>=0ATo: java-user@lucene.apache.org=0ASent: Fr=
iday, 14 September, 2007 4:45:43 PM=0ASubject: how best to limit search res=
ult to a subset of document ids?=0A=0A=0Ahello--=0A=0Ai'm trying to figure =
out the best way to limit a query to a small subset if a lucene index's doc=
uments, and i'm a bit of a novice and a bit stumped...=0A=0Amy scenario is:=
=0A=0A1) search the index for a term (very boring normal case)=0A2) take th=
e top 5 results from that search result set =0A3) next, do a MoreLikeThis q=
uery where ONLY those 5 documents are valid to search against (BTW, the MLT=
 query is based on a separately supplied doc which needs to be compared)=0A=
=0Ahoping this scenario makes some sense...=0A=0Ashould i put together a bo=
olean query with the 5 doc ids, a la:=0A=0A"id:282707 OR id:389447"=0A=0Aor=
 should i try to set up a QueryFilter with a list of document ids? and any =
pointers as to what the syntax should be to add doc ids to a QueryFilter?=
=0A=0Aalso, is it possible that Lucene in Action (which i have) is a bit ou=
t of date in this area now?=0A=0Aany thoughts would be greatly appreciated.=
..=0A=0A=0Abest--=0A=0A--chris sizemore=0A=0Ahttp://www.bbc.co.uk/=0AThis e=
-mail (and any attachments) is confidential and may contain personal views =
which are not the views of the BBC unless specifically stated.=0AIf you hav=
e received it in error, please delete it from your system.=0ADo not use, co=
py or disclose the information in any way nor act in reliance on it and not=
ify the sender immediately.=0APlease note that the BBC monitors e-mails sen=
t or received.=0AFurther communication will signify your consent to this.=
=0A                    =0A=0A=0A=0A=0A=0A      ____________________________=
_______________________________ =0AWant ideas for reducing your carbon foot=
print? Visit Yahoo! For Good  http://uk.promotions.yahoo.com/forgood/enviro=
nment.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 16:22:52 2007
Return-Path: <java-user-return-30270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90905 invoked from network); 14 Sep 2007 16:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 16:22:51 -0000
Received: (qmail 28601 invoked by uid 500); 14 Sep 2007 16:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28568 invoked by uid 500); 14 Sep 2007 16:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28557 invoked by uid 99); 14 Sep 2007 16:22:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 09:22:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.39.1.224] (HELO mx2.sat.rackspace.com) (64.39.1.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 16:24:19 +0000
Received: from SAT4MX07.RACKSPACE.CORP (sat4cl21.sat.rackspace.com [10.6.24.21])
	by mx2.sat.rackspace.com (8.13.8/8.13.8) with ESMTP id l8EGMDtI026000
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 11:22:14 -0500
	(envelope-from vijay.kumar@rackspace.com)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7F6EB.3CB8C43D"
Subject: Problem compiling with JBoss portal server
Date: Fri, 14 Sep 2007 11:21:00 -0500
Message-ID: <4570C2B614B5DD41883008E2B9A683C301A9649B@SAT4MX07.RACKSPACE.CORP>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem compiling with JBoss portal server
Thread-Index: Acf26zzQl89lc6LUTHGASUV9euVQmg==
From: "Vijay Kumar" <vijay.kumar@rackspace.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7F6EB.3CB8C43D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello all,=20

=20

I ran into an issue "can not resolve symbol" while compiling my class
that uses MultiFieldQueryParser class. It turns out that the version of
Jboss portal 2.6 Beta 1 that we are using includes a portal-cms.sar that
has the older version of lucene.jar, This version does not have the
MultiFieldQueryParser constructor that takes 3 params.=20

=20

Problem should be fixed with moving to a newer version of the Jboss
portal or replacing the lucene.jar with the newer version of lucene.jar
in the portal-cms.sar/lib folder.=20

=20

Vijay Kumar,

Rackspace Managed Hosting



Confidentiality Notice: This e-mail message (including any attached or
embedded documents) is intended for the exclusive and confidential use of t=
he
individual or entity to which this message is addressed, and unless otherwi=
se
expressly indicated, is confidential and privileged information of Rackspace
Managed Hosting. Any dissemination, distribution or copying of the enclosed
material is prohibited. If you receive this transmission in error, please
notify us immediately by e-mail at abuse@rackspace.com, and delete the
original message. Your cooperation is appreciated.


------_=_NextPart_001_01C7F6EB.3CB8C43D--

From java-user-return-30271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 17:14:24 2007
Return-Path: <java-user-return-30271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66488 invoked from network); 14 Sep 2007 17:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 17:14:23 -0000
Received: (qmail 97555 invoked by uid 500); 14 Sep 2007 17:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97514 invoked by uid 500); 14 Sep 2007 17:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97503 invoked by uid 99); 14 Sep 2007 17:14:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 10:14:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 17:14:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IWEji-00012I-9y
	for java-user@lucene.apache.org; Fri, 14 Sep 2007 10:13:46 -0700
Message-ID: <12679970.post@talk.nabble.com>
Date: Fri, 14 Sep 2007 10:13:46 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12668746.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So did you see any improvement in performance?

Sebastin wrote:
> 
> It works finally .i use Lucene 2.2  in my application.thanks testn and
> Mike
> 
> Michael McCandless-2 wrote:
>> 
>> 
>> It sounds like there may be a Lucene version mismatch?  When Luke was
>> used
>> it was likely based on Lucene 2.2, but it sounds like an older version of
>> Lucene is now being used to open the index?
>> 
>> Mike
>> 
>> "testn" <test1@doramail.com> wrote:
>>> 
>>> Should the file be "segments_8" and "segments.gen"? Why is it "Segment"?
>>> The
>>> case is different.
>>> 
>>> 
>>> Sebastin wrote:
>>> > 
>>> > java.io.IoException:File Not Found- Segments  is the error message
>>> > 
>>> > testn wrote:
>>> >> 
>>> >> What is the error message? Probably Mike, Erick or Yonik can help you
>>> >> better on this since I'm no one in index area.
>>> >> 
>>> >> Sebastin wrote:
>>> >>> 
>>> >>> HI testn,
>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>> Luke.it
>>> >>> optimize all the content into a single CFS file and it generates
>>> >>> segments.gen and segments_8 file when i search the item it shows an
>>> >>> error that segments file is not there.could you help me in this 
>>> >>> 
>>> >>> testn wrote:
>>> >>>> 
>>> >>>> 1. You can close the searcher once you're done. If you want to
>>> reopen
>>> >>>> the index, you can close and reopen only the updated 3 readers and
>>> keep
>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time to
>>> >>>> reopen it.
>>> >>>> 2. Make sure that you optimize it every once in a while
>>> >>>> 3. You might consider separating indices in separated storage and
>>> use
>>> >>>> ParallelReader
>>> >>>> 
>>> >>>> 
>>> >>>> 
>>> >>>> Sebastin wrote:
>>> >>>>> 
>>> >>>>> The problem in my pplication are as follows:
>>> >>>>>                  1.I am not able to see the updated records in my
>>> >>>>> index store because i instantiate 
>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>> >>>>> search.further searches use the same IndexReaders(5 Directories)
>>> and
>>> >>>>> IndexSearcher with different queries.
>>> >>>>> 
>>> >>>>>                 2.My search is very very slow First 2 Directories
>>> of
>>> >>>>> size 10 GB each which are having old index records and no update
>>> in
>>> >>>>> that remaining 3 Diretories are updated every second.
>>> >>>>> 
>>> >>>>>                 3.i am Indexing 20 million records per day so the
>>> >>>>> Index store gets growing and it makes search very very slower.
>>> >>>>>  
>>> >>>>>                4.I am using searcherOne class as the global
>>> >>>>> application helper class ,with the scope as APPLICATION it
>>> consists of
>>> >>>>> one IndexReader and IndexSearcher get set method which will hold
>>> the
>>> >>>>> IndexReader and IndexSearcher object after the First Search.it is
>>> used
>>> >>>>> for all other searches.
>>> >>>>> 
>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>> Application
>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>> Fields.i
>>> >>>>> am not using any sort in my query.for a single query upto the
>>> maximum
>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>> >>>>>                 
>>> >>>>> 
>>> >>>>> hossman wrote:
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> : I set IndexSearcher as the application Object after the first
>>> >>>>>> search.
>>> >>>>>> 	...
>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour to
>>> see
>>> >>>>>> the
>>> >>>>>> : updated records .
>>> >>>>>> 
>>> >>>>>> i'm confused ... my understanding based on the comments you made
>>> >>>>>> below 
>>> >>>>>> (in an earlier message) was that you already *were* constructing
>>> a
>>> >>>>>> new  
>>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>>> memory 
>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>> >>>>>> 
>>> >>>>>> if that's not what you said, then i think you need to explain, in
>>> >>>>>> detail, 
>>> >>>>>> in one message, exactly what your problem is.  And don't assume
>>> we 
>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for example,
>>> what
>>> >>>>>> the 
>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>> answer
>>> >>>>>> to 
>>> >>>>>> the specfic question i asked in my last message: does your
>>> >>>>>> application, 
>>> >>>>>> contain anywhere in it, any code that will close anything
>>> >>>>>> (IndexSearchers 
>>> >>>>>> or IndexReaders) ?
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>> crore to
>>> >>>>>> 6 crore.
>>> >>>>>> : > for
>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>> >>>>>> IndexSearcher object
>>> >>>>>> : > one
>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>> updated
>>> >>>>>> records in
>>> >>>>>> : > the
>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>> >>>>>> problem when
>>> >>>>>> : > i
>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets appended.is
>>> >>>>>> there any
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>> >>>>>> IndexSearcher as 
>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>> MultiReader?
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> -Hoss
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>>
>>> ---------------------------------------------------------------------
>>> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>>> 
>>> >>>>> 
>>> >>>>> 
>>> >>>> 
>>> >>>> 
>>> >>> 
>>> >>> 
>>> >> 
>>> >> 
>>> > 
>>> > 
>>> 
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12679970
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 14 20:08:40 2007
Return-Path: <java-user-return-30272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30366 invoked from network); 14 Sep 2007 20:08:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Sep 2007 20:08:39 -0000
Received: (qmail 47401 invoked by uid 500); 14 Sep 2007 20:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47373 invoked by uid 500); 14 Sep 2007 20:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35769 invoked by uid 99); 14 Sep 2007 20:01:17 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.198.190 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:thread-index:x-mimeole;
        bh=HqxjaMxOlHUpt6CV8vksPRmFccegenqm455YFdj9sLw=;
        b=MK0/h9HvHTZZEp5nsI5FZeuISUzgzkk3HGSjVG4wnwYs49ia+HqINRhdACGbw5T4T1cu5jALl0LOmHZhnp+J+LmOlou8rWhZ1vbw1B9dKQyfSXVEBb0mlcBgLYOWXVVRBcnFwZEXa9kTPEYJ+FU7huCt2DNxao3QxZpVLlGMMzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:thread-index:x-mimeole;
        b=T2TsS3vY1weNkF65RBEOxGoNQUjEdoabNGF21aASSkHij08SYEi/I+WdQboZqyeVAqk8in8r2/zCf9EyDi8EEJrdpeOt/U+jzf6j+Db8gj/wTRVRL7KWkmGrBZ9k6LwyTlxgCBsPHb1R+ohP0fDPzvxcLrEniIXj6l8ALUSuweM=
From: "Lance Norskog" <goksron@gmail.com>
To: <java-user@lucene.apache.org>
Subject: UTF-8/unicode input in querying in Lucene 
Date: Fri, 14 Sep 2007 13:01:03 -0700
Message-ID: <008901c7f709$fc109520$770fa8c0@madrid>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_008A_01C7F6CF.4FB1BD20"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acf3Cfqo5H0nT1XPT9m4ZgiybmxLlw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_008A_01C7F6CF.4FB1BD20
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi-
 
The page http://lucene.apache.org/java/docs/queryparsersyntax.html does not
mention that \uNNNN Unicode syntax is supported.
For example, \u0048\u0045\u004c\u004c\u004f is HELLO.
 
Please add this to the page, it took experimentation to discover it.
 
Thanks,
 
Lance Norskog
 

------=_NextPart_000_008A_01C7F6CF.4FB1BD20--


From java-user-return-30273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 00:48:26 2007
Return-Path: <java-user-return-30273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21440 invoked from network); 15 Sep 2007 00:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 00:48:25 -0000
Received: (qmail 33159 invoked by uid 500); 15 Sep 2007 00:48:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33110 invoked by uid 500); 15 Sep 2007 00:48:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33099 invoked by uid 99); 15 Sep 2007 00:48:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 17:48:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 00:48:11 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3698271C0E9; Fri, 14 Sep 2007 17:47:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 337D571C0AE
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 17:47:51 -0700 (PDT)
Date: Fri, 14 Sep 2007 17:47:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: UTF-8/unicode input in querying in Lucene 
In-Reply-To: <008901c7f709$fc109520$770fa8c0@madrid>
Message-ID: <Pine.LNX.4.62.0709141743140.8725@radix.cryptio.net>
References: <008901c7f709$fc109520$770fa8c0@madrid>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The page http://lucene.apache.org/java/docs/queryparsersyntax.html does not
: mention that \uNNNN Unicode syntax is supported.
: For example, \u0048\u0045\u004c\u004c\u004f is HELLO.
:  
: Please add this to the page, it took experimentation to discover it.

I don't believe the QueryParser actually treats \uNNNNN as a special 
syntax ... what you may have encountered was that when *javac* parses a 
literal string constant, those sequences have special meaning -- but they 
are already the literal unicode characters long before QueryParser sees 
them.

As far as query parser is concerned the backslash in \uNNNNN is only 
escaping the "u"  (all characters can be escaped, wether they need it or 
not)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 01:14:44 2007
Return-Path: <java-user-return-30274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28438 invoked from network); 15 Sep 2007 01:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 01:14:41 -0000
Received: (qmail 53208 invoked by uid 500); 15 Sep 2007 01:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53167 invoked by uid 500); 15 Sep 2007 01:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53155 invoked by uid 99); 15 Sep 2007 01:14:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 18:14:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 01:14:27 +0000
Received: by py-out-1112.google.com with SMTP id d32so3613473pye
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 18:14:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=GYT/DCHOnQnhnMfq0AlsAkvZYZ9rZKVkUKchZgyBHeE=;
        b=hmijVTBmWPszOuGCfIWkoBryuGptuXg0cRrQo16DMXy8xB/SfoWVcPjDsBszkjrL7BfYCEbnIMkGoH1sfk8ajVrnLDqfT/dr5Iyi4p8zC/vmYfNclC6xpsw28UTUQzxVzVeYr9N36kdQRqVQjyvdcC547IBG1tE5O8iV9yPzhbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=HCudFmKqNlVuX96BQpemgJL1yuC66cEUkfBgk+L3++q6ZMxQddyY3kHqgOLvYpJiClqJYOJ27RTJUnaAhZgXbr9khlAfYU8SLQ1mMeZe8smSTY2eQ8JQfJj3XEx/MBg/GvbGChHnSlWSIMtQtWhPuCBR7wyiSsrE9jMXqpDHavg=
Received: by 10.64.27.13 with SMTP id a13mr5450310qba.1189818845633;
        Fri, 14 Sep 2007 18:14:05 -0700 (PDT)
Received: by 10.65.59.20 with HTTP; Fri, 14 Sep 2007 18:14:05 -0700 (PDT)
Message-ID: <c68e39170709141814y71b32583v8e2c85d642eab2a1@mail.gmail.com>
Date: Fri, 14 Sep 2007 21:14:05 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: UTF-8/unicode input in querying in Lucene
In-Reply-To: <Pine.LNX.4.62.0709141743140.8725@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <008901c7f709$fc109520$770fa8c0@madrid>
	 <Pine.LNX.4.62.0709141743140.8725@radix.cryptio.net>
X-Google-Sender-Auth: 9f2ba808c967aa03
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/14/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> I don't believe the QueryParser actually treats \uNNNNN as a special
> syntax

LUCENE-716 added unicode escapes.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 02:44:09 2007
Return-Path: <java-user-return-30275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53292 invoked from network); 15 Sep 2007 02:44:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 02:44:08 -0000
Received: (qmail 80911 invoked by uid 500); 15 Sep 2007 02:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80879 invoked by uid 500); 15 Sep 2007 02:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80868 invoked by uid 99); 15 Sep 2007 02:43:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 19:43:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 02:45:38 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7A9AD71C076; Fri, 14 Sep 2007 19:43:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7726A71C062
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 19:43:32 -0700 (PDT)
Date: Fri, 14 Sep 2007 19:43:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: UTF-8/unicode input in querying in Lucene
In-Reply-To: <c68e39170709141814y71b32583v8e2c85d642eab2a1@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0709141938250.26899@radix.cryptio.net>
References: <008901c7f709$fc109520$770fa8c0@madrid> 
 <Pine.LNX.4.62.0709141743140.8725@radix.cryptio.net>
 <c68e39170709141814y71b32583v8e2c85d642eab2a1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > I don't believe the QueryParser actually treats \uNNNNN as a special
: > syntax
: 
: LUCENE-716 added unicode escapes.

doh!  that's what i get for assuming the random solr port i used to sanity 
check my assumption was relatively up to date.

LUCENE-1000



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 04:53:43 2007
Return-Path: <java-user-return-30276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70847 invoked from network); 15 Sep 2007 04:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 04:53:42 -0000
Received: (qmail 26095 invoked by uid 500); 15 Sep 2007 04:53:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26041 invoked by uid 500); 15 Sep 2007 04:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26030 invoked by uid 99); 15 Sep 2007 04:53:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 21:53:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 04:53:22 +0000
Received: by py-out-1112.google.com with SMTP id d32so3732901pye
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 21:53:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SXLItHf4WX4GpwcS3os4bU073tU8cojjP4AfZd+5f0k=;
        b=oyGDFwbmzxJeII5z8Tl/1KDnMBT1VjLIn4tGLuGCJW+ecZSpCbi8qSjWfhRPGvVjeFebHKjpvEh9PXRI0XcNkF/OJTPtUmHWmVZfAy8beIS57ffjKP0TCW3MNfuLtObEJdaFxbChtIAda1XgQgb88+WR2dUlifdQq+He4jxMjME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ee39LlORZcAafojlnHQkXrsgHh6jqOAqooc+VUprjF12ZzqanWuQ2d1da9Z8SrfVlDbuVc/E+eXI/QSbUi0PvTEG/yOZBa6TF2gJ9zH75g0Z/8w6cFTyHF0/y1fO19UyebZ1iF4TzD4LV0VZtH1LHQatXT/ZAdHmsRswBS9WEq4=
Received: by 10.65.20.18 with SMTP id x18mr5569470qbi.1189831980151;
        Fri, 14 Sep 2007 21:53:00 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Fri, 14 Sep 2007 21:53:00 -0700 (PDT)
Message-ID: <34b8543c0709142153l29ba378cib8b244bc55b1eca9@mail.gmail.com>
Date: Sat, 15 Sep 2007 08:23:00 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5926_17384330.1189831980137"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
	 <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5926_17384330.1189831980137
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, I can't see any doc() method with FieldSelector argument, perhaps this
is provided in nightly builds of Lucene, currently I am using Lucene v2.1.0
I am using org.apache.lucene.search.Searcher and new
IndexSearcher(a_directory) to instantiate an instance of it


On 9/14/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> Searcher is a Searchable and Searchable defines the doc() method with
> FieldSelector, but I suppose we could add an abstract declaration of
> it to Searcher, since it has to be implemented on all derived
> classes anyway due to it being on the Searchable interface.
>
> So, you can either cast to a known Searcher or I suppose you can
> figure out a way to get the IndexReader.  What kind of Searcher are
> you using?
>
> -Grant
>
> On Sep 13, 2007, at 4:50 AM, Mohammad Norouzi wrote:
>
> > Thanks
> > as I saw the documents, we can only use this great field selector in
> > IndexReader.document() method the problem is I have a Searcher in
> > my result
> > set structure and when the client calls getString("a_field_name")
> > at that
> > time I invoke the searcher.doc(current_doc_id).get("a_field_name),
> > I already collected the result IDs. so in my case, I can't use
> > FieldSelector.
> >
> > Do I have to revise the way of retrieving documents in my code?
> >
> >
> >
> > On 9/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >>
> >> Well, it depends on what "improve the search process" means
> >> in your context <G>..
> >>
> >> But I had a case similar to yours that I wrote up in the Wiki where
> >> my search times improved about 10X by using lazy loading. You
> >> might want to read that entry here...
> >>
> >> http://wiki.apache.org/lucene-java/FieldSelectorPerformance
> >>
> >> Note the peculiar characteristics of my data set, I really suspect
> >> that a 10x improvement in retrieval speed is atypical...
> >>
> >> As for when lazily-loaded fields actually get loaded, I didn't really
> >> have to explore it very fully, but a short experiment should do it
> >> for you.....
> >>
> >> Best
> >> Erick
> >>
> >> On 9/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >>>
> >>> Hi Grant,
> >>> Really thanks for your nice document about advanced Lucene. it
> >>> was very
> >>> useful for me.
> >>>
> >>> as I understand, we can set some large fields to be lazily
> >>> loading, now
> >> my
> >>> question is when it will be loaded? it make sense when we call
> >>> doc.get("field_name")
> >>> it will load from the index, Am I right?
> >>>
> >>> in my application, I've provided a result set structure to navigate
> >>> between
> >>> results and documents and provide a get(String fieldname) method
> >>> just
> >> like
> >>> java.sql.ResultSet.getString() method, and also this result set
> >> implements
> >>> HitCollector in order to collect my own ID rather than Lucene's
> >>> document
> >>> id,
> >>> so I think I can set my field ID to be loaded always and the other
> >> fields
> >>> to
> >>> be lazily loading, Does this improve the search process?
> >>>
> >>> again, thank you very much indeed.
> >>>
> >>>
> >>> On 9/12/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >>>>
> >>>> Hi Mohammad,
> >>>>
> >>>> The typical use cases are:
> >>>> 1. You have several small fields used in a results display and
> >>>> one or
> >>>> two large fields (i.e. the original document) and you don't want to
> >>>> pay the cost of loading the large fields for results display
> >>>> because
> >>>> most of them won't be chosen.  When a result is chosen, the lazily
> >>>> loaded field will be retrieved.
> >>>>
> >>>> 2. You only want to load certain fields, or the first field, or you
> >>>> just want to know the size of a field.
> >>>>
> >>>> Basically, it gives you control over how fields are loaded from
> >>>> disk
> >>>> in Lucene.
> >>>>
> >>>> See my ApacheCon Europe presentation http://cnlp.org/presentations/
> >>>> slides/AdvancedLuceneEU.pdf for a few slides (towards the end) on
> >>>> FieldSelector.
> >>>>
> >>>> On Sep 12, 2007, at 5:13 AM, Mohammad Norouzi wrote:
> >>>>
> >>>>> Hi all,
> >>>>>
> >>>>> Can anyone explain what is the FieldSelector and the usage or
> >>>>> benefits of
> >>>>> this structure? I read the javadocs but I can't get for what goal
> >>>>> it is
> >>>>> provided in Lucene.
> >>>>>
> >>>>> Thanks in advance
> >>>>>
> >>>>> --
> >>>>> Regards,
> >>>>> Mohammad
> >>>>> --------------------------
> >>>>> see my blog: http://brainable.blogspot.com/
> >>>>> another in Persian: http://fekre-motefavet.blogspot.com/
> >>>>
> >>>> --------------------------
> >>>> Grant Ingersoll
> >>>> http://lucene.grantingersoll.com
> >>>>
> >>>> Lucene Helpful Hints:
> >>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>>
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>>
> >>> --
> >>> Regards,
> >>> Mohammad
> >>> --------------------------
> >>> see my blog: http://brainable.blogspot.com/
> >>> another in Persian: http://fekre-motefavet.blogspot.com/
> >>>
> >>
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_5926_17384330.1189831980137--

From java-user-return-30277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 05:16:04 2007
Return-Path: <java-user-return-30277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77191 invoked from network); 15 Sep 2007 05:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 05:16:04 -0000
Received: (qmail 32036 invoked by uid 500); 15 Sep 2007 05:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32009 invoked by uid 500); 15 Sep 2007 05:15:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31998 invoked by uid 99); 15 Sep 2007 05:15:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 22:15:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mnrz57@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 05:17:35 +0000
Received: by py-out-1112.google.com with SMTP id d32so3742601pye
        for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 22:15:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=2iuhajBgx/07SAgfhzR9K9XlpyAW+DmWTcY9UlNvhdU=;
        b=ZptB2zmFNEm+1esBwyGmME5Uh8ujc8vCBuF5P1x/T/WWKNjQkmUL3/IUPKUHyP9jNblL40O9rQLr8D5iWwcSNXHSumuwZ5lcyK/i6ZvNyLGgeNbsOuC26qgez1c1YnFdhxtyu7obUZ7qkTHA8B8Uow1b8HKrGOEwsJzN430IFas=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BbRBVBVGZZn4xrJoz9TvKuG0g+vZNq+TrpUiWdwWbtrug/hvkNitEnk71ViKR72UWe0FU1Lj0CQqa9fNktI7TbSax+aHz+mcrtgvK778ProUSo4Jq8TyCmfdPQCCNM5MTjzNuc733DGgIoXhM7kfkAiO5jS76S/hg1qra//7FuA=
Received: by 10.65.194.13 with SMTP id w13mr5600105qbp.1189833328426;
        Fri, 14 Sep 2007 22:15:28 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Fri, 14 Sep 2007 22:15:28 -0700 (PDT)
Message-ID: <34b8543c0709142215ua8a5eeax95aff96a787e466@mail.gmail.com>
Date: Sat, 15 Sep 2007 08:45:28 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene indexes and relationship
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5967_14887491.1189833328418"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5967_14887491.1189833328418
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
In our application, we have many categories (indexes) in which different
kind of information have been indexed. we provided a facility for our users
to opt their category to search and we also provided a way that they select
more than one category to search, afterwards, we must return back the result
from selected categories in which they are related to each other and discard
other documents which their IDs are not common with the results from other
categories, in other words, an intersection of all results

currently, each category has an ID field and this help us to find which
document to select and which one to discard, in order to implement this, we
defined a HitCollector in which, we collect all the Lucene's document IDs to
load the document later as well as all category ID to find its relationship
with other result. we store these IDs in a java.util.BitSet  structure to
save the memory and also for performance issues.
now this works fine, but it's messy, further more, to find all common
documents we have to compare all the results two by two and this is really
exhaustive and eat up the CPU resources and this deprived us from the
Lucene's speed of searching.

In my opinion, if this simple relationship could be embedded inside the
Lucene Api at low level sections of loading documents, this process would be
done very fast, and I think this feature will make many Lucene's user happy

I want to know, whether this is possible for Lucene developers or not, or it
is in their TO DO list or they are going to provide it in future.

thank you all Lucene developers and producers.

-- 
Regards,
Mohammad Norouzi
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_5967_14887491.1189833328418--

From java-user-return-30278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 05:20:18 2007
Return-Path: <java-user-return-30278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78049 invoked from network); 15 Sep 2007 05:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 05:20:16 -0000
Received: (qmail 34715 invoked by uid 500); 15 Sep 2007 05:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34672 invoked by uid 500); 15 Sep 2007 05:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34657 invoked by uid 99); 15 Sep 2007 05:20:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 22:20:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 05:21:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IWQ4A-0008VL-2Z
	for java-user@lucene.apache.org; Fri, 14 Sep 2007 22:19:38 -0700
Message-ID: <12687410.post@talk.nabble.com>
Date: Fri, 14 Sep 2007 22:19:38 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12679970.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


HI testn,

it gives performance improvement while optimizing the Index. 

Now i seprate the IndexStore on a daily basis.(ie) 
For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007 like
wise it will minimize the size of the IndexStore.could you give me an idea
on how to open every day folders for every search.

Query I use here is,

9840836588 AND dateSc:[070901 TO 070910] 

07---->year (2007)
09---->month(september)
01----->day

i restrict for 15 days that it is possible to search 15 days record in my
application.at a time 10 users aare going to search every store.is there any
other better way to improve the search performance to avoid memory problem
as well as speed of the search.






testn wrote:
> 
> So did you see any improvement in performance?
> 
> Sebastin wrote:
>> 
>> It works finally .i use Lucene 2.2  in my application.thanks testn and
>> Mike
>> 
>> Michael McCandless-2 wrote:
>>> 
>>> 
>>> It sounds like there may be a Lucene version mismatch?  When Luke was
>>> used
>>> it was likely based on Lucene 2.2, but it sounds like an older version
>>> of
>>> Lucene is now being used to open the index?
>>> 
>>> Mike
>>> 
>>> "testn" <test1@doramail.com> wrote:
>>>> 
>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>> "Segment"?
>>>> The
>>>> case is different.
>>>> 
>>>> 
>>>> Sebastin wrote:
>>>> > 
>>>> > java.io.IoException:File Not Found- Segments  is the error message
>>>> > 
>>>> > testn wrote:
>>>> >> 
>>>> >> What is the error message? Probably Mike, Erick or Yonik can help
>>>> you
>>>> >> better on this since I'm no one in index area.
>>>> >> 
>>>> >> Sebastin wrote:
>>>> >>> 
>>>> >>> HI testn,
>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>> Luke.it
>>>> >>> optimize all the content into a single CFS file and it generates
>>>> >>> segments.gen and segments_8 file when i search the item it shows an
>>>> >>> error that segments file is not there.could you help me in this 
>>>> >>> 
>>>> >>> testn wrote:
>>>> >>>> 
>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>> reopen
>>>> >>>> the index, you can close and reopen only the updated 3 readers and
>>>> keep
>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time to
>>>> >>>> reopen it.
>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>> >>>> 3. You might consider separating indices in separated storage and
>>>> use
>>>> >>>> ParallelReader
>>>> >>>> 
>>>> >>>> 
>>>> >>>> 
>>>> >>>> Sebastin wrote:
>>>> >>>>> 
>>>> >>>>> The problem in my pplication are as follows:
>>>> >>>>>                  1.I am not able to see the updated records in my
>>>> >>>>> index store because i instantiate 
>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>> >>>>> search.further searches use the same IndexReaders(5 Directories)
>>>> and
>>>> >>>>> IndexSearcher with different queries.
>>>> >>>>> 
>>>> >>>>>                 2.My search is very very slow First 2 Directories
>>>> of
>>>> >>>>> size 10 GB each which are having old index records and no update
>>>> in
>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>> >>>>> 
>>>> >>>>>                 3.i am Indexing 20 million records per day so the
>>>> >>>>> Index store gets growing and it makes search very very slower.
>>>> >>>>>  
>>>> >>>>>                4.I am using searcherOne class as the global
>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>> consists of
>>>> >>>>> one IndexReader and IndexSearcher get set method which will hold
>>>> the
>>>> >>>>> IndexReader and IndexSearcher object after the First Search.it is
>>>> used
>>>> >>>>> for all other searches.
>>>> >>>>> 
>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>> Application
>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>> Fields.i
>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>> maximum
>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>> >>>>>                 
>>>> >>>>> 
>>>> >>>>> hossman wrote:
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> : I set IndexSearcher as the application Object after the first
>>>> >>>>>> search.
>>>> >>>>>> 	...
>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour to
>>>> see
>>>> >>>>>> the
>>>> >>>>>> : updated records .
>>>> >>>>>> 
>>>> >>>>>> i'm confused ... my understanding based on the comments you made
>>>> >>>>>> below 
>>>> >>>>>> (in an earlier message) was that you already *were* constructing
>>>> a
>>>> >>>>>> new  
>>>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>> memory 
>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>> >>>>>> 
>>>> >>>>>> if that's not what you said, then i think you need to explain,
>>>> in
>>>> >>>>>> detail, 
>>>> >>>>>> in one message, exactly what your problem is.  And don't assume
>>>> we 
>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for example,
>>>> what
>>>> >>>>>> the 
>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>> answer
>>>> >>>>>> to 
>>>> >>>>>> the specfic question i asked in my last message: does your
>>>> >>>>>> application, 
>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>> >>>>>> (IndexSearchers 
>>>> >>>>>> or IndexReaders) ?
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>> crore to
>>>> >>>>>> 6 crore.
>>>> >>>>>> : > for
>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>> >>>>>> IndexSearcher object
>>>> >>>>>> : > one
>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>> updated
>>>> >>>>>> records in
>>>> >>>>>> : > the
>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but the
>>>> >>>>>> problem when
>>>> >>>>>> : > i
>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>> appended.is
>>>> >>>>>> there any
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>> >>>>>> IndexSearcher as 
>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>> MultiReader?
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> -Hoss
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>>
>>>> ---------------------------------------------------------------------
>>>> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> >>>>>> For additional commands, e-mail:
>>>> java-user-help@lucene.apache.org
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>>> 
>>>> >>>>> 
>>>> >>>>> 
>>>> >>>> 
>>>> >>>> 
>>>> >>> 
>>>> >>> 
>>>> >> 
>>>> >> 
>>>> > 
>>>> > 
>>>> 
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>> 
>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12687410
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 05:28:09 2007
Return-Path: <java-user-return-30279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80724 invoked from network); 15 Sep 2007 05:28:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 05:28:07 -0000
Received: (qmail 38997 invoked by uid 500); 15 Sep 2007 05:27:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38956 invoked by uid 500); 15 Sep 2007 05:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38945 invoked by uid 99); 15 Sep 2007 05:27:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Sep 2007 22:27:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 05:29:39 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4BDE471C14C; Fri, 14 Sep 2007 22:27:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4728F71C11D
	for <java-user@lucene.apache.org>; Fri, 14 Sep 2007 22:27:33 -0700 (PDT)
Date: Fri, 14 Sep 2007 22:27:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: regarding FieldSelector
In-Reply-To: <34b8543c0709142153l29ba378cib8b244bc55b1eca9@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0709142225580.29740@radix.cryptio.net>
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com> 
 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org> 
 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com> 
 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com> 
 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com> 
 <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
 <34b8543c0709142153l29ba378cib8b244bc55b1eca9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: well, I can't see any doc() method with FieldSelector argument, perhaps this
: is provided in nightly builds of Lucene, currently I am using Lucene v2.1.0

2.2 was released in June, in it the Searchable interface defines a doc 
method which takes a FieldSelector...

http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/Searchable.html#doc(int,%20org.apache.lucene.document.FieldSelector)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 11:31:06 2007
Return-Path: <java-user-return-30280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4895 invoked from network); 15 Sep 2007 11:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 11:31:06 -0000
Received: (qmail 56117 invoked by uid 500); 15 Sep 2007 11:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55958 invoked by uid 500); 15 Sep 2007 11:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55947 invoked by uid 99); 15 Sep 2007 11:30:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 04:30:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 11:32:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 801EA7413B
	for <java-user@lucene.apache.org>; Sat, 15 Sep 2007 04:29:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0709142215ua8a5eeax95aff96a787e466@mail.gmail.com>
References: <34b8543c0709142215ua8a5eeax95aff96a787e466@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <99FF8F40-0A08-42E0-865A-6C577885C5A2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene indexes and relationship
Date: Sat, 15 Sep 2007 07:30:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like faceting, I think.  Have you looked at Solr?

-Grant

On Sep 15, 2007, at 1:15 AM, Mohammad Norouzi wrote:

> Hello,
> In our application, we have many categories (indexes) in which  
> different
> kind of information have been indexed. we provided a facility for  
> our users
> to opt their category to search and we also provided a way that  
> they select
> more than one category to search, afterwards, we must return back  
> the result
> from selected categories in which they are related to each other  
> and discard
> other documents which their IDs are not common with the results  
> from other
> categories, in other words, an intersection of all results
>
> currently, each category has an ID field and this help us to find  
> which
> document to select and which one to discard, in order to implement  
> this, we
> defined a HitCollector in which, we collect all the Lucene's  
> document IDs to
> load the document later as well as all category ID to find its  
> relationship
> with other result. we store these IDs in a java.util.BitSet   
> structure to
> save the memory and also for performance issues.
> now this works fine, but it's messy, further more, to find all common
> documents we have to compare all the results two by two and this is  
> really
> exhaustive and eat up the CPU resources and this deprived us from the
> Lucene's speed of searching.
>
> In my opinion, if this simple relationship could be embedded inside  
> the
> Lucene Api at low level sections of loading documents, this process  
> would be
> done very fast, and I think this feature will make many Lucene's  
> user happy
>
> I want to know, whether this is possible for Lucene developers or  
> not, or it
> is in their TO DO list or they are going to provide it in future.
>
> thank you all Lucene developers and producers.
>
> -- 
> Regards,
> Mohammad Norouzi
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 13:02:20 2007
Return-Path: <java-user-return-30281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28887 invoked from network); 15 Sep 2007 13:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 13:02:19 -0000
Received: (qmail 85187 invoked by uid 500); 15 Sep 2007 13:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85152 invoked by uid 500); 15 Sep 2007 13:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85141 invoked by uid 99); 15 Sep 2007 13:02:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 06:02:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_RED,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 13:03:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IWXHI-0008EK-Cf
	for java-user@lucene.apache.org; Sat, 15 Sep 2007 06:01:40 -0700
Message-ID: <12690100.post@talk.nabble.com>
Date: Sat, 15 Sep 2007 06:01:40 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12687410.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com> <12687410.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If you know that there are only 15 days of indexes you need to search on, you
just need to open only the latest 15 indexes at a time right? You can simply
create a wrapper that return MultiReader which you can cache for a while and
close the oldest index once the date rolls.


Sebastin wrote:
> 
> HI testn,
> 
> it gives performance improvement while optimizing the Index. 
> 
> Now i seprate the IndexStore on a daily basis.(ie) 
> For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007 like
> wise it will minimize the size of the IndexStore.could you give me an idea
> on how to open every day folders for every search.
> 
> Query I use here is,
> 
> 9840836588 AND dateSc:[070901 TO 070910] 
> 
> 07---->year (2007)
> 09---->month(september)
> 01----->day
> 
> i restrict for 15 days that it is possible to search 15 days record in my
> application.at a time 10 users aare going to search every store.is there
> any other better way to improve the search performance to avoid memory
> problem as well as speed of the search.
> 
> 
> 
> 
> 
> 
> testn wrote:
>> 
>> So did you see any improvement in performance?
>> 
>> Sebastin wrote:
>>> 
>>> It works finally .i use Lucene 2.2  in my application.thanks testn and
>>> Mike
>>> 
>>> Michael McCandless-2 wrote:
>>>> 
>>>> 
>>>> It sounds like there may be a Lucene version mismatch?  When Luke was
>>>> used
>>>> it was likely based on Lucene 2.2, but it sounds like an older version
>>>> of
>>>> Lucene is now being used to open the index?
>>>> 
>>>> Mike
>>>> 
>>>> "testn" <test1@doramail.com> wrote:
>>>>> 
>>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>>> "Segment"?
>>>>> The
>>>>> case is different.
>>>>> 
>>>>> 
>>>>> Sebastin wrote:
>>>>> > 
>>>>> > java.io.IoException:File Not Found- Segments  is the error message
>>>>> > 
>>>>> > testn wrote:
>>>>> >> 
>>>>> >> What is the error message? Probably Mike, Erick or Yonik can help
>>>>> you
>>>>> >> better on this since I'm no one in index area.
>>>>> >> 
>>>>> >> Sebastin wrote:
>>>>> >>> 
>>>>> >>> HI testn,
>>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>>> Luke.it
>>>>> >>> optimize all the content into a single CFS file and it generates
>>>>> >>> segments.gen and segments_8 file when i search the item it shows
>>>>> an
>>>>> >>> error that segments file is not there.could you help me in this 
>>>>> >>> 
>>>>> >>> testn wrote:
>>>>> >>>> 
>>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>>> reopen
>>>>> >>>> the index, you can close and reopen only the updated 3 readers
>>>>> and keep
>>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time to
>>>>> >>>> reopen it.
>>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>>> >>>> 3. You might consider separating indices in separated storage and
>>>>> use
>>>>> >>>> ParallelReader
>>>>> >>>> 
>>>>> >>>> 
>>>>> >>>> 
>>>>> >>>> Sebastin wrote:
>>>>> >>>>> 
>>>>> >>>>> The problem in my pplication are as follows:
>>>>> >>>>>                  1.I am not able to see the updated records in
>>>>> my
>>>>> >>>>> index store because i instantiate 
>>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>>> >>>>> search.further searches use the same IndexReaders(5 Directories)
>>>>> and
>>>>> >>>>> IndexSearcher with different queries.
>>>>> >>>>> 
>>>>> >>>>>                 2.My search is very very slow First 2
>>>>> Directories of
>>>>> >>>>> size 10 GB each which are having old index records and no update
>>>>> in
>>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>>> >>>>> 
>>>>> >>>>>                 3.i am Indexing 20 million records per day so
>>>>> the
>>>>> >>>>> Index store gets growing and it makes search very very slower.
>>>>> >>>>>  
>>>>> >>>>>                4.I am using searcherOne class as the global
>>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>>> consists of
>>>>> >>>>> one IndexReader and IndexSearcher get set method which will hold
>>>>> the
>>>>> >>>>> IndexReader and IndexSearcher object after the First Search.it
>>>>> is used
>>>>> >>>>> for all other searches.
>>>>> >>>>> 
>>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>> Application
>>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>> Fields.i
>>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>>> maximum
>>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>>> >>>>>                 
>>>>> >>>>> 
>>>>> >>>>> hossman wrote:
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> : I set IndexSearcher as the application Object after the first
>>>>> >>>>>> search.
>>>>> >>>>>> 	...
>>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour to
>>>>> see
>>>>> >>>>>> the
>>>>> >>>>>> : updated records .
>>>>> >>>>>> 
>>>>> >>>>>> i'm confused ... my understanding based on the comments you
>>>>> made
>>>>> >>>>>> below 
>>>>> >>>>>> (in an earlier message) was that you already *were*
>>>>> constructing a
>>>>> >>>>>> new  
>>>>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>>> memory 
>>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>> >>>>>> 
>>>>> >>>>>> if that's not what you said, then i think you need to explain,
>>>>> in
>>>>> >>>>>> detail, 
>>>>> >>>>>> in one message, exactly what your problem is.  And don't assume
>>>>> we 
>>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for example,
>>>>> what
>>>>> >>>>>> the 
>>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>>> answer
>>>>> >>>>>> to 
>>>>> >>>>>> the specfic question i asked in my last message: does your
>>>>> >>>>>> application, 
>>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>>> >>>>>> (IndexSearchers 
>>>>> >>>>>> or IndexReaders) ?
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>>> crore to
>>>>> >>>>>> 6 crore.
>>>>> >>>>>> : > for
>>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>>> >>>>>> IndexSearcher object
>>>>> >>>>>> : > one
>>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>>> updated
>>>>> >>>>>> records in
>>>>> >>>>>> : > the
>>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but
>>>>> the
>>>>> >>>>>> problem when
>>>>> >>>>>> : > i
>>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>>> appended.is
>>>>> >>>>>> there any
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>> >>>>>> IndexSearcher as 
>>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>>> MultiReader?
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> -Hoss
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> >>>>>> For additional commands, e-mail:
>>>>> java-user-help@lucene.apache.org
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>>> 
>>>>> >>>>> 
>>>>> >>>>> 
>>>>> >>>> 
>>>>> >>>> 
>>>>> >>> 
>>>>> >>> 
>>>>> >> 
>>>>> >> 
>>>>> > 
>>>>> > 
>>>>> 
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>> 
>>>>> 
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> 
>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12690100
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 14:34:11 2007
Return-Path: <java-user-return-30282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45941 invoked from network); 15 Sep 2007 14:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 14:34:10 -0000
Received: (qmail 56252 invoked by uid 500); 15 Sep 2007 14:33:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56212 invoked by uid 500); 15 Sep 2007 14:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56195 invoked by uid 99); 15 Sep 2007 14:33:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 07:33:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_RED,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 14:35:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IWYiB-0001rW-Nq
	for java-user@lucene.apache.org; Sat, 15 Sep 2007 07:33:31 -0700
Message-ID: <12690737.post@talk.nabble.com>
Date: Sat, 15 Sep 2007 07:33:31 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12690100.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com> <12687410.post@talk.nabble.com> <12690100.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


 HI testn,
               could you trigger me out the You can simply create a wrapper
that return MultiReader which you can cache for a while and close the oldest
index once the date rolls.,this point in detail.i am not able to get that. 

testn wrote:
> 
> If you know that there are only 15 days of indexes you need to search on,
> you just need to open only the latest 15 indexes at a time right? You can
> simply create a wrapper that return MultiReader which you can cache for a
> while and close the oldest index once the date rolls.
> 
> 
> Sebastin wrote:
>> 
>> HI testn,
>> 
>> it gives performance improvement while optimizing the Index. 
>> 
>> Now i seprate the IndexStore on a daily basis.(ie) 
>> For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007 like
>> wise it will minimize the size of the IndexStore.could you give me an
>> idea on how to open every day folders for every search.
>> 
>> Query I use here is,
>> 
>> 9840836588 AND dateSc:[070901 TO 070910] 
>> 
>> 07---->year (2007)
>> 09---->month(september)
>> 01----->day
>> 
>> i restrict for 15 days that it is possible to search 15 days record in my
>> application.at a time 10 users aare going to search every store.is there
>> any other better way to improve the search performance to avoid memory
>> problem as well as speed of the search.
>> 
>> 
>> 
>> 
>> 
>> 
>> testn wrote:
>>> 
>>> So did you see any improvement in performance?
>>> 
>>> Sebastin wrote:
>>>> 
>>>> It works finally .i use Lucene 2.2  in my application.thanks testn and
>>>> Mike
>>>> 
>>>> Michael McCandless-2 wrote:
>>>>> 
>>>>> 
>>>>> It sounds like there may be a Lucene version mismatch?  When Luke was
>>>>> used
>>>>> it was likely based on Lucene 2.2, but it sounds like an older version
>>>>> of
>>>>> Lucene is now being used to open the index?
>>>>> 
>>>>> Mike
>>>>> 
>>>>> "testn" <test1@doramail.com> wrote:
>>>>>> 
>>>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>>>> "Segment"?
>>>>>> The
>>>>>> case is different.
>>>>>> 
>>>>>> 
>>>>>> Sebastin wrote:
>>>>>> > 
>>>>>> > java.io.IoException:File Not Found- Segments  is the error message
>>>>>> > 
>>>>>> > testn wrote:
>>>>>> >> 
>>>>>> >> What is the error message? Probably Mike, Erick or Yonik can help
>>>>>> you
>>>>>> >> better on this since I'm no one in index area.
>>>>>> >> 
>>>>>> >> Sebastin wrote:
>>>>>> >>> 
>>>>>> >>> HI testn,
>>>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>>>> Luke.it
>>>>>> >>> optimize all the content into a single CFS file and it generates
>>>>>> >>> segments.gen and segments_8 file when i search the item it shows
>>>>>> an
>>>>>> >>> error that segments file is not there.could you help me in this 
>>>>>> >>> 
>>>>>> >>> testn wrote:
>>>>>> >>>> 
>>>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>>>> reopen
>>>>>> >>>> the index, you can close and reopen only the updated 3 readers
>>>>>> and keep
>>>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time
>>>>>> to
>>>>>> >>>> reopen it.
>>>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>>>> >>>> 3. You might consider separating indices in separated storage
>>>>>> and use
>>>>>> >>>> ParallelReader
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>>> Sebastin wrote:
>>>>>> >>>>> 
>>>>>> >>>>> The problem in my pplication are as follows:
>>>>>> >>>>>                  1.I am not able to see the updated records in
>>>>>> my
>>>>>> >>>>> index store because i instantiate 
>>>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>> >>>>> search.further searches use the same IndexReaders(5
>>>>>> Directories) and
>>>>>> >>>>> IndexSearcher with different queries.
>>>>>> >>>>> 
>>>>>> >>>>>                 2.My search is very very slow First 2
>>>>>> Directories of
>>>>>> >>>>> size 10 GB each which are having old index records and no
>>>>>> update in
>>>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>>>> >>>>> 
>>>>>> >>>>>                 3.i am Indexing 20 million records per day so
>>>>>> the
>>>>>> >>>>> Index store gets growing and it makes search very very slower.
>>>>>> >>>>>  
>>>>>> >>>>>                4.I am using searcherOne class as the global
>>>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>>>> consists of
>>>>>> >>>>> one IndexReader and IndexSearcher get set method which will
>>>>>> hold the
>>>>>> >>>>> IndexReader and IndexSearcher object after the First Search.it
>>>>>> is used
>>>>>> >>>>> for all other searches.
>>>>>> >>>>> 
>>>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>>> Application
>>>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>>> Fields.i
>>>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>>>> maximum
>>>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>>>> >>>>>                 
>>>>>> >>>>> 
>>>>>> >>>>> hossman wrote:
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : I set IndexSearcher as the application Object after the
>>>>>> first
>>>>>> >>>>>> search.
>>>>>> >>>>>> 	...
>>>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour
>>>>>> to see
>>>>>> >>>>>> the
>>>>>> >>>>>> : updated records .
>>>>>> >>>>>> 
>>>>>> >>>>>> i'm confused ... my understanding based on the comments you
>>>>>> made
>>>>>> >>>>>> below 
>>>>>> >>>>>> (in an earlier message) was that you already *were*
>>>>>> constructing a
>>>>>> >>>>>> new  
>>>>>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>>>> memory 
>>>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>> >>>>>> 
>>>>>> >>>>>> if that's not what you said, then i think you need to explain,
>>>>>> in
>>>>>> >>>>>> detail, 
>>>>>> >>>>>> in one message, exactly what your problem is.  And don't
>>>>>> assume we 
>>>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for
>>>>>> example, what
>>>>>> >>>>>> the 
>>>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>>>> answer
>>>>>> >>>>>> to 
>>>>>> >>>>>> the specfic question i asked in my last message: does your
>>>>>> >>>>>> application, 
>>>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>>>> >>>>>> (IndexSearchers 
>>>>>> >>>>>> or IndexReaders) ?
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>>>> crore to
>>>>>> >>>>>> 6 crore.
>>>>>> >>>>>> : > for
>>>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>>>> >>>>>> IndexSearcher object
>>>>>> >>>>>> : > one
>>>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>>>> updated
>>>>>> >>>>>> records in
>>>>>> >>>>>> : > the
>>>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but
>>>>>> the
>>>>>> >>>>>> problem when
>>>>>> >>>>>> : > i
>>>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>>>> appended.is
>>>>>> >>>>>> there any
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>> >>>>>> IndexSearcher as 
>>>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>>>> MultiReader?
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> -Hoss
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> >>>>>> To unsubscribe, e-mail:
>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>> >>>>>> For additional commands, e-mail:
>>>>>> java-user-help@lucene.apache.org
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>> 
>>>>>> >>>>> 
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>> 
>>>>>> >>> 
>>>>>> >> 
>>>>>> >> 
>>>>>> > 
>>>>>> > 
>>>>>> 
>>>>>> -- 
>>>>>> View this message in context:
>>>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>> 
>>>>>> 
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>> 
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12690737
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 15:23:13 2007
Return-Path: <java-user-return-30283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78979 invoked from network); 15 Sep 2007 15:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 15:23:12 -0000
Received: (qmail 79257 invoked by uid 500); 15 Sep 2007 15:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79216 invoked by uid 500); 15 Sep 2007 15:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79205 invoked by uid 99); 15 Sep 2007 15:23:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 08:22:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 15:22:57 +0000
Received: by py-out-1112.google.com with SMTP id d32so4005084pye
        for <java-user@lucene.apache.org>; Sat, 15 Sep 2007 08:22:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=DJDIGX/vjKAgDEDew+L5ME/jsRMP9baXUQVdFMKTA+4=;
        b=aA2FfBoxwGCVKe2wIkwXj7JzgweONWd9OvD24hMpM3N++SfSKHCJ/FjNO55mjPyftPkmG2piIJUNNROSpF4HpyrDCqfwBoClVFHiy30uIdYKJoAOk86x5rWShMJ4aimOOA9Rnxlk3WhcVnOL0uvdNnW8F5/5UIWPWnE6Ry2i9y0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RVEzVFyPWIyzGZ/9xy1gFs0VKKJFJVLur4HZpsZKCkxLB0S60J+MywXdYiDSP1AZfNP1Jpz3qJFIhXv6RucbPHTI/M3OWWKblu3cleDy7rGatO6JMmjy8z/t1NXmhGxroLrSSWLSKnqyxkhUksB3lrgdLQ/zqrvynzhG3gpvjDw=
Received: by 10.64.193.2 with SMTP id q2mr6348175qbf.1189869755764;
        Sat, 15 Sep 2007 08:22:35 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e14sm1324216qba.2007.09.15.08.22.33
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 15 Sep 2007 08:22:34 -0700 (PDT)
Message-ID: <46EBF893.8070104@gmail.com>
Date: Sat, 15 Sep 2007 11:21:55 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Mixing SpanQuery and BooleanQuery
References: <e994873a0708061033j7db884feyfbcfceddfa48e287@mail.gmail.com> <359a92830708061200u69a6a000yf46ca421b3ea52ad@mail.gmail.com>
In-Reply-To: <359a92830708061200u69a6a000yf46ca421b3ea52ad@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, a SpanAndQuery could easily be a SpanNearQuery if a huge distance 
was allowed. I do wonder how the scoring might be different based on the 
distance of the match though...

Erick Erickson wrote:
> Isn't a SpanAndQuery the same as a SpanNearQuery? Perhaps
> with "interesting" slops......
>
> Erick
>
> On 8/6/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>   
>> I'm trying to create a fairly complex SpanQuery from a binary parse tree.
>> I create SpanOrQueries from SpanTermQueries and combine SpanOrQueries into
>> BooleanQueries. So far, so good.
>> The problem is that I don't see how to create a SpanNotQuery from a
>> BooleanQuery and a SpanTermQuery. I want the BooleanQuery to be the
>> 'include' span and the SpanTermQuery to be the 'exclude' span.
>> Unfortunately, the BooleanQuery cannot be cast to a SpanQuery.
>>
>> I thought that SpanQuery and BooleanQuery could be freely intermixed, but
>> this doesn't seem to be the case. It seems that what's really needed is a
>> 'SpanAndQuery'.
>>
>> Is there another way to build this type of query?
>>
>> Thanks,
>> Peter
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 15 22:40:07 2007
Return-Path: <java-user-return-30284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81910 invoked from network); 15 Sep 2007 22:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Sep 2007 22:40:06 -0000
Received: (qmail 95440 invoked by uid 500); 15 Sep 2007 22:39:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95063 invoked by uid 500); 15 Sep 2007 22:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95052 invoked by uid 99); 15 Sep 2007 22:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 15:39:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Sep 2007 22:39:51 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1127495fkz
        for <java-user@lucene.apache.org>; Sat, 15 Sep 2007 15:39:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IUySw5Z8Z2RQpZxKBS8m+d76K5kwNdqWqiSdXIWFNeE=;
        b=Q/SqWoU2V0vzkFjvYh325hxVbR+SksCxuyioEGk1z7Qb22zU+Lq9O2jgZpCDr0mm9Z1UTdNQAlZd4dB4Hv2iIEDIG3Eo7R8lemH0TeEyLV41qWkJnkM1XfsM7qneSCXkBHotcUo+/mT82X7KKCd96fFqim45aGftScr0ZjLnEnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=s75sMD24rT+t9Ai2gIDqBIhKu5DIEUDC6mKIk7h/4e73BzHXGkblntSzNsXbfJERRJEZigxBoFkXI9oJ65Lu412c6EhpMu3PhsiMU+90DRZMFYi6G4oAntd6DpkHX1Vbr+WrvxEqB8C797PIUYUD1WP0rP7iRsvoP+lPVKzfxp0=
Received: by 10.82.152.16 with SMTP id z16mr3563707bud.1189895969900;
        Sat, 15 Sep 2007 15:39:29 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 15 Sep 2007 15:39:29 -0700 (PDT)
Message-ID: <359a92830709151539v6e7bbfeft5a30c4e4c5dc5138@mail.gmail.com>
Date: Sat, 15 Sep 2007 18:39:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple Tokens in a Tokengroup not matching
In-Reply-To: <46EA93D5.4090909@cyc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4918_27595516.1189895969891"
References: <34b8543c0709120213m619a117aj1f988334890a4cd9@mail.gmail.com>
	 <6495BFAA-0337-4830-B672-AFCEFDD3A9F9@apache.org>
	 <34b8543c0709120440h4b5f1ecau397ed25d16b35a74@mail.gmail.com>
	 <359a92830709120653y162100fdv97aa5585350781d7@mail.gmail.com>
	 <34b8543c0709130150o2bf746beg995cfb00a6a97f68@mail.gmail.com>
	 <94FB032B-DF03-4599-B146-416019560C57@gmail.com>
	 <46EA93D5.4090909@cyc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4918_27595516.1189895969891
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I really can't tell much from your e-mail. What I'd recommend is
that you get a copy of Luke and examine your index (including
your query and it's results). Also, try query.toString() to see what
the actual query submitted to Lucene is, that may give you some
clues as to what's going on.

If the results make no sense, think about posting the results of
the toString and/or the Luke explain to  the list and I suspect
you'll get a more helpful response.

Imagine that you had been given your e-mail while knowing nothing
about the application. There's not much "there" there <G>. More
detail would help us give you a more helpful response....

That said, it's tough getting a bunch of code dropped on  your
head and being told "fix it". Been there, done that. Not much fun.

Best
Erick


On 9/14/07, Dave Schneider <daves@cyc.com> wrote:
>
> Hi,
>
> I've inherited some Lucene 1.9.1 code, and have run into the following
> problem:
>
> I have a TokenGroup with multiple tokens in it, and a query that should
> match against multiple tokens (e.g. X and Y) in the TokenGroup.
> However, when I look in the Hit that results, I see that one of the
> Tokens in the TokenGroup has a weight of 1.0, while all the rest have a
> weight of 0.  If I run a search with just X in the query, it matches the
> TokenGroup, and when I run a search with just Y in the query, it also
> matches the TokenGroup, just as I'd expect.  But a query that includes
> both X and Y looks like only X matches.  I need to see that both X and Y
> matched in order to get my highlighting to work correctly.
>
> Can anyone provide any hints as to what might be going on here, and what
> I might do to fix it?  We have a vague suspicion that it's related to
> the weight on the matching token being 1.0 that's causing Lucene to not
> both with any other tokens (because the weight for the TokenGroup is
> already as high as it can be), but it's just a suspicion.
>
> Thanks,
>
> Dave Schneider
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_4918_27595516.1189895969891--

From java-user-return-30285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 04:03:41 2007
Return-Path: <java-user-return-30285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25617 invoked from network); 17 Sep 2007 04:03:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 04:03:40 -0000
Received: (qmail 77593 invoked by uid 500); 17 Sep 2007 04:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77547 invoked by uid 500); 17 Sep 2007 04:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77536 invoked by uid 99); 17 Sep 2007 04:03:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Sep 2007 21:03:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_RED,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 04:03:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IX7p7-0005El-RE
	for java-user@lucene.apache.org; Sun, 16 Sep 2007 21:03:01 -0700
Message-ID: <12729051.post@talk.nabble.com>
Date: Sun, 16 Sep 2007 21:03:01 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12690100.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com> <12687410.post@talk.nabble.com> <12690100.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi testn,
              Every IndexFolder is of size 1.5 GB of size,eventhough when i
used to Open and close the IndexSearcher it wont release the memory for all
the searches.
              When i set the IndexSearcher object as the Application Scope
object its not possile for me to see current day records.

                 Could you give me an Idea how to trigger out this problem. 
      

testn wrote:
> 
> If you know that there are only 15 days of indexes you need to search on,
> you just need to open only the latest 15 indexes at a time right? You can
> simply create a wrapper that return MultiReader which you can cache for a
> while and close the oldest index once the date rolls.
> 
> 
> Sebastin wrote:
>> 
>> HI testn,
>> 
>> it gives performance improvement while optimizing the Index. 
>> 
>> Now i seprate the IndexStore on a daily basis.(ie) 
>> For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007 like
>> wise it will minimize the size of the IndexStore.could you give me an
>> idea on how to open every day folders for every search.
>> 
>> Query I use here is,
>> 
>> 9840836588 AND dateSc:[070901 TO 070910] 
>> 
>> 07---->year (2007)
>> 09---->month(september)
>> 01----->day
>> 
>> i restrict for 15 days that it is possible to search 15 days record in my
>> application.at a time 10 users aare going to search every store.is there
>> any other better way to improve the search performance to avoid memory
>> problem as well as speed of the search.
>> 
>> 
>> 
>> 
>> 
>> 
>> testn wrote:
>>> 
>>> So did you see any improvement in performance?
>>> 
>>> Sebastin wrote:
>>>> 
>>>> It works finally .i use Lucene 2.2  in my application.thanks testn and
>>>> Mike
>>>> 
>>>> Michael McCandless-2 wrote:
>>>>> 
>>>>> 
>>>>> It sounds like there may be a Lucene version mismatch?  When Luke was
>>>>> used
>>>>> it was likely based on Lucene 2.2, but it sounds like an older version
>>>>> of
>>>>> Lucene is now being used to open the index?
>>>>> 
>>>>> Mike
>>>>> 
>>>>> "testn" <test1@doramail.com> wrote:
>>>>>> 
>>>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>>>> "Segment"?
>>>>>> The
>>>>>> case is different.
>>>>>> 
>>>>>> 
>>>>>> Sebastin wrote:
>>>>>> > 
>>>>>> > java.io.IoException:File Not Found- Segments  is the error message
>>>>>> > 
>>>>>> > testn wrote:
>>>>>> >> 
>>>>>> >> What is the error message? Probably Mike, Erick or Yonik can help
>>>>>> you
>>>>>> >> better on this since I'm no one in index area.
>>>>>> >> 
>>>>>> >> Sebastin wrote:
>>>>>> >>> 
>>>>>> >>> HI testn,
>>>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>>>> Luke.it
>>>>>> >>> optimize all the content into a single CFS file and it generates
>>>>>> >>> segments.gen and segments_8 file when i search the item it shows
>>>>>> an
>>>>>> >>> error that segments file is not there.could you help me in this 
>>>>>> >>> 
>>>>>> >>> testn wrote:
>>>>>> >>>> 
>>>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>>>> reopen
>>>>>> >>>> the index, you can close and reopen only the updated 3 readers
>>>>>> and keep
>>>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time
>>>>>> to
>>>>>> >>>> reopen it.
>>>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>>>> >>>> 3. You might consider separating indices in separated storage
>>>>>> and use
>>>>>> >>>> ParallelReader
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>>> Sebastin wrote:
>>>>>> >>>>> 
>>>>>> >>>>> The problem in my pplication are as follows:
>>>>>> >>>>>                  1.I am not able to see the updated records in
>>>>>> my
>>>>>> >>>>> index store because i instantiate 
>>>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>> >>>>> search.further searches use the same IndexReaders(5
>>>>>> Directories) and
>>>>>> >>>>> IndexSearcher with different queries.
>>>>>> >>>>> 
>>>>>> >>>>>                 2.My search is very very slow First 2
>>>>>> Directories of
>>>>>> >>>>> size 10 GB each which are having old index records and no
>>>>>> update in
>>>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>>>> >>>>> 
>>>>>> >>>>>                 3.i am Indexing 20 million records per day so
>>>>>> the
>>>>>> >>>>> Index store gets growing and it makes search very very slower.
>>>>>> >>>>>  
>>>>>> >>>>>                4.I am using searcherOne class as the global
>>>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>>>> consists of
>>>>>> >>>>> one IndexReader and IndexSearcher get set method which will
>>>>>> hold the
>>>>>> >>>>> IndexReader and IndexSearcher object after the First Search.it
>>>>>> is used
>>>>>> >>>>> for all other searches.
>>>>>> >>>>> 
>>>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>>> Application
>>>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>>> Fields.i
>>>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>>>> maximum
>>>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>>>> >>>>>                 
>>>>>> >>>>> 
>>>>>> >>>>> hossman wrote:
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : I set IndexSearcher as the application Object after the
>>>>>> first
>>>>>> >>>>>> search.
>>>>>> >>>>>> 	...
>>>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour
>>>>>> to see
>>>>>> >>>>>> the
>>>>>> >>>>>> : updated records .
>>>>>> >>>>>> 
>>>>>> >>>>>> i'm confused ... my understanding based on the comments you
>>>>>> made
>>>>>> >>>>>> below 
>>>>>> >>>>>> (in an earlier message) was that you already *were*
>>>>>> constructing a
>>>>>> >>>>>> new  
>>>>>> >>>>>> IndexSearcher once an hour -- but every time you do that, your
>>>>>> memory 
>>>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>> >>>>>> 
>>>>>> >>>>>> if that's not what you said, then i think you need to explain,
>>>>>> in
>>>>>> >>>>>> detail, 
>>>>>> >>>>>> in one message, exactly what your problem is.  And don't
>>>>>> assume we 
>>>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for
>>>>>> example, what
>>>>>> >>>>>> the 
>>>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>>>> answer
>>>>>> >>>>>> to 
>>>>>> >>>>>> the specfic question i asked in my last message: does your
>>>>>> >>>>>> application, 
>>>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>>>> >>>>>> (IndexSearchers 
>>>>>> >>>>>> or IndexReaders) ?
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>>>> crore to
>>>>>> >>>>>> 6 crore.
>>>>>> >>>>>> : > for
>>>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>>>> >>>>>> IndexSearcher object
>>>>>> >>>>>> : > one
>>>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>>>> updated
>>>>>> >>>>>> records in
>>>>>> >>>>>> : > the
>>>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but
>>>>>> the
>>>>>> >>>>>> problem when
>>>>>> >>>>>> : > i
>>>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>>>> appended.is
>>>>>> >>>>>> there any
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>> >>>>>> IndexSearcher as 
>>>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>>>> MultiReader?
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> -Hoss
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> >>>>>> To unsubscribe, e-mail:
>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>> >>>>>> For additional commands, e-mail:
>>>>>> java-user-help@lucene.apache.org
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>>> 
>>>>>> >>>>> 
>>>>>> >>>>> 
>>>>>> >>>> 
>>>>>> >>>> 
>>>>>> >>> 
>>>>>> >>> 
>>>>>> >> 
>>>>>> >> 
>>>>>> > 
>>>>>> > 
>>>>>> 
>>>>>> -- 
>>>>>> View this message in context:
>>>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>> 
>>>>>> 
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>> 
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12729051
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 09:41:27 2007
Return-Path: <java-user-return-30286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33104 invoked from network); 17 Sep 2007 09:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 09:41:26 -0000
Received: (qmail 76493 invoked by uid 500); 17 Sep 2007 09:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76451 invoked by uid 500); 17 Sep 2007 09:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76440 invoked by uid 99); 17 Sep 2007 09:41:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 02:41:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 09:41:10 +0000
Received: by py-out-1112.google.com with SMTP id d32so5291194pye
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 02:40:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=+6l8ioggJERNGO7r6d7V0LS0s1zcN3UPomQaLPe88WI=;
        b=ERxWq5CozBnfnN9qdmQpntxqYJ6zPfhtA0eGGYFzSd5DDZixuR7oudg36KjLT9c1pJwu5w9sr/QCoPn3EN/lOStWsaL/rOWNsON66jidpTtAiPkT/VzJysDaQkn5K+niqVe3X8JXNULzps0F1FESMEklX1UHqm2WTbP/AmwN60E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=r/j/ji19LWeluexC4CH7SF7eGh4cu1xyLf4LZTDga5G/xiXaSH/2f0kZvyJdXV92lu8C69SbXtuGDmA3g0nzEojOkx1f6jO4WQpsxls1CUS50aBDoWIIlmWO6DomdkH5s5fHx95vgaZSH2Crj2dvgq9xrIteApyli105Us+gSNw=
Received: by 10.65.51.4 with SMTP id d4mr9897110qbk.1190022048983;
        Mon, 17 Sep 2007 02:40:48 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Mon, 17 Sep 2007 02:40:48 -0700 (PDT)
Message-ID: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
Date: Mon, 17 Sep 2007 13:10:48 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: a query for a special AND?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11488_29765060.1190022048974"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11488_29765060.1190022048974
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I have a problem in getting correct result from Lucene, consider we have an
index containing documents with fields "field1" and "field2" etc. now I want
to have documents in which their field1 are equal one by one and their
field2 with two different value

to clarify consider I have this query:
field1:val*  (field2:"myValue1" XOR field2:"myValue2")

now I want this result:
field1              field2
val1                myValue1
val1                myValue2
val2                myValue1
val2                myValue2

this result is not acceptable:
val3              myValue1
or
val4             myValue1
val4             myValue3

I put XOR as operator because this is not a typical OR, it's different, it
means documents that contains both myValue1 and myValue2 for the field
field2

how to build a query to get such result?

thanks in advance
-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_11488_29765060.1190022048974--

From java-user-return-30287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 10:49:30 2007
Return-Path: <java-user-return-30287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59820 invoked from network); 17 Sep 2007 10:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 10:49:28 -0000
Received: (qmail 48239 invoked by uid 500); 17 Sep 2007 10:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48194 invoked by uid 500); 17 Sep 2007 10:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48183 invoked by uid 99); 17 Sep 2007 10:49:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 03:49:15 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 10:49:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXE9s-00062t-5K
	for java-user@lucene.apache.org; Mon, 17 Sep 2007 03:48:52 -0700
Message-ID: <12733449.post@talk.nabble.com>
Date: Mon, 17 Sep 2007 03:48:52 -0700 (PDT)
From: Amadeous <someone_else_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Sort on ParallelMultiSearcher with remote searchables
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: someone_else_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I want to sort results of a query according to a specific field(date).I have
a parallelMultiSearcher with some underlying remote searchers. Indexes in
remote searchables are large and enabling sort will make searching slow. As
I understood from previous threads, a solution is: searching without sorting
and then manually sorting top N documents(For example top 1000 most relevant
documents). I used parallelMultiSearcher.search(query, filter) which returns
a Hits object and then I manually sorted top 1000 documents of this Hits
object, but it is slow and memory consuming.
Is there any better solution for this problem?
Best Regards


-- 
View this message in context: http://www.nabble.com/Sort-on-ParallelMultiSearcher-with-remote-searchables-tf4465854.html#a12733449
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 10:52:15 2007
Return-Path: <java-user-return-30288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61016 invoked from network); 17 Sep 2007 10:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 10:52:14 -0000
Received: (qmail 55189 invoked by uid 500); 17 Sep 2007 10:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54875 invoked by uid 500); 17 Sep 2007 10:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54864 invoked by uid 99); 17 Sep 2007 10:52:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 03:52:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 10:53:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXECW-00066l-S4
	for java-user@lucene.apache.org; Mon, 17 Sep 2007 03:51:36 -0700
Message-ID: <12733482.post@talk.nabble.com>
Date: Mon, 17 Sep 2007 03:51:36 -0700 (PDT)
From: melix <cedric.champeau@lingway.com>
To: java-user@lucene.apache.org
Subject: Re: Span queries and complex scoring
In-Reply-To: <200709112005.25433.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cedric.champeau@lingway.com
References: <12615745.post@talk.nabble.com> <200709112005.25433.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Paul. I'm doing something very similar, but I'd like to notice that it
is very hard to "extend" Lucene without breaking compatibility. I mean I
have written classes that expand SpanQueries, but, for example, and to my
mind not understandable, classes like "BooleanWeight" are package protected,
which prevents from instanciating them. This often leads to code copies
which is not recommanded for maintainability...

I've faced the very same problem with NearSpansOrdered and so on. I think
unless there is a very good reason for it, classes should be made public,
this would at least make the "delegate" design pattern available.

Cheers,

Cedric


Paul Elschot wrote:
> 
> Cedric,
> 
> In case your requirements allow this, try and use subclass of Spans
> that has a score() method that returns a value that is used together
> with the other span info to provide a score value to your own
> SpanScorer at the top level.
> This score value can summarize the influence of the individual
> span scores of the subqueries.
> For this you will need to change the whole span package, but
> it is somewhat simpler than using a complete Scorer for each
> SpanQuery in the query tree.
> 
> With a lot of nested SpanOrQueries, merging the Spans can become
> a performance bottleneck. The current situation can be improved
> by creating a specialized PriorityQueue for Spans, much like the
> ScorerDocQueue that is used by DisjunctionSumScorer.
> With this, it is possible to avoid SpanOrQuery by using term payloads
> to compute the score value for the Spans of a SpanTermQuery, 
> but iirc the payloads are not yet in the trunk.
> 
> Regards,
> Paul Elschot
> 
> 
> On Tuesday 11 September 2007 16:17, melix wrote:
>> 
>> Hi,
>> 
>> I'm working on an application which requires a complex scoring (based on
>> semantics analysis). The scoring must be highly configurable, and I've
>> found
>> ways to do that, but I'm facing a discrete but annoying problem. All my
>> queries are, basically, complex span queries. I mean for example a
>> SpanNearQuery which embeds a SpanOrQuery which itself may embed another
>> SpanNearQuery etc...
>> 
>> I've followed the instructions at
>> 
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/package-summary.html#changingScoring
>> about changing scoring. The problem is that a document score is highly
>> dependent on *what* matched, and that the getSpans() method on
>> spanqueries
>> does not provide that kind of information.
>> 
>> I created my own SpanQuery subclasses which override the createWeight
>> method
>> so that the scorer used is my own too. It basically replaces the
>> SpanScorer,
>> and should recurse the spans tree to compose a score based on the type of
>> subqueries (near, and, or, not) and what matched. The problem is that the
>> getspans() methods that exists in Lucene are either anonymous classes
>> which
>> I cannot browse, or that I have not access to the required information.
>> 
>> Basically, in a SpanOrQuery, I am not able to find out what matched. Have
>> any of you faced that kind of problem, and found out an elegant way to do
>> it
>> without having to completely rewrite each getSpans() method for all types
>> of
>> queries (this is basically what was done in a previous version of the
>> application) ?
>> 
>> Thanks,
>> 
>> Cedric
>> 
>> -- 
>> View this message in context: 
> http://www.nabble.com/Span-queries-and-complex-scoring-tf4422915.html#a12615745
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Span-queries-and-complex-scoring-tf4422915.html#a12733482
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 12:22:24 2007
Return-Path: <java-user-return-30289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23316 invoked from network); 17 Sep 2007 12:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 12:22:22 -0000
Received: (qmail 50878 invoked by uid 500); 17 Sep 2007 12:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50838 invoked by uid 500); 17 Sep 2007 12:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50827 invoked by uid 99); 17 Sep 2007 12:22:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 05:22:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 12:23:58 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2161457wah
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 05:21:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Ogs7btzwopmO7KJ7e8WyU3RhHaX2FTaLOPvr2K/yUMg=;
        b=mihbRVsFQHisULM+3IAo/JU0O9RW9h0T4vVomrFlQPzdtGA1KPJCNjYNGkOV2eiKWFxbYJEWH7zPzaM3e/jbQbgNH3J/gcdM+sScOM/h8et0b5td4ZLjCo1+twpLic4qPYLka/WGiW8ETkRcVuitR1DqEF/JKZGNUsHN1sbCDAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KzvieaQKTLhaNedXBMt6MqQHGE+cMIekIK0iAo6SbX+FZTHld6nuYgGSJBTLc61qON5zVoPNawPGPVI7I31R7eTIsoIpTKBu6RN9fSqDCsCNhqV5Rh48f5Zfew16Vs6AT6C9oMceeVzwRQCKXFK5JkgRa290TiycYGq6mxVCgik=
Received: by 10.114.88.1 with SMTP id l1mr1771859wab.1190031703178;
        Mon, 17 Sep 2007 05:21:43 -0700 (PDT)
Received: by 10.114.205.14 with HTTP; Mon, 17 Sep 2007 05:21:43 -0700 (PDT)
Message-ID: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
Date: Mon, 17 Sep 2007 17:51:43 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-dev@lucene.apache.org, java-user@lucene.apache.org
Subject: Caching in lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11905_17230762.1190031703162"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11905_17230762.1190031703162
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

One thing that i understand about IndexReader is that for subsequent
queries, results come fast as the IndexReader needs to be warmed up.
According to this, I am trying to find out the answers of following
questions :
- is there any caching is done in lucene for search ?
- if yes, is it for terms or for previous queries ?
- how the caching is implemented and what is the policy for caching

Can anybody explain this to me in detail or send some links regarding this?

With Regards,
Shailendra

------=_Part_11905_17230762.1190031703162--

From java-user-return-30290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 12:55:51 2007
Return-Path: <java-user-return-30290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43865 invoked from network); 17 Sep 2007 12:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 12:55:51 -0000
Received: (qmail 97560 invoked by uid 500); 17 Sep 2007 12:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97533 invoked by uid 500); 17 Sep 2007 12:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97522 invoked by uid 99); 17 Sep 2007 12:55:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 05:55:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_RED,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 12:55:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXG86-0000wx-OB
	for java-user@lucene.apache.org; Mon, 17 Sep 2007 05:55:10 -0700
Message-ID: <12735206.post@talk.nabble.com>
Date: Mon, 17 Sep 2007 05:55:10 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12729051.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com> <12687410.post@talk.nabble.com> <12690100.post@talk.nabble.com> <12729051.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


As I mentioned, IndexReader is the one that holds the memory. You should
explicitly close the underlying IndexReader to make sure that the reader
releases the memory. 



Sebastin wrote:
> 
> Hi testn,
>               Every IndexFolder is of size 1.5 GB of size,eventhough when
> i used to Open and close the IndexSearcher it wont release the memory for
> all the searches.
>               When i set the IndexSearcher object as the Application Scope
> object its not possile for me to see current day records.
> 
>                  Could you give me an Idea how to trigger out this
> problem. 
>       
> 
> testn wrote:
>> 
>> If you know that there are only 15 days of indexes you need to search on,
>> you just need to open only the latest 15 indexes at a time right? You can
>> simply create a wrapper that return MultiReader which you can cache for a
>> while and close the oldest index once the date rolls.
>> 
>> 
>> Sebastin wrote:
>>> 
>>> HI testn,
>>> 
>>> it gives performance improvement while optimizing the Index. 
>>> 
>>> Now i seprate the IndexStore on a daily basis.(ie) 
>>> For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007 like
>>> wise it will minimize the size of the IndexStore.could you give me an
>>> idea on how to open every day folders for every search.
>>> 
>>> Query I use here is,
>>> 
>>> 9840836588 AND dateSc:[070901 TO 070910] 
>>> 
>>> 07---->year (2007)
>>> 09---->month(september)
>>> 01----->day
>>> 
>>> i restrict for 15 days that it is possible to search 15 days record in
>>> my application.at a time 10 users aare going to search every store.is
>>> there any other better way to improve the search performance to avoid
>>> memory problem as well as speed of the search.
>>> 
>>> 
>>> 
>>> 
>>> 
>>> 
>>> testn wrote:
>>>> 
>>>> So did you see any improvement in performance?
>>>> 
>>>> Sebastin wrote:
>>>>> 
>>>>> It works finally .i use Lucene 2.2  in my application.thanks testn and
>>>>> Mike
>>>>> 
>>>>> Michael McCandless-2 wrote:
>>>>>> 
>>>>>> 
>>>>>> It sounds like there may be a Lucene version mismatch?  When Luke was
>>>>>> used
>>>>>> it was likely based on Lucene 2.2, but it sounds like an older
>>>>>> version of
>>>>>> Lucene is now being used to open the index?
>>>>>> 
>>>>>> Mike
>>>>>> 
>>>>>> "testn" <test1@doramail.com> wrote:
>>>>>>> 
>>>>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>>>>> "Segment"?
>>>>>>> The
>>>>>>> case is different.
>>>>>>> 
>>>>>>> 
>>>>>>> Sebastin wrote:
>>>>>>> > 
>>>>>>> > java.io.IoException:File Not Found- Segments  is the error message
>>>>>>> > 
>>>>>>> > testn wrote:
>>>>>>> >> 
>>>>>>> >> What is the error message? Probably Mike, Erick or Yonik can help
>>>>>>> you
>>>>>>> >> better on this since I'm no one in index area.
>>>>>>> >> 
>>>>>>> >> Sebastin wrote:
>>>>>>> >>> 
>>>>>>> >>> HI testn,
>>>>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>>>>> Luke.it
>>>>>>> >>> optimize all the content into a single CFS file and it generates
>>>>>>> >>> segments.gen and segments_8 file when i search the item it shows
>>>>>>> an
>>>>>>> >>> error that segments file is not there.could you help me in this 
>>>>>>> >>> 
>>>>>>> >>> testn wrote:
>>>>>>> >>>> 
>>>>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>>>>> reopen
>>>>>>> >>>> the index, you can close and reopen only the updated 3 readers
>>>>>>> and keep
>>>>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time
>>>>>>> to
>>>>>>> >>>> reopen it.
>>>>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>>>>> >>>> 3. You might consider separating indices in separated storage
>>>>>>> and use
>>>>>>> >>>> ParallelReader
>>>>>>> >>>> 
>>>>>>> >>>> 
>>>>>>> >>>> 
>>>>>>> >>>> Sebastin wrote:
>>>>>>> >>>>> 
>>>>>>> >>>>> The problem in my pplication are as follows:
>>>>>>> >>>>>                  1.I am not able to see the updated records in
>>>>>>> my
>>>>>>> >>>>> index store because i instantiate 
>>>>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>>> >>>>> search.further searches use the same IndexReaders(5
>>>>>>> Directories) and
>>>>>>> >>>>> IndexSearcher with different queries.
>>>>>>> >>>>> 
>>>>>>> >>>>>                 2.My search is very very slow First 2
>>>>>>> Directories of
>>>>>>> >>>>> size 10 GB each which are having old index records and no
>>>>>>> update in
>>>>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>>>>> >>>>> 
>>>>>>> >>>>>                 3.i am Indexing 20 million records per day so
>>>>>>> the
>>>>>>> >>>>> Index store gets growing and it makes search very very slower.
>>>>>>> >>>>>  
>>>>>>> >>>>>                4.I am using searcherOne class as the global
>>>>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>>>>> consists of
>>>>>>> >>>>> one IndexReader and IndexSearcher get set method which will
>>>>>>> hold the
>>>>>>> >>>>> IndexReader and IndexSearcher object after the First Search.it
>>>>>>> is used
>>>>>>> >>>>> for all other searches.
>>>>>>> >>>>> 
>>>>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>>>> Application
>>>>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>>>> Fields.i
>>>>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>>>>> maximum
>>>>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>>>>> >>>>>                 
>>>>>>> >>>>> 
>>>>>>> >>>>> hossman wrote:
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> : I set IndexSearcher as the application Object after the
>>>>>>> first
>>>>>>> >>>>>> search.
>>>>>>> >>>>>> 	...
>>>>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour
>>>>>>> to see
>>>>>>> >>>>>> the
>>>>>>> >>>>>> : updated records .
>>>>>>> >>>>>> 
>>>>>>> >>>>>> i'm confused ... my understanding based on the comments you
>>>>>>> made
>>>>>>> >>>>>> below 
>>>>>>> >>>>>> (in an earlier message) was that you already *were*
>>>>>>> constructing a
>>>>>>> >>>>>> new  
>>>>>>> >>>>>> IndexSearcher once an hour -- but every time you do that,
>>>>>>> your memory 
>>>>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>>> >>>>>> 
>>>>>>> >>>>>> if that's not what you said, then i think you need to
>>>>>>> explain, in
>>>>>>> >>>>>> detail, 
>>>>>>> >>>>>> in one message, exactly what your problem is.  And don't
>>>>>>> assume we 
>>>>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for
>>>>>>> example, what
>>>>>>> >>>>>> the 
>>>>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and the
>>>>>>> answer
>>>>>>> >>>>>> to 
>>>>>>> >>>>>> the specfic question i asked in my last message: does your
>>>>>>> >>>>>> application, 
>>>>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>>>>> >>>>>> (IndexSearchers 
>>>>>>> >>>>>> or IndexReaders) ?
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>>>>> crore to
>>>>>>> >>>>>> 6 crore.
>>>>>>> >>>>>> : > for
>>>>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>>>>> >>>>>> IndexSearcher object
>>>>>>> >>>>>> : > one
>>>>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>>>>> updated
>>>>>>> >>>>>> records in
>>>>>>> >>>>>> : > the
>>>>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but
>>>>>>> the
>>>>>>> >>>>>> problem when
>>>>>>> >>>>>> : > i
>>>>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>>>>> appended.is
>>>>>>> >>>>>> there any
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>>> >>>>>> IndexSearcher as 
>>>>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>>>>> MultiReader?
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> -Hoss
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> >>>>>> To unsubscribe, e-mail:
>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>> >>>>>> For additional commands, e-mail:
>>>>>>> java-user-help@lucene.apache.org
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>>> 
>>>>>>> >>>>> 
>>>>>>> >>>>> 
>>>>>>> >>>> 
>>>>>>> >>>> 
>>>>>>> >>> 
>>>>>>> >>> 
>>>>>>> >> 
>>>>>>> >> 
>>>>>>> > 
>>>>>>> > 
>>>>>>> 
>>>>>>> -- 
>>>>>>> View this message in context:
>>>>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>> Nabble.com.
>>>>>>> 
>>>>>>> 
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>> 
>>>>>> 
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12735206
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 14:51:56 2007
Return-Path: <java-user-return-30291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3722 invoked from network); 17 Sep 2007 14:51:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 14:51:52 -0000
Received: (qmail 31080 invoked by uid 500); 17 Sep 2007 14:51:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30980 invoked by uid 500); 17 Sep 2007 14:51:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30960 invoked by uid 99); 17 Sep 2007 14:51:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 07:51:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 14:53:26 +0000
Received: (qmail 7931 invoked from network); 17 Sep 2007 20:11:10 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 17 Sep 2007 20:11:10 +0530
Message-ID: <001001c7f93a$d5da4760$150410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to tokenize with comma in standard tokenizer
Date: Mon, 17 Sep 2007 20:25:48 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000D_01C7F968.EF48A920"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000D_01C7F968.EF48A920
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

Standard tokenizer works pretty well for me... but i found one problem =
with my usage...

I want to tokenize..."TheRing6,Proposal6,GuyandGirl6" as a three =
saparate tokens.. while standard analyzer considering it as a one word =
because it has one digit in token.

Expected three tokens:
1. thering6
2. proposal6
3. guyandgirl6

i want to change this behaviour of standard tokenizer for this =
purpose.... But i dont know where to change....
Do i need to comment some rule in StandardTokenizer.jj file ???  I am =
confused with this file....

Any pointer...

- Bhavin


------=_NextPart_000_000D_01C7F968.EF48A920--


From java-user-return-30292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 15:05:57 2007
Return-Path: <java-user-return-30292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18972 invoked from network); 17 Sep 2007 15:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 15:05:54 -0000
Received: (qmail 63795 invoked by uid 500); 17 Sep 2007 15:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63760 invoked by uid 500); 17 Sep 2007 15:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63743 invoked by uid 99); 17 Sep 2007 15:05:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 08:05:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 15:05:31 +0000
Received: by py-out-1112.google.com with SMTP id d32so5532840pye
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 08:05:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=K43y7GhqgA1dBUo0m6wHp0BapXctohL4p6GpMuWn7As=;
        b=ChypAXmf6cP0Sm1V8o09HsdYXWcLcAoeX5PmEC/zSeofLty19SjzsPcYteno1jN2jjqpmWnlwQ/HfGlHnlrYhpJpwh9BjYr7MiVaqy200Ytxy4QV18iBqcvES0cAJHqeWxuGQtF1fifRWVuaV60gl9nGlAy3ip/l+CKXBDLfQV8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=PGnWEQnZ9GXZT7LcCTzQmn+IwxYYVOibS2ltnRr0SN8uAPiE2wkCEOjIvA1XrW7ri/BlubYngRn+N/BnnwouaUm25vF0MxZFZ4KU9jbwUByjDaPuwLXwL0W5rClJyV0k+EVua7Pc7+Yw3KsgG6h/xN+dAR+qzPDGOVO7D8kMQvs=
Received: by 10.64.148.8 with SMTP id v8mr10489250qbd.1190041509751;
        Mon, 17 Sep 2007 08:05:09 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id c5sm2689472qbc.2007.09.17.08.05.05
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 17 Sep 2007 08:05:06 -0700 (PDT)
Message-ID: <46EE9792.6030505@gmail.com>
Date: Mon, 17 Sep 2007 11:04:50 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to tokenize with comma in standard tokenizer
References: <001001c7f93a$d5da4760$150410ac@bhavin>
In-Reply-To: <001001c7f93a$d5da4760$150410ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Take the comma out of: | <#P: ("_"|"-"|"/"|"."|",") > in the .jj file 
(around line 92). Keep in mind that this will affect being able to find 
tokens that where previously indexed with the comma there (obviously). I 
believe the javacc target in the build file will rebuild...you need to 
get javacc and put a prop file next to the build file called 
build.properties that contains: javacc.home=c:/javacc (or wherever you 
put javacc).

Also, you could consider trying to pre-process the strings (replace the 
comma with a space or something).

- Mark

Bhavin Pandya wrote:
> Hi,
>
> Standard tokenizer works pretty well for me... but i found one problem with my usage...
>
> I want to tokenize..."TheRing6,Proposal6,GuyandGirl6" as a three saparate tokens.. while standard analyzer considering it as a one word because it has one digit in token.
>
> Expected three tokens:
> 1. thering6
> 2. proposal6
> 3. guyandgirl6
>
> i want to change this behaviour of standard tokenizer for this purpose.... But i dont know where to change....
> Do i need to comment some rule in StandardTokenizer.jj file ???  I am confused with this file....
>
> Any pointer...
>
> - Bhavin
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 15:50:54 2007
Return-Path: <java-user-return-30293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92385 invoked from network); 17 Sep 2007 15:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 15:50:52 -0000
Received: (qmail 54513 invoked by uid 500); 17 Sep 2007 15:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54277 invoked by uid 500); 17 Sep 2007 15:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54266 invoked by uid 99); 17 Sep 2007 15:50:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 08:50:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 15:52:27 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id l8HFoBXB078511
	for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 17:50:15 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
Date: Mon, 17 Sep 2007 17:50:10 +0200
User-Agent: KMail/1.8.2
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
In-Reply-To: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709171750.10679.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> Hi
> I have a problem in getting correct result from Lucene, consider we have an
> index containing documents with fields "field1" and "field2" etc. now I want
> to have documents in which their field1 are equal one by one and their
> field2 with two different value
> 
> to clarify consider I have this query:
> field1:val*  (field2:"myValue1" XOR field2:"myValue2")

Did you try this:

+field1:val*  +field2:"myValue1" +field2:"myValue2"

Regards,
Paul Elschot


> 
> now I want this result:
> field1              field2
> val1                myValue1
> val1                myValue2
> val2                myValue1
> val2                myValue2
> 
> this result is not acceptable:
> val3              myValue1
> or
> val4             myValue1
> val4             myValue3
> 
> I put XOR as operator because this is not a typical OR, it's different, it
> means documents that contains both myValue1 and myValue2 for the field
> field2
> 
> how to build a query to get such result?
> 
> thanks in advance
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> Sun Certified Java Programmer
> ExpertsExchange Certified, Master:
> http://www.experts-exchange.com/M_1938796.html
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 15:55:23 2007
Return-Path: <java-user-return-30294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 569 invoked from network); 17 Sep 2007 15:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 15:55:22 -0000
Received: (qmail 61234 invoked by uid 500); 17 Sep 2007 15:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61192 invoked by uid 500); 17 Sep 2007 15:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61179 invoked by uid 99); 17 Sep 2007 15:55:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 08:55:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 15:56:58 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4EB4B30EFC18; Mon, 17 Sep 2007 09:54:44 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 0042830EFC16
	for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 09:54:38 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12733482.post@talk.nabble.com>
References: <12615745.post@talk.nabble.com> <200709112005.25433.paul.elschot@xs4all.nl> <12733482.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8C517887-CFCC-4585-9339-71CFCC68AE68@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Span queries and complex scoring
Date: Mon, 17 Sep 2007 11:54:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Sep 17, 2007, at 6:51 AM, melix wrote:
> I've faced the very same problem with NearSpansOrdered and so on. I  
> think
> unless there is a very good reason for it, classes should be made  
> public,
> this would at least make the "delegate" design pattern available.

Lucene has historically taken the exact opposite approach... open up  
the API as needed.  Unless there is very good reason for it, classes  
and data should be kept private.

You bring up some points that need to be made to justify opening up  
specific classes.  Sounds like a good discussion for the java-dev  
list on a case by case basis.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 16:22:24 2007
Return-Path: <java-user-return-30295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33583 invoked from network); 17 Sep 2007 16:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 16:22:22 -0000
Received: (qmail 7182 invoked by uid 500); 17 Sep 2007 16:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7144 invoked by uid 500); 17 Sep 2007 16:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7133 invoked by uid 99); 17 Sep 2007 16:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 09:22:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 16:22:08 +0000
Received: by nz-out-0506.google.com with SMTP id i28so788092nzi
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 09:21:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=4Tyhy8P8BM31cKdKer8fvWRI6JhJ1Tkp48fZyQrPq5k=;
        b=HCOkIEfqpH8/q0yuRUm1kRbnwpSQyPoW5qq8nH9zPwKuQ730O1DKBBtOiEnrBLE9bChZRKIcoDquuTj7b/YnyNh7yAydkI5jFPzh94xsJP8Vvcwn8ScZxlvrsyFWxizq/oimZ18lFWmGsX4ERE+uWN+2Sf90o5sBwvLJxSNtwuc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=DKhnd3mjFfIs4lR5smuAfl8znN7wJJ9nukRsV3LzSNbkAnC0CUMx5sqdq2gkH71J8F04+ok2gZOPkXOk6KB0VvGEnjDTnktWpIgP7W5xtdSp4iX1gzJv/iCHgeUYliAM5CTLuEl0Eok3JwJ7F9TGJsyf0nu9a0goQmHo2+TAJq0=
Received: by 10.142.222.21 with SMTP id u21mr995079wfg.1190046107133;
        Mon, 17 Sep 2007 09:21:47 -0700 (PDT)
Received: by 10.143.33.20 with HTTP; Mon, 17 Sep 2007 09:21:47 -0700 (PDT)
Message-ID: <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com>
Date: Mon, 17 Sep 2007 12:21:47 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Caching in lucene
In-Reply-To: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
X-Google-Sender-Auth: 2f5d02cc96680478
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/17/07, Shailendra Mudgal <mudgal.shailendra@gmail.com> wrote:
> One thing that i understand about IndexReader is that for subsequent
> queries, results come fast as the IndexReader needs to be warmed up.
> According to this, I am trying to find out the answers of following
> questions :
> - is there any caching is done in lucene for search ?

The following are loaded on-demand and cached:
- term index
- norms, per-field
- FieldCache for sorting or ValueSourceQuery
- CachingWrapperFilter

Also, "warming" an IndexReader can even refer to getting the operating
system to cache frequently used parts of the index files by running
some queries.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 17:40:33 2007
Return-Path: <java-user-return-30296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27135 invoked from network); 17 Sep 2007 17:40:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 17:40:32 -0000
Received: (qmail 37362 invoked by uid 500); 17 Sep 2007 17:40:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37325 invoked by uid 500); 17 Sep 2007 17:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37314 invoked by uid 99); 17 Sep 2007 17:40:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 10:40:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 17:42:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 4EA87109F32
	for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 10:40:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8C517887-CFCC-4585-9339-71CFCC68AE68@ehatchersolutions.com>
References: <12615745.post@talk.nabble.com> <200709112005.25433.paul.elschot@xs4all.nl> <12733482.post@talk.nabble.com> <8C517887-CFCC-4585-9339-71CFCC68AE68@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D3EBFF48-5579-439C-B8A2-ADE38B269EA2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Span queries and complex scoring
Date: Mon, 17 Sep 2007 13:39:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Cedric,

On Sep 17, 2007, at 11:54 AM, Erik Hatcher wrote:

>
> On Sep 17, 2007, at 6:51 AM, melix wrote:
>> I've faced the very same problem with NearSpansOrdered and so on.  
>> I think
>> unless there is a very good reason for it, classes should be made  
>> public,
>> this would at least make the "delegate" design pattern available.
>
> Lucene has historically taken the exact opposite approach... open  
> up the API as needed.  Unless there is very good reason for it,  
> classes and data should be kept private.
>
> You bring up some points that need to be made to justify opening up  
> specific classes.  Sounds like a good discussion for the java-dev  
> list on a case by case basis.

I am doing some work on Spans (albeit slowly), perhaps you can  
describe your needs on java-dev (citing this thread) and we can see  
what comes of it?

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 17 21:35:38 2007
Return-Path: <java-user-return-30297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71347 invoked from network); 17 Sep 2007 21:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Sep 2007 21:35:37 -0000
Received: (qmail 77251 invoked by uid 500); 17 Sep 2007 21:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77214 invoked by uid 500); 17 Sep 2007 21:35:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77203 invoked by uid 99); 17 Sep 2007 21:35:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 14:35:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 21:37:15 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 475F671C14C; Mon, 17 Sep 2007 14:35:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4394671C14B
	for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 14:35:01 -0700 (PDT)
Date: Mon, 17 Sep 2007 14:35:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Span queries and complex scoring
In-Reply-To: <8C517887-CFCC-4585-9339-71CFCC68AE68@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.62.0709171432550.2184@radix.cryptio.net>
References: <12615745.post@talk.nabble.com> <200709112005.25433.paul.elschot@xs4all.nl>
 <12733482.post@talk.nabble.com> <8C517887-CFCC-4585-9339-71CFCC68AE68@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Lucene has historically taken the exact opposite approach... open up the API
: as needed.  Unless there is very good reason for it, classes and data should
: be kept private.

Just to clarify the reasoning behind this: once something is made public, 
the API has to be supported in perpetuity -- even if no one outside of 
the core is using it, because we don't *know* if anyone is using it.  

when things are private or package protected, committers have a lot more 
leway to commit changes that alter the API if it means better performacne, 
or easier long term maintence.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 05:12:45 2007
Return-Path: <java-user-return-30298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17584 invoked from network); 18 Sep 2007 05:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 05:12:44 -0000
Received: (qmail 86214 invoked by uid 500); 18 Sep 2007 05:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86186 invoked by uid 500); 18 Sep 2007 05:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86175 invoked by uid 99); 18 Sep 2007 05:12:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 22:12:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 05:12:29 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1339044rvb
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 22:12:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Qt1dqeSsNakGmMuaAswbVCneRV7ssB1QSoiAkrlSVBg=;
        b=K+AmoDyDOThpABPjB8aGf8PrP6AvzyY66Y1yevEk+rcVUO53cddVFA56PtQ8RwxBr/NPKzapLRG/1Rims+i2sGQ8lX1If3p8CRfAkR3fOhDH3dngatLv4dZrdqTVzLZj8nXy4CKuQG9Hli9+toll2GP7sQPyK4vkbQDyHH3gm4c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZYEe1BqBin8gfsbUNl79mYvoKTeb3rxUfGYpJCtNGHxLQ4vIi43VntKQ8CU+dZq/91vv8+sIED805D25HBSHS1GKRGPmPdXLyIoMmc3B4Iu9k0kzLSWoCEl3vGVqkFraReSC0wC23EMyHyiY63Qjq/l2l++JE4dLIHzb4wzzkOw=
Received: by 10.141.19.16 with SMTP id w16mr1016616rvi.1190092328336;
        Mon, 17 Sep 2007 22:12:08 -0700 (PDT)
Received: by 10.141.52.4 with HTTP; Mon, 17 Sep 2007 22:12:08 -0700 (PDT)
Message-ID: <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com>
Date: Tue, 18 Sep 2007 10:42:08 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caching in lucene
In-Reply-To: <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5806_25512842.1190092328060"
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
	 <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5806_25512842.1190092328060
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Yonik,

Thanks for your response. I'll feel great if you can explain this in more
detail as i am not sure that whether i have understood this correctly or
not. Or if you can direct me to some resource that will also be very good
for me.

What my goal is to understand the caching strategy.  How well this work for
repetitive queries. Is there any room available to improve this.

Thanks and Regards,
Shailendra


- CachingWrapperFilter
>
> Also, "warming" an IndexReader can even refer to getting the operating
> system to cache frequently used parts of the index files by running
> some queries.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5806_25512842.1190092328060--

From java-user-return-30299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 05:46:33 2007
Return-Path: <java-user-return-30299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32323 invoked from network); 18 Sep 2007 05:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 05:46:32 -0000
Received: (qmail 13567 invoked by uid 500); 18 Sep 2007 05:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13530 invoked by uid 500); 18 Sep 2007 05:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13519 invoked by uid 99); 18 Sep 2007 05:46:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 22:46:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 05:46:16 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:56438 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IXVuE-0003sG-6G
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 07:45:55 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com>
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com> <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com> <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Caching in lucene
Date: Tue, 18 Sep 2007 07:39:13 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IXVuE-0003sG-6G.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IXVuE-0003sG-6G aa0d02f140b7bb68ed85cea2c8de15ce
X-Virus-Checked: Checked by ClamAV on apache.org


18 sep 2007 kl. 07.12 skrev Shailendra Mudgal:

>
> What my goal is to understand the caching strategy.  How well this  
> work for repetitive queries. Is there any room available to improve  
> this.

It is usually a loss of resources to cache results in a busy system  
with gaussianity distributed queries. There is a paragraph on the  
wiki <http://wiki.apache.org/lucene-java/LuceneCaveats> that explains  
this: Lucene is amazingly fast at searching. Rather than caching hits  
and paging through them, merely re-executing the query is often fast  
enough.

I have conducted experiements with active results cache at index  
update time, soft/weak references and some other things I can't think  
of right now. Most of the time it ended up with the garbage collector  
going crazy with zillions of tiny soft/weak referenced instances,  
clock ticks spent updating results people don't that much, et c. You  
really need a lot of repetative queries in order for such a cache to  
do any good.

If you are retrieving a lot of stored fields it might make sense to  
cache documents that are frequently accessed.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 06:34:32 2007
Return-Path: <java-user-return-30300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57380 invoked from network); 18 Sep 2007 06:34:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 06:34:31 -0000
Received: (qmail 67962 invoked by uid 500); 18 Sep 2007 06:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67932 invoked by uid 500); 18 Sep 2007 06:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67921 invoked by uid 99); 18 Sep 2007 06:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 23:34:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 06:34:17 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1352640rvb
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 23:33:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=sTOs4XPsC7DihEvZvfrH62In7tEoulTGZ+3L/XS6tU8=;
        b=h8I0dSxxsqyftOgA3PDU2YqJa7CJ5qtaqWOvueJaJko5fSQ0xTnYe9JLh53mAlqjSh+/BLZCCJWobjiCcqd/zw65OMTQZZZy0CgjMEfi4bcO8p/TBLpoxo25vBGI5mqewnq4vejUhmSPN2Fwx9Z79/m6LzNYWHiqmrUNP51oARI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VPITX2thZBauSgeAvjFKtn1qOPC5fQjVwjUNL/pjv6HejwhhpsJ0X0jsdtfkFJr5gMgM/kXJSjT0xvyQGWeotOe6pfGPk8EMKzag8iam3QN8K7FpWhudw89ELpI8V4NJCAbAWl3LvqRJpl/6vYyqUXXsDrgqPeHqpBQ7MuLWx1A=
Received: by 10.141.20.7 with SMTP id x7mr1032758rvi.1190097236965;
        Mon, 17 Sep 2007 23:33:56 -0700 (PDT)
Received: by 10.141.52.4 with HTTP; Mon, 17 Sep 2007 23:33:56 -0700 (PDT)
Message-ID: <fa7518640709172333u446027adm91471246ad4e2606@mail.gmail.com>
Date: Tue, 18 Sep 2007 12:03:56 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caching in lucene
In-Reply-To: <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5910_9803518.1190097236953"
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
	 <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com>
	 <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com>
	 <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5910_9803518.1190097236953
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Whether it caches frequently used terms ?


On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
>
>
> 18 sep 2007 kl. 07.12 skrev Shailendra Mudgal:
>
> >
> > What my goal is to understand the caching strategy.  How well this
> > work for repetitive queries. Is there any room available to improve
> > this.
>
> It is usually a loss of resources to cache results in a busy system
> with gaussianity distributed queries. There is a paragraph on the
> wiki <http://wiki.apache.org/lucene-java/LuceneCaveats> that explains
> this: Lucene is amazingly fast at searching. Rather than caching hits
> and paging through them, merely re-executing the query is often fast
> enough.
>
> I have conducted experiements with active results cache at index
> update time, soft/weak references and some other things I can't think
> of right now. Most of the time it ended up with the garbage collector
> going crazy with zillions of tiny soft/weak referenced instances,
> clock ticks spent updating results people don't that much, et c. You
> really need a lot of repetative queries in order for such a cache to
> do any good.
>
> If you are retrieving a lot of stored fields it might make sense to
> cache documents that are frequently accessed.
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5910_9803518.1190097236953--

From java-user-return-30301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 06:46:03 2007
Return-Path: <java-user-return-30301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61334 invoked from network); 18 Sep 2007 06:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 06:46:02 -0000
Received: (qmail 82382 invoked by uid 500); 18 Sep 2007 06:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82352 invoked by uid 500); 18 Sep 2007 06:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82341 invoked by uid 99); 18 Sep 2007 06:45:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 23:45:49 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 06:45:47 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:57135 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IXWoa-0008JH-8z
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 08:44:09 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <fa7518640709172333u446027adm91471246ad4e2606@mail.gmail.com>
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com> <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com> <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com> <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com> <fa7518640709172333u446027adm91471246ad4e2606@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1599C2E4-54E5-4CA4-98E1-C021628AB6FC@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Caching in lucene
Date: Tue, 18 Sep 2007 08:37:26 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IXWoa-0008JH-8z.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IXWoa-0008JH-8z 36408d4a74865fbc4810f50820bf2e44
X-Virus-Checked: Checked by ClamAV on apache.org


18 sep 2007 kl. 08.33 skrev Shailendra Mudgal:

> Whether it caches frequently used terms ?

I don't understand you question?

-- 
karl


>
>
> On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 18 sep 2007 kl. 07.12 skrev Shailendra Mudgal:
>>
>>>
>>> What my goal is to understand the caching strategy.  How well this
>>> work for repetitive queries. Is there any room available to improve
>>> this.
>>
>> It is usually a loss of resources to cache results in a busy system
>> with gaussianity distributed queries. There is a paragraph on the
>> wiki <http://wiki.apache.org/lucene-java/LuceneCaveats> that explains
>> this: Lucene is amazingly fast at searching. Rather than caching hits
>> and paging through them, merely re-executing the query is often fast
>> enough.
>>
>> I have conducted experiements with active results cache at index
>> update time, soft/weak references and some other things I can't think
>> of right now. Most of the time it ended up with the garbage collector
>> going crazy with zillions of tiny soft/weak referenced instances,
>> clock ticks spent updating results people don't that much, et c. You
>> really need a lot of repetative queries in order for such a cache to
>> do any good.
>>
>> If you are retrieving a lot of stored fields it might make sense to
>> cache documents that are frequently accessed.
>>
>>
>> --
>> karl
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 06:53:58 2007
Return-Path: <java-user-return-30302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62718 invoked from network); 18 Sep 2007 06:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 06:53:56 -0000
Received: (qmail 89059 invoked by uid 500); 18 Sep 2007 06:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89021 invoked by uid 500); 18 Sep 2007 06:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89010 invoked by uid 99); 18 Sep 2007 06:53:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Sep 2007 23:53:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mudgal.shailendra@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 06:53:42 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1356081rvb
        for <java-user@lucene.apache.org>; Mon, 17 Sep 2007 23:53:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ub5nTT+bBHnKasdCFiml/qc1yB7vzGla3apUhlfmQ88=;
        b=ftlHC04ObHFhCZUT2nYxSy4rVC/ykk1fcXQI/ZiJpmRVjtuD3VHyTgNpXmNDG7FpMq+QLeybLnGoYLgMeKSR2BhgzOnwOkcFGIlIFNsE3ngCU3/RLpex1hpQs9jfXK0AkZjmw7K7fV8fwqD+ty13Ob8nCxjaJ1ZU/2CVzjcIUf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KK46wY/3RklL7UjT9fKlN3uFYbRbMYeomNeUGkeMZSH1waKPSuxBPokUBpZOYAyFfl/5AmlJcFSpzcaetxLJWJKDy4maWEWGTOtgygp5s5ut1J5kLrUOZVIyVqUwp2hfSTapLn2X6S0g8hthm9mJbrjR4M+QbXIfDlhm1e75BU0=
Received: by 10.141.48.10 with SMTP id a10mr1036758rvk.1190098401801;
        Mon, 17 Sep 2007 23:53:21 -0700 (PDT)
Received: by 10.141.52.4 with HTTP; Mon, 17 Sep 2007 23:53:21 -0700 (PDT)
Message-ID: <fa7518640709172353n73c122a3j78fbc45c27f7f53@mail.gmail.com>
Date: Tue, 18 Sep 2007 12:23:21 +0530
From: "Shailendra Mudgal" <mudgal.shailendra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caching in lucene
In-Reply-To: <1599C2E4-54E5-4CA4-98E1-C021628AB6FC@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5927_19290332.1190098401795"
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com>
	 <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com>
	 <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com>
	 <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com>
	 <fa7518640709172333u446027adm91471246ad4e2606@mail.gmail.com>
	 <1599C2E4-54E5-4CA4-98E1-C021628AB6FC@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5927_19290332.1190098401795
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok let me explain you. By warming up the reader i used to understand is that
it memorizes the index terms. Therefore subsequent queries will be answered
by using these terms. Is this correct ?



On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
>
>
> 18 sep 2007 kl. 08.33 skrev Shailendra Mudgal:
>
> > Whether it caches frequently used terms ?
>
> I don't understand you question?
>
> --
> karl
>
>
> >
> >
> > On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
> >>
> >>
> >> 18 sep 2007 kl. 07.12 skrev Shailendra Mudgal:
> >>
> >>>
> >>> What my goal is to understand the caching strategy.  How well this
> >>> work for repetitive queries. Is there any room available to improve
> >>> this.
> >>
> >> It is usually a loss of resources to cache results in a busy system
> >> with gaussianity distributed queries. There is a paragraph on the
> >> wiki <http://wiki.apache.org/lucene-java/LuceneCaveats> that explains
> >> this: Lucene is amazingly fast at searching. Rather than caching hits
> >> and paging through them, merely re-executing the query is often fast
> >> enough.
> >>
> >> I have conducted experiements with active results cache at index
> >> update time, soft/weak references and some other things I can't think
> >> of right now. Most of the time it ended up with the garbage collector
> >> going crazy with zillions of tiny soft/weak referenced instances,
> >> clock ticks spent updating results people don't that much, et c. You
> >> really need a lot of repetative queries in order for such a cache to
> >> do any good.
> >>
> >> If you are retrieving a lot of stored fields it might make sense to
> >> cache documents that are frequently accessed.
> >>
> >>
> >> --
> >> karl
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5927_19290332.1190098401795--

From java-user-return-30303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 07:31:11 2007
Return-Path: <java-user-return-30303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78414 invoked from network); 18 Sep 2007 07:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 07:31:10 -0000
Received: (qmail 31209 invoked by uid 500); 18 Sep 2007 07:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31176 invoked by uid 500); 18 Sep 2007 07:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31165 invoked by uid 99); 18 Sep 2007 07:30:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 00:30:56 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 07:32:48 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:57424 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IXXXV-0007BT-4I
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 09:30:33 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <fa7518640709172353n73c122a3j78fbc45c27f7f53@mail.gmail.com>
References: <fa7518640709170521r441f501bh12bc03ce5e04ab5a@mail.gmail.com> <c68e39170709170921j7a78afd6oe580ca8b83248fa4@mail.gmail.com> <fa7518640709172212g33493f77w952a013a23a45021@mail.gmail.com> <17B40EB4-DBC4-4602-A05E-F626546896DB@gmail.com> <fa7518640709172333u446027adm91471246ad4e2606@mail.gmail.com> <1599C2E4-54E5-4CA4-98E1-C021628AB6FC@gmail.com> <fa7518640709172353n73c122a3j78fbc45c27f7f53@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1097A4A6-B6BB-45FB-A1A0-27E848726EDF@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Caching in lucene
Date: Tue, 18 Sep 2007 09:23:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IXXXV-0007BT-4I.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IXXXV-0007BT-4I 28c507cdd3d27acab140c94c22b769ad
X-Virus-Checked: Checked by ClamAV on apache.org


18 sep 2007 kl. 08.53 skrev Shailendra Mudgal:

> Ok let me explain you. By warming up the reader i used to  
> understand is that
> it memorizes the index terms. Therefore subsequent queries will be  
> answered
> by using these terms. Is this correct ?
>

Are you asking if all terms are flyweighted/interned by Lucene? The  
string values they hold are, but I'm not sure about the actual  
instances of Term.

Warming is merely the process of avoiding latency by using a reader a  
bit prior to allowing consumers to access it. It does not include any  
extra caching layers. Solr does <http://wiki.apache.org/solr/ 
SolrCaching>.


-- 
karl

>
>
> On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 18 sep 2007 kl. 08.33 skrev Shailendra Mudgal:
>>
>>> Whether it caches frequently used terms ?
>>
>> I don't understand you question?
>>
>> --
>> karl
>>
>>
>>>
>>>
>>> On 9/18/07, Karl Wettin <karl.wettin@gmail.com> wrote:
>>>>
>>>>
>>>> 18 sep 2007 kl. 07.12 skrev Shailendra Mudgal:
>>>>
>>>>>
>>>>> What my goal is to understand the caching strategy.  How well this
>>>>> work for repetitive queries. Is there any room available to  
>>>>> improve
>>>>> this.
>>>>
>>>> It is usually a loss of resources to cache results in a busy system
>>>> with gaussianity distributed queries. There is a paragraph on the
>>>> wiki <http://wiki.apache.org/lucene-java/LuceneCaveats> that  
>>>> explains
>>>> this: Lucene is amazingly fast at searching. Rather than caching  
>>>> hits
>>>> and paging through them, merely re-executing the query is often  
>>>> fast
>>>> enough.
>>>>
>>>> I have conducted experiements with active results cache at index
>>>> update time, soft/weak references and some other things I can't  
>>>> think
>>>> of right now. Most of the time it ended up with the garbage  
>>>> collector
>>>> going crazy with zillions of tiny soft/weak referenced instances,
>>>> clock ticks spent updating results people don't that much, et c.  
>>>> You
>>>> really need a lot of repetative queries in order for such a  
>>>> cache to
>>>> do any good.
>>>>
>>>> If you are retrieving a lot of stored fields it might make sense to
>>>> cache documents that are frequently accessed.
>>>>
>>>>
>>>> --
>>>> karl
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 10:58:50 2007
Return-Path: <java-user-return-30304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53893 invoked from network); 18 Sep 2007 10:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 10:58:49 -0000
Received: (qmail 47038 invoked by uid 500); 18 Sep 2007 10:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47007 invoked by uid 500); 18 Sep 2007 10:58:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46996 invoked by uid 99); 18 Sep 2007 10:58:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 03:58:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 11:00:28 +0000
Received: (qmail 10565 invoked from network); 18 Sep 2007 16:18:10 +0530
Received: from unknown (HELO bhavin) (203.197.35.2)
  by mailserver with SMTP; 18 Sep 2007 16:18:10 +0530
Message-ID: <00ae01c7f9e3$72f15720$150410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <001001c7f93a$d5da4760$150410ac@bhavin> <46EE9792.6030505@gmail.com>
Subject: Re: How to tokenize with comma in standard tokenizer
Date: Tue, 18 Sep 2007 16:32:48 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks mark.

> Take the comma out of: | <#P: ("_"|"-"|"/"|"."|",") > in the .jj file

Its working for me...

- Bhavin pandya


----- Original Message ----- 
From: "Mark Miller" <markrmiller@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, September 17, 2007 8:34 PM
Subject: Re: How to tokenize with comma in standard tokenizer


> Take the comma out of: | <#P: ("_"|"-"|"/"|"."|",") > in the .jj file 
> (around line 92). Keep in mind that this will affect being able to find 
> tokens that where previously indexed with the comma there (obviously). I 
> believe the javacc target in the build file will rebuild...you need to get 
> javacc and put a prop file next to the build file called build.properties 
> that contains: javacc.home=c:/javacc (or wherever you put javacc).
>
> Also, you could consider trying to pre-process the strings (replace the 
> comma with a space or something).
>
> - Mark
>
> Bhavin Pandya wrote:
>> Hi,
>>
>> Standard tokenizer works pretty well for me... but i found one problem 
>> with my usage...
>>
>> I want to tokenize..."TheRing6,Proposal6,GuyandGirl6" as a three saparate 
>> tokens.. while standard analyzer considering it as a one word because it 
>> has one digit in token.
>>
>> Expected three tokens:
>> 1. thering6
>> 2. proposal6
>> 3. guyandgirl6
>>
>> i want to change this behaviour of standard tokenizer for this 
>> purpose.... But i dont know where to change....
>> Do i need to comment some rule in StandardTokenizer.jj file ???  I am 
>> confused with this file....
>>
>> Any pointer...
>>
>> - Bhavin
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 16:09:48 2007
Return-Path: <java-user-return-30305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95318 invoked from network); 18 Sep 2007 16:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 16:09:47 -0000
Received: (qmail 14028 invoked by uid 500); 18 Sep 2007 16:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13983 invoked by uid 500); 18 Sep 2007 16:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13972 invoked by uid 99); 18 Sep 2007 16:09:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 09:09:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:09:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXfdO-0004DA-NZ
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 09:09:10 -0700
Message-ID: <12760356.post@talk.nabble.com>
Date: Tue, 18 Sep 2007 09:09:10 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Sorting a search result
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anorman@mun.ca
X-Virus-Checked: Checked by ClamAV on apache.org


I have set up a search result made up of a resultBean object containing the
information that I am fetching.  Currently it is sorted by score (relevance)
which is great and what I want.  However, I have created a loop which
continues to add results from several indexes to the search result (e.g.
articles, books, chapters).  This works fine, but each specific section is
sorted by score so that the articles are listed first (lets say 200 of them
return) then the books are listed and sorted based on relevance and so on.  

I need some way to again sort by score on my compiled search result.

Any thoughts?

Thanks,
Albert

-- 
View this message in context: http://www.nabble.com/Sorting-a-search-result-tf4475317.html#a12760356
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 16:14:25 2007
Return-Path: <java-user-return-30306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2889 invoked from network); 18 Sep 2007 16:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 16:14:20 -0000
Received: (qmail 35780 invoked by uid 500); 18 Sep 2007 16:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35748 invoked by uid 500); 18 Sep 2007 16:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35733 invoked by uid 99); 18 Sep 2007 16:13:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 09:13:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:15:52 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 95AD363285D4; Tue, 18 Sep 2007 12:13:36 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 4556563281AF
	for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 12:13:36 -0400 (EDT)
Message-ID: <46EFF989.3010502@hannonhill.com>
Date: Tue, 18 Sep 2007 12:15:05 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sorting a search result
References: <12760356.post@talk.nabble.com>
In-Reply-To: <12760356.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.1 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

You could use a SortedSet, which automatically inserts an object into 
its sorted position when calling add()?

Cheers,
-Zach

anorman wrote:
> I have set up a search result made up of a resultBean object containing the
> information that I am fetching.  Currently it is sorted by score (relevance)
> which is great and what I want.  However, I have created a loop which
> continues to add results from several indexes to the search result (e.g.
> articles, books, chapters).  This works fine, but each specific section is
> sorted by score so that the articles are listed first (lets say 200 of them
> return) then the books are listed and sorted based on relevance and so on.  
> 
> I need some way to again sort by score on my compiled search result.
> 
> Any thoughts?
> 
> Thanks,
> Albert
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 16:20:06 2007
Return-Path: <java-user-return-30307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10390 invoked from network); 18 Sep 2007 16:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 16:19:52 -0000
Received: (qmail 53295 invoked by uid 500); 18 Sep 2007 16:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53255 invoked by uid 500); 18 Sep 2007 16:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53241 invoked by uid 99); 18 Sep 2007 16:19:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 09:19:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:21:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXfn6-0004UP-Re
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 09:19:12 -0700
Message-ID: <12760645.post@talk.nabble.com>
Date: Tue, 18 Sep 2007 09:19:12 -0700 (PDT)
From: Ashish Parikh <Ashish.Parikh@CompuCredit.com>
To: java-user@lucene.apache.org
Subject: Lucene equivalent of grep -A -B command
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Ashish.Parikh@CompuCredit.com
X-Virus-Checked: Checked by ClamAV on apache.org


Is there a way we can get contents of the file surrounding to the term (head
10 lines and tail 10 lines) we are searching through a lucene indexed file?

-- 
View this message in context: http://www.nabble.com/Lucene-equivalent-of-grep--A--B-command-tf4475418.html#a12760645
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 16:21:00 2007
Return-Path: <java-user-return-30308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11870 invoked from network); 18 Sep 2007 16:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 16:20:58 -0000
Received: (qmail 58035 invoked by uid 500); 18 Sep 2007 16:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58008 invoked by uid 500); 18 Sep 2007 16:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57997 invoked by uid 99); 18 Sep 2007 16:20:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 09:20:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:22:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXfoD-0004XH-P5
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 09:20:21 -0700
Message-ID: <12760676.post@talk.nabble.com>
Date: Tue, 18 Sep 2007 09:20:21 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Re: Sorting a search result
In-Reply-To: <46EFF989.3010502@hannonhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: anorman@mun.ca
References: <12760356.post@talk.nabble.com> <46EFF989.3010502@hannonhill.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmmm.

Right now my search results are contained in an ArrayList object like so:

List searchResult = new ArrayList();

I am adding my "resultBean" objects (with it's data, i.e. title, author,
score, etc) into the searchResult (ArrayList).  

Would this be possible with a SortedSet?

Thanks,
Albert





Zach Bailey wrote:
> 
> You could use a SortedSet, which automatically inserts an object into 
> its sorted position when calling add()?
> 
> Cheers,
> -Zach
> 
> anorman wrote:
>> I have set up a search result made up of a resultBean object containing
>> the
>> information that I am fetching.  Currently it is sorted by score
>> (relevance)
>> which is great and what I want.  However, I have created a loop which
>> continues to add results from several indexes to the search result (e.g.
>> articles, books, chapters).  This works fine, but each specific section
>> is
>> sorted by score so that the articles are listed first (lets say 200 of
>> them
>> return) then the books are listed and sorted based on relevance and so
>> on.  
>> 
>> I need some way to again sort by score on my compiled search result.
>> 
>> Any thoughts?
>> 
>> Thanks,
>> Albert
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Sorting-a-search-result-tf4475317.html#a12760676
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 16:28:59 2007
Return-Path: <java-user-return-30309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22944 invoked from network); 18 Sep 2007 16:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 16:28:59 -0000
Received: (qmail 82297 invoked by uid 500); 18 Sep 2007 16:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82268 invoked by uid 500); 18 Sep 2007 16:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82253 invoked by uid 99); 18 Sep 2007 16:28:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 09:28:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:30:36 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 3245B63285F2; Tue, 18 Sep 2007 12:28:20 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 2C7A863285A5
	for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 12:28:19 -0400 (EDT)
Message-ID: <46EFFCFC.7010006@hannonhill.com>
Date: Tue, 18 Sep 2007 12:29:48 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sorting a search result
References: <12760356.post@talk.nabble.com> <46EFF989.3010502@hannonhill.com> <12760676.post@talk.nabble.com>
In-Reply-To: <12760676.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.1 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Sure. You'll have to do away with the List abstraction in favor of the 
SortedSet abstraction which in your case is probably ok for the 
following reasons:

1.) List does not ensure the elements are unique (you probably don't 
want to have duplicate results), while Set and by extension SortedSet do
2.) List implies an ordered set however does not do the sorting 
automatically for you, while SortedSet handles this automatically.

There are two ways of telling TreeSet about how you want to compare your 
elements:

1.) Construct your SortedSet implementation with a comparator:

SortedSet<ResultBean> results = new TreeSet<ResultBean>(new 
ResultBeanComparator());

2.) Have your ResultBean implement Comparable<ResultBean>

In this case I find #2 a little better from a code maintenance 
standpoint but functionally they are equivalent.

Cheers,
-Zach

anorman wrote:
> Hmmmm.
> 
> Right now my search results are contained in an ArrayList object like so:
> 
> List searchResult = new ArrayList();
> 
> I am adding my "resultBean" objects (with it's data, i.e. title, author,
> score, etc) into the searchResult (ArrayList).  
> 
> Would this be possible with a SortedSet?
> 
> Thanks,
> Albert
> 
> 
> 
> 
> 
> Zach Bailey wrote:
>> You could use a SortedSet, which automatically inserts an object into 
>> its sorted position when calling add()?
>>
>> Cheers,
>> -Zach
>>
>> anorman wrote:
>>> I have set up a search result made up of a resultBean object containing
>>> the
>>> information that I am fetching.  Currently it is sorted by score
>>> (relevance)
>>> which is great and what I want.  However, I have created a loop which
>>> continues to add results from several indexes to the search result (e.g.
>>> articles, books, chapters).  This works fine, but each specific section
>>> is
>>> sorted by score so that the articles are listed first (lets say 200 of
>>> them
>>> return) then the books are listed and sorted based on relevance and so
>>> on.  
>>>
>>> I need some way to again sort by score on my compiled search result.
>>>
>>> Any thoughts?
>>>
>>> Thanks,
>>> Albert
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 17:23:17 2007
Return-Path: <java-user-return-30310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7463 invoked from network); 18 Sep 2007 17:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 17:23:16 -0000
Received: (qmail 20051 invoked by uid 500); 18 Sep 2007 17:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20010 invoked by uid 500); 18 Sep 2007 17:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19999 invoked by uid 99); 18 Sep 2007 17:23:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 10:23:02 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 17:24:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXgmV-0006OB-TW
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 10:22:39 -0700
Message-ID: <12761926.post@talk.nabble.com>
Date: Tue, 18 Sep 2007 10:22:39 -0700 (PDT)
From: gsanctus <gsanto@pitagora.it>
To: java-user@lucene.apache.org
Subject: Span Query on different fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gsanto@pitagora.it
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
I have an index with tree fields (field1, field2,field3).
I have to do an or-query and get term positions within a document.
So I'm using span query but I have a problem because
with spans I can't write
...
SpanTermQuery field1 = new SpanTermQuery(new Term("field1", "hello"));
SpanTermQuery field2 = new SpanTermQuery(new Term("field2", "hello"));
SpanTermQuery field3 = new SpanTermQuery(new Term("field3", "hello"));
SpanOrQuery or = new SpanOrQuery(new SpanQuery[] {field1, field2,field3});
With this code I get an error because SpanOrQuery Clauses must have same
field.

My question is:
Is defined a field positions iterator on Spans or other structure ???

Can you help me???

Thanks
-- 
View this message in context: http://www.nabble.com/Span-Query-on-different-fields-tf4475788.html#a12761926
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 17:46:34 2007
Return-Path: <java-user-return-30311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20830 invoked from network); 18 Sep 2007 17:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 17:46:33 -0000
Received: (qmail 60062 invoked by uid 500); 18 Sep 2007 17:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60024 invoked by uid 500); 18 Sep 2007 17:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 56353 invoked by uid 99); 18 Sep 2007 17:43:28 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marc.dumontier@thomson.com designates 163.231.12.70 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7FA1B.5C975760"
Subject: NumberTools - Range Searches
Date: Tue, 18 Sep 2007 13:42:07 -0400
Message-ID: <629CBB07E28C934D8CA87EF193170E4CE96CB1@tshuspaphimbx01.ERF.THOMSON.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NumberTools - Range Searches
Thread-Index: Acf6GzviGBAqyGyZSzGMGTnCnF9+fw==
From: <marc.dumontier@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Sep 2007 17:43:03.0652 (UTC) FILETIME=[5D1BEA40:01C7FA1B]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7FA1B.5C975760
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I'm trying to do Range searches on a numeric field and have come across
the lexicographical behavior, such that

=20

mylength: [0-2]

=20

brings back values such as 1172

=20

=20

I've seen prior posts about the NumberTools class, and have indexed a
field using the longToString() method.

=20

Do I have to rewrite the query to handle this field? I don't want
searches to have to looks something like

=20

mylength: [00000000-00000002]

=20

for example.

=20

=20

Any high level help or concrete examples would be much appreciated.

=20

Thanks,

=20

Marc Dumontier
Manager, Software Development
Thomson Scientific (Canada)
1 Yonge Street, Suite 1801
Toronto, Ontario M5E 1W7

=20

Direct +1 416 214 3448
Mobile +1 416 454 3147

=20


------_=_NextPart_001_01C7FA1B.5C975760--

From java-user-return-30312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 17:51:55 2007
Return-Path: <java-user-return-30312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25249 invoked from network); 18 Sep 2007 17:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 17:51:55 -0000
Received: (qmail 67943 invoked by uid 500); 18 Sep 2007 17:51:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67681 invoked by uid 500); 18 Sep 2007 17:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67670 invoked by uid 99); 18 Sep 2007 17:51:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 10:51:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 17:53:31 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 548811635B9
	for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 10:52:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12761926.post@talk.nabble.com>
References: <12761926.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A0BD09E-4A41-4E1C-8DC1-C3924DC3738D@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Span Query on different fields
Date: Tue, 18 Sep 2007 13:50:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I think the semantics of positions across fields isn't well defined,  
which is why SpanQuery requires a single field.  The workaround is to  
add a 4th field that is a combo of 1, 2 and 3.  Alternatively, since  
you are doing an OrQuery, just process the Spans from each  
SpanTermQuery separately, i.e.:

> SpanTermQuery field1 = new SpanTermQuery(new Term("field1", "hello"));

Spans f1Spans = field1.getSpans();
//do something

> SpanTermQuery field2 = new SpanTermQuery(new Term("field2", "hello"));

Spans f2Spans = field2.getSpans();
//do something

> SpanTermQuery field3 = new SpanTermQuery(new Term("field3", "hello"));

same as above.

I suppose there is some waste in this approach, since you may end up  
iterating over the same doc again.

-Grant


On Sep 18, 2007, at 1:22 PM, gsanctus wrote:

>
> Hello,
> I have an index with tree fields (field1, field2,field3).
> I have to do an or-query and get term positions within a document.
> So I'm using span query but I have a problem because
> with spans I can't write
> ...
> SpanTermQuery field1 = new SpanTermQuery(new Term("field1", "hello"));
> SpanTermQuery field2 = new SpanTermQuery(new Term("field2", "hello"));
> SpanTermQuery field3 = new SpanTermQuery(new Term("field3", "hello"));
> SpanOrQuery or = new SpanOrQuery(new SpanQuery[] {field1,  
> field2,field3});
> With this code I get an error because SpanOrQuery Clauses must have  
> same
> field.
>
> My question is:
> Is defined a field positions iterator on Spans or other structure ???
>
> Can you help me???
>
> Thanks
> -- 
> View this message in context: http://www.nabble.com/Span-Query-on- 
> different-fields-tf4475788.html#a12761926
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 17:59:45 2007
Return-Path: <java-user-return-30313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30777 invoked from network); 18 Sep 2007 17:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 17:59:44 -0000
Received: (qmail 90238 invoked by uid 500); 18 Sep 2007 17:59:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90214 invoked by uid 500); 18 Sep 2007 17:59:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90203 invoked by uid 99); 18 Sep 2007 17:59:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 10:59:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 17:59:28 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1502600wxd
        for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 10:59:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jmHM5rQz2yhGcRXU3Z+B0Nc/C8abrfvyVsnX622/ITk=;
        b=SRNEGKxfsLOXdqUgAz97DgkCJwz9Fyk2a1v8nBVySX6LVLPgvNv8Yuy6g2YfU/hVW7yWlAJ4tnmSd0Rs54bayI28BzNJygDxywb06tIXrG3ekFpAVDCIal8Tcf7cYAGK0TVhttTGfGuPIZAKcJYknuBiG5dq+qkWb2X7rgfqT0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ngh7RfiY667p1quvpf4zRCyak3KQTvVK+0X7yuFmGOCD0SAcRLo0qmeXUCixr6VM/VApmOXp8s3spxaZlHJzoC8jOqjCakxPkvWo9qPyxysSMGtAi47wmg/UGQhTIvYYeIPnRgArQviAJ0n3Vmay4vjDzcc/pIheiF7vmojIcDU=
Received: by 10.65.53.3 with SMTP id f3mr13578670qbk.1190138346627;
        Tue, 18 Sep 2007 10:59:06 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Tue, 18 Sep 2007 10:59:06 -0700 (PDT)
Message-ID: <34b8543c0709181059x65291ea7wf783f781c5684838@mail.gmail.com>
Date: Tue, 18 Sep 2007 21:29:06 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NumberTools - Range Searches
In-Reply-To: <629CBB07E28C934D8CA87EF193170E4CE96CB1@tshuspaphimbx01.ERF.THOMSON.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22393_12149570.1190138346566"
References: <629CBB07E28C934D8CA87EF193170E4CE96CB1@tshuspaphimbx01.ERF.THOMSON.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22393_12149570.1190138346566
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
you may put two fields in your document one contains decoded values and
another is original values, but still you need to implement your query
builder so while searching you must specify the decoded filed and you show
the original field to the user

On 9/18/07, marc.dumontier@thomson.com <marc.dumontier@thomson.com> wrote:
>
> Hi,
>
>
>
> I'm trying to do Range searches on a numeric field and have come across
> the lexicographical behavior, such that
>
>
>
> mylength: [0-2]
>
>
>
> brings back values such as 1172
>
>
>
>
>
> I've seen prior posts about the NumberTools class, and have indexed a
> field using the longToString() method.
>
>
>
> Do I have to rewrite the query to handle this field? I don't want
> searches to have to looks something like
>
>
>
> mylength: [00000000-00000002]
>
>
>
> for example.
>
>
>
>
>
> Any high level help or concrete examples would be much appreciated.
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_22393_12149570.1190138346566--

From java-user-return-30314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 18:32:08 2007
Return-Path: <java-user-return-30314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61579 invoked from network); 18 Sep 2007 18:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 18:32:06 -0000
Received: (qmail 66148 invoked by uid 500); 18 Sep 2007 18:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66105 invoked by uid 500); 18 Sep 2007 18:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66094 invoked by uid 99); 18 Sep 2007 18:31:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 11:31:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.scott.tiger@gmail.com designates 209.85.162.181 as permitted sender)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 18:31:51 +0000
Received: by el-out-1112.google.com with SMTP id m34so426958ele
        for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 11:31:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=fNetUe8h+gIKkGAWsukYqZ0zJO9zbTpe4JbY7VDvFRQ=;
        b=As9LfuWzdkP4JRYkPS2o6+9Icx88QkfpMJEbQXngSqt6zTgQZKXvMvYK/4ZTY0jrjxcYh78HZek6quhlZp6BUSADAe5iYTyE8d7xaS9iCdFh4uOHv58J5dzoqWda2ntSMaa9GCt4qnoMbFprnKI1q27KBVBMTTytxcrNCazZLfs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jLSaXBia23tDZ5X5Q1E32szDrcg2602p3Q0VoWxORsB2vU3YylCIeLJ26z6wGA6u6aDbp/VzH03SFNoNyJrOcG+VKq6pn/xMqd2JaDC4gdYsUZBHgqDJC9hflGPA6IKVbt60mcOouMnoMiNcv3+ETTkxL2ANPCrdhTogt6lzJF0=
Received: by 10.142.225.11 with SMTP id x11mr1696687wfg.1190140289228;
        Tue, 18 Sep 2007 11:31:29 -0700 (PDT)
Received: by 10.142.76.20 with HTTP; Tue, 18 Sep 2007 11:31:29 -0700 (PDT)
Message-ID: <b5db44200709181131j30d05a01ue20fd09e47047302@mail.gmail.com>
Date: Wed, 19 Sep 2007 03:31:29 +0900
From: "Scott Tiger" <m.scott.tiger@gmail.com>
To: java-user@lucene.apache.org
Subject: Is there a FilterQueryParser?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I want get BooleanFilter contains two RangeFilters from query string.
Can I use FilterQuery to get RangeFilter?

example:

my query string:

  field1:[0 TO 100] AND field2:[1000 TO 2000]

BooleanFilter I want:
  BooleanFilter bf = new BooleanFilter();
  bf.add(
    new FilterClause(
      new RangeFilter("field1","0", "100", true, true),
      BooleanClause.Occur.MUST
    )
  );
  bf.add(
    new FilterClause(
      new RangeFilter("field2", "1000", "2000", true, true),
      BooleanClause.Occur.MUST
    )
  );

QueryFilter example:
  QueryParser qp = new QueryParser("", new KeywordAnalyzer());
  Query query = qp.parse("field1:[0 TO 100] AND filed2:[1000 TO 2000]");
  Filter filter = new CachingWrapperFilter(new QueryWrapperFilter(query));

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 19:01:33 2007
Return-Path: <java-user-return-30315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72019 invoked from network); 18 Sep 2007 19:01:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 19:01:33 -0000
Received: (qmail 30031 invoked by uid 500); 18 Sep 2007 19:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29237 invoked by uid 500); 18 Sep 2007 19:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29223 invoked by uid 99); 18 Sep 2007 19:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 12:01:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 19:01:18 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 684B671C073; Tue, 18 Sep 2007 12:00:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 59D7C71C00B
	for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 12:00:58 -0700 (PDT)
Date: Tue, 18 Sep 2007 12:00:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene equivalent of grep -A -B command
In-Reply-To: <12760645.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0709181200060.7273@radix.cryptio.net>
References: <12760645.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a way we can get contents of the file surrounding to the term (head
: 10 lines and tail 10 lines) we are searching through a lucene indexed file?

FAQ: 

Is there a way to get a text summary of an indexed document with 
Lucene (a.k.a. a "snippet" or "fragment") to display along with the search 
result?

http://wiki.apache.org/lucene-java/LuceneFAQ#head-75566820ee94a425c7e2950ac61d24e405fbd914


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 21:24:17 2007
Return-Path: <java-user-return-30316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26741 invoked from network); 18 Sep 2007 21:24:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 21:24:16 -0000
Received: (qmail 47301 invoked by uid 500); 18 Sep 2007 21:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47257 invoked by uid 500); 18 Sep 2007 21:24:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47242 invoked by uid 99); 18 Sep 2007 21:24:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 14:24:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 21:24:00 +0000
Received: by ug-out-1314.google.com with SMTP id a2so179607ugf
        for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 14:23:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=Nm/ZcJBcv3H8A58IKN9cYdw1nLXs39g0yL1+xAml1vY=;
        b=CmSpyMRUic9sJ5BsidlpvrpdzUmaS7Z9qM5qTxcj8MHIyW6kD3m2llaoCdimiX5btzb6uNuiyZ1g0qUPuK8JCiqMov34WOgvYK7mBApeUjgUH3vpjEtR1T/ccVQ1tzuO0fnLl9WzYEBg4xYqJnoWI/9/8b6ZT9ARMtmO2fNWL4U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Br3i6ooQ9j6xz13uvdZZmmsYjpARMzriVqs1d7af/UztBGe0fjBnlGmJChz1ayJa3pz8tLlvX2B5hIibzyXA7fBZwUx7DqT20jIRcKpnWm0wtsL975n0ZshKP7+gRO/JXNYqe0MXogQ9zBeqaHH/8911Kzvh9YDvamyropKqHyU=
Received: by 10.66.255.7 with SMTP id c7mr1181827ugi.1190150618786;
        Tue, 18 Sep 2007 14:23:38 -0700 (PDT)
Received: from ?10.0.74.170? ( [202.125.143.69])
        by mx.google.com with ESMTPS id x26sm746050ugc.2007.09.18.14.23.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Sep 2007 14:23:37 -0700 (PDT)
Message-ID: <46F041C7.6070208@gmail.com>
Date: Wed, 19 Sep 2007 02:23:19 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: lucene for Arabic  and Urdu
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All

I m new to the field of Information Retrieval and now working to 
develop  search engine for language like Arabic  and Urdu. Kindly guide 
me in this regard that how can Lucene be utilized for this purpose.
Can anybody tell me exactly what I should do to design a search engine 
from the scratch using Lucene.

Liaqat Ali


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 21:45:40 2007
Return-Path: <java-user-return-30317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33554 invoked from network); 18 Sep 2007 21:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 21:45:39 -0000
Received: (qmail 68824 invoked by uid 500); 18 Sep 2007 21:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68787 invoked by uid 500); 18 Sep 2007 21:45:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68776 invoked by uid 99); 18 Sep 2007 21:45:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 14:45:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 21:47:20 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:63402 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IXksQ-0003U6-9M
	for java-user@lucene.apache.org; Tue, 18 Sep 2007 23:45:03 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46F041C7.6070208@gmail.com>
References: <46F041C7.6070208@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6CC7EE97-5DF0-4787-B58E-C73FEFEADB5C@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: lucene for Arabic  and Urdu
Date: Tue, 18 Sep 2007 23:38:21 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IXksQ-0003U6-9M.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IXksQ-0003U6-9M adcae79add89f0770d1bbd43c8f5d835
X-Virus-Checked: Checked by ClamAV on apache.org


18 sep 2007 kl. 23.23 skrev Liaqat Ali:

> I m new to the field of Information Retrieval and now working to  
> develop  search engine for language like Arabic  and Urdu. Kindly  
> guide me in this regard that how can Lucene be utilized for this  
> purpose.

Lucene makes no distinction between languages. All data is discrete  
chunks of characters, also known as tokens. Tokens are repsresented  
in fields, and the combination of a token in a specific field is  
known as a term. What tokens your index end up containing depends on  
the analyzer strategy you will be using. An analyzer could be  
language sensitive, it could also be something completely different.

> Can anybody tell me exactly what I should do to design a search  
> engine from the scratch using Lucene.

You need to define what your search engine is supposed to do in order  
to get an answer that makes sense.


Lucene in action is a pretty good book, even though it covers 1.4 or  
so. The SVN contains a demo application. There is also the Wiki and  
this forum.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 22:26:26 2007
Return-Path: <java-user-return-30318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46201 invoked from network); 18 Sep 2007 22:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 22:26:25 -0000
Received: (qmail 27403 invoked by uid 500); 18 Sep 2007 22:26:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27369 invoked by uid 500); 18 Sep 2007 22:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27358 invoked by uid 99); 18 Sep 2007 22:26:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 15:26:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.12.11.96] (HELO smtp007.mail.ukl.yahoo.com) (217.12.11.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Sep 2007 22:26:08 +0000
Received: (qmail 33927 invoked from network); 18 Sep 2007 22:25:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=L7PFORitIEfssJy++6DwSIIOYmPY/+jpklvKJESitAi5ClXVl8nzyX0a2DBQ3CN2JSNmqTxipqP2wEYTdlevY3F6WN3Hx5vIJSuWTpr50298nzLBd5ahR1CN83Jwb3mlHwiKvpGOYcFDFt4eFIPReGsD5kc6JQV6umiP32EfL4A=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp007.mail.ukl.yahoo.com with SMTP; 18 Sep 2007 22:25:47 -0000
X-YMail-OSG: 4T_O_CsVM1k6DU8uEwUZST98X1IWC8nq6iH4Gj45VSWF80hFda2.N0IrbaT7jAUbMLvW_bhe6A--
Message-ID: <46F05062.8060500@yahoo.co.uk>
Date: Tue, 18 Sep 2007 23:25:38 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Is there a FilterQueryParser?
References: <b5db44200709181131j30d05a01ue20fd09e47047302@mail.gmail.com>
In-Reply-To: <b5db44200709181131j30d05a01ue20fd09e47047302@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Scott Tiger wrote:
> I want get BooleanFilter contains two RangeFilters from query string.
>   
The XMLQueryParser may be of interest.
See BooleanFilter.xml and CachedFilter.xml examples in the 
XMLQueryParser Junit tests.

I typically use QueryTemplateManager to transform user input provided in 
a form using a stylesheet encapsulating the query/filtering logic. See 
TestQueryTemplateManager Junit test for an example. Criteria like dates 
and price ranges typically have structured fields in forms and get 
mapped to RangeFilters in the query template. Structured fields with 
limited options for values (e.g. status:draft/published) are ideal 
candidates for surrounding with the <CachedFilter> tag to improve 
performance.  Form fields that allow standard Lucene query syntax can be 
mapped to a <UserQuery> tag for processing.

Cheers
Mark


> Can I use FilterQuery to get RangeFilter?
>
> example:
>
> my query string:
>
>   field1:[0 TO 100] AND field2:[1000 TO 2000]
>
> BooleanFilter I want:
>   BooleanFilter bf = new BooleanFilter();
>   bf.add(
>     new FilterClause(
>       new RangeFilter("field1","0", "100", true, true),
>       BooleanClause.Occur.MUST
>     )
>   );
>   bf.add(
>     new FilterClause(
>       new RangeFilter("field2", "1000", "2000", true, true),
>       BooleanClause.Occur.MUST
>     )
>   );
>
> QueryFilter example:
>   QueryParser qp = new QueryParser("", new KeywordAnalyzer());
>   Query query = qp.parse("field1:[0 TO 100] AND filed2:[1000 TO 2000]");
>   Filter filter = new CachingWrapperFilter(new QueryWrapperFilter(query));
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 18 23:33:28 2007
Return-Path: <java-user-return-30319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70602 invoked from network); 18 Sep 2007 23:33:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Sep 2007 23:33:27 -0000
Received: (qmail 84074 invoked by uid 500); 18 Sep 2007 23:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84038 invoked by uid 500); 18 Sep 2007 23:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84025 invoked by uid 99); 18 Sep 2007 23:33:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 16:33:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Sep 2007 23:35:05 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 4A5EB3B9CB
	for <java-user@lucene.apache.org>; Tue, 18 Sep 2007 16:34:32 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46F041C7.6070208@gmail.com>
References: <46F041C7.6070208@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E0CC702-1C79-4CA0-89B2-2BEF7798B0C8@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: lucene for Arabic  and Urdu
Date: Tue, 18 Sep 2007 19:32:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/IndexingOtherLanguages is slightly  
out of date, but still has some tips.  You may also want to consider  
starting with Solr, as it has many features a search engine needs.

In the past, I have written Arabic Analyzers for Lucene (sorry, can't  
share them) but I can tell you that you can also find some by  
searching for it on Google.

And, as Karl said, the "Lucene In Action" book is excellent, even if  
it is a bit out of date.  Most of the concepts still apply.

On Sep 18, 2007, at 5:23 PM, Liaqat Ali wrote:

> Hello All
>
> I m new to the field of Information Retrieval and now working to  
> develop  search engine for language like Arabic  and Urdu. Kindly  
> guide me in this regard that how can Lucene be utilized for this  
> purpose.
> Can anybody tell me exactly what I should do to design a search  
> engine from the scratch using Lucene.
>
> Liaqat Ali
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 11:31:42 2007
Return-Path: <java-user-return-30320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23625 invoked from network); 19 Sep 2007 11:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 11:31:41 -0000
Received: (qmail 33132 invoked by uid 500); 19 Sep 2007 11:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33103 invoked by uid 500); 19 Sep 2007 11:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33092 invoked by uid 99); 19 Sep 2007 11:31:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 04:31:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_RED,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 11:31:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IXxlm-00081g-FX
	for java-user@lucene.apache.org; Wed, 19 Sep 2007 04:31:02 -0700
Message-ID: <12775620.post@talk.nabble.com>
Date: Wed, 19 Sep 2007 04:31:02 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Java Heap Space -Out Of Memory Error
In-Reply-To: <12735206.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <12475468.post@talk.nabble.com> <12476607.post@talk.nabble.com> <12478804.post@talk.nabble.com> <12484208.post@talk.nabble.com> <12492218.post@talk.nabble.com> <12496515.post@talk.nabble.com> <12500824.post@talk.nabble.com> <Pine.LNX.4.62.0709051624210.1421@radix.cryptio.net> <12515624.post@talk.nabble.com> <Pine.LNX.4.62.0709052208180.31701@radix.cryptio.net> <12528983.post@talk.nabble.com> <12595489.post@talk.nabble.com> <12650012.post@talk.nabble.com> <12652816.post@talk.nabble.com> <12655013.post@talk.nabble.com> <12655880.post@talk.nabble.com> <1189695196.8650.1210472501@webmail.messagingengine.com> <12668746.post@talk.nabble.com> <12679970.post@talk.nabble.com> <12687410.post@talk.nabble.com> <12690100.post@talk.nabble.com> <12729051.post@talk.nabble.com> <12735206.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


HI testn,
              I used to search now 3 folders of total size 1.5.GB.still it
consumes lot of memory for every search.i used to close all the IndexReader
once i finish the search.i optimize the FIles using Luke.when i set the
IndexSearcher  object as application level object,its not possible to see
the updated records.
could you guide me how to resolve this memory problem.

testn wrote:
> 
> As I mentioned, IndexReader is the one that holds the memory. You should
> explicitly close the underlying IndexReader to make sure that the reader
> releases the memory. 
> 
> 
> 
> Sebastin wrote:
>> 
>> Hi testn,
>>               Every IndexFolder is of size 1.5 GB of size,eventhough when
>> i used to Open and close the IndexSearcher it wont release the memory for
>> all the searches.
>>               When i set the IndexSearcher object as the Application
>> Scope object its not possile for me to see current day records.
>> 
>>                  Could you give me an Idea how to trigger out this
>> problem. 
>>       
>> 
>> testn wrote:
>>> 
>>> If you know that there are only 15 days of indexes you need to search
>>> on, you just need to open only the latest 15 indexes at a time right?
>>> You can simply create a wrapper that return MultiReader which you can
>>> cache for a while and close the oldest index once the date rolls.
>>> 
>>> 
>>> Sebastin wrote:
>>>> 
>>>> HI testn,
>>>> 
>>>> it gives performance improvement while optimizing the Index. 
>>>> 
>>>> Now i seprate the IndexStore on a daily basis.(ie) 
>>>> For Every Day it create a new Index store ,sep- 08-2007,sep-09-2007
>>>> like wise it will minimize the size of the IndexStore.could you give me
>>>> an idea on how to open every day folders for every search.
>>>> 
>>>> Query I use here is,
>>>> 
>>>> 9840836588 AND dateSc:[070901 TO 070910] 
>>>> 
>>>> 07---->year (2007)
>>>> 09---->month(september)
>>>> 01----->day
>>>> 
>>>> i restrict for 15 days that it is possible to search 15 days record in
>>>> my application.at a time 10 users aare going to search every store.is
>>>> there any other better way to improve the search performance to avoid
>>>> memory problem as well as speed of the search.
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> testn wrote:
>>>>> 
>>>>> So did you see any improvement in performance?
>>>>> 
>>>>> Sebastin wrote:
>>>>>> 
>>>>>> It works finally .i use Lucene 2.2  in my application.thanks testn
>>>>>> and Mike
>>>>>> 
>>>>>> Michael McCandless-2 wrote:
>>>>>>> 
>>>>>>> 
>>>>>>> It sounds like there may be a Lucene version mismatch?  When Luke
>>>>>>> was used
>>>>>>> it was likely based on Lucene 2.2, but it sounds like an older
>>>>>>> version of
>>>>>>> Lucene is now being used to open the index?
>>>>>>> 
>>>>>>> Mike
>>>>>>> 
>>>>>>> "testn" <test1@doramail.com> wrote:
>>>>>>>> 
>>>>>>>> Should the file be "segments_8" and "segments.gen"? Why is it
>>>>>>>> "Segment"?
>>>>>>>> The
>>>>>>>> case is different.
>>>>>>>> 
>>>>>>>> 
>>>>>>>> Sebastin wrote:
>>>>>>>> > 
>>>>>>>> > java.io.IoException:File Not Found- Segments  is the error
>>>>>>>> message
>>>>>>>> > 
>>>>>>>> > testn wrote:
>>>>>>>> >> 
>>>>>>>> >> What is the error message? Probably Mike, Erick or Yonik can
>>>>>>>> help you
>>>>>>>> >> better on this since I'm no one in index area.
>>>>>>>> >> 
>>>>>>>> >> Sebastin wrote:
>>>>>>>> >>> 
>>>>>>>> >>> HI testn,
>>>>>>>> >>>              1.I optimize the Large Indexes of size 10 GB using
>>>>>>>> Luke.it
>>>>>>>> >>> optimize all the content into a single CFS file and it
>>>>>>>> generates
>>>>>>>> >>> segments.gen and segments_8 file when i search the item it
>>>>>>>> shows an
>>>>>>>> >>> error that segments file is not there.could you help me in this 
>>>>>>>> >>> 
>>>>>>>> >>> testn wrote:
>>>>>>>> >>>> 
>>>>>>>> >>>> 1. You can close the searcher once you're done. If you want to
>>>>>>>> reopen
>>>>>>>> >>>> the index, you can close and reopen only the updated 3 readers
>>>>>>>> and keep
>>>>>>>> >>>> the 2 old indexreaders and reuse it. It should reduce the time
>>>>>>>> to
>>>>>>>> >>>> reopen it.
>>>>>>>> >>>> 2. Make sure that you optimize it every once in a while
>>>>>>>> >>>> 3. You might consider separating indices in separated storage
>>>>>>>> and use
>>>>>>>> >>>> ParallelReader
>>>>>>>> >>>> 
>>>>>>>> >>>> 
>>>>>>>> >>>> 
>>>>>>>> >>>> Sebastin wrote:
>>>>>>>> >>>>> 
>>>>>>>> >>>>> The problem in my pplication are as follows:
>>>>>>>> >>>>>                  1.I am not able to see the updated records
>>>>>>>> in my
>>>>>>>> >>>>> index store because i instantiate 
>>>>>>>> >>>>> IndexReader and IndexSearcher class once that is in the first
>>>>>>>> >>>>> search.further searches use the same IndexReaders(5
>>>>>>>> Directories) and
>>>>>>>> >>>>> IndexSearcher with different queries.
>>>>>>>> >>>>> 
>>>>>>>> >>>>>                 2.My search is very very slow First 2
>>>>>>>> Directories of
>>>>>>>> >>>>> size 10 GB each which are having old index records and no
>>>>>>>> update in
>>>>>>>> >>>>> that remaining 3 Diretories are updated every second.
>>>>>>>> >>>>> 
>>>>>>>> >>>>>                 3.i am Indexing 20 million records per day so
>>>>>>>> the
>>>>>>>> >>>>> Index store gets growing and it makes search very very
>>>>>>>> slower.
>>>>>>>> >>>>>  
>>>>>>>> >>>>>                4.I am using searcherOne class as the global
>>>>>>>> >>>>> application helper class ,with the scope as APPLICATION it
>>>>>>>> consists of
>>>>>>>> >>>>> one IndexReader and IndexSearcher get set method which will
>>>>>>>> hold the
>>>>>>>> >>>>> IndexReader and IndexSearcher object after the First
>>>>>>>> Search.it is used
>>>>>>>> >>>>> for all other searches.
>>>>>>>> >>>>> 
>>>>>>>> >>>>>               5.I am using Lucene 2.2.0 version, in a WEB
>>>>>>>> Application
>>>>>>>> >>>>> which index 15 fields per document and Index 5 Fieds,store 10
>>>>>>>> Fields.i
>>>>>>>> >>>>> am not using any sort in my query.for a single query upto the
>>>>>>>> maximum
>>>>>>>> >>>>> it fetches 600 records from the index store(5 direcories)    
>>>>>>>> >>>>>                 
>>>>>>>> >>>>> 
>>>>>>>> >>>>> hossman wrote:
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> : I set IndexSearcher as the application Object after the
>>>>>>>> first
>>>>>>>> >>>>>> search.
>>>>>>>> >>>>>> 	...
>>>>>>>> >>>>>> : how can i reconstruct the new IndexSearcher for every hour
>>>>>>>> to see
>>>>>>>> >>>>>> the
>>>>>>>> >>>>>> : updated records .
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> i'm confused ... my understanding based on the comments you
>>>>>>>> made
>>>>>>>> >>>>>> below 
>>>>>>>> >>>>>> (in an earlier message) was that you already *were*
>>>>>>>> constructing a
>>>>>>>> >>>>>> new  
>>>>>>>> >>>>>> IndexSearcher once an hour -- but every time you do that,
>>>>>>>> your memory 
>>>>>>>> >>>>>> usage grows, and and that sometimes you got OOM Errors.
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> if that's not what you said, then i think you need to
>>>>>>>> explain, in
>>>>>>>> >>>>>> detail, 
>>>>>>>> >>>>>> in one message, exactly what your problem is.  And don't
>>>>>>>> assume we 
>>>>>>>> >>>>>> understand anything -- tell us *EVERYTHING* (like, for
>>>>>>>> example, what
>>>>>>>> >>>>>> the 
>>>>>>>> >>>>>> word "crore" means, how "searcherOne" is implemented, and
>>>>>>>> the answer
>>>>>>>> >>>>>> to 
>>>>>>>> >>>>>> the specfic question i asked in my last message: does your
>>>>>>>> >>>>>> application, 
>>>>>>>> >>>>>> contain anywhere in it, any code that will close anything
>>>>>>>> >>>>>> (IndexSearchers 
>>>>>>>> >>>>>> or IndexReaders) ?
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> : > : I use StandardAnalyzer.the records daily ranges from 5
>>>>>>>> crore to
>>>>>>>> >>>>>> 6 crore.
>>>>>>>> >>>>>> : > for
>>>>>>>> >>>>>> : > : every second i am updating my Index. i instantiate
>>>>>>>> >>>>>> IndexSearcher object
>>>>>>>> >>>>>> : > one
>>>>>>>> >>>>>> : > : time for all the searches. for an hour can i see the
>>>>>>>> updated
>>>>>>>> >>>>>> records in
>>>>>>>> >>>>>> : > the
>>>>>>>> >>>>>> : > : indexstore by reinstantiating IndexSearcher object.but
>>>>>>>> the
>>>>>>>> >>>>>> problem when
>>>>>>>> >>>>>> : > i
>>>>>>>> >>>>>> : > : reinstantiate IndexSearcher ,my RAM memory gets
>>>>>>>> appended.is
>>>>>>>> >>>>>> there any
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> : > IndexSearcher are you explicitly closing both the old
>>>>>>>> >>>>>> IndexSearcher as 
>>>>>>>> >>>>>> : > well as all of 4 of those old IndexReaders and the
>>>>>>>> MultiReader?
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> -Hoss
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> >>>>>> To unsubscribe, e-mail:
>>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>>> >>>>>> For additional commands, e-mail:
>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>>> 
>>>>>>>> >>>>> 
>>>>>>>> >>>>> 
>>>>>>>> >>>> 
>>>>>>>> >>>> 
>>>>>>>> >>> 
>>>>>>>> >>> 
>>>>>>>> >> 
>>>>>>>> >> 
>>>>>>>> > 
>>>>>>>> > 
>>>>>>>> 
>>>>>>>> -- 
>>>>>>>> View this message in context:
>>>>>>>> http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12655880
>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>> Nabble.com.
>>>>>>>> 
>>>>>>>> 
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>> 
>>>>>>> 
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>> 
>>>>>>> 
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>> 
>>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Java-Heap-Space--Out-Of-Memory-Error-tf4376803.html#a12775620
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 12:51:03 2007
Return-Path: <java-user-return-30321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63713 invoked from network); 19 Sep 2007 12:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 12:51:02 -0000
Received: (qmail 41028 invoked by uid 500); 19 Sep 2007 12:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40982 invoked by uid 500); 19 Sep 2007 12:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40971 invoked by uid 99); 19 Sep 2007 12:50:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 05:50:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 12:52:44 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:55179 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IXz0b-0001fe-3F
	for java-user@lucene.apache.org; Wed, 19 Sep 2007 14:50:25 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5697AF57-FC8D-4B48-9CD4-772C694BC925@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Karl Wettin <karl.wettin@gmail.com>
Subject: field name limitations?
Date: Wed, 19 Sep 2007 14:43:40 +0200
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IXz0b-0001fe-3F.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IXz0b-0001fe-3F 340920a4ad6127b231c69844c439520b
X-Virus-Checked: Checked by ClamAV on apache.org

I'm considering using complete class xpaths as field names. These  
might end up beeing several hundred letters long and contain some  
wierd letters. Should I expect running in to problems?

Field names might look something like this:

the.absolute:Class.Path/@attribute/tokenizationStrategyA
the.absolute:Class.Path/@attribute/tokenizationStrategyB
the.absolute:Class.Path/someMethod()/tokenizationStrategy
the.absolute:Class.Path/denormalizedAssociation/@attribute/ 
tokenizationStrategy



-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:18:22 2007
Return-Path: <java-user-return-30322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46861 invoked from network); 19 Sep 2007 15:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:18:21 -0000
Received: (qmail 35684 invoked by uid 500); 19 Sep 2007 15:18:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35651 invoked by uid 500); 19 Sep 2007 15:18:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35640 invoked by uid 99); 19 Sep 2007 15:18:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:18:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:18:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IY1J9-0006w0-TJ
	for java-user@lucene.apache.org; Wed, 19 Sep 2007 08:17:43 -0700
Message-ID: <12779646.post@talk.nabble.com>
Date: Wed, 19 Sep 2007 08:17:43 -0700 (PDT)
From: warnockm <matt@warnockinc.com>
To: java-user@lucene.apache.org
Subject: Lucene implmentation question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: matt@warnockinc.com
X-Virus-Checked: Checked by ClamAV on apache.org


This sounds like a simple problem but i cannot for the life of me figure it
out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being used
for this).  I download Lucene and followed the instructions that said to
place the core and demo .jar files in my classpath.  My classpath is set to
java_dir/ and java_dir/lib.  I placed the .jar files in java_dir/lib.  Next,
i made sure my JAVA_HOME was set.  I then tried running the example under
the "Get started", which included indexing a folder from the shell.  I ran
the command:

java org.apache.lucene.demo.IndexFiles /opt/lucene/src/

and got the following response:
Exception in thread "main" java.lang.NoClassDefFoundError:
org.apache.lucene.demo.IndexFiles
   at gnu.java.lang.MainThread.run(libgcj.so.8rh)
Caused by: java.lang.ClassNotFoundException:
org.apache.lucene.demo.IndexFiles not found in
gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/java/default/,file:/usr/java/default/lib/],
parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
   at java.net.URLClassLoader.findClass(libgcj.so.8rh)
   at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
   at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
   at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
   at gnu.java.lang.MainThread.run(libgcj.so.8rh)

It sounds like it can't find my Lucene class, but even when i manually point
the classpath to the lib folder, i get the error.  
-- 
View this message in context: http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12779646
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:21:41 2007
Return-Path: <java-user-return-30323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52149 invoked from network); 19 Sep 2007 15:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:21:41 -0000
Received: (qmail 43251 invoked by uid 500); 19 Sep 2007 15:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42368 invoked by uid 500); 19 Sep 2007 15:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42357 invoked by uid 99); 19 Sep 2007 15:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:21:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:21:26 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 9664363285EF; Wed, 19 Sep 2007 11:21:05 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 4E779632859B
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 11:21:05 -0400 (EDT)
Message-ID: <46F13EB8.2070901@hannonhill.com>
Date: Wed, 19 Sep 2007 11:22:32 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
References: <12779646.post@talk.nabble.com>
In-Reply-To: <12779646.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.4 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Are you aware you're using GCJ and not the Sun JVM/JDK? Your initial 
paragraph seems to imply you think you are using a Sun product, but your 
stack trace shows otherwise. Perhaps that has something to do with it - 
you're not actually running the "java" you think you are?

-Zach

warnockm wrote:
> This sounds like a simple problem but i cannot for the life of me figure it
> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being used
> for this).  I download Lucene and followed the instructions that said to
> place the core and demo .jar files in my classpath.  My classpath is set to
> java_dir/ and java_dir/lib.  I placed the .jar files in java_dir/lib.  Next,
> i made sure my JAVA_HOME was set.  I then tried running the example under
> the "Get started", which included indexing a folder from the shell.  I ran
> the command:
> 
> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
> 
> and got the following response:
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org.apache.lucene.demo.IndexFiles
>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
> Caused by: java.lang.ClassNotFoundException:
> org.apache.lucene.demo.IndexFiles not found in
> gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/java/default/,file:/usr/java/default/lib/],
> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
> 
> It sounds like it can't find my Lucene class, but even when i manually point
> the classpath to the lib folder, i get the error.  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:39:58 2007
Return-Path: <java-user-return-30324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88549 invoked from network); 19 Sep 2007 15:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:39:57 -0000
Received: (qmail 77107 invoked by uid 500); 19 Sep 2007 15:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77063 invoked by uid 500); 19 Sep 2007 15:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77052 invoked by uid 99); 19 Sep 2007 15:39:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:39:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:39:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IY1e5-0007Yt-DM
	for java-user@lucene.apache.org; Wed, 19 Sep 2007 08:39:21 -0700
Message-ID: <12780000.post@talk.nabble.com>
Date: Wed, 19 Sep 2007 08:39:21 -0700 (PDT)
From: warnockm <matt@warnockinc.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
In-Reply-To: <46F13EB8.2070901@hannonhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: matt@warnockinc.com
References: <12779646.post@talk.nabble.com> <46F13EB8.2070901@hannonhill.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks.  I did not realize that.  I fixed it by putting in the path, but am
getting the same error:

[root@localhost /]# /usr/java/default/bin/java
org.apache.lucene.demo.IndexFiles /opt/lucene/src/
Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/demo/IndexFiles


Zach Bailey wrote:
> 
> Are you aware you're using GCJ and not the Sun JVM/JDK? Your initial 
> paragraph seems to imply you think you are using a Sun product, but your 
> stack trace shows otherwise. Perhaps that has something to do with it - 
> you're not actually running the "java" you think you are?
> 
> -Zach
> 
> warnockm wrote:
>> This sounds like a simple problem but i cannot for the life of me figure
>> it
>> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
>> used
>> for this).  I download Lucene and followed the instructions that said to
>> place the core and demo .jar files in my classpath.  My classpath is set
>> to
>> java_dir/ and java_dir/lib.  I placed the .jar files in java_dir/lib. 
>> Next,
>> i made sure my JAVA_HOME was set.  I then tried running the example under
>> the "Get started", which included indexing a folder from the shell.  I
>> ran
>> the command:
>> 
>> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>> 
>> and got the following response:
>> Exception in thread "main" java.lang.NoClassDefFoundError:
>> org.apache.lucene.demo.IndexFiles
>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>> Caused by: java.lang.ClassNotFoundException:
>> org.apache.lucene.demo.IndexFiles not found in
>> gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/java/default/,file:/usr/java/default/lib/],
>> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>> 
>> It sounds like it can't find my Lucene class, but even when i manually
>> point
>> the classpath to the lib folder, i get the error.  
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12780000
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:45:11 2007
Return-Path: <java-user-return-30325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93026 invoked from network); 19 Sep 2007 15:45:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:45:10 -0000
Received: (qmail 84150 invoked by uid 500); 19 Sep 2007 15:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84113 invoked by uid 500); 19 Sep 2007 15:44:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84102 invoked by uid 99); 19 Sep 2007 15:44:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:44:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:44:56 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 673BA63285DB; Wed, 19 Sep 2007 11:44:35 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 207E2632830C
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 11:44:35 -0400 (EDT)
Message-ID: <46F1443A.2080802@hannonhill.com>
Date: Wed, 19 Sep 2007 11:46:02 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
References: <12779646.post@talk.nabble.com> <46F13EB8.2070901@hannonhill.com> <12780000.post@talk.nabble.com>
In-Reply-To: <12780000.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=4.0 tests=BAYES_00 autolearn=ham 
	version=3.1.0

My next recommendation would be to manually specify the classpath by 
using the -cp or -classpath arguments, for example:

/usr/java/default/bin/java -cp /usr/java/default/lib/lucene.jar 
org.apache.lucene.demo.IndexFiles /opt/lucene/src/

By the way, you are aware that IndexFiles is not included in the 
"official" Lucene library, right? IndexFiles is a class that relies on 
Lucene, however it is distributed as a separate library as part of 
"PDFBox". Perhaps that's the problem?

-Zach

warnockm wrote:
> Thanks.  I did not realize that.  I fixed it by putting in the path, but am
> getting the same error:
> 
> [root@localhost /]# /usr/java/default/bin/java
> org.apache.lucene.demo.IndexFiles /opt/lucene/src/
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/demo/IndexFiles
> 
> 
> Zach Bailey wrote:
>> Are you aware you're using GCJ and not the Sun JVM/JDK? Your initial 
>> paragraph seems to imply you think you are using a Sun product, but your 
>> stack trace shows otherwise. Perhaps that has something to do with it - 
>> you're not actually running the "java" you think you are?
>>
>> -Zach
>>
>> warnockm wrote:
>>> This sounds like a simple problem but i cannot for the life of me figure
>>> it
>>> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
>>> used
>>> for this).  I download Lucene and followed the instructions that said to
>>> place the core and demo .jar files in my classpath.  My classpath is set
>>> to
>>> java_dir/ and java_dir/lib.  I placed the .jar files in java_dir/lib. 
>>> Next,
>>> i made sure my JAVA_HOME was set.  I then tried running the example under
>>> the "Get started", which included indexing a folder from the shell.  I
>>> ran
>>> the command:
>>>
>>> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>>>
>>> and got the following response:
>>> Exception in thread "main" java.lang.NoClassDefFoundError:
>>> org.apache.lucene.demo.IndexFiles
>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>> Caused by: java.lang.ClassNotFoundException:
>>> org.apache.lucene.demo.IndexFiles not found in
>>> gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/java/default/,file:/usr/java/default/lib/],
>>> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>>>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>>>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>>
>>> It sounds like it can't find my Lucene class, but even when i manually
>>> point
>>> the classpath to the lib folder, i get the error.  
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:46:46 2007
Return-Path: <java-user-return-30326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97632 invoked from network); 19 Sep 2007 15:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:46:45 -0000
Received: (qmail 88767 invoked by uid 500); 19 Sep 2007 15:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88734 invoked by uid 500); 19 Sep 2007 15:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88723 invoked by uid 99); 19 Sep 2007 15:46:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:46:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:46:30 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id E6E8863285DB; Wed, 19 Sep 2007 11:46:08 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 9B9B06328585
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 11:46:08 -0400 (EDT)
Message-ID: <46F14498.7030605@hannonhill.com>
Date: Wed, 19 Sep 2007 11:47:36 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
References: <12779646.post@talk.nabble.com> <46F13EB8.2070901@hannonhill.com> <12780000.post@talk.nabble.com> <46F1443A.2080802@hannonhill.com>
In-Reply-To: <46F1443A.2080802@hannonhill.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=4.0 tests=BAYES_00 autolearn=ham 
	version=3.1.0

Also note it appears IndexFiles should be in a Lucene "demo" JAR, so 
make sure you have that and specify it on your classpath in addition to 
the regular Lucene JAR.

Sorry for the confusion.

-Zach

Zach Bailey wrote:
> My next recommendation would be to manually specify the classpath by 
> using the -cp or -classpath arguments, for example:
> 
> /usr/java/default/bin/java -cp /usr/java/default/lib/lucene.jar 
> org.apache.lucene.demo.IndexFiles /opt/lucene/src/
> 
> By the way, you are aware that IndexFiles is not included in the 
> "official" Lucene library, right? IndexFiles is a class that relies on 
> Lucene, however it is distributed as a separate library as part of 
> "PDFBox". Perhaps that's the problem?
> 
> -Zach
> 
> warnockm wrote:
>> Thanks.  I did not realize that.  I fixed it by putting in the path, 
>> but am
>> getting the same error:
>>
>> [root@localhost /]# /usr/java/default/bin/java
>> org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>> Exception in thread "main" java.lang.NoClassDefFoundError:
>> org/apache/lucene/demo/IndexFiles
>>
>>
>> Zach Bailey wrote:
>>> Are you aware you're using GCJ and not the Sun JVM/JDK? Your initial 
>>> paragraph seems to imply you think you are using a Sun product, but 
>>> your stack trace shows otherwise. Perhaps that has something to do 
>>> with it - you're not actually running the "java" you think you are?
>>>
>>> -Zach
>>>
>>> warnockm wrote:
>>>> This sounds like a simple problem but i cannot for the life of me 
>>>> figure
>>>> it
>>>> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
>>>> used
>>>> for this).  I download Lucene and followed the instructions that 
>>>> said to
>>>> place the core and demo .jar files in my classpath.  My classpath is 
>>>> set
>>>> to
>>>> java_dir/ and java_dir/lib.  I placed the .jar files in 
>>>> java_dir/lib. Next,
>>>> i made sure my JAVA_HOME was set.  I then tried running the example 
>>>> under
>>>> the "Get started", which included indexing a folder from the shell.  I
>>>> ran
>>>> the command:
>>>>
>>>> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>>>>
>>>> and got the following response:
>>>> Exception in thread "main" java.lang.NoClassDefFoundError:
>>>> org.apache.lucene.demo.IndexFiles
>>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>>> Caused by: java.lang.ClassNotFoundException:
>>>> org.apache.lucene.demo.IndexFiles not found in
>>>> gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/java/default/,file:/usr/java/default/lib/], 
>>>>
>>>> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>>>>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>>>>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>>>
>>>> It sounds like it can't find my Lucene class, but even when i manually
>>>> point
>>>> the classpath to the lib folder, i get the error.  
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 15:52:22 2007
Return-Path: <java-user-return-30327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4910 invoked from network); 19 Sep 2007 15:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 15:52:21 -0000
Received: (qmail 97907 invoked by uid 500); 19 Sep 2007 15:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97868 invoked by uid 500); 19 Sep 2007 15:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97857 invoked by uid 99); 19 Sep 2007 15:52:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 08:52:06 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond@thinkparity.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:52:04 +0000
Received: by wa-out-1112.google.com with SMTP id j40so303089wah
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 08:51:43 -0700 (PDT)
Received: by 10.114.61.1 with SMTP id j1mr120198waa.1190217103238;
        Wed, 19 Sep 2007 08:51:43 -0700 (PDT)
Received: by 10.115.75.20 with HTTP; Wed, 19 Sep 2007 08:51:43 -0700 (PDT)
Message-ID: <c7fd04b40709190851i2f55ed0co1bd4a8dce32d34ad@mail.gmail.com>
Date: Wed, 19 Sep 2007 08:51:43 -0700
From: "Raymond Kroeker" <raymond@thinkparity.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
In-Reply-To: <12779646.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26212_15394958.1190217103238"
References: <12779646.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26212_15394958.1190217103238
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Matt,
  You'll want to point the classpath to the lib files and not their
containing folder ie:

java_dir/lib/core.jar:java_dir/lib/demo.jar

Raymond

On 9/19/07, warnockm <matt@warnockinc.com> wrote:
>
>
> This sounds like a simple problem but i cannot for the life of me figure
> it
> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
> used
> for this).  I download Lucene and followed the instructions that said to
> place the core and demo .jar files in my classpath.  My classpath is set
> to
> java_dir/ and java_dir/lib.  I placed the .jar files in
> java_dir/lib.  Next,
> i made sure my JAVA_HOME was set.  I then tried running the example under
> the "Get started", which included indexing a folder from the shell.  I ran
> the command:
>
> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>
> and got the following response:
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org.apache.lucene.demo.IndexFiles
>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
> Caused by: java.lang.ClassNotFoundException:
> org.apache.lucene.demo.IndexFiles not found in
> gnu.gcj.runtime.SystemClassLoader{urls=
> [file:/usr/java/default/,file:/usr/java/default/lib/],
> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>
> It sounds like it can't find my Lucene class, but even when i manually
> point
> the classpath to the lib folder, i get the error.
> --
> View this message in context:
> http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12779646
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--------------------------------------------------------------------------------
Raymond Kroeker
thinkParity Solutions Inc.

------=_Part_26212_15394958.1190217103238--

From java-user-return-30328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 17:17:00 2007
Return-Path: <java-user-return-30328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39105 invoked from network); 19 Sep 2007 17:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 17:16:58 -0000
Received: (qmail 31414 invoked by uid 500); 19 Sep 2007 17:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31348 invoked by uid 500); 19 Sep 2007 17:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31315 invoked by uid 99); 19 Sep 2007 17:16:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 10:16:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 17:16:37 +0000
Received: by wr-out-0506.google.com with SMTP id c55so101414wra
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 10:16:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=VzDCbo0pjFYaL3rZVcqZ20k20QtdappLmbyPbCAB4U8=;
        b=Zw75YP/GhnW+nl/swuSN9Tk/pZ2S5C+7dRW/DBjRMVcS4E8eCIM6bt/3T5djLqjSVdYA7HM03L5kA6U62BSJEyoA7I1SBVhTvwLEpIG635E8WoUd1VDFOxfjvWcFTv855OKq0Dh3vNiZlSnRElZW90qrwaQJHuaTCmkd7DDsG+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=HeCOMg2zoopFAQMypeDpB72j+cpbiBVc4Ej7VZAzOaKKOU7Nnx14pfhlyzVdVpiuW8pa8RlmxyditUIxht9O6FHLZ3KdYdC103XLBioa0CNj6sQPaMju1lGxF6ibq0Gly0NbId4qA+mhLAQvV6BN9m5CojWTbT5uNXfKT+HwkWY=
Received: by 10.142.142.16 with SMTP id p16mr355757wfd.1190222175109;
        Wed, 19 Sep 2007 10:16:15 -0700 (PDT)
Received: by 10.143.33.20 with HTTP; Wed, 19 Sep 2007 10:16:15 -0700 (PDT)
Message-ID: <c68e39170709191016u63e1ae43h32462ac17fb7ba61@mail.gmail.com>
Date: Wed, 19 Sep 2007 13:16:15 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: field name limitations?
In-Reply-To: <5697AF57-FC8D-4B48-9CD4-772C694BC925@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5697AF57-FC8D-4B48-9CD4-772C694BC925@gmail.com>
X-Google-Sender-Auth: 626fb4b15212d131
X-Virus-Checked: Checked by ClamAV on apache.org

Should be fine.
The biggest issue may be the number of fields you are likely to have.
They are all kept in an in-memory map.  Also, during segment merging,
the field properties are merged in a linear fashion by stepping over
each one.

-Yonik

On 9/19/07, Karl Wettin <karl.wettin@gmail.com> wrote:
> I'm considering using complete class xpaths as field names. These
> might end up beeing several hundred letters long and contain some
> wierd letters. Should I expect running in to problems?
>
> Field names might look something like this:
>
> the.absolute:Class.Path/@attribute/tokenizationStrategyA
> the.absolute:Class.Path/@attribute/tokenizationStrategyB
> the.absolute:Class.Path/someMethod()/tokenizationStrategy
> the.absolute:Class.Path/denormalizedAssociation/@attribute/
> tokenizationStrategy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 17:23:16 2007
Return-Path: <java-user-return-30329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42104 invoked from network); 19 Sep 2007 17:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 17:23:15 -0000
Received: (qmail 46222 invoked by uid 500); 19 Sep 2007 17:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46180 invoked by uid 500); 19 Sep 2007 17:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46169 invoked by uid 99); 19 Sep 2007 17:23:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 10:23:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 17:22:59 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8JHMb016401
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 10:22:37 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007091910223718380
 for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 10:22:37 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IY3G1-0006x4-00
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 10:22:37 -0700
Message-ID: <46F15AE1.5040400@ai.sri.com>
Date: Wed, 19 Sep 2007 10:22:41 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: thread safe shared IndexSearcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


In a multithread app like web app, a shared IndexSearcher could throw a
AlreadyClosedException when another thread is trying to update the 
underlying IndexReader by closing the shared searcher after the index is 
updated. Searching over the past discussions on this mailing list, I 
found several approaches to solve the problem.
1. use solr
2. use DelayCloseIndexSearcher
3. use LuceneIndexAccessor


the first one is not feasible for us; some people seemed to have 
problems with No. 2 and I do not find a lot of discussions around No.3.

I wonder if anyone has good experience on No 2 and 3?
Or do I miss other better solutions?

Thanks for any suggestion/comment!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 18:31:20 2007
Return-Path: <java-user-return-30330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72770 invoked from network); 19 Sep 2007 18:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 18:31:18 -0000
Received: (qmail 47573 invoked by uid 500); 19 Sep 2007 18:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47258 invoked by uid 500); 19 Sep 2007 18:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47247 invoked by uid 99); 19 Sep 2007 18:31:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 11:31:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 18:31:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IY4Ju-0004dU-5Q
	for java-user@lucene.apache.org; Wed, 19 Sep 2007 11:30:42 -0700
Message-ID: <12783464.post@talk.nabble.com>
Date: Wed, 19 Sep 2007 11:30:42 -0700 (PDT)
From: warnockm <matt@warnockinc.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
In-Reply-To: <c7fd04b40709190851i2f55ed0co1bd4a8dce32d34ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: matt@warnockinc.com
References: <12779646.post@talk.nabble.com> <c7fd04b40709190851i2f55ed0co1bd4a8dce32d34ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply.  I tried your suggestion of including the .jar files
individually in the classpath, but i didn't have any luck:

[root@localhost ~]# java -cp
/usr/java/default/lib/lucene-core-2.2.0.jar,/usr/java/default/lib/lucene-demos-2.2.0.jar
org.apache.lucene.demo.IndexFiles /opt/lucene/src/
Exception in thread "main" java.lang.NoClassDefFoundError:
org/apache/lucene/demo/IndexFiles

Is there a way to browse or query the included classes to see what's there
and what's missing?


Raymond Kroeker-2 wrote:
> 
> Hi Matt,
>   You'll want to point the classpath to the lib files and not their
> containing folder ie:
> 
> java_dir/lib/core.jar:java_dir/lib/demo.jar
> 
> Raymond
> 
> On 9/19/07, warnockm <matt@warnockinc.com> wrote:
>>
>>
>> This sounds like a simple problem but i cannot for the life of me figure
>> it
>> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
>> used
>> for this).  I download Lucene and followed the instructions that said to
>> place the core and demo .jar files in my classpath.  My classpath is set
>> to
>> java_dir/ and java_dir/lib.  I placed the .jar files in
>> java_dir/lib.  Next,
>> i made sure my JAVA_HOME was set.  I then tried running the example under
>> the "Get started", which included indexing a folder from the shell.  I
>> ran
>> the command:
>>
>> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>>
>> and got the following response:
>> Exception in thread "main" java.lang.NoClassDefFoundError:
>> org.apache.lucene.demo.IndexFiles
>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>> Caused by: java.lang.ClassNotFoundException:
>> org.apache.lucene.demo.IndexFiles not found in
>> gnu.gcj.runtime.SystemClassLoader{urls=
>> [file:/usr/java/default/,file:/usr/java/default/lib/],
>> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>
>> It sounds like it can't find my Lucene class, but even when i manually
>> point
>> the classpath to the lib folder, i get the error.
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12779646
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> --------------------------------------------------------------------------------
> Raymond Kroeker
> thinkParity Solutions Inc.
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12783464
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 18:37:15 2007
Return-Path: <java-user-return-30331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74838 invoked from network); 19 Sep 2007 18:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 18:37:14 -0000
Received: (qmail 62146 invoked by uid 500); 19 Sep 2007 18:37:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62114 invoked by uid 500); 19 Sep 2007 18:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62103 invoked by uid 99); 19 Sep 2007 18:37:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 11:37:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 18:36:59 +0000
Received: by fk-out-0910.google.com with SMTP id z23so266366fkz
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 11:36:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=v1yvrVTaD37u20ObhmBJUGIbkibwljYeJPjjZ4RZ7z4=;
        b=hC4/uej/tI215X4rJoGL27kkpXRaMpLnkg5xMEb6lHXWzOR2NvZfxQ798ANJL5+y8UxUye18KLfj7cjMQ9Nyp573x2OXsKLKs/avvfS4CoKJqoGfNLXxi8D/j98FEKE3NQcW2pZHAVn66H2vaCEYGNY6l0YAnT6IDUNzKMfBAUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SR9JBGS2NEmF7JP4kVrgb7QVli0GypWiDKMAUsKGShcZPLbt3IjaAwTBawdZr1oooolgMgLNGah+YA9PT6HhwvDFGn3Yv2jhcEuMys4/HRoRcb6RJz5vrfNiZxYYF/UtHsSeg4pGV2gdafyv0MC7IGZ0CpxwnJTJvqTGU84gr7Y=
Received: by 10.82.119.17 with SMTP id r17mr1465481buc.1190226996947;
        Wed, 19 Sep 2007 11:36:36 -0700 (PDT)
Received: by 10.82.181.1 with HTTP; Wed, 19 Sep 2007 11:36:36 -0700 (PDT)
Message-ID: <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>
Date: Wed, 19 Sep 2007 14:36:36 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
In-Reply-To: <46F15AE1.5040400@ai.sri.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12745_15325024.1190226996951"
References: <46F15AE1.5040400@ai.sri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12745_15325024.1190226996951
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I use option 3 extensivley and find it very effective. There is a tweak or
two required to get it to work right with MultiSearchers, but other than
that, the code is great. I have built a lot on top of it. I'm on the list
all the time and would be happy to answer any questions you have in regards
to LuceneIndexAccessor. Frankly, I think its overlooked far too much.

- Mark


On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>
>
> In a multithread app like web app, a shared IndexSearcher could throw a
> AlreadyClosedException when another thread is trying to update the
> underlying IndexReader by closing the shared searcher after the index is
> updated. Searching over the past discussions on this mailing list, I
> found several approaches to solve the problem.
> 1. use solr
> 2. use DelayCloseIndexSearcher
> 3. use LuceneIndexAccessor
>
>
> the first one is not feasible for us; some people seemed to have
> problems with No. 2 and I do not find a lot of discussions around No.3.
>
> I wonder if anyone has good experience on No 2 and 3?
> Or do I miss other better solutions?
>
> Thanks for any suggestion/comment!
>
> Jay
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12745_15325024.1190226996951--

From java-user-return-30332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 19:01:49 2007
Return-Path: <java-user-return-30332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80816 invoked from network); 19 Sep 2007 19:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 19:01:49 -0000
Received: (qmail 2185 invoked by uid 500); 19 Sep 2007 19:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2153 invoked by uid 500); 19 Sep 2007 19:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2142 invoked by uid 99); 19 Sep 2007 19:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 12:01:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 19:01:32 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8JJ1C003727
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 12:01:12 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007091912011122952
 for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 12:01:11 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IY4nP-0007hs-00
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 12:01:11 -0700
Message-ID: <46F171FB.2080306@ai.sri.com>
Date: Wed, 19 Sep 2007 12:01:15 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com> <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>
In-Reply-To: <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

thanks for sharing your insight and experience about LuceneIndexAccessor!
I remember seeing some people reporting some issues about it, such as:
http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html
http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3

Have those issues been resolved?

Where did you get the latest release? It is not in the official Lucene 
sandbox/contrib.

Finally, are you willing to share your extended version to include your 
tweak relating to the MultiSearcher?

Thanks a lot!

Jay

Mark Miller wrote:
> I use option 3 extensivley and find it very effective. There is a tweak or
> two required to get it to work right with MultiSearchers, but other than
> that, the code is great. I have built a lot on top of it. I'm on the list
> all the time and would be happy to answer any questions you have in regards
> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
> 
> - Mark
> 
> 
> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>
>> In a multithread app like web app, a shared IndexSearcher could throw a
>> AlreadyClosedException when another thread is trying to update the
>> underlying IndexReader by closing the shared searcher after the index is
>> updated. Searching over the past discussions on this mailing list, I
>> found several approaches to solve the problem.
>> 1. use solr
>> 2. use DelayCloseIndexSearcher
>> 3. use LuceneIndexAccessor
>>
>>
>> the first one is not feasible for us; some people seemed to have
>> problems with No. 2 and I do not find a lot of discussions around No.3.
>>
>> I wonder if anyone has good experience on No 2 and 3?
>> Or do I miss other better solutions?
>>
>> Thanks for any suggestion/comment!
>>
>> Jay
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 19:13:11 2007
Return-Path: <java-user-return-30333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83146 invoked from network); 19 Sep 2007 19:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 19:13:10 -0000
Received: (qmail 15826 invoked by uid 500); 19 Sep 2007 19:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15782 invoked by uid 500); 19 Sep 2007 19:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15771 invoked by uid 99); 19 Sep 2007 19:12:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 12:12:56 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 19:14:52 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 67F1463285D4; Wed, 19 Sep 2007 15:12:32 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id DAB0F6328524
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 15:12:31 -0400 (EDT)
Message-ID: <46F174F7.2030206@hannonhill.com>
Date: Wed, 19 Sep 2007 15:13:59 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene implmentation question
References: <12779646.post@talk.nabble.com> <c7fd04b40709190851i2f55ed0co1bd4a8dce32d34ad@mail.gmail.com> <12783464.post@talk.nabble.com>
In-Reply-To: <12783464.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.4 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

I am a little suspicious of your classpath, still. You are using ',' to 
delimit classpath entries, and from my experience generally this 
character should either be ';' (windows) or ':' (*nix).

You can easily discover this character by rolling a quick java program 
containing the following line:

System.out.println( System.getProperty( "path.separator" ) );

Cheers,
-Zach

warnockm wrote:
> Thanks for your reply.  I tried your suggestion of including the .jar files
> individually in the classpath, but i didn't have any luck:
> 
> [root@localhost ~]# java -cp
> /usr/java/default/lib/lucene-core-2.2.0.jar,/usr/java/default/lib/lucene-demos-2.2.0.jar
> org.apache.lucene.demo.IndexFiles /opt/lucene/src/
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/demo/IndexFiles
> 
> Is there a way to browse or query the included classes to see what's there
> and what's missing?
> 
> 
> Raymond Kroeker-2 wrote:
>> Hi Matt,
>>   You'll want to point the classpath to the lib files and not their
>> containing folder ie:
>>
>> java_dir/lib/core.jar:java_dir/lib/demo.jar
>>
>> Raymond
>>
>> On 9/19/07, warnockm <matt@warnockinc.com> wrote:
>>>
>>> This sounds like a simple problem but i cannot for the life of me figure
>>> it
>>> out.  Am running Fedora 7, JDK 1.6, and Tomcat 6.0 (although not being
>>> used
>>> for this).  I download Lucene and followed the instructions that said to
>>> place the core and demo .jar files in my classpath.  My classpath is set
>>> to
>>> java_dir/ and java_dir/lib.  I placed the .jar files in
>>> java_dir/lib.  Next,
>>> i made sure my JAVA_HOME was set.  I then tried running the example under
>>> the "Get started", which included indexing a folder from the shell.  I
>>> ran
>>> the command:
>>>
>>> java org.apache.lucene.demo.IndexFiles /opt/lucene/src/
>>>
>>> and got the following response:
>>> Exception in thread "main" java.lang.NoClassDefFoundError:
>>> org.apache.lucene.demo.IndexFiles
>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>> Caused by: java.lang.ClassNotFoundException:
>>> org.apache.lucene.demo.IndexFiles not found in
>>> gnu.gcj.runtime.SystemClassLoader{urls=
>>> [file:/usr/java/default/,file:/usr/java/default/lib/],
>>> parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
>>>    at java.net.URLClassLoader.findClass(libgcj.so.8rh)
>>>    at gnu.gcj.runtime.SystemClassLoader.findClass(libgcj.so.8rh)
>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>    at java.lang.ClassLoader.loadClass(libgcj.so.8rh)
>>>    at gnu.java.lang.MainThread.run(libgcj.so.8rh)
>>>
>>> It sounds like it can't find my Lucene class, but even when i manually
>>> point
>>> the classpath to the lib folder, i get the error.
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Lucene-implmentation-question-tf4481645.html#a12779646
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> -- 
>> --------------------------------------------------------------------------------
>> Raymond Kroeker
>> thinkParity Solutions Inc.
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 19:44:59 2007
Return-Path: <java-user-return-30334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99774 invoked from network); 19 Sep 2007 19:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 19:44:58 -0000
Received: (qmail 66110 invoked by uid 500); 19 Sep 2007 19:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66085 invoked by uid 500); 19 Sep 2007 19:44:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66074 invoked by uid 99); 19 Sep 2007 19:44:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 12:44:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 19:44:41 +0000
Received: by nf-out-0910.google.com with SMTP id d3so242003nfc
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 12:44:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IxMK/RVdlSiWh24bNJSs04V/xKAcDAXQf0oO2rvjeKw=;
        b=Q5ORvPMXzlCamWO2hbeY7joQwCqEkOdp0HD+qGjQ5vGxH9/s3RaauTWBuAWSPwcVIw1zBmqxdejMnP34wTN2tDhyjgmv+riRgZ4d5rutiLMV8WXmqn5JkcLrkICSmFSrfKgBIKvnfqIGu1KJZzQAxibumB3Ay4wTLwCk5rq6Hiw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VaLrNYM1uBOdlTjLRSzR3/PN59LJO555Bo5o2qM2tEAxQGoL9x6cCbegzT30o+7SYHymHHBKyg+M5KkpczVsUAONd4seI5d8FNWh6/w2caA+FhaNWoMMN+Gis0puL5dasRmpcD7PSysvpfaWfuUIDq8xPnJ+lZDt3CvE2Ma1Tyg=
Received: by 10.82.189.6 with SMTP id m6mr1594311buf.1190231058618;
        Wed, 19 Sep 2007 12:44:18 -0700 (PDT)
Received: by 10.82.181.1 with HTTP; Wed, 19 Sep 2007 12:44:18 -0700 (PDT)
Message-ID: <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com>
Date: Wed, 19 Sep 2007 15:44:18 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
In-Reply-To: <46F171FB.2080306@ai.sri.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13289_20048454.1190231058610"
References: <46F15AE1.5040400@ai.sri.com>
	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>
	 <46F171FB.2080306@ai.sri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13289_20048454.1190231058610
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ill respond a point at a time:

1.

****************************** Hi Maik,

So what happens in this case:

IndexAccessProvider accessProvider =3D new IndexAccessProvider(directory,

analyzer);

LuceneIndexAccessor accessor =3D new LuceneIndexAccessor(accessProvider);

accessor.open();

IndexWriter writer =3D accessor.getWriter();

// reference to the same instance?

IndexWriter writer2 =3D accessor.getWriter();

writer.addDocument(....);

writer2.addDocument(....);



// I didn't release the writer yet

// will this block?

IndexReader reader =3D accessor.getReader();

reader.delete(....);

************

This is not really an issue. First, if you are going to delete with a Reade=
r
you need to call getWritingReader and not getReader. When you do that, the
getWritingReader call will block until writer and writer2 are released. If
you are just adding a couple docs before releasing the writers, this is no
problem because the block will be very short. If you are loading tons of
docs and you want to be able to delete with a Reader in a timely manner, yo=
u
should release the writers every now and then (release and re-get the Write=
r
every 100 docs or something). An interactive index should not hog the
Writer, while something that is just loading a lot could hog the Writer.
This is no different than normal=85you cannot delete with a Reader while
adding with a Writer with Lucene. This code just enforces those semantics.
The best solution is to just use a Writer to delete =96 I never get a
ReadingWriter.

2. http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34995#c3

This is no big deal either. I just added another getWriter call that takes =
a
create Boolean.

3. I don't think there is a latest release. This has never gotten much
official attention and is not in the sandbox. I worked straight from the
originally submitted code.

4. I will look into getting together some code that I can share. The
multisearcher changes that are need are a couple of one liners really, so a=
t
a minimum I will give you the changes needed.



-       Mark



On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:

Mark,



thanks for sharing your insight and experience about LuceneIndexAccessor!

I remember seeing some people reporting some issues about it, such as:

http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34995#c3



Have those issues been resolved?



Where did you get the latest release? It is not in the official Lucene

sandbox/contrib.



Finally, are you willing to share your extended version to include your

tweak relating to the MultiSearcher?



Thanks a lot!



Jay



Mark Miller wrote:

> I use option 3 extensivley and find it very effective. There is a tweak o=
r

> two required to get it to work right with MultiSearchers, but other than

> that, the code is great. I have built a lot on top of it. I'm on the list

> all the time and would be happy to answer any questions you have in
regards

> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.

>

> - Mark

>

>

> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:

>>

>> In a multithread app like web app, a shared IndexSearcher could throw a

>> AlreadyClosedException when another thread is trying to update the

>> underlying IndexReader by closing the shared searcher after the index is

>> updated. Searching over the past discussions on this mailing list, I

>> found several approaches to solve the problem.

>> 1. use solr

>> 2. use DelayCloseIndexSearcher

>> 3. use LuceneIndexAccessor

>>

>>

>> the first one is not feasible for us; some people seemed to have

>> problems with No. 2 and I do not find a lot of discussions around No.3.

>>

>> I wonder if anyone has good experience on No 2 and 3?

>> Or do I miss other better solutions?

>>

>> Thanks for any suggestion/comment!

>>

>> Jay

>>

>> ---------------------------------------------------------------------

>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

>> For additional commands, e-mail: java-user-help@lucene.apache.org

>>

>>

>



---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

------=_Part_13289_20048454.1190231058610--

From java-user-return-30335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 20:22:45 2007
Return-Path: <java-user-return-30335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9444 invoked from network); 19 Sep 2007 20:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 20:22:45 -0000
Received: (qmail 14318 invoked by uid 500); 19 Sep 2007 20:22:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14294 invoked by uid 500); 19 Sep 2007 20:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14283 invoked by uid 99); 19 Sep 2007 20:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 13:22:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 20:22:27 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8JKM6019541
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 13:22:06 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007091913220527266
 for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 13:22:05 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IY63h-00008f-00
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 13:22:05 -0700
Message-ID: <46F184F0.5000209@ai.sri.com>
Date: Wed, 19 Sep 2007 13:22:08 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com>
In-Reply-To: <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your detailed explanation of the issues and your solutions.
It seems that LuceneIndexAccessor is worth trying first before I 
implement other locking mechanism to ensure proper order.
I will appreciate it very much if you'd like your extension with us.

Jay

Mark Miller wrote:
> Ill respond a point at a time:
> 
> 1.
> 
> ****************************** Hi Maik,
> 
> So what happens in this case:
> 
> IndexAccessProvider accessProvider = new IndexAccessProvider(directory,
> 
> analyzer);
> 
> LuceneIndexAccessor accessor = new LuceneIndexAccessor(accessProvider);
> 
> accessor.open();
> 
> IndexWriter writer = accessor.getWriter();
> 
> // reference to the same instance?
> 
> IndexWriter writer2 = accessor.getWriter();
> 
> writer.addDocument(....);
> 
> writer2.addDocument(....);
> 
> 
> 
> // I didn't release the writer yet
> 
> // will this block?
> 
> IndexReader reader = accessor.getReader();
> 
> reader.delete(....);
> 
> ************
> 
> This is not really an issue. First, if you are going to delete with a Reader
> you need to call getWritingReader and not getReader. When you do that, the
> getWritingReader call will block until writer and writer2 are released. If
> you are just adding a couple docs before releasing the writers, this is no
> problem because the block will be very short. If you are loading tons of
> docs and you want to be able to delete with a Reader in a timely manner, you
> should release the writers every now and then (release and re-get the Writer
> every 100 docs or something). An interactive index should not hog the
> Writer, while something that is just loading a lot could hog the Writer.
> This is no different than normalyou cannot delete with a Reader while
> adding with a Writer with Lucene. This code just enforces those semantics.
> The best solution is to just use a Writer to delete  I never get a
> ReadingWriter.
> 
> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
> 
> This is no big deal either. I just added another getWriter call that takes a
> create Boolean.
> 
> 3. I don't think there is a latest release. This has never gotten much
> official attention and is not in the sandbox. I worked straight from the
> originally submitted code.
> 
> 4. I will look into getting together some code that I can share. The
> multisearcher changes that are need are a couple of one liners really, so at
> a minimum I will give you the changes needed.
> 
> 
> 
> -       Mark
> 
> 
> 
> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
> 
> Mark,
> 
> 
> 
> thanks for sharing your insight and experience about LuceneIndexAccessor!
> 
> I remember seeing some people reporting some issues about it, such as:
> 
> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html
> 
> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
> 
> 
> 
> Have those issues been resolved?
> 
> 
> 
> Where did you get the latest release? It is not in the official Lucene
> 
> sandbox/contrib.
> 
> 
> 
> Finally, are you willing to share your extended version to include your
> 
> tweak relating to the MultiSearcher?
> 
> 
> 
> Thanks a lot!
> 
> 
> 
> Jay
> 
> 
> 
> Mark Miller wrote:
> 
>> I use option 3 extensivley and find it very effective. There is a tweak or
> 
>> two required to get it to work right with MultiSearchers, but other than
> 
>> that, the code is great. I have built a lot on top of it. I'm on the list
> 
>> all the time and would be happy to answer any questions you have in
> regards
> 
>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
> 
> 
>> - Mark
> 
> 
> 
>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
> 
> 
>>> In a multithread app like web app, a shared IndexSearcher could throw a
> 
>>> AlreadyClosedException when another thread is trying to update the
> 
>>> underlying IndexReader by closing the shared searcher after the index is
> 
>>> updated. Searching over the past discussions on this mailing list, I
> 
>>> found several approaches to solve the problem.
> 
>>> 1. use solr
> 
>>> 2. use DelayCloseIndexSearcher
> 
>>> 3. use LuceneIndexAccessor
> 
> 
> 
>>> the first one is not feasible for us; some people seemed to have
> 
>>> problems with No. 2 and I do not find a lot of discussions around No.3.
> 
> 
>>> I wonder if anyone has good experience on No 2 and 3?
> 
>>> Or do I miss other better solutions?
> 
> 
>>> Thanks for any suggestion/comment!
> 
> 
>>> Jay
> 
> 
>>> ---------------------------------------------------------------------
> 
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> 
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> 
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> 
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 19 22:55:21 2007
Return-Path: <java-user-return-30336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48842 invoked from network); 19 Sep 2007 22:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Sep 2007 22:55:20 -0000
Received: (qmail 15151 invoked by uid 500); 19 Sep 2007 22:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14118 invoked by uid 500); 19 Sep 2007 22:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14107 invoked by uid 99); 19 Sep 2007 22:55:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 15:55:05 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 22:55:03 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8JMsh013468
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 15:54:43 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007091915544200743
 for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 15:54:42 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IY8RO-0001E4-00
	for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 15:54:42 -0700
Message-ID: <46F1A8B5.1030401@ai.sri.com>
Date: Wed, 19 Sep 2007 15:54:45 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com>
In-Reply-To: <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

After reading the implementation of LuceneIndexAccessor.getSearcher(),
I realized that the method is synchronized and wait for writingDirector 
to be released. That means if we getSearcher for each query in each 
thread, there might be a contention and performance hit. In fact, even 
the method of release(searcher) is costly. On the other hand, if 
multiple threads share share one searcher then it'd defeat the
purpose of using LuceneIndexAccessor.
Do I miss sth here? What's your suggested use case for 
LuceneIndexAccessor?

Thanks!

Jay
Mark Miller wrote:
> Ill respond a point at a time:
> 
> 1.
> 
> ****************************** Hi Maik,
> 
> So what happens in this case:
> 
> IndexAccessProvider accessProvider = new IndexAccessProvider(directory,
> 
> analyzer);
> 
> LuceneIndexAccessor accessor = new LuceneIndexAccessor(accessProvider);
> 
> accessor.open();
> 
> IndexWriter writer = accessor.getWriter();
> 
> // reference to the same instance?
> 
> IndexWriter writer2 = accessor.getWriter();
> 
> writer.addDocument(....);
> 
> writer2.addDocument(....);
> 
> 
> 
> // I didn't release the writer yet
> 
> // will this block?
> 
> IndexReader reader = accessor.getReader();
> 
> reader.delete(....);
> 
> ************
> 
> This is not really an issue. First, if you are going to delete with a Reader
> you need to call getWritingReader and not getReader. When you do that, the
> getWritingReader call will block until writer and writer2 are released. If
> you are just adding a couple docs before releasing the writers, this is no
> problem because the block will be very short. If you are loading tons of
> docs and you want to be able to delete with a Reader in a timely manner, you
> should release the writers every now and then (release and re-get the Writer
> every 100 docs or something). An interactive index should not hog the
> Writer, while something that is just loading a lot could hog the Writer.
> This is no different than normalyou cannot delete with a Reader while
> adding with a Writer with Lucene. This code just enforces those semantics.
> The best solution is to just use a Writer to delete  I never get a
> ReadingWriter.
> 
> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
> 
> This is no big deal either. I just added another getWriter call that takes a
> create Boolean.
> 
> 3. I don't think there is a latest release. This has never gotten much
> official attention and is not in the sandbox. I worked straight from the
> originally submitted code.
> 
> 4. I will look into getting together some code that I can share. The
> multisearcher changes that are need are a couple of one liners really, so at
> a minimum I will give you the changes needed.
> 
> 
> 
> -       Mark
> 
> 
> 
> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
> 
> Mark,
> 
> 
> 
> thanks for sharing your insight and experience about LuceneIndexAccessor!
> 
> I remember seeing some people reporting some issues about it, such as:
> 
> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html
> 
> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
> 
> 
> 
> Have those issues been resolved?
> 
> 
> 
> Where did you get the latest release? It is not in the official Lucene
> 
> sandbox/contrib.
> 
> 
> 
> Finally, are you willing to share your extended version to include your
> 
> tweak relating to the MultiSearcher?
> 
> 
> 
> Thanks a lot!
> 
> 
> 
> Jay
> 
> 
> 
> Mark Miller wrote:
> 
>> I use option 3 extensivley and find it very effective. There is a tweak or
> 
>> two required to get it to work right with MultiSearchers, but other than
> 
>> that, the code is great. I have built a lot on top of it. I'm on the list
> 
>> all the time and would be happy to answer any questions you have in
> regards
> 
>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
> 
> 
>> - Mark
> 
> 
> 
>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
> 
> 
>>> In a multithread app like web app, a shared IndexSearcher could throw a
> 
>>> AlreadyClosedException when another thread is trying to update the
> 
>>> underlying IndexReader by closing the shared searcher after the index is
> 
>>> updated. Searching over the past discussions on this mailing list, I
> 
>>> found several approaches to solve the problem.
> 
>>> 1. use solr
> 
>>> 2. use DelayCloseIndexSearcher
> 
>>> 3. use LuceneIndexAccessor
> 
> 
> 
>>> the first one is not feasible for us; some people seemed to have
> 
>>> problems with No. 2 and I do not find a lot of discussions around No.3.
> 
> 
>>> I wonder if anyone has good experience on No 2 and 3?
> 
>>> Or do I miss other better solutions?
> 
> 
>>> Thanks for any suggestion/comment!
> 
> 
>>> Jay
> 
> 
>>> ---------------------------------------------------------------------
> 
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> 
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> 
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> 
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 02:19:07 2007
Return-Path: <java-user-return-30337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23358 invoked from network); 20 Sep 2007 02:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 02:19:07 -0000
Received: (qmail 69816 invoked by uid 500); 20 Sep 2007 02:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69531 invoked by uid 500); 20 Sep 2007 02:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69520 invoked by uid 99); 20 Sep 2007 02:18:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 19:18:51 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 02:18:49 +0000
Received: by py-out-1112.google.com with SMTP id d32so1356257pye
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 19:18:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=E2U+zsXMldt4EpxOd1goMUT7mZuABKJv8C2dXM5JCjQ=;
        b=KZzhTmq2v7+fngyIVSHvKuRyH/w0TeMG2Gi7uk8dGiP4szv5iX4zMRJZdji5DH/dJvYv6gWQXFgaI69UQtnZM3HmeSRngu/n2fGshfLs0NweGF8m0N4v7QohgiQ1cOwmeHIbF9f1dsv38Cktt9SB/eeokmoYZPNpJYqVg0Cf3zQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nFHYM06GAJb+EH2rYJ/XSMX4/KIzmVBS4fmYAhKKVxdPZbqYNgAnLkcdXsotdA4Cy9y3pF2zItB9gN1WKvu7NLLGs+2syLbiXGrvZ4dsTwixhxEYCHc4z39VzH2CTXZrGOwmI/1HWamOiUDT1qD8gBXEp3mHKJJMVUfR7KxWaFI=
Received: by 10.65.107.10 with SMTP id j10mr2934151qbm.1190254707670;
        Wed, 19 Sep 2007 19:18:27 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e18sm1035091qbe.2007.09.19.19.18.24
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 19 Sep 2007 19:18:25 -0700 (PDT)
Message-ID: <46F1D862.8000201@gmail.com>
Date: Wed, 19 Sep 2007 22:18:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com>
In-Reply-To: <46F1A8B5.1030401@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

The method is synched, but this is because each thread *does* share the 
same Searcher. To maintain a cache of searchers across multiple threads, 
you've got to sync -- to reference count, you've got to sync. The 
performance hit of LuceneIndexAcessor is pretty minimal for its 
functionality, and frankly, for the functionality you want, you have to 
pay a cost. Thats not even the end of it really...your going to need to 
maintain a cache of Accessor objects for each index as well...and if you 
dont know all the indexes at startup time, access to this will also need 
to be synched. I wouldn't worry though -- searches are still lightening 
fast...that won't be the bottleneck. I'll work on getting you some code, 
but if your worried, try some benchmarking on the original code.

Also, to be clear, I don't have the code in front of me, but getting a 
Searcher does not require waiting for a Writer to be released. Searchers 
are cached and resused (and instantly available) until a Writer is 
released. When this happens, the release Writer method waits for all the 
Searchers to return (happens pretty quick as searches are pretty quick), 
the Searcher cache is cleared, and then subsequent calls to getSearcher 
create new Searchers that can see what the Writer added.

The key is use your Writer/Searcher/Reader quickly and then release it 
(unless your bulk loading). I've had such a system with 5+ million docs 
on a standard machine and searches where still well below a second after 
the first Searcher is cached (and even the first search is darn quick). 
And that includes a lot of extra crap I am doing.

- Mark

Jay Yu wrote:
> Mark,
>
> After reading the implementation of LuceneIndexAccessor.getSearcher(),
> I realized that the method is synchronized and wait for 
> writingDirector to be released. That means if we getSearcher for each 
> query in each thread, there might be a contention and performance hit. 
> In fact, even the method of release(searcher) is costly. On the other 
> hand, if multiple threads share share one searcher then it'd defeat the
> purpose of using LuceneIndexAccessor.
> Do I miss sth here? What's your suggested use case for 
> LuceneIndexAccessor?
>
> Thanks!
>
> Jay
> Mark Miller wrote:
>> Ill respond a point at a time:
>>
>> 1.
>>
>> ****************************** Hi Maik,
>>
>> So what happens in this case:
>>
>> IndexAccessProvider accessProvider = new IndexAccessProvider(directory,
>>
>> analyzer);
>>
>> LuceneIndexAccessor accessor = new LuceneIndexAccessor(accessProvider);
>>
>> accessor.open();
>>
>> IndexWriter writer = accessor.getWriter();
>>
>> // reference to the same instance?
>>
>> IndexWriter writer2 = accessor.getWriter();
>>
>> writer.addDocument(....);
>>
>> writer2.addDocument(....);
>>
>>
>>
>> // I didn't release the writer yet
>>
>> // will this block?
>>
>> IndexReader reader = accessor.getReader();
>>
>> reader.delete(....);
>>
>> ************
>>
>> This is not really an issue. First, if you are going to delete with a 
>> Reader
>> you need to call getWritingReader and not getReader. When you do 
>> that, the
>> getWritingReader call will block until writer and writer2 are 
>> released. If
>> you are just adding a couple docs before releasing the writers, this 
>> is no
>> problem because the block will be very short. If you are loading tons of
>> docs and you want to be able to delete with a Reader in a timely 
>> manner, you
>> should release the writers every now and then (release and re-get the 
>> Writer
>> every 100 docs or something). An interactive index should not hog the
>> Writer, while something that is just loading a lot could hog the Writer.
>> This is no different than normalyou cannot delete with a Reader while
>> adding with a Writer with Lucene. This code just enforces those 
>> semantics.
>> The best solution is to just use a Writer to delete  I never get a
>> ReadingWriter.
>>
>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>
>> This is no big deal either. I just added another getWriter call that 
>> takes a
>> create Boolean.
>>
>> 3. I don't think there is a latest release. This has never gotten much
>> official attention and is not in the sandbox. I worked straight from the
>> originally submitted code.
>>
>> 4. I will look into getting together some code that I can share. The
>> multisearcher changes that are need are a couple of one liners 
>> really, so at
>> a minimum I will give you the changes needed.
>>
>>
>>
>> -       Mark
>>
>>
>>
>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>
>> Mark,
>>
>>
>>
>> thanks for sharing your insight and experience about 
>> LuceneIndexAccessor!
>>
>> I remember seeing some people reporting some issues about it, such as:
>>
>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>
>>
>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>
>>
>>
>> Have those issues been resolved?
>>
>>
>>
>> Where did you get the latest release? It is not in the official Lucene
>>
>> sandbox/contrib.
>>
>>
>>
>> Finally, are you willing to share your extended version to include your
>>
>> tweak relating to the MultiSearcher?
>>
>>
>>
>> Thanks a lot!
>>
>>
>>
>> Jay
>>
>>
>>
>> Mark Miller wrote:
>>
>>> I use option 3 extensivley and find it very effective. There is a 
>>> tweak or
>>
>>> two required to get it to work right with MultiSearchers, but other 
>>> than
>>
>>> that, the code is great. I have built a lot on top of it. I'm on the 
>>> list
>>
>>> all the time and would be happy to answer any questions you have in
>> regards
>>
>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
>>
>>
>>> - Mark
>>
>>
>>
>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>
>>
>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>> throw a
>>
>>>> AlreadyClosedException when another thread is trying to update the
>>
>>>> underlying IndexReader by closing the shared searcher after the 
>>>> index is
>>
>>>> updated. Searching over the past discussions on this mailing list, I
>>
>>>> found several approaches to solve the problem.
>>
>>>> 1. use solr
>>
>>>> 2. use DelayCloseIndexSearcher
>>
>>>> 3. use LuceneIndexAccessor
>>
>>
>>
>>>> the first one is not feasible for us; some people seemed to have
>>
>>>> problems with No. 2 and I do not find a lot of discussions around 
>>>> No.3.
>>
>>
>>>> I wonder if anyone has good experience on No 2 and 3?
>>
>>>> Or do I miss other better solutions?
>>
>>
>>>> Thanks for any suggestion/comment!
>>
>>
>>>> Jay
>>
>>
>>>> ---------------------------------------------------------------------
>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>>
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 05:15:41 2007
Return-Path: <java-user-return-30338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63184 invoked from network); 20 Sep 2007 05:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 05:15:38 -0000
Received: (qmail 2326 invoked by uid 500); 20 Sep 2007 05:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2296 invoked by uid 500); 20 Sep 2007 05:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2285 invoked by uid 99); 20 Sep 2007 05:15:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 22:15:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 05:15:22 +0000
Received: by nz-out-0506.google.com with SMTP id i28so318931nzi
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 22:15:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=c5oi1gzNMTaNQoGmUMWlF3GKL6xn/yPHJn/vxqcRcDg=;
        b=RBa2jq2P4ZaC/Nidn6UuUNiI0q/tLcP+hd6OXwbDXITA+Y8pm7D2El6X+CcSLjH+LsPLr2mCqCfEKf48nceTsNR214jQGqICsZI/POmyjVWkmGVJaMWvfS4hG54D5CKJ7hKXmbpBsz9Aip69CzwLBAeyQcczcpHhGachQB1eOOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SQKe3mnEkSrwybbQPktqi73KZqeOuR7WoYtBBWiqxnB1/8QoLw6GYfe6CZWs8XYchLJUsR36h8NEbLZWoUNMgox1TUAIaFjNhN4C5MKqp4M4mkjyNw058tFAOwziREPppY9oqNl3tm+t3AQgS4Mn11SRe8pa6DAyuVvSUmKpZPo=
Received: by 10.65.183.7 with SMTP id k7mr3200610qbp.1190265300535;
        Wed, 19 Sep 2007 22:15:00 -0700 (PDT)
Received: by 10.65.180.2 with HTTP; Wed, 19 Sep 2007 22:15:00 -0700 (PDT)
Message-ID: <34b8543c0709192215y7a8c6f04o18be1077958791b2@mail.gmail.com>
Date: Thu, 20 Sep 2007 08:45:00 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
In-Reply-To: <200709171750.10679.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26764_19476657.1190265300521"
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
	 <200709171750.10679.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26764_19476657.1190265300521
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Paul,
would you tell me what is the difference between AND and + ?
I tried both but get different result
with AND I get 1777 documents and with + I get nearly 25000 ?


On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > Hi
> > I have a problem in getting correct result from Lucene, consider we have
> an
> > index containing documents with fields "field1" and "field2" etc. now I
> want
> > to have documents in which their field1 are equal one by one and their
> > field2 with two different value
> >
> > to clarify consider I have this query:
> > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
>
> Did you try this:
>
> +field1:val*  +field2:"myValue1" +field2:"myValue2"
>
> Regards,
> Paul Elschot
>
>
> >
> > now I want this result:
> > field1              field2
> > val1                myValue1
> > val1                myValue2
> > val2                myValue1
> > val2                myValue2
> >
> > this result is not acceptable:
> > val3              myValue1
> > or
> > val4             myValue1
> > val4             myValue3
> >
> > I put XOR as operator because this is not a typical OR, it's different,
> it
> > means documents that contains both myValue1 and myValue2 for the field
> > field2
> >
> > how to build a query to get such result?
> >
> > thanks in advance
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> > Sun Certified Java Programmer
> > ExpertsExchange Certified, Master:
> > http://www.experts-exchange.com/M_1938796.html
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_26764_19476657.1190265300521--

From java-user-return-30339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 05:30:13 2007
Return-Path: <java-user-return-30339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69788 invoked from network); 20 Sep 2007 05:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 05:30:12 -0000
Received: (qmail 14984 invoked by uid 500); 20 Sep 2007 05:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14946 invoked by uid 500); 20 Sep 2007 05:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14935 invoked by uid 99); 20 Sep 2007 05:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Sep 2007 22:29:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 05:29:56 +0000
Received: by nz-out-0506.google.com with SMTP id i28so321025nzi
        for <java-user@lucene.apache.org>; Wed, 19 Sep 2007 22:29:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=j8kQRh+M2ovJOEvGMDshTVFyg56OoHWfcrDAnONu8pI=;
        b=fdAXUeQZ2a9uvzzSBPoIlGGRWbsM/niOm3jB7IGtc7nwSEHMOPB+6Yzr9+C/kiBN1HHYoDm0RkNnqXdmhMvf+AVTGu+MgVNIS2OTmg+HgTRgrdjGPo7L+WL1SaCrMJ2Hda1eLLY/fbleeUPupQ6/Zap1ki23MoCSdHRLKYgRiWU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bz4VNuccTEuOop6j0ZAisqwHD1t1r6W4q/TtKusI+Ch36K18mkG6r1VhHgnFFFlGSrM314SjSgVTt6iJm12K0gMWZtYR69hHWAbE078BxfGElwQxcK8IoFygif3znzF30c0YAKYP2dbxKeHQvnUljEnly22ljrJ9vabS96KvAXQ=
Received: by 10.65.203.3 with SMTP id f3mr3223865qbq.1190266175239;
        Wed, 19 Sep 2007 22:29:35 -0700 (PDT)
Received: by 10.65.180.2 with HTTP; Wed, 19 Sep 2007 22:29:35 -0700 (PDT)
Message-ID: <34b8543c0709192229y2c9ef117md0c8a0f6ba09c433@mail.gmail.com>
Date: Thu, 20 Sep 2007 08:59:35 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
In-Reply-To: <34b8543c0709192215y7a8c6f04o18be1077958791b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26833_32680070.1190266175217"
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
	 <200709171750.10679.paul.elschot@xs4all.nl>
	 <34b8543c0709192215y7a8c6f04o18be1077958791b2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26833_32680070.1190266175217
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry Paul I just hurried in replying ;)
I read the documents of Lucene about query syntax and I figured out the what
is the difference
but my problem is different, this is preoccupied my mind and I am under
pressure to solve this problem, after analyzing the results I get, now I
think we need a "group by" in our query.

let me tell you an example: we need a list of patients that have been
examined by certain services specified by the user , say service one and
service two.

in this case here is the correct result:
patient-id              service_name               patient_result
1                             s1                                12
1                             s2                                13
2                             s1                                  41
2                             s2                                22

but for example, following is incorrect because patient 1 has no service
with name service2:
patient-id              service_name               patient_result
1                             s1                                12
1                             s3                                13



On 9/20/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi Paul,
> would you tell me what is the difference between AND and + ?
> I tried both but get different result
> with AND I get 1777 documents and with + I get nearly 25000 ?
>
>
> On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > > Hi
> > > I have a problem in getting correct result from Lucene, consider we
> > have an
> > > index containing documents with fields "field1" and "field2" etc. now
> > I want
> > > to have documents in which their field1 are equal one by one and their
> > > field2 with two different value
> > >
> > > to clarify consider I have this query:
> > > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
> >
> > Did you try this:
> >
> > +field1:val*  +field2:"myValue1" +field2:"myValue2"
> >
> > Regards,
> > Paul Elschot
> >
> >
> > >
> > > now I want this result:
> > > field1              field2
> > > val1                myValue1
> > > val1                myValue2
> > > val2                myValue1
> > > val2                myValue2
> > >
> > > this result is not acceptable:
> > > val3              myValue1
> > > or
> > > val4             myValue1
> > > val4             myValue3
> > >
> > > I put XOR as operator because this is not a typical OR, it's
> > different, it
> > > means documents that contains both myValue1 and myValue2 for the field
> >
> > > field2
> > >
> > > how to build a query to get such result?
> > >
> > > thanks in advance
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > Sun Certified Java Programmer
> > > ExpertsExchange Certified, Master:
> > > http://www.experts-exchange.com/M_1938796.html
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> Sun Certified Java Programmer
> ExpertsExchange Certified, Master: http://www.experts-exchange.com/M_1938796.html
>
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_26833_32680070.1190266175217--

From java-user-return-30340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 07:06:22 2007
Return-Path: <java-user-return-30340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8288 invoked from network); 20 Sep 2007 07:06:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 07:06:21 -0000
Received: (qmail 11476 invoked by uid 500); 20 Sep 2007 07:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11444 invoked by uid 500); 20 Sep 2007 07:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11433 invoked by uid 99); 20 Sep 2007 07:06:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 00:06:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 07:08:04 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id l8K75iPa032446
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:05:44 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
Date: Thu, 20 Sep 2007 09:05:43 +0200
User-Agent: KMail/1.8.2
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com> <34b8543c0709192215y7a8c6f04o18be1077958791b2@mail.gmail.com> <34b8543c0709192229y2c9ef117md0c8a0f6ba09c433@mail.gmail.com>
In-Reply-To: <34b8543c0709192229y2c9ef117md0c8a0f6ba09c433@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709200905.43602.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 20 September 2007 07:29, Mohammad Norouzi wrote:
> Sorry Paul I just hurried in replying ;)
> I read the documents of Lucene about query syntax and I figured out the what
> is the difference
> but my problem is different, this is preoccupied my mind and I am under
> pressure to solve this problem, after analyzing the results I get, now I
> think we need a "group by" in our query.
> 
> let me tell you an example: we need a list of patients that have been
> examined by certain services specified by the user , say service one and
> service two.
> 
> in this case here is the correct result:
> patient-id              service_name               patient_result
> 1                             s1                                12
> 1                             s2                                13
> 2                             s1                                  41
> 2                             s2                                22
> 
> but for example, following is incorrect because patient 1 has no service
> with name service2:
> patient-id              service_name               patient_result
> 1                             s1                                12
> 1                             s3                                13

That depends on what you put in your lucene documents.
You can only get complete lucene documents as query results.
For the above example a patient with all service names
should be indexed in a single lucene doc.

The rows above suggest that the relation between patient and
service forms the relational result. However, for a text search
engine it is usual to denormalize the relational records into
indexed documents, depending on the required output.

Regards,
Paul Elschot



> 
> 
> 
> On 9/20/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hi Paul,
> > would you tell me what is the difference between AND and + ?
> > I tried both but get different result
> > with AND I get 1777 documents and with + I get nearly 25000 ?
> >
> >
> > On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >
> > > On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > > > Hi
> > > > I have a problem in getting correct result from Lucene, consider we
> > > have an
> > > > index containing documents with fields "field1" and "field2" etc. now
> > > I want
> > > > to have documents in which their field1 are equal one by one and their
> > > > field2 with two different value
> > > >
> > > > to clarify consider I have this query:
> > > > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
> > >
> > > Did you try this:
> > >
> > > +field1:val*  +field2:"myValue1" +field2:"myValue2"
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > > >
> > > > now I want this result:
> > > > field1              field2
> > > > val1                myValue1
> > > > val1                myValue2
> > > > val2                myValue1
> > > > val2                myValue2
> > > >
> > > > this result is not acceptable:
> > > > val3              myValue1
> > > > or
> > > > val4             myValue1
> > > > val4             myValue3
> > > >
> > > > I put XOR as operator because this is not a typical OR, it's
> > > different, it
> > > > means documents that contains both myValue1 and myValue2 for the field
> > >
> > > > field2
> > > >
> > > > how to build a query to get such result?
> > > >
> > > > thanks in advance
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > Sun Certified Java Programmer
> > > > ExpertsExchange Certified, Master:
> > > > http://www.experts-exchange.com/M_1938796.html
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> > Sun Certified Java Programmer
> > ExpertsExchange Certified, Master: 
http://www.experts-exchange.com/M_1938796.html
> >
> >
> 
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> Sun Certified Java Programmer
> ExpertsExchange Certified, Master:
> http://www.experts-exchange.com/M_1938796.html
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 07:19:43 2007
Return-Path: <java-user-return-30341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12440 invoked from network); 20 Sep 2007 07:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 07:19:42 -0000
Received: (qmail 31912 invoked by uid 500); 20 Sep 2007 07:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31875 invoked by uid 500); 20 Sep 2007 07:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31864 invoked by uid 99); 20 Sep 2007 07:19:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 00:19:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 07:19:26 +0000
Received: by py-out-1112.google.com with SMTP id d32so1482826pye
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 00:19:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FTYgWga6vjTldCBCiHmusWqXc9xFHProJK0RX+10JE4=;
        b=FyU++3MA1B7i4Jz/T35hZOGMQiMvTk2+pwsWYlfHBTBRq64fzHM6MHVN+Kjhj4p+Irpf/xu2/rX3Ui0pZCr1ffpiNfZomwX9SrMufoUFApho6FfTOLT01QUrvcVvksRvxTEJ0lmeXCz91HJBujESyebTxGyDblCD98QQ8zuoSzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mrzbmckFgZ0D80j9/tADcWBNfyFjs38F77sgtdI4RYFd8Yt5FAPxpgJsXozRDUleCn4i4UupOGf4m+KbLPEnsbiDS+TuTTRDgOlbvucN2inXsXVrrHkNhTVX0MB0El4txQn8qs5G64fFYPP57oNeSUSmPwHFOgBQfXno8WFN9L0=
Received: by 10.65.158.9 with SMTP id k9mr3435295qbo.1190272745388;
        Thu, 20 Sep 2007 00:19:05 -0700 (PDT)
Received: by 10.65.180.2 with HTTP; Thu, 20 Sep 2007 00:19:05 -0700 (PDT)
Message-ID: <34b8543c0709200019l127ae45y9d437f510e4f6c9b@mail.gmail.com>
Date: Thu, 20 Sep 2007 10:49:05 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
In-Reply-To: <200709200905.43602.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27133_4818448.1190272745380"
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
	 <34b8543c0709192215y7a8c6f04o18be1077958791b2@mail.gmail.com>
	 <34b8543c0709192229y2c9ef117md0c8a0f6ba09c433@mail.gmail.com>
	 <200709200905.43602.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27133_4818448.1190272745380
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, you mean we should separate documents just like relational tables in
databases ?
if yes, how to make the relationship between those documents

thank you so much Paul

On 9/20/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Thursday 20 September 2007 07:29, Mohammad Norouzi wrote:
> > Sorry Paul I just hurried in replying ;)
> > I read the documents of Lucene about query syntax and I figured out the
> what
> > is the difference
> > but my problem is different, this is preoccupied my mind and I am under
> > pressure to solve this problem, after analyzing the results I get, now I
> > think we need a "group by" in our query.
> >
> > let me tell you an example: we need a list of patients that have been
> > examined by certain services specified by the user , say service one and
> > service two.
> >
> > in this case here is the correct result:
> > patient-id              service_name               patient_result
> > 1                             s1                                12
> > 1                             s2                                13
> > 2                             s1                                  41
> > 2                             s2                                22
> >
> > but for example, following is incorrect because patient 1 has no service
> > with name service2:
> > patient-id              service_name               patient_result
> > 1                             s1                                12
> > 1                             s3                                13
>
> That depends on what you put in your lucene documents.
> You can only get complete lucene documents as query results.
> For the above example a patient with all service names
> should be indexed in a single lucene doc.
>
> The rows above suggest that the relation between patient and
> service forms the relational result. However, for a text search
> engine it is usual to denormalize the relational records into
> indexed documents, depending on the required output.
>
> Regards,
> Paul Elschot
>
>
>
> >
> >
> >
> > On 9/20/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hi Paul,
> > > would you tell me what is the difference between AND and + ?
> > > I tried both but get different result
> > > with AND I get 1777 documents and with + I get nearly 25000 ?
> > >
> > >
> > > On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > >
> > > > On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > > > > Hi
> > > > > I have a problem in getting correct result from Lucene, consider
> we
> > > > have an
> > > > > index containing documents with fields "field1" and "field2" etc.
> now
> > > > I want
> > > > > to have documents in which their field1 are equal one by one and
> their
> > > > > field2 with two different value
> > > > >
> > > > > to clarify consider I have this query:
> > > > > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
> > > >
> > > > Did you try this:
> > > >
> > > > +field1:val*  +field2:"myValue1" +field2:"myValue2"
> > > >
> > > > Regards,
> > > > Paul Elschot
> > > >
> > > >
> > > > >
> > > > > now I want this result:
> > > > > field1              field2
> > > > > val1                myValue1
> > > > > val1                myValue2
> > > > > val2                myValue1
> > > > > val2                myValue2
> > > > >
> > > > > this result is not acceptable:
> > > > > val3              myValue1
> > > > > or
> > > > > val4             myValue1
> > > > > val4             myValue3
> > > > >
> > > > > I put XOR as operator because this is not a typical OR, it's
> > > > different, it
> > > > > means documents that contains both myValue1 and myValue2 for the
> field
> > > >
> > > > > field2
> > > > >
> > > > > how to build a query to get such result?
> > > > >
> > > > > thanks in advance
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > > --------------------------
> > > > > see my blog: http://brainable.blogspot.com/
> > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > > Sun Certified Java Programmer
> > > > > ExpertsExchange Certified, Master:
> > > > > http://www.experts-exchange.com/M_1938796.html
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > Sun Certified Java Programmer
> > > ExpertsExchange Certified, Master:
> http://www.experts-exchange.com/M_1938796.html
> > >
> > >
> >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> > Sun Certified Java Programmer
> > ExpertsExchange Certified, Master:
> > http://www.experts-exchange.com/M_1938796.html
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_27133_4818448.1190272745380--

From java-user-return-30342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 07:46:44 2007
Return-Path: <java-user-return-30342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25726 invoked from network); 20 Sep 2007 07:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 07:46:43 -0000
Received: (qmail 65871 invoked by uid 500); 20 Sep 2007 07:46:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65840 invoked by uid 500); 20 Sep 2007 07:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65829 invoked by uid 99); 20 Sep 2007 07:46:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 00:46:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 07:46:25 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id l8K7k3e1006510
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:46:03 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
Date: Thu, 20 Sep 2007 09:46:01 +0200
User-Agent: KMail/1.8.2
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com> <200709200905.43602.paul.elschot@xs4all.nl> <34b8543c0709200019l127ae45y9d437f510e4f6c9b@mail.gmail.com>
In-Reply-To: <34b8543c0709200019l127ae45y9d437f510e4f6c9b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709200946.02329.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 20 September 2007 09:19, Mohammad Norouzi wrote:
> well, you mean we should separate documents just like relational tables in
> databases ?

Quite the contrary, it's called _de_normalization. This means that the
documents in lucene normally contain more information than is present
in a single relational entity.

> if yes, how to make the relationship between those documents

Lucene has no facilities to maintain relational relationships among
its documents. A lucene index allows free format documents, i.e.
any document may have any field or not.
In practice you will need at least a primary key, but even that you will
need to program yourself.

Regards,
Paul Elschot



> 
> thank you so much Paul
> 
> On 9/20/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > On Thursday 20 September 2007 07:29, Mohammad Norouzi wrote:
> > > Sorry Paul I just hurried in replying ;)
> > > I read the documents of Lucene about query syntax and I figured out the
> > what
> > > is the difference
> > > but my problem is different, this is preoccupied my mind and I am under
> > > pressure to solve this problem, after analyzing the results I get, now I
> > > think we need a "group by" in our query.
> > >
> > > let me tell you an example: we need a list of patients that have been
> > > examined by certain services specified by the user , say service one and
> > > service two.
> > >
> > > in this case here is the correct result:
> > > patient-id              service_name               patient_result
> > > 1                             s1                                12
> > > 1                             s2                                13
> > > 2                             s1                                  41
> > > 2                             s2                                22
> > >
> > > but for example, following is incorrect because patient 1 has no service
> > > with name service2:
> > > patient-id              service_name               patient_result
> > > 1                             s1                                12
> > > 1                             s3                                13
> >
> > That depends on what you put in your lucene documents.
> > You can only get complete lucene documents as query results.
> > For the above example a patient with all service names
> > should be indexed in a single lucene doc.
> >
> > The rows above suggest that the relation between patient and
> > service forms the relational result. However, for a text search
> > engine it is usual to denormalize the relational records into
> > indexed documents, depending on the required output.
> >
> > Regards,
> > Paul Elschot
> >
> >
> >
> > >
> > >
> > >
> > > On 9/20/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > >
> > > > Hi Paul,
> > > > would you tell me what is the difference between AND and + ?
> > > > I tried both but get different result
> > > > with AND I get 1777 documents and with + I get nearly 25000 ?
> > > >
> > > >
> > > > On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > >
> > > > > On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > > > > > Hi
> > > > > > I have a problem in getting correct result from Lucene, consider
> > we
> > > > > have an
> > > > > > index containing documents with fields "field1" and "field2" etc.
> > now
> > > > > I want
> > > > > > to have documents in which their field1 are equal one by one and
> > their
> > > > > > field2 with two different value
> > > > > >
> > > > > > to clarify consider I have this query:
> > > > > > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
> > > > >
> > > > > Did you try this:
> > > > >
> > > > > +field1:val*  +field2:"myValue1" +field2:"myValue2"
> > > > >
> > > > > Regards,
> > > > > Paul Elschot
> > > > >
> > > > >
> > > > > >
> > > > > > now I want this result:
> > > > > > field1              field2
> > > > > > val1                myValue1
> > > > > > val1                myValue2
> > > > > > val2                myValue1
> > > > > > val2                myValue2
> > > > > >
> > > > > > this result is not acceptable:
> > > > > > val3              myValue1
> > > > > > or
> > > > > > val4             myValue1
> > > > > > val4             myValue3
> > > > > >
> > > > > > I put XOR as operator because this is not a typical OR, it's
> > > > > different, it
> > > > > > means documents that contains both myValue1 and myValue2 for the
> > field
> > > > >
> > > > > > field2
> > > > > >
> > > > > > how to build a query to get such result?
> > > > > >
> > > > > > thanks in advance
> > > > > > --
> > > > > > Regards,
> > > > > > Mohammad
> > > > > > --------------------------
> > > > > > see my blog: http://brainable.blogspot.com/
> > > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > > > Sun Certified Java Programmer
> > > > > > ExpertsExchange Certified, Master:
> > > > > > http://www.experts-exchange.com/M_1938796.html
> > > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > Sun Certified Java Programmer
> > > > ExpertsExchange Certified, Master:
> > http://www.experts-exchange.com/M_1938796.html
> > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > Sun Certified Java Programmer
> > > ExpertsExchange Certified, Master:
> > > http://www.experts-exchange.com/M_1938796.html
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> Sun Certified Java Programmer
> ExpertsExchange Certified, Master:
> http://www.experts-exchange.com/M_1938796.html
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 07:51:10 2007
Return-Path: <java-user-return-30343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26867 invoked from network); 20 Sep 2007 07:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 07:51:06 -0000
Received: (qmail 71462 invoked by uid 500); 20 Sep 2007 07:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71429 invoked by uid 500); 20 Sep 2007 07:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71418 invoked by uid 99); 20 Sep 2007 07:50:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 00:50:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.134] (HELO web30701.mail.mud.yahoo.com) (68.142.200.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Sep 2007 07:50:51 +0000
Received: (qmail 14716 invoked by uid 60001); 20 Sep 2007 07:50:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=sBQZnm6A+qojPt/Au5WylJiLc7olDUSZibUhj9GY4AJBK4+sCPkDtLOIrA6AOiHNbuJAdkGXi4ED8vqbhyuglofqpFvWMoKdVwCJZZHikDWo4ICfv8SmRtganrr95d/jVktlBBSqXlLX+34h9aT5WPjlf/doqS4Ms/2qzgb9VJw=;
X-YMail-OSG: XKhUmW0VM1mV8r8AAIdLlWKEKkexokCieUh5WltcM072DON5.bBfq5d9qiRomLSwBrv_4uHFmw--
Received: from [209.191.106.123] by web30701.mail.mud.yahoo.com via HTTP; Thu, 20 Sep 2007 00:50:27 PDT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Thu, 20 Sep 2007 00:50:27 -0700 (PDT)
From: Nikhil Chhaochharia <nikhil500@yahoo.com>
Subject: Multiple Indices vs Single Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <816591.13659.qm@web30701.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI have about 40 indices which range in size from 10MB to 700MB.  T=
here are quite a few stored fields.  To get an idea of the document size, I=
 have about 400k documents in the 700MB index.=0A=0ADepending on the query,=
 I choose the index which needs to be searched.  Each query hits only one i=
ndex.  I was wondering if creating a single index where every document will=
 have the indexname as a field will be more efficient.  I created such an i=
ndex and it was 3.4 GB in size.  My initial performance tests with it are n=
ot conclusive.=0A=0AAlso, what are the other points to be addressed while d=
eciding between 1 index and 40 indices.=0A=0AI have 8GB RAM on the machine.=
=0A=0A=0AThanks,=0ANikhil=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 10:03:51 2007
Return-Path: <java-user-return-30344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70460 invoked from network); 20 Sep 2007 10:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 10:03:51 -0000
Received: (qmail 46989 invoked by uid 500); 20 Sep 2007 10:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46535 invoked by uid 500); 20 Sep 2007 10:03:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46524 invoked by uid 99); 20 Sep 2007 10:03:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 03:03:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 10:03:34 +0000
Received: by ug-out-1314.google.com with SMTP id a2so377313ugf
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 03:03:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole:thread-index:message-id;
        bh=lT8NU1ymC3uSNiSsSAJ9ufDwseYJksMuvt5UJTMJ4MU=;
        b=A0h86CSWmUJkrVE8YEVysNsalklrm35JgBlkjHAH7JgvtQP3jqOK4KqTCud11Qvqi+s4GIz0u4Qd15oM+orqjVrnIPLuVaB/G5/CmkLNN9UBMa3Ip6lsdGtMY8KVYWQNg376wGXN+aLYbsfwE9x2qE7KpDNmB0zBJ8MYM9Y1+ZA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole:thread-index:message-id;
        b=LM5UDfTjDvykoh3/qym4Uh4GmVkxBsj4l8MvBXZSYK1SfdQcyt4B2XGPUIv+NrfIFuyz3JM1yyqh6qDXkN+ymv6RgD/Thw/YTDVH74uUU9aoX6nTlR0RTUcHIZP5J4qkjFn0pd+Jj2CZmC6+lOl09vXphdKxc7zwKyYGGIG7WtM=
Received: by 10.78.146.11 with SMTP id t11mr998851hud.1190282592123;
        Thu, 20 Sep 2007 03:03:12 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [62.249.212.129])
        by mx.google.com with ESMTPS id f7sm7807532nfh.2007.09.20.03.03.06
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Sep 2007 03:03:07 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Lucene multiple indexes
Date: Thu, 20 Sep 2007 11:02:51 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003E_01C7FB75.CA9FBC80"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Acf7bWWdvtISdGgYQEC5SOKHzRSsiQ==
Message-ID: <46f2455b.07e9300a.0d7d.ffffbcdb@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003E_01C7FB75.CA9FBC80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi People,

=20

I was trying to get lucene to work for a mail indexing solution.

=20

Scenario:

Traffic into the index method is on average 250 mails and their =
attachments
per minute. This volume has made me think of a solution that will split =
the
index on domain names of the owner of the message. So if I have say 100
users from 50 domains, I have 50 indexes. Now in the query method for my
program, I have to load the indexes according to the user who is logged =
on.=20

=20

Is it a good Idea to cache the Searcher objects once they are created? =
Or is
there a better approach to what I am trying to achieve?

=20

Many thanks

=20

d i n o    k o r a h
Tel: +44 795 66 65 283
--------------------------------
51=B021'52"N  0=B05' 14.16"

=20


------=_NextPart_000_003E_01C7FB75.CA9FBC80--


From java-user-return-30345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 13:55:54 2007
Return-Path: <java-user-return-30345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76351 invoked from network); 20 Sep 2007 13:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 13:55:53 -0000
Received: (qmail 41372 invoked by uid 500); 20 Sep 2007 13:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41308 invoked by uid 500); 20 Sep 2007 13:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41277 invoked by uid 99); 20 Sep 2007 13:55:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 06:55:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 13:55:31 +0000
Received: by wr-out-0506.google.com with SMTP id c55so198467wra
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 06:55:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=XeHYEc5ppWu0FTxyurBWjoShuv+3RIM0eIr5x8jDT+Y=;
        b=abr7hMdc1fCVpS5k4iVjTn5VZuUAbPbGoeAXmDYmly4f8oHvandYshuk9BUMlSFMgtgJxBjkPZ5qc9xUeQ8nNVjD/F2KAlzQIH7hsNOVjfk1ck0p2GvwJuysXankvZLlu0H7AY2xNupK/DiZooS1W5Am7+TGVCNlcXNVSRUskT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=c20e68n2+ktcyDXP9IMWIOHKYkpk9Hvz9gbDL69+m/XAl75R+oOjx/XBu05EpNvGHW1ZLXw5NiUssoNPRknAvPoUewWfMBEtxgfrvMggYn5grPMTpD7fPF97fM8z70FhkrFylW+ooXHtSlTmwDUROB+TGMwKTCw3vdPf/oJC2Ko=
Received: by 10.142.156.2 with SMTP id d2mr107862wfe.1190296509203;
        Thu, 20 Sep 2007 06:55:09 -0700 (PDT)
Received: by 10.141.146.17 with HTTP; Thu, 20 Sep 2007 06:55:09 -0700 (PDT)
Message-ID: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com>
Date: Thu, 20 Sep 2007 19:25:09 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Question regarding proximity search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9281_2226631.1190296509181"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9281_2226631.1190296509181
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I have a doubt on proximity search.
Is the query "cat dog"~6 same as (cat dog)~6 ?
I think both case will search for "cat" and "dog" within 6 words each other.
But I am getting different number of results for the above queries. The
second one may be the higher. Please clarify this.

Thanks,
Sonu

------=_Part_9281_2226631.1190296509181--

From java-user-return-30346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 14:11:29 2007
Return-Path: <java-user-return-30346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82981 invoked from network); 20 Sep 2007 14:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 14:11:27 -0000
Received: (qmail 72153 invoked by uid 500); 20 Sep 2007 14:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71930 invoked by uid 500); 20 Sep 2007 14:11:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71919 invoked by uid 99); 20 Sep 2007 14:11:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 07:11:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 14:11:09 +0000
Received: by rv-out-0910.google.com with SMTP id k20so440487rvb
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 07:10:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=KkgBrTfZdxVZER9CAAddJJu5OeEuO/6wFa0bDA3QcjQ=;
        b=T6wxolp/g4Vs3b7+uC9HA30OL1pCwRRLzfqF0/MLt23YVS1BgATUrxPSYZKKttBECkp3FnNKeKvMojIru8wTl41r09eftnQzAWZCATHO1/uzMPGZFPDoE5unVHvMQIVcaR1FoIfaiDh/dNhIJ2C5iMnZIVcbpaQJ9sdZCkKHENo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cA4k17AV3M96GKykzkqyFntxEUTYrw90Z1Mj66xvrURRDEhg0iHMA0l7thWZc+Je85XwhZrf7odNhj+Ze0AvfxhURrIVn3SSh3MTZ3/Wb2ZGhA449nDmEV1mBGqqN//m7MpxDkK/r5gKJLwNBQ/SMC7989lg/zbRd2btmbanDvA=
Received: by 10.141.142.15 with SMTP id u15mr489549rvn.1190297448111;
        Thu, 20 Sep 2007 07:10:48 -0700 (PDT)
Received: by 10.141.32.1 with HTTP; Thu, 20 Sep 2007 07:10:48 -0700 (PDT)
Message-ID: <126142c0709200710k1e9b98fey8fa545cf6232b7ab@mail.gmail.com>
Date: Thu, 20 Sep 2007 11:10:48 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle-Lucene integration (OJVMDirectory and Lucene Domain Index) - LONG
In-Reply-To: <6e3ae6310709140724xbf813eat4d4e26b13c97970e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e6537db80709131527q4261b508p636b8446a98201fb@mail.gmail.com>
	 <126142c0709140656k52001745re4011468a4d89602@mail.gmail.com>
	 <6e3ae6310709140724xbf813eat4d4e26b13c97970e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris:
  First sorry for the delay :(
  I have some preliminary performance test using Oracle 11g running on
in a VMWare virtual Machine with 400Mb SGA (Virtual Machine using
812Mb RAM for Oracle Enterprise Linux 4.0). This virtual machine is
hosted in a modest hardware, a Pentium IV 2.18Ghz with 2Gb RAM linux
Mandriva 2007.
  Here some result:
  Indexing all_source system view took 23 minutes, all_source view
have 220731 rows with 50Mb of data, sure this text is not free text
because many rows have wrapped code with hexadecimal numbers. Here the
table and the index:
SQL> desc test_source_big
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 OWNER                                              VARCHAR2(30)
 NAME                                               VARCHAR2(30)
 TYPE                                               VARCHAR2(12)
 LINE                                               NUMBER
 TEXT                                               VARCHAR2(4000)
SQL> create index source_big_lidx on test_source_big(text)
indextype is lucene.LuceneIndex
parameters('Stemmer:English;MaxBufferedDocs:5000;DecimalFormat:0000;ExtraCols:line');

Index created.

Elapsed: 00:23:02.74
   Index storage (45Mb, 220K Lucene docs) is:
 FILE_SIZE NAME
---------- ------------------------------
         9 parameters
         2 updateCount
        20 segments.gen
  45941031 _1d.cfs
        42 segments_2t

   A query like this:

select /*+ FIRST_ROWS(10) */ lscore(1) from test_source_big where
lcontains(text,'"procedure java"~10',1)>0 order by lscore(1) desc;

   It took 11ms, and will be faster if you don't need lscore(1) value,
here other example:

select /*+ FIRST_ROWS(10) DOMAIN_INDEX_SORT */ lscore(1) from
test_source_big where lcontains(text,'(optimize OR sync) AND "LANGUAGE
JAVA"',1)>0 order by lscore(1) asc;

  It took 7ms.

  But there are other benefits related to the Domain Index
implementation using Data Cartridge API:
  - Any modification on the table is notified to Lucene automatically,
you can apply this modification on line or deferred, except for
deletion that are always synced.
  - The execution plan is calculated by the optimizer using the domain
index, and with latest additions (User Data Store) you can reduce with
Lucene how many rows the database will process using multiples column
at lcontains operator.
   For example this query use Lucene to search a free text at TEXT
column and Oracle's filter reduction at LINE column:

SQL> select count(text) from test_source_big where
lcontains(text,'function')>0 and line>=6000;

COUNT(TEXT)
-----------
          2

Elapsed: 00:00:00.74
PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 2350958379

------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name            | Rows  | Bytes
| Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |                 |     1 |  2027
|  2968   (1)| 00:00:36 |
|   1 |  SORT AGGREGATE              |                 |     1 |  2027
|            |          |
|*  2 |   TABLE ACCESS BY INDEX ROWID| TEST_SOURCE_BIG |     7 | 14189
|  2968   (1)| 00:00:36 |
|*  3 |    DOMAIN INDEX              | SOURCE_BIG_LIDX |       |
|            |          |
------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("LINE">=6000)
   3 - access("LUCENE"."LCONTAINS"("TEXT",'function')>0)

   But if you use Lucene to reduce the number of rows visited by
Oracle by using User Data Store to index LINE column too, you can
perform a query like this:

SQL> select count(text) from test_source_big where
lcontains(text,'function AND line:[6000 TO 7000]')>0;

COUNT(TEXT)
-----------
          2

Elapsed: 00:00:00.05
PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 2350958379

------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name            | Rows  | Bytes
| Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |                 |     1 |  2014
|  2968   (1)| 00:00:36 |
|   1 |  SORT AGGREGATE              |                 |     1 |  2014
|            |          |
|   2 |   TABLE ACCESS BY INDEX ROWID| TEST_SOURCE_BIG | 11587 |
22M|  2968   (1)| 00:00:36 |
|*  3 |    DOMAIN INDEX              | SOURCE_BIG_LIDX |       |
|            |          |
------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - access("LUCENE"."LCONTAINS"("TEXT",'function AND line:[6000 TO 7000]')>0)

   Note different execution plan used in both queries.
   The trick here is that, if you minimize the number of rowids
returned by lcontains() operator by reducing it with more Lucene
filters the query will be faster.
   Also, I had executed all Lucene JUnit Test suites inside the Oracle
JVM and have similar execution time compared to run it outside the
database with a JDK 1.5.
   Sure, Lucene Index using a File System Store is faster than
OJVMDirectory implementation, but with OJVMDirectory you have another
benefits inherit from BLOB storage, transaction isolation, no network
round trip during indexing time, among others.
   Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 14:28:04 2007
Return-Path: <java-user-return-30347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92591 invoked from network); 20 Sep 2007 14:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 14:28:03 -0000
Received: (qmail 5501 invoked by uid 500); 20 Sep 2007 14:27:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5470 invoked by uid 500); 20 Sep 2007 14:27:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5459 invoked by uid 99); 20 Sep 2007 14:27:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 07:27:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 14:29:46 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 6A58A7CEEE
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 07:27:22 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <816591.13659.qm@web30701.mail.mud.yahoo.com>
References: <816591.13659.qm@web30701.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0833EE8E-8C85-47AC-825B-035251133BF2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Multiple Indices vs Single Index
Date: Thu, 20 Sep 2007 10:27:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If I understand correctly, you want to do a two stage retrieval  
right?  That is, look up in the initial index (3.4 GB) and then do a  
second search on the sub index?  Presumably, you have to manage the  
Searchers, etc. for each of the sub-indexes as well as the big  
index.  This means you have to go through the hits from the first  
search, then route, etc. correct?

Have you tried creating one single index with all the (stored)  
fields, etc?  Worst case scenario, assuming 1GB per index, is you  
would have a 40GB index, but my guess is index compression will  
reduce it more.  Since you are less than that anyway, have you tried  
just the straightforward solution?  Or do you have other requirements  
that force the sub-index solution?  Also, I am not sure it will work,  
but it seems worth a try.  Of course, this also depends on how much  
you expect your indexes to grow.

Also, what was inconclusive about your tests?  Maybe you can describe  
more what you have tried to date?

Cheers,
Grant

On Sep 20, 2007, at 3:50 AM, Nikhil Chhaochharia wrote:

> Hi,
>
> I have about 40 indices which range in size from 10MB to 700MB.   
> There are quite a few stored fields.  To get an idea of the  
> document size, I have about 400k documents in the 700MB index.
>
> Depending on the query, I choose the index which needs to be  
> searched.  Each query hits only one index.  I was wondering if  
> creating a single index where every document will have the  
> indexname as a field will be more efficient.  I created such an  
> index and it was 3.4 GB in size.  My initial performance tests with  
> it are not conclusive.
>
> Also, what are the other points to be addressed while deciding  
> between 1 index and 40 indices.
>
> I have 8GB RAM on the machine.
>
>
> Thanks,
> Nikhil
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 15:17:41 2007
Return-Path: <java-user-return-30348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36925 invoked from network); 20 Sep 2007 15:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 15:17:40 -0000
Received: (qmail 18128 invoked by uid 500); 20 Sep 2007 15:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18101 invoked by uid 500); 20 Sep 2007 15:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18090 invoked by uid 99); 20 Sep 2007 15:17:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 08:17:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.200.135] (HELO web30702.mail.mud.yahoo.com) (68.142.200.135)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Sep 2007 15:19:22 +0000
Received: (qmail 60614 invoked by uid 60001); 20 Sep 2007 15:16:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=OwDVrcRNi0Q8D81gfdoC1ifon0JzsIXzyb+fyiYjZKJkrWXwj1fPL8+vhdAQEBSRNNEc8wzVvNPwULmfEp/IPl3tcPs0y0xplYFEsSugLzlVgJt9RCR4ErB0eIPknXXFYolAX4hc/hRigUfPpvOH0ZxCH4Ejr1Zb0h8itA83fG4=;
X-YMail-OSG: vwozSvUVM1kYwWSOCmFeN4Sw_wr6Y.RP2neC6HgSfI0Xsu8tn6IHgWdy90Zlset9o_z3ZrHJj2Pv39RRo_Rdeqs07fXI.xM1W6OVdr30e3xkCTwklaU-
Received: from [209.191.118.121] by web30702.mail.mud.yahoo.com via HTTP; Thu, 20 Sep 2007 08:16:58 PDT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Thu, 20 Sep 2007 08:16:58 -0700 (PDT)
From: Nikhil Chhaochharia <nikhil500@yahoo.com>
Subject: Re: Multiple Indices vs Single Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <103686.46633.qm@web30702.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am sorry, it seems that I was not clear with what my problem is.  I will =
try to describe it again.=0A=0AMy data is divided into 40 categories and at=
 one time only one category can be searched.  The GUI for the system will a=
sk the user to select the category from a drop-down.  Currently, I have a s=
eparate index for every category.  The index sizes varies - one category in=
dex is 10MB and another is 700MB.  Other index-sizes are somewhere in betwe=
en.=0A=0AI was wondering if it will be better to just have 1 large index wi=
th all the 40 indices combined.  I do not need to do dual-queries and my to=
tal index size (if I create a single index) is about 3.4GB.  It will increa=
se to maximum of 5-6 GB.  I am running this on a dedicated machine with 8GB=
 RAM.=0A=0AUnfortunately I do not have enough hardware to run both in paral=
lel and test properly.  Have just one server which is being used by live us=
ers.  So it would be great if you could tell me whether I should stick with=
 my 40 indices or combine them into 1 index.  What are the pros and cons of=
 each approach ?=0A=0AThanks,=0ANikhil=0A=0A=0A----- Original Message ----=
=0AFrom: Grant Ingersoll <gsingers@apache.org>=0ATo: java-user@lucene.apach=
e.org=0ASent: Thursday, 20 September, 2007 7:57:21 PM=0ASubject: Re: Multip=
le Indices vs Single Index=0A=0AIf I understand correctly, you want to do a=
 two stage retrieval  =0Aright?  That is, look up in the initial index (3.4=
 GB) and then do a  =0Asecond search on the sub index?  Presumably, you hav=
e to manage the  =0ASearchers, etc. for each of the sub-indexes as well as =
the big  =0Aindex.  This means you have to go through the hits from the fir=
st  =0Asearch, then route, etc. correct?=0A=0AHave you tried creating one s=
ingle index with all the (stored)  =0Afields, etc?  Worst case scenario, as=
suming 1GB per index, is you  =0Awould have a 40GB index, but my guess is i=
ndex compression will  =0Areduce it more.  Since you are less than that any=
way, have you tried  =0Ajust the straightforward solution?  Or do you have =
other requirements  =0Athat force the sub-index solution?  Also, I am not s=
ure it will work,  =0Abut it seems worth a try.  Of course, this also depen=
ds on how much  =0Ayou expect your indexes to grow.=0A=0AAlso, what was inc=
onclusive about your tests?  Maybe you can describe  =0Amore what you have =
tried to date?=0A=0ACheers,=0AGrant=0A=0AOn Sep 20, 2007, at 3:50 AM, Nikhi=
l Chhaochharia wrote:=0A=0A> Hi,=0A>=0A> I have about 40 indices which rang=
e in size from 10MB to 700MB.   =0A> There are quite a few stored fields.  =
To get an idea of the  =0A> document size, I have about 400k documents in t=
he 700MB index.=0A>=0A> Depending on the query, I choose the index which ne=
eds to be  =0A> searched.  Each query hits only one index.  I was wondering=
 if  =0A> creating a single index where every document will have the  =0A> =
indexname as a field will be more efficient.  I created such an  =0A> index=
 and it was 3.4 GB in size.  My initial performance tests with  =0A> it are=
 not conclusive.=0A>=0A> Also, what are the other points to be addressed wh=
ile deciding  =0A> between 1 index and 40 indices.=0A>=0A> I have 8GB RAM o=
n the machine.=0A>=0A>=0A> Thanks,=0A> Nikhil=0A>=0A>=0A>=0A> -------------=
--------------------------------------------------------=0A> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A>=0A=0A---------------------=
-----=0AGrant Ingersoll=0Ahttp://lucene.grantingersoll.com=0A=0ALucene Help=
ful Hints:=0Ahttp://wiki.apache.org/lucene-java/BasicsOfPerformance=0Ahttp:=
//wiki.apache.org/lucene-java/LuceneFAQ=0A=0A=0A=0A------------------------=
---------------------------------------------=0ATo unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: jav=
a-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 15:46:15 2007
Return-Path: <java-user-return-30349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88646 invoked from network); 20 Sep 2007 15:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 15:46:13 -0000
Received: (qmail 94274 invoked by uid 500); 20 Sep 2007 15:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94244 invoked by uid 500); 20 Sep 2007 15:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94224 invoked by uid 99); 20 Sep 2007 15:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 08:45:55 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:45:53 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8KFjW023104
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 08:45:32 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092008453209873
 for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 08:45:32 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IYODc-0007ot-00
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 08:45:32 -0700
Message-ID: <46F2959D.9040403@ai.sri.com>
Date: Thu, 20 Sep 2007 08:45:33 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com>
In-Reply-To: <46F1D862.8000201@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

Thanks for sharing your valuable exp. and thoughts.
Frankly our system already has most of the functionalities 
LuceneIndexAcessor offers. The only thing I am looking for is to sync 
the searchers' close. That's why I am little worried about the way 
accessor handles the searcher sync.
I will probably give it a try to see how it performs in our system.

Thanks!

Jay

Mark Miller wrote:
> The method is synched, but this is because each thread *does* share the 
> same Searcher. To maintain a cache of searchers across multiple threads, 
> you've got to sync -- to reference count, you've got to sync. The 
> performance hit of LuceneIndexAcessor is pretty minimal for its 
> functionality, and frankly, for the functionality you want, you have to 
> pay a cost. Thats not even the end of it really...your going to need to 
> maintain a cache of Accessor objects for each index as well...and if you 
> dont know all the indexes at startup time, access to this will also need 
> to be synched. I wouldn't worry though -- searches are still lightening 
> fast...that won't be the bottleneck. I'll work on getting you some code, 
> but if your worried, try some benchmarking on the original code.
> 
> Also, to be clear, I don't have the code in front of me, but getting a 
> Searcher does not require waiting for a Writer to be released. Searchers 
> are cached and resused (and instantly available) until a Writer is 
> released. When this happens, the release Writer method waits for all the 
> Searchers to return (happens pretty quick as searches are pretty quick), 
> the Searcher cache is cleared, and then subsequent calls to getSearcher 
> create new Searchers that can see what the Writer added.
> 
> The key is use your Writer/Searcher/Reader quickly and then release it 
> (unless your bulk loading). I've had such a system with 5+ million docs 
> on a standard machine and searches where still well below a second after 
> the first Searcher is cached (and even the first search is darn quick). 
> And that includes a lot of extra crap I am doing.
> 
> - Mark
> 
> Jay Yu wrote:
>> Mark,
>>
>> After reading the implementation of LuceneIndexAccessor.getSearcher(),
>> I realized that the method is synchronized and wait for 
>> writingDirector to be released. That means if we getSearcher for each 
>> query in each thread, there might be a contention and performance hit. 
>> In fact, even the method of release(searcher) is costly. On the other 
>> hand, if multiple threads share share one searcher then it'd defeat the
>> purpose of using LuceneIndexAccessor.
>> Do I miss sth here? What's your suggested use case for 
>> LuceneIndexAccessor?
>>
>> Thanks!
>>
>> Jay
>> Mark Miller wrote:
>>> Ill respond a point at a time:
>>>
>>> 1.
>>>
>>> ****************************** Hi Maik,
>>>
>>> So what happens in this case:
>>>
>>> IndexAccessProvider accessProvider = new IndexAccessProvider(directory,
>>>
>>> analyzer);
>>>
>>> LuceneIndexAccessor accessor = new LuceneIndexAccessor(accessProvider);
>>>
>>> accessor.open();
>>>
>>> IndexWriter writer = accessor.getWriter();
>>>
>>> // reference to the same instance?
>>>
>>> IndexWriter writer2 = accessor.getWriter();
>>>
>>> writer.addDocument(....);
>>>
>>> writer2.addDocument(....);
>>>
>>>
>>>
>>> // I didn't release the writer yet
>>>
>>> // will this block?
>>>
>>> IndexReader reader = accessor.getReader();
>>>
>>> reader.delete(....);
>>>
>>> ************
>>>
>>> This is not really an issue. First, if you are going to delete with a 
>>> Reader
>>> you need to call getWritingReader and not getReader. When you do 
>>> that, the
>>> getWritingReader call will block until writer and writer2 are 
>>> released. If
>>> you are just adding a couple docs before releasing the writers, this 
>>> is no
>>> problem because the block will be very short. If you are loading tons of
>>> docs and you want to be able to delete with a Reader in a timely 
>>> manner, you
>>> should release the writers every now and then (release and re-get the 
>>> Writer
>>> every 100 docs or something). An interactive index should not hog the
>>> Writer, while something that is just loading a lot could hog the Writer.
>>> This is no different than normalyou cannot delete with a Reader while
>>> adding with a Writer with Lucene. This code just enforces those 
>>> semantics.
>>> The best solution is to just use a Writer to delete  I never get a
>>> ReadingWriter.
>>>
>>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>
>>> This is no big deal either. I just added another getWriter call that 
>>> takes a
>>> create Boolean.
>>>
>>> 3. I don't think there is a latest release. This has never gotten much
>>> official attention and is not in the sandbox. I worked straight from the
>>> originally submitted code.
>>>
>>> 4. I will look into getting together some code that I can share. The
>>> multisearcher changes that are need are a couple of one liners 
>>> really, so at
>>> a minimum I will give you the changes needed.
>>>
>>>
>>>
>>> -       Mark
>>>
>>>
>>>
>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>
>>> Mark,
>>>
>>>
>>>
>>> thanks for sharing your insight and experience about 
>>> LuceneIndexAccessor!
>>>
>>> I remember seeing some people reporting some issues about it, such as:
>>>
>>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>>
>>>
>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>
>>>
>>>
>>> Have those issues been resolved?
>>>
>>>
>>>
>>> Where did you get the latest release? It is not in the official Lucene
>>>
>>> sandbox/contrib.
>>>
>>>
>>>
>>> Finally, are you willing to share your extended version to include your
>>>
>>> tweak relating to the MultiSearcher?
>>>
>>>
>>>
>>> Thanks a lot!
>>>
>>>
>>>
>>> Jay
>>>
>>>
>>>
>>> Mark Miller wrote:
>>>
>>>> I use option 3 extensivley and find it very effective. There is a 
>>>> tweak or
>>>
>>>> two required to get it to work right with MultiSearchers, but other 
>>>> than
>>>
>>>> that, the code is great. I have built a lot on top of it. I'm on the 
>>>> list
>>>
>>>> all the time and would be happy to answer any questions you have in
>>> regards
>>>
>>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
>>>
>>>
>>>> - Mark
>>>
>>>
>>>
>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>
>>>
>>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>>> throw a
>>>
>>>>> AlreadyClosedException when another thread is trying to update the
>>>
>>>>> underlying IndexReader by closing the shared searcher after the 
>>>>> index is
>>>
>>>>> updated. Searching over the past discussions on this mailing list, I
>>>
>>>>> found several approaches to solve the problem.
>>>
>>>>> 1. use solr
>>>
>>>>> 2. use DelayCloseIndexSearcher
>>>
>>>>> 3. use LuceneIndexAccessor
>>>
>>>
>>>
>>>>> the first one is not feasible for us; some people seemed to have
>>>
>>>>> problems with No. 2 and I do not find a lot of discussions around 
>>>>> No.3.
>>>
>>>
>>>>> I wonder if anyone has good experience on No 2 and 3?
>>>
>>>>> Or do I miss other better solutions?
>>>
>>>
>>>>> Thanks for any suggestion/comment!
>>>
>>>
>>>>> Jay
>>>
>>>
>>>>> ---------------------------------------------------------------------
>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>>
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 15:55:46 2007
Return-Path: <java-user-return-30350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3733 invoked from network); 20 Sep 2007 15:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 15:55:45 -0000
Received: (qmail 13709 invoked by uid 500); 20 Sep 2007 15:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13675 invoked by uid 500); 20 Sep 2007 15:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13664 invoked by uid 99); 20 Sep 2007 15:55:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 08:55:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:57:27 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 2AE53B867C
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 08:55:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <103686.46633.qm@web30702.mail.mud.yahoo.com>
References: <103686.46633.qm@web30702.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B41C33EF-9F0F-4526-95DE-C0590117D5B5@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Multiple Indices vs Single Index
Date: Thu, 20 Sep 2007 11:55:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

OK, I thought you meant your index would have in it the name of the  
second index and would thus do a two-stage retrieval.

At any rate, if you are saying your combined index with all the  
stored fields is ~3.4 GB I would think it would fit reasonably on the  
machine you have and perform reasonably.  Naturally, this depends on  
your application, your users, etc. and I can't make any guarantees,  
but I certainly recall others managing this size just fine.  See the  
many tips on improving searching and indexing on the Wiki (link at  
bottom in my signature) and do some profiling/testing.

When you said your tests were inconclusive, what tests have you  
done?  If you can, run the tests in a profiler to see where your  
bottlenecks are.

-Grant


On Sep 20, 2007, at 11:16 AM, Nikhil Chhaochharia wrote:

> I am sorry, it seems that I was not clear with what my problem is.   
> I will try to describe it again.
>
> My data is divided into 40 categories and at one time only one  
> category can be searched.  The GUI for the system will ask the user  
> to select the category from a drop-down.  Currently, I have a  
> separate index for every category.  The index sizes varies - one  
> category index is 10MB and another is 700MB.  Other index-sizes are  
> somewhere in between.
>
> I was wondering if it will be better to just have 1 large index  
> with all the 40 indices combined.  I do not need to do dual-queries  
> and my total index size (if I create a single index) is about  
> 3.4GB.  It will increase to maximum of 5-6 GB.  I am running this  
> on a dedicated machine with 8GB RAM.
>
> Unfortunately I do not have enough hardware to run both in parallel  
> and test properly.  Have just one server which is being used by  
> live users.  So it would be great if you could tell me whether I  
> should stick with my 40 indices or combine them into 1 index.  What  
> are the pros and cons of each approach ?
>
> Thanks,
> Nikhil
>
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Thursday, 20 September, 2007 7:57:21 PM
> Subject: Re: Multiple Indices vs Single Index
>
> If I understand correctly, you want to do a two stage retrieval
> right?  That is, look up in the initial index (3.4 GB) and then do a
> second search on the sub index?  Presumably, you have to manage the
> Searchers, etc. for each of the sub-indexes as well as the big
> index.  This means you have to go through the hits from the first
> search, then route, etc. correct?
>
> Have you tried creating one single index with all the (stored)
> fields, etc?  Worst case scenario, assuming 1GB per index, is you
> would have a 40GB index, but my guess is index compression will
> reduce it more.  Since you are less than that anyway, have you tried
> just the straightforward solution?  Or do you have other requirements
> that force the sub-index solution?  Also, I am not sure it will work,
> but it seems worth a try.  Of course, this also depends on how much
> you expect your indexes to grow.
>
> Also, what was inconclusive about your tests?  Maybe you can describe
> more what you have tried to date?
>
> Cheers,
> Grant
>
> On Sep 20, 2007, at 3:50 AM, Nikhil Chhaochharia wrote:
>
>> Hi,
>>
>> I have about 40 indices which range in size from 10MB to 700MB.
>> There are quite a few stored fields.  To get an idea of the
>> document size, I have about 400k documents in the 700MB index.
>>
>> Depending on the query, I choose the index which needs to be
>> searched.  Each query hits only one index.  I was wondering if
>> creating a single index where every document will have the
>> indexname as a field will be more efficient.  I created such an
>> index and it was 3.4 GB in size.  My initial performance tests with
>> it are not conclusive.
>>
>> Also, what are the other points to be addressed while deciding
>> between 1 index and 40 indices.
>>
>> I have 8GB RAM on the machine.
>>
>>
>> Thanks,
>> Nikhil
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 15:57:57 2007
Return-Path: <java-user-return-30351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6625 invoked from network); 20 Sep 2007 15:57:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 15:57:55 -0000
Received: (qmail 19537 invoked by uid 500); 20 Sep 2007 15:57:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19487 invoked by uid 500); 20 Sep 2007 15:57:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19476 invoked by uid 99); 20 Sep 2007 15:57:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 08:57:40 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:57:37 +0000
Received: by py-out-1112.google.com with SMTP id d32so1882041pye
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 08:57:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=pfPP87YExmmFoBbsLCpMrOufmTUEaQfyciKEU3w7ZN8=;
        b=kgpwqFIvHX02ScVfMwp4Sc6l3NTmF6LXOvP1HIxGlzdy0XU/gBXqpnlXQXrFtJJy0WFerga7hd5PKAq8bAyC/L/OuenvO4SyfI7FBSxmgHHszaHRng+KDcKDldwryww9rfdPwUFCTjCfoM0jh9lhpiNVwViDWXxx4EE+reQ23TY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qPDhC++YplTfSmL0JW4R1yd9mq8M2j81vmy4GzZA4H7gkGunrNYXLFcTBMl9fedyGCyDOf214DWE0g0WZnVz8zCsS4mYquHJkKnvC4NhAd6A6tJuXm1xRZVnH+hdULuIkWFLxP3NwsEM7LI+sYgq6oIzFQ+E4yI/ZdBHHJbaVmk=
Received: by 10.65.204.7 with SMTP id g7mr1096511qbq.1190303835524;
        Thu, 20 Sep 2007 08:57:15 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e17sm1465245qbe.2007.09.20.08.57.14
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Sep 2007 08:57:14 -0700 (PDT)
Message-ID: <46F29849.4070701@gmail.com>
Date: Thu, 20 Sep 2007 11:56:57 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com>
In-Reply-To: <46F2959D.9040403@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Good luck Jay. Keep in mind, pretty much all LuceneIndexAccessor does is 
sync Readers with Writers and allow multiple threads to share the same 
instances of them -- nothing more. The code just forces Readers to 
refresh when Writers are used to change the index. There really isn't 
any functionality beyond that offered. Since you want to have a multi 
thread system access the same resources (which occasionally need to be 
refreshed) its not too easy to get around a synchronized block.

If I am able to extract some usable code for you soon I will let you know.

- Mark

Jay Yu wrote:
> Mark,
>
> Thanks for sharing your valuable exp. and thoughts.
> Frankly our system already has most of the functionalities 
> LuceneIndexAcessor offers. The only thing I am looking for is to sync 
> the searchers' close. That's why I am little worried about the way 
> accessor handles the searcher sync.
> I will probably give it a try to see how it performs in our system.
>
> Thanks!
>
> Jay
>
> Mark Miller wrote:
>> The method is synched, but this is because each thread *does* share 
>> the same Searcher. To maintain a cache of searchers across multiple 
>> threads, you've got to sync -- to reference count, you've got to 
>> sync. The performance hit of LuceneIndexAcessor is pretty minimal for 
>> its functionality, and frankly, for the functionality you want, you 
>> have to pay a cost. Thats not even the end of it really...your going 
>> to need to maintain a cache of Accessor objects for each index as 
>> well...and if you dont know all the indexes at startup time, access 
>> to this will also need to be synched. I wouldn't worry though -- 
>> searches are still lightening fast...that won't be the bottleneck. 
>> I'll work on getting you some code, but if your worried, try some 
>> benchmarking on the original code.
>>
>> Also, to be clear, I don't have the code in front of me, but getting 
>> a Searcher does not require waiting for a Writer to be released. 
>> Searchers are cached and resused (and instantly available) until a 
>> Writer is released. When this happens, the release Writer method 
>> waits for all the Searchers to return (happens pretty quick as 
>> searches are pretty quick), the Searcher cache is cleared, and then 
>> subsequent calls to getSearcher create new Searchers that can see 
>> what the Writer added.
>>
>> The key is use your Writer/Searcher/Reader quickly and then release 
>> it (unless your bulk loading). I've had such a system with 5+ million 
>> docs on a standard machine and searches where still well below a 
>> second after the first Searcher is cached (and even the first search 
>> is darn quick). And that includes a lot of extra crap I am doing.
>>
>> - Mark
>>
>> Jay Yu wrote:
>>> Mark,
>>>
>>> After reading the implementation of LuceneIndexAccessor.getSearcher(),
>>> I realized that the method is synchronized and wait for 
>>> writingDirector to be released. That means if we getSearcher for 
>>> each query in each thread, there might be a contention and 
>>> performance hit. In fact, even the method of release(searcher) is 
>>> costly. On the other hand, if multiple threads share share one 
>>> searcher then it'd defeat the
>>> purpose of using LuceneIndexAccessor.
>>> Do I miss sth here? What's your suggested use case for 
>>> LuceneIndexAccessor?
>>>
>>> Thanks!
>>>
>>> Jay
>>> Mark Miller wrote:
>>>> Ill respond a point at a time:
>>>>
>>>> 1.
>>>>
>>>> ****************************** Hi Maik,
>>>>
>>>> So what happens in this case:
>>>>
>>>> IndexAccessProvider accessProvider = new 
>>>> IndexAccessProvider(directory,
>>>>
>>>> analyzer);
>>>>
>>>> LuceneIndexAccessor accessor = new 
>>>> LuceneIndexAccessor(accessProvider);
>>>>
>>>> accessor.open();
>>>>
>>>> IndexWriter writer = accessor.getWriter();
>>>>
>>>> // reference to the same instance?
>>>>
>>>> IndexWriter writer2 = accessor.getWriter();
>>>>
>>>> writer.addDocument(....);
>>>>
>>>> writer2.addDocument(....);
>>>>
>>>>
>>>>
>>>> // I didn't release the writer yet
>>>>
>>>> // will this block?
>>>>
>>>> IndexReader reader = accessor.getReader();
>>>>
>>>> reader.delete(....);
>>>>
>>>> ************
>>>>
>>>> This is not really an issue. First, if you are going to delete with 
>>>> a Reader
>>>> you need to call getWritingReader and not getReader. When you do 
>>>> that, the
>>>> getWritingReader call will block until writer and writer2 are 
>>>> released. If
>>>> you are just adding a couple docs before releasing the writers, 
>>>> this is no
>>>> problem because the block will be very short. If you are loading 
>>>> tons of
>>>> docs and you want to be able to delete with a Reader in a timely 
>>>> manner, you
>>>> should release the writers every now and then (release and re-get 
>>>> the Writer
>>>> every 100 docs or something). An interactive index should not hog the
>>>> Writer, while something that is just loading a lot could hog the 
>>>> Writer.
>>>> This is no different than normalyou cannot delete with a Reader while
>>>> adding with a Writer with Lucene. This code just enforces those 
>>>> semantics.
>>>> The best solution is to just use a Writer to delete  I never get a
>>>> ReadingWriter.
>>>>
>>>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>
>>>> This is no big deal either. I just added another getWriter call 
>>>> that takes a
>>>> create Boolean.
>>>>
>>>> 3. I don't think there is a latest release. This has never gotten much
>>>> official attention and is not in the sandbox. I worked straight 
>>>> from the
>>>> originally submitted code.
>>>>
>>>> 4. I will look into getting together some code that I can share. The
>>>> multisearcher changes that are need are a couple of one liners 
>>>> really, so at
>>>> a minimum I will give you the changes needed.
>>>>
>>>>
>>>>
>>>> -       Mark
>>>>
>>>>
>>>>
>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>
>>>> Mark,
>>>>
>>>>
>>>>
>>>> thanks for sharing your insight and experience about 
>>>> LuceneIndexAccessor!
>>>>
>>>> I remember seeing some people reporting some issues about it, such as:
>>>>
>>>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>>>
>>>>
>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>
>>>>
>>>>
>>>> Have those issues been resolved?
>>>>
>>>>
>>>>
>>>> Where did you get the latest release? It is not in the official Lucene
>>>>
>>>> sandbox/contrib.
>>>>
>>>>
>>>>
>>>> Finally, are you willing to share your extended version to include 
>>>> your
>>>>
>>>> tweak relating to the MultiSearcher?
>>>>
>>>>
>>>>
>>>> Thanks a lot!
>>>>
>>>>
>>>>
>>>> Jay
>>>>
>>>>
>>>>
>>>> Mark Miller wrote:
>>>>
>>>>> I use option 3 extensivley and find it very effective. There is a 
>>>>> tweak or
>>>>
>>>>> two required to get it to work right with MultiSearchers, but 
>>>>> other than
>>>>
>>>>> that, the code is great. I have built a lot on top of it. I'm on 
>>>>> the list
>>>>
>>>>> all the time and would be happy to answer any questions you have in
>>>> regards
>>>>
>>>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
>>>>
>>>>
>>>>> - Mark
>>>>
>>>>
>>>>
>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>
>>>>
>>>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>>>> throw a
>>>>
>>>>>> AlreadyClosedException when another thread is trying to update the
>>>>
>>>>>> underlying IndexReader by closing the shared searcher after the 
>>>>>> index is
>>>>
>>>>>> updated. Searching over the past discussions on this mailing list, I
>>>>
>>>>>> found several approaches to solve the problem.
>>>>
>>>>>> 1. use solr
>>>>
>>>>>> 2. use DelayCloseIndexSearcher
>>>>
>>>>>> 3. use LuceneIndexAccessor
>>>>
>>>>
>>>>
>>>>>> the first one is not feasible for us; some people seemed to have
>>>>
>>>>>> problems with No. 2 and I do not find a lot of discussions around 
>>>>>> No.3.
>>>>
>>>>
>>>>>> I wonder if anyone has good experience on No 2 and 3?
>>>>
>>>>>> Or do I miss other better solutions?
>>>>
>>>>
>>>>>> Thanks for any suggestion/comment!
>>>>
>>>>
>>>>>> Jay
>>>>
>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 16:03:22 2007
Return-Path: <java-user-return-30352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14978 invoked from network); 20 Sep 2007 16:03:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 16:03:21 -0000
Received: (qmail 33106 invoked by uid 500); 20 Sep 2007 16:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32610 invoked by uid 500); 20 Sep 2007 16:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32599 invoked by uid 99); 20 Sep 2007 16:03:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 09:03:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 16:05:03 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8KG2e026786
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:02:40 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092009024010927
 for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:02:40 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IYOUC-00085H-00
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:02:40 -0700
Message-ID: <46F299A4.6030403@ai.sri.com>
Date: Thu, 20 Sep 2007 09:02:44 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com>
In-Reply-To: <46F29849.4070701@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org



Mark Miller wrote:
> Good luck Jay. Keep in mind, pretty much all LuceneIndexAccessor does is 
> sync Readers with Writers and allow multiple threads to share the same 
> instances of them -- nothing more. The code just forces Readers to 
> refresh when Writers are used to change the index. There really isn't 
> any functionality beyond that offered. Since you want to have a multi 
> thread system access the same resources (which occasionally need to be 
> refreshed) its not too easy to get around a synchronized block.
> 
> If I am able to extract some usable code for you soon I will let you know.
I will appreciate it!
Thanks for your help!

> 
> - Mark
> 
> Jay Yu wrote:
>> Mark,
>>
>> Thanks for sharing your valuable exp. and thoughts.
>> Frankly our system already has most of the functionalities 
>> LuceneIndexAcessor offers. The only thing I am looking for is to sync 
>> the searchers' close. That's why I am little worried about the way 
>> accessor handles the searcher sync.
>> I will probably give it a try to see how it performs in our system.
>>
>> Thanks!
>>
>> Jay
>>
>> Mark Miller wrote:
>>> The method is synched, but this is because each thread *does* share 
>>> the same Searcher. To maintain a cache of searchers across multiple 
>>> threads, you've got to sync -- to reference count, you've got to 
>>> sync. The performance hit of LuceneIndexAcessor is pretty minimal for 
>>> its functionality, and frankly, for the functionality you want, you 
>>> have to pay a cost. Thats not even the end of it really...your going 
>>> to need to maintain a cache of Accessor objects for each index as 
>>> well...and if you dont know all the indexes at startup time, access 
>>> to this will also need to be synched. I wouldn't worry though -- 
>>> searches are still lightening fast...that won't be the bottleneck. 
>>> I'll work on getting you some code, but if your worried, try some 
>>> benchmarking on the original code.
>>>
>>> Also, to be clear, I don't have the code in front of me, but getting 
>>> a Searcher does not require waiting for a Writer to be released. 
>>> Searchers are cached and resused (and instantly available) until a 
>>> Writer is released. When this happens, the release Writer method 
>>> waits for all the Searchers to return (happens pretty quick as 
>>> searches are pretty quick), the Searcher cache is cleared, and then 
>>> subsequent calls to getSearcher create new Searchers that can see 
>>> what the Writer added.
>>>
>>> The key is use your Writer/Searcher/Reader quickly and then release 
>>> it (unless your bulk loading). I've had such a system with 5+ million 
>>> docs on a standard machine and searches where still well below a 
>>> second after the first Searcher is cached (and even the first search 
>>> is darn quick). And that includes a lot of extra crap I am doing.
>>>
>>> - Mark
>>>
>>> Jay Yu wrote:
>>>> Mark,
>>>>
>>>> After reading the implementation of LuceneIndexAccessor.getSearcher(),
>>>> I realized that the method is synchronized and wait for 
>>>> writingDirector to be released. That means if we getSearcher for 
>>>> each query in each thread, there might be a contention and 
>>>> performance hit. In fact, even the method of release(searcher) is 
>>>> costly. On the other hand, if multiple threads share share one 
>>>> searcher then it'd defeat the
>>>> purpose of using LuceneIndexAccessor.
>>>> Do I miss sth here? What's your suggested use case for 
>>>> LuceneIndexAccessor?
>>>>
>>>> Thanks!
>>>>
>>>> Jay
>>>> Mark Miller wrote:
>>>>> Ill respond a point at a time:
>>>>>
>>>>> 1.
>>>>>
>>>>> ****************************** Hi Maik,
>>>>>
>>>>> So what happens in this case:
>>>>>
>>>>> IndexAccessProvider accessProvider = new 
>>>>> IndexAccessProvider(directory,
>>>>>
>>>>> analyzer);
>>>>>
>>>>> LuceneIndexAccessor accessor = new 
>>>>> LuceneIndexAccessor(accessProvider);
>>>>>
>>>>> accessor.open();
>>>>>
>>>>> IndexWriter writer = accessor.getWriter();
>>>>>
>>>>> // reference to the same instance?
>>>>>
>>>>> IndexWriter writer2 = accessor.getWriter();
>>>>>
>>>>> writer.addDocument(....);
>>>>>
>>>>> writer2.addDocument(....);
>>>>>
>>>>>
>>>>>
>>>>> // I didn't release the writer yet
>>>>>
>>>>> // will this block?
>>>>>
>>>>> IndexReader reader = accessor.getReader();
>>>>>
>>>>> reader.delete(....);
>>>>>
>>>>> ************
>>>>>
>>>>> This is not really an issue. First, if you are going to delete with 
>>>>> a Reader
>>>>> you need to call getWritingReader and not getReader. When you do 
>>>>> that, the
>>>>> getWritingReader call will block until writer and writer2 are 
>>>>> released. If
>>>>> you are just adding a couple docs before releasing the writers, 
>>>>> this is no
>>>>> problem because the block will be very short. If you are loading 
>>>>> tons of
>>>>> docs and you want to be able to delete with a Reader in a timely 
>>>>> manner, you
>>>>> should release the writers every now and then (release and re-get 
>>>>> the Writer
>>>>> every 100 docs or something). An interactive index should not hog the
>>>>> Writer, while something that is just loading a lot could hog the 
>>>>> Writer.
>>>>> This is no different than normalyou cannot delete with a Reader while
>>>>> adding with a Writer with Lucene. This code just enforces those 
>>>>> semantics.
>>>>> The best solution is to just use a Writer to delete  I never get a
>>>>> ReadingWriter.
>>>>>
>>>>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>
>>>>> This is no big deal either. I just added another getWriter call 
>>>>> that takes a
>>>>> create Boolean.
>>>>>
>>>>> 3. I don't think there is a latest release. This has never gotten much
>>>>> official attention and is not in the sandbox. I worked straight 
>>>>> from the
>>>>> originally submitted code.
>>>>>
>>>>> 4. I will look into getting together some code that I can share. The
>>>>> multisearcher changes that are need are a couple of one liners 
>>>>> really, so at
>>>>> a minimum I will give you the changes needed.
>>>>>
>>>>>
>>>>>
>>>>> -       Mark
>>>>>
>>>>>
>>>>>
>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>
>>>>> Mark,
>>>>>
>>>>>
>>>>>
>>>>> thanks for sharing your insight and experience about 
>>>>> LuceneIndexAccessor!
>>>>>
>>>>> I remember seeing some people reporting some issues about it, such as:
>>>>>
>>>>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>>>>
>>>>>
>>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>
>>>>>
>>>>>
>>>>> Have those issues been resolved?
>>>>>
>>>>>
>>>>>
>>>>> Where did you get the latest release? It is not in the official Lucene
>>>>>
>>>>> sandbox/contrib.
>>>>>
>>>>>
>>>>>
>>>>> Finally, are you willing to share your extended version to include 
>>>>> your
>>>>>
>>>>> tweak relating to the MultiSearcher?
>>>>>
>>>>>
>>>>>
>>>>> Thanks a lot!
>>>>>
>>>>>
>>>>>
>>>>> Jay
>>>>>
>>>>>
>>>>>
>>>>> Mark Miller wrote:
>>>>>
>>>>>> I use option 3 extensivley and find it very effective. There is a 
>>>>>> tweak or
>>>>>
>>>>>> two required to get it to work right with MultiSearchers, but 
>>>>>> other than
>>>>>
>>>>>> that, the code is great. I have built a lot on top of it. I'm on 
>>>>>> the list
>>>>>
>>>>>> all the time and would be happy to answer any questions you have in
>>>>> regards
>>>>>
>>>>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too much.
>>>>>
>>>>>
>>>>>> - Mark
>>>>>
>>>>>
>>>>>
>>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>
>>>>>
>>>>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>>>>> throw a
>>>>>
>>>>>>> AlreadyClosedException when another thread is trying to update the
>>>>>
>>>>>>> underlying IndexReader by closing the shared searcher after the 
>>>>>>> index is
>>>>>
>>>>>>> updated. Searching over the past discussions on this mailing list, I
>>>>>
>>>>>>> found several approaches to solve the problem.
>>>>>
>>>>>>> 1. use solr
>>>>>
>>>>>>> 2. use DelayCloseIndexSearcher
>>>>>
>>>>>>> 3. use LuceneIndexAccessor
>>>>>
>>>>>
>>>>>
>>>>>>> the first one is not feasible for us; some people seemed to have
>>>>>
>>>>>>> problems with No. 2 and I do not find a lot of discussions around 
>>>>>>> No.3.
>>>>>
>>>>>
>>>>>>> I wonder if anyone has good experience on No 2 and 3?
>>>>>
>>>>>>> Or do I miss other better solutions?
>>>>>
>>>>>
>>>>>>> Thanks for any suggestion/comment!
>>>>>
>>>>>
>>>>>>> Jay
>>>>>
>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 16:08:17 2007
Return-Path: <java-user-return-30353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21584 invoked from network); 20 Sep 2007 16:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 16:08:15 -0000
Received: (qmail 43695 invoked by uid 500); 20 Sep 2007 16:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43659 invoked by uid 500); 20 Sep 2007 16:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43648 invoked by uid 99); 20 Sep 2007 16:08:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 09:08:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.200.138] (HELO web30705.mail.mud.yahoo.com) (68.142.200.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Sep 2007 16:07:58 +0000
Received: (qmail 46137 invoked by uid 60001); 20 Sep 2007 16:07:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=PJLe6H49wLGVLXkFz905C8FieYhkuK8RuaY5Yl0fnFRLB0jns3RnAJODKUT8G9zaW6S3qe8pGstykasLCLmQZBTsh6y0aa5JA6En7OmnAdt+E6uRNUZnOAtlQ6molUPZOGVRsKP9s+5NNlGTnpiXpevTFMWMNz5DjJGIs0dUeyY=;
X-YMail-OSG: ChltdtkVM1lWqwWmB7j1UNeeFMP_3qyk36J5fNuG6JyXvvNVx3XmiFQscZeshEgos.yQKtuknAmMFi45FONUp1SR3DZP8k1IeSns_wLfO_wTr6IkpzE-
Received: from [209.191.119.123] by web30705.mail.mud.yahoo.com via HTTP; Thu, 20 Sep 2007 09:07:37 PDT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Thu, 20 Sep 2007 09:07:37 -0700 (PDT)
From: Nikhil Chhaochharia <nikhil500@yahoo.com>
Subject: Re: Multiple Indices vs Single Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <575754.46047.qm@web30705.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

OK, thanks.=0A=0AI actually have both systems implemented. The multi-index =
one is being used currently and it works well.  I have deployed the single =
index solution a few times during off-peak hours and the response time has =
been almost the same as the multi-index solution.  I tried to simulate some=
 load but again my numbers were mostly similar for both cases.=0A=0AI have =
already done all the suggested optimizations since I first ran into problem=
s a few months ago.  The performance had improved considerably.  Since then=
, my traffic has increased and I have again started facing some issues duri=
ng peak-load hours.=0A=0AI guess I should get another box and run proper te=
sts there.  Will run a profiler also.=0A=0AThanks for all the suggestions.=
=0A=0ARegards,=0ANikhil=0A=0A=0A----- Original Message ----=0AFrom: Grant I=
ngersoll <gsingers@apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Th=
ursday, 20 September, 2007 9:25:01 PM=0ASubject: Re: Multiple Indices vs Si=
ngle Index=0A=0AOK, I thought you meant your index would have in it the nam=
e of the  =0Asecond index and would thus do a two-stage retrieval.=0A=0AAt =
any rate, if you are saying your combined index with all the  =0Astored fie=
lds is ~3.4 GB I would think it would fit reasonably on the  =0Amachine you=
 have and perform reasonably.  Naturally, this depends on  =0Ayour applicat=
ion, your users, etc. and I can't make any guarantees,  =0Abut I certainly =
recall others managing this size just fine.  See the  =0Amany tips on impro=
ving searching and indexing on the Wiki (link at  =0Abottom in my signature=
) and do some profiling/testing.=0A=0AWhen you said your tests were inconcl=
usive, what tests have you  =0Adone?  If you can, run the tests in a profil=
er to see where your  =0Abottlenecks are.=0A=0A-Grant=0A=0A=0AOn Sep 20, 20=
07, at 11:16 AM, Nikhil Chhaochharia wrote:=0A=0A> I am sorry, it seems tha=
t I was not clear with what my problem is.   =0A> I will try to describe it=
 again.=0A>=0A> My data is divided into 40 categories and at one time only =
one  =0A> category can be searched.  The GUI for the system will ask the us=
er  =0A> to select the category from a drop-down.  Currently, I have a  =0A=
> separate index for every category.  The index sizes varies - one  =0A> ca=
tegory index is 10MB and another is 700MB.  Other index-sizes are  =0A> som=
ewhere in between.=0A>=0A> I was wondering if it will be better to just hav=
e 1 large index  =0A> with all the 40 indices combined.  I do not need to d=
o dual-queries  =0A> and my total index size (if I create a single index) i=
s about  =0A> 3.4GB.  It will increase to maximum of 5-6 GB.  I am running =
this  =0A> on a dedicated machine with 8GB RAM.=0A>=0A> Unfortunately I do =
not have enough hardware to run both in parallel  =0A> and test properly.  =
Have just one server which is being used by  =0A> live users.  So it would =
be great if you could tell me whether I  =0A> should stick with my 40 indic=
es or combine them into 1 index.  What  =0A> are the pros and cons of each =
approach ?=0A>=0A> Thanks,=0A> Nikhil=0A>=0A>=0A> ----- Original Message --=
--=0A> From: Grant Ingersoll <gsingers@apache.org>=0A> To: java-user@lucene=
.apache.org=0A> Sent: Thursday, 20 September, 2007 7:57:21 PM=0A> Subject: =
Re: Multiple Indices vs Single Index=0A>=0A> If I understand correctly, you=
 want to do a two stage retrieval=0A> right?  That is, look up in the initi=
al index (3.4 GB) and then do a=0A> second search on the sub index?  Presum=
ably, you have to manage the=0A> Searchers, etc. for each of the sub-indexe=
s as well as the big=0A> index.  This means you have to go through the hits=
 from the first=0A> search, then route, etc. correct?=0A>=0A> Have you trie=
d creating one single index with all the (stored)=0A> fields, etc?  Worst c=
ase scenario, assuming 1GB per index, is you=0A> would have a 40GB index, b=
ut my guess is index compression will=0A> reduce it more.  Since you are le=
ss than that anyway, have you tried=0A> just the straightforward solution? =
 Or do you have other requirements=0A> that force the sub-index solution?  =
Also, I am not sure it will work,=0A> but it seems worth a try.  Of course,=
 this also depends on how much=0A> you expect your indexes to grow.=0A>=0A>=
 Also, what was inconclusive about your tests?  Maybe you can describe=0A> =
more what you have tried to date?=0A>=0A> Cheers,=0A> Grant=0A>=0A> On Sep =
20, 2007, at 3:50 AM, Nikhil Chhaochharia wrote:=0A>=0A>> Hi,=0A>>=0A>> I h=
ave about 40 indices which range in size from 10MB to 700MB.=0A>> There are=
 quite a few stored fields.  To get an idea of the=0A>> document size, I ha=
ve about 400k documents in the 700MB index.=0A>>=0A>> Depending on the quer=
y, I choose the index which needs to be=0A>> searched.  Each query hits onl=
y one index.  I was wondering if=0A>> creating a single index where every d=
ocument will have the=0A>> indexname as a field will be more efficient.  I =
created such an=0A>> index and it was 3.4 GB in size.  My initial performan=
ce tests with=0A>> it are not conclusive.=0A>>=0A>> Also, what are the othe=
r points to be addressed while deciding=0A>> between 1 index and 40 indices=
.=0A>>=0A>> I have 8GB RAM on the machine.=0A>>=0A>>=0A>> Thanks,=0A>> Nikh=
il=0A>>=0A>>=0A>>=0A>> ----------------------------------------------------=
-----------------=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene=
.apache.org=0A>> For additional commands, e-mail: java-user-help@lucene.apa=
che.org=0A>>=0A>=0A> --------------------------=0A> Grant Ingersoll=0A> htt=
p://lucene.grantingersoll.com=0A>=0A> Lucene Helpful Hints:=0A> http://wiki=
.apache.org/lucene-java/BasicsOfPerformance=0A> http://wiki.apache.org/luce=
ne-java/LuceneFAQ=0A>=0A>=0A>=0A> -----------------------------------------=
----------------------------=0A> To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A>=0A>=0A>=0A>=0A>=0A> ----------------------------------=
-----------------------------------=0A> To unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user=
-help@lucene.apache.org=0A>=0A=0A--------------------------=0AGrant Ingerso=
ll=0Ahttp://lucene.grantingersoll.com=0A=0ALucene Helpful Hints:=0Ahttp://w=
iki.apache.org/lucene-java/BasicsOfPerformance=0Ahttp://wiki.apache.org/luc=
ene-java/LuceneFAQ=0A=0A=0A=0A---------------------------------------------=
------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 16:51:30 2007
Return-Path: <java-user-return-30354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87533 invoked from network); 20 Sep 2007 16:51:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 16:51:28 -0000
Received: (qmail 18950 invoked by uid 500); 20 Sep 2007 16:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18629 invoked by uid 500); 20 Sep 2007 16:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18618 invoked by uid 99); 20 Sep 2007 16:51:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 09:51:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 16:51:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 350BB7CEEE
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 09:50:48 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <575754.46047.qm@web30705.mail.mud.yahoo.com>
References: <575754.46047.qm@web30705.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8CD824C9-467F-4B37-B2E5-357782050D08@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Multiple Indices vs Single Index
Date: Thu, 20 Sep 2007 12:50:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If the current version is working well, what is the reason to move?   
Is it just to make management of the indices easier?

On Sep 20, 2007, at 12:07 PM, Nikhil Chhaochharia wrote:

> OK, thanks.
>
> I actually have both systems implemented. The multi-index one is  
> being used currently and it works well.  I have deployed the single  
> index solution a few times during off-peak hours and the response  
> time has been almost the same as the multi-index solution.  I tried  
> to simulate some load but again my numbers were mostly similar for  
> both cases.
>
> I have already done all the suggested optimizations since I first  
> ran into problems a few months ago.  The performance had improved  
> considerably.  Since then, my traffic has increased and I have  
> again started facing some issues during peak-load hours.
>
> I guess I should get another box and run proper tests there.  Will  
> run a profiler also.
>
> Thanks for all the suggestions.
>
> Regards,
> Nikhil
>
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Thursday, 20 September, 2007 9:25:01 PM
> Subject: Re: Multiple Indices vs Single Index
>
> OK, I thought you meant your index would have in it the name of the
> second index and would thus do a two-stage retrieval.
>
> At any rate, if you are saying your combined index with all the
> stored fields is ~3.4 GB I would think it would fit reasonably on the
> machine you have and perform reasonably.  Naturally, this depends on
> your application, your users, etc. and I can't make any guarantees,
> but I certainly recall others managing this size just fine.  See the
> many tips on improving searching and indexing on the Wiki (link at
> bottom in my signature) and do some profiling/testing.
>
> When you said your tests were inconclusive, what tests have you
> done?  If you can, run the tests in a profiler to see where your
> bottlenecks are.
>
> -Grant
>
>
> On Sep 20, 2007, at 11:16 AM, Nikhil Chhaochharia wrote:
>
>> I am sorry, it seems that I was not clear with what my problem is.
>> I will try to describe it again.
>>
>> My data is divided into 40 categories and at one time only one
>> category can be searched.  The GUI for the system will ask the user
>> to select the category from a drop-down.  Currently, I have a
>> separate index for every category.  The index sizes varies - one
>> category index is 10MB and another is 700MB.  Other index-sizes are
>> somewhere in between.
>>
>> I was wondering if it will be better to just have 1 large index
>> with all the 40 indices combined.  I do not need to do dual-queries
>> and my total index size (if I create a single index) is about
>> 3.4GB.  It will increase to maximum of 5-6 GB.  I am running this
>> on a dedicated machine with 8GB RAM.
>>
>> Unfortunately I do not have enough hardware to run both in parallel
>> and test properly.  Have just one server which is being used by
>> live users.  So it would be great if you could tell me whether I
>> should stick with my 40 indices or combine them into 1 index.  What
>> are the pros and cons of each approach ?
>>
>> Thanks,
>> Nikhil
>>
>>
>> ----- Original Message ----
>> From: Grant Ingersoll <gsingers@apache.org>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, 20 September, 2007 7:57:21 PM
>> Subject: Re: Multiple Indices vs Single Index
>>
>> If I understand correctly, you want to do a two stage retrieval
>> right?  That is, look up in the initial index (3.4 GB) and then do a
>> second search on the sub index?  Presumably, you have to manage the
>> Searchers, etc. for each of the sub-indexes as well as the big
>> index.  This means you have to go through the hits from the first
>> search, then route, etc. correct?
>>
>> Have you tried creating one single index with all the (stored)
>> fields, etc?  Worst case scenario, assuming 1GB per index, is you
>> would have a 40GB index, but my guess is index compression will
>> reduce it more.  Since you are less than that anyway, have you tried
>> just the straightforward solution?  Or do you have other requirements
>> that force the sub-index solution?  Also, I am not sure it will work,
>> but it seems worth a try.  Of course, this also depends on how much
>> you expect your indexes to grow.
>>
>> Also, what was inconclusive about your tests?  Maybe you can describe
>> more what you have tried to date?
>>
>> Cheers,
>> Grant
>>
>> On Sep 20, 2007, at 3:50 AM, Nikhil Chhaochharia wrote:
>>
>>> Hi,
>>>
>>> I have about 40 indices which range in size from 10MB to 700MB.
>>> There are quite a few stored fields.  To get an idea of the
>>> document size, I have about 400k documents in the 700MB index.
>>>
>>> Depending on the query, I choose the index which needs to be
>>> searched.  Each query hits only one index.  I was wondering if
>>> creating a single index where every document will have the
>>> indexname as a field will be more efficient.  I created such an
>>> index and it was 3.4 GB in size.  My initial performance tests with
>>> it are not conclusive.
>>>
>>> Also, what are the other points to be addressed while deciding
>>> between 1 index and 40 indices.
>>>
>>> I have 8GB RAM on the machine.
>>>
>>>
>>> Thanks,
>>> Nikhil
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 21:39:53 2007
Return-Path: <java-user-return-30355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46088 invoked from network); 20 Sep 2007 21:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 21:39:51 -0000
Received: (qmail 67035 invoked by uid 500); 20 Sep 2007 21:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67006 invoked by uid 500); 20 Sep 2007 21:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66995 invoked by uid 99); 20 Sep 2007 21:39:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 14:39:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.74] (HELO smtpoutm.mac.com) (17.148.16.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 21:41:08 +0000
Received: from mac.com (smtpin04-en2 [10.13.10.149])
	by smtpoutm.mac.com (Xserve/smtpout011/MantshX 4.0) with ESMTP id l8KLcUjA013358
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 14:38:30 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin04/MantshX 4.0) with ESMTP id l8KLcR80013870
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 14:38:29 -0700 (PDT)
Message-ID: <46F2E853.50800@mac.com>
Date: Thu, 20 Sep 2007 17:38:27 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: highlighting and fragments
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Folks,

I wanted to stay away from storing text in the indexes in order to keep 
them smaller.  I have a requirement now though to provide highlighting 
and, more so, fragments of the content so they will be displayed on the UI.

Do you all prefer to store the text in the index to make this easier or 
would you suggest retrieving the text from the source after doing your 
search.  From I can tell you need to run through the Hits anyway....

I am trying to keep the indexes as small as possible (they are still 
HUGE...but...) so storing fields is not really what I want to do.  I 
will if it is the best and most efficient way to do so.

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 22:16:28 2007
Return-Path: <java-user-return-30356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57911 invoked from network); 20 Sep 2007 22:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 22:16:27 -0000
Received: (qmail 10312 invoked by uid 500); 20 Sep 2007 22:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10274 invoked by uid 500); 20 Sep 2007 22:16:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10263 invoked by uid 99); 20 Sep 2007 22:16:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:16:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 22:18:13 +0000
Received: by nz-out-0506.google.com with SMTP id i28so506014nzi
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 15:15:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=P2QZ833BqQ4cPMIzn5AD8+fRhs68eP4svYaKdFEFOus=;
        b=O9AOQNalrtrWvW/dzJbIciCbgqiGRGtAzBFntM52EvuH/4CdP9pSXbXPonYan9ynDSMx8Kehjjj5vyc7hTyGRL/wHb+At1rJVTqb2Kl4krKActbtwdNt2XfT5uoB7bDI5FiOhiWM4+PcBB4tkhOFW/zywBANN753a7YrVauE8kM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XaLFDKyhTsZZVtqRmdCd6ea4GiAdNSY5JbDh9pUIcXUqH+PIDGAQrZNk7oLKGcFS5bCBpmFnHdYU4/UmvSUnver1nO1yTSmPRuGf4jxdja4iE6HNPhYIYNn4KwkflXrcak5+Gzv69DLz7nWvjQEMp2k3rpqcqi55vtxSJRQ/d2Y=
Received: by 10.65.53.3 with SMTP id f3mr5164831qbk.1190326549654;
        Thu, 20 Sep 2007 15:15:49 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e14sm25737qba.2007.09.20.15.15.48
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Sep 2007 15:15:48 -0700 (PDT)
Message-ID: <46F2F0FF.7070400@gmail.com>
Date: Thu, 20 Sep 2007 18:15:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: highlighting and fragments
References: <46F2E853.50800@mac.com>
In-Reply-To: <46F2E853.50800@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene's storing functionality is just a simple storage mechanism. You 
can certainly and easily use your own storage mechanism. When you get 
your user created id back from Lucene due to a hit, just pass that id to 
your storage system to get the original text and then feed that to the 
Highlighter. Your storage system/code might be slower than Lucene, but I 
don't believe there is anything about Lucene's system that would give it 
an inside advantage.

- Mark

Michael J. Prichard wrote:
> Hello Folks,
>
> I wanted to stay away from storing text in the indexes in order to 
> keep them smaller.  I have a requirement now though to provide 
> highlighting and, more so, fragments of the content so they will be 
> displayed on the UI.
>
> Do you all prefer to store the text in the index to make this easier 
> or would you suggest retrieving the text from the source after doing 
> your search.  From I can tell you need to run through the Hits anyway....
>
> I am trying to keep the indexes as small as possible (they are still 
> HUGE...but...) so storing fields is not really what I want to do.  I 
> will if it is the best and most efficient way to do so.
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 22:20:56 2007
Return-Path: <java-user-return-30357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58545 invoked from network); 20 Sep 2007 22:20:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 22:20:56 -0000
Received: (qmail 13744 invoked by uid 500); 20 Sep 2007 22:20:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13705 invoked by uid 500); 20 Sep 2007 22:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13694 invoked by uid 99); 20 Sep 2007 22:20:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:20:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 22:20:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6A4FB71C1A7; Thu, 20 Sep 2007 15:20:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 51B0071C112
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 15:20:21 -0700 (PDT)
Date: Thu, 20 Sep 2007 15:20:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question regarding proximity search
In-Reply-To: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0709201518150.4723@radix.cryptio.net>
References: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is the query "cat dog"~6 same as (cat dog)~6 ?
: I think both case will search for "cat" and "dog" within 6 words each other.
: But I am getting different number of results for the above queries. The
: second one may be the higher. Please clarify this.

i don't believe:    (cat dog)~6     is even a legal query in the Lucene 
QueryParser sytnax ... it isn't documented, and it doesn't work in Lucene 2.2.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 20 22:33:15 2007
Return-Path: <java-user-return-30358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60730 invoked from network); 20 Sep 2007 22:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Sep 2007 22:33:14 -0000
Received: (qmail 23955 invoked by uid 500); 20 Sep 2007 22:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23917 invoked by uid 500); 20 Sep 2007 22:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23906 invoked by uid 99); 20 Sep 2007 22:32:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 15:32:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 22:35:01 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 71F8771C1A4; Thu, 20 Sep 2007 15:32:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6D0B171C0EB
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 15:32:38 -0700 (PDT)
Date: Thu, 20 Sep 2007 15:32:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Multiple Indices vs Single Index
In-Reply-To: <103686.46633.qm@web30702.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.62.0709201523250.4723@radix.cryptio.net>
References: <103686.46633.qm@web30702.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I was wondering if it will be better to just have 1 large index with all 
: the 40 indices combined.  I do not need to do dual-queries and my total 
: index size (if I create a single index) is about 3.4GB.  It will 
: increase to maximum of 5-6 GB.  I am running this on a dedicated machine 
: with 8GB RAM.

off the top of my head, there are 3 main reasons i can think of that would 
motivate one choice over another -- ultimately it's up to you...

1) FieldCache and sorting ... if all 40 sets of of Documents contain 
have consistently named fields, then there won't be much difference 
between 40 indexes and 1 index ... but if each of those 40 sets contain 
documents with radically differnet fields -- and you want to sort on N 
differnet fields for each sets -- then the total FieldCache sizes for each 
of those 40 indexes will be smaller then the FieldCaches for one gian 
index (because every document will get an entry wethe it makes sense or 
not.

2) idf statistics.  if you have common fields you search regardless of 
document set, the 40 index approach will maintain seperate sttistics -- 
this may be important if some terms are very common in only som docsets.  
the word "albino" may be really common in docset A but only one doc in 
docset B has it ... in the 40 index appraoch querying B for (albino 
elephant) will give a lot of weight to albino because it's so rare, but in 
the single index case albino may not be considered as significant because 
of ht unified idf value for all docsets 9even if hte query is constrained 
to docset B) ... again: this only matters if the fields overlap, if every 
docset has a unique set of fields then the idfs will be unique because 
they are by field)

3) management: it's probably a lot simpler to maintain and manage code 
that deals with one index then code that deals with 40 indexes. you milage 
may vary.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 04:05:46 2007
Return-Path: <java-user-return-30359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67035 invoked from network); 21 Sep 2007 04:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 04:05:44 -0000
Received: (qmail 60206 invoked by uid 500); 21 Sep 2007 04:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60174 invoked by uid 500); 21 Sep 2007 04:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60163 invoked by uid 99); 21 Sep 2007 04:05:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 21:05:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 04:05:29 +0000
Received: by rv-out-0910.google.com with SMTP id k20so596523rvb
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 21:05:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vgNcAkbuukDl21asy2K25IqJbNLRh85YPSO+5kcR7C4=;
        b=lM0aEKpJHtbi1Ig1uomWO6hvnYnsuPWeo5ZYviCMQP3ex6YG7KKBPxGxH6PCz9nBWk1czJirYTyzBBVBfKE3pQCVYoNSMAbbiDjgu4j/j6pp47Cd3FP2MDjBkDfY7qmAySGrLlVKp4L2eClhibM39WgTyXL+EIiFpYuVIQr64w8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HGqchVTm/NJyHbsDN4u7t5Z2hEZ6LMqVIpZxluFnXH9Bb9KPF8g9UEioxeqRb2N/kstXkYKTfHSnmOD88XhEfsP3Rw0zPTvkxs9PDbqlh00undK1SQozAtd8ZXjBnID2XC6c88dnYwV2H5znZyRqTdcYqJKZ5OLk6Jw3bGC45vg=
Received: by 10.140.251.1 with SMTP id y1mr628040rvh.1190347509321;
        Thu, 20 Sep 2007 21:05:09 -0700 (PDT)
Received: by 10.141.146.17 with HTTP; Thu, 20 Sep 2007 21:05:09 -0700 (PDT)
Message-ID: <d5b3ea330709202105s2ed63150k3bddd6396cf80d8c@mail.gmail.com>
Date: Fri, 21 Sep 2007 09:35:09 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding proximity search
In-Reply-To: <Pine.LNX.4.62.0709201518150.4723@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10376_14760190.1190347509334"
References: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com>
	 <Pine.LNX.4.62.0709201518150.4723@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10376_14760190.1190347509334
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Hoss, for the reply. I am using Lucene 2.1.
I checked the lucene converted syntax (using Query.toString()) in both case
and found the second one actually not converting to proximity query.

"cat dog"~6 is converted to ABST:"cat dog"~4 and
(cat dog)~6 is converted to +ABST:cat +ABST:dog.

That is discarding the proximity operator in the second case.


On 9/21/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Is the query "cat dog"~6 same as (cat dog)~6 ?
> : I think both case will search for "cat" and "dog" within 6 words each
> other.
> : But I am getting different number of results for the above queries. The
> : second one may be the higher. Please clarify this.
>
> i don't believe:    (cat dog)~6     is even a legal query in the Lucene
> QueryParser sytnax ... it isn't documented, and it doesn't work in Lucene
> 2.2.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10376_14760190.1190347509334--

From java-user-return-30360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 05:31:33 2007
Return-Path: <java-user-return-30360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89760 invoked from network); 21 Sep 2007 05:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 05:31:32 -0000
Received: (qmail 11829 invoked by uid 500); 21 Sep 2007 05:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11787 invoked by uid 500); 21 Sep 2007 05:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11776 invoked by uid 99); 21 Sep 2007 05:31:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 22:31:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 05:33:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B77F671C1A2; Thu, 20 Sep 2007 22:30:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B50F071C12B
	for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 22:30:56 -0700 (PDT)
Date: Thu, 20 Sep 2007 22:30:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question regarding proximity search
In-Reply-To: <d5b3ea330709202105s2ed63150k3bddd6396cf80d8c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0709202220210.29552@radix.cryptio.net>
References: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com> 
 <Pine.LNX.4.62.0709201518150.4723@radix.cryptio.net>
 <d5b3ea330709202105s2ed63150k3bddd6396cf80d8c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I checked the lucene converted syntax (using Query.toString()) in both case
: and found the second one actually not converting to proximity query.

I don't think you understood what I was trying to say...

using parens with a "~" character after it is not currently, and has never 
been (to my knowledge) a means of creating a "proximity query".  It is not 
documented in 2.2, 2.1, 2.0, 1.9, or 1.4.3.  It is not legal syntax in 2.2 
(it causes a parse exception).  In lucene, the way to do proximity based 
queries is either with SpanNearQueries, or with PhraseQueries -- the way 
to create a PhraseQuery using hte Lucene QueryParser is with quote 
character '"'

there is no reason why you should expect:  (cat dog)~3   to create a 
proximity query.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 05:37:43 2007
Return-Path: <java-user-return-30361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91230 invoked from network); 21 Sep 2007 05:37:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 05:37:42 -0000
Received: (qmail 19024 invoked by uid 500); 21 Sep 2007 05:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18222 invoked by uid 500); 21 Sep 2007 05:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18211 invoked by uid 99); 21 Sep 2007 05:37:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 22:37:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.201.249] (HELO web30711.mail.mud.yahoo.com) (68.142.201.249)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Sep 2007 05:39:28 +0000
Received: (qmail 81450 invoked by uid 60001); 21 Sep 2007 05:37:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LXXz1II1Kenc39i5fBnXCOCUo9fdH7JgYGhHgcKuQaoOnS/8EQM2+n/ebSI5ERBS87VeWBG2sAQ9zuETJbFnuuiyxA+fpS/lONcNiUl8zZ+ul7HKVvZ8cul5pufBnH9/JIqZST80pOhgNL41ecCfay0mIqyOHgYcsW34lZcwfCA=;
X-YMail-OSG: 7U1eGHMVM1kmvZUfxkkzMZLsdntTTOtzdK567i_p6j_onnyaV2XOOfgpMz3L3BzW_QS3DusXlA--
Received: from [209.191.106.123] by web30711.mail.mud.yahoo.com via HTTP; Thu, 20 Sep 2007 22:37:04 PDT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Thu, 20 Sep 2007 22:37:04 -0700 (PDT)
From: Nikhil Chhaochharia <nikhil500@yahoo.com>
Subject: Re: Multiple Indices vs Single Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <32527.80512.qm@web30711.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Grant and Chris for the replies.=0A=0AI am looking at a single index=
 because the 40 index system has started having performance issues at high =
load.  My daily traffic is increasing at a steady pace and about 40% of the=
 traffic is concentrated in a 2 hour period and searches start slowing down=
 just a little bit.=0A=0AAll my indices have exactly the same fields, so I =
guess fieldcache and sorting are not an issue.  I do not do any updates, so=
 I just open 40 searchers and store them in a HashMap.  When a query comes,=
 I select the appropriate searcher and fire the query.  So code maintainanc=
e also is not an issue.=0A=0AThe different IDF statistics are a valid point=
.  I have not analysed the difference in the results returned - I sort of a=
ssumed the results will be same in both cases.  I will look at the differen=
ce in results.=0A=0A=0AThere is one more point.  Sooner or later, I will ha=
ve to move to multiple servers due to increasing traffic.  (I will be handl=
ing 30,000+ hits per hour by the end of the year)  One option is to have fu=
ll index on all servers and load-balance them.  Another is to have half the=
 indices on one server and half of them on the other.  The front-end (separ=
ate server) will then fire the query on the appropriate server.  Any sugges=
tions on which one would be a better choice ?  All data on all servers will=
 give me redundancy, the system will be up even if one server goes down.  A=
lso, adding more servers would be trivial.=0A=0A=0AThanks,=0ANikhil=0A=0A=
=0A----- Original Message ----=0AFrom: Chris Hostetter <hossman_lucene@fuci=
t.org>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 21 September, 2007=
 4:02:38 AM=0ASubject: Re: Multiple Indices vs Single Index=0A=0A=0A: I was=
 wondering if it will be better to just have 1 large index with all =0A: th=
e 40 indices combined.  I do not need to do dual-queries and my total =0A: =
index size (if I create a single index) is about 3.4GB.  It will =0A: incre=
ase to maximum of 5-6 GB.  I am running this on a dedicated machine =0A: wi=
th 8GB RAM.=0A=0Aoff the top of my head, there are 3 main reasons i can thi=
nk of that would =0Amotivate one choice over another -- ultimately it's up =
to you...=0A=0A1) FieldCache and sorting ... if all 40 sets of of Documents=
 contain =0Ahave consistently named fields, then there won't be much differ=
ence =0Abetween 40 indexes and 1 index ... but if each of those 40 sets con=
tain =0Adocuments with radically differnet fields -- and you want to sort o=
n N =0Adiffernet fields for each sets -- then the total FieldCache sizes fo=
r each =0Aof those 40 indexes will be smaller then the FieldCaches for one =
gian =0Aindex (because every document will get an entry wethe it makes sens=
e or =0Anot.=0A=0A2) idf statistics.  if you have common fields you search =
regardless of =0Adocument set, the 40 index approach will maintain seperate=
 sttistics -- =0Athis may be important if some terms are very common in onl=
y som docsets.  =0Athe word "albino" may be really common in docset A but o=
nly one doc in =0Adocset B has it ... in the 40 index appraoch querying B f=
or (albino =0Aelephant) will give a lot of weight to albino because it's so=
 rare, but in =0Athe single index case albino may not be considered as sign=
ificant because =0Aof ht unified idf value for all docsets 9even if hte que=
ry is constrained =0Ato docset B) ... again: this only matters if the field=
s overlap, if every =0Adocset has a unique set of fields then the idfs will=
 be unique because =0Athey are by field)=0A=0A3) management: it's probably =
a lot simpler to maintain and manage code =0Athat deals with one index then=
 code that deals with 40 indexes. you milage =0Amay vary.=0A=0A=0A-Hoss=0A=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 06:24:35 2007
Return-Path: <java-user-return-30362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7904 invoked from network); 21 Sep 2007 06:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 06:24:35 -0000
Received: (qmail 43167 invoked by uid 500); 21 Sep 2007 06:24:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43123 invoked by uid 500); 21 Sep 2007 06:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43112 invoked by uid 99); 21 Sep 2007 06:24:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 23:24:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nttstar@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 06:24:19 +0000
Received: by rv-out-0910.google.com with SMTP id k20so619698rvb
        for <java-user@lucene.apache.org>; Thu, 20 Sep 2007 23:23:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:message-id;
        bh=Bn2uQXMAcvvPC8C1R7qAwvyaekuXk83iDC4tJ7LVe8o=;
        b=miXy6EQm7uppV79t7hDgEP0G7IBqv3eHNOiKZL/u6B508SHL8BIWuJPl6JbMNcgKi+50ML9JXAB9Vtt+tZFS9WO0uI1g1zBB2ia+LHvTdS6IBAZ0Gf3qIbjn6pZSsLdr/kAjBHVHate4BeFYEjjHD/+KeB6nAUc4hj4W5Rd4KNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:message-id;
        b=l4ZON7px/ZREJyAAaOdAz/slvjDAqC8h8hmSxOEo3XjtezbCPjznC+QgCISlT6PIvr45baSs3B8c3iDxgpgumDTYWI5Jqzi8QZF8d0l6YSWreWmFK/mJJcRaOw3yYhDuHb0L4BzjvXYuNy3xJXK0Zc/akZvECqN9BbNUT9Se2dE=
Received: by 10.140.147.5 with SMTP id u5mr693236rvd.1190355839677;
        Thu, 20 Sep 2007 23:23:59 -0700 (PDT)
Received: from jarvisguo ( [221.224.52.8])
        by mx.google.com with ESMTPS id c36sm913095rvf.2007.09.20.23.23.58
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Sep 2007 23:23:59 -0700 (PDT)
From: "Jarvis" <nttstar@gmail.com>
To: <java-user@lucene.apache.org>
Subject: About the search efficiency based on document's length
Date: Fri, 21 Sep 2007 14:23:56 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acf8F/0mfaj5lqzOSOC01Jc8D86ySg==
Message-ID: <46f3637f.24b48c0a.35c5.ffffde16@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

There is a question about the document=A1=AFs length and search =
efficiency.

Think of this situation:

Two ways to index some html pages(ignore some information): one is both
store and index the html content in lucene dictionary, the other is just
index the content . For the first method is there a efficiency problem
compare to the second besides the folder size increase?

Thanks,
		Jarvis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 06:52:55 2007
Return-Path: <java-user-return-30363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15257 invoked from network); 21 Sep 2007 06:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 06:52:54 -0000
Received: (qmail 72336 invoked by uid 500); 21 Sep 2007 06:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72291 invoked by uid 500); 21 Sep 2007 06:52:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72280 invoked by uid 99); 21 Sep 2007 06:52:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Sep 2007 23:52:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 06:54:41 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:53605 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IYcN6-0001Bo-9B
	for java-user@lucene.apache.org; Fri, 21 Sep 2007 08:52:17 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46f3637f.24b48c0a.35c5.ffffde16@mx.google.com>
References: <46f3637f.24b48c0a.35c5.ffffde16@mx.google.com>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <B6FA5066-0C3F-4217-80D3-2C7F8BD162BB@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: About the search efficiency based on document's length
Date: Fri, 21 Sep 2007 08:45:21 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IYcN6-0001Bo-9B.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IYcN6-0001Bo-9B 2fd9bfe33efb79f06151fe8174a1dcaa
X-Virus-Checked: Checked by ClamAV on apache.org

21 sep 2007 kl. 08.23 skrev Jarvis:

> There is a question about the document=92s length and search =
efficiency.

> Two ways to index some html pages(ignore some information): one is =20
> both
> store and index the html content in lucene dictionary, the other is =20=

> just
> index the content . For the first method is there a efficiency problem
> compare to the second besides the folder size increase?

Not sure I understand your question, but I'll give it a go.

As far as I know, storing data in a document will not affect search =20
speed. However, loading large amounts of data to a Document will of =20
course consume resources. Therefor it is possible to pass a =20
FieldSelector to the IndexReader when you retrieve a Document, =20
allowing you to define what fields to ignore, load, lazy load, et c.

I hope this helps.

--=20
karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 07:10:11 2007
Return-Path: <java-user-return-30364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19366 invoked from network); 21 Sep 2007 07:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 07:10:10 -0000
Received: (qmail 89262 invoked by uid 500); 21 Sep 2007 07:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88918 invoked by uid 500); 21 Sep 2007 07:09:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88907 invoked by uid 99); 21 Sep 2007 07:09:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 00:09:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nttstar@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 07:09:54 +0000
Received: by rv-out-0910.google.com with SMTP id k20so627673rvb
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 00:09:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:in-reply-to:message-id;
        bh=q+HkcmNOgkalpQypFiC2Bv3SDzv2xfFoWSX06BCBb5M=;
        b=Ll1HJFUImVXjp2j2nqnvSj/QUiyPaM7y+8moVU0zNthxeNL95gDJeQo/X/Ova+RHkDMxKazVXTDK2DazBm2AVhnWDPZH8+NCn6AuvBpl6XPGaOVouMcsgnKnHsA60qYqHbAxetHG0JqVu0YkqlAXPpEGBEJXCgOW/vH9xTOpmis=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:in-reply-to:message-id;
        b=AyWQ6wmgtNU/JLnOiHKZ2ZFA1BRbG5GZiYjFM1gs4tHHScxm9qIyqzLzfzGarQMutnB5KKKiKsBwrgZ1TL5+gBTo7uR7zK6NhdjajFlR1oW7yeUHXB1uLuMh2KtUkWutvosRtFkzCztLKoqWZQXy2ljou/tHEfvDGrhdtrh9evs=
Received: by 10.141.78.14 with SMTP id f14mr182557rvl.1190358573704;
        Fri, 21 Sep 2007 00:09:33 -0700 (PDT)
Received: from jarvisguo ( [221.224.52.8])
        by mx.google.com with ESMTPS id k14sm979644rvb.2007.09.21.00.09.31
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 21 Sep 2007 00:09:32 -0700 (PDT)
From: "Jarvis" <nttstar@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: About the search efficiency based on document's length
Date: Fri, 21 Sep 2007 15:09:30 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acf8HAXNJy9FkgLISheU0+E0x5sGXAAAOQpg
In-Reply-To: <B6FA5066-0C3F-4217-80D3-2C7F8BD162BB@gmail.com>
Message-ID: <46f36e2c.0e578c0a.5824.ffffedf8@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Storing data in a document will not affect search speed.=20

This is helpful .=20

And another question :)

When I make a search which will return 500000 results , it will be very
inefficient when I want to get the document between the No.450000 to
No.450010 or some back document . Why was it ? Or some solution ?

Thanks,
		Jarvis .=20


-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Sent: Friday, September 21, 2007 2:45 PM
To: java-user@lucene.apache.org
Subject: Re: About the search efficiency based on document's length

21 sep 2007 kl. 08.23 skrev Jarvis:

> There is a question about the document=A1=AFs length and search =
efficiency.

> Two ways to index some html pages(ignore some information): one is =20
> both
> store and index the html content in lucene dictionary, the other is =20
> just
> index the content . For the first method is there a efficiency problem
> compare to the second besides the folder size increase?

Not sure I understand your question, but I'll give it a go.

As far as I know, storing data in a document will not affect search =20
speed. However, loading large amounts of data to a Document will of =20
course consume resources. Therefor it is possible to pass a =20
FieldSelector to the IndexReader when you retrieve a Document, =20
allowing you to define what fields to ignore, load, lazy load, et c.

I hope this helps.

--=20
karl
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 07:42:36 2007
Return-Path: <java-user-return-30365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33931 invoked from network); 21 Sep 2007 07:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 07:42:35 -0000
Received: (qmail 41613 invoked by uid 500); 21 Sep 2007 07:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41578 invoked by uid 500); 21 Sep 2007 07:42:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41567 invoked by uid 99); 21 Sep 2007 07:42:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 00:42:20 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 07:44:22 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:53868 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IYd9C-00027j-9O
	for java-user@lucene.apache.org; Fri, 21 Sep 2007 09:41:59 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46f36e2c.0e578c0a.5824.ffffedf8@mx.google.com>
References: <46f36e2c.0e578c0a.5824.ffffedf8@mx.google.com>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <DA4226B9-485E-4772-B27E-302FC9CE2379@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: About the search efficiency based on document's length
Date: Fri, 21 Sep 2007 09:35:05 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IYd9C-00027j-9O.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IYd9C-00027j-9O 078a29cbcbbd10f2f7fdb0568bd96161
X-Virus-Checked: Checked by ClamAV on apache.org


21 sep 2007 kl. 09.09 skrev Jarvis:

> Storing data in a document will not affect search speed.
>
> This is helpful .

Someone should probably confirm that though.

>
> And another question :)
>
> When I make a search which will return 500000 results , it will be =20
> very
> inefficient when I want to get the document between the No.450000 to
> No.450010 or some back document . Why was it ? Or some solution ?

I suppose you are referring to the class Hits? It should only be an =20
extra cost if you iterate a lot of documents priot to index 450000, =20
as that will force it to replace the query now and then.

It is a pretty simple peice of code. Go right ahead and take a look =20
at it:

<http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/=20
apache/lucene/search/Hits.java>


--=20
karl




> Thanks,
> 		Jarvis .
>
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: Friday, September 21, 2007 2:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: About the search efficiency based on document's length
>
> 21 sep 2007 kl. 08.23 skrev Jarvis:
>
>> There is a question about the document=92s length and search =20
>> efficiency.
>
>> Two ways to index some html pages(ignore some information): one is
>> both
>> store and index the html content in lucene dictionary, the other is
>> just
>> index the content . For the first method is there a efficiency =20
>> problem
>> compare to the second besides the folder size increase?
>
> Not sure I understand your question, but I'll give it a go.
>
> As far as I know, storing data in a document will not affect search
> speed. However, loading large amounts of data to a Document will of
> course consume resources. Therefor it is possible to pass a
> FieldSelector to the IndexReader when you retrieve a Document,
> allowing you to define what fields to ignore, load, lazy load, et c.
>
> I hope this helps.
>
> --=20
> karl
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 07:46:30 2007
Return-Path: <java-user-return-30366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35021 invoked from network); 21 Sep 2007 07:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 07:46:29 -0000
Received: (qmail 53406 invoked by uid 500); 21 Sep 2007 07:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53361 invoked by uid 500); 21 Sep 2007 07:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53333 invoked by uid 99); 21 Sep 2007 07:46:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 00:46:11 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 07:48:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 6EE1433501CF
	for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 09:45:49 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (localhost [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 02251-10 for <java-user@lucene.apache.org>;
 Fri, 21 Sep 2007 09:45:43 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id A0388335019F
	for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 09:45:43 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <62256247-A1E3-42C2-B57A-C418086968C0@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-25--547342386
From: Antoine Baudoux <ab@taktik.be>
Subject: Does a Term need to be stored to use a Field cache on this term?
Date: Fri, 21 Sep 2007 09:45:38 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-25--547342386
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Hi , just a simple question :


	Does a Field need to be stored(Field.store.YES) to use a Field =
cache =20
on this Field?


thx!


--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-25--547342386--

From java-user-return-30367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 09:53:19 2007
Return-Path: <java-user-return-30367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73507 invoked from network); 21 Sep 2007 09:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 09:53:18 -0000
Received: (qmail 11776 invoked by uid 500); 21 Sep 2007 09:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11740 invoked by uid 500); 21 Sep 2007 09:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11728 invoked by uid 99); 21 Sep 2007 09:53:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 02:53:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Sep 2007 09:55:05 +0000
Received: (qmail 1175 invoked by uid 60001); 21 Sep 2007 09:52:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ZrkRsHmETl/BsvNnV1AxZYPO4E5ORpsPRtY7JOJRLGEpo9DpUzcyhgNJHj9Uown8zbUfsjbxmCn4xS/m0qi2rvDxrJg/DC31t38m64Rm7zMkWRN1ZeUBWNhm0Z0q4/BUejcLLhLpIAbEQVysBXBLrEO++9sAOj0oq8A8GKOPQCU=;
X-YMail-OSG: sebUNlYVM1nE1NM2yUm0.ugNhi8_hwUrAYqjLuOjRXUXwBquXB9zTK6EN_V0h5nm2E6YqCLvZeSMCP.lLnfHnpaMhAKzFMzOhgdkkEoPjvK4EBEWkQz_KYBk5MY-
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Fri, 21 Sep 2007 09:52:41 GMT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Fri, 21 Sep 2007 09:52:41 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: About the search efficiency based on document's length
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <620547.847.qm@web26004.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This may be of interest:=0A=0Ahttp://mail-archives.apache.org/mod_mbox/luce=
ne-java-user/200707.mbox/%3c62924.70068.qm@web26010.mail.ukl.yahoo.com%3e=
=0A=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Karl Wet=
tin <karl.wettin@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Frida=
y, 21 September, 2007 8:35:05 AM=0ASubject: Re: About the search efficiency=
 based on document's length=0A=0A=0A21 sep 2007 kl. 09.09 skrev Jarvis:=0A=
=0A> Storing data in a document will not affect search speed.=0A>=0A> This =
is helpful .=0A=0ASomeone should probably confirm that though.=0A=0A>=0A> A=
nd another question :)=0A>=0A> When I make a search which will return 50000=
0 results , it will be  =0A> very=0A> inefficient when I want to get the do=
cument between the No.450000 to=0A> No.450010 or some back document . Why w=
as it ? Or some solution ?=0A=0AI suppose you are referring to the class Hi=
ts? It should only be an  =0Aextra cost if you iterate a lot of documents p=
riot to index 450000,  =0Aas that will force it to replace the query now an=
d then.=0A=0AIt is a pretty simple peice of code. Go right ahead and take a=
 look  =0Aat it:=0A=0A<http://svn.apache.org/repos/asf/lucene/java/trunk/sr=
c/java/org/ =0Aapache/lucene/search/Hits.java>=0A=0A=0A-- =0Akarl=0A=0A=0A=
=0A=0A> Thanks,=0A>         Jarvis .=0A>=0A>=0A> -----Original Message-----=
=0A> From: Karl Wettin [mailto:karl.wettin@gmail.com]=0A> Sent: Friday, Sep=
tember 21, 2007 2:45 PM=0A> To: java-user@lucene.apache.org=0A> Subject: Re=
: About the search efficiency based on document's length=0A>=0A> 21 sep 200=
7 kl. 08.23 skrev Jarvis:=0A>=0A>> There is a question about the document=
=92s length and search  =0A>> efficiency.=0A>=0A>> Two ways to index some h=
tml pages(ignore some information): one is=0A>> both=0A>> store and index t=
he html content in lucene dictionary, the other is=0A>> just=0A>> index the=
 content . For the first method is there a efficiency  =0A>> problem=0A>> c=
ompare to the second besides the folder size increase?=0A>=0A> Not sure I u=
nderstand your question, but I'll give it a go.=0A>=0A> As far as I know, s=
toring data in a document will not affect search=0A> speed. However, loadin=
g large amounts of data to a Document will of=0A> course consume resources.=
 Therefor it is possible to pass a=0A> FieldSelector to the IndexReader whe=
n you retrieve a Document,=0A> allowing you to define what fields to ignore=
, load, lazy load, et c.=0A>=0A> I hope this helps.=0A>=0A> -- =0A> karl=0A=
> ---------------------------------------------------------------------=0A>=
 To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A> ---=
------------------------------------------------------------------=0A> To u=
nsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additio=
nal commands, e-mail: java-user-help@lucene.apache.org=0A>=0A=0A=0A--------=
-------------------------------------------------------------=0ATo unsubscr=
ibe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ___=
________________________________________________________=0AYahoo! Answers -=
 Got a question? Someone out there knows the answer. Try it=0Anow.=0Ahttp:/=
/uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 10:50:33 2007
Return-Path: <java-user-return-30368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96672 invoked from network); 21 Sep 2007 10:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 10:50:32 -0000
Received: (qmail 4207 invoked by uid 500); 21 Sep 2007 10:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3936 invoked by uid 500); 21 Sep 2007 10:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3924 invoked by uid 99); 21 Sep 2007 10:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 03:50:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 10:50:16 +0000
Received: by nf-out-0910.google.com with SMTP id d3so646939nfc
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 03:49:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index:message-id;
        bh=lBalj8xKWXkTscDxWB8tX8aZBeXHh/W1V+5+fEiHB6A=;
        b=JIbab3sLokiMeJl/Oun71KaIKK2O94JMandc+6fb+G8aMABcuKiEbvZu2Vfpc6P6wI1DmFGoj71nnfsZlrbOs6ByFFoNV+MdS264Qzs24vC6dfP6GauzB2S2EIPXwo7+3ntuj2fvKWXcWXu9p7WQzIt9ajaJmguP+gkNzRPKopA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index:message-id;
        b=tqhpuWxCaFYwgoD46LMWytcf2CrdheXDRkPQbfNXdXS6RNpyusKKwMRsbUfVYLLot1Ns88ZtaxakO+ZkAbBQOqUzDb1Av584KSceCMq3my6JGSaj71wO1Lz2Y2Xi5aTVutwa4/f0XvraVRsC9YGe1c1wuwHkTXsCJBlgbDLnkrM=
Received: by 10.78.171.20 with SMTP id t20mr1878657hue.1190371794846;
        Fri, 21 Sep 2007 03:49:54 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [62.249.212.129])
        by mx.google.com with ESMTPS id 35sm421711huc.2007.09.21.03.49.52
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 21 Sep 2007 03:49:53 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Multiple Indices vs Single Index
Date: Fri, 21 Sep 2007 11:49:29 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <32527.80512.qm@web30711.mail.mud.yahoo.com>
Thread-Index: Acf8EYY6ks02EEDXTz6fy2G9qaR5rwAJCc9A
Message-ID: <46f3a1d1.23034e0a.064d.5401@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In a similar scenario, if we had more than 40 of such grouping, on which the
hits (not lucene hits, but hit for search by users) are not evenly
distributed, would it be good to have a LRU caching mechanism for searcher
objects.

Is there any sort of grey are that should be avoided in doing that?


-----Original Message-----
From: Nikhil Chhaochharia [mailto:nikhil500@yahoo.com] 
Sent: 21 September 2007 06:37
To: java-user@lucene.apache.org
Subject: Re: Multiple Indices vs Single Index

Thanks Grant and Chris for the replies.

I am looking at a single index because the 40 index system has started
having performance issues at high load.  My daily traffic is increasing at a
steady pace and about 40% of the traffic is concentrated in a 2 hour period
and searches start slowing down just a little bit.

All my indices have exactly the same fields, so I guess fieldcache and
sorting are not an issue.  I do not do any updates, so I just open 40
searchers and store them in a HashMap.  When a query comes, I select the
appropriate searcher and fire the query.  So code maintainance also is not
an issue.

The different IDF statistics are a valid point.  I have not analysed the
difference in the results returned - I sort of assumed the results will be
same in both cases.  I will look at the difference in results.


There is one more point.  Sooner or later, I will have to move to multiple
servers due to increasing traffic.  (I will be handling 30,000+ hits per
hour by the end of the year)  One option is to have full index on all
servers and load-balance them.  Another is to have half the indices on one
server and half of them on the other.  The front-end (separate server) will
then fire the query on the appropriate server.  Any suggestions on which one
would be a better choice ?  All data on all servers will give me redundancy,
the system will be up even if one server goes down.  Also, adding more
servers would be trivial.


Thanks,
Nikhil


----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Friday, 21 September, 2007 4:02:38 AM
Subject: Re: Multiple Indices vs Single Index


: I was wondering if it will be better to just have 1 large index with all 
: the 40 indices combined.  I do not need to do dual-queries and my total 
: index size (if I create a single index) is about 3.4GB.  It will 
: increase to maximum of 5-6 GB.  I am running this on a dedicated machine 
: with 8GB RAM.

off the top of my head, there are 3 main reasons i can think of that would 
motivate one choice over another -- ultimately it's up to you...

1) FieldCache and sorting ... if all 40 sets of of Documents contain 
have consistently named fields, then there won't be much difference 
between 40 indexes and 1 index ... but if each of those 40 sets contain 
documents with radically differnet fields -- and you want to sort on N 
differnet fields for each sets -- then the total FieldCache sizes for each 
of those 40 indexes will be smaller then the FieldCaches for one gian 
index (because every document will get an entry wethe it makes sense or 
not.

2) idf statistics.  if you have common fields you search regardless of 
document set, the 40 index approach will maintain seperate sttistics -- 
this may be important if some terms are very common in only som docsets.  
the word "albino" may be really common in docset A but only one doc in 
docset B has it ... in the 40 index appraoch querying B for (albino 
elephant) will give a lot of weight to albino because it's so rare, but in 
the single index case albino may not be considered as significant because 
of ht unified idf value for all docsets 9even if hte query is constrained 
to docset B) ... again: this only matters if the fields overlap, if every 
docset has a unique set of fields then the idfs will be unique because 
they are by field)

3) management: it's probably a lot simpler to maintain and manage code 
that deals with one index then code that deals with 40 indexes. you milage 
may vary.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 13:15:34 2007
Return-Path: <java-user-return-30369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62124 invoked from network); 21 Sep 2007 13:15:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 13:15:32 -0000
Received: (qmail 42358 invoked by uid 500); 21 Sep 2007 13:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42323 invoked by uid 500); 21 Sep 2007 13:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42297 invoked by uid 99); 21 Sep 2007 13:15:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 06:15:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 13:15:10 +0000
Received: by rv-out-0910.google.com with SMTP id k20so692469rvb
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 06:14:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=v2BtHeS0X+gtl3AWAoMW6TGY6gS1o29swTv3a+OGjoI=;
        b=ToQLfQcS9raOnSnhvulajbaGtGtzj8WIuo+gAiN1btkcAhcb1F1iBX8DXeDn6WoZ6GOduG45Ne1URN/cAnM4zD4M0pTIHUKSoUDLeZLeIIDSjBahysfgYz3+QBFgQAqRvfjQ8068CxyQcD8rzEY9luVHsYBGADjxaTpgL7eaXj4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tv8obhMgzXUxEUVEYeIoZemz/xfMHXKlqAmgUwYQ7kzAZDc394rBwIh+x0P63C+xIAH7sfG1xt94s9sz6H8RGSxzHdQRv0YmRaS2We6K2ogI0lupdUbaC3KerBNLfT7gKVO2ge4eTfoeFiZNRmvDXOVgECl2wx73wVBFASH/tHU=
Received: by 10.141.159.13 with SMTP id l13mr696144rvo.1190380490623;
        Fri, 21 Sep 2007 06:14:50 -0700 (PDT)
Received: by 10.141.146.17 with HTTP; Fri, 21 Sep 2007 06:14:50 -0700 (PDT)
Message-ID: <d5b3ea330709210614n3c7e9fa2xc18998cef056ff36@mail.gmail.com>
Date: Fri, 21 Sep 2007 18:44:50 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding proximity search
In-Reply-To: <Pine.LNX.4.62.0709202220210.29552@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10932_26557863.1190380490572"
References: <d5b3ea330709200655y5e029647le785770b3a7a2fd9@mail.gmail.com>
	 <Pine.LNX.4.62.0709201518150.4723@radix.cryptio.net>
	 <d5b3ea330709202105s2ed63150k3bddd6396cf80d8c@mail.gmail.com>
	 <Pine.LNX.4.62.0709202220210.29552@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10932_26557863.1190380490572
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I understood what you said. What I meant is, since i am using Lucene
2.1, I don't get the parse exception. So I thought it's working just like
using quotes.

Thanks,
Sonu

On 9/21/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I checked the lucene converted syntax (using Query.toString()) in both
> case
> : and found the second one actually not converting to proximity query.
>
> I don't think you understood what I was trying to say...
>
> using parens with a "~" character after it is not currently, and has never
> been (to my knowledge) a means of creating a "proximity query".  It is not
> documented in 2.2, 2.1, 2.0, 1.9, or 1.4.3.  It is not legal syntax in 2.2
> (it causes a parse exception).  In lucene, the way to do proximity based
> queries is either with SpanNearQueries, or with PhraseQueries -- the way
> to create a PhraseQuery using hte Lucene QueryParser is with quote
> character '"'
>
> there is no reason why you should expect:  (cat dog)~3   to create a
> proximity query.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10932_26557863.1190380490572--

From java-user-return-30370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 17:04:29 2007
Return-Path: <java-user-return-30370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24111 invoked from network); 21 Sep 2007 17:04:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 17:04:28 -0000
Received: (qmail 21929 invoked by uid 500); 21 Sep 2007 17:04:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21895 invoked by uid 500); 21 Sep 2007 17:04:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21884 invoked by uid 99); 21 Sep 2007 17:04:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 10:04:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 17:04:11 +0000
Received: by fk-out-0910.google.com with SMTP id z23so851016fkz
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 10:03:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=gkUzgLpe+IK74ULzBwF2uHwmEHxdMu1RaQ69VeVBkQs=;
        b=QMvFhRv9pSuJHVZunGPGsYw1znlP6aLug5cuRZs9qLgr27m/PRonR8v/sNVAh1W6xayMj/3ZKXC98LHFXZIqumMBXy7jhspg3+DctESGfAt97XDb+lUvCG3Y3HjuJmcHpby1/tqV05pT031CN6cGU3rX5tuEZM4e7iMlUHgVWoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cqXCxH55RlCWFsDgfPvhYPmh8bG4uGmVMK56GXFvOkBMQA/5W+J29/rqzHrBL3cY+3f++hDq+U0Io5eJOS48aCuE4Q1FqEkvZLPTyzZ7hTw99W+deZ/yJqJyN2j6x8Aqe6KXIql0ZX/Rjf2aLg2HVxbq+ewGGdIFetqdAOUvCHE=
Received: by 10.82.172.10 with SMTP id u10mr3122936bue.1190394227946;
        Fri, 21 Sep 2007 10:03:47 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 21 Sep 2007 10:03:47 -0700 (PDT)
Message-ID: <359a92830709211003u414cabb7md9a521ba24d7be77@mail.gmail.com>
Date: Fri, 21 Sep 2007 13:03:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: highlighting and fragments
In-Reply-To: <46F2E853.50800@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30790_22637744.1190394227944"
References: <46F2E853.50800@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30790_22637744.1190394227944
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Out of curiosity, how big is huge? And how many documents and
fields?

And a silly question, are you storing your fields or not (i.e.
Field.Store.NO????

Erick

On 9/20/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
> Hello Folks,
>
> I wanted to stay away from storing text in the indexes in order to keep
> them smaller.  I have a requirement now though to provide highlighting
> and, more so, fragments of the content so they will be displayed on the
> UI.
>
> Do you all prefer to store the text in the index to make this easier or
> would you suggest retrieving the text from the source after doing your
> search.  From I can tell you need to run through the Hits anyway....
>
> I am trying to keep the indexes as small as possible (they are still
> HUGE...but...) so storing fields is not really what I want to do.  I
> will if it is the best and most efficient way to do so.
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30790_22637744.1190394227944--

From java-user-return-30371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 19:03:24 2007
Return-Path: <java-user-return-30371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78888 invoked from network); 21 Sep 2007 19:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 19:03:23 -0000
Received: (qmail 12314 invoked by uid 500); 21 Sep 2007 19:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12284 invoked by uid 500); 21 Sep 2007 19:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12269 invoked by uid 99); 21 Sep 2007 19:03:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 12:03:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 19:03:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IYnm1-00068Z-SM
	for java-user@lucene.apache.org; Fri, 21 Sep 2007 12:02:45 -0700
Message-ID: <12827864.post@talk.nabble.com>
Date: Fri, 21 Sep 2007 12:02:45 -0700 (PDT)
From: Galactikuh <kshanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Help with Snowball Analyzer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kshanti@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am using SnowballAnalyzer with Hibernate search. I am using it to search
phrases in a database. It only seems to return the stemmed version of any
query. So for example, I have two phrases in the DB:

"Cheney is a nut"
and
"I hate nuts"

When I do a search for either "nut" or "nuts" it only returns "Cheney is a
nut"

This is what seems to be inside my index file:

 'cheney' 'hate' 'i' 'nut' 's' 

Here is the code, although it's hibernate so not sure if it's relevant or
will mean anything to anyone here.

Thanks,
Kshanti

import javax.persistence.EntityManager;

import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.queryParser.QueryParser;
import org.hibernate.*;

public class LuceneSearch 
{

   public enum Similarity
   {
      KEYWORDS,
      HIGH,
      EXPAND,
      EXACT,
      
   }
   
   public static final String TEXT_FIELD = "TEXT";
   
   private static final String HIBERNATE_FILE = "META-INF/persistence.xml";

   private QueryParser _parser;

   private String[] _stopWords;

   private FullTextSession _textSession;

   private EntityManager _entityManager;
   
   private Similarity _defaultSimilarity=Similarity.KEYWORDS;
   
   private boolean _beenIndexed=false;
   
   public static boolean UseStemmer=true;
   
   public LuceneSearch(EntityManager entityMgr)
   {
      if (null == entityMgr)
         throw new IllegalArgumentException("entityMgr must not be null.");
      
      _entityManager = entityMgr;
      // Have to use sessions here
      try
      {
         Session session = (Session) _entityManager.getDelegate();
         _textSession = Search.createFullTextSession(session);
         initialize(null);
      }
      catch (ClassCastException ce)
      {
         // this error supposedly should not get thrown as getDelegate()
         // supposedly always returns a Session, but just in case.
         // (this was from examples on the web and the #hibernate channel so
         // needs to be verified
         ce.printStackTrace();
         // TODO: Wrap it up and do something else with it
         throw ce;
      }
   }

   private void initialize(String[] stopWords)
   {
      if (stopWords != null)
      {
         // first set up the parser with the new stop words
       
         if(UseStemmer)
         {
            _parser = new QueryParser(TEXT_FIELD, new
SnowballAnalyzer("English",stopWords));
         }
         else
         {
            _parser = new QueryParser(TEXT_FIELD, new
StandardAnalyzer(stopWords));
         }
      }
      else
      {  // default stop words
         if(UseStemmer)
         {
            _parser = new QueryParser(TEXT_FIELD, new
SnowballAnalyzer("English"));
         }
         else
         {
            _parser = new QueryParser(TEXT_FIELD, new StandardAnalyzer());
         }
      }
      
      _stopWords = stopWords;
   }

   /***
    * Run the indexer
    */
   public void index()
   {
    //now index
      
      Transaction tx = _textSession.beginTransaction();
      List<Prediction> predictions = _textSession.createQuery("from
Prediction as prediction").list();
      for(Prediction pred: predictions)
      {
         _textSession.index(pred);
      }
      tx.commit(); //index are written at commit time
      _beenIndexed=true;
   }
   
   public List<Prediction> searchPredictions(String queryStr)
   {
      // look in text column of predictions
      try
      {
         if (queryStr != null && !queryStr.equals(""))
         {
            // need to add the field name to the querystring
            queryStr = TEXT_FIELD + ":" + queryStr;
            org.apache.lucene.search.Query luceneQuery =
_parser.parse(queryStr);
            Query query = _textSession.createFullTextQuery(luceneQuery,
                  Prediction.class);
            List<Prediction> ret = query.list();
          //default fits the KEYWORDS similarity
            if (ret != null)
            {
               switch(_defaultSimilarity)
               {

                  case KEYWORDS:
                  case HIGH:
                  case EXPAND:
                  case EXACT:
                 
                     return ret;
                     
               }
               
            }
         }
      }
      catch (Exception pe)
      {// KKG TODO: Turn this into a better exception
         pe.printStackTrace();
      }
      return new ArrayList<Prediction>();
   }
}



-- 
View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 20:11:13 2007
Return-Path: <java-user-return-30372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1741 invoked from network); 21 Sep 2007 20:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 20:11:12 -0000
Received: (qmail 86394 invoked by uid 500); 21 Sep 2007 20:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85437 invoked by uid 500); 21 Sep 2007 20:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85420 invoked by uid 99); 21 Sep 2007 20:10:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 13:10:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.73] (HELO smtpoutm.mac.com) (17.148.16.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 20:12:57 +0000
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpoutm.mac.com (Xserve/smtpout010/MantshX 4.0) with ESMTP id l8LKAVx4005046
	for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 13:10:31 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id l8LKAS4w029440
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 13:10:29 -0700 (PDT)
Message-ID: <46F42534.3060301@mac.com>
Date: Fri, 21 Sep 2007 16:10:28 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting and fragments
References: <46F2E853.50800@mac.com> <359a92830709211003u414cabb7md9a521ba24d7be77@mail.gmail.com>
In-Reply-To: <359a92830709211003u414cabb7md9a521ba24d7be77@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------000204060905010808080203"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000204060905010808080203
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

One index is around 3,000,000 items.  I think around 10 fields.  I store 
some and don't others.  I index email content and attachment content.  I 
store some smaller fields and not the content fields.  That current 
index is around 10GB but that is nothing that is about to come down the 
pike.  Maybe looking at indexes 10x that.

Thoughts?

-Michael

Erick Erickson wrote:
> Out of curiosity, how big is huge? And how many documents and
> fields?
>
> And a silly question, are you storing your fields or not (i.e.
> Field.Store.NO????
>
> Erick
>
> On 9/20/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>   
>> Hello Folks,
>>
>> I wanted to stay away from storing text in the indexes in order to keep
>> them smaller.  I have a requirement now though to provide highlighting
>> and, more so, fragments of the content so they will be displayed on the
>> UI.
>>
>> Do you all prefer to store the text in the index to make this easier or
>> would you suggest retrieving the text from the source after doing your
>> search.  From I can tell you need to run through the Hits anyway....
>>
>> I am trying to keep the indexes as small as possible (they are still
>> HUGE...but...) so storing fields is not really what I want to do.  I
>> will if it is the best and most efficient way to do so.
>>
>> Thanks,
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


--------------000204060905010808080203--

From java-user-return-30373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 21:37:03 2007
Return-Path: <java-user-return-30373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28549 invoked from network); 21 Sep 2007 21:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 21:37:02 -0000
Received: (qmail 16913 invoked by uid 500); 21 Sep 2007 21:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16884 invoked by uid 500); 21 Sep 2007 21:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16873 invoked by uid 99); 21 Sep 2007 21:36:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 14:36:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 21:36:45 +0000
Received: by fk-out-0910.google.com with SMTP id z23so907608fkz
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 14:36:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Z/alluwSSNiEAZXZlYFuD6KqZV9YM7vTQuOW0Xeq/k4=;
        b=LT2bjvNUswa0xmNq0caFOfSiIa4OqdmFFfMlfTfqWoRRfw0LQAmzf+/e8BuiCu4gT/cn/SYsY5RJsYIHyVDI7whqlTMugmlTwhPT0UfysUb6yyC/O1boPWymByc2ZwfRc6QZ4Zhox5tcukq05jD/IN4H6jyfC5VKtuDKhsNp4PE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GW0Y8kkQvmEj1COFEjQ4KyUfcyFKFajC7TH+/7FSkW4NYH9d5nyTXMRbdoqpy2O8yuyEg6gRfTxEPW/+NP7E+qCjdwnFUe7RwhHfuXnrVoY7TriwWUtx4RAR2RJsVVSNL8PdjkQ5xvyYPMqLAfg8OltAOSvhxJpSKYRmBBR1QpE=
Received: by 10.82.158.12 with SMTP id g12mr2837643bue.1190410583777;
        Fri, 21 Sep 2007 14:36:23 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 21 Sep 2007 14:36:23 -0700 (PDT)
Message-ID: <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
Date: Fri, 21 Sep 2007 17:36:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <12827864.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31768_222171.1190410583749"
References: <12827864.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31768_222171.1190410583749
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you gotten a copy of Luke and examined your index
to see if what's in there is actually what you think? I've found
it invaluable (see the Lucene pages).

Also, query.toString() is your friend. It'll show you what the
actual query looks like after parsing.

You could also, as a test, construct a BooleanQuery
with the term "nut" and see what comes back....

Is it possible that UseStemmer is being set to false somehow
for the query parser (perhaps in code you didn't post?). That
would account for it...

Best
Erick

On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>
>
> I am using SnowballAnalyzer with Hibernate search. I am using it to search
> phrases in a database. It only seems to return the stemmed version of any
> query. So for example, I have two phrases in the DB:
>
> "Cheney is a nut"
> and
> "I hate nuts"
>
> When I do a search for either "nut" or "nuts" it only returns "Cheney is a
> nut"
>
> This is what seems to be inside my index file:
>
> 'cheney' 'hate' 'i' 'nut' 's'
>
> Here is the code, although it's hibernate so not sure if it's relevant or
> will mean anything to anyone here.
>
> Thanks,
> Kshanti
>
> import javax.persistence.EntityManager;
>
> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.queryParser.QueryParser;
> import org.hibernate.*;
>
> public class LuceneSearch
> {
>
>    public enum Similarity
>    {
>       KEYWORDS,
>       HIGH,
>       EXPAND,
>       EXACT,
>
>    }
>
>    public static final String TEXT_FIELD = "TEXT";
>
>    private static final String HIBERNATE_FILE =
> "META-INF/persistence.xml";
>
>    private QueryParser _parser;
>
>    private String[] _stopWords;
>
>    private FullTextSession _textSession;
>
>    private EntityManager _entityManager;
>
>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
>
>    private boolean _beenIndexed=false;
>
>    public static boolean UseStemmer=true;
>
>    public LuceneSearch(EntityManager entityMgr)
>    {
>       if (null == entityMgr)
>          throw new IllegalArgumentException("entityMgr must not be
> null.");
>
>       _entityManager = entityMgr;
>       // Have to use sessions here
>       try
>       {
>          Session session = (Session) _entityManager.getDelegate();
>          _textSession = Search.createFullTextSession(session);
>          initialize(null);
>       }
>       catch (ClassCastException ce)
>       {
>          // this error supposedly should not get thrown as getDelegate()
>          // supposedly always returns a Session, but just in case.
>          // (this was from examples on the web and the #hibernate channel
> so
>          // needs to be verified
>          ce.printStackTrace();
>          // TODO: Wrap it up and do something else with it
>          throw ce;
>       }
>    }
>
>    private void initialize(String[] stopWords)
>    {
>       if (stopWords != null)
>       {
>          // first set up the parser with the new stop words
>
>          if(UseStemmer)
>          {
>             _parser = new QueryParser(TEXT_FIELD, new
> SnowballAnalyzer("English",stopWords));
>          }
>          else
>          {
>             _parser = new QueryParser(TEXT_FIELD, new
> StandardAnalyzer(stopWords));
>          }
>       }
>       else
>       {  // default stop words
>          if(UseStemmer)
>          {
>             _parser = new QueryParser(TEXT_FIELD, new
> SnowballAnalyzer("English"));
>          }
>          else
>          {
>             _parser = new QueryParser(TEXT_FIELD, new StandardAnalyzer());
>          }
>       }
>
>       _stopWords = stopWords;
>    }
>
>    /***
>     * Run the indexer
>     */
>    public void index()
>    {
>     //now index
>
>       Transaction tx = _textSession.beginTransaction();
>       List<Prediction> predictions = _textSession.createQuery("from
> Prediction as prediction").list();
>       for(Prediction pred: predictions)
>       {
>          _textSession.index(pred);
>       }
>       tx.commit(); //index are written at commit time
>       _beenIndexed=true;
>    }
>
>    public List<Prediction> searchPredictions(String queryStr)
>    {
>       // look in text column of predictions
>       try
>       {
>          if (queryStr != null && !queryStr.equals(""))
>          {
>             // need to add the field name to the querystring
>             queryStr = TEXT_FIELD + ":" + queryStr;
>             org.apache.lucene.search.Query luceneQuery =
> _parser.parse(queryStr);
>             Query query = _textSession.createFullTextQuery(luceneQuery,
>                   Prediction.class);
>             List<Prediction> ret = query.list();
>           //default fits the KEYWORDS similarity
>             if (ret != null)
>             {
>                switch(_defaultSimilarity)
>                {
>
>                   case KEYWORDS:
>                   case HIGH:
>                   case EXPAND:
>                   case EXACT:
>
>                      return ret;
>
>                }
>
>             }
>          }
>       }
>       catch (Exception pe)
>       {// KKG TODO: Turn this into a better exception
>          pe.printStackTrace();
>       }
>       return new ArrayList<Prediction>();
>    }
> }
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31768_222171.1190410583749--

From java-user-return-30374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 21 22:28:31 2007
Return-Path: <java-user-return-30374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39004 invoked from network); 21 Sep 2007 22:28:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Sep 2007 22:28:30 -0000
Received: (qmail 66656 invoked by uid 500); 21 Sep 2007 22:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66620 invoked by uid 500); 21 Sep 2007 22:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66609 invoked by uid 99); 21 Sep 2007 22:28:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 15:28:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 22:30:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IYqyV-0003Es-2E
	for java-user@lucene.apache.org; Fri, 21 Sep 2007 15:27:51 -0700
Message-ID: <12830915.post@talk.nabble.com>
Date: Fri, 21 Sep 2007 15:27:51 -0700 (PDT)
From: Galactikuh <kshanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kshanti@gmail.com
References: <12827864.post@talk.nabble.com> <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, thanks for your help..

My query.toString() when I do a search for "nuts"  is:
FullTextQueryImpl(TEXT:nut)

And the results from Luke are:

2	_hibernate_class	com.stottlerhenke.predict.service.persistence.Prediction
1	TEXT	i
1	TEXT	nut
1	TEXT	nuts
1	TEXT	hate
1	_id	2
1	_id	3
1	TEXT	cheney


But I'm not sure if that's what I should expect or not. :-) Yes UseStemmer
has been true (just wasn't when I copied the code). if stemmer is off then
it returns "I hate nuts" when I use the query "nuts" as expected.

So it seems to be stemming the query but not the search index.


Erick Erickson wrote:
> 
> Have you gotten a copy of Luke and examined your index
> to see if what's in there is actually what you think? I've found
> it invaluable (see the Lucene pages).
> 
> Also, query.toString() is your friend. It'll show you what the
> actual query looks like after parsing.
> 
> You could also, as a test, construct a BooleanQuery
> with the term "nut" and see what comes back....
> 
> Is it possible that UseStemmer is being set to false somehow
> for the query parser (perhaps in code you didn't post?). That
> would account for it...
> 
> Best
> Erick
> 
> On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>>
>>
>> I am using SnowballAnalyzer with Hibernate search. I am using it to
>> search
>> phrases in a database. It only seems to return the stemmed version of any
>> query. So for example, I have two phrases in the DB:
>>
>> "Cheney is a nut"
>> and
>> "I hate nuts"
>>
>> When I do a search for either "nut" or "nuts" it only returns "Cheney is
>> a
>> nut"
>>
>> This is what seems to be inside my index file:
>>
>> 'cheney' 'hate' 'i' 'nut' 's'
>>
>> Here is the code, although it's hibernate so not sure if it's relevant or
>> will mean anything to anyone here.
>>
>> Thanks,
>> Kshanti
>>
>> import javax.persistence.EntityManager;
>>
>> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.hibernate.*;
>>
>> public class LuceneSearch
>> {
>>
>>    public enum Similarity
>>    {
>>       KEYWORDS,
>>       HIGH,
>>       EXPAND,
>>       EXACT,
>>
>>    }
>>
>>    public static final String TEXT_FIELD = "TEXT";
>>
>>    private static final String HIBERNATE_FILE =
>> "META-INF/persistence.xml";
>>
>>    private QueryParser _parser;
>>
>>    private String[] _stopWords;
>>
>>    private FullTextSession _textSession;
>>
>>    private EntityManager _entityManager;
>>
>>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
>>
>>    private boolean _beenIndexed=false;
>>
>>    public static boolean UseStemmer=true;
>>
>>    public LuceneSearch(EntityManager entityMgr)
>>    {
>>       if (null == entityMgr)
>>          throw new IllegalArgumentException("entityMgr must not be
>> null.");
>>
>>       _entityManager = entityMgr;
>>       // Have to use sessions here
>>       try
>>       {
>>          Session session = (Session) _entityManager.getDelegate();
>>          _textSession = Search.createFullTextSession(session);
>>          initialize(null);
>>       }
>>       catch (ClassCastException ce)
>>       {
>>          // this error supposedly should not get thrown as getDelegate()
>>          // supposedly always returns a Session, but just in case.
>>          // (this was from examples on the web and the #hibernate channel
>> so
>>          // needs to be verified
>>          ce.printStackTrace();
>>          // TODO: Wrap it up and do something else with it
>>          throw ce;
>>       }
>>    }
>>
>>    private void initialize(String[] stopWords)
>>    {
>>       if (stopWords != null)
>>       {
>>          // first set up the parser with the new stop words
>>
>>          if(UseStemmer)
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> SnowballAnalyzer("English",stopWords));
>>          }
>>          else
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> StandardAnalyzer(stopWords));
>>          }
>>       }
>>       else
>>       {  // default stop words
>>          if(UseStemmer)
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> SnowballAnalyzer("English"));
>>          }
>>          else
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> StandardAnalyzer());
>>          }
>>       }
>>
>>       _stopWords = stopWords;
>>    }
>>
>>    /***
>>     * Run the indexer
>>     */
>>    public void index()
>>    {
>>     //now index
>>
>>       Transaction tx = _textSession.beginTransaction();
>>       List<Prediction> predictions = _textSession.createQuery("from
>> Prediction as prediction").list();
>>       for(Prediction pred: predictions)
>>       {
>>          _textSession.index(pred);
>>       }
>>       tx.commit(); //index are written at commit time
>>       _beenIndexed=true;
>>    }
>>
>>    public List<Prediction> searchPredictions(String queryStr)
>>    {
>>       // look in text column of predictions
>>       try
>>       {
>>          if (queryStr != null && !queryStr.equals(""))
>>          {
>>             // need to add the field name to the querystring
>>             queryStr = TEXT_FIELD + ":" + queryStr;
>>             org.apache.lucene.search.Query luceneQuery =
>> _parser.parse(queryStr);
>>             Query query = _textSession.createFullTextQuery(luceneQuery,
>>                   Prediction.class);
>>             List<Prediction> ret = query.list();
>>           //default fits the KEYWORDS similarity
>>             if (ret != null)
>>             {
>>                switch(_defaultSimilarity)
>>                {
>>
>>                   case KEYWORDS:
>>                   case HIGH:
>>                   case EXPAND:
>>                   case EXACT:
>>
>>                      return ret;
>>
>>                }
>>
>>             }
>>          }
>>       }
>>       catch (Exception pe)
>>       {// KKG TODO: Turn this into a better exception
>>          pe.printStackTrace();
>>       }
>>       return new ArrayList<Prediction>();
>>    }
>> }
>>
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12830915
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 00:04:13 2007
Return-Path: <java-user-return-30375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73471 invoked from network); 22 Sep 2007 00:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 00:04:12 -0000
Received: (qmail 34556 invoked by uid 500); 22 Sep 2007 00:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34524 invoked by uid 500); 22 Sep 2007 00:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34513 invoked by uid 99); 22 Sep 2007 00:03:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 17:03:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 00:05:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IYsT7-0005OF-MZ
	for java-user@lucene.apache.org; Fri, 21 Sep 2007 17:03:33 -0700
Message-ID: <12831941.post@talk.nabble.com>
Date: Fri, 21 Sep 2007 17:03:33 -0700 (PDT)
From: Galactikuh <kshanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kshanti@gmail.com
References: <12827864.post@talk.nabble.com> <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
After doing some more analysis with Luke it does seem like that it is
something about that Analyzer, not my code, since I get the same results in
there.

K

Erick Erickson wrote:
> 
> Have you gotten a copy of Luke and examined your index
> to see if what's in there is actually what you think? I've found
> it invaluable (see the Lucene pages).
> 
> Also, query.toString() is your friend. It'll show you what the
> actual query looks like after parsing.
> 
> You could also, as a test, construct a BooleanQuery
> with the term "nut" and see what comes back....
> 
> Is it possible that UseStemmer is being set to false somehow
> for the query parser (perhaps in code you didn't post?). That
> would account for it...
> 
> Best
> Erick
> 
> On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>>
>>
>> I am using SnowballAnalyzer with Hibernate search. I am using it to
>> search
>> phrases in a database. It only seems to return the stemmed version of any
>> query. So for example, I have two phrases in the DB:
>>
>> "Cheney is a nut"
>> and
>> "I hate nuts"
>>
>> When I do a search for either "nut" or "nuts" it only returns "Cheney is
>> a
>> nut"
>>
>> This is what seems to be inside my index file:
>>
>> 'cheney' 'hate' 'i' 'nut' 's'
>>
>> Here is the code, although it's hibernate so not sure if it's relevant or
>> will mean anything to anyone here.
>>
>> Thanks,
>> Kshanti
>>
>> import javax.persistence.EntityManager;
>>
>> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.hibernate.*;
>>
>> public class LuceneSearch
>> {
>>
>>    public enum Similarity
>>    {
>>       KEYWORDS,
>>       HIGH,
>>       EXPAND,
>>       EXACT,
>>
>>    }
>>
>>    public static final String TEXT_FIELD = "TEXT";
>>
>>    private static final String HIBERNATE_FILE =
>> "META-INF/persistence.xml";
>>
>>    private QueryParser _parser;
>>
>>    private String[] _stopWords;
>>
>>    private FullTextSession _textSession;
>>
>>    private EntityManager _entityManager;
>>
>>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
>>
>>    private boolean _beenIndexed=false;
>>
>>    public static boolean UseStemmer=true;
>>
>>    public LuceneSearch(EntityManager entityMgr)
>>    {
>>       if (null == entityMgr)
>>          throw new IllegalArgumentException("entityMgr must not be
>> null.");
>>
>>       _entityManager = entityMgr;
>>       // Have to use sessions here
>>       try
>>       {
>>          Session session = (Session) _entityManager.getDelegate();
>>          _textSession = Search.createFullTextSession(session);
>>          initialize(null);
>>       }
>>       catch (ClassCastException ce)
>>       {
>>          // this error supposedly should not get thrown as getDelegate()
>>          // supposedly always returns a Session, but just in case.
>>          // (this was from examples on the web and the #hibernate channel
>> so
>>          // needs to be verified
>>          ce.printStackTrace();
>>          // TODO: Wrap it up and do something else with it
>>          throw ce;
>>       }
>>    }
>>
>>    private void initialize(String[] stopWords)
>>    {
>>       if (stopWords != null)
>>       {
>>          // first set up the parser with the new stop words
>>
>>          if(UseStemmer)
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> SnowballAnalyzer("English",stopWords));
>>          }
>>          else
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> StandardAnalyzer(stopWords));
>>          }
>>       }
>>       else
>>       {  // default stop words
>>          if(UseStemmer)
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> SnowballAnalyzer("English"));
>>          }
>>          else
>>          {
>>             _parser = new QueryParser(TEXT_FIELD, new
>> StandardAnalyzer());
>>          }
>>       }
>>
>>       _stopWords = stopWords;
>>    }
>>
>>    /***
>>     * Run the indexer
>>     */
>>    public void index()
>>    {
>>     //now index
>>
>>       Transaction tx = _textSession.beginTransaction();
>>       List<Prediction> predictions = _textSession.createQuery("from
>> Prediction as prediction").list();
>>       for(Prediction pred: predictions)
>>       {
>>          _textSession.index(pred);
>>       }
>>       tx.commit(); //index are written at commit time
>>       _beenIndexed=true;
>>    }
>>
>>    public List<Prediction> searchPredictions(String queryStr)
>>    {
>>       // look in text column of predictions
>>       try
>>       {
>>          if (queryStr != null && !queryStr.equals(""))
>>          {
>>             // need to add the field name to the querystring
>>             queryStr = TEXT_FIELD + ":" + queryStr;
>>             org.apache.lucene.search.Query luceneQuery =
>> _parser.parse(queryStr);
>>             Query query = _textSession.createFullTextQuery(luceneQuery,
>>                   Prediction.class);
>>             List<Prediction> ret = query.list();
>>           //default fits the KEYWORDS similarity
>>             if (ret != null)
>>             {
>>                switch(_defaultSimilarity)
>>                {
>>
>>                   case KEYWORDS:
>>                   case HIGH:
>>                   case EXPAND:
>>                   case EXACT:
>>
>>                      return ret;
>>
>>                }
>>
>>             }
>>          }
>>       }
>>       catch (Exception pe)
>>       {// KKG TODO: Turn this into a better exception
>>          pe.printStackTrace();
>>       }
>>       return new ArrayList<Prediction>();
>>    }
>> }
>>
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12831941
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 01:53:47 2007
Return-Path: <java-user-return-30376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9030 invoked from network); 22 Sep 2007 01:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 01:53:46 -0000
Received: (qmail 2313 invoked by uid 500); 22 Sep 2007 01:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2277 invoked by uid 500); 22 Sep 2007 01:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2266 invoked by uid 99); 22 Sep 2007 01:53:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Sep 2007 18:53:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 01:53:30 +0000
Received: by ug-out-1314.google.com with SMTP id a2so661955ugf
        for <java-user@lucene.apache.org>; Fri, 21 Sep 2007 18:53:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=K3UfIUIYX6wAI/rVGm7ndQFTmsggDKpHFBMx7f/nwbk=;
        b=T+UJDmyBgEbIT4ubyIPvOVCyBkFT6Cq1PD/XHmRo4U7sQYlZjcgJ4sYXjHoDOEKJHBBGYPTu/rDa1ue9dadcn9xDtgxcc1te+8LTNtUpeHjG9fxn23v/HyVIswE/nNFJqLxfL4raZ49N1V8jzabcoXoZGEUUsbb4Qs5ym7jXRcI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fb8pNNFk0+Mw5hGVuEdKrUMbw8SUSrtodT+OLK2wS9xFk99CB4XXxWqoad8/dEWjYsLth1IwnIYu32iYdc/ulelS5/5e5XZ8ILDP7FKJlQmzZBc98pW4VMsPSzw2br0fthSm2v5jgjKClG6Otclh0hocUQeUvKH8bv+rFTNlW7s=
Received: by 10.67.19.13 with SMTP id w13mr2019143ugi.1190425988340;
        Fri, 21 Sep 2007 18:53:08 -0700 (PDT)
Received: by 10.67.87.20 with HTTP; Fri, 21 Sep 2007 18:53:08 -0700 (PDT)
Message-ID: <48b038c60709211853n49bd47aai76704af1bf3ff27d@mail.gmail.com>
Date: Fri, 21 Sep 2007 21:53:08 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <12831941.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <12827864.post@talk.nabble.com>
	 <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com>
	 <12831941.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Did you use the same snowball analyzer to create your index? Remember
that you usually need to use the same analyzer for indexing and
searching.

Patrick

On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>
> Hi,
> After doing some more analysis with Luke it does seem like that it is
> something about that Analyzer, not my code, since I get the same results in
> there.
>
> K
>
> Erick Erickson wrote:
> >
> > Have you gotten a copy of Luke and examined your index
> > to see if what's in there is actually what you think? I've found
> > it invaluable (see the Lucene pages).
> >
> > Also, query.toString() is your friend. It'll show you what the
> > actual query looks like after parsing.
> >
> > You could also, as a test, construct a BooleanQuery
> > with the term "nut" and see what comes back....
> >
> > Is it possible that UseStemmer is being set to false somehow
> > for the query parser (perhaps in code you didn't post?). That
> > would account for it...
> >
> > Best
> > Erick
> >
> > On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
> >>
> >>
> >> I am using SnowballAnalyzer with Hibernate search. I am using it to
> >> search
> >> phrases in a database. It only seems to return the stemmed version of any
> >> query. So for example, I have two phrases in the DB:
> >>
> >> "Cheney is a nut"
> >> and
> >> "I hate nuts"
> >>
> >> When I do a search for either "nut" or "nuts" it only returns "Cheney is
> >> a
> >> nut"
> >>
> >> This is what seems to be inside my index file:
> >>
> >> 'cheney' 'hate' 'i' 'nut' 's'
> >>
> >> Here is the code, although it's hibernate so not sure if it's relevant or
> >> will mean anything to anyone here.
> >>
> >> Thanks,
> >> Kshanti
> >>
> >> import javax.persistence.EntityManager;
> >>
> >> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
> >> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >> import org.apache.lucene.queryParser.QueryParser;
> >> import org.hibernate.*;
> >>
> >> public class LuceneSearch
> >> {
> >>
> >>    public enum Similarity
> >>    {
> >>       KEYWORDS,
> >>       HIGH,
> >>       EXPAND,
> >>       EXACT,
> >>
> >>    }
> >>
> >>    public static final String TEXT_FIELD = "TEXT";
> >>
> >>    private static final String HIBERNATE_FILE =
> >> "META-INF/persistence.xml";
> >>
> >>    private QueryParser _parser;
> >>
> >>    private String[] _stopWords;
> >>
> >>    private FullTextSession _textSession;
> >>
> >>    private EntityManager _entityManager;
> >>
> >>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
> >>
> >>    private boolean _beenIndexed=false;
> >>
> >>    public static boolean UseStemmer=true;
> >>
> >>    public LuceneSearch(EntityManager entityMgr)
> >>    {
> >>       if (null == entityMgr)
> >>          throw new IllegalArgumentException("entityMgr must not be
> >> null.");
> >>
> >>       _entityManager = entityMgr;
> >>       // Have to use sessions here
> >>       try
> >>       {
> >>          Session session = (Session) _entityManager.getDelegate();
> >>          _textSession = Search.createFullTextSession(session);
> >>          initialize(null);
> >>       }
> >>       catch (ClassCastException ce)
> >>       {
> >>          // this error supposedly should not get thrown as getDelegate()
> >>          // supposedly always returns a Session, but just in case.
> >>          // (this was from examples on the web and the #hibernate channel
> >> so
> >>          // needs to be verified
> >>          ce.printStackTrace();
> >>          // TODO: Wrap it up and do something else with it
> >>          throw ce;
> >>       }
> >>    }
> >>
> >>    private void initialize(String[] stopWords)
> >>    {
> >>       if (stopWords != null)
> >>       {
> >>          // first set up the parser with the new stop words
> >>
> >>          if(UseStemmer)
> >>          {
> >>             _parser = new QueryParser(TEXT_FIELD, new
> >> SnowballAnalyzer("English",stopWords));
> >>          }
> >>          else
> >>          {
> >>             _parser = new QueryParser(TEXT_FIELD, new
> >> StandardAnalyzer(stopWords));
> >>          }
> >>       }
> >>       else
> >>       {  // default stop words
> >>          if(UseStemmer)
> >>          {
> >>             _parser = new QueryParser(TEXT_FIELD, new
> >> SnowballAnalyzer("English"));
> >>          }
> >>          else
> >>          {
> >>             _parser = new QueryParser(TEXT_FIELD, new
> >> StandardAnalyzer());
> >>          }
> >>       }
> >>
> >>       _stopWords = stopWords;
> >>    }
> >>
> >>    /***
> >>     * Run the indexer
> >>     */
> >>    public void index()
> >>    {
> >>     //now index
> >>
> >>       Transaction tx = _textSession.beginTransaction();
> >>       List<Prediction> predictions = _textSession.createQuery("from
> >> Prediction as prediction").list();
> >>       for(Prediction pred: predictions)
> >>       {
> >>          _textSession.index(pred);
> >>       }
> >>       tx.commit(); //index are written at commit time
> >>       _beenIndexed=true;
> >>    }
> >>
> >>    public List<Prediction> searchPredictions(String queryStr)
> >>    {
> >>       // look in text column of predictions
> >>       try
> >>       {
> >>          if (queryStr != null && !queryStr.equals(""))
> >>          {
> >>             // need to add the field name to the querystring
> >>             queryStr = TEXT_FIELD + ":" + queryStr;
> >>             org.apache.lucene.search.Query luceneQuery =
> >> _parser.parse(queryStr);
> >>             Query query = _textSession.createFullTextQuery(luceneQuery,
> >>                   Prediction.class);
> >>             List<Prediction> ret = query.list();
> >>           //default fits the KEYWORDS similarity
> >>             if (ret != null)
> >>             {
> >>                switch(_defaultSimilarity)
> >>                {
> >>
> >>                   case KEYWORDS:
> >>                   case HIGH:
> >>                   case EXPAND:
> >>                   case EXACT:
> >>
> >>                      return ret;
> >>
> >>                }
> >>
> >>             }
> >>          }
> >>       }
> >>       catch (Exception pe)
> >>       {// KKG TODO: Turn this into a better exception
> >>          pe.printStackTrace();
> >>       }
> >>       return new ArrayList<Prediction>();
> >>    }
> >> }
> >>
> >>
> >>
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12831941
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 11:32:54 2007
Return-Path: <java-user-return-30377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54768 invoked from network); 22 Sep 2007 11:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 11:32:53 -0000
Received: (qmail 9005 invoked by uid 500); 22 Sep 2007 11:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8971 invoked by uid 500); 22 Sep 2007 11:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8960 invoked by uid 99); 22 Sep 2007 11:32:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 04:32:38 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 11:32:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IZ3Db-0000kN-5Z
	for java-user@lucene.apache.org; Sat, 22 Sep 2007 04:32:15 -0700
Message-ID: <12835751.post@talk.nabble.com>
Date: Sat, 22 Sep 2007 04:32:15 -0700 (PDT)
From: newbieoflucene <shanghai2k10@hotmail.com>
To: java-user@lucene.apache.org
Subject: How to count categories?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shanghai2k10@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


2-3G index data with 20M records, and each record has 10 or more fields, 3-5
fields are group fields, which I want to count them for returned results
after searching. These group fields contains about 1000 or more values. It
means that I would count 1000 categories for each search.

Due to the searched results number will be very big, so iterator each record
with HitCollector that is too slow to count all of records (counting will
cost about 30 seconds)

Unfortunately, If I use QueryFilter to query each category one by one and
save it to BitSet, but the number of category is about 1000, I've to filter
it about 1000 times to count each category. It still consumed about 20
seconds. 

Is there any better way to count these categories faster and low memory?

Any idea is appreciated!
-- 
View this message in context: http://www.nabble.com/How-to-count-categories--tf4500720.html#a12835751
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 15:07:06 2007
Return-Path: <java-user-return-30378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19129 invoked from network); 22 Sep 2007 15:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 15:07:06 -0000
Received: (qmail 47613 invoked by uid 500); 22 Sep 2007 15:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47571 invoked by uid 500); 22 Sep 2007 15:06:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47560 invoked by uid 99); 22 Sep 2007 15:06:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 08:06:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 15:06:51 +0000
Received: by rv-out-0910.google.com with SMTP id k20so915881rvb
        for <java-user@lucene.apache.org>; Sat, 22 Sep 2007 08:06:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=knCUcQByyII0CDdSR9f73bvCvPZffeEYByaPRfRbWac=;
        b=Q59Sn+H6vDa9f23aAwwgVA/B3/hhp+TYBYsKomlMV5gvP2c94JISHW8tnD9Cb0UTHEt01uSV/EKPO5MJhyePiq3pBMcVzO4vKqFJ9L2giuh6qXTDlgYc9hb0EujPYzHn0uflEryVA83gzsUiGXhyOPLtp3LjLBhIPlhkJzBlwbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ehnmOeRNnq3/r4G2M4qnSe4ihWzV83akSW22xjJZdTDswnObNwH+V8p2BRnICFOXypnrfEryjH6e3DJlrYr4ex9k2QJIWx4LEuQiDpx9Wi5O5pFIxOF8oGFgvvJSk0Sb3r5XpWvAnV7NUbyomjwvlbmDEPzVHxsNR5jp7a8VcII=
Received: by 10.142.132.2 with SMTP id f2mr451474wfd.1190473590885;
        Sat, 22 Sep 2007 08:06:30 -0700 (PDT)
Received: by 10.143.33.20 with HTTP; Sat, 22 Sep 2007 08:06:30 -0700 (PDT)
Message-ID: <c68e39170709220806u2aef3dc8t99ec5ab7177b3463@mail.gmail.com>
Date: Sat, 22 Sep 2007 11:06:30 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to count categories?
In-Reply-To: <12835751.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <12835751.post@talk.nabble.com>
X-Google-Sender-Auth: fd3461686d549877
X-Virus-Checked: Checked by ClamAV on apache.org

On 9/22/07, newbieoflucene <shanghai2k10@hotmail.com> wrote:
> 2-3G index data with 20M records, and each record has 10 or more fields, 3-5
> fields are group fields, which I want to count them for returned results
> after searching. These group fields contains about 1000 or more values. It
> means that I would count 1000 categories for each search.

Have you tried Solr and it's faceting?
It may be fast enough for you (and there are plans in place to make it faster).

Did you want just the top 10 or so for each group field, or do you
need all 1000 for some reason?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 21:24:03 2007
Return-Path: <java-user-return-30379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68368 invoked from network); 22 Sep 2007 21:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 21:24:02 -0000
Received: (qmail 52084 invoked by uid 500); 22 Sep 2007 21:23:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52049 invoked by uid 500); 22 Sep 2007 21:23:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52038 invoked by uid 99); 22 Sep 2007 21:23:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 14:23:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 21:25:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 6989B33799EF
	for <java-user@lucene.apache.org>; Sat, 22 Sep 2007 23:23:24 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (localhost [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 25607-02 for <java-user@lucene.apache.org>;
 Sat, 22 Sep 2007 23:23:15 +0200 (CEST)
Received: from [192.168.1.3] (105.229-243-81.adsl-dyn.isp.belgacom.be [81.243.229.105])
	by villon.taktik.be (Postfix) with ESMTP id 5057F33799BF
	for <java-user@lucene.apache.org>; Sat, 22 Sep 2007 23:23:15 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: quoted-printable
Message-Id: <E57196EF-DF8E-4525-A44C-37989A07C892@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Antoine Baudoux <ab@taktik.be>
Subject: IndexModifier delete() + add() vs IndexWriter update()
Date: Sat, 22 Sep 2007 23:23:08 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everyone,


	I noticed that when updating a large index with IndexModifier =
(lots =20
of delete+add), the bottlenek was the delete. If I only add, speed is =20=

at least multiplied by 50.
	=46rom what i have understood, its because a new IndexReader is =20=

initialized for each delete.

	Is the new updateDocument() method from IndexWriter optimized =
for =20
this kind of problem?


	Thanks!
=09

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 22 21:30:52 2007
Return-Path: <java-user-return-30380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69633 invoked from network); 22 Sep 2007 21:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Sep 2007 21:30:51 -0000
Received: (qmail 59507 invoked by uid 500); 22 Sep 2007 21:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59184 invoked by uid 500); 22 Sep 2007 21:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59173 invoked by uid 99); 22 Sep 2007 21:30:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 14:30:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Sep 2007 21:30:36 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1490771muf
        for <java-user@lucene.apache.org>; Sat, 22 Sep 2007 14:30:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=FpNw85iQcqzp9EM7jc+dqjkF/nsxdNNrRkNSG53YXdg=;
        b=MvrCPwOtOnImsAlMby6xmIjGpayy8CKKBYBa8NIr0MFWE/GkdhloivNZaKJejbI9J8rchgZQZOIY2InJW/9Ddj1AdnMVOKeiyhR2hwRkYsZZVmphF+97wRuKFQ7CsfzuZgneV91+CMow/wfrKBWoUD5PAsob8Rrs4otR9axWkHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UJpUwRCwCq5DGWLikEjNa5HoDnoycxjN5+Y8rbfYgFxRPO3OIdshArh+ktoBqoBkE64th2Q3abNO+2VIxdkZSUlu10yzbTH17IVNYMF/dRZA0718CbGRVynPjE9MqhytFx24sbYf88A728BoFLuJu+fO0HpekHRvZUchsUOyQFg=
Received: by 10.65.225.7 with SMTP id c7mr4271485qbr.1190496614163;
        Sat, 22 Sep 2007 14:30:14 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f18sm1253181qba.2007.09.22.14.30.12
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 22 Sep 2007 14:30:12 -0700 (PDT)
Message-ID: <46F5894E.3020903@gmail.com>
Date: Sat, 22 Sep 2007 17:29:50 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexModifier delete() + add() vs IndexWriter update()
References: <E57196EF-DF8E-4525-A44C-37989A07C892@taktik.be>
In-Reply-To: <E57196EF-DF8E-4525-A44C-37989A07C892@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes. Its much faster. The deletes are buffered and an IndexReader is 
only opened to flush a specified number of buffered deletes. 
IndexModifier is terribly inefficient and I think, to be deprecated soon.

-  Mark

Antoine Baudoux wrote:
> Hello everyone,
>
>
>     I noticed that when updating a large index with IndexModifier 
> (lots of delete+add), the bottlenek was the delete. If I only add, 
> speed is at least multiplied by 50.
>     From what i have understood, its because a new IndexReader is 
> initialized for each delete.
>
>     Is the new updateDocument() method from IndexWriter optimized for 
> this kind of problem?
>
>
>     Thanks!
>     
>
> -- 
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> Tl.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 08:55:12 2007
Return-Path: <java-user-return-30381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21594 invoked from network); 23 Sep 2007 08:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 08:55:11 -0000
Received: (qmail 58247 invoked by uid 500); 23 Sep 2007 08:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58215 invoked by uid 500); 23 Sep 2007 08:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58204 invoked by uid 99); 23 Sep 2007 08:54:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 01:54:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 08:57:05 +0000
Subject: Escaping special characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Sun, 23 Sep 2007 09:53:12 +0100
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AAEE8@SBS2003.2LSHQ.local>
In-Reply-To: <46F5894E.3020903@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: Acf9X6jElw2WdHj7SvCn3IqhfRvROgAXxcog
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Unless I'm missing something, according to:

http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%20Spe
cial%20Characters

I should be able to search for C++ and C# using something like:=20
C\+\+ and C\#.

This doesn't work.=20

I apologise if this sort of question has been asked many times in the
past but I've not found any examples or answer to this problem.

Thanks,
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 09:47:11 2007
Return-Path: <java-user-return-30382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26587 invoked from network); 23 Sep 2007 09:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 09:47:09 -0000
Received: (qmail 86020 invoked by uid 500); 23 Sep 2007 09:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85973 invoked by uid 500); 23 Sep 2007 09:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85962 invoked by uid 99); 23 Sep 2007 09:46:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 02:46:54 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 09:46:55 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:52894 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IZO2o-0000sW-81
	for java-user@lucene.apache.org; Sun, 23 Sep 2007 11:46:30 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <562BCF4FF1D14343BC81378BA0050AD90AAEE8@SBS2003.2LSHQ.local>
References: <562BCF4FF1D14343BC81378BA0050AD90AAEE8@SBS2003.2LSHQ.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AA18BCB3-1E7B-4821-B2F0-F9BD21C4EEFD@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Escaping special characters
Date: Sun, 23 Sep 2007 11:39:29 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IZO2o-0000sW-81.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IZO2o-0000sW-81 dd9ade3c56e1aeb0e591669b5501914b
X-Virus-Checked: Checked by ClamAV on apache.org


23 sep 2007 kl. 10.53 skrev Tom Conlon:

>
> Unless I'm missing something, according to:
>
> http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping% 
> 20Spe
> cial%20Characters
>
> I should be able to search for C++ and C# using something like:
> C\+\+ and C\#.

That is correct.

>
> This doesn't work.

Did you use the same analyzer when populating the index as when you  
create the query?

If you did, can you demonstrate the problem with a small stand alone  
test case?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 11:18:51 2007
Return-Path: <java-user-return-30383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46445 invoked from network); 23 Sep 2007 11:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 11:18:50 -0000
Received: (qmail 28151 invoked by uid 500); 23 Sep 2007 11:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28103 invoked by uid 500); 23 Sep 2007 11:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28092 invoked by uid 99); 23 Sep 2007 11:18:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 04:18:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 11:20:44 +0000
Subject: RE: Escaping special characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Sun, 23 Sep 2007 12:16:51 +0100
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AAEE9@SBS2003.2LSHQ.local>
In-Reply-To: <AA18BCB3-1E7B-4821-B2F0-F9BD21C4EEFD@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: Acf9xoR9HFqbJKoKRouZBw1rD5IqIAADDxog
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl,

> Did you use the same analyzer when populating the index as when you
create the query?

Yes, I used the default analyzer in a modified version of the command
line demo.

> If you did, can you demonstrate the problem with a small stand alone
test case?

I'll try.
=20
Tom

-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Sent: 23 September 2007 10:39
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters


23 sep 2007 kl. 10.53 skrev Tom Conlon:

>
> Unless I'm missing something, according to:
>
> http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%
> 20Spe
> cial%20Characters
>
> I should be able to search for C++ and C# using something like:
> C\+\+ and C\#.

That is correct.

>
> This doesn't work.

Did you use the same analyzer when populating the index as when you
create the query?

If you did, can you demonstrate the problem with a small stand alone
test case?


--
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 13:41:54 2007
Return-Path: <java-user-return-30384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79494 invoked from network); 23 Sep 2007 13:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 13:41:53 -0000
Received: (qmail 73225 invoked by uid 500); 23 Sep 2007 13:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73184 invoked by uid 500); 23 Sep 2007 13:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73173 invoked by uid 99); 23 Sep 2007 13:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 06:41:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 13:41:37 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1440190fkz
        for <java-user@lucene.apache.org>; Sun, 23 Sep 2007 06:41:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jJfnjquZJnZfwjFdqd1sRIUN5DIWZDL515Lma8CaiQk=;
        b=YGlXvBdm4DJENU3Lv5Gmb8Zspm8wSFSFUv/mB/nUaVDu9Ii6q8aLsjjYdVpJjKUfAmp3DBJT/SiyPS1zh7LR2BLZ33zdtlMCUgPaIpY+JEvwTi0cfAOK7lknzA4wyPAnM6SvL3LVmknj0n0OhM2L8ZWsU3JT6P0jXF6YgtV2K9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HvCjMKvKgBPYhfMIDPz/0phD6ayUPLKP+qIuHWBFWuS19Lv64umzfu+Vav7VLnWv8ieD/Jppub3XnqIIlIx8AU7k3vIslzE3cX4siSuP7Vh7pg9o+RVmZlxIvgoKz5hBqfE5Qbp2HjmKRTt8TQ9fmpLdmJrtTLBkfEJvuzP2Bpk=
Received: by 10.82.134.12 with SMTP id h12mr5683479bud.1190554875525;
        Sun, 23 Sep 2007 06:41:15 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 23 Sep 2007 06:41:15 -0700 (PDT)
Message-ID: <359a92830709230641g73398341w5cca985a0c19733e@mail.gmail.com>
Date: Sun, 23 Sep 2007 09:41:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to count categories?
In-Reply-To: <12835751.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35224_15325543.1190554875522"
References: <12835751.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35224_15325543.1190554875522
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, search the mail archive for the word "faceting", this topic has
been discussed many times, and there's quite a bit of information
about this topic.

Best
Erick

On 9/22/07, newbieoflucene <shanghai2k10@hotmail.com> wrote:
>
>
> 2-3G index data with 20M records, and each record has 10 or more fields,
> 3-5
> fields are group fields, which I want to count them for returned results
> after searching. These group fields contains about 1000 or more values. It
> means that I would count 1000 categories for each search.
>
> Due to the searched results number will be very big, so iterator each
> record
> with HitCollector that is too slow to count all of records (counting will
> cost about 30 seconds)
>
> Unfortunately, If I use QueryFilter to query each category one by one and
> save it to BitSet, but the number of category is about 1000, I've to
> filter
> it about 1000 times to count each category. It still consumed about 20
> seconds.
>
> Is there any better way to count these categories faster and low memory?
>
> Any idea is appreciated!
> --
> View this message in context:
> http://www.nabble.com/How-to-count-categories--tf4500720.html#a12835751
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35224_15325543.1190554875522--

From java-user-return-30385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 13:47:49 2007
Return-Path: <java-user-return-30385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80170 invoked from network); 23 Sep 2007 13:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 13:47:48 -0000
Received: (qmail 76529 invoked by uid 500); 23 Sep 2007 13:47:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76497 invoked by uid 500); 23 Sep 2007 13:47:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76486 invoked by uid 99); 23 Sep 2007 13:47:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 06:47:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 13:47:35 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1441482fkz
        for <java-user@lucene.apache.org>; Sun, 23 Sep 2007 06:47:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=DcRu7DE7JbHC5o0gDDUg2VzA8v+Sw3oo+wDKr+vuDRY=;
        b=iFcfBS0kgkwvoNmjg5XRkCqcT2L4BFTufQGK5eZjOM6qx/o3zmxG6l6P9FYe+hSyma/pnKCUnmfIsEvzj01dk3PxEysDftbCIXx2nDpUDGR6MVkCwHng76UHDCVOmp81rAMqxxoRfziAQtyG95P1HsyfPWsgE/rLJvdPiC2ybII=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NHaXXoQRB7GZ1DA4JKv4+tQk7BPngBsq6p9XlkhArYF8eFp0pyvInwAxFWlXsrBKAAnsaTErxS+GAl/Q8Ns9H8cgxvVwjou/MKu5t156ROqiGmc6gWs1/U9bMGQfVFXIcFNsAguovj6Q6a9PLKk8F5xIZPsxK4HKS/Ke97stzF4=
Received: by 10.82.183.19 with SMTP id g19mr5508304buf.1190555233893;
        Sun, 23 Sep 2007 06:47:13 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 23 Sep 2007 06:47:13 -0700 (PDT)
Message-ID: <359a92830709230647m2b1911cds62ea42eb3f5c523@mail.gmail.com>
Date: Sun, 23 Sep 2007 09:47:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters
In-Reply-To: <562BCF4FF1D14343BC81378BA0050AD90AAEE9@SBS2003.2LSHQ.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35240_21665901.1190555233889"
References: <AA18BCB3-1E7B-4821-B2F0-F9BD21C4EEFD@gmail.com>
	 <562BCF4FF1D14343BC81378BA0050AD90AAEE9@SBS2003.2LSHQ.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35240_21665901.1190555233889
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Default as in StandardAnalyzer? "Stuff happens" with StandardAnalyzer.
I'd recommend that you use something really simple like WhitespaceAnalyzer
for something like this, or possibly create your own analyzer that uses
LowerCaseFilter and breaks on whitespace.

I suspect that if you open your index with Luke, you'll find that
what you actually indexed was "C" rather than "C++" etc. But
that's only a guess.

What does query.toString() return?

Best
Erick

On 9/23/07, Tom Conlon <tomc@2ls.com> wrote:
>
> Hi Karl,
>
> > Did you use the same analyzer when populating the index as when you
> create the query?
>
> Yes, I used the default analyzer in a modified version of the command
> line demo.
>
> > If you did, can you demonstrate the problem with a small stand alone
> test case?
>
> I'll try.
>
> Tom
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: 23 September 2007 10:39
> To: java-user@lucene.apache.org
> Subject: Re: Escaping special characters
>
>
> 23 sep 2007 kl. 10.53 skrev Tom Conlon:
>
> >
> > Unless I'm missing something, according to:
> >
> > http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%
> > 20Spe
> > cial%20Characters
> >
> > I should be able to search for C++ and C# using something like:
> > C\+\+ and C\#.
>
> That is correct.
>
> >
> > This doesn't work.
>
> Did you use the same analyzer when populating the index as when you
> create the query?
>
> If you did, can you demonstrate the problem with a small stand alone
> test case?
>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35240_21665901.1190555233889--

From java-user-return-30386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 16:56:13 2007
Return-Path: <java-user-return-30386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46958 invoked from network); 23 Sep 2007 16:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 16:56:12 -0000
Received: (qmail 1928 invoked by uid 500); 23 Sep 2007 16:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1895 invoked by uid 500); 23 Sep 2007 16:55:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1884 invoked by uid 99); 23 Sep 2007 16:55:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 09:55:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 16:55:58 +0000
Subject: RE: Escaping special characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Sun, 23 Sep 2007 17:54:09 +0100
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AAEEA@SBS2003.2LSHQ.local>
In-Reply-To: <359a92830709230647m2b1911cds62ea42eb3f5c523@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: Acf96CNmCakvwKD3Q/iAcC0BBB7AXQAFOeYg
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the input Erick,

I changed the analyser to WhitespaceAnalyzer but same results.

You're right about what was indexed

Enter Querystring:
(c++ and c#)
Searching for: c c

Enter Querystring:
(c\+\+ and c\#)
Searching for: c c

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 23 September 2007 14:47
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters

Default as in StandardAnalyzer? "Stuff happens" with StandardAnalyzer.
I'd recommend that you use something really simple like
WhitespaceAnalyzer for something like this, or possibly create your own
analyzer that uses LowerCaseFilter and breaks on whitespace.

I suspect that if you open your index with Luke, you'll find that what
you actually indexed was "C" rather than "C++" etc. But that's only a
guess.

What does query.toString() return?

Best
Erick

On 9/23/07, Tom Conlon <tomc@2ls.com> wrote:
>
> Hi Karl,
>
> > Did you use the same analyzer when populating the index as when you
> create the query?
>
> Yes, I used the default analyzer in a modified version of the command=20
> line demo.
>
> > If you did, can you demonstrate the problem with a small stand alone
> test case?
>
> I'll try.
>
> Tom
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: 23 September 2007 10:39
> To: java-user@lucene.apache.org
> Subject: Re: Escaping special characters
>
>
> 23 sep 2007 kl. 10.53 skrev Tom Conlon:
>
> >
> > Unless I'm missing something, according to:
> >
> > http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%
> > 20Spe
> > cial%20Characters
> >
> > I should be able to search for C++ and C# using something like:
> > C\+\+ and C\#.
>
> That is correct.
>
> >
> > This doesn't work.
>
> Did you use the same analyzer when populating the index as when you=20
> create the query?
>
> If you did, can you demonstrate the problem with a small stand alone=20
> test case?
>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 23 17:14:39 2007
Return-Path: <java-user-return-30387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61868 invoked from network); 23 Sep 2007 17:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Sep 2007 17:14:38 -0000
Received: (qmail 16525 invoked by uid 500); 23 Sep 2007 17:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16491 invoked by uid 500); 23 Sep 2007 17:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16480 invoked by uid 99); 23 Sep 2007 17:14:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 10:14:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 17:14:25 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1484318fkz
        for <java-user@lucene.apache.org>; Sun, 23 Sep 2007 10:14:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=rIT43R/k38jJ8eN9RCV5YyrgH9MNA0kRYo4cnK2r8o8=;
        b=Z8oPMiRMDTNv7q2yLGZWFTrHTzs3fL6Ab+Uo9v2cw6TJKaoSPA+wogHNvuT6JTIuR4psr2KgQbf902A17OJ07LetIlb7Ola39zH/zlRdVfrlELorpcQ5UioiOqS6uBEbUjRphfLZ4U6OoDVns/Z9yczdaMNV+1BL2e1FkiASm/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GubcA7W906ZF4B9pdIanKbTFCZHqABIsF4Dw7vZFM6h+K43MefrQ7ibsRX2u2tjKitkSyqt5wK5qT6+npPxJu2e8wjKI3M73OI1mPvM05tZChH/BIiL7iQgvRDIuwXNWUFRsWocmebhQYQUCk9zZLlgK7TXmVf2dugFaPWilNbM=
Received: by 10.82.134.12 with SMTP id h12mr6036541bud.1190567643236;
        Sun, 23 Sep 2007 10:14:03 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 23 Sep 2007 10:14:03 -0700 (PDT)
Message-ID: <359a92830709231014j33c7f2eauc3a85cfac79b98a5@mail.gmail.com>
Date: Sun, 23 Sep 2007 13:14:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Escaping special characters
In-Reply-To: <562BCF4FF1D14343BC81378BA0050AD90AAEEA@SBS2003.2LSHQ.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35526_22041542.1190567643231"
References: <359a92830709230647m2b1911cds62ea42eb3f5c523@mail.gmail.com>
	 <562BCF4FF1D14343BC81378BA0050AD90AAEEA@SBS2003.2LSHQ.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35526_22041542.1190567643231
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you use the same analyzer for both querying and indexing?
If so, which one?

I recommend you use Luke to examine the parsing for various
queries. Start by making sure WhitespaceAnalyzer is the analyzer
chosen on the "search" tab and go from there.

We'll talk past each other until you include some code snippets
I suspect. The important parts are:
1> what analyzer you use at INDEX time.
2> what analyzer you use at SEARCH time.
3> what is the query you submit?
4> what is returned from Query.toString().

A small, self-contained program with the *minimal* code
showing your problem would allow folks to give you much
better feedback...

Best
Erick

On 9/23/07, Tom Conlon <tomc@2ls.com> wrote:
>
> Thanks for the input Erick,
>
> I changed the analyser to WhitespaceAnalyzer but same results.
>
> You're right about what was indexed
>
> Enter Querystring:
> (c++ and c#)
> Searching for: c c
>
> Enter Querystring:
> (c\+\+ and c\#)
> Searching for: c c
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 23 September 2007 14:47
> To: java-user@lucene.apache.org
> Subject: Re: Escaping special characters
>
> Default as in StandardAnalyzer? "Stuff happens" with StandardAnalyzer.
> I'd recommend that you use something really simple like
> WhitespaceAnalyzer for something like this, or possibly create your own
> analyzer that uses LowerCaseFilter and breaks on whitespace.
>
> I suspect that if you open your index with Luke, you'll find that what
> you actually indexed was "C" rather than "C++" etc. But that's only a
> guess.
>
> What does query.toString() return?
>
> Best
> Erick
>
> On 9/23/07, Tom Conlon <tomc@2ls.com> wrote:
> >
> > Hi Karl,
> >
> > > Did you use the same analyzer when populating the index as when you
> > create the query?
> >
> > Yes, I used the default analyzer in a modified version of the command
> > line demo.
> >
> > > If you did, can you demonstrate the problem with a small stand alone
> > test case?
> >
> > I'll try.
> >
> > Tom
> >
> > -----Original Message-----
> > From: Karl Wettin [mailto:karl.wettin@gmail.com]
> > Sent: 23 September 2007 10:39
> > To: java-user@lucene.apache.org
> > Subject: Re: Escaping special characters
> >
> >
> > 23 sep 2007 kl. 10.53 skrev Tom Conlon:
> >
> > >
> > > Unless I'm missing something, according to:
> > >
> > > http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%
> > > 20Spe
> > > cial%20Characters
> > >
> > > I should be able to search for C++ and C# using something like:
> > > C\+\+ and C\#.
> >
> > That is correct.
> >
> > >
> > > This doesn't work.
> >
> > Did you use the same analyzer when populating the index as when you
> > create the query?
> >
> > If you did, can you demonstrate the problem with a small stand alone
> > test case?
> >
> >
> > --
> > karl
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35526_22041542.1190567643231--

From java-user-return-30388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 01:41:15 2007
Return-Path: <java-user-return-30388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79254 invoked from network); 24 Sep 2007 01:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 01:41:14 -0000
Received: (qmail 71199 invoked by uid 500); 24 Sep 2007 01:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71162 invoked by uid 500); 24 Sep 2007 01:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71151 invoked by uid 99); 24 Sep 2007 01:40:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Sep 2007 18:40:59 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 01:43:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IZcw8-0000ki-US
	for java-user@lucene.apache.org; Sun, 23 Sep 2007 18:40:36 -0700
Message-ID: <12852707.post@talk.nabble.com>
Date: Sun, 23 Sep 2007 18:40:36 -0700 (PDT)
From: newbieoflucene <shanghai2k10@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to count categories?
In-Reply-To: <359a92830709230641g73398341w5cca985a0c19733e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shanghai2k10@hotmail.com
References: <12835751.post@talk.nabble.com> <359a92830709230641g73398341w5cca985a0c19733e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've searched for many times but not found the solution.
It's really a problem to me.

Thanks!


Erick Erickson wrote:
> 
> Also, search the mail archive for the word "faceting", this topic has
> been discussed many times, and there's quite a bit of information
> about this topic.
> 
> Best
> Erick
> 
> On 9/22/07, newbieoflucene <shanghai2k10@hotmail.com> wrote:
>>
>>
>> 2-3G index data with 20M records, and each record has 10 or more fields,
>> 3-5
>> fields are group fields, which I want to count them for returned results
>> after searching. These group fields contains about 1000 or more values.
>> It
>> means that I would count 1000 categories for each search.
>>
>> Due to the searched results number will be very big, so iterator each
>> record
>> with HitCollector that is too slow to count all of records (counting will
>> cost about 30 seconds)
>>
>> Unfortunately, If I use QueryFilter to query each category one by one and
>> save it to BitSet, but the number of category is about 1000, I've to
>> filter
>> it about 1000 times to count each category. It still consumed about 20
>> seconds.
>>
>> Is there any better way to count these categories faster and low memory?
>>
>> Any idea is appreciated!
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-count-categories--tf4500720.html#a12835751
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-count-categories--tf4500720.html#a12852707
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 11:46:28 2007
Return-Path: <java-user-return-30389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1592 invoked from network); 24 Sep 2007 11:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 11:46:27 -0000
Received: (qmail 70270 invoked by uid 500); 24 Sep 2007 11:46:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70244 invoked by uid 500); 24 Sep 2007 11:46:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70233 invoked by uid 99); 24 Sep 2007 11:46:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 04:46:11 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=SPF_PASS,URIBL_RHS_DOB
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 11:48:20 +0000
Received: by py-out-1112.google.com with SMTP id d32so5245407pye
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 04:45:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=8sbZY8mQSw7V1AFVCkTDbjSKZgTjRQ86t+Z143Yc1pQ=;
        b=m7MriuD27BMQPSk34L+3rxZPQMEwZTSplWOoTnMGEuxKfepltcORT5bTt94GlnYpp0IibPLuAKW9Aa60v0JzyiDMbraHvTLr3tJBj0guSS0P52Ej+G9qF4mjM0BV6C3w7sQIG3MdigtvLV45nhnY07TGcLv6O/3f/M/kx/kkTj0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XwfRXl3Iy88vG1BH4xKItP4hzj1hjEzYK79WdP75XAdDTgv6bpQ/BvU4r2D7W+iMlfIKWfEVGqvFy+VQnxo8a+XxqLKx2dBY80kSto5Ilz4klFuQ7S2Yg+E8lUL3Wp5D0O3sPy1q8II+fFFgp6Rr1i/NjkgP5wnwPIrzZzOeqM4=
Received: by 10.65.72.7 with SMTP id z7mr12582842qbk.1190634346877;
        Mon, 24 Sep 2007 04:45:46 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e17sm2017034qba.2007.09.24.04.45.44
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Sep 2007 04:45:44 -0700 (PDT)
Message-ID: <46F7A320.9030100@gmail.com>
Date: Mon, 24 Sep 2007 07:44:32 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com>
In-Reply-To: <46F299A4.6030403@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I sat down over the weekend and rewrote the code from scratch so that I 
could improve and simplify it somewhat. I also did some testing of the 
synch costs, and it is very insignificant compared to the total time to 
parse a query and run a search. I'll try and get around to posting the 
code tonight.

- Mark

Jay Yu wrote:
>
>
> Mark Miller wrote:
>> Good luck Jay. Keep in mind, pretty much all LuceneIndexAccessor does 
>> is sync Readers with Writers and allow multiple threads to share the 
>> same instances of them -- nothing more. The code just forces Readers 
>> to refresh when Writers are used to change the index. There really 
>> isn't any functionality beyond that offered. Since you want to have a 
>> multi thread system access the same resources (which occasionally 
>> need to be refreshed) its not too easy to get around a synchronized 
>> block.
>>
>> If I am able to extract some usable code for you soon I will let you 
>> know.
> I will appreciate it!
> Thanks for your help!
>
>>
>> - Mark
>>
>> Jay Yu wrote:
>>> Mark,
>>>
>>> Thanks for sharing your valuable exp. and thoughts.
>>> Frankly our system already has most of the functionalities 
>>> LuceneIndexAcessor offers. The only thing I am looking for is to 
>>> sync the searchers' close. That's why I am little worried about the 
>>> way accessor handles the searcher sync.
>>> I will probably give it a try to see how it performs in our system.
>>>
>>> Thanks!
>>>
>>> Jay
>>>
>>> Mark Miller wrote:
>>>> The method is synched, but this is because each thread *does* share 
>>>> the same Searcher. To maintain a cache of searchers across multiple 
>>>> threads, you've got to sync -- to reference count, you've got to 
>>>> sync. The performance hit of LuceneIndexAcessor is pretty minimal 
>>>> for its functionality, and frankly, for the functionality you want, 
>>>> you have to pay a cost. Thats not even the end of it really...your 
>>>> going to need to maintain a cache of Accessor objects for each 
>>>> index as well...and if you dont know all the indexes at startup 
>>>> time, access to this will also need to be synched. I wouldn't worry 
>>>> though -- searches are still lightening fast...that won't be the 
>>>> bottleneck. I'll work on getting you some code, but if your 
>>>> worried, try some benchmarking on the original code.
>>>>
>>>> Also, to be clear, I don't have the code in front of me, but 
>>>> getting a Searcher does not require waiting for a Writer to be 
>>>> released. Searchers are cached and resused (and instantly 
>>>> available) until a Writer is released. When this happens, the 
>>>> release Writer method waits for all the Searchers to return 
>>>> (happens pretty quick as searches are pretty quick), the Searcher 
>>>> cache is cleared, and then subsequent calls to getSearcher create 
>>>> new Searchers that can see what the Writer added.
>>>>
>>>> The key is use your Writer/Searcher/Reader quickly and then release 
>>>> it (unless your bulk loading). I've had such a system with 5+ 
>>>> million docs on a standard machine and searches where still well 
>>>> below a second after the first Searcher is cached (and even the 
>>>> first search is darn quick). And that includes a lot of extra crap 
>>>> I am doing.
>>>>
>>>> - Mark
>>>>
>>>> Jay Yu wrote:
>>>>> Mark,
>>>>>
>>>>> After reading the implementation of 
>>>>> LuceneIndexAccessor.getSearcher(),
>>>>> I realized that the method is synchronized and wait for 
>>>>> writingDirector to be released. That means if we getSearcher for 
>>>>> each query in each thread, there might be a contention and 
>>>>> performance hit. In fact, even the method of release(searcher) is 
>>>>> costly. On the other hand, if multiple threads share share one 
>>>>> searcher then it'd defeat the
>>>>> purpose of using LuceneIndexAccessor.
>>>>> Do I miss sth here? What's your suggested use case for 
>>>>> LuceneIndexAccessor?
>>>>>
>>>>> Thanks!
>>>>>
>>>>> Jay
>>>>> Mark Miller wrote:
>>>>>> Ill respond a point at a time:
>>>>>>
>>>>>> 1.
>>>>>>
>>>>>> ****************************** Hi Maik,
>>>>>>
>>>>>> So what happens in this case:
>>>>>>
>>>>>> IndexAccessProvider accessProvider = new 
>>>>>> IndexAccessProvider(directory,
>>>>>>
>>>>>> analyzer);
>>>>>>
>>>>>> LuceneIndexAccessor accessor = new 
>>>>>> LuceneIndexAccessor(accessProvider);
>>>>>>
>>>>>> accessor.open();
>>>>>>
>>>>>> IndexWriter writer = accessor.getWriter();
>>>>>>
>>>>>> // reference to the same instance?
>>>>>>
>>>>>> IndexWriter writer2 = accessor.getWriter();
>>>>>>
>>>>>> writer.addDocument(....);
>>>>>>
>>>>>> writer2.addDocument(....);
>>>>>>
>>>>>>
>>>>>>
>>>>>> // I didn't release the writer yet
>>>>>>
>>>>>> // will this block?
>>>>>>
>>>>>> IndexReader reader = accessor.getReader();
>>>>>>
>>>>>> reader.delete(....);
>>>>>>
>>>>>> ************
>>>>>>
>>>>>> This is not really an issue. First, if you are going to delete 
>>>>>> with a Reader
>>>>>> you need to call getWritingReader and not getReader. When you do 
>>>>>> that, the
>>>>>> getWritingReader call will block until writer and writer2 are 
>>>>>> released. If
>>>>>> you are just adding a couple docs before releasing the writers, 
>>>>>> this is no
>>>>>> problem because the block will be very short. If you are loading 
>>>>>> tons of
>>>>>> docs and you want to be able to delete with a Reader in a timely 
>>>>>> manner, you
>>>>>> should release the writers every now and then (release and re-get 
>>>>>> the Writer
>>>>>> every 100 docs or something). An interactive index should not hog 
>>>>>> the
>>>>>> Writer, while something that is just loading a lot could hog the 
>>>>>> Writer.
>>>>>> This is no different than normalyou cannot delete with a Reader 
>>>>>> while
>>>>>> adding with a Writer with Lucene. This code just enforces those 
>>>>>> semantics.
>>>>>> The best solution is to just use a Writer to delete  I never get a
>>>>>> ReadingWriter.
>>>>>>
>>>>>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>>
>>>>>> This is no big deal either. I just added another getWriter call 
>>>>>> that takes a
>>>>>> create Boolean.
>>>>>>
>>>>>> 3. I don't think there is a latest release. This has never gotten 
>>>>>> much
>>>>>> official attention and is not in the sandbox. I worked straight 
>>>>>> from the
>>>>>> originally submitted code.
>>>>>>
>>>>>> 4. I will look into getting together some code that I can share. The
>>>>>> multisearcher changes that are need are a couple of one liners 
>>>>>> really, so at
>>>>>> a minimum I will give you the changes needed.
>>>>>>
>>>>>>
>>>>>>
>>>>>> -       Mark
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>>
>>>>>> Mark,
>>>>>>
>>>>>>
>>>>>>
>>>>>> thanks for sharing your insight and experience about 
>>>>>> LuceneIndexAccessor!
>>>>>>
>>>>>> I remember seeing some people reporting some issues about it, 
>>>>>> such as:
>>>>>>
>>>>>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>>>>>
>>>>>>
>>>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>>
>>>>>>
>>>>>>
>>>>>> Have those issues been resolved?
>>>>>>
>>>>>>
>>>>>>
>>>>>> Where did you get the latest release? It is not in the official 
>>>>>> Lucene
>>>>>>
>>>>>> sandbox/contrib.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Finally, are you willing to share your extended version to 
>>>>>> include your
>>>>>>
>>>>>> tweak relating to the MultiSearcher?
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks a lot!
>>>>>>
>>>>>>
>>>>>>
>>>>>> Jay
>>>>>>
>>>>>>
>>>>>>
>>>>>> Mark Miller wrote:
>>>>>>
>>>>>>> I use option 3 extensivley and find it very effective. There is 
>>>>>>> a tweak or
>>>>>>
>>>>>>> two required to get it to work right with MultiSearchers, but 
>>>>>>> other than
>>>>>>
>>>>>>> that, the code is great. I have built a lot on top of it. I'm on 
>>>>>>> the list
>>>>>>
>>>>>>> all the time and would be happy to answer any questions you have in
>>>>>> regards
>>>>>>
>>>>>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too 
>>>>>>> much.
>>>>>>
>>>>>>
>>>>>>> - Mark
>>>>>>
>>>>>>
>>>>>>
>>>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>>
>>>>>>
>>>>>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>>>>>> throw a
>>>>>>
>>>>>>>> AlreadyClosedException when another thread is trying to update the
>>>>>>
>>>>>>>> underlying IndexReader by closing the shared searcher after the 
>>>>>>>> index is
>>>>>>
>>>>>>>> updated. Searching over the past discussions on this mailing 
>>>>>>>> list, I
>>>>>>
>>>>>>>> found several approaches to solve the problem.
>>>>>>
>>>>>>>> 1. use solr
>>>>>>
>>>>>>>> 2. use DelayCloseIndexSearcher
>>>>>>
>>>>>>>> 3. use LuceneIndexAccessor
>>>>>>
>>>>>>
>>>>>>
>>>>>>>> the first one is not feasible for us; some people seemed to have
>>>>>>
>>>>>>>> problems with No. 2 and I do not find a lot of discussions 
>>>>>>>> around No.3.
>>>>>>
>>>>>>
>>>>>>>> I wonder if anyone has good experience on No 2 and 3?
>>>>>>
>>>>>>>> Or do I miss other better solutions?
>>>>>>
>>>>>>
>>>>>>>> Thanks for any suggestion/comment!
>>>>>>
>>>>>>
>>>>>>>> Jay
>>>>>>
>>>>>>
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 12:39:27 2007
Return-Path: <java-user-return-30390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27015 invoked from network); 24 Sep 2007 12:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 12:39:26 -0000
Received: (qmail 52397 invoked by uid 500); 24 Sep 2007 12:39:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52362 invoked by uid 500); 24 Sep 2007 12:39:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52351 invoked by uid 99); 24 Sep 2007 12:39:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 05:39:11 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 12:39:13 +0000
Received: by wx-out-0506.google.com with SMTP id i28so988683wxd
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 05:38:51 -0700 (PDT)
Received: by 10.90.49.1 with SMTP id w1mr5540970agw.1190637531539;
        Mon, 24 Sep 2007 05:38:51 -0700 (PDT)
Received: by 10.90.79.16 with HTTP; Mon, 24 Sep 2007 05:38:51 -0700 (PDT)
Message-ID: <962ea6660709240538q17c8e807x570183918700f34f@mail.gmail.com>
Date: Mon, 24 Sep 2007 05:38:51 -0700
From: "Bogdan Ghidireac" <bogdan@ecstend.com>
To: java-user@lucene.apache.org
Subject: index conversion
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34201_18014127.1190637531516"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34201_18014127.1190637531516
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have an optimized compound index and I want to transform it to standard
format. I tried to optimize using the standard format but I had no luck.. Is
there another way ? I don't want to re-index because it will take several
days.

IndexWriter writer = new IndexWriter(args[0], new StandardAnalyzer(),
false);
writer.setUseCompoundFile(false);
writer.setMaxBufferedDocs(10000);
writer.optimize();
writer.close();

Regards,
Bogdan

------=_Part_34201_18014127.1190637531516--

From java-user-return-30391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 12:56:10 2007
Return-Path: <java-user-return-30391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33217 invoked from network); 24 Sep 2007 12:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 12:56:09 -0000
Received: (qmail 83338 invoked by uid 500); 24 Sep 2007 12:55:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83305 invoked by uid 500); 24 Sep 2007 12:55:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83285 invoked by uid 99); 24 Sep 2007 12:55:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 05:55:52 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 12:58:01 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l8OCtTEY121672
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 12:55:29 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.5) with ESMTP id l8OCtSFE2175072
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 14:55:29 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l8OCtSXt014121
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 14:55:28 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l8OCtSvW014102
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 14:55:28 +0200
In-Reply-To: <962ea6660709240538q17c8e807x570183918700f34f@mail.gmail.com>
Subject: Re: index conversion
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC3540EE2.A396A4B8-ONC2257360.00409D0B-C2257360.0041580C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 24 Sep 2007 13:53:43 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/09/2007 14:55:27
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

For an already optimized index calling optimize() is a no-op.

You may try this: after opening the writer and setting compound=false, add
a dummy (even empty) document to the index, then optimize(), and finally
optionally remove the dummy document.

Note that calling optimize() might be lengthy as well for a large index. In
any case, try this first on a trial index, and also make a backup of the
existing index, just in case.

Why do you want to transform the index from compound to non compound form?

Doron

"Bogdan Ghidireac" <bogdan@ecstend.com> wrote on 24/09/2007 15:38:51:

> Hi,
>
> I have an optimized compound index and I want to transform it to standard
> format. I tried to optimize using the standard format but I had
> no luck.. Is
> there another way ? I don't want to re-index because it will take several
> days.
>
> IndexWriter writer = new IndexWriter(args[0], new StandardAnalyzer(),
> false);
> writer.setUseCompoundFile(false);
> writer.setMaxBufferedDocs(10000);
> writer.optimize();
> writer.close();
>
> Regards,
> Bogdan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 13:55:24 2007
Return-Path: <java-user-return-30392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61326 invoked from network); 24 Sep 2007 13:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 13:55:24 -0000
Received: (qmail 93849 invoked by uid 500); 24 Sep 2007 13:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93819 invoked by uid 500); 24 Sep 2007 13:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93808 invoked by uid 99); 24 Sep 2007 13:55:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 06:55:09 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 13:55:11 +0000
Received: by ag-out-0708.google.com with SMTP id 5so804625agb
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 06:54:48 -0700 (PDT)
Received: by 10.90.66.9 with SMTP id o9mr5626564aga.1190642088335;
        Mon, 24 Sep 2007 06:54:48 -0700 (PDT)
Received: by 10.90.79.16 with HTTP; Mon, 24 Sep 2007 06:54:48 -0700 (PDT)
Message-ID: <962ea6660709240654m4c1ab5cdvddce348f7c1aa7d7@mail.gmail.com>
Date: Mon, 24 Sep 2007 06:54:48 -0700
From: "Bogdan Ghidireac" <bogdan@ecstend.com>
To: java-user@lucene.apache.org
Subject: Re: index conversion
In-Reply-To: <OFC3540EE2.A396A4B8-ONC2257360.00409D0B-C2257360.0041580C@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34490_3456313.1190642088327"
References: <962ea6660709240538q17c8e807x570183918700f34f@mail.gmail.com>
	 <OFC3540EE2.A396A4B8-ONC2257360.00409D0B-C2257360.0041580C@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34490_3456313.1190642088327
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 9/24/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> For an already optimized index calling optimize() is a no-op.
>
> You may try this: after opening the writer and setting compound=false, add
> a dummy (even empty) document to the index, then optimize(), and finally
> optionally remove the dummy document.
>
> Note that calling optimize() might be lengthy as well for a large index.
> In
> any case, try this first on a trial index, and also make a backup of the
> existing index, just in case.


thanks, that worked smoothly ..


Why do you want to transform the index from compound to non compound form?


My index is quite large (14GB) and this is because I use stored fields. The
requirements of the project force me to have a response time below 500ms and
I cannot do this at this moment (the tp99.9 is 700ms).

What I am planning to do is to use the standard format so I can move all
relevant files except .fdt and .fdx to a memory disk. After conversion the
.fdt + .fdx files have around 11.5GB.

I don't think there is an index reader that supports two locations (one for
index data and another one for stored data) but I will modify an existing
one and check the results.

Bogdan


Doron
>
> "Bogdan Ghidireac" <bogdan@ecstend.com> wrote on 24/09/2007 15:38:51:
>
> > Hi,
> >
> > I have an optimized compound index and I want to transform it to
> standard
> > format. I tried to optimize using the standard format but I had
> > no luck.. Is
> > there another way ? I don't want to re-index because it will take
> several
> > days.
> >
> > IndexWriter writer = new IndexWriter(args[0], new StandardAnalyzer(),
> > false);
> > writer.setUseCompoundFile(false);
> > writer.setMaxBufferedDocs(10000);
> > writer.optimize();
> > writer.close();
> >
> > Regards,
> > Bogdan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34490_3456313.1190642088327--

From java-user-return-30393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 14:26:27 2007
Return-Path: <java-user-return-30393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71887 invoked from network); 24 Sep 2007 14:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 14:26:26 -0000
Received: (qmail 66358 invoked by uid 500); 24 Sep 2007 14:26:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66326 invoked by uid 500); 24 Sep 2007 14:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66315 invoked by uid 99); 24 Sep 2007 14:26:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 07:26:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 14:26:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 0C50211BCF
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 07:25:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <962ea6660709240654m4c1ab5cdvddce348f7c1aa7d7@mail.gmail.com>
References: <962ea6660709240538q17c8e807x570183918700f34f@mail.gmail.com> <OFC3540EE2.A396A4B8-ONC2257360.00409D0B-C2257360.0041580C@il.ibm.com> <962ea6660709240654m4c1ab5cdvddce348f7c1aa7d7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8BED0343-EA0F-47E1-B308-ED079C389678@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: index conversion
Date: Mon, 24 Sep 2007 10:25:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Sep 24, 2007, at 9:54 AM, Bogdan Ghidireac wrote:

> On 9/24/07, Doron Cohen <DORONC@il.ibm.com> wrote:
>>
>> For an already optimized index calling optimize() is a no-op.
>>
>> You may try this: after opening the writer and setting  
>> compound=false, add
>> a dummy (even empty) document to the index, then optimize(), and  
>> finally
>> optionally remove the dummy document.
>>
>> Note that calling optimize() might be lengthy as well for a large  
>> index.
>> In
>> any case, try this first on a trial index, and also make a backup  
>> of the
>> existing index, just in case.
>
>
> thanks, that worked smoothly ..
>
>
> Why do you want to transform the index from compound to non  
> compound form?
>
>
> My index is quite large (14GB) and this is because I use stored  
> fields. The
> requirements of the project force me to have a response time below  
> 500ms and
> I cannot do this at this moment (the tp99.9 is 700ms).
>
> What I am planning to do is to use the standard format so I can  
> move all
> relevant files except .fdt and .fdx to a memory disk. After  
> conversion the
> .fdt + .fdx files have around 11.5GB.
>
> I don't think there is an index reader that supports two locations  
> (one for
> index data and another one for stored data) but I will modify an  
> existing
> one and check the results.

I believe this is the use case for ParallelReader (although I have  
never used it) but it comes with caveats.  Search the archives and  
checkout the javadocs for info.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 16:36:09 2007
Return-Path: <java-user-return-30394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22267 invoked from network); 24 Sep 2007 16:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 16:36:09 -0000
Received: (qmail 2543 invoked by uid 500); 24 Sep 2007 16:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2515 invoked by uid 500); 24 Sep 2007 16:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2504 invoked by uid 99); 24 Sep 2007 16:35:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 09:35:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:35:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IZquB-00056U-OU
	for java-user@lucene.apache.org; Mon, 24 Sep 2007 09:35:31 -0700
Message-ID: <12863403.post@talk.nabble.com>
Date: Mon, 24 Sep 2007 09:35:31 -0700 (PDT)
From: Galactikuh <kshanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <48b038c60709211853n49bd47aai76704af1bf3ff27d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kshanti@gmail.com
References: <12827864.post@talk.nabble.com> <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com> <12831941.post@talk.nabble.com> <48b038c60709211853n49bd47aai76704af1bf3ff27d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, Well I believe I did, but I am not positive. The code I use to set it up
is below. Actually I'm not even really sure how to specify which analyzer to
use for indexing using Hibernate Search. This may be a question for their
forum.

Thanks,
K

Patrick Turcotte-2 wrote:
> 
> Hi,
> 
> Did you use the same snowball analyzer to create your index? Remember
> that you usually need to use the same analyzer for indexing and
> searching.
> 
> Patrick
> 
> On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>>
>> Hi,
>> After doing some more analysis with Luke it does seem like that it is
>> something about that Analyzer, not my code, since I get the same results
>> in
>> there.
>>
>> K
>>
>> Erick Erickson wrote:
>> >
>> > Have you gotten a copy of Luke and examined your index
>> > to see if what's in there is actually what you think? I've found
>> > it invaluable (see the Lucene pages).
>> >
>> > Also, query.toString() is your friend. It'll show you what the
>> > actual query looks like after parsing.
>> >
>> > You could also, as a test, construct a BooleanQuery
>> > with the term "nut" and see what comes back....
>> >
>> > Is it possible that UseStemmer is being set to false somehow
>> > for the query parser (perhaps in code you didn't post?). That
>> > would account for it...
>> >
>> > Best
>> > Erick
>> >
>> > On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>> >>
>> >>
>> >> I am using SnowballAnalyzer with Hibernate search. I am using it to
>> >> search
>> >> phrases in a database. It only seems to return the stemmed version of
>> any
>> >> query. So for example, I have two phrases in the DB:
>> >>
>> >> "Cheney is a nut"
>> >> and
>> >> "I hate nuts"
>> >>
>> >> When I do a search for either "nut" or "nuts" it only returns "Cheney
>> is
>> >> a
>> >> nut"
>> >>
>> >> This is what seems to be inside my index file:
>> >>
>> >> 'cheney' 'hate' 'i' 'nut' 's'
>> >>
>> >> Here is the code, although it's hibernate so not sure if it's relevant
>> or
>> >> will mean anything to anyone here.
>> >>
>> >> Thanks,
>> >> Kshanti
>> >>
>> >> import javax.persistence.EntityManager;
>> >>
>> >> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>> >> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> >> import org.apache.lucene.queryParser.QueryParser;
>> >> import org.hibernate.*;
>> >>
>> >> public class LuceneSearch
>> >> {
>> >>
>> >>    public enum Similarity
>> >>    {
>> >>       KEYWORDS,
>> >>       HIGH,
>> >>       EXPAND,
>> >>       EXACT,
>> >>
>> >>    }
>> >>
>> >>    public static final String TEXT_FIELD = "TEXT";
>> >>
>> >>    private static final String HIBERNATE_FILE =
>> >> "META-INF/persistence.xml";
>> >>
>> >>    private QueryParser _parser;
>> >>
>> >>    private String[] _stopWords;
>> >>
>> >>    private FullTextSession _textSession;
>> >>
>> >>    private EntityManager _entityManager;
>> >>
>> >>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
>> >>
>> >>    private boolean _beenIndexed=false;
>> >>
>> >>    public static boolean UseStemmer=true;
>> >>
>> >>    public LuceneSearch(EntityManager entityMgr)
>> >>    {
>> >>       if (null == entityMgr)
>> >>          throw new IllegalArgumentException("entityMgr must not be
>> >> null.");
>> >>
>> >>       _entityManager = entityMgr;
>> >>       // Have to use sessions here
>> >>       try
>> >>       {
>> >>          Session session = (Session) _entityManager.getDelegate();
>> >>          _textSession = Search.createFullTextSession(session);
>> >>          initialize(null);
>> >>       }
>> >>       catch (ClassCastException ce)
>> >>       {
>> >>          // this error supposedly should not get thrown as
>> getDelegate()
>> >>          // supposedly always returns a Session, but just in case.
>> >>          // (this was from examples on the web and the #hibernate
>> channel
>> >> so
>> >>          // needs to be verified
>> >>          ce.printStackTrace();
>> >>          // TODO: Wrap it up and do something else with it
>> >>          throw ce;
>> >>       }
>> >>    }
>> >>
>> >>    private void initialize(String[] stopWords)
>> >>    {
>> >>       if (stopWords != null)
>> >>       {
>> >>          // first set up the parser with the new stop words
>> >>
>> >>          if(UseStemmer)
>> >>          {
>> >>             _parser = new QueryParser(TEXT_FIELD, new
>> >> SnowballAnalyzer("English",stopWords));
>> >>          }
>> >>          else
>> >>          {
>> >>             _parser = new QueryParser(TEXT_FIELD, new
>> >> StandardAnalyzer(stopWords));
>> >>          }
>> >>       }
>> >>       else
>> >>       {  // default stop words
>> >>          if(UseStemmer)
>> >>          {
>> >>             _parser = new QueryParser(TEXT_FIELD, new
>> >> SnowballAnalyzer("English"));
>> >>          }
>> >>          else
>> >>          {
>> >>             _parser = new QueryParser(TEXT_FIELD, new
>> >> StandardAnalyzer());
>> >>          }
>> >>       }
>> >>
>> >>       _stopWords = stopWords;
>> >>    }
>> >>
>> >>    /***
>> >>     * Run the indexer
>> >>     */
>> >>    public void index()
>> >>    {
>> >>     //now index
>> >>
>> >>       Transaction tx = _textSession.beginTransaction();
>> >>       List<Prediction> predictions = _textSession.createQuery("from
>> >> Prediction as prediction").list();
>> >>       for(Prediction pred: predictions)
>> >>       {
>> >>          _textSession.index(pred);
>> >>       }
>> >>       tx.commit(); //index are written at commit time
>> >>       _beenIndexed=true;
>> >>    }
>> >>
>> >>    public List<Prediction> searchPredictions(String queryStr)
>> >>    {
>> >>       // look in text column of predictions
>> >>       try
>> >>       {
>> >>          if (queryStr != null && !queryStr.equals(""))
>> >>          {
>> >>             // need to add the field name to the querystring
>> >>             queryStr = TEXT_FIELD + ":" + queryStr;
>> >>             org.apache.lucene.search.Query luceneQuery =
>> >> _parser.parse(queryStr);
>> >>             Query query =
>> _textSession.createFullTextQuery(luceneQuery,
>> >>                   Prediction.class);
>> >>             List<Prediction> ret = query.list();
>> >>           //default fits the KEYWORDS similarity
>> >>             if (ret != null)
>> >>             {
>> >>                switch(_defaultSimilarity)
>> >>                {
>> >>
>> >>                   case KEYWORDS:
>> >>                   case HIGH:
>> >>                   case EXPAND:
>> >>                   case EXACT:
>> >>
>> >>                      return ret;
>> >>
>> >>                }
>> >>
>> >>             }
>> >>          }
>> >>       }
>> >>       catch (Exception pe)
>> >>       {// KKG TODO: Turn this into a better exception
>> >>          pe.printStackTrace();
>> >>       }
>> >>       return new ArrayList<Prediction>();
>> >>    }
>> >> }
>> >>
>> >>
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12831941
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12863403
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 16:47:36 2007
Return-Path: <java-user-return-30395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41574 invoked from network); 24 Sep 2007 16:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 16:47:35 -0000
Received: (qmail 12366 invoked by uid 500); 24 Sep 2007 16:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12328 invoked by uid 500); 24 Sep 2007 16:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12317 invoked by uid 99); 24 Sep 2007 16:47:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 09:47:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:49:27 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8OGkp024584
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 09:46:51 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092409465016672
 for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 09:46:50 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IZr58-0001uN-00
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 09:46:50 -0700
Message-ID: <46F7E9F9.3010103@ai.sri.com>
Date: Mon, 24 Sep 2007 09:46:49 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com>
In-Reply-To: <46F7A320.9030100@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'd be very interested to see your test results and codes. Thanks!

Mark Miller wrote:
> I sat down over the weekend and rewrote the code from scratch so that I 
> could improve and simplify it somewhat. I also did some testing of the 
> synch costs, and it is very insignificant compared to the total time to 
> parse a query and run a search. I'll try and get around to posting the 
> code tonight.
> 
> - Mark
> 
> Jay Yu wrote:
>>
>>
>> Mark Miller wrote:
>>> Good luck Jay. Keep in mind, pretty much all LuceneIndexAccessor does 
>>> is sync Readers with Writers and allow multiple threads to share the 
>>> same instances of them -- nothing more. The code just forces Readers 
>>> to refresh when Writers are used to change the index. There really 
>>> isn't any functionality beyond that offered. Since you want to have a 
>>> multi thread system access the same resources (which occasionally 
>>> need to be refreshed) its not too easy to get around a synchronized 
>>> block.
>>>
>>> If I am able to extract some usable code for you soon I will let you 
>>> know.
>> I will appreciate it!
>> Thanks for your help!
>>
>>>
>>> - Mark
>>>
>>> Jay Yu wrote:
>>>> Mark,
>>>>
>>>> Thanks for sharing your valuable exp. and thoughts.
>>>> Frankly our system already has most of the functionalities 
>>>> LuceneIndexAcessor offers. The only thing I am looking for is to 
>>>> sync the searchers' close. That's why I am little worried about the 
>>>> way accessor handles the searcher sync.
>>>> I will probably give it a try to see how it performs in our system.
>>>>
>>>> Thanks!
>>>>
>>>> Jay
>>>>
>>>> Mark Miller wrote:
>>>>> The method is synched, but this is because each thread *does* share 
>>>>> the same Searcher. To maintain a cache of searchers across multiple 
>>>>> threads, you've got to sync -- to reference count, you've got to 
>>>>> sync. The performance hit of LuceneIndexAcessor is pretty minimal 
>>>>> for its functionality, and frankly, for the functionality you want, 
>>>>> you have to pay a cost. Thats not even the end of it really...your 
>>>>> going to need to maintain a cache of Accessor objects for each 
>>>>> index as well...and if you dont know all the indexes at startup 
>>>>> time, access to this will also need to be synched. I wouldn't worry 
>>>>> though -- searches are still lightening fast...that won't be the 
>>>>> bottleneck. I'll work on getting you some code, but if your 
>>>>> worried, try some benchmarking on the original code.
>>>>>
>>>>> Also, to be clear, I don't have the code in front of me, but 
>>>>> getting a Searcher does not require waiting for a Writer to be 
>>>>> released. Searchers are cached and resused (and instantly 
>>>>> available) until a Writer is released. When this happens, the 
>>>>> release Writer method waits for all the Searchers to return 
>>>>> (happens pretty quick as searches are pretty quick), the Searcher 
>>>>> cache is cleared, and then subsequent calls to getSearcher create 
>>>>> new Searchers that can see what the Writer added.
>>>>>
>>>>> The key is use your Writer/Searcher/Reader quickly and then release 
>>>>> it (unless your bulk loading). I've had such a system with 5+ 
>>>>> million docs on a standard machine and searches where still well 
>>>>> below a second after the first Searcher is cached (and even the 
>>>>> first search is darn quick). And that includes a lot of extra crap 
>>>>> I am doing.
>>>>>
>>>>> - Mark
>>>>>
>>>>> Jay Yu wrote:
>>>>>> Mark,
>>>>>>
>>>>>> After reading the implementation of 
>>>>>> LuceneIndexAccessor.getSearcher(),
>>>>>> I realized that the method is synchronized and wait for 
>>>>>> writingDirector to be released. That means if we getSearcher for 
>>>>>> each query in each thread, there might be a contention and 
>>>>>> performance hit. In fact, even the method of release(searcher) is 
>>>>>> costly. On the other hand, if multiple threads share share one 
>>>>>> searcher then it'd defeat the
>>>>>> purpose of using LuceneIndexAccessor.
>>>>>> Do I miss sth here? What's your suggested use case for 
>>>>>> LuceneIndexAccessor?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Jay
>>>>>> Mark Miller wrote:
>>>>>>> Ill respond a point at a time:
>>>>>>>
>>>>>>> 1.
>>>>>>>
>>>>>>> ****************************** Hi Maik,
>>>>>>>
>>>>>>> So what happens in this case:
>>>>>>>
>>>>>>> IndexAccessProvider accessProvider = new 
>>>>>>> IndexAccessProvider(directory,
>>>>>>>
>>>>>>> analyzer);
>>>>>>>
>>>>>>> LuceneIndexAccessor accessor = new 
>>>>>>> LuceneIndexAccessor(accessProvider);
>>>>>>>
>>>>>>> accessor.open();
>>>>>>>
>>>>>>> IndexWriter writer = accessor.getWriter();
>>>>>>>
>>>>>>> // reference to the same instance?
>>>>>>>
>>>>>>> IndexWriter writer2 = accessor.getWriter();
>>>>>>>
>>>>>>> writer.addDocument(....);
>>>>>>>
>>>>>>> writer2.addDocument(....);
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> // I didn't release the writer yet
>>>>>>>
>>>>>>> // will this block?
>>>>>>>
>>>>>>> IndexReader reader = accessor.getReader();
>>>>>>>
>>>>>>> reader.delete(....);
>>>>>>>
>>>>>>> ************
>>>>>>>
>>>>>>> This is not really an issue. First, if you are going to delete 
>>>>>>> with a Reader
>>>>>>> you need to call getWritingReader and not getReader. When you do 
>>>>>>> that, the
>>>>>>> getWritingReader call will block until writer and writer2 are 
>>>>>>> released. If
>>>>>>> you are just adding a couple docs before releasing the writers, 
>>>>>>> this is no
>>>>>>> problem because the block will be very short. If you are loading 
>>>>>>> tons of
>>>>>>> docs and you want to be able to delete with a Reader in a timely 
>>>>>>> manner, you
>>>>>>> should release the writers every now and then (release and re-get 
>>>>>>> the Writer
>>>>>>> every 100 docs or something). An interactive index should not hog 
>>>>>>> the
>>>>>>> Writer, while something that is just loading a lot could hog the 
>>>>>>> Writer.
>>>>>>> This is no different than normalyou cannot delete with a Reader 
>>>>>>> while
>>>>>>> adding with a Writer with Lucene. This code just enforces those 
>>>>>>> semantics.
>>>>>>> The best solution is to just use a Writer to delete  I never get a
>>>>>>> ReadingWriter.
>>>>>>>
>>>>>>> 2. http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>>>
>>>>>>> This is no big deal either. I just added another getWriter call 
>>>>>>> that takes a
>>>>>>> create Boolean.
>>>>>>>
>>>>>>> 3. I don't think there is a latest release. This has never gotten 
>>>>>>> much
>>>>>>> official attention and is not in the sandbox. I worked straight 
>>>>>>> from the
>>>>>>> originally submitted code.
>>>>>>>
>>>>>>> 4. I will look into getting together some code that I can share. The
>>>>>>> multisearcher changes that are need are a couple of one liners 
>>>>>>> really, so at
>>>>>>> a minimum I will give you the changes needed.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> -       Mark
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>>>
>>>>>>> Mark,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> thanks for sharing your insight and experience about 
>>>>>>> LuceneIndexAccessor!
>>>>>>>
>>>>>>> I remember seeing some people reporting some issues about it, 
>>>>>>> such as:
>>>>>>>
>>>>>>> http://www.archivum.info/java-dev@lucene.apache.org/2005-05/msg00114.html 
>>>>>>>
>>>>>>>
>>>>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=34995#c3
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Have those issues been resolved?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Where did you get the latest release? It is not in the official 
>>>>>>> Lucene
>>>>>>>
>>>>>>> sandbox/contrib.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Finally, are you willing to share your extended version to 
>>>>>>> include your
>>>>>>>
>>>>>>> tweak relating to the MultiSearcher?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thanks a lot!
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Jay
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Mark Miller wrote:
>>>>>>>
>>>>>>>> I use option 3 extensivley and find it very effective. There is 
>>>>>>>> a tweak or
>>>>>>>
>>>>>>>> two required to get it to work right with MultiSearchers, but 
>>>>>>>> other than
>>>>>>>
>>>>>>>> that, the code is great. I have built a lot on top of it. I'm on 
>>>>>>>> the list
>>>>>>>
>>>>>>>> all the time and would be happy to answer any questions you have in
>>>>>>> regards
>>>>>>>
>>>>>>>> to LuceneIndexAccessor. Frankly, I think its overlooked far too 
>>>>>>>> much.
>>>>>>>
>>>>>>>
>>>>>>>> - Mark
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> On 9/19/07, Jay Yu <yu@ai.sri.com> wrote:
>>>>>>>
>>>>>>>
>>>>>>>>> In a multithread app like web app, a shared IndexSearcher could 
>>>>>>>>> throw a
>>>>>>>
>>>>>>>>> AlreadyClosedException when another thread is trying to update the
>>>>>>>
>>>>>>>>> underlying IndexReader by closing the shared searcher after the 
>>>>>>>>> index is
>>>>>>>
>>>>>>>>> updated. Searching over the past discussions on this mailing 
>>>>>>>>> list, I
>>>>>>>
>>>>>>>>> found several approaches to solve the problem.
>>>>>>>
>>>>>>>>> 1. use solr
>>>>>>>
>>>>>>>>> 2. use DelayCloseIndexSearcher
>>>>>>>
>>>>>>>>> 3. use LuceneIndexAccessor
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>> the first one is not feasible for us; some people seemed to have
>>>>>>>
>>>>>>>>> problems with No. 2 and I do not find a lot of discussions 
>>>>>>>>> around No.3.
>>>>>>>
>>>>>>>
>>>>>>>>> I wonder if anyone has good experience on No 2 and 3?
>>>>>>>
>>>>>>>>> Or do I miss other better solutions?
>>>>>>>
>>>>>>>
>>>>>>>>> Thanks for any suggestion/comment!
>>>>>>>
>>>>>>>
>>>>>>>>> Jay
>>>>>>>
>>>>>>>
>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>
>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 16:48:10 2007
Return-Path: <java-user-return-30396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42127 invoked from network); 24 Sep 2007 16:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 16:48:09 -0000
Received: (qmail 14425 invoked by uid 500); 24 Sep 2007 16:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13885 invoked by uid 500); 24 Sep 2007 16:47:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13874 invoked by uid 99); 24 Sep 2007 16:47:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 09:47:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:50:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IZr5o-0005RT-Ej
	for java-user@lucene.apache.org; Mon, 24 Sep 2007 09:47:32 -0700
Message-ID: <12863633.post@talk.nabble.com>
Date: Mon, 24 Sep 2007 09:47:32 -0700 (PDT)
From: Galactikuh <kshanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Snowball Analyzer
In-Reply-To: <12863403.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kshanti@gmail.com
References: <12827864.post@talk.nabble.com> <359a92830709211436ic3ed7ela4c31713d51a6f32@mail.gmail.com> <12831941.post@talk.nabble.com> <48b038c60709211853n49bd47aai76704af1bf3ff27d@mail.gmail.com> <12863403.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Actually I am pretty sure that it is using Snowball for indexing too since
the results of the indexing in Luke do not include "nuts":
cheney
is
a
nut
i
hate
nut


Galactikuh wrote:
> 
> Hi, Well I believe I did, but I am not positive. The code I use to set it
> up is below. Actually I'm not even really sure how to specify which
> analyzer to use for indexing using Hibernate Search. This may be a
> question for their forum.
> 
> Thanks,
> K
> 
> Patrick Turcotte-2 wrote:
>> 
>> Hi,
>> 
>> Did you use the same snowball analyzer to create your index? Remember
>> that you usually need to use the same analyzer for indexing and
>> searching.
>> 
>> Patrick
>> 
>> On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>>>
>>> Hi,
>>> After doing some more analysis with Luke it does seem like that it is
>>> something about that Analyzer, not my code, since I get the same results
>>> in
>>> there.
>>>
>>> K
>>>
>>> Erick Erickson wrote:
>>> >
>>> > Have you gotten a copy of Luke and examined your index
>>> > to see if what's in there is actually what you think? I've found
>>> > it invaluable (see the Lucene pages).
>>> >
>>> > Also, query.toString() is your friend. It'll show you what the
>>> > actual query looks like after parsing.
>>> >
>>> > You could also, as a test, construct a BooleanQuery
>>> > with the term "nut" and see what comes back....
>>> >
>>> > Is it possible that UseStemmer is being set to false somehow
>>> > for the query parser (perhaps in code you didn't post?). That
>>> > would account for it...
>>> >
>>> > Best
>>> > Erick
>>> >
>>> > On 9/21/07, Galactikuh <kshanti@gmail.com> wrote:
>>> >>
>>> >>
>>> >> I am using SnowballAnalyzer with Hibernate search. I am using it to
>>> >> search
>>> >> phrases in a database. It only seems to return the stemmed version of
>>> any
>>> >> query. So for example, I have two phrases in the DB:
>>> >>
>>> >> "Cheney is a nut"
>>> >> and
>>> >> "I hate nuts"
>>> >>
>>> >> When I do a search for either "nut" or "nuts" it only returns "Cheney
>>> is
>>> >> a
>>> >> nut"
>>> >>
>>> >> This is what seems to be inside my index file:
>>> >>
>>> >> 'cheney' 'hate' 'i' 'nut' 's'
>>> >>
>>> >> Here is the code, although it's hibernate so not sure if it's
>>> relevant or
>>> >> will mean anything to anyone here.
>>> >>
>>> >> Thanks,
>>> >> Kshanti
>>> >>
>>> >> import javax.persistence.EntityManager;
>>> >>
>>> >> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>>> >> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>> >> import org.apache.lucene.queryParser.QueryParser;
>>> >> import org.hibernate.*;
>>> >>
>>> >> public class LuceneSearch
>>> >> {
>>> >>
>>> >>    public enum Similarity
>>> >>    {
>>> >>       KEYWORDS,
>>> >>       HIGH,
>>> >>       EXPAND,
>>> >>       EXACT,
>>> >>
>>> >>    }
>>> >>
>>> >>    public static final String TEXT_FIELD = "TEXT";
>>> >>
>>> >>    private static final String HIBERNATE_FILE =
>>> >> "META-INF/persistence.xml";
>>> >>
>>> >>    private QueryParser _parser;
>>> >>
>>> >>    private String[] _stopWords;
>>> >>
>>> >>    private FullTextSession _textSession;
>>> >>
>>> >>    private EntityManager _entityManager;
>>> >>
>>> >>    private Similarity _defaultSimilarity=Similarity.KEYWORDS;
>>> >>
>>> >>    private boolean _beenIndexed=false;
>>> >>
>>> >>    public static boolean UseStemmer=true;
>>> >>
>>> >>    public LuceneSearch(EntityManager entityMgr)
>>> >>    {
>>> >>       if (null == entityMgr)
>>> >>          throw new IllegalArgumentException("entityMgr must not be
>>> >> null.");
>>> >>
>>> >>       _entityManager = entityMgr;
>>> >>       // Have to use sessions here
>>> >>       try
>>> >>       {
>>> >>          Session session = (Session) _entityManager.getDelegate();
>>> >>          _textSession = Search.createFullTextSession(session);
>>> >>          initialize(null);
>>> >>       }
>>> >>       catch (ClassCastException ce)
>>> >>       {
>>> >>          // this error supposedly should not get thrown as
>>> getDelegate()
>>> >>          // supposedly always returns a Session, but just in case.
>>> >>          // (this was from examples on the web and the #hibernate
>>> channel
>>> >> so
>>> >>          // needs to be verified
>>> >>          ce.printStackTrace();
>>> >>          // TODO: Wrap it up and do something else with it
>>> >>          throw ce;
>>> >>       }
>>> >>    }
>>> >>
>>> >>    private void initialize(String[] stopWords)
>>> >>    {
>>> >>       if (stopWords != null)
>>> >>       {
>>> >>          // first set up the parser with the new stop words
>>> >>
>>> >>          if(UseStemmer)
>>> >>          {
>>> >>             _parser = new QueryParser(TEXT_FIELD, new
>>> >> SnowballAnalyzer("English",stopWords));
>>> >>          }
>>> >>          else
>>> >>          {
>>> >>             _parser = new QueryParser(TEXT_FIELD, new
>>> >> StandardAnalyzer(stopWords));
>>> >>          }
>>> >>       }
>>> >>       else
>>> >>       {  // default stop words
>>> >>          if(UseStemmer)
>>> >>          {
>>> >>             _parser = new QueryParser(TEXT_FIELD, new
>>> >> SnowballAnalyzer("English"));
>>> >>          }
>>> >>          else
>>> >>          {
>>> >>             _parser = new QueryParser(TEXT_FIELD, new
>>> >> StandardAnalyzer());
>>> >>          }
>>> >>       }
>>> >>
>>> >>       _stopWords = stopWords;
>>> >>    }
>>> >>
>>> >>    /***
>>> >>     * Run the indexer
>>> >>     */
>>> >>    public void index()
>>> >>    {
>>> >>     //now index
>>> >>
>>> >>       Transaction tx = _textSession.beginTransaction();
>>> >>       List<Prediction> predictions = _textSession.createQuery("from
>>> >> Prediction as prediction").list();
>>> >>       for(Prediction pred: predictions)
>>> >>       {
>>> >>          _textSession.index(pred);
>>> >>       }
>>> >>       tx.commit(); //index are written at commit time
>>> >>       _beenIndexed=true;
>>> >>    }
>>> >>
>>> >>    public List<Prediction> searchPredictions(String queryStr)
>>> >>    {
>>> >>       // look in text column of predictions
>>> >>       try
>>> >>       {
>>> >>          if (queryStr != null && !queryStr.equals(""))
>>> >>          {
>>> >>             // need to add the field name to the querystring
>>> >>             queryStr = TEXT_FIELD + ":" + queryStr;
>>> >>             org.apache.lucene.search.Query luceneQuery =
>>> >> _parser.parse(queryStr);
>>> >>             Query query =
>>> _textSession.createFullTextQuery(luceneQuery,
>>> >>                   Prediction.class);
>>> >>             List<Prediction> ret = query.list();
>>> >>           //default fits the KEYWORDS similarity
>>> >>             if (ret != null)
>>> >>             {
>>> >>                switch(_defaultSimilarity)
>>> >>                {
>>> >>
>>> >>                   case KEYWORDS:
>>> >>                   case HIGH:
>>> >>                   case EXPAND:
>>> >>                   case EXACT:
>>> >>
>>> >>                      return ret;
>>> >>
>>> >>                }
>>> >>
>>> >>             }
>>> >>          }
>>> >>       }
>>> >>       catch (Exception pe)
>>> >>       {// KKG TODO: Turn this into a better exception
>>> >>          pe.printStackTrace();
>>> >>       }
>>> >>       return new ArrayList<Prediction>();
>>> >>    }
>>> >> }
>>> >>
>>> >>
>>> >>
>>> >> --
>>> >> View this message in context:
>>> >>
>>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12827864
>>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>> >>
>>> >>
>>> >> ---------------------------------------------------------------------
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12831941
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Help-with-Snowball-Analyzer-tf4497960.html#a12863633
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 21:24:41 2007
Return-Path: <java-user-return-30397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90585 invoked from network); 24 Sep 2007 21:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 21:24:41 -0000
Received: (qmail 24124 invoked by uid 500); 24 Sep 2007 21:24:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23782 invoked by uid 500); 24 Sep 2007 21:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23763 invoked by uid 99); 24 Sep 2007 21:24:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 14:24:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 21:24:26 +0000
Received: by wr-out-0506.google.com with SMTP id c55so549664wra
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 14:24:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Xbndut4khQmAGhF/XIG1tx6ioAenAxj+OGXy4W77E2g=;
        b=DzVbH4HkszgYrmq3tMFKwLJk+zAy8zrNzjjiDAl1v7LmMFJC0u/31SWH9TvdnL1Wy3OWU4tmfobO4WnYiKpYjFKjqqRa8vSbWW9Cfud/ogO37QqGCMF2kG/9nu2Mh1d1dcqo5oVjZfylbCDTN6Qp1chfFcQW8t6YTckLRw4XkeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=URxmI0ctsOZ3aJnWy0l5gLG1Z07aLEzY2tuvAkDlyJphutYc2gJpHl7dWxRmw1f9364RW58ODC1PzdFOGUChGbtTM1OnlZFIgk4t4B+oyiNZy3EeufFDChJfI6vnY12Kkp56eyAA8BtW7JT7d4Ag2wMOeYagYwaW0YcfwdlPLog=
Received: by 10.142.246.8 with SMTP id t8mr521761wfh.1190669044665;
        Mon, 24 Sep 2007 14:24:04 -0700 (PDT)
Received: by 10.140.143.6 with HTTP; Mon, 24 Sep 2007 14:24:04 -0700 (PDT)
Message-ID: <bf1404350709241424g241091c1je638cae8a8f2096c@mail.gmail.com>
Date: Mon, 24 Sep 2007 17:24:04 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: How to change the similarity function of lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18809_560269.1190669044657"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18809_560269.1190669044657
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi every body:

   I would like to know how to change the similarity function of lucene to
extends the posibilities of searching and make it more powefull. Have
somebody made this before ?
Could you help me please ? I don't know how complex might be this.

I hope you can help me.
Greetings
Ariel

------=_Part_18809_560269.1190669044657--

From java-user-return-30398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 22:15:07 2007
Return-Path: <java-user-return-30398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8985 invoked from network); 24 Sep 2007 22:15:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 22:15:06 -0000
Received: (qmail 2576 invoked by uid 500); 24 Sep 2007 22:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2546 invoked by uid 500); 24 Sep 2007 22:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2535 invoked by uid 99); 24 Sep 2007 22:14:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 15:14:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 22:14:48 +0000
Received: by nz-out-0506.google.com with SMTP id i28so918059nzi
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 15:14:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=GMMbjLOR6Pf/vJG73nd8PQM3Q7SgFxk2/A+0itIH+QM=;
        b=JVtOnIV4KO8OCXT5whj357ZVZP4jN7yRFLfBsWb3dCH6gjDDpetdO5/msDpgeZluRmqqukpw2/BK887gSTxY/D6BvWVEpLaj7HZbpRkEt6RB52Urw4LAIG1qVjVrdMVWA3e5o59V/bXryhfTEGzTp9K3+JSNHh3VF30SQShGXgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BDxKdRNF0fFS8og2a79atLusYFBssr0cQAn44YAgK9bVdxn3fsCorqiNjegXoKyd5Nb+UEmZBTbL/6AcFVzLn3ZLjCUKeMrSPrSN9wUVCXWUb/nlho7FB4ZNJnm68i8D52Utis6l+Fq8GxTOyAOhaPjJvKIITKT3O5LNpQN6XsU=
Received: by 10.65.234.2 with SMTP id l2mr7891658qbr.1190672067603;
        Mon, 24 Sep 2007 15:14:27 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id z21sm2472022qbc.2007.09.24.15.14.25
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Sep 2007 15:14:26 -0700 (PDT)
Message-ID: <46F8366F.1090806@gmail.com>
Date: Mon, 24 Sep 2007 18:13:03 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com>
In-Reply-To: <46F7E9F9.3010103@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have sat down and rewrote IndexAccessor from scratch. I copied in the 
same reference counting logic, pruned some things, and tried to make the 
whole package a bit simpler to use. I have a few things to do, but its 
pretty solid already. The only major thing I'd still like to do is add 
an option to warm searchers before putting them in the Searcher cache. 
Id like to writer some more tests as well. Any help greatly appreciated 
if your interested in using the thing.


http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java

Here is a an example of a class that can be instantiated in one of 
multiple threads and read /modify a single index without worrying about 
what any
of the other threads are doing to the index at any given time. This is a 
very simple example of how to use the IndexAccessor and not necessarily an
example of best practices. The main idea is that you get your Writer, 
Searcher, or Reader, and then be sure to release it as soon as your done 
with it
in a finally block. For loading, you will want to load many docs with a 
Writer (batch them) before releasing it, but remember that Readers will 
not get a new view
of the index until you release all of the Writers. So beware hogging a 
Writer unless you thats what your intending.

JavaDoc:
http://myhardshadow.com/indexaccessorapi/

Code:
http://myhardshadow.com/indexaccessor/trunk/

Jar:
http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar


Your synchronized block concerns:

The synchronized blocks that control accesss to the IndexAccessor do not 
have a huge impact on performance. Keep in mind that all of the work is 
not done in a synchonrized block, just the retrieval of the Searcher, 
Writer, Reader. Even if the synchronization makes the method twice as 
expensive, it is still overpowered by the cost of parsing queries and 
searching the index. This applies with or without contention. I wrote a 
simple test and included the output below. You might use the IBM Lock 
Analyzer for Java to further analyze these costs. Trust me, this thing 
is speedy. Its many times better than using IndexModifier.

Without Contention
Just retrieve and release Searcher 100000 times
----
avg time:6.3E-4 ms
total time:63 ms

Parse query and search on 1 doc 100000 times
----
avg time:0.03107 ms
total time:3107 ms


With Contention (40 other threads running 80000 searches)
Just retrieve and release Searcher 100000 times
----
avg time:0.04643 ms
total time:4643 ms

Parse query and search on 1 doc 100000 times
----
avg time:0.64337 ms
total time:64337 ms


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 22:48:09 2007
Return-Path: <java-user-return-30399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22535 invoked from network); 24 Sep 2007 22:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 22:48:09 -0000
Received: (qmail 46341 invoked by uid 500); 24 Sep 2007 22:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46314 invoked by uid 500); 24 Sep 2007 22:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46303 invoked by uid 99); 24 Sep 2007 22:47:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 15:47:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 22:50:03 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8OMlT001293
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 15:47:29 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092415472802766
 for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 15:47:28 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IZwi8-0004zk-00
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 15:47:28 -0700
Message-ID: <46F83E84.2000102@ai.sri.com>
Date: Mon, 24 Sep 2007 15:47:32 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com>
In-Reply-To: <46F8366F.1090806@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

Great effort getting the original lucene index accessor package in this 
shape. I am sure this will benefit a lot of people using Lucene in a 
multithread env.
I have a quick question to ask you:
Do you have to use the core Lucene 2.3-dev in order to use the accessor?

I will take a look at your codes to see if I could help. I used a 
slightly modified version of the original package in my project but it 
breaks some of my tests. I hope your version works better.

Thanks a lot!

Jay


Mark Miller wrote:
> I have sat down and rewrote IndexAccessor from scratch. I copied in the 
> same reference counting logic, pruned some things, and tried to make the 
> whole package a bit simpler to use. I have a few things to do, but its 
> pretty solid already. The only major thing I'd still like to do is add 
> an option to warm searchers before putting them in the Searcher cache. 
> Id like to writer some more tests as well. Any help greatly appreciated 
> if your interested in using the thing.
> 
> 
> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
> 
> 
> Here is a an example of a class that can be instantiated in one of 
> multiple threads and read /modify a single index without worrying about 
> what any
> of the other threads are doing to the index at any given time. This is a 
> very simple example of how to use the IndexAccessor and not necessarily an
> example of best practices. The main idea is that you get your Writer, 
> Searcher, or Reader, and then be sure to release it as soon as your done 
> with it
> in a finally block. For loading, you will want to load many docs with a 
> Writer (batch them) before releasing it, but remember that Readers will 
> not get a new view
> of the index until you release all of the Writers. So beware hogging a 
> Writer unless you thats what your intending.
> 
> JavaDoc:
> http://myhardshadow.com/indexaccessorapi/
> 
> Code:
> http://myhardshadow.com/indexaccessor/trunk/
> 
> Jar:
> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
> 
> 
> Your synchronized block concerns:
> 
> The synchronized blocks that control accesss to the IndexAccessor do not 
> have a huge impact on performance. Keep in mind that all of the work is 
> not done in a synchonrized block, just the retrieval of the Searcher, 
> Writer, Reader. Even if the synchronization makes the method twice as 
> expensive, it is still overpowered by the cost of parsing queries and 
> searching the index. This applies with or without contention. I wrote a 
> simple test and included the output below. You might use the IBM Lock 
> Analyzer for Java to further analyze these costs. Trust me, this thing 
> is speedy. Its many times better than using IndexModifier.
> 
> Without Contention
> Just retrieve and release Searcher 100000 times
> ----
> avg time:6.3E-4 ms
> total time:63 ms
> 
> Parse query and search on 1 doc 100000 times
> ----
> avg time:0.03107 ms
> total time:3107 ms
> 
> 
> With Contention (40 other threads running 80000 searches)
> Just retrieve and release Searcher 100000 times
> ----
> avg time:0.04643 ms
> total time:4643 ms
> 
> Parse query and search on 1 doc 100000 times
> ----
> avg time:0.64337 ms
> total time:64337 ms
> 
> 
> - Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 22:54:39 2007
Return-Path: <java-user-return-30400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25053 invoked from network); 24 Sep 2007 22:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 22:54:38 -0000
Received: (qmail 61267 invoked by uid 500); 24 Sep 2007 22:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60650 invoked by uid 500); 24 Sep 2007 22:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60632 invoked by uid 99); 24 Sep 2007 22:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 15:54:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 22:54:21 +0000
Received: by nz-out-0506.google.com with SMTP id i28so925070nzi
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 15:54:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ErrLyASx2zGrUafvtsX7ZxlFFKtJZprVR58lXT2nBc8=;
        b=RnyNdXAS8c8lNAnMlJIrRC3pirjrzLZkVYjZH50YVLSNntf3SBlR1klyfujF/mLSopxAGXjU/AvBAkaLH4na9poeC9bv3ldegpm8pBGQFe7tge400Q0tHv4RNZjvtRo67K3/aVx1Aa3qeBqU60O2JHnWUXIU+A+2EJs0FHlukpc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=iu48igem5hstD48H7DXF5nBVJJytv0bxyUBoHVpaWFhmgqFIE+Oz+VUwjYexJ31mDhfHDLxyT6PjfoHDa8bPcGNtBCjSGHX4FLOdXvkqFY2dVbpl+pwZ4LAeaGI7GAvN5UB3x1bXSNsAkshZTxgG8Mf48x6TvTWOqJxE8ptGJ6c=
Received: by 10.65.250.11 with SMTP id c11mr2211967qbs.1190674439834;
        Mon, 24 Sep 2007 15:53:59 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q13sm2472394qbq.2007.09.24.15.53.57
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Sep 2007 15:53:58 -0700 (PDT)
Message-ID: <46F83FB3.4050006@gmail.com>
Date: Mon, 24 Sep 2007 18:52:35 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com>
In-Reply-To: <46F83E84.2000102@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

2.3-dev is not required. I'd have to look and see what is...I'd guess 
around 2.1. I did program for java 1.5 though, but converting to 1.4 
should be minimal work.

Jay Yu wrote:
> Mark,
>
> Great effort getting the original lucene index accessor package in 
> this shape. I am sure this will benefit a lot of people using Lucene 
> in a multithread env.
> I have a quick question to ask you:
> Do you have to use the core Lucene 2.3-dev in order to use the accessor?
>
> I will take a look at your codes to see if I could help. I used a 
> slightly modified version of the original package in my project but it 
> breaks some of my tests. I hope your version works better.
>
> Thanks a lot!
>
> Jay
>
>
> Mark Miller wrote:
>> I have sat down and rewrote IndexAccessor from scratch. I copied in 
>> the same reference counting logic, pruned some things, and tried to 
>> make the whole package a bit simpler to use. I have a few things to 
>> do, but its pretty solid already. The only major thing I'd still like 
>> to do is add an option to warm searchers before putting them in the 
>> Searcher cache. Id like to writer some more tests as well. Any help 
>> greatly appreciated if your interested in using the thing.
>>
>>
>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>
>>
>> Here is a an example of a class that can be instantiated in one of 
>> multiple threads and read /modify a single index without worrying 
>> about what any
>> of the other threads are doing to the index at any given time. This 
>> is a very simple example of how to use the IndexAccessor and not 
>> necessarily an
>> example of best practices. The main idea is that you get your Writer, 
>> Searcher, or Reader, and then be sure to release it as soon as your 
>> done with it
>> in a finally block. For loading, you will want to load many docs with 
>> a Writer (batch them) before releasing it, but remember that Readers 
>> will not get a new view
>> of the index until you release all of the Writers. So beware hogging 
>> a Writer unless you thats what your intending.
>>
>> JavaDoc:
>> http://myhardshadow.com/indexaccessorapi/
>>
>> Code:
>> http://myhardshadow.com/indexaccessor/trunk/
>>
>> Jar:
>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>
>>
>> Your synchronized block concerns:
>>
>> The synchronized blocks that control accesss to the IndexAccessor do 
>> not have a huge impact on performance. Keep in mind that all of the 
>> work is not done in a synchonrized block, just the retrieval of the 
>> Searcher, Writer, Reader. Even if the synchronization makes the 
>> method twice as expensive, it is still overpowered by the cost of 
>> parsing queries and searching the index. This applies with or without 
>> contention. I wrote a simple test and included the output below. You 
>> might use the IBM Lock Analyzer for Java to further analyze these 
>> costs. Trust me, this thing is speedy. Its many times better than 
>> using IndexModifier.
>>
>> Without Contention
>> Just retrieve and release Searcher 100000 times
>> ----
>> avg time:6.3E-4 ms
>> total time:63 ms
>>
>> Parse query and search on 1 doc 100000 times
>> ----
>> avg time:0.03107 ms
>> total time:3107 ms
>>
>>
>> With Contention (40 other threads running 80000 searches)
>> Just retrieve and release Searcher 100000 times
>> ----
>> avg time:0.04643 ms
>> total time:4643 ms
>>
>> Parse query and search on 1 doc 100000 times
>> ----
>> avg time:0.64337 ms
>> total time:64337 ms
>>
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 23:02:53 2007
Return-Path: <java-user-return-30401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29055 invoked from network); 24 Sep 2007 23:02:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 23:02:52 -0000
Received: (qmail 72453 invoked by uid 500); 24 Sep 2007 23:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72427 invoked by uid 500); 24 Sep 2007 23:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72416 invoked by uid 99); 24 Sep 2007 23:02:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:02:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 23:02:34 +0000
Received: by nz-out-0506.google.com with SMTP id i28so926469nzi
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 16:02:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=wvc+vougO8XxVbrZLNnDEUMAJiEzs1tg3s5xDRRC4mM=;
        b=VQ/DfnMGqfXxJDY5GKexWFRNEFP97eSz0YBsOzzw48KHRd+uCZaXvG82G9Wajn4NzcXaMnhfdXy072+y27vKSQw6SWtmuRfpFuSdP44DZJwQJQxLvATGZqba91LTPTFY3L/+xijjFZYHZ3GsCMtcLBf37aTuOWM9cqv81C8tx5c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ipZ7hQmwitdBp9swx5tJksFtSlDa1eryiBAx34z3SH2aCI4C5pDomOWNowcz4CN3QKZbWJc/dkxtl9sMcdPPuDl+QeuxLlG1yIIKJUlBpR9Ze744uM624S6CDC5iL05Krb+GSyBJGPHsceN6gnKNxnXRqjk8VigCyXZlb1SvNNk=
Received: by 10.65.214.19 with SMTP id r19mr5956376qbq.1190674930587;
        Mon, 24 Sep 2007 16:02:10 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e11sm2494345qbc.2007.09.24.16.02.08
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Sep 2007 16:02:09 -0700 (PDT)
Message-ID: <46F8419E.7080501@gmail.com>
Date: Mon, 24 Sep 2007 19:00:46 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com>
In-Reply-To: <46F83E84.2000102@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

One final note....if you are using the IndexAccessor and you are only 
accessing the index from one JVM, you can use the NoLockFactory and save 
some sync cost there.

Jay Yu wrote:
> Mark,
>
> Great effort getting the original lucene index accessor package in 
> this shape. I am sure this will benefit a lot of people using Lucene 
> in a multithread env.
> I have a quick question to ask you:
> Do you have to use the core Lucene 2.3-dev in order to use the accessor?
>
> I will take a look at your codes to see if I could help. I used a 
> slightly modified version of the original package in my project but it 
> breaks some of my tests. I hope your version works better.
>
> Thanks a lot!
>
> Jay
>
>
> Mark Miller wrote:
>> I have sat down and rewrote IndexAccessor from scratch. I copied in 
>> the same reference counting logic, pruned some things, and tried to 
>> make the whole package a bit simpler to use. I have a few things to 
>> do, but its pretty solid already. The only major thing I'd still like 
>> to do is add an option to warm searchers before putting them in the 
>> Searcher cache. Id like to writer some more tests as well. Any help 
>> greatly appreciated if your interested in using the thing.
>>
>>
>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>
>>
>> Here is a an example of a class that can be instantiated in one of 
>> multiple threads and read /modify a single index without worrying 
>> about what any
>> of the other threads are doing to the index at any given time. This 
>> is a very simple example of how to use the IndexAccessor and not 
>> necessarily an
>> example of best practices. The main idea is that you get your Writer, 
>> Searcher, or Reader, and then be sure to release it as soon as your 
>> done with it
>> in a finally block. For loading, you will want to load many docs with 
>> a Writer (batch them) before releasing it, but remember that Readers 
>> will not get a new view
>> of the index until you release all of the Writers. So beware hogging 
>> a Writer unless you thats what your intending.
>>
>> JavaDoc:
>> http://myhardshadow.com/indexaccessorapi/
>>
>> Code:
>> http://myhardshadow.com/indexaccessor/trunk/
>>
>> Jar:
>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>
>>
>> Your synchronized block concerns:
>>
>> The synchronized blocks that control accesss to the IndexAccessor do 
>> not have a huge impact on performance. Keep in mind that all of the 
>> work is not done in a synchonrized block, just the retrieval of the 
>> Searcher, Writer, Reader. Even if the synchronization makes the 
>> method twice as expensive, it is still overpowered by the cost of 
>> parsing queries and searching the index. This applies with or without 
>> contention. I wrote a simple test and included the output below. You 
>> might use the IBM Lock Analyzer for Java to further analyze these 
>> costs. Trust me, this thing is speedy. Its many times better than 
>> using IndexModifier.
>>
>> Without Contention
>> Just retrieve and release Searcher 100000 times
>> ----
>> avg time:6.3E-4 ms
>> total time:63 ms
>>
>> Parse query and search on 1 doc 100000 times
>> ----
>> avg time:0.03107 ms
>> total time:3107 ms
>>
>>
>> With Contention (40 other threads running 80000 searches)
>> Just retrieve and release Searcher 100000 times
>> ----
>> avg time:0.04643 ms
>> total time:4643 ms
>>
>> Parse query and search on 1 doc 100000 times
>> ----
>> avg time:0.64337 ms
>> total time:64337 ms
>>
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 23:10:36 2007
Return-Path: <java-user-return-30402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31575 invoked from network); 24 Sep 2007 23:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 23:10:36 -0000
Received: (qmail 78081 invoked by uid 500); 24 Sep 2007 23:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78050 invoked by uid 500); 24 Sep 2007 23:10:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78039 invoked by uid 99); 24 Sep 2007 23:10:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:10:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 23:10:19 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8ON9v004363
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 16:09:57 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092416095603594
 for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 16:09:56 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IZx3s-0005I5-00
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 16:09:56 -0700
Message-ID: <46F843C8.30604@ai.sri.com>
Date: Mon, 24 Sep 2007 16:10:00 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com>
In-Reply-To: <46F8419E.7080501@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the tip.
One small improvement on the IndexAccessorFactory might be to allow user 
to specify the Analyzer instead of using a default KeywordAnalyzer, 
which of course will make your static init of the cached accessors 
difficult unless you add more interfaces to the accessor to allow reset 
analyzer/Dir as in my own version.




Jay

Mark Miller wrote:
> One final note....if you are using the IndexAccessor and you are only 
> accessing the index from one JVM, you can use the NoLockFactory and save 
> some sync cost there.
> 
> Jay Yu wrote:
>> Mark,
>>
>> Great effort getting the original lucene index accessor package in 
>> this shape. I am sure this will benefit a lot of people using Lucene 
>> in a multithread env.
>> I have a quick question to ask you:
>> Do you have to use the core Lucene 2.3-dev in order to use the accessor?
>>
>> I will take a look at your codes to see if I could help. I used a 
>> slightly modified version of the original package in my project but it 
>> breaks some of my tests. I hope your version works better.
>>
>> Thanks a lot!
>>
>> Jay
>>
>>
>> Mark Miller wrote:
>>> I have sat down and rewrote IndexAccessor from scratch. I copied in 
>>> the same reference counting logic, pruned some things, and tried to 
>>> make the whole package a bit simpler to use. I have a few things to 
>>> do, but its pretty solid already. The only major thing I'd still like 
>>> to do is add an option to warm searchers before putting them in the 
>>> Searcher cache. Id like to writer some more tests as well. Any help 
>>> greatly appreciated if your interested in using the thing.
>>>
>>>
>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>
>>>
>>> Here is a an example of a class that can be instantiated in one of 
>>> multiple threads and read /modify a single index without worrying 
>>> about what any
>>> of the other threads are doing to the index at any given time. This 
>>> is a very simple example of how to use the IndexAccessor and not 
>>> necessarily an
>>> example of best practices. The main idea is that you get your Writer, 
>>> Searcher, or Reader, and then be sure to release it as soon as your 
>>> done with it
>>> in a finally block. For loading, you will want to load many docs with 
>>> a Writer (batch them) before releasing it, but remember that Readers 
>>> will not get a new view
>>> of the index until you release all of the Writers. So beware hogging 
>>> a Writer unless you thats what your intending.
>>>
>>> JavaDoc:
>>> http://myhardshadow.com/indexaccessorapi/
>>>
>>> Code:
>>> http://myhardshadow.com/indexaccessor/trunk/
>>>
>>> Jar:
>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>
>>>
>>> Your synchronized block concerns:
>>>
>>> The synchronized blocks that control accesss to the IndexAccessor do 
>>> not have a huge impact on performance. Keep in mind that all of the 
>>> work is not done in a synchonrized block, just the retrieval of the 
>>> Searcher, Writer, Reader. Even if the synchronization makes the 
>>> method twice as expensive, it is still overpowered by the cost of 
>>> parsing queries and searching the index. This applies with or without 
>>> contention. I wrote a simple test and included the output below. You 
>>> might use the IBM Lock Analyzer for Java to further analyze these 
>>> costs. Trust me, this thing is speedy. Its many times better than 
>>> using IndexModifier.
>>>
>>> Without Contention
>>> Just retrieve and release Searcher 100000 times
>>> ----
>>> avg time:6.3E-4 ms
>>> total time:63 ms
>>>
>>> Parse query and search on 1 doc 100000 times
>>> ----
>>> avg time:0.03107 ms
>>> total time:3107 ms
>>>
>>>
>>> With Contention (40 other threads running 80000 searches)
>>> Just retrieve and release Searcher 100000 times
>>> ----
>>> avg time:0.04643 ms
>>> total time:4643 ms
>>>
>>> Parse query and search on 1 doc 100000 times
>>> ----
>>> avg time:0.64337 ms
>>> total time:64337 ms
>>>
>>>
>>> - Mark
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Sep 24 23:16:57 2007
Return-Path: <java-user-return-30403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34165 invoked from network); 24 Sep 2007 23:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Sep 2007 23:16:56 -0000
Received: (qmail 82712 invoked by uid 500); 24 Sep 2007 23:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82674 invoked by uid 500); 24 Sep 2007 23:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82663 invoked by uid 99); 24 Sep 2007 23:16:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 16:16:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 23:16:40 +0000
Received: by py-out-1112.google.com with SMTP id d32so5922257pye
        for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 16:16:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=vQENq4GWWDMCDTfayiUtGDsO1lOgXuCcK6nNZov12ko=;
        b=UurXxoZEUaVoqf+Jjhi83qHKX0a38Zbrqtd4VnmMlAqksfT+qa+TbN85NIlsKvmfhpgqgjw6Urrm21o5NQSfEj8Cpucha7Ogo6qYvQ6hG8tpOY82KDHRTo8mNy27TEzPZNx5S2VW73sktGEyU8+AjWJV6Ri6AP8/GMmiTmaWI9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JbEfOFEGjYd9EH2ecpITPShEFX4TI3BiOAk+g3MA4V6na1zBpPkKcWGZYfU0Gt4P/Km3AS1ywcNnGVJOp2LESZD9yKu29iiOQsR0zIVNewot6hXxqhWR/JVl6u8CJgcVeEJ8vfTpWEJLH9eXx2ARorWxGrza8YD6nxnAuzqWgCU=
Received: by 10.65.250.11 with SMTP id c11mr2252416qbs.1190675776798;
        Mon, 24 Sep 2007 16:16:16 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e16sm2502175qba.2007.09.24.16.16.15
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Sep 2007 16:16:15 -0700 (PDT)
Message-ID: <46F844EC.9060904@gmail.com>
Date: Mon, 24 Sep 2007 19:14:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com> <46F843C8.30604@ai.sri.com>
In-Reply-To: <46F843C8.30604@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, thanks for catching that. One of the pieces I did not finish...the 
keyword analyzer was placeholder code.

I will take your comments into account and update the code.

I have some other pieces to polish as well. Previously, I extended and 
built upon the original code, but I can't give it away, so this is my 
attempt at something lessor, but cleaner.

Jay Yu wrote:
> Thanks for the tip.
> One small improvement on the IndexAccessorFactory might be to allow 
> user to specify the Analyzer instead of using a default 
> KeywordAnalyzer, which of course will make your static init of the 
> cached accessors difficult unless you add more interfaces to the 
> accessor to allow reset analyzer/Dir as in my own version.
>
>
>
>
> Jay
>
> Mark Miller wrote:
>> One final note....if you are using the IndexAccessor and you are only 
>> accessing the index from one JVM, you can use the NoLockFactory and 
>> save some sync cost there.
>>
>> Jay Yu wrote:
>>> Mark,
>>>
>>> Great effort getting the original lucene index accessor package in 
>>> this shape. I am sure this will benefit a lot of people using Lucene 
>>> in a multithread env.
>>> I have a quick question to ask you:
>>> Do you have to use the core Lucene 2.3-dev in order to use the 
>>> accessor?
>>>
>>> I will take a look at your codes to see if I could help. I used a 
>>> slightly modified version of the original package in my project but 
>>> it breaks some of my tests. I hope your version works better.
>>>
>>> Thanks a lot!
>>>
>>> Jay
>>>
>>>
>>> Mark Miller wrote:
>>>> I have sat down and rewrote IndexAccessor from scratch. I copied in 
>>>> the same reference counting logic, pruned some things, and tried to 
>>>> make the whole package a bit simpler to use. I have a few things to 
>>>> do, but its pretty solid already. The only major thing I'd still 
>>>> like to do is add an option to warm searchers before putting them 
>>>> in the Searcher cache. Id like to writer some more tests as well. 
>>>> Any help greatly appreciated if your interested in using the thing.
>>>>
>>>>
>>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>>
>>>>
>>>> Here is a an example of a class that can be instantiated in one of 
>>>> multiple threads and read /modify a single index without worrying 
>>>> about what any
>>>> of the other threads are doing to the index at any given time. This 
>>>> is a very simple example of how to use the IndexAccessor and not 
>>>> necessarily an
>>>> example of best practices. The main idea is that you get your 
>>>> Writer, Searcher, or Reader, and then be sure to release it as soon 
>>>> as your done with it
>>>> in a finally block. For loading, you will want to load many docs 
>>>> with a Writer (batch them) before releasing it, but remember that 
>>>> Readers will not get a new view
>>>> of the index until you release all of the Writers. So beware 
>>>> hogging a Writer unless you thats what your intending.
>>>>
>>>> JavaDoc:
>>>> http://myhardshadow.com/indexaccessorapi/
>>>>
>>>> Code:
>>>> http://myhardshadow.com/indexaccessor/trunk/
>>>>
>>>> Jar:
>>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>>
>>>>
>>>> Your synchronized block concerns:
>>>>
>>>> The synchronized blocks that control accesss to the IndexAccessor 
>>>> do not have a huge impact on performance. Keep in mind that all of 
>>>> the work is not done in a synchonrized block, just the retrieval of 
>>>> the Searcher, Writer, Reader. Even if the synchronization makes the 
>>>> method twice as expensive, it is still overpowered by the cost of 
>>>> parsing queries and searching the index. This applies with or 
>>>> without contention. I wrote a simple test and included the output 
>>>> below. You might use the IBM Lock Analyzer for Java to further 
>>>> analyze these costs. Trust me, this thing is speedy. Its many times 
>>>> better than using IndexModifier.
>>>>
>>>> Without Contention
>>>> Just retrieve and release Searcher 100000 times
>>>> ----
>>>> avg time:6.3E-4 ms
>>>> total time:63 ms
>>>>
>>>> Parse query and search on 1 doc 100000 times
>>>> ----
>>>> avg time:0.03107 ms
>>>> total time:3107 ms
>>>>
>>>>
>>>> With Contention (40 other threads running 80000 searches)
>>>> Just retrieve and release Searcher 100000 times
>>>> ----
>>>> avg time:0.04643 ms
>>>> total time:4643 ms
>>>>
>>>> Parse query and search on 1 doc 100000 times
>>>> ----
>>>> avg time:0.64337 ms
>>>> total time:64337 ms
>>>>
>>>>
>>>> - Mark
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 00:15:54 2007
Return-Path: <java-user-return-30404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57688 invoked from network); 25 Sep 2007 00:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 00:15:53 -0000
Received: (qmail 16587 invoked by uid 500); 25 Sep 2007 00:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16551 invoked by uid 500); 25 Sep 2007 00:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16540 invoked by uid 99); 25 Sep 2007 00:15:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 17:15:38 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a15.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 00:15:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.g.dreamhost.com (Postfix) with ESMTP id 2AA247F057
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 17:15:15 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <bf1404350709241424g241091c1je638cae8a8f2096c@mail.gmail.com>
References: <bf1404350709241424g241091c1je638cae8a8f2096c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <99474E09-D334-4D4C-AE3E-B9C01E3FAC31@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to change the similarity function of lucene
Date: Mon, 24 Sep 2007 20:15:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps you can explain in what way you want to make it more  
powerful?  There are possibilities to do:
1. Change the Similarity class (a call back mechanism)
2. Implement or extend Queries, Scorers, etc.
3. Others???

See http://lucene.apache.org/java/docs/scoring.html for some insights.

In other words, it can be as complex as you want it to be...

-Grant

On Sep 24, 2007, at 5:24 PM, Ariel wrote:

> Hi every body:
>
>    I would like to know how to change the similarity function of  
> lucene to
> extends the posibilities of searching and make it more powefull. Have
> somebody made this before ?
> Could you help me please ? I don't know how complex might be this.
>
> I hope you can help me.
> Greetings
> Ariel

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 01:05:51 2007
Return-Path: <java-user-return-30405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73662 invoked from network); 25 Sep 2007 01:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 01:05:49 -0000
Received: (qmail 62488 invoked by uid 500); 25 Sep 2007 01:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62461 invoked by uid 500); 25 Sep 2007 01:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62450 invoked by uid 99); 25 Sep 2007 01:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 18:05:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 01:05:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IZyrP-0002OO-M4
	for java-user@lucene.apache.org; Mon, 24 Sep 2007 18:05:11 -0700
Message-ID: <12871390.post@talk.nabble.com>
Date: Mon, 24 Sep 2007 18:05:11 -0700 (PDT)
From: Martin Bayly <Martin.Bayly@taglocity.com>
To: java-user@lucene.apache.org
Subject: Translating Lucene Query Syntax to Traditional Boolean Syntax
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Martin.Bayly@taglocity.com
X-Virus-Checked: Checked by ClamAV on apache.org


We have an application that performs searches against a Lucene based index
and also against a Windows Desktop Search based index.

For simple queries we'd like to offer our users a consistent interface that
allows them to build basic Lucene style queries using the 'MUST HAVE' (+),
'MUST NOT HAVE' (-) and 'SHOULD HAVE' style of operators as this is probably
more intuitive for non 'Boolean Logic' literate users.  We would not allow
them to use any grouping (parenthesis).

Clearly we can pass this directly to Lucene, but for the Windows Desktop
Search we need to translate the Lucene style query into a more traditional
Boolean query.  So this is the opposite of the much discussed Boolean Query
to Lucene Query conversion.

I'm wondering if anyone has ever done this or whether there is a concept
mismatch in there somewhere that will make it difficult to do?

My thought was that you could take the standard Lucene operators and simply
group them together as follows:

e.g. (assuming the Lucene default OR operator)

Lucene: +a +b -c -d e f

would translate to:

(a AND b NOT c NOT d) OR (a AND b NOT c NOT d AND (e OR f))

If I put this back into Lucene (actually Lucene.NET but hopefully its the
same) I get back:

(+a +b -c -d)(+a +b -c -d +(e f))

which I think is equivalent but not as concise!  But I have not tested this
against a big index to see if it's equivalent and I have a suspicion that
Lucene might score the two versions of the Lucene representation
differently.  But that's probably not an issue provided the Boolean
representation is semantically equivalent to the first Lucene
representation.

Anyone ever tried this before or have any comments on whether my 'logic' is
flawed!

Thanks
Martin
-- 
View this message in context: http://www.nabble.com/Translating-Lucene-Query-Syntax-to-Traditional-Boolean-Syntax-tf4512730.html#a12871390
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 04:57:52 2007
Return-Path: <java-user-return-30406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34787 invoked from network); 25 Sep 2007 04:57:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 04:57:51 -0000
Received: (qmail 27787 invoked by uid 500); 25 Sep 2007 04:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27748 invoked by uid 500); 25 Sep 2007 04:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27737 invoked by uid 99); 25 Sep 2007 04:57:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Sep 2007 21:57:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 04:57:35 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id ECEC371C1AD; Mon, 24 Sep 2007 21:57:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id EB38371C0C5
	for <java-user@lucene.apache.org>; Mon, 24 Sep 2007 21:57:14 -0700 (PDT)
Date: Mon, 24 Sep 2007 21:57:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Translating Lucene Query Syntax to Traditional Boolean Syntax
In-Reply-To: <12871390.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0709242146500.2799@radix.cryptio.net>
References: <12871390.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Search we need to translate the Lucene style query into a more traditional
: Boolean query.  So this is the opposite of the much discussed Boolean Query
: to Lucene Query conversion.

it should be possible to translate, but like many translations there will 
be a small loss of information, specificly: strict boolean queries have no 
notion of score, so hte concept of an "optional" clause has no meaning ... 
either it's there and you get a match, or it's not and you don't.

You can translate to a query with an equivilent result set, but not one 
with equivilent semantic meaning, because the semantics don't apply 
(which also means you cannot have a reflexive translation except in 
trivial cases)

: Lucene: +a +b -c -d e f
	...
: (a AND b NOT c NOT d) OR (a AND b NOT c NOT d AND (e OR f))
	... 
: (+a +b -c -d)(+a +b -c -d +(e f))
: 
: which I think is equivalent but not as concise!  But I have not tested this

the first and third are not equivilent .. mainly because they will in fact 
score differently.  but that's not what you really care about -- what you 
realy care about is have you translated the first to the second correctly?  
i believe hte answer is "yes" with the caveat that it can be reduced to 
just the first clause of hte outermost OR query...
   (a AND b NOT c NOT d)
...anything mathcing the second clause of the outermost OR will match 
this, making the second clause redundent.  you could likewise translate 
the lucene query to....
   (a AND b NOT c NOT d) OR (a AND b NOT c NOT d AND a AND a AND a AND a)
...the point is they reduce to the same thing.

as a general rule when converting lucene queries to strict boolean 
queries: any optional clauses in a BQ containing at least one required 
clause can be eliminated, the are irrlevent from a strict matching 
standpoint -- they only influence score.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 07:24:07 2007
Return-Path: <java-user-return-30407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95726 invoked from network); 25 Sep 2007 07:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 07:24:07 -0000
Received: (qmail 92318 invoked by uid 500); 25 Sep 2007 07:23:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92291 invoked by uid 500); 25 Sep 2007 07:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92272 invoked by uid 99); 25 Sep 2007 07:23:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 00:23:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 07:25:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ia4lM-0001aY-Su
	for java-user@lucene.apache.org; Tue, 25 Sep 2007 00:23:20 -0700
Message-ID: <12874380.post@talk.nabble.com>
Date: Tue, 25 Sep 2007 00:23:20 -0700 (PDT)
From: mnr <naveen1051@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Exact Word from Index
In-Reply-To: <efb141ed0709111556v1f059fcel6cefc745a68cf5ae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: naveen1051@gmail.com
References: <1324e4e20709100529h4956dccai280121063c409df2@mail.gmail.com> <46E54256.9050807@garambrogne.net> <967684dc0709110510q3815b0e7pe74b81471b7e91d8@mail.gmail.com> <359a92830709110619i3958018egae763d272f60fbd7@mail.gmail.com> <efb141ed0709110634v50d542a5vf1c1b3d13f744729@mail.gmail.com> <87DC87D9-C81A-4A17-A219-8BEC62B8B711@apache.org> <efb141ed0709111556v1f059fcel6cefc745a68cf5ae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Jae Joo wrote:
>=20
> Sorry. I was confused Solr and Lucene mailing list.
>=20
> Jae
>=20
> On 9/11/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Note, this is a Solr construct and does not apply to a custom Lucene
>> application, even if the intent is correct.
>>
>> On Sep 11, 2007, at 9:34 AM, Jae Joo wrote:
>>
>> > Use the string type for the field.
>> >
>> >     <!-- The StrField type is not analyzed, but indexed/stored
>> > verbatim.
>> >        - StrField and TextField support an optional
>> > compressThreshold which
>> >        limits compression (if enabled in the derived fields) to
>> > values which
>> >        exceed a certain size (in characters).
>> >     -->
>> >     <fieldType name=3D"string" class=3D"solr.StrField"
>> > sortMissingLast=3D"true"
>> > omitNorms=3D"true"/>
>> >
>> >
>> > Jae
>> >
>> > On 9/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>> >>
>> >> No, but you can create your own custom analyzer that does whatever
>> >> you want it to.
>> >>
>> >> Best
>> >> Erick
>> >>
>> >> On 9/11/07, Jawahar Lal <jlal@chambal.com> wrote:
>> >>>
>> >>> Can we made StandardAnalyzer not to cut the word on '-' by
>> >>> setting some
>> >>> property or something like that ?
>> >>>
>> >>>
>> >>> On 11/09/2007, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>> >>>>
>> >>>>
>> >>>>
>> >>>> ---------- Forwarded message ----------
>> >>>> From: Mathieu Lecarme <mathieu@garambrogne.net>
>> >>>> Date: Sep 10, 2007 6:40 PM
>> >>>> Subject: Re: Searching Exact Word from Index
>> >>>> To: java-user@lucene.apache.org
>> >>>>
>> >>>> Laxmilal Menaria a =C3=A9crit :
>> >>>>>  Hello Everyone,
>> >>>>>
>> >>>>> I want to search 'abc-d' as exact keyword not 'abc d'.
>> >> KeywordAnalyzer
>> >>>> can
>> >>>>> be used for this purpose. StandradAnalyzer create different tokens
>> >> for
>> >>>>> 'abc-d' as 'abc' and 'd'.
>> >>>>> But I can not use this, becuase I am indexing the content of a
>> >>>>> text
>> >>>> file. It
>> >>>>> will search whole content as a single keyword.
>> >>>>> But I want to search any word from the content.
>> >>>>>
>> >>>>> Please let me now how it is possible..
>> >>>>>
>> >>>>> Using : Java Lucene 2.2
>> >>>>>
>> >>>>>
>> >>>> choose an analyzer wich doesn't cut word on "-" or build it
>> >>>> yourself.
>> >>>> You can use a basic one and add filter on it.
>> >>>>
>> >>>> M.
>> >>>>
>> >>>> -------------------------------------------------------------------
>> >>>> --
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>>>
>> >>>> --
>> >>>> Thanks,
>> >>>> Laxmilal menaria
>> >>>>
>> >>>> http://www.chambal.net/
>> >>>
>> >>
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

Use "WhitespaceAnalyzer" for indexing..it uses "WhitespaceTokenizer" which
divides String based on white spaces. The word "abc-d"  will be indexed as =
a
single word.


--=20
View this message in context: http://www.nabble.com/Searching-Exact-Word-fr=
om-Index-tf4414241.html#a12874380
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 07:40:17 2007
Return-Path: <java-user-return-30408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99768 invoked from network); 25 Sep 2007 07:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 07:40:16 -0000
Received: (qmail 8842 invoked by uid 500); 25 Sep 2007 07:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8389 invoked by uid 500); 25 Sep 2007 07:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8378 invoked by uid 99); 25 Sep 2007 07:40:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 00:40:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 07:42:12 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id l8P7dbSF039374
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 09:39:37 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Translating Lucene Query Syntax to Traditional Boolean Syntax
Date: Tue, 25 Sep 2007 09:39:37 +0200
User-Agent: KMail/1.8.2
References: <12871390.post@talk.nabble.com>
In-Reply-To: <12871390.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200709250939.37100.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 25 September 2007 03:05, Martin Bayly wrote:
> 
> We have an application that performs searches against a Lucene based index
> and also against a Windows Desktop Search based index.
> 
> For simple queries we'd like to offer our users a consistent interface that
> allows them to build basic Lucene style queries using the 'MUST HAVE' (+),
> 'MUST NOT HAVE' (-) and 'SHOULD HAVE' style of operators as this is probably
> more intuitive for non 'Boolean Logic' literate users.  We would not allow
> them to use any grouping (parenthesis).
> 
> Clearly we can pass this directly to Lucene, but for the Windows Desktop
> Search we need to translate the Lucene style query into a more traditional
> Boolean query.  So this is the opposite of the much discussed Boolean Query
> to Lucene Query conversion.
> 
> I'm wondering if anyone has ever done this or whether there is a concept
> mismatch in there somewhere that will make it difficult to do?
> 
> My thought was that you could take the standard Lucene operators and simply
> group them together as follows:
> 
> e.g. (assuming the Lucene default OR operator)
> 
> Lucene: +a +b -c -d e f
> 
> would translate to:
> 
> (a AND b NOT c NOT d) OR (a AND b NOT c NOT d AND (e OR f))
> 
> If I put this back into Lucene (actually Lucene.NET but hopefully its the
> same) I get back:
> 
> (+a +b -c -d)(+a +b -c -d +(e f))
> 
> which I think is equivalent but not as concise!  But I have not tested this
> against a big index to see if it's equivalent and I have a suspicion that
> Lucene might score the two versions of the Lucene representation
> differently.  But that's probably not an issue provided the Boolean
> representation is semantically equivalent to the first Lucene
> representation.
> 
> Anyone ever tried this before or have any comments on whether my 'logic' is
> flawed!


Under the hood, the Scorer for a BooleanQuery, BooleanScorer2, does the 
conversion from + and - to boolean operators in slightly different, but more 
concise way.

It basically maps the boolean query syntax to four operators: AND, OR,
ANDNOT, ANDoptional.
The mapping is only basical because, as a Scorer, it needs to map to other
Scorers, and these are: ConjunctionScorer, DisjunctionSumScorer,
ReqExclScorer and ReqOptSumScorer, respectively.

For ANDoptional the first subquery is required, and the second one is 
optional. This is a bit like ANDNOT in which the first query is required,
and the second one is prohibited.

The addition of ANDoptional/ReqOptSumScorer allows the conciseness,
while keeping equivalent semantics.
So I think your logic is not flawed, it's just that the traditional set  of 
boolean operators is somehow incomplete for optional subqueries.

Mapping + and - to these four operators is not really straightforward,
among others because of the coordination factor, and because of
the many different possible situations.

You're invited to have a look at the source code of BooleanScorer2.
There are also test cases for the equivalence of the semantics, see the
TestBoolean* classes.


Regards,
Paul Elschot

P.S. When documents may be scored out of order, for some disjunctions
(OR), BooleanScorer is used for performance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 15:03:47 2007
Return-Path: <java-user-return-30409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83054 invoked from network); 25 Sep 2007 15:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 15:03:45 -0000
Received: (qmail 18485 invoked by uid 500); 25 Sep 2007 15:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18372 invoked by uid 500); 25 Sep 2007 15:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18361 invoked by uid 99); 25 Sep 2007 15:03:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 08:03:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 15:03:29 +0000
Received: by an-out-0708.google.com with SMTP id c5so281118anc
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 08:03:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=hHX29dh1q1Vx4mmyUJwprUu/4KBjb8iuUu0AAcrgOCY=;
        b=UmV+n7ed14dCsBNJgAH5r/XIFnMnjl6tZPWy01KKyvnOVRnnMtM/xRCZxKO0NBkEdBlHRoijXBmCCW+fQW52MAEoNok4SaTidi5DjMoaSCxXJMeTYH8PqQFmvrf2XQdB7q9JbM1u7FQ4TPvI3DcPrOg7sVayIPnqcklq41pLb3Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JQMjpKsvaFEzTqphNqnBYrLwPcz3KdXvNSKDlvtGZuBssJcJaM3wHAXj/GyQv08QadFrfKYEjkSA1wwgrHtnOUWHbpH+fvT2WPELVOvyO6iC8L2RMGJp3c+kCTvlogj9sKeLLioJ5tmOoe127QpP9xLZytdPazl8ADvnjAObcqs=
Received: by 10.100.105.18 with SMTP id d18mr1633914anc.1190732588776;
        Tue, 25 Sep 2007 08:03:08 -0700 (PDT)
Received: by 10.35.38.10 with HTTP; Tue, 25 Sep 2007 08:03:08 -0700 (PDT)
Message-ID: <afb14f380709250803p26e9a1d3qf63634155c7eb267@mail.gmail.com>
Date: Tue, 25 Sep 2007 20:03:08 +0500
From: "Liaqat Ali" <liaqatalimian@gmail.com>
To: java-user@lucene.apache.org
Subject: setting up lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2948_3027861.1190732588676"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2948_3027861.1190732588676
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I m facing problems in setting up lucene. kindly some guy guide me in this

------=_Part_2948_3027861.1190732588676--

From java-user-return-30410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 15:21:19 2007
Return-Path: <java-user-return-30410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10459 invoked from network); 25 Sep 2007 15:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 15:21:19 -0000
Received: (qmail 60660 invoked by uid 500); 25 Sep 2007 15:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60637 invoked by uid 500); 25 Sep 2007 15:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60626 invoked by uid 99); 25 Sep 2007 15:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 08:21:03 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_DOB,RCVD_IN_DOB,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 15:21:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 6675474DF5
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 08:20:39 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <afb14f380709250803p26e9a1d3qf63634155c7eb267@mail.gmail.com>
References: <afb14f380709250803p26e9a1d3qf63634155c7eb267@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F7D92DFF-8B61-4BD7-AECE-E7477A797EF0@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: setting up lucene
Date: Tue, 25 Sep 2007 11:20:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Rather than chase our tails, can you tell us what you have done so far?

-Grant
On Sep 25, 2007, at 11:03 AM, Liaqat Ali wrote:

> Hi All
>
> I m facing problems in setting up lucene. kindly some guy guide me  
> in this

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 15:23:14 2007
Return-Path: <java-user-return-30411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12788 invoked from network); 25 Sep 2007 15:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 15:23:13 -0000
Received: (qmail 68947 invoked by uid 500); 25 Sep 2007 15:22:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68924 invoked by uid 500); 25 Sep 2007 15:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68913 invoked by uid 99); 25 Sep 2007 15:22:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 08:22:58 -0700
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=HTML_MESSAGE,REPTO_QUOTE_YAHOO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.12] (HELO web52902.mail.re2.yahoo.com) (206.190.49.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Sep 2007 15:25:12 +0000
Received: (qmail 95493 invoked by uid 60001); 25 Sep 2007 15:22:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=L4w2qM9obBRIaNe7LgOxaWy8gJKVtwOh80htNS6CcKHYK5Yy9vnxepxzAYTCqxlQbI9mOntqcstb9WXI0r0msRmy5TkYh04ZsWNPqwvSuDW+7jcXKDRxC28odZWgbvxHKubq8DdZBaboxV9Fn5Ooy4ujjgjDzGuwU2ID4YgXm6k=;
X-YMail-OSG: FP5miNgVM1kuHlwormJgczJyIkvDBwqB8KVvh1BPY75rb3ZlcHrz4NNuJJt2566RgR5M3tnD5t19R0H5DtXtW6yQtfX4niBUzHIuN7f2WXVIIKDWgl5KHXa99pCXGwZRsfGmA3nGYONydvtlsX2Bkq4n
Received: from [216.252.108.195] by web52902.mail.re2.yahoo.com via HTTP; Tue, 25 Sep 2007 08:22:36 PDT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Tue, 25 Sep 2007 08:22:36 -0700 (PDT)
From: "Johnny R. Ruiz III" <jorzi@yahoo.com>
Reply-To: "Johnny R. Ruiz III" <jorzi@yahoo.com>
Subject: Re: setting up lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1920887769-1190733756=:95425"
Message-ID: <358626.95425.qm@web52902.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1920887769-1190733756=:95425
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

What exactly is your problem?  We'll be able to help u better if u can be s=
pecific or paste some errors you are getting.=0A=0A-- jruiz=0A=0A----- Orig=
inal Message ----=0AFrom: Liaqat Ali <liaqatalimian@gmail.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Tuesday, September 25, 2007 11:03:08 PM=0ASub=
ject: setting up lucene=0A=0AHi All=0A=0AI m facing problems in setting up =
lucene. kindly some guy guide me in this=0A=0A=0A=0A=0A=0A=0A=0A      _____=
___________________________________________________________________________=
____=0AFussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s us=
er panel and lay it on us. http://surveylink.yahoo.com/gmrs/yahoo_panel_inv=
ite.asp?a=3D7 =0A
--0-1920887769-1190733756=:95425--

From java-user-return-30412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 17:47:52 2007
Return-Path: <java-user-return-30412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5684 invoked from network); 25 Sep 2007 17:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 17:47:51 -0000
Received: (qmail 25869 invoked by uid 500); 25 Sep 2007 17:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25844 invoked by uid 500); 25 Sep 2007 17:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25829 invoked by uid 99); 25 Sep 2007 17:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 10:47:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 17:47:33 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8PHlD024917
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 10:47:13 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092510471226537
 for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 10:47:12 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IaEV6-0003o0-00
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 10:47:12 -0700
Message-ID: <46F949A1.90109@ai.sri.com>
Date: Tue, 25 Sep 2007 10:47:13 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com> <46F843C8.30604@ai.sri.com> <46F844EC.9060904@gmail.com>
In-Reply-To: <46F844EC.9060904@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

Looking at your implementation of the DefaultIndexAccessor regarding the 
writer, I think there could be a problem: you have only one cached 
writer but the getWriter(boolean, boolean) allows 2 booleans, so 
ideally, you need 4 cached writer. Otherwise if one starts with a writer 
that over writes the existing index, then later he cannot append docs to 
the index.
Do I miss sth here or you have not finished the implementation of 
getWriter yet?

Thanks!

Jay

Mark Miller wrote:
> Ah, thanks for catching that. One of the pieces I did not finish...the 
> keyword analyzer was placeholder code.
> 
> I will take your comments into account and update the code.
> 
> I have some other pieces to polish as well. Previously, I extended and 
> built upon the original code, but I can't give it away, so this is my 
> attempt at something lessor, but cleaner.
> 
> Jay Yu wrote:
>> Thanks for the tip.
>> One small improvement on the IndexAccessorFactory might be to allow 
>> user to specify the Analyzer instead of using a default 
>> KeywordAnalyzer, which of course will make your static init of the 
>> cached accessors difficult unless you add more interfaces to the 
>> accessor to allow reset analyzer/Dir as in my own version.
>>
>>
>>
>>
>> Jay
>>
>> Mark Miller wrote:
>>> One final note....if you are using the IndexAccessor and you are only 
>>> accessing the index from one JVM, you can use the NoLockFactory and 
>>> save some sync cost there.
>>>
>>> Jay Yu wrote:
>>>> Mark,
>>>>
>>>> Great effort getting the original lucene index accessor package in 
>>>> this shape. I am sure this will benefit a lot of people using Lucene 
>>>> in a multithread env.
>>>> I have a quick question to ask you:
>>>> Do you have to use the core Lucene 2.3-dev in order to use the 
>>>> accessor?
>>>>
>>>> I will take a look at your codes to see if I could help. I used a 
>>>> slightly modified version of the original package in my project but 
>>>> it breaks some of my tests. I hope your version works better.
>>>>
>>>> Thanks a lot!
>>>>
>>>> Jay
>>>>
>>>>
>>>> Mark Miller wrote:
>>>>> I have sat down and rewrote IndexAccessor from scratch. I copied in 
>>>>> the same reference counting logic, pruned some things, and tried to 
>>>>> make the whole package a bit simpler to use. I have a few things to 
>>>>> do, but its pretty solid already. The only major thing I'd still 
>>>>> like to do is add an option to warm searchers before putting them 
>>>>> in the Searcher cache. Id like to writer some more tests as well. 
>>>>> Any help greatly appreciated if your interested in using the thing.
>>>>>
>>>>>
>>>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>>>
>>>>>
>>>>> Here is a an example of a class that can be instantiated in one of 
>>>>> multiple threads and read /modify a single index without worrying 
>>>>> about what any
>>>>> of the other threads are doing to the index at any given time. This 
>>>>> is a very simple example of how to use the IndexAccessor and not 
>>>>> necessarily an
>>>>> example of best practices. The main idea is that you get your 
>>>>> Writer, Searcher, or Reader, and then be sure to release it as soon 
>>>>> as your done with it
>>>>> in a finally block. For loading, you will want to load many docs 
>>>>> with a Writer (batch them) before releasing it, but remember that 
>>>>> Readers will not get a new view
>>>>> of the index until you release all of the Writers. So beware 
>>>>> hogging a Writer unless you thats what your intending.
>>>>>
>>>>> JavaDoc:
>>>>> http://myhardshadow.com/indexaccessorapi/
>>>>>
>>>>> Code:
>>>>> http://myhardshadow.com/indexaccessor/trunk/
>>>>>
>>>>> Jar:
>>>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>>>
>>>>>
>>>>> Your synchronized block concerns:
>>>>>
>>>>> The synchronized blocks that control accesss to the IndexAccessor 
>>>>> do not have a huge impact on performance. Keep in mind that all of 
>>>>> the work is not done in a synchonrized block, just the retrieval of 
>>>>> the Searcher, Writer, Reader. Even if the synchronization makes the 
>>>>> method twice as expensive, it is still overpowered by the cost of 
>>>>> parsing queries and searching the index. This applies with or 
>>>>> without contention. I wrote a simple test and included the output 
>>>>> below. You might use the IBM Lock Analyzer for Java to further 
>>>>> analyze these costs. Trust me, this thing is speedy. Its many times 
>>>>> better than using IndexModifier.
>>>>>
>>>>> Without Contention
>>>>> Just retrieve and release Searcher 100000 times
>>>>> ----
>>>>> avg time:6.3E-4 ms
>>>>> total time:63 ms
>>>>>
>>>>> Parse query and search on 1 doc 100000 times
>>>>> ----
>>>>> avg time:0.03107 ms
>>>>> total time:3107 ms
>>>>>
>>>>>
>>>>> With Contention (40 other threads running 80000 searches)
>>>>> Just retrieve and release Searcher 100000 times
>>>>> ----
>>>>> avg time:0.04643 ms
>>>>> total time:4643 ms
>>>>>
>>>>> Parse query and search on 1 doc 100000 times
>>>>> ----
>>>>> avg time:0.64337 ms
>>>>> total time:64337 ms
>>>>>
>>>>>
>>>>> - Mark
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 18:27:23 2007
Return-Path: <java-user-return-30413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28390 invoked from network); 25 Sep 2007 18:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 18:27:22 -0000
Received: (qmail 617 invoked by uid 500); 25 Sep 2007 18:27:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 573 invoked by uid 500); 25 Sep 2007 18:27:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 537 invoked by uid 99); 25 Sep 2007 18:27:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 11:27:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 18:27:02 +0000
Received: by py-out-1112.google.com with SMTP id d32so6842942pye
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 11:26:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=oKgbPayerNx8bBUnB6cJoI5rByTS2SsTSMcyYN3Zt5o=;
        b=YXd5hy8Miu6MLPk6MuDvSU+/DfpM34SUchh+9dzZNs71izC+7PsXyZTWzGjpg2JA6sEldR2ijno2+RBuLCnrBWXbKksUX7DSYMbRO0zVKItuyOUtVjJcpVH6QKZbkAqINfZZDn1C2Y+LWt3FS4nz1ptY7uOZJpPdVHH5I8w7R5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qs289NN/NaxcWTOQ2cEBmwsXJrkRxgzPjNP+9PRpUm/VFKTswA7phpmlX/7P0Obdty7q5aASzM+URjUA/Yak3l3a4h+IZBeqvYwG/UdMOnTh9R9d1EOt6Z7cmYhrBKlIOR0ZTwzZ0zRoKxhkFxt24eJs4UCDx2iEMys3MzKpN/U=
Received: by 10.65.35.6 with SMTP id n6mr1237604qbj.1190744798532;
        Tue, 25 Sep 2007 11:26:38 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f13sm2993984qba.2007.09.25.11.26.37
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 25 Sep 2007 11:26:37 -0700 (PDT)
Message-ID: <46F9526F.1030702@gmail.com>
Date: Tue, 25 Sep 2007 14:24:47 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com> <46F843C8.30604@ai.sri.com> <46F844EC.9060904@gmail.com> <46F949A1.90109@ai.sri.com>
In-Reply-To: <46F949A1.90109@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think its just a compromise in the design, though it could be 
improved. You only ever want a single Writer at a time on the index. 
Those two flags are really just hints for when a Writer is first 
opened...should it auto-commit and should it overwrite/create...if a 
thread tries to writer concurrently with another thread, they will 
briefly share a Writer, but generally a new Writer is created fairly often.

The general strategy should be to pick constant values and always pass 
them. There is an opening for the issue that you have a Writer and are 
adding a doc, and then before releasing that Writer, another Writer from 
another thread tries to clear the index with a create=true, and it won't 
work. That's not a big concern though.

So the problem really is that these params control what happens when a 
new writer is created, but your not guaranteed to be creating a Writer, 
it may be cached. You really should pass the same autocommit flag , 
though its not necessary. I am open to suggestions for a more coherent 
design, but functionally, it does work. I am also thinking about how to 
handle the Analyzer, and I think the solution (the need to init some 
indexaccessor params) might involve all these issues.

- Mark

Jay Yu wrote:
> Mark,
>
> Looking at your implementation of the DefaultIndexAccessor regarding 
> the writer, I think there could be a problem: you have only one cached 
> writer but the getWriter(boolean, boolean) allows 2 booleans, so 
> ideally, you need 4 cached writer. Otherwise if one starts with a 
> writer that over writes the existing index, then later he cannot 
> append docs to the index.
> Do I miss sth here or you have not finished the implementation of 
> getWriter yet?
>
> Thanks!
>
> Jay
>
> Mark Miller wrote:
>> Ah, thanks for catching that. One of the pieces I did not 
>> finish...the keyword analyzer was placeholder code.
>>
>> I will take your comments into account and update the code.
>>
>> I have some other pieces to polish as well. Previously, I extended 
>> and built upon the original code, but I can't give it away, so this 
>> is my attempt at something lessor, but cleaner.
>>
>> Jay Yu wrote:
>>> Thanks for the tip.
>>> One small improvement on the IndexAccessorFactory might be to allow 
>>> user to specify the Analyzer instead of using a default 
>>> KeywordAnalyzer, which of course will make your static init of the 
>>> cached accessors difficult unless you add more interfaces to the 
>>> accessor to allow reset analyzer/Dir as in my own version.
>>>
>>>
>>>
>>>
>>> Jay
>>>
>>> Mark Miller wrote:
>>>> One final note....if you are using the IndexAccessor and you are 
>>>> only accessing the index from one JVM, you can use the 
>>>> NoLockFactory and save some sync cost there.
>>>>
>>>> Jay Yu wrote:
>>>>> Mark,
>>>>>
>>>>> Great effort getting the original lucene index accessor package in 
>>>>> this shape. I am sure this will benefit a lot of people using 
>>>>> Lucene in a multithread env.
>>>>> I have a quick question to ask you:
>>>>> Do you have to use the core Lucene 2.3-dev in order to use the 
>>>>> accessor?
>>>>>
>>>>> I will take a look at your codes to see if I could help. I used a 
>>>>> slightly modified version of the original package in my project 
>>>>> but it breaks some of my tests. I hope your version works better.
>>>>>
>>>>> Thanks a lot!
>>>>>
>>>>> Jay
>>>>>
>>>>>
>>>>> Mark Miller wrote:
>>>>>> I have sat down and rewrote IndexAccessor from scratch. I copied 
>>>>>> in the same reference counting logic, pruned some things, and 
>>>>>> tried to make the whole package a bit simpler to use. I have a 
>>>>>> few things to do, but its pretty solid already. The only major 
>>>>>> thing I'd still like to do is add an option to warm searchers 
>>>>>> before putting them in the Searcher cache. Id like to writer some 
>>>>>> more tests as well. Any help greatly appreciated if your 
>>>>>> interested in using the thing.
>>>>>>
>>>>>>
>>>>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>>>>
>>>>>>
>>>>>> Here is a an example of a class that can be instantiated in one 
>>>>>> of multiple threads and read /modify a single index without 
>>>>>> worrying about what any
>>>>>> of the other threads are doing to the index at any given time. 
>>>>>> This is a very simple example of how to use the IndexAccessor and 
>>>>>> not necessarily an
>>>>>> example of best practices. The main idea is that you get your 
>>>>>> Writer, Searcher, or Reader, and then be sure to release it as 
>>>>>> soon as your done with it
>>>>>> in a finally block. For loading, you will want to load many docs 
>>>>>> with a Writer (batch them) before releasing it, but remember that 
>>>>>> Readers will not get a new view
>>>>>> of the index until you release all of the Writers. So beware 
>>>>>> hogging a Writer unless you thats what your intending.
>>>>>>
>>>>>> JavaDoc:
>>>>>> http://myhardshadow.com/indexaccessorapi/
>>>>>>
>>>>>> Code:
>>>>>> http://myhardshadow.com/indexaccessor/trunk/
>>>>>>
>>>>>> Jar:
>>>>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>>>>
>>>>>>
>>>>>> Your synchronized block concerns:
>>>>>>
>>>>>> The synchronized blocks that control accesss to the IndexAccessor 
>>>>>> do not have a huge impact on performance. Keep in mind that all 
>>>>>> of the work is not done in a synchonrized block, just the 
>>>>>> retrieval of the Searcher, Writer, Reader. Even if the 
>>>>>> synchronization makes the method twice as expensive, it is still 
>>>>>> overpowered by the cost of parsing queries and searching the 
>>>>>> index. This applies with or without contention. I wrote a simple 
>>>>>> test and included the output below. You might use the IBM Lock 
>>>>>> Analyzer for Java to further analyze these costs. Trust me, this 
>>>>>> thing is speedy. Its many times better than using IndexModifier.
>>>>>>
>>>>>> Without Contention
>>>>>> Just retrieve and release Searcher 100000 times
>>>>>> ----
>>>>>> avg time:6.3E-4 ms
>>>>>> total time:63 ms
>>>>>>
>>>>>> Parse query and search on 1 doc 100000 times
>>>>>> ----
>>>>>> avg time:0.03107 ms
>>>>>> total time:3107 ms
>>>>>>
>>>>>>
>>>>>> With Contention (40 other threads running 80000 searches)
>>>>>> Just retrieve and release Searcher 100000 times
>>>>>> ----
>>>>>> avg time:0.04643 ms
>>>>>> total time:4643 ms
>>>>>>
>>>>>> Parse query and search on 1 doc 100000 times
>>>>>> ----
>>>>>> avg time:0.64337 ms
>>>>>> total time:64337 ms
>>>>>>
>>>>>>
>>>>>> - Mark
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 18:55:46 2007
Return-Path: <java-user-return-30414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38880 invoked from network); 25 Sep 2007 18:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 18:55:45 -0000
Received: (qmail 65188 invoked by uid 500); 25 Sep 2007 18:55:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65150 invoked by uid 500); 25 Sep 2007 18:55:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65137 invoked by uid 99); 25 Sep 2007 18:55:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 11:55:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 18:55:27 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l8PIt6011146
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 11:55:06 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007092511550631277
 for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 11:55:06 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.150] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1IaFYo-0004Kj-00
	for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 11:55:06 -0700
Message-ID: <46F9598E.2090201@ai.sri.com>
Date: Tue, 25 Sep 2007 11:55:10 -0700
From: Jay Yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com> <46F843C8.30604@ai.sri.com> <46F844EC.9060904@gmail.com> <46F949A1.90109@ai.sri.com> <46F9526F.1030702@gmail.com>
In-Reply-To: <46F9526F.1030702@gmail.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I agree with you on the compromise aspect of the design.
In particular, I think it's hard to preload all the index accessors in 
the static init while allowing users specify the analyzer for each dir 
without requiring complicated config file ans using reflection.
So a good compromise might be abandon preload the accessors. After all, 
the accessors are cached and not created often.

Thanks!

Jay


Mark Miller wrote:
> I think its just a compromise in the design, though it could be 
> improved. You only ever want a single Writer at a time on the index. 
> Those two flags are really just hints for when a Writer is first 
> opened...should it auto-commit and should it overwrite/create...if a 
> thread tries to writer concurrently with another thread, they will 
> briefly share a Writer, but generally a new Writer is created fairly often.
> 
> The general strategy should be to pick constant values and always pass 
> them. There is an opening for the issue that you have a Writer and are 
> adding a doc, and then before releasing that Writer, another Writer from 
> another thread tries to clear the index with a create=true, and it won't 
> work. That's not a big concern though.
> 
> So the problem really is that these params control what happens when a 
> new writer is created, but your not guaranteed to be creating a Writer, 
> it may be cached. You really should pass the same autocommit flag , 
> though its not necessary. I am open to suggestions for a more coherent 
> design, but functionally, it does work. I am also thinking about how to 
> handle the Analyzer, and I think the solution (the need to init some 
> indexaccessor params) might involve all these issues.
> 
> - Mark
> 
> Jay Yu wrote:
>> Mark,
>>
>> Looking at your implementation of the DefaultIndexAccessor regarding 
>> the writer, I think there could be a problem: you have only one cached 
>> writer but the getWriter(boolean, boolean) allows 2 booleans, so 
>> ideally, you need 4 cached writer. Otherwise if one starts with a 
>> writer that over writes the existing index, then later he cannot 
>> append docs to the index.
>> Do I miss sth here or you have not finished the implementation of 
>> getWriter yet?
>>
>> Thanks!
>>
>> Jay
>>
>> Mark Miller wrote:
>>> Ah, thanks for catching that. One of the pieces I did not 
>>> finish...the keyword analyzer was placeholder code.
>>>
>>> I will take your comments into account and update the code.
>>>
>>> I have some other pieces to polish as well. Previously, I extended 
>>> and built upon the original code, but I can't give it away, so this 
>>> is my attempt at something lessor, but cleaner.
>>>
>>> Jay Yu wrote:
>>>> Thanks for the tip.
>>>> One small improvement on the IndexAccessorFactory might be to allow 
>>>> user to specify the Analyzer instead of using a default 
>>>> KeywordAnalyzer, which of course will make your static init of the 
>>>> cached accessors difficult unless you add more interfaces to the 
>>>> accessor to allow reset analyzer/Dir as in my own version.
>>>>
>>>>
>>>>
>>>>
>>>> Jay
>>>>
>>>> Mark Miller wrote:
>>>>> One final note....if you are using the IndexAccessor and you are 
>>>>> only accessing the index from one JVM, you can use the 
>>>>> NoLockFactory and save some sync cost there.
>>>>>
>>>>> Jay Yu wrote:
>>>>>> Mark,
>>>>>>
>>>>>> Great effort getting the original lucene index accessor package in 
>>>>>> this shape. I am sure this will benefit a lot of people using 
>>>>>> Lucene in a multithread env.
>>>>>> I have a quick question to ask you:
>>>>>> Do you have to use the core Lucene 2.3-dev in order to use the 
>>>>>> accessor?
>>>>>>
>>>>>> I will take a look at your codes to see if I could help. I used a 
>>>>>> slightly modified version of the original package in my project 
>>>>>> but it breaks some of my tests. I hope your version works better.
>>>>>>
>>>>>> Thanks a lot!
>>>>>>
>>>>>> Jay
>>>>>>
>>>>>>
>>>>>> Mark Miller wrote:
>>>>>>> I have sat down and rewrote IndexAccessor from scratch. I copied 
>>>>>>> in the same reference counting logic, pruned some things, and 
>>>>>>> tried to make the whole package a bit simpler to use. I have a 
>>>>>>> few things to do, but its pretty solid already. The only major 
>>>>>>> thing I'd still like to do is add an option to warm searchers 
>>>>>>> before putting them in the Searcher cache. Id like to writer some 
>>>>>>> more tests as well. Any help greatly appreciated if your 
>>>>>>> interested in using the thing.
>>>>>>>
>>>>>>>
>>>>>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>>>>>
>>>>>>>
>>>>>>> Here is a an example of a class that can be instantiated in one 
>>>>>>> of multiple threads and read /modify a single index without 
>>>>>>> worrying about what any
>>>>>>> of the other threads are doing to the index at any given time. 
>>>>>>> This is a very simple example of how to use the IndexAccessor and 
>>>>>>> not necessarily an
>>>>>>> example of best practices. The main idea is that you get your 
>>>>>>> Writer, Searcher, or Reader, and then be sure to release it as 
>>>>>>> soon as your done with it
>>>>>>> in a finally block. For loading, you will want to load many docs 
>>>>>>> with a Writer (batch them) before releasing it, but remember that 
>>>>>>> Readers will not get a new view
>>>>>>> of the index until you release all of the Writers. So beware 
>>>>>>> hogging a Writer unless you thats what your intending.
>>>>>>>
>>>>>>> JavaDoc:
>>>>>>> http://myhardshadow.com/indexaccessorapi/
>>>>>>>
>>>>>>> Code:
>>>>>>> http://myhardshadow.com/indexaccessor/trunk/
>>>>>>>
>>>>>>> Jar:
>>>>>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>>>>>
>>>>>>>
>>>>>>> Your synchronized block concerns:
>>>>>>>
>>>>>>> The synchronized blocks that control accesss to the IndexAccessor 
>>>>>>> do not have a huge impact on performance. Keep in mind that all 
>>>>>>> of the work is not done in a synchonrized block, just the 
>>>>>>> retrieval of the Searcher, Writer, Reader. Even if the 
>>>>>>> synchronization makes the method twice as expensive, it is still 
>>>>>>> overpowered by the cost of parsing queries and searching the 
>>>>>>> index. This applies with or without contention. I wrote a simple 
>>>>>>> test and included the output below. You might use the IBM Lock 
>>>>>>> Analyzer for Java to further analyze these costs. Trust me, this 
>>>>>>> thing is speedy. Its many times better than using IndexModifier.
>>>>>>>
>>>>>>> Without Contention
>>>>>>> Just retrieve and release Searcher 100000 times
>>>>>>> ----
>>>>>>> avg time:6.3E-4 ms
>>>>>>> total time:63 ms
>>>>>>>
>>>>>>> Parse query and search on 1 doc 100000 times
>>>>>>> ----
>>>>>>> avg time:0.03107 ms
>>>>>>> total time:3107 ms
>>>>>>>
>>>>>>>
>>>>>>> With Contention (40 other threads running 80000 searches)
>>>>>>> Just retrieve and release Searcher 100000 times
>>>>>>> ----
>>>>>>> avg time:0.04643 ms
>>>>>>> total time:4643 ms
>>>>>>>
>>>>>>> Parse query and search on 1 doc 100000 times
>>>>>>> ----
>>>>>>> avg time:0.64337 ms
>>>>>>> total time:64337 ms
>>>>>>>
>>>>>>>
>>>>>>> - Mark
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 19:56:55 2007
Return-Path: <java-user-return-30415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66302 invoked from network); 25 Sep 2007 19:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 19:56:55 -0000
Received: (qmail 10088 invoked by uid 500); 25 Sep 2007 19:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10057 invoked by uid 500); 25 Sep 2007 19:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10046 invoked by uid 99); 25 Sep 2007 19:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 12:56:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 19:56:36 +0000
Received: by py-out-1112.google.com with SMTP id d32so6937689pye
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 12:56:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=tRtUG76VqG1+XCyjoBqrSE7qm3mDnwBR6jlsPwAmitA=;
        b=gKderovuhGMKabCZHcFrDdS6pJdVGsr/Bch4LTsBfOw5qxZTYUa1El/W194fAn/f79tZPCIpe2XwRsbT6jLsQ7AcbYSIIZf+kfF4Jtcx18iuWFwrG8TMquMtWwNlrK/+accjOs98F6p/6OVud6q6ayG5D/ohLAfwiiHf8QIRDG4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LKYfp/cHfI4fRAyQiAjU4Gw3wWvJkrG1BW4qNH3wJaLaEsU6Pth3kvWX2b1GwXR9pZbm3YvAW3g8WBlwwDAotMUelFTMTTuv0AWExLbDNjC6+RIUUjDEDevKYSxDUa7AuO2sGBRnsZ1vMTfXNoIchbc3K/Q+B6xP1eAyskrIPwk=
Received: by 10.64.156.2 with SMTP id d2mr10703631qbe.1190750174526;
        Tue, 25 Sep 2007 12:56:14 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f16sm3112121qba.2007.09.25.12.56.11
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 25 Sep 2007 12:56:12 -0700 (PDT)
Message-ID: <46F9676D.8020102@gmail.com>
Date: Tue, 25 Sep 2007 15:54:21 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: thread safe shared IndexSearcher
References: <46F15AE1.5040400@ai.sri.com>	 <ab0709bf0709191136q4263fdbdpc3a6ebd9ad9b9917@mail.gmail.com>	 <46F171FB.2080306@ai.sri.com> <ab0709bf0709191244q124bb381x84298e6490bc5f92@mail.gmail.com> <46F1A8B5.1030401@ai.sri.com> <46F1D862.8000201@gmail.com> <46F2959D.9040403@ai.sri.com> <46F29849.4070701@gmail.com> <46F299A4.6030403@ai.sri.com> <46F7A320.9030100@gmail.com> <46F7E9F9.3010103@ai.sri.com> <46F8366F.1090806@gmail.com> <46F83E84.2000102@ai.sri.com> <46F8419E.7080501@gmail.com> <46F843C8.30604@ai.sri.com> <46F844EC.9060904@gmail.com> <46F949A1.90109@ai.sri.com> <46F9526F.1030702@gmail.com> <46F9598E.2090201@ai.sri.com>
In-Reply-To: <46F9598E.2090201@ai.sri.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Agreed. Perhaps I will abandon the static init. I really only put it as 
an option due to your synchronized cost concerns (a preload allows non 
synched read only access to the indexaccessor cache). Due keep in mind 
that you don't have to use it though...if you dont preload, accessors 
are created on demand but require you to go through a synch block.

I have some ideas and I will be making an attempt to smooth this all out 
tonight. Thanks for your input.

- Mark

Jay Yu wrote:
> I agree with you on the compromise aspect of the design.
> In particular, I think it's hard to preload all the index accessors in 
> the static init while allowing users specify the analyzer for each dir 
> without requiring complicated config file ans using reflection.
> So a good compromise might be abandon preload the accessors. After 
> all, the accessors are cached and not created often.
>
> Thanks!
>
> Jay
>
>
> Mark Miller wrote:
>> I think its just a compromise in the design, though it could be 
>> improved. You only ever want a single Writer at a time on the index. 
>> Those two flags are really just hints for when a Writer is first 
>> opened...should it auto-commit and should it overwrite/create...if a 
>> thread tries to writer concurrently with another thread, they will 
>> briefly share a Writer, but generally a new Writer is created fairly 
>> often.
>>
>> The general strategy should be to pick constant values and always 
>> pass them. There is an opening for the issue that you have a Writer 
>> and are adding a doc, and then before releasing that Writer, another 
>> Writer from another thread tries to clear the index with a 
>> create=true, and it won't work. That's not a big concern though.
>>
>> So the problem really is that these params control what happens when 
>> a new writer is created, but your not guaranteed to be creating a 
>> Writer, it may be cached. You really should pass the same autocommit 
>> flag , though its not necessary. I am open to suggestions for a more 
>> coherent design, but functionally, it does work. I am also thinking 
>> about how to handle the Analyzer, and I think the solution (the need 
>> to init some indexaccessor params) might involve all these issues.
>>
>> - Mark
>>
>> Jay Yu wrote:
>>> Mark,
>>>
>>> Looking at your implementation of the DefaultIndexAccessor regarding 
>>> the writer, I think there could be a problem: you have only one 
>>> cached writer but the getWriter(boolean, boolean) allows 2 booleans, 
>>> so ideally, you need 4 cached writer. Otherwise if one starts with a 
>>> writer that over writes the existing index, then later he cannot 
>>> append docs to the index.
>>> Do I miss sth here or you have not finished the implementation of 
>>> getWriter yet?
>>>
>>> Thanks!
>>>
>>> Jay
>>>
>>> Mark Miller wrote:
>>>> Ah, thanks for catching that. One of the pieces I did not 
>>>> finish...the keyword analyzer was placeholder code.
>>>>
>>>> I will take your comments into account and update the code.
>>>>
>>>> I have some other pieces to polish as well. Previously, I extended 
>>>> and built upon the original code, but I can't give it away, so this 
>>>> is my attempt at something lessor, but cleaner.
>>>>
>>>> Jay Yu wrote:
>>>>> Thanks for the tip.
>>>>> One small improvement on the IndexAccessorFactory might be to 
>>>>> allow user to specify the Analyzer instead of using a default 
>>>>> KeywordAnalyzer, which of course will make your static init of the 
>>>>> cached accessors difficult unless you add more interfaces to the 
>>>>> accessor to allow reset analyzer/Dir as in my own version.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Jay
>>>>>
>>>>> Mark Miller wrote:
>>>>>> One final note....if you are using the IndexAccessor and you are 
>>>>>> only accessing the index from one JVM, you can use the 
>>>>>> NoLockFactory and save some sync cost there.
>>>>>>
>>>>>> Jay Yu wrote:
>>>>>>> Mark,
>>>>>>>
>>>>>>> Great effort getting the original lucene index accessor package 
>>>>>>> in this shape. I am sure this will benefit a lot of people using 
>>>>>>> Lucene in a multithread env.
>>>>>>> I have a quick question to ask you:
>>>>>>> Do you have to use the core Lucene 2.3-dev in order to use the 
>>>>>>> accessor?
>>>>>>>
>>>>>>> I will take a look at your codes to see if I could help. I used 
>>>>>>> a slightly modified version of the original package in my 
>>>>>>> project but it breaks some of my tests. I hope your version 
>>>>>>> works better.
>>>>>>>
>>>>>>> Thanks a lot!
>>>>>>>
>>>>>>> Jay
>>>>>>>
>>>>>>>
>>>>>>> Mark Miller wrote:
>>>>>>>> I have sat down and rewrote IndexAccessor from scratch. I 
>>>>>>>> copied in the same reference counting logic, pruned some 
>>>>>>>> things, and tried to make the whole package a bit simpler to 
>>>>>>>> use. I have a few things to do, but its pretty solid already. 
>>>>>>>> The only major thing I'd still like to do is add an option to 
>>>>>>>> warm searchers before putting them in the Searcher cache. Id 
>>>>>>>> like to writer some more tests as well. Any help greatly 
>>>>>>>> appreciated if your interested in using the thing.
>>>>>>>>
>>>>>>>>
>>>>>>>> http://myhardshadow.com/indexaccessor/trunk/src/test/com/mhs/indexaccessor/SimpleSearchServer.java 
>>>>>>>>
>>>>>>>>
>>>>>>>> Here is a an example of a class that can be instantiated in one 
>>>>>>>> of multiple threads and read /modify a single index without 
>>>>>>>> worrying about what any
>>>>>>>> of the other threads are doing to the index at any given time. 
>>>>>>>> This is a very simple example of how to use the IndexAccessor 
>>>>>>>> and not necessarily an
>>>>>>>> example of best practices. The main idea is that you get your 
>>>>>>>> Writer, Searcher, or Reader, and then be sure to release it as 
>>>>>>>> soon as your done with it
>>>>>>>> in a finally block. For loading, you will want to load many 
>>>>>>>> docs with a Writer (batch them) before releasing it, but 
>>>>>>>> remember that Readers will not get a new view
>>>>>>>> of the index until you release all of the Writers. So beware 
>>>>>>>> hogging a Writer unless you thats what your intending.
>>>>>>>>
>>>>>>>> JavaDoc:
>>>>>>>> http://myhardshadow.com/indexaccessorapi/
>>>>>>>>
>>>>>>>> Code:
>>>>>>>> http://myhardshadow.com/indexaccessor/trunk/
>>>>>>>>
>>>>>>>> Jar:
>>>>>>>> http://myhardshadow.com/indexaccessorreleases/indexaccessor.jar
>>>>>>>>
>>>>>>>>
>>>>>>>> Your synchronized block concerns:
>>>>>>>>
>>>>>>>> The synchronized blocks that control accesss to the 
>>>>>>>> IndexAccessor do not have a huge impact on performance. Keep in 
>>>>>>>> mind that all of the work is not done in a synchonrized block, 
>>>>>>>> just the retrieval of the Searcher, Writer, Reader. Even if the 
>>>>>>>> synchronization makes the method twice as expensive, it is 
>>>>>>>> still overpowered by the cost of parsing queries and searching 
>>>>>>>> the index. This applies with or without contention. I wrote a 
>>>>>>>> simple test and included the output below. You might use the 
>>>>>>>> IBM Lock Analyzer for Java to further analyze these costs. 
>>>>>>>> Trust me, this thing is speedy. Its many times better than 
>>>>>>>> using IndexModifier.
>>>>>>>>
>>>>>>>> Without Contention
>>>>>>>> Just retrieve and release Searcher 100000 times
>>>>>>>> ----
>>>>>>>> avg time:6.3E-4 ms
>>>>>>>> total time:63 ms
>>>>>>>>
>>>>>>>> Parse query and search on 1 doc 100000 times
>>>>>>>> ----
>>>>>>>> avg time:0.03107 ms
>>>>>>>> total time:3107 ms
>>>>>>>>
>>>>>>>>
>>>>>>>> With Contention (40 other threads running 80000 searches)
>>>>>>>> Just retrieve and release Searcher 100000 times
>>>>>>>> ----
>>>>>>>> avg time:0.04643 ms
>>>>>>>> total time:4643 ms
>>>>>>>>
>>>>>>>> Parse query and search on 1 doc 100000 times
>>>>>>>> ----
>>>>>>>> avg time:0.64337 ms
>>>>>>>> total time:64337 ms
>>>>>>>>
>>>>>>>>
>>>>>>>> - Mark
>>>>>>>>
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 22:51:56 2007
Return-Path: <java-user-return-30416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34733 invoked from network); 25 Sep 2007 22:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 22:51:56 -0000
Received: (qmail 40139 invoked by uid 500); 25 Sep 2007 22:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40112 invoked by uid 500); 25 Sep 2007 22:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40101 invoked by uid 99); 25 Sep 2007 22:51:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 15:51:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 22:51:41 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1474514nfc
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 15:51:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=FnfJKGp4NTpMfiyKs7ndZUrpZZHgxeakZW97RJV02cg=;
        b=nTgggJ1/BOD5mhGYj73lrmgPlBZRiCCaJMak9X3+3+fX2T7moJAO+YnQEElLFjLNVVrpFBhX/5D1pCXi8/pRBdme64iLJI4zweqwTwzq7kqJox313XjmseUI9ZLUGEJFIaX/C/mDkqh7+l2vsQp3R6QrSR1Vawr2klpeFpf1DKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f6IHLFjvA8MrG+Czep8P21muVQnsl4KRW40pCh21aXCuHBFbtMFnluCTULrTYnesuzuoQgo60lK2BBEdgBN0MfDE/Rdxt8IQZWvIToOjCcx4SYnrCw+o/HlqZ44PQ/Sf2+imVjKGCYAWuyBqm32MmfRJHZwrW54weJH3F74dOoU=
Received: by 10.86.4.2 with SMTP id 2mr4860221fgd.1190760679050;
        Tue, 25 Sep 2007 15:51:19 -0700 (PDT)
Received: by 10.86.59.11 with HTTP; Tue, 25 Sep 2007 15:51:19 -0700 (PDT)
Message-ID: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
Date: Tue, 25 Sep 2007 15:51:19 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: user index sigature
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4527_24701140.1190760679042"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4527_24701140.1190760679042
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

   Is there a way to added custom signature data to a lucene index, e.g data
version etc?

Thanks

-John

------=_Part_4527_24701140.1190760679042--

From java-user-return-30417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 23:38:55 2007
Return-Path: <java-user-return-30417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55826 invoked from network); 25 Sep 2007 23:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 23:38:54 -0000
Received: (qmail 92033 invoked by uid 500); 25 Sep 2007 23:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91996 invoked by uid 500); 25 Sep 2007 23:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91985 invoked by uid 99); 25 Sep 2007 23:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 16:38:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 23:38:40 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2185439fkz
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 16:38:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=4NsmaoyLLu22XhONl9oa4jHew2VeYnjF1GtxnnPDwrM=;
        b=ZqUQqoMlo3uj3t8EyvHZPI3BRIuunzlkGU5070WnlmsSJW0mz9ix1CiFmVdVr0nFnkk60rQhrhZVfFoDRIJtbQyO6w1/GBe2qMlkR3UmSQIm+evo/M1Cjb2YwynHSd/fduDdSMaUVadu73dOMd9ql3r2HYtBAjpMV9YgrH/mqPQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W5coyVPRTWSCQuSXXKUa6Vdg9dov5ywZPOeXYIsWr+lfqN1sxqJvIHZqVyL4fJen7PM7nb1rdqurXzoFQrutzCAK/Cru1PrlIm1pwIPVIETD2vdh7yCELtGU3R4NjcFeyvnWlSaZsdccsZpp+u8tX+Cjw9h5QwHpGmKGs8Y4vVw=
Received: by 10.82.174.20 with SMTP id w20mr24891bue.1190763498258;
        Tue, 25 Sep 2007 16:38:18 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 25 Sep 2007 16:38:18 -0700 (PDT)
Message-ID: <359a92830709251638u5b07e73eg1883b1bf27576db4@mail.gmail.com>
Date: Tue, 25 Sep 2007 19:38:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: user index sigature
In-Reply-To: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2412_26985224.1190763498249"
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2412_26985224.1190763498249
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, just index a *very special* document with one field that is
shared by no other documents in your index. Put your
custom signature in there.

You can even get it very efficiently with TermEnum if you
don't want to search for it, but searching would also be very
fast. Put, say, two fields in the doc. "field_version" and "value".
Always set the *field* field_version to the string "version". Now, search
for field_version:version, get the one and only resulting doc
and get it's value field.

Best
Erick

On 9/25/07, John Wang <john.wang@gmail.com> wrote:
>
> Hi:
>
>    Is there a way to added custom signature data to a lucene index, e.gdata
> version etc?
>
> Thanks
>
> -John
>

------=_Part_2412_26985224.1190763498249--

From java-user-return-30418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 23:52:15 2007
Return-Path: <java-user-return-30418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61291 invoked from network); 25 Sep 2007 23:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 23:52:15 -0000
Received: (qmail 99425 invoked by uid 500); 25 Sep 2007 23:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99388 invoked by uid 500); 25 Sep 2007 23:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99377 invoked by uid 99); 25 Sep 2007 23:51:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 16:51:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 23:52:00 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1483972nfc
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 16:51:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=7Ep+kl1o4tkDjS8XyF8dHDKY4Z1O2KybQ995uiKLtAE=;
        b=rDu3xrscY4PQ2dbg2ZKF7iaKmZQ6Ebm/SDEJM6JxtBTS6ZNB3TA0Bo8v+VCJHQ7ojpV+FFHAEQnHYQgev8rsdBzFx+kQzakdqJtT9II1CSEgKWvNx21tTeiRMUXVWIZeHrMF6ojXv8JM3UV0EuKPNe3tXiK6SxzgMQvXkDSeY64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aG3HQ0Zs8MoXZlVr9yq1B8c0pJGr/K47HUeH84bnlOzLel5dT8d/+Qt2a8pRJ9qcOoMf4HV01jvKqav9BcdrzQkh9oyyMEsOieuQ2sQ/E4zo+wYpOSJVx1EJWpZYZlcpWpQfoIkABrMRcqF/UG4IBUWsTDE3ka84Vn0egUyjdMk=
Received: by 10.86.99.9 with SMTP id w9mr44667fgb.1190764298444;
        Tue, 25 Sep 2007 16:51:38 -0700 (PDT)
Received: by 10.86.59.11 with HTTP; Tue, 25 Sep 2007 16:51:38 -0700 (PDT)
Message-ID: <8837fb770709251651n2200258ev471d0d47e99581f3@mail.gmail.com>
Date: Tue, 25 Sep 2007 16:51:38 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: user index sigature
In-Reply-To: <359a92830709251638u5b07e73eg1883b1bf27576db4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4646_18808026.1190764298426"
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
	 <359a92830709251638u5b07e73eg1883b1bf27576db4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4646_18808026.1190764298426
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

cool, thanks!

On 9/25/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Sure, just index a *very special* document with one field that is
> shared by no other documents in your index. Put your
> custom signature in there.
>
> You can even get it very efficiently with TermEnum if you
> don't want to search for it, but searching would also be very
> fast. Put, say, two fields in the doc. "field_version" and "value".
> Always set the *field* field_version to the string "version". Now, search
> for field_version:version, get the one and only resulting doc
> and get it's value field.
>
> Best
> Erick
>
> On 9/25/07, John Wang <john.wang@gmail.com> wrote:
> >
> > Hi:
> >
> >    Is there a way to added custom signature data to a lucene index,
> e.gdata
> > version etc?
> >
> > Thanks
> >
> > -John
> >
>

------=_Part_4646_18808026.1190764298426--

From java-user-return-30419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Sep 25 23:55:50 2007
Return-Path: <java-user-return-30419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63526 invoked from network); 25 Sep 2007 23:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Sep 2007 23:55:49 -0000
Received: (qmail 4524 invoked by uid 500); 25 Sep 2007 23:55:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4491 invoked by uid 500); 25 Sep 2007 23:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4480 invoked by uid 99); 25 Sep 2007 23:55:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 16:55:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 23:55:34 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1484489nfc
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 16:55:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NrUZMIbFAditCcu3YQFANSVN7oAPQsYdMHrh4Fuw8x4=;
        b=GFPGqUKSGDtdezwNCQO8+1BBsdur1ORvtSsEr72MR+dXZQDqRhr8OcZe65Bfr+gug/AbSS/4liT1tYBMUaAnv/B6EEKAjfOv9aaU/BL+RMCj3Pgcvosto24LFZuQTWWXqaXX35c17CPBb48LT+V7IEBxHbxcWyNCW4iONMAgwAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DK+LurLmKmfFvv7RDlFW/tHQz1Nv9hXxrjuUCZsjVCdr2HN7rlVPBkOJ1z3Z97jkH1/6wkwUzuNiTf+jqCtnwfhK0hQPCVbEoW+PBbjY+DVH7Ejn+hLY44Uy6jUeZKmb2WBAgAhZ075NMeyk8L2pd1JzSfPUPtdtDiVxykcobXQ=
Received: by 10.86.76.16 with SMTP id y16mr40707fga.1190764512439;
        Tue, 25 Sep 2007 16:55:12 -0700 (PDT)
Received: by 10.86.59.11 with HTTP; Tue, 25 Sep 2007 16:55:12 -0700 (PDT)
Message-ID: <8837fb770709251655w627b5cffm235a60320167083@mail.gmail.com>
Date: Tue, 25 Sep 2007 16:55:12 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: user index sigature
In-Reply-To: <8837fb770709251651n2200258ev471d0d47e99581f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4651_28786088.1190764512429"
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
	 <359a92830709251638u5b07e73eg1883b1bf27576db4@mail.gmail.com>
	 <8837fb770709251651n2200258ev471d0d47e99581f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4651_28786088.1190764512429
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

what do you think about the overhead of opening the IndexReader just to find
out the version?
e.g. if you have a large index, say 10M docs, just opening it to find out
the version, how big is the overhead?

-John

On 9/25/07, John Wang <john.wang@gmail.com> wrote:
>
> cool, thanks!
>
> On 9/25/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Sure, just index a *very special* document with one field that is
> > shared by no other documents in your index. Put your
> > custom signature in there.
> >
> > You can even get it very efficiently with TermEnum if you
> > don't want to search for it, but searching would also be very
> > fast. Put, say, two fields in the doc. "field_version" and "value".
> > Always set the *field* field_version to the string "version". Now,
> > search
> > for field_version:version, get the one and only resulting doc
> > and get it's value field.
> >
> > Best
> > Erick
> >
> > On 9/25/07, John Wang <john.wang@gmail.com> wrote:
> > >
> > > Hi:
> > >
> > >    Is there a way to added custom signature data to a lucene index,
> > e.gdata
> > > version etc?
> > >
> > > Thanks
> > >
> > > -John
> > >
> >
>
>

------=_Part_4651_28786088.1190764512429--

From java-user-return-30420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 01:36:11 2007
Return-Path: <java-user-return-30420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6901 invoked from network); 26 Sep 2007 01:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 01:36:09 -0000
Received: (qmail 76743 invoked by uid 500); 26 Sep 2007 01:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76715 invoked by uid 500); 26 Sep 2007 01:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76704 invoked by uid 99); 26 Sep 2007 01:35:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Sep 2007 18:35:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 01:35:54 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2208726fkz
        for <java-user@lucene.apache.org>; Tue, 25 Sep 2007 18:35:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qzhM2hSwRquTECUg4uvQ9YJr3USdqKBiIxe6GpalnZs=;
        b=IKBAjKopSBNWKbBHbMP3Nr3ndIHajpuYyNDcTt3b9RpW9F/oj6+aeBluDR2+SRPQO8BxBqXpQkZ8KtAoYKHCEUMyiWaTKYR/UYLdUJUOSgr5LxLUDCCubE8HhjQZmJg+WhFK3bES9Ed2bCOhYI6y6E3PpXNnBkCBD85lCYc6Avw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j8QwG5Nufban0e1yPTIh6lKx1Ee/xd4gmmgjhEXLxhtidTnQdufgavOiQO3QH+3ME4B9V6rtLOt3gM2W3w95ihK6tWZGmgIob1ITHjIDxTo5Yt7w2L37ul4j7A2VBrr/vVC5AoZYOBAIj99RAv8IG3VZ9Ifq13aDhJSxXGK8lBM=
Received: by 10.82.190.2 with SMTP id n2mr153618buf.1190770532032;
        Tue, 25 Sep 2007 18:35:32 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 25 Sep 2007 18:35:31 -0700 (PDT)
Message-ID: <359a92830709251835p52440eb2jc8d67c1f0bc466b1@mail.gmail.com>
Date: Tue, 25 Sep 2007 21:35:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: user index sigature
In-Reply-To: <8837fb770709251655w627b5cffm235a60320167083@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2671_23070632.1190770532021"
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
	 <359a92830709251638u5b07e73eg1883b1bf27576db4@mail.gmail.com>
	 <8837fb770709251651n2200258ev471d0d47e99581f3@mail.gmail.com>
	 <8837fb770709251655w627b5cffm235a60320167083@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2671_23070632.1190770532021
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Haven't got a clue. And I can't have a clue since the answer would be
different if each doc had one field or 100 <G>. About the only
thing I can think of is to try it and measure...


What is the use case where you'll be opening this index just to find
its version? Could you just do that once at program startup and persist
the version information for the duration of the program?

Best
Erick



On 9/25/07, John Wang <john.wang@gmail.com> wrote:
>
> what do you think about the overhead of opening the IndexReader just to
> find
> out the version?
> e.g. if you have a large index, say 10M docs, just opening it to find out
> the version, how big is the overhead?
>
> -John
>
> On 9/25/07, John Wang <john.wang@gmail.com> wrote:
> >
> > cool, thanks!
> >
> > On 9/25/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Sure, just index a *very special* document with one field that is
> > > shared by no other documents in your index. Put your
> > > custom signature in there.
> > >
> > > You can even get it very efficiently with TermEnum if you
> > > don't want to search for it, but searching would also be very
> > > fast. Put, say, two fields in the doc. "field_version" and "value".
> > > Always set the *field* field_version to the string "version". Now,
> > > search
> > > for field_version:version, get the one and only resulting doc
> > > and get it's value field.
> > >
> > > Best
> > > Erick
> > >
> > > On 9/25/07, John Wang <john.wang@gmail.com> wrote:
> > > >
> > > > Hi:
> > > >
> > > >    Is there a way to added custom signature data to a lucene index,
> > > e.gdata
> > > > version etc?
> > > >
> > > > Thanks
> > > >
> > > > -John
> > > >
> > >
> >
> >
>

------=_Part_2671_23070632.1190770532021--

From java-user-return-30421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 08:48:54 2007
Return-Path: <java-user-return-30421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47577 invoked from network); 26 Sep 2007 08:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 08:48:53 -0000
Received: (qmail 67393 invoked by uid 500); 26 Sep 2007 08:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67359 invoked by uid 500); 26 Sep 2007 08:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67348 invoked by uid 99); 26 Sep 2007 08:48:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 01:48:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 08:50:54 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.155])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1IaSW9-0005Tw-DD
	for java-user@lucene.apache.org; Wed, 26 Sep 2007 09:45:17 +0100
Message-ID: <46FA1CD1.7040503@propylon.com>
Date: Wed, 26 Sep 2007 09:48:17 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Wildcard vs Term query
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,

I'm working my way through the Lucene In Action book, and there is one 
thing I need explained that I didn't find there;

While wildcard queries are potentially slower than ordinary term 
queries, are they slower even if theyt don't contain a wildcard? 
Significantly slower?

The reason I ask is that if we assume we are going to allow wildcards in 
a search engine, but we want to optimize, to take advantage of  when 
they are NOT used, do we have to check for the presence of "*" or "?" in 
the term, and create the most appropriate query, or can I assume that 
when a wildcard is not present, the WildcardQuery will be as fast (or 
almost as fast) a a plain term query?

Thanks in advance!
John B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 09:22:31 2007
Return-Path: <java-user-return-30422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57170 invoked from network); 26 Sep 2007 09:22:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 09:22:30 -0000
Received: (qmail 4686 invoked by uid 500); 26 Sep 2007 09:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4657 invoked by uid 500); 26 Sep 2007 09:22:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4646 invoked by uid 99); 26 Sep 2007 09:22:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 02:22:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Sep 2007 09:24:32 +0000
Received: (qmail 48508 invoked by uid 60001); 26 Sep 2007 09:21:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hQbOJy37W/I3wz9kIO+iB8aTHDPNPbyaL2PeZ+WgBAj25AV5UMMeQ1OmJJmJkstdcEKFdo4sjpcg23P294bfrUckBr7EJR5fZSo6NIVwyHfhCrZx51Zlb+64QxMwo53xfehJ0+VXWD6u0QTtejCWQhisnkJWkFeDcBHroymjtvA=;
X-YMail-OSG: e.d0T4wVM1ntO2xXcp3VKmymW4ACQdbtVJnOks5a4IKvhrbKE2l2eSGpOH2zQyi2O7PmLIpQJreUiGfkK43Xh1NMHvwdaDQPE6EUq.MXyJbiZct91B0AEfdarho-
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Wed, 26 Sep 2007 09:21:53 GMT
X-Mailer: YahooMailRC/651.50 YahooMailWebService/0.7.134
Date: Wed, 26 Sep 2007 09:21:53 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Wildcard vs Term query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <870466.47683.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using the out of the box Lucene QueryParser?  It will automatically=
 detect wildcard queries by the presence of * or ? chars.=0AIf the user inp=
ut does not contain these characters a plain TermQuery is used.=0A=0ABoolea=
nQuery.setMaxClauseCount can be used to control the upper limit on terms pr=
oduced by Wildcard/Fuzzy Queries.=0AIf this limit is exceeded (e.g when sea=
rching for something like "a*" ) then an exception is thrown.=0A=0ACheers=
=0AMark=0A----- Original Message ----=0AFrom: John Byrne <john.byrne@propyl=
on.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, 26 September, =
2007 9:48:17 AM=0ASubject: Wildcard vs Term query=0A=0AHi,=0A=0AI'm working=
 my way through the Lucene In Action book, and there is one =0Athing I need=
 explained that I didn't find there;=0A=0AWhile wildcard queries are potent=
ially slower than ordinary term =0Aqueries, are they slower even if theyt d=
on't contain a wildcard? =0ASignificantly slower?=0A=0AThe reason I ask is =
that if we assume we are going to allow wildcards in =0Aa search engine, bu=
t we want to optimize, to take advantage of  when =0Athey are NOT used, do =
we have to check for the presence of "*" or "?" in =0Athe term, and create =
the most appropriate query, or can I assume that =0Awhen a wildcard is not =
present, the WildcardQuery will be as fast (or =0Aalmost as fast) a a plain=
 term query?=0A=0AThanks in advance!=0AJohn B.=0A=0A-----------------------=
----------------------------------------------=0ATo unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      __________________=
_________________________________________=0AYahoo! Answers - Got a question=
? Someone out there knows the answer. Try it=0Anow.=0Ahttp://uk.answers.yah=
oo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 09:45:53 2007
Return-Path: <java-user-return-30423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69018 invoked from network); 26 Sep 2007 09:45:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 09:45:52 -0000
Received: (qmail 27067 invoked by uid 500); 26 Sep 2007 09:45:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27039 invoked by uid 500); 26 Sep 2007 09:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27027 invoked by uid 99); 26 Sep 2007 09:45:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 02:45:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 09:47:54 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.155])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1IaTPK-0007DD-L3
	for java-user@lucene.apache.org; Wed, 26 Sep 2007 10:42:19 +0100
Message-ID: <46FA2A2C.30804@propylon.com>
Date: Wed, 26 Sep 2007 10:45:16 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
References: <870466.47683.qm@web26013.mail.ukl.yahoo.com>
In-Reply-To: <870466.47683.qm@web26013.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: Wildcard vs Term query
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

I'm not using the QueryParser at all. I need to do a little more with 
the terms, so i'm explicitly creating a Query from a single term. What I 
was hoping was to avoid something like this:
...
if(term.contains("*") || terms.contains("?")   {
    return new WildcardQuery(...
}
else   {
return new TermQuery(...
...

and instead just go like this:
...
return new WilcardQuery(...
...
on the basis that the WildacardQuery would only be slower if it does 
contain a wildcard character. But as you pointed out, the QueryParser 
makes this optimization, so I suppose I should too.

mark harwood wrote:
> Are you using the out of the box Lucene QueryParser?  It will automatically detect wildcard queries by the presence of * or ? chars.
> If the user input does not contain these characters a plain TermQuery is used.
>
> BooleanQuery.setMaxClauseCount can be used to control the upper limit on terms produced by Wildcard/Fuzzy Queries.
> If this limit is exceeded (e.g when searching for something like "a*" ) then an exception is thrown.
>
> Cheers
> Mark
> ----- Original Message ----
> From: John Byrne <john.byrne@propylon.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 26 September, 2007 9:48:17 AM
> Subject: Wildcard vs Term query
>
> Hi,
>
> I'm working my way through the Lucene In Action book, and there is one 
> thing I need explained that I didn't find there;
>
> While wildcard queries are potentially slower than ordinary term 
> queries, are they slower even if theyt don't contain a wildcard? 
> Significantly slower?
>
> The reason I ask is that if we assume we are going to allow wildcards in 
> a search engine, but we want to optimize, to take advantage of  when 
> they are NOT used, do we have to check for the presence of "*" or "?" in 
> the term, and create the most appropriate query, or can I assume that 
> when a wildcard is not present, the WildcardQuery will be as fast (or 
> almost as fast) a a plain term query?
>
> Thanks in advance!
> John B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
> now.
> http://uk.answers.yahoo.com/ 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 10:03:37 2007
Return-Path: <java-user-return-30424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80851 invoked from network); 26 Sep 2007 10:03:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 10:03:36 -0000
Received: (qmail 52657 invoked by uid 500); 26 Sep 2007 10:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52622 invoked by uid 500); 26 Sep 2007 10:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52611 invoked by uid 99); 26 Sep 2007 10:03:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 03:03:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 10:05:36 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C01AE30EFC16; Wed, 26 Sep 2007 04:02:56 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-210-212.dyn.embarqhsd.net [71.53.210.212])
	by ehatchersolutions.com (Postfix) with ESMTP id 3143B30EFC16
	for <java-user@lucene.apache.org>; Wed, 26 Sep 2007 04:02:43 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46FA2A2C.30804@propylon.com>
References: <870466.47683.qm@web26013.mail.ukl.yahoo.com> <46FA2A2C.30804@propylon.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <312B3661-8640-41B6-80B4-B5AA4173BFF9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcard vs Term query
Date: Wed, 26 Sep 2007 06:02:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

WildcardQuery won't be slower than TermQuery if there are no wildcard  
characters.  Beyond what QueryParser does, WildcardQuery itself  
reverts to a TermQuery:

   public Query rewrite(IndexReader reader) throws IOException {
       if (this.termContainsWildcard) {
           return super.rewrite(reader);
       }

       return new TermQuery(getTerm());
   }

I personally would optimize which query gets created, but performance- 
wise you won't pay a penalty for just using WildcardQuery.

	Erik


On Sep 26, 2007, at 5:45 AM, John Byrne wrote:

> I'm not using the QueryParser at all. I need to do a little more  
> with the terms, so i'm explicitly creating a Query from a single  
> term. What I was hoping was to avoid something like this:
> ...
> if(term.contains("*") || terms.contains("?")   {
>    return new WildcardQuery(...
> }
> else   {
> return new TermQuery(...
> ...
>
> and instead just go like this:
> ...
> return new WilcardQuery(...
> ...
> on the basis that the WildacardQuery would only be slower if it  
> does contain a wildcard character. But as you pointed out, the  
> QueryParser makes this optimization, so I suppose I should too.
>
> mark harwood wrote:
>> Are you using the out of the box Lucene QueryParser?  It will  
>> automatically detect wildcard queries by the presence of * or ?  
>> chars.
>> If the user input does not contain these characters a plain  
>> TermQuery is used.
>>
>> BooleanQuery.setMaxClauseCount can be used to control the upper  
>> limit on terms produced by Wildcard/Fuzzy Queries.
>> If this limit is exceeded (e.g when searching for something like  
>> "a*" ) then an exception is thrown.
>>
>> Cheers
>> Mark
>> ----- Original Message ----
>> From: John Byrne <john.byrne@propylon.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, 26 September, 2007 9:48:17 AM
>> Subject: Wildcard vs Term query
>>
>> Hi,
>>
>> I'm working my way through the Lucene In Action book, and there is  
>> one thing I need explained that I didn't find there;
>>
>> While wildcard queries are potentially slower than ordinary term  
>> queries, are they slower even if theyt don't contain a wildcard?  
>> Significantly slower?
>>
>> The reason I ask is that if we assume we are going to allow  
>> wildcards in a search engine, but we want to optimize, to take  
>> advantage of  when they are NOT used, do we have to check for the  
>> presence of "*" or "?" in the term, and create the most  
>> appropriate query, or can I assume that when a wildcard is not  
>> present, the WildcardQuery will be as fast (or almost as fast) a a  
>> plain term query?
>>
>> Thanks in advance!
>> John B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>>       ___________________________________________________________
>> Yahoo! Answers - Got a question? Someone out there knows the  
>> answer. Try it
>> now.
>> http://uk.answers.yahoo.com/
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 12:22:19 2007
Return-Path: <java-user-return-30425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44268 invoked from network); 26 Sep 2007 12:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 12:22:18 -0000
Received: (qmail 56976 invoked by uid 500); 26 Sep 2007 12:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56948 invoked by uid 500); 26 Sep 2007 12:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56937 invoked by uid 99); 26 Sep 2007 12:22:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 05:22:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 12:24:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id E24D316364E
	for <java-user@lucene.apache.org>; Wed, 26 Sep 2007 05:21:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <407EF451-7E25-4691-B0BC-EF89C26FBEAD@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: user index sigature
Date: Wed, 26 Sep 2007 08:21:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Would IndexReader:
/**
    * Reads version number from segments files. The version number is
    * initialized with a timestamp and then increased by one for each  
change of
    * the index.
    *
    * @param directory where the index resides.
    * @return version number.
    * @throws CorruptIndexException if the index is corrupt
    * @throws IOException if there is a low-level IO error
    */
   public static long getCurrentVersion(Directory directory) throws  
CorruptIndexException, IOException {

do what you are looking for?  Also, why does it have to be in the  
index if you are concerned about loading the whole IndexReader?  That  
is, if your application is versioning the application, why not just  
store it in the same location or something like that?

-Grant

On Sep 25, 2007, at 6:51 PM, John Wang wrote:

> Hi:
>
>    Is there a way to added custom signature data to a lucene index,  
> e.g data
> version etc?
>
> Thanks
>
> -John

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 13:41:45 2007
Return-Path: <java-user-return-30426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75339 invoked from network); 26 Sep 2007 13:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 13:41:44 -0000
Received: (qmail 96493 invoked by uid 500); 26 Sep 2007 13:41:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96273 invoked by uid 500); 26 Sep 2007 13:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96262 invoked by uid 99); 26 Sep 2007 13:41:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 06:41:26 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [192.54.144.135] (HELO thsmsgxrt12p.thalesgroup.com) (192.54.144.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 13:43:43 +0000
Received: from thsmsgirt23p.corp.thales (unknown [10.33.231.7])
	by thsmsgxrt12p.thalesgroup.com (Postfix) with ESMTP id 9BBEC44215
	for <java-user@lucene.apache.org>; Wed, 26 Sep 2007 15:41:05 +0200 (CEST)
Received: from thsmsgiav11p.corp.thales (10.33.231.31) by thsmsgirt23p.corp.thales (7.2.055.4)
        id 46DA81CB0058B00F for java-user@lucene.apache.org; Wed, 26 Sep 2007 15:41:04 +0200
Received: from (unknown [10.33.231.1]) by thsmsgiav11p.corp.thales with smtp
	 id 641c_1359e4b0_6c36_11dc_8d94_001143d32df6;
	Wed, 26 Sep 2007 13:40:41 +0000
Received: from nodalthc2.clb.tcfr.thales (unknown [10.33.8.66])
	by thsmsgirt11p.corp.thales (Postfix) with ESMTP id 514843C01D
	for <java-user@lucene.apache.org>; Wed, 26 Sep 2007 15:40:55 +0200 (CEST)
Received: by nodalthc2.clb.tcfr.thales with Internet Mail Service (5.5.2653.19)
	id <PJN8637D>; Wed, 26 Sep 2007 15:40:55 +0200
Message-ID: <499B4BE3F4E835419A5AF011607A2302718C1C@nodalmsy.msy.tcfr.thales>
From: nicolas.dessaigne@arisem.com
To: java-user@lucene.apache.org
Subject: [JOB] Full-time opportunity in Paris, France
Date: Wed, 26 Sep 2007 15:40:58 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C80042.DEA4CFE6"
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C80042.DEA4CFE6
Content-Type: text/plain

Arisem is a French ISV delivering best-of-breed text analytics software. We
are using Lucene in our products since 2001 and are in search of a Lucene
expert to complement our R&D team.

 

Required skills:

- Master degree in computer science

- 2+ years of experience in working with Lucene

- Strong design and coding skills in Java on Linux platforms

- Strong desire to work in an environment combining development and research

- Innovation and excellent communication skills

 

Fluency in French is a plus.

Ideal candidates will also have an experience in research and skills in text
mining and NLP. Familiarity with C++, SOLR and Eclipse is also desired.

 

If you are available and interested, please contact me directly at
nicolas.dessaigne_at_arisem.com

 

Nicolas Dessaigne

Chief Technical Officer

ARISEM

 

 


------_=_NextPart_001_01C80042.DEA4CFE6--

From java-user-return-30427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Sep 26 14:50:06 2007
Return-Path: <java-user-return-30427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1264 invoked from network); 26 Sep 2007 14:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Sep 2007 14:50:05 -0000
Received: (qmail 15844 invoked by uid 500); 26 Sep 2007 14:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15572 invoked by uid 500); 26 Sep 2007 14:49:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15561 invoked by uid 99); 26 Sep 2007 14:49:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 07:49:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Sep 2007 14:49:46 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1545818hub
        for <java-user@lucene.apache.org>; Wed, 26 Sep 2007 07:49:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qYLiXeg9bvGggP0GCQGQRXBL0z759r/AwDtgxFSeiJQ=;
        b=UE1dqSe7U7JOS3ZjVFqXHqv+plS6oxUtMHGuvSQnNUDRZrqQSruYVVDVsc9yIk5fYFWeDV4Rb2NOOq1qPs6vUi0fnLxl/ktWXvgmI/a9DLbm48Jjsjs6cQRjymI1Sp+uRMdqLti9wl73tL2mL8J2616on/1pawXjTYuZeI8nblA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lamTc/CWJgLaZppIuF4Mn0jz8+cTTxSF36err3yqoJ1j9hLEOADeA5f+vNv/uTuyBxANOYMTpU2ubuCpsP0LiZItPkzuKEbAEvDmHirlmJ8ZoDTvw3nN+3Q/HhdLxotYhWeKGs8sWgEWXLoUFUrIK6lr5lpahXsw4PwDiXDPcJM=
Received: by 10.67.100.11 with SMTP id c11mr2245829ugm.1190818164116;
        Wed, 26 Sep 2007 07:49:24 -0700 (PDT)
Received: by 10.86.59.11 with HTTP; Wed, 26 Sep 2007 07:49:23 -0700 (PDT)
Message-ID: <8837fb770709260749u32639804p7e5502f41b4676ef@mail.gmail.com>
Date: Wed, 26 Sep 2007 07:49:23 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: user index sigature
In-Reply-To: <407EF451-7E25-4691-B0BC-EF89C26FBEAD@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5851_27167327.1190818163775"
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com>
	 <407EF451-7E25-4691-B0BC-EF89C26FBEAD@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5851_27167327.1190818163775
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have my own versioning system and I use it to keep index in sync with
other parts of the system. Just wanted to know if there is a shortcut to
keep it in the Lucene index and be able to read it by using something
similar to getCurrentVersion.
I guess I will have to store it somewhere outside of the index then.

-John

On 9/26/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Would IndexReader:
> /**
>     * Reads version number from segments files. The version number is
>     * initialized with a timestamp and then increased by one for each
> change of
>     * the index.
>     *
>     * @param directory where the index resides.
>     * @return version number.
>     * @throws CorruptIndexException if the index is corrupt
>     * @throws IOException if there is a low-level IO error
>     */
>    public static long getCurrentVersion(Directory directory) throws
> CorruptIndexException, IOException {
>
> do what you are looking for?  Also, why does it have to be in the
> index if you are concerned about loading the whole IndexReader?  That
> is, if your application is versioning the application, why not just
> store it in the same location or something like that?
>
> -Grant
>
> On Sep 25, 2007, at 6:51 PM, John Wang wrote:
>
> > Hi:
> >
> >    Is there a way to added custom signature data to a lucene index,
> > e.g data
> > version etc?
> >
> > Thanks
> >
> > -John
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5851_27167327.1190818163775--

From java-user-return-30428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 27 18:23:52 2007
Return-Path: <java-user-return-30428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59257 invoked from network); 27 Sep 2007 18:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2007 18:23:50 -0000
Received: (qmail 3080 invoked by uid 500); 27 Sep 2007 18:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3051 invoked by uid 500); 27 Sep 2007 18:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3040 invoked by uid 99); 27 Sep 2007 18:23:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 11:23:32 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 18:23:31 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:62890 helo=[192.168.1.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1Iay0x-0003at-9X
	for java-user@lucene.apache.org; Thu, 27 Sep 2007 20:23:10 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8837fb770709260749u32639804p7e5502f41b4676ef@mail.gmail.com>
References: <8837fb770709251551s1e06411cua83ccb04dc8edea6@mail.gmail.com> <407EF451-7E25-4691-B0BC-EF89C26FBEAD@apache.org> <8837fb770709260749u32639804p7e5502f41b4676ef@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <86A630ED-2EFE-49DF-BC2A-9F2855CA1E4E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: user index sigature
Date: Thu, 27 Sep 2007 20:15:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1Iay0x-0003at-9X.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1Iay0x-0003at-9X 88c012daafe815537dc7b7f6c4854179
X-Virus-Checked: Checked by ClamAV on apache.org

26 sep 2007 kl. 16.49 skrev John Wang:

> I have my own versioning system and I use it to keep index in sync  
> with
> other parts of the system. Just wanted to know if there is a  
> shortcut to
> keep it in the Lucene index and be able to read it by using something
> similar to getCurrentVersion.
> I guess I will have to store it somewhere outside of the index then.

Do you want to store your version information a file within the  
Lucene Directory? Then you are looking for the createOutput(String)  
and readInput(String) methods of Directory:

http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/store/ 
Directory.html#createOutput(java.lang.String)



-- 
karl


>
> -John
>
> On 9/26/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>> Would IndexReader:
>> /**
>>     * Reads version number from segments files. The version number is
>>     * initialized with a timestamp and then increased by one for each
>> change of
>>     * the index.
>>     *
>>     * @param directory where the index resides.
>>     * @return version number.
>>     * @throws CorruptIndexException if the index is corrupt
>>     * @throws IOException if there is a low-level IO error
>>     */
>>    public static long getCurrentVersion(Directory directory) throws
>> CorruptIndexException, IOException {
>>
>> do what you are looking for?  Also, why does it have to be in the
>> index if you are concerned about loading the whole IndexReader?  That
>> is, if your application is versioning the application, why not just
>> store it in the same location or something like that?
>>
>> -Grant
>>
>> On Sep 25, 2007, at 6:51 PM, John Wang wrote:
>>
>>> Hi:
>>>
>>>    Is there a way to added custom signature data to a lucene index,
>>> e.g data
>>> version etc?
>>>
>>> Thanks
>>>
>>> -John
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 27 21:52:01 2007
Return-Path: <java-user-return-30429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47367 invoked from network); 27 Sep 2007 21:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2007 21:52:00 -0000
Received: (qmail 988 invoked by uid 500); 27 Sep 2007 21:51:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 950 invoked by uid 500); 27 Sep 2007 21:51:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 939 invoked by uid 99); 27 Sep 2007 21:51:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 14:51:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 21:54:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ib1GV-0000ZM-NG
	for java-user@lucene.apache.org; Thu, 27 Sep 2007 14:51:23 -0700
Message-ID: <12931010.post@talk.nabble.com>
Date: Thu, 27 Sep 2007 14:51:23 -0700 (PDT)
From: othman <othmanelmoulat@gmail.com>
To: java-user@lucene.apache.org
Subject: store index on web server directory
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: othmanelmoulat@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
I'm developing a search tool for a  web site using lucene.=20
One issue i need you to clarify is where we should store the generated
lucene indexes ?
 lucene provides a file system storage method FSDirectory.so we need to
specify a path like (/usr/lucene on linux) or (c:/lucene on windows).
I=E2=80=99m wondering how we can store the indexes in remote server directo=
ry ?=20
should we specify a url path for index directory ? are URLs valid paths to
create File objects directories ? .

what you think about best way to store indexes to be searched later from a
web page on a given server ?

thanks.
--=20
View this message in context: http://www.nabble.com/store-index-on-web-serv=
er-directory-tf4531280.html#a12931010
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Sep 27 23:14:41 2007
Return-Path: <java-user-return-30430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77074 invoked from network); 27 Sep 2007 23:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Sep 2007 23:14:39 -0000
Received: (qmail 69749 invoked by uid 500); 27 Sep 2007 23:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69720 invoked by uid 500); 27 Sep 2007 23:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69709 invoked by uid 99); 27 Sep 2007 23:14:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 16:14:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 23:14:25 +0000
Received: from [172.30.62.126] (helo=h00215.dev.sfo1.metaweb.com)
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1Ib2YU-0005eV-3t
	for java-user@lucene.apache.org; Thu, 27 Sep 2007 16:14:02 -0700
Received: from localhost (localhost [127.0.0.1])
	by h00215.dev.sfo1.metaweb.com (Postfix) with ESMTP id EC59424CBC3
	for <java-user@lucene.apache.org>; Thu, 27 Sep 2007 19:14:01 -0400 (EDT)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.06
X-Spam-Level: 
Received: from h00215.dev.sfo1.metaweb.com ([127.0.0.1])
	by localhost (h00215.dev.sfo1.metaweb.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id of7GzeQtMscA for <java-user@lucene.apache.org>;
	Thu, 27 Sep 2007 19:14:01 -0400 (EDT)
Received: from h00215.dev.sfo1.metaweb.com (zimbra.metaweb.com [172.30.62.126])
	by h00215.dev.sfo1.metaweb.com (Postfix) with ESMTP id 63F0A1BBAA8
	for <java-user@lucene.apache.org>; Thu, 27 Sep 2007 19:14:01 -0400 (EDT)
Date: Thu, 27 Sep 2007 19:14:01 -0400 (EDT)
From: Tim Sturge <tsturge@metaweb.com>
To: java-user <java-user@lucene.apache.org>
Message-ID: <14311665.181981190934841174.JavaMail.root@h00215>
Subject: Almost parallel indexes
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [172.30.250.101]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.06 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.339, BAYES_00=-2.599]

Hi,

I have an index which contains two very distinct types of fields:

- Some fields are large (many term documents) and change fairly slowly.
- Some fields are small (mostly titles, names, anchor text) and change fairly rapidly.

Right now I keep around the large fields in raw form and when the small fields change, I retokenize the large and the small fields together. The problem is that this retokenization is sucking up most of my CPU time, making the indexing process too slow (this index needs to track changes in almost real time; I'm using one of the reopen() patches from LUCENE-743 in JIRA to achieve this).

I can't really use ParallelReader to keep the indexes the same; it requires me to add documents to both indexes which means I have to retokenize the large fields anyway. I would want to do a "join" on an external id, and as far as I can tell, Lucene doesn't support that.

Alternatively, what I'd like is a way to either store a pre-tokenized version of the large fields, or to be able to add fields to a document that come from an existing document in the index. 

I suspect there is more to this question than meets the eye, but I'd be interested in any strategies that people have used in the past.

Thanks,

Tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 28 00:14:22 2007
Return-Path: <java-user-return-30431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7279 invoked from network); 28 Sep 2007 00:14:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Sep 2007 00:14:22 -0000
Received: (qmail 19092 invoked by uid 500); 28 Sep 2007 00:14:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18705 invoked by uid 500); 28 Sep 2007 00:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18694 invoked by uid 99); 28 Sep 2007 00:14:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Sep 2007 17:14:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 00:14:07 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2885358fkz
        for <java-user@lucene.apache.org>; Thu, 27 Sep 2007 17:13:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=iaRLE1543XzoQg6wLNbMe8lMXN8g+v4QRsqDjd5tTLY=;
        b=jaLfnYYqtA3SuPBkgOkKH7Y9OedrMFXMDN0Rqvsg5DMfAvWNZob8/Yj8liEykWb8jYgl2ACXUV03xffsRO17qPm0PQWD8G3deFNrWsSW3j52FpV7NdNwlO1ByZUmavdrkXFfQpewtH4MdK5M5kXEoDlfWEDzORrI4vqpA5D+2uI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=se/bVVxnltWuVB4jM60ZTjnqZKH+obpTeEQry9WmQIMX+t3EOxKjfOiajKDn95+cpPaG/njWI9UI7oBAdNZKVj2FXZpJT9sG6I1AbTr6cTjoZUnsqfEbOu3qJwgYlyyKhvhZv9cOZKldsUVCkLWjFqsI9I9wuLSGdJ9XCGi9G8I=
Received: by 10.82.158.12 with SMTP id g12mr6082163bue.1190938425050;
        Thu, 27 Sep 2007 17:13:45 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 27 Sep 2007 17:13:45 -0700 (PDT)
Message-ID: <359a92830709271713j6e17b603lda49ef33d0a7def@mail.gmail.com>
Date: Thu, 27 Sep 2007 20:13:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Almost parallel indexes
In-Reply-To: <14311665.181981190934841174.JavaMail.root@h00215>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4451_26193996.1190938425034"
References: <14311665.181981190934841174.JavaMail.root@h00215>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4451_26193996.1190938425034
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, this isn't well thought out, more the first thing that
pops to mind...

You're right, Lucene doesn't do joins. But would it serve
to keep two indexes? One the slow-changing stuff
and one the fast-changing stuff. They are related by
some *external*  (as in "not the Lucene doc id)
field.

You'd have to custom roll something that searched
across both indexes. Depending on your search
semantics this may be hard or easy. It would be
easy if your search were simple, something like
(stuff in the fast-changing index) OR/AND/NOT
(stuff in the slow-changing index). Handling
(some in the fast) AND/OR/NOT (some in the
slow) would be much harder......

The idea is to collect a set of your external doc
IDs, then use TermEnum/TermDocs in each
index to get at the underlying document parts.

Lots depends upon how many hits you expect. 100 is
one thing, 1,000,000 is another.

This, of course, adds a layer of complexity that makes
things harder, but it might be worth a shot.

Disclaimer: I haven't personally done something like this,
so take it for what it's worth.

Best
Erick

On 9/27/07, Tim Sturge <tsturge@metaweb.com> wrote:
>
> Hi,
>
> I have an index which contains two very distinct types of fields:
>
> - Some fields are large (many term documents) and change fairly slowly.
> - Some fields are small (mostly titles, names, anchor text) and change
> fairly rapidly.
>
> Right now I keep around the large fields in raw form and when the small
> fields change, I retokenize the large and the small fields together. The
> problem is that this retokenization is sucking up most of my CPU time,
> making the indexing process too slow (this index needs to track changes in
> almost real time; I'm using one of the reopen() patches from LUCENE-743 in
> JIRA to achieve this).
>
> I can't really use ParallelReader to keep the indexes the same; it
> requires me to add documents to both indexes which means I have to
> retokenize the large fields anyway. I would want to do a "join" on an
> external id, and as far as I can tell, Lucene doesn't support that.
>
> Alternatively, what I'd like is a way to either store a pre-tokenized
> version of the large fields, or to be able to add fields to a document that
> come from an existing document in the index.
>
> I suspect there is more to this question than meets the eye, but I'd be
> interested in any strategies that people have used in the past.
>
> Thanks,
>
> Tim
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4451_26193996.1190938425034--

From java-user-return-30432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 28 13:03:10 2007
Return-Path: <java-user-return-30432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97956 invoked from network); 28 Sep 2007 13:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Sep 2007 13:03:09 -0000
Received: (qmail 22746 invoked by uid 500); 28 Sep 2007 13:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22681 invoked by uid 500); 28 Sep 2007 13:02:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22650 invoked by uid 99); 28 Sep 2007 13:02:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 06:02:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nrodrigues@zedo.com designates 64.41.197.46 as permitted sender)
Received: from [64.41.197.46] (HELO gandalf.zedo.com) (64.41.197.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 13:05:05 +0000
Received: from sfilter.bb.zedo.com (unknown [10.0.0.20])
	by gandalf.zedo.com (ZedoMail) with ESMTP id 76F557EEE0C
	for <java-user@lucene.apache.org>; Fri, 28 Sep 2007 06:02:09 -0700 (PDT)
Received: from nixon (india.gw.juhu.zedo.com [203.129.239.221])
	by sfilter.bb.zedo.com (Postfix) with SMTP id 4A14C298B3D
	for <java-user@lucene.apache.org>; Fri, 28 Sep 2007 06:01:58 -0700 (PDT)
Message-ID: <001b01c801cf$b77734c0$b10110ac@nixon>
Reply-To: "Nixon" <nixon@zedo.com>
From: "Nixon" <nrodrigues@zedo.com>
To: <java-user@lucene.apache.org>
References: <14311665.181981190934841174.JavaMail.root@h00215> <359a92830709271713j6e17b603lda49ef33d0a7def@mail.gmail.com>
Subject: Re: Almost parallel indexes
Date: Fri, 28 Sep 2007 18:31:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-MailScanner: Found to be clean, Found to be clean
X-MailScanner-SpamCheck: not spam (whitelisted), SpamAssassin (not cached,
	score=-1.799, required 2.5, autolearn=not spam, ALL_TRUSTED -1.80,
	BAYES_50 0.00)
X-MailScanner-Envelope-From: nrodrigues@zedo.com
X-MailScanner-From: nrodrigues@zedo.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Guys

I encounter such condition of having two indexes
for one forum related application which had
Topics and its posts which were mapped in db in two different tables in 
relational database.

But i had decided to have one index

like this

topicId , topicName , timestamp , postId , postedcomment , ISTOPICFLAG

ISTOPICFLAG  is set to 1 for topic and 0 for posts duplicating the topic 
data
which was need for UI display

I used query AND ISTOPICFLAG  =1 for only topic and  ISTOPICFLAG  =0
for posts

The application works fine , but frequent updates to index is slower it.

Regards

Nixon


----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, September 28, 2007 5:43 AM
Subject: Re: Almost parallel indexes


> OK, this isn't well thought out, more the first thing that
> pops to mind...
>
> You're right, Lucene doesn't do joins. But would it serve
> to keep two indexes? One the slow-changing stuff
> and one the fast-changing stuff. They are related by
> some *external*  (as in "not the Lucene doc id)
> field.
>
> You'd have to custom roll something that searched
> across both indexes. Depending on your search
> semantics this may be hard or easy. It would be
> easy if your search were simple, something like
> (stuff in the fast-changing index) OR/AND/NOT
> (stuff in the slow-changing index). Handling
> (some in the fast) AND/OR/NOT (some in the
> slow) would be much harder......
>
> The idea is to collect a set of your external doc
> IDs, then use TermEnum/TermDocs in each
> index to get at the underlying document parts.
>
> Lots depends upon how many hits you expect. 100 is
> one thing, 1,000,000 is another.
>
> This, of course, adds a layer of complexity that makes
> things harder, but it might be worth a shot.
>
> Disclaimer: I haven't personally done something like this,
> so take it for what it's worth.
>
> Best
> Erick
>
> On 9/27/07, Tim Sturge <tsturge@metaweb.com> wrote:
>>
>> Hi,
>>
>> I have an index which contains two very distinct types of fields:
>>
>> - Some fields are large (many term documents) and change fairly slowly.
>> - Some fields are small (mostly titles, names, anchor text) and change
>> fairly rapidly.
>>
>> Right now I keep around the large fields in raw form and when the small
>> fields change, I retokenize the large and the small fields together. The
>> problem is that this retokenization is sucking up most of my CPU time,
>> making the indexing process too slow (this index needs to track changes 
>> in
>> almost real time; I'm using one of the reopen() patches from LUCENE-743 
>> in
>> JIRA to achieve this).
>>
>> I can't really use ParallelReader to keep the indexes the same; it
>> requires me to add documents to both indexes which means I have to
>> retokenize the large fields anyway. I would want to do a "join" on an
>> external id, and as far as I can tell, Lucene doesn't support that.
>>
>> Alternatively, what I'd like is a way to either store a pre-tokenized
>> version of the large fields, or to be able to add fields to a document 
>> that
>> come from an existing document in the index.
>>
>> I suspect there is more to this question than meets the eye, but I'd be
>> interested in any strategies that people have used in the past.
>>
>> Thanks,
>>
>> Tim
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> -- 
>
> 



-- 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Sep 28 13:25:03 2007
Return-Path: <java-user-return-30433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10373 invoked from network); 28 Sep 2007 13:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Sep 2007 13:25:02 -0000
Received: (qmail 62501 invoked by uid 500); 28 Sep 2007 13:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62199 invoked by uid 500); 28 Sep 2007 13:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62188 invoked by uid 99); 28 Sep 2007 13:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 06:24:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 13:24:43 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3866276wah
        for <java-user@lucene.apache.org>; Fri, 28 Sep 2007 06:24:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=LtEmm4Qo4kNb7/no7LdXG/ALVrxqikJulU4eH8NhsMU=;
        b=DRzyKsb861q3YiMBOsShJHcXvr5cN0O1qAlVRvUJwqcrkVXTh30Hl/LxcKctBkTmLPyogvu+9AXo/OEy7SYV21rA5QZxM8M1RvC9W0Lez11s9pOXOBBXDWC2yygFA/KTbkQ5tosFHl4SUy30XU/KPKYwl8YC4zratcYczpbfUo8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pf4Un6463t+lG6U9PR/zTubDTc8q4F/rTIhUJDhV0c4PdbLlguIDdQTZm9ilO6l5Jo+Lt+i4RQO6+2b1hKzKqPF+PAOFwyah5NYn5Zk9WQgLV3vqzotGkHxMKIe+5eC5h2t/OwaucHFkUZDQiS+pNgRX4aTlm8K+SZoKzIATrAk=
Received: by 10.115.94.1 with SMTP id w1mr66156wal.1190985863187;
        Fri, 28 Sep 2007 06:24:23 -0700 (PDT)
Received: by 10.140.143.6 with HTTP; Fri, 28 Sep 2007 06:24:23 -0700 (PDT)
Message-ID: <bf1404350709280624j1378df4av2e6dd116ee2e977@mail.gmail.com>
Date: Fri, 28 Sep 2007 09:24:23 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org, gsingers@apache.org
Subject: Re: How to change the similarity function of lucene
In-Reply-To: <99474E09-D334-4D4C-AE3E-B9C01E3FAC31@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_460_11164462.1190985863189"
References: <bf1404350709241424g241091c1je638cae8a8f2096c@mail.gmail.com>
	 <99474E09-D334-4D4C-AE3E-B9C01E3FAC31@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_460_11164462.1190985863189
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Sorry the delay.
But, what I want to do is to change the terms weigth, I don=B4t want that
terms weight be the frecuency the term appear in the document intead of tha=
t
I want it to be another special measure and with that change the similarity
function.
I don=B4t know how to change the terms weight in the term vector in a
document, How can I do it ?

Greetings
Ariel

On 9/24/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Perhaps you can explain in what way you want to make it more
> powerful?  There are possibilities to do:
> 1. Change the Similarity class (a call back mechanism)
> 2. Implement or extend Queries, Scorers, etc.
> 3. Others???
>
> See http://lucene.apache.org/java/docs/scoring.html for some insights.
>
> In other words, it can be as complex as you want it to be...
>
> -Grant
>
> On Sep 24, 2007, at 5:24 PM, Ariel wrote:
>
> > Hi every body:
> >
> >    I would like to know how to change the similarity function of
> > lucene to
> > extends the posibilities of searching and make it more powefull. Have
> > somebody made this before ?
> > Could you help me please ? I don't know how complex might be this.
> >
> > I hope you can help me.
> > Greetings
> > Ariel
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_460_11164462.1190985863189--

From java-user-return-30434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 29 01:08:28 2007
Return-Path: <java-user-return-30434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8296 invoked from network); 29 Sep 2007 01:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2007 01:08:27 -0000
Received: (qmail 14177 invoked by uid 500); 29 Sep 2007 01:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14138 invoked by uid 500); 29 Sep 2007 01:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14125 invoked by uid 99); 29 Sep 2007 01:08:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Sep 2007 18:08:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 01:10:37 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 021FF71C19E; Fri, 28 Sep 2007 18:07:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F37BE71C19D
	for <java-user@lucene.apache.org>; Fri, 28 Sep 2007 18:07:49 -0700 (PDT)
Date: Fri, 28 Sep 2007 18:07:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user <java-user@lucene.apache.org>
Subject: Re: Almost parallel indexes
In-Reply-To: <14311665.181981190934841174.JavaMail.root@h00215>
Message-ID: <Pine.LNX.4.62.0709281801440.27905@radix.cryptio.net>
References: <14311665.181981190934841174.JavaMail.root@h00215>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I can't really use ParallelReader to keep the indexes the same; it 
: requires me to add documents to both indexes which means I have to 
: retokenize the large fields anyway. I would want to do a "join" on an 
: external id, and as far as I can tell, Lucene doesn't support that.

correction: it requires that the documents be added/deleted in the same 
order.  you can have a static index containing your large tokenized fields 
which you don't change and just rebuild your second index containing hte 
small fields from scratch -- as long as you add those documents in the 
same order that they appear in the first index.

if you search for past discussions of ParallelReader someone (i forget 
who) uses them a lot, and goes into this in greater detail)


: Alternatively, what I'd like is a way to either store a pre-tokenized 
: version of the large fields, or to be able to add fields to a document 
: that come from an existing document in the index.

i believe that's semi-possible with the trunk code.  you can construct a 
Field instance using a TokenStream, so if you store a 
representation of your TokenStream (instead of the orriginal raw text) you 
can reindex it without doing a full Analysis phase.

(probably only worth while if your Analyzer does a lot of complex stuff 
... if it just splits on whitespace and lowercases you probably won't get 
much faster then that reading whatever serialization techniquee you use 
for hte TokenStream)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 29 07:13:38 2007
Return-Path: <java-user-return-30435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92104 invoked from network); 29 Sep 2007 07:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2007 07:13:37 -0000
Received: (qmail 68889 invoked by uid 500); 29 Sep 2007 07:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68853 invoked by uid 500); 29 Sep 2007 07:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68842 invoked by uid 99); 29 Sep 2007 07:13:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 00:13:21 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 07:15:47 +0000
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l8T7CxvV007336
	for <java-user@lucene.apache.org>; Sat, 29 Sep 2007 03:12:59 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l8T7CffQ028175
	for <java-user@lucene.apache.org>; Sat, 29 Sep 2007 03:12:57 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX60B.corp.emc.com ([10.254.64.37]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sat, 29 Sep 2007 03:12:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: store index on web server directory
Date: Sat, 29 Sep 2007 03:12:47 -0400
Message-ID: <DC061CD2AFA7774FB904EEB43D98CB3A015CF093@CORPUSMX60B.corp.emc.com>
In-Reply-To: <12931010.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: store index on web server directory
Thread-Index: AcgBUKQePxF+XGEeS4SH1Wg2zTgKXABFzG0Q
References: <12931010.post@talk.nabble.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Sep 2007 07:12:44.0801 (UTC) FILETIME=[21DC7710:01C80268]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=0%, Reason='EMC_BODY_PROD_1+ -3, EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Q2FuIHlvdSBtYXAgdGhlIHJlbW90ZSBmaWxlIHN5c3RlbSBpbiB3aW5kb3cgb3IgbW91bnQgaW4g
TGludXg/IEx1Y2VuZSByZWx5IG9uIHRoZSBPUyBsZXZlbCBmaWxlIHN5c3RlbSBhY2Nlc3MuDQpI
YXMgYW55b25lIHRyeSB0byBzdG9yZSB0aGUgaW5kZXggZmlsZSBpbiBhIE5BUy9TQU4/IEhvdyBp
cyB0aGUgcGVyZm9ybWFuY2U/DQoNClJlZ2FyZHMsDQpMaQ0KDQoNCi0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQpGcm9tOiBvdGhtYW4gW21haWx0bzpvdGhtYW5lbG1vdWxhdEBnbWFpbC5jb21d
IA0KU2VudDogVGh1cnNkYXksIFNlcHRlbWJlciAyNywgMjAwNyAyOjUxIFBNDQpUbzogamF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBzdG9yZSBpbmRleCBvbiB3ZWIgc2VydmVy
IGRpcmVjdG9yeQ0KDQoNCkhpIGFsbCwNCkknbSBkZXZlbG9waW5nIGEgc2VhcmNoIHRvb2wgZm9y
IGEgIHdlYiBzaXRlIHVzaW5nIGx1Y2VuZS4gDQpPbmUgaXNzdWUgaSBuZWVkIHlvdSB0byBjbGFy
aWZ5IGlzIHdoZXJlIHdlIHNob3VsZCBzdG9yZSB0aGUgZ2VuZXJhdGVkDQpsdWNlbmUgaW5kZXhl
cyA/DQogbHVjZW5lIHByb3ZpZGVzIGEgZmlsZSBzeXN0ZW0gc3RvcmFnZSBtZXRob2QgRlNEaXJl
Y3Rvcnkuc28gd2UgbmVlZCB0bw0Kc3BlY2lmeSBhIHBhdGggbGlrZSAoL3Vzci9sdWNlbmUgb24g
bGludXgpIG9yIChjOi9sdWNlbmUgb24gd2luZG93cykuDQpJ4oCZbSB3b25kZXJpbmcgaG93IHdl
IGNhbiBzdG9yZSB0aGUgaW5kZXhlcyBpbiByZW1vdGUgc2VydmVyIGRpcmVjdG9yeSA/IA0Kc2hv
dWxkIHdlIHNwZWNpZnkgYSB1cmwgcGF0aCBmb3IgaW5kZXggZGlyZWN0b3J5ID8gYXJlIFVSTHMg
dmFsaWQgcGF0aHMgdG8NCmNyZWF0ZSBGaWxlIG9iamVjdHMgZGlyZWN0b3JpZXMgPyAuDQoNCndo
YXQgeW91IHRoaW5rIGFib3V0IGJlc3Qgd2F5IHRvIHN0b3JlIGluZGV4ZXMgdG8gYmUgc2VhcmNo
ZWQgbGF0ZXIgZnJvbSBhDQp3ZWIgcGFnZSBvbiBhIGdpdmVuIHNlcnZlciA/DQoNCnRoYW5rcy4N
Ci0tIA0KVmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDogaHR0cDovL3d3dy5uYWJibGUuY29t
L3N0b3JlLWluZGV4LW9uLXdlYi1zZXJ2ZXItZGlyZWN0b3J5LXRmNDUzMTI4MC5odG1sI2ExMjkz
MTAxMA0KU2VudCBmcm9tIHRoZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNo
aXZlIGF0IE5hYmJsZS5jb20uDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoN
Cg0K


From java-user-return-30436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 29 21:34:10 2007
Return-Path: <java-user-return-30436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77260 invoked from network); 29 Sep 2007 21:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Sep 2007 21:34:10 -0000
Received: (qmail 14395 invoked by uid 500); 29 Sep 2007 21:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14362 invoked by uid 500); 29 Sep 2007 21:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14350 invoked by uid 99); 29 Sep 2007 21:33:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 14:33:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tuli.m.gaurav@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 21:33:54 +0000
Received: by nz-out-0506.google.com with SMTP id i28so2004123nzi
        for <java-user@lucene.apache.org>; Sat, 29 Sep 2007 14:33:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1ZxAuVeOtdlvPtoUgXCTXwP7E6jc2LJ35PGHDpZ4aq8=;
        b=Q+Ll9GE2ecypAOHiR5fAVqQjCK6SZ6OZPqrpCwnA/YckzZYJjcaHxlO96Gj3Z9quGheW5jBGsZkmqX699ss27P9P6/RqjZaO9GR/T2CjHbeDCe6aHbl9UBPaRP76j/RDaHcpPTadwJs3LinEpDfAegc/BbV8x2V9U6oh3sFjOdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P96O+1Gvdb4TFdAArQYlZ7zZSfJHOXiTEruPfedt3bqo89S39s7zkOjRCL0jUfOp9A2iYBmCMDk4Q/Q/25u52NEREU/3Aw5V8ZUWCoJjOprRtCjL780fSDpyIXZ+Trf7zS3Y4X1RrmHRVWN0CcTq5UJh7artVzlQy2r7eVDwoA8=
Received: by 10.64.243.10 with SMTP id q10mr11094732qbh.1191101612341;
        Sat, 29 Sep 2007 14:33:32 -0700 (PDT)
Received: by 10.142.226.18 with HTTP; Sat, 29 Sep 2007 14:33:32 -0700 (PDT)
Message-ID: <143b45ee0709291433y1799eb01k9a4ebababfb5bfc2@mail.gmail.com>
Date: Sat, 29 Sep 2007 17:33:32 -0400
From: "Gaurav Tuli" <tuli.m.gaurav@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: store index on web server directory
In-Reply-To: <12931010.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2516_31949156.1191101612207"
References: <12931010.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2516_31949156.1191101612207
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I think index folder can be created  anywhere in private resource in a given
web app.

When we want to interact with a remote index there should be an interface
and its

implementation to interact with this remote index.

If we want to interact wit  linux through window we use tools like
putty.Programatically

we should be able to use some package.We can also make use of JNI may be a
solution

lies over there.







On 9/27/07, othman <othmanelmoulat@gmail.com> wrote:
>
>
> Hi all,
> I'm developing a search tool for a  web site using lucene.
> One issue i need you to clarify is where we should store the generated
> lucene indexes ?
> lucene provides a file system storage method FSDirectory.so we need to
> specify a path like (/usr/lucene on linux) or (c:/lucene on windows).
> I'm wondering how we can store the indexes in remote server directory ?
> should we specify a url path for index directory ? are URLs valid paths to
> create File objects directories ? .
>
> what you think about best way to store indexes to be searched later from a
> web page on a given server ?
>
> thanks.
> --
> View this message in context:
> http://www.nabble.com/store-index-on-web-server-directory-tf4531280.html#a12931010
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2516_31949156.1191101612207--

From java-user-return-30437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 05:05:07 2007
Return-Path: <java-user-return-30437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77492 invoked from network); 30 Sep 2007 05:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 05:05:06 -0000
Received: (qmail 29211 invoked by uid 500); 30 Sep 2007 05:04:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29177 invoked by uid 500); 30 Sep 2007 05:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29166 invoked by uid 99); 30 Sep 2007 05:04:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Sep 2007 22:04:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kenwudi@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 05:04:50 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3590513fkz
        for <java-user@lucene.apache.org>; Sat, 29 Sep 2007 22:04:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        bh=uKgQJ388n3Jde4z1wHxw81lU8kh/aL4YPsswjKDUSFA=;
        b=mP5Q5esTqzFhF8wh3BzD8qt5jmHNpv5Z7uIHTHRHGc2Rd/evn4Q5GjKfwXBBrTodlFu1ukx9BoMOXw+MuG0r+RtNszbGVETHySgyHFPopLmleaBcbxk/+42o51rvJ//VSz4CxWQZ13gQTK2nZTnQz1GfRmzbZer2OVDq+uckmIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=OLiHr1KkFkgr53TvitKxhS/WW6aDdidqM6zSG/kzns81K1ChEpSdouXT99mOL+v0mkDXF8h4DYgVujZbC+R+hlrGnCEOL73YmTGRHzVge41iPFpGoB+U55494ocxMpLm4gwxwLD8R6gt/ld1Cul8mw+CFAXUTYGcv/qhU0kiOVM=
Received: by 10.82.111.8 with SMTP id j8mr752886buc.1191128669102;
        Sat, 29 Sep 2007 22:04:29 -0700 (PDT)
Received: by 10.82.146.5 with HTTP; Sat, 29 Sep 2007 22:04:29 -0700 (PDT)
Message-ID: <1e3745680709292204l17b4d610wd3ff455c927c879d@mail.gmail.com>
Date: Sun, 30 Sep 2007 13:04:29 +0800
From: "=?GB2312?B?zuK1zw==?=" <kenwudi@gmail.com>
Reply-To: admin@5dinfo.net
To: java-user@lucene.apache.org
Subject: cannot determine sort type
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6004_153552.1191128669096"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6004_153552.1191128669096
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

what is the problem when casing "no terms in field dateTime - cannot
determine sort type" exception?  after i see this exception, Luke can not
open this index, maybe the index file was broken,so is there any method to
repair the index?

-- 
www.5dinfo.net

------=_Part_6004_153552.1191128669096--

From java-user-return-30438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 07:21:36 2007
Return-Path: <java-user-return-30438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14183 invoked from network); 30 Sep 2007 07:21:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 07:21:34 -0000
Received: (qmail 59755 invoked by uid 500); 30 Sep 2007 07:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59720 invoked by uid 500); 30 Sep 2007 07:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59709 invoked by uid 99); 30 Sep 2007 07:21:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 00:21:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 07:21:19 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2438544wxd
        for <java-user@lucene.apache.org>; Sun, 30 Sep 2007 00:20:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=dbojEXixadX5XBImNIPEiMdPhRsfIh/N55814bVv5/g=;
        b=ABI28FZSap2MA9wwHfqjStSWn5fvkYVvj9m6R4J8W9zk91a1Tq5tqNfl7NyM9Xzn2UYdDGUbqEjguzL/oAtgGO3t0Tyhh28wGY4fArKkk5/gwpOoIyZ+C2nFHBHa+ei/T4VMo/FdbffEzeAVIdH9WhHcTgbmPuBAtstMBQC7J38=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mnbNltsLPwgZQK+CWNNwptoQ6Jt9opUe4cL/2NkeHVtRTSZcAlMBEa6nnjvDBfbHZxcjUC/L94qBlXcnIy5CJPChNjx8ruricj6rkApMd8WeyTbNAN5deipz4IrbO+bh8QOKpEFwZUkobs/Zm/TuCC3fX6cd0LJhGDwxJCc2CGc=
Received: by 10.90.93.6 with SMTP id q6mr343677agb.1191136857039;
        Sun, 30 Sep 2007 00:20:57 -0700 (PDT)
Received: by 10.90.117.15 with HTTP; Sun, 30 Sep 2007 00:20:56 -0700 (PDT)
Message-ID: <34b8543c0709300020l5097cdcbq5c121a1ba77d3942@mail.gmail.com>
Date: Sun, 30 Sep 2007 10:50:56 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a query for a special AND?
In-Reply-To: <200709200946.02329.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6652_8128021.1191136857026"
References: <34b8543c0709170240u66a657b9r21d3d4547585d8d3@mail.gmail.com>
	 <200709200905.43602.paul.elschot@xs4all.nl>
	 <34b8543c0709200019l127ae45y9d437f510e4f6c9b@mail.gmail.com>
	 <200709200946.02329.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6652_8128021.1191136857026
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Paul,
thanks, I dot your idea, now I am planing to implement this,
"de-normalization", now I just need your suggestion on this issue and tell
me which one is the best

I am considering to put a Field as follows:
my_de_normalized_field
service_name : service_value

if there are more than one service and value then I need to separate with a
character such as comma

service_name1:value1 , service_name2: value2,....

apart from that, each value might be a range value say, 10 - 20 or a single
value say, -2

do you have any suggestion on this?

thank you very much

On 9/20/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Thursday 20 September 2007 09:19, Mohammad Norouzi wrote:
> > well, you mean we should separate documents just like relational tables
> in
> > databases ?
>
> Quite the contrary, it's called _de_normalization. This means that the
> documents in lucene normally contain more information than is present
> in a single relational entity.
>
> > if yes, how to make the relationship between those documents
>
> Lucene has no facilities to maintain relational relationships among
> its documents. A lucene index allows free format documents, i.e.
> any document may have any field or not.
> In practice you will need at least a primary key, but even that you will
> need to program yourself.
>
> Regards,
> Paul Elschot
>
>
>
> >
> > thank you so much Paul
> >
> > On 9/20/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >
> > > On Thursday 20 September 2007 07:29, Mohammad Norouzi wrote:
> > > > Sorry Paul I just hurried in replying ;)
> > > > I read the documents of Lucene about query syntax and I figured out
> the
> > > what
> > > > is the difference
> > > > but my problem is different, this is preoccupied my mind and I am
> under
> > > > pressure to solve this problem, after analyzing the results I get,
> now I
> > > > think we need a "group by" in our query.
> > > >
> > > > let me tell you an example: we need a list of patients that have
> been
> > > > examined by certain services specified by the user , say service one
> and
> > > > service two.
> > > >
> > > > in this case here is the correct result:
> > > > patient-id              service_name               patient_result
> > > > 1                             s1                                12
> > > > 1                             s2                                13
> > > > 2                             s1                                  41
>
> > > > 2                             s2                                22
> > > >
> > > > but for example, following is incorrect because patient 1 has no
> service
> > > > with name service2:
> > > > patient-id              service_name               patient_result
> > > > 1                             s1                                12
> > > > 1                             s3                                13
> > >
> > > That depends on what you put in your lucene documents.
> > > You can only get complete lucene documents as query results.
> > > For the above example a patient with all service names
> > > should be indexed in a single lucene doc.
> > >
> > > The rows above suggest that the relation between patient and
> > > service forms the relational result. However, for a text search
> > > engine it is usual to denormalize the relational records into
> > > indexed documents, depending on the required output.
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > >
> > > >
> > > >
> > > >
> > > > On 9/20/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > > > >
> > > > > Hi Paul,
> > > > > would you tell me what is the difference between AND and + ?
> > > > > I tried both but get different result
> > > > > with AND I get 1777 documents and with + I get nearly 25000 ?
> > > > >
> > > > >
> > > > > On 9/17/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > > >
> > > > > > On Monday 17 September 2007 11:40, Mohammad Norouzi wrote:
> > > > > > > Hi
> > > > > > > I have a problem in getting correct result from Lucene,
> consider
> > > we
> > > > > > have an
> > > > > > > index containing documents with fields "field1" and "field2"
> etc.
> > > now
> > > > > > I want
> > > > > > > to have documents in which their field1 are equal one by one
> and
> > > their
> > > > > > > field2 with two different value
> > > > > > >
> > > > > > > to clarify consider I have this query:
> > > > > > > field1:val*  (field2:"myValue1" XOR field2:"myValue2")
> > > > > >
> > > > > > Did you try this:
> > > > > >
> > > > > > +field1:val*  +field2:"myValue1" +field2:"myValue2"
> > > > > >
> > > > > > Regards,
> > > > > > Paul Elschot
> > > > > >
> > > > > >
> > > > > > >
> > > > > > > now I want this result:
> > > > > > > field1              field2
> > > > > > > val1                myValue1
> > > > > > > val1                myValue2
> > > > > > > val2                myValue1
> > > > > > > val2                myValue2
> > > > > > >
> > > > > > > this result is not acceptable:
> > > > > > > val3              myValue1
> > > > > > > or
> > > > > > > val4             myValue1
> > > > > > > val4             myValue3
> > > > > > >
> > > > > > > I put XOR as operator because this is not a typical OR, it's
> > > > > > different, it
> > > > > > > means documents that contains both myValue1 and myValue2 for
> the
> > > field
> > > > > >
> > > > > > > field2
> > > > > > >
> > > > > > > how to build a query to get such result?
> > > > > > >
> > > > > > > thanks in advance
> > > > > > > --
> > > > > > > Regards,
> > > > > > > Mohammad
> > > > > > > --------------------------
> > > > > > > see my blog: http://brainable.blogspot.com/
> > > > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > > > > Sun Certified Java Programmer
> > > > > > > ExpertsExchange Certified, Master:
> > > > > > > http://www.experts-exchange.com/M_1938796.html
> > > > > > >
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > > --------------------------
> > > > > see my blog: http://brainable.blogspot.com/
> > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > > Sun Certified Java Programmer
> > > > > ExpertsExchange Certified, Master:
> > > http://www.experts-exchange.com/M_1938796.html
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > Sun Certified Java Programmer
> > > > ExpertsExchange Certified, Master:
> > > > http://www.experts-exchange.com/M_1938796.html
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> > Sun Certified Java Programmer
> > ExpertsExchange Certified, Master:
> > http://www.experts-exchange.com/M_1938796.html
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/
Sun Certified Java Programmer
ExpertsExchange Certified, Master:
http://www.experts-exchange.com/M_1938796.html

------=_Part_6652_8128021.1191136857026--

From java-user-return-30439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 16:38:03 2007
Return-Path: <java-user-return-30439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30042 invoked from network); 30 Sep 2007 16:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 16:38:02 -0000
Received: (qmail 86063 invoked by uid 500); 30 Sep 2007 16:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86025 invoked by uid 500); 30 Sep 2007 16:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85981 invoked by uid 99); 30 Sep 2007 16:37:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 09:37:46 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_DOB,RCVD_IN_DOB,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 16:37:44 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 261C121128
	for <java-user@lucene.apache.org>; Sun, 30 Sep 2007 09:36:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1e3745680709292204l17b4d610wd3ff455c927c879d@mail.gmail.com>
References: <1e3745680709292204l17b4d610wd3ff455c927c879d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <24305D1E-283A-4ED6-969C-E96EF9413E0A@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: cannot determine sort type
Date: Sun, 30 Sep 2007 12:36:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post the exception and what you were doing?

On Sep 30, 2007, at 1:04 AM, =E5=90=B4=E8=BF=AA wrote:

> what is the problem when casing "no terms in field dateTime - cannot
> determine sort type" exception?  after i see this exception, Luke =20
> can not
> open this index, maybe the index file was broken,so is there any =20
> method to
> repair the index?
>
> --=20
> www.5dinfo.net

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 22:48:50 2007
Return-Path: <java-user-return-30440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49694 invoked from network); 30 Sep 2007 22:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 22:48:49 -0000
Received: (qmail 88176 invoked by uid 500); 30 Sep 2007 22:48:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88139 invoked by uid 500); 30 Sep 2007 22:48:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88128 invoked by uid 99); 30 Sep 2007 22:48:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 15:48:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 22:48:32 +0000
Subject: RE: Escaping special characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Sun, 30 Sep 2007 23:47:47 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AAF44@SBS2003.2LSHQ.local>
In-Reply-To: <359a92830709231014j33c7f2eauc3a85cfac79b98a5@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Escaping special characters
thread-index: Acf+BQjlvu/BlyTGTJS26zdIBCNzLwFrhS8g
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

In case this is of help to others:

Crux of problem:=20
I wanted numbers and characters such as # and + to be considered.

Solution:
implement a LowercaseWhitespaceAnalyzer and a
LowercaseWhitespaceTokenizer.

Tom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Diagnostics:

StandardAnalyzer=20
----------------
Enter Querystring: (C++ AND C#)      Searching for: +c +c
Enter Querystring: (C\+\+ AND C\#)   Searching for: +c +c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" "sharepoint 2007") asp.net

SimpleAnalyser
--------------
Enter Querystring: C++ Searching for: c
Enter Querystring: C#  Searching for: c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss or sharepoint) and "asp net"

WhitespaceAnalyzer
------------------
Enter Querystring: (C++ AND C#)  Searching for: +C++ +C#
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" or "sharepoint 2007") and asp.net

KeywordAnalyzer
---------------
Enter Querystring: (C++ AND C#) Searching for: +C++ +C#
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss 2007 or sharepoint 2007) and asp.net

StopAnalyzer
------------
Enter Querystring: (C\++ AND C\#)  Searching for: +c +c
Enter Querystring: ("MOSS 2007" or "SHAREPOINT 2007") and "ASP.NET"
Searching for: (moss sharepoint) "asp net"
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 22:56:07 2007
Return-Path: <java-user-return-30441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51241 invoked from network); 30 Sep 2007 22:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 22:56:06 -0000
Received: (qmail 92787 invoked by uid 500); 30 Sep 2007 22:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92746 invoked by uid 500); 30 Sep 2007 22:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92735 invoked by uid 99); 30 Sep 2007 22:55:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 15:55:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.41.57.100] (HELO 2ls.com) (217.41.57.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 22:55:49 +0000
Subject: Poor performance -  2/3 ORs
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Sun, 30 Sep 2007 23:55:27 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <562BCF4FF1D14343BC81378BA0050AD90AAF45@SBS2003.2LSHQ.local>
In-Reply-To: <562BCF4FF1D14343BC81378BA0050AD90AAF44@SBS2003.2LSHQ.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Poor performance -  2/3 ORs
thread-index: Acf+BQjlvu/BlyTGTJS26zdIBCNzLwFrhS8gAABdxCA=
From: "Tom Conlon" <tomc@2ls.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Don't get me wrong - I think lucene is great.

However, the first site I am using it with has 15k docs and the
performance for ORs seem longer than I'd expect.=20

Any tips to improve this?=20

Thanks,
Tom=20

-----Original Message-----
From: Tom Conlon [mailto:tomc@2ls.com]=20
Sent: 30 September 2007 23:48
To: java-user@lucene.apache.org
Subject: RE: Escaping special characters

Hi,

In case this is of help to others:

Crux of problem:=20
I wanted numbers and characters such as # and + to be considered.

Solution:
implement a LowercaseWhitespaceAnalyzer and a
LowercaseWhitespaceTokenizer.

Tom
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Diagnostics:

StandardAnalyzer
----------------
Enter Querystring: (C++ AND C#)      Searching for: +c +c
Enter Querystring: (C\+\+ AND C\#)   Searching for: +c +c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" "sharepoint 2007") asp.net

SimpleAnalyser
--------------
Enter Querystring: C++ Searching for: c
Enter Querystring: C#  Searching for: c
Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss or sharepoint) and "asp net"

WhitespaceAnalyzer
------------------
Enter Querystring: (C++ AND C#)  Searching for: +C++ +C# Enter
Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: ("moss 2007" or "sharepoint 2007") and asp.net

KeywordAnalyzer
---------------
Enter Querystring: (C++ AND C#) Searching for: +C++ +C# Enter
Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
Searching for: (moss 2007 or sharepoint 2007) and asp.net

StopAnalyzer
------------
Enter Querystring: (C\++ AND C\#)  Searching for: +c +c Enter
Querystring: ("MOSS 2007" or "SHAREPOINT 2007") and "ASP.NET"
Searching for: (moss sharepoint) "asp net"
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Sep 30 23:30:28 2007
Return-Path: <java-user-return-30442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64648 invoked from network); 30 Sep 2007 23:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Sep 2007 23:30:27 -0000
Received: (qmail 15039 invoked by uid 500); 30 Sep 2007 23:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15005 invoked by uid 500); 30 Sep 2007 23:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14994 invoked by uid 99); 30 Sep 2007 23:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 16:30:12 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_DOB,RCVD_IN_DOB,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Sep 2007 23:30:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id AE56711176
	for <java-user@lucene.apache.org>; Sun, 30 Sep 2007 16:29:21 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <562BCF4FF1D14343BC81378BA0050AD90AAF45@SBS2003.2LSHQ.local>
References: <562BCF4FF1D14343BC81378BA0050AD90AAF45@SBS2003.2LSHQ.local>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6B6231AE-7A2B-4A00-A0C9-8CC27B79D059@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Poor performance -  2/3 ORs
Date: Sun, 30 Sep 2007 19:29:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ

On Sep 30, 2007, at 6:55 PM, Tom Conlon wrote:

> Hi,
>
> Don't get me wrong - I think lucene is great.
>
> However, the first site I am using it with has 15k docs and the
> performance for ORs seem longer than I'd expect.
>
> Any tips to improve this?
>
> Thanks,
> Tom
>
> -----Original Message-----
> From: Tom Conlon [mailto:tomc@2ls.com]
> Sent: 30 September 2007 23:48
> To: java-user@lucene.apache.org
> Subject: RE: Escaping special characters
>
> Hi,
>
> In case this is of help to others:
>
> Crux of problem:
> I wanted numbers and characters such as # and + to be considered.
>
> Solution:
> implement a LowercaseWhitespaceAnalyzer and a
> LowercaseWhitespaceTokenizer.
>
> Tom
> ====================================================================== 
> =
> Diagnostics:
>
> StandardAnalyzer
> ----------------
> Enter Querystring: (C++ AND C#)      Searching for: +c +c
> Enter Querystring: (C\+\+ AND C\#)   Searching for: +c +c
> Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
> Searching for: ("moss 2007" "sharepoint 2007") asp.net
>
> SimpleAnalyser
> --------------
> Enter Querystring: C++ Searching for: c
> Enter Querystring: C#  Searching for: c
> Enter Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
> Searching for: (moss or sharepoint) and "asp net"
>
> WhitespaceAnalyzer
> ------------------
> Enter Querystring: (C++ AND C#)  Searching for: +C++ +C# Enter
> Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
> Searching for: ("moss 2007" or "sharepoint 2007") and asp.net
>
> KeywordAnalyzer
> ---------------
> Enter Querystring: (C++ AND C#) Searching for: +C++ +C# Enter
> Querystring: ("moss 2007" or "sharepoint 2007") and "asp.net"
> Searching for: (moss 2007 or sharepoint 2007) and asp.net
>
> StopAnalyzer
> ------------
> Enter Querystring: (C\++ AND C\#)  Searching for: +c +c Enter
> Querystring: ("MOSS 2007" or "SHAREPOINT 2007") and "ASP.NET"
> Searching for: (moss sharepoint) "asp net"
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


