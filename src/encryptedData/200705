From java-user-return-27837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 07:32:04 2007
Return-Path: <java-user-return-27837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25298 invoked from network); 1 May 2007 07:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 07:32:02 -0000
Received: (qmail 10501 invoked by uid 500); 1 May 2007 07:32:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9897 invoked by uid 500); 1 May 2007 07:32:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9886 invoked by uid 99); 1 May 2007 07:32:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 00:32:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 00:31:53 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id l417VVlV077528
	for <java-user@lucene.apache.org>; Tue, 1 May 2007 09:31:31 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to index a lot of fields (without FileNotFoundException: Too many open files)
Date: Tue, 1 May 2007 09:31:31 +0200
User-Agent: KMail/1.8.2
References: <359a92830704300552o1007bfe4q72038283f7fe8061@mail.gmail.com> <3d2ce8cb0704301508ldf0b39bve46a82cb3763eb2@mail.gmail.com> <20070430222220.157910@gmx.net>
In-Reply-To: <20070430222220.157910@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705010931.31073.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 May 2007 00:22, pbm-rico@gmx.net wrote:
> I thought about using ulimit, but it does not scale. In the scenario that 
the app has to support, client applications could create hundreds of 
thousands of unique properties, which would result in this many indexable 
fields.
> 
> Based on previous answers, the way out of this problem while still being 
scalable would be to use 2.1 where there is only 1 norm file.
> 
> However, it does not look like upgrading is an option, so I wonder if my 
current approach of mapping a property that a client app creates to one field 
name is workable at all. Maybe I have to introduce some sort of mapping of 
client properties to a fixed number of indexable fields.
> 
> ...or modify the 1.4.3 code myself to get rid of norm files.

Do you need the idf computations of lucene for each of these client fields
separately?
When not, another way is to move the names of the client fields into the
term value, and use a single special field for these.
When you do that, you'll also have to move the client field names
in the queries from the field name to the term. This can easily be done by 
overriding one of the methods in QueryParser.

Regards,
Paul Elschot


> 
> -Rico
> 
> -------- Original-Nachricht --------
> Datum: Mon, 30 Apr 2007 15:08:14 -0700
> Von: "Mike Klaas" <mike.klaas@gmail.com>
> An: java-user@lucene.apache.org
> Betreff: Re: Re: How to index a lot of fields (without 
FileNotFoundException: Too many open files)
> 
> > On 4/30/07, pbm-rico@gmx.net <pbm-rico@gmx.net> wrote:
> > > Thanks for you reply.
> > >
> > > We are still using Lucene v1.4.3 and I'm not sure if upgrading is an
> > option. Is there another way of disabling length normalization/document 
boosts
> > to get rid of those files?
> > 
> > Why not raise the limit of open files on your system?  (man ulimit)
> > 
> > -Mike
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> -- 
> "Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
> Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 20:12:36 2007
Return-Path: <java-user-return-27838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44335 invoked from network); 1 May 2007 20:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 20:12:35 -0000
Received: (qmail 66052 invoked by uid 500); 1 May 2007 20:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65287 invoked by uid 500); 1 May 2007 20:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65276 invoked by uid 99); 1 May 2007 20:12:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:12:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:12:26 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hiyhh-0007sh-NX
	for java-user@lucene.apache.org; Tue, 01 May 2007 13:12:05 -0700
Message-ID: <10275148.post@talk.nabble.com>
Date: Tue, 1 May 2007 13:12:05 -0700 (PDT)
From: larry hughes <typhoon_larry@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene indexes back up strategies
In-Reply-To: <1177696102.29486.1186947137@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: typhoon_larry@hotmail.com
References: <10221953.post@talk.nabble.com> <1177696102.29486.1186947137@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike,

I decided to go ahead and upgrade to Lucene 2.1.  My regression tests seem
fine.  However, I still don't understand the files of the index you've
described.  

>>You can also remove all now-deleted filenames if you are only interested
in the most recent snapshot.
I'm not sure what these "now-deleted filenames" you are referring to.  I'm
indexing a sample set of 10,000 records for my little unit-test and I don't
see (or know) which files would be considered "deleted".  I only see five
files for my 10k records.  They are:

_cd.cfs
_d1.cfs
clearcache
segments.gen
segments_d3


>>it's possible with the trunk version of Lucene to make a simple index
deletion policy that would allow you to run a backup slowly in the 
background without pausing indexing.
Two questions here.  1) when you mean trunk version, can I safely assume
that it has already been packaged in lucene-2.1.0.tar.gz distributed on
17-Feb-2007?  2)  I don't understand what you mean by "simple index deletion
policy".  I think this is a new feature since I can't find it anywhere in my
Lucene In Action book.  Is there some documentation on this?  Seems like
this deletion policy is the key for making live backups.

Thank you.

LH



Michael McCandless-3 wrote:
> 
> 
> 
> "larry hughes" <typhoon_larry@hotmail.com> wrote:
> 
>> I'm pondering on long term maintenance issues with Lucene indexes
>> and would like to know of anyone's suggestions or recommendations to
>> backing up these indexes.  My goal is to have a weekly, or even
>> daily, snapshot of the current index to make sure it is recoverable
>> if the index gets corrupted.  I won't be able to reindex since my
>> database contains millions of records so reindexing on-the-fly is
>> not an option.  Also the index size is growing fast--already at the
>> 56GB mark--that I'm not even sure creating a snapshot copy is fast
>> enough.  Maybe clustering is better?
> 
> One effective way to backup the index is to copy only the new files.
> Since Lucene is write once (as of 2.1), you only need to back up any
> new file names that have appeared since your last backup.  You can
> also remove all now-deleted filenames if you are only interested in
> the most recent snapshot.
> 
> Normally you must pause indexing to do this backup (since filenames
> are changing and/or being deleted) but it's possible with the trunk
> version of Lucene to make a simple index deletion policy that would
> allow you to run a backup slowly in the background without pausing
> indexing.
> 
> Basically this deletion policy would "keep alive" the one commit point
> that was current when you started your backup, so even as the index is
> changing, all segment files referenced by that commit point would not
> be deleted; then your backup would copy the files referenced by that
> commit point.  Once the backup completes then you would allow that
> commit point to be deleted.
> 
> This would allow you to do "live" backups (backup while indexing is
> still happening).
> 
> Mike
> -- 
>   Michael McCandless
>   mail@mikemccandless.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/lucene-indexes-back-up-strategies-tf3658495.html#a10275148
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 20:25:05 2007
Return-Path: <java-user-return-27839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48340 invoked from network); 1 May 2007 20:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 20:25:04 -0000
Received: (qmail 86134 invoked by uid 500); 1 May 2007 20:25:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86096 invoked by uid 500); 1 May 2007 20:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86085 invoked by uid 99); 1 May 2007 20:25:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:25:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:24:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6AAA15B796; Tue,  1 May 2007 13:24:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 669737F403
	for <java-user@lucene.apache.org>; Tue,  1 May 2007 13:24:36 -0700 (PDT)
Date: Tue, 1 May 2007 13:24:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Modifying norms...
In-Reply-To: <10263146.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0705011321240.10939@hal.rescomp.berkeley.edu>
References: <10259327.post@talk.nabble.com> <Pine.LNX.4.58.0704301253240.17834@hal.rescomp.berkeley.edu>
 <10262494.post@talk.nabble.com> <Pine.LNX.4.58.0704301641120.29101@hal.rescomp.berkeley.edu>
 <10263146.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Essentially what I am trying to do is boost every document by a certain
: factor, so that
: the boost is between 1.0 and 2.0. After this, I we are trying to do a search
: across multiple fields
: and have a computation based purely on tf. Example -

it sounds like you are trying to place too much stock in the precise score
values you get back from a query.  if it's really important to you i
would suggest playing with the boost values you use and your tf/idf
functions so they work with the current boost/norm encoding instead of
tyring to change how the norms are encoded.  that way you won't have to
worry baout havking the static encoding funcs in Similarity.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 20:54:54 2007
Return-Path: <java-user-return-27840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58780 invoked from network); 1 May 2007 20:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 20:54:52 -0000
Received: (qmail 39833 invoked by uid 500); 1 May 2007 20:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39786 invoked by uid 500); 1 May 2007 20:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39775 invoked by uid 99); 1 May 2007 20:54:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:54:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 13:54:44 -0700
Received: from [10.200.1.12] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 790311DB133
	for <java-user@lucene.apache.org>; Tue,  1 May 2007 13:54:23 -0700 (PDT)
Message-ID: <4637A8FF.6050705@affinitycircles.com>
Date: Tue, 01 May 2007 13:54:23 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: filter caching
References: <46311B9E.6000500@affinitycircles.com> <Pine.LNX.4.58.0704271700070.32376@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0704271700070.32376@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If the Chained filter works off of the cached QueryFilters, then that is 
great and I don't mind not caching the ChainedFilter and doing the work 
to combine those bit vectors (assuming that is what it is doing).  I 
want to build up a set of small QueryFilters and that can be cached and 
be combined in any order (using the ChainedFilter operations) while 
still making use of caching.  If ChainedFilter does this (or doesn't), 
it would be nice to have it mentioned in the API docs.

Les

Chris Hostetter wrote:

>: I have a question about filter caching.  I have a lot of QueryFilters
>: that I use when searching that filter on a single field.  Sometimes
>: alone I use them by themselves, but mostly I use them in some
>: combination using ChainedFilter.  Does the caching take advantage of
>: only the final filter that used in the query, or would a ChainedFilter
>: (say 'A and B and C') make use of the cached versions of the single
>: field QueryFilters A,B and C and just combine their bitsets?
>
>the individual QueryFilter's cache themselves, if you want a ChainedFilter
>composed of those QueryFilter's to be cached you should wrap it in a
>CachingWrapperFilter.
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 01 21:15:13 2007
Return-Path: <java-user-return-27841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66701 invoked from network); 1 May 2007 21:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 May 2007 21:15:10 -0000
Received: (qmail 78151 invoked by uid 500); 1 May 2007 21:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78028 invoked by uid 500); 1 May 2007 21:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78013 invoked by uid 99); 1 May 2007 21:15:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 14:15:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 May 2007 14:15:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5060D5B797; Tue,  1 May 2007 14:14:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 49CF17F403
	for <java-user@lucene.apache.org>; Tue,  1 May 2007 14:14:42 -0700 (PDT)
Date: Tue, 1 May 2007 14:14:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: filter caching
In-Reply-To: <4637A8FF.6050705@affinitycircles.com>
Message-ID: <Pine.LNX.4.58.0705011410240.10939@hal.rescomp.berkeley.edu>
References: <46311B9E.6000500@affinitycircles.com>
 <Pine.LNX.4.58.0704271700070.32376@hal.rescomp.berkeley.edu>
 <4637A8FF.6050705@affinitycircles.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: want to build up a set of small QueryFilters and that can be cached and
: be combined in any order (using the ChainedFilter operations) while
: still making use of caching.  If ChainedFilter does this (or doesn't),
: it would be nice to have it mentioned in the API docs.

what you are asking for seems to be that we document that ChainedFilter
doesn't cache ... that seems odd.  there are lots of classes that don't do
lots of things (because they only do one thing) we don't enumarte all of
thethings they *don't* do unless there is some reason people would assume
otherwise and we want to correct their assumption.

* QueryFilter is documented to wrap a Query so that it can be used as a
  Filter, and cache that Filter.
* ChainedFilter is documented as a way to combine other filters

ChainedFilter doesn't care if the fitlers it combines are cached or not,
and QueryFilter doesn't care if it gets put into a ChainedFilter --
neither of those things affects the behavior of hte otherone ... so i'm
notreally sure i understand what it is you think should be added to the
API docs.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 07:06:09 2007
Return-Path: <java-user-return-27842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20287 invoked from network); 2 May 2007 07:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 07:06:07 -0000
Received: (qmail 45903 invoked by uid 500); 2 May 2007 07:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45878 invoked by uid 500); 2 May 2007 07:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45867 invoked by uid 99); 2 May 2007 07:06:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 00:06:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.244.24.66] (HELO mail.actia.fr) (213.244.24.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 00:05:58 -0700
Received: (qmail 8991 invoked by uid 83); 2 May 2007 07:05:36 -0000
Received: from 172.24.247.53 by mail.int.actia.fr (envelope-from <axel.reymonet@actia.fr>, uid 81) with qmail-scanner-1.24 
 (clamdscan: 0.85.1/899. spamassassin: 3.0.1.  
 Clear:RC:1(172.24.247.53):. 
 Processed in 0.106911 secs); 02 May 2007 07:05:36 -0000
Received: from unknown (HELO POSTE811) (172.24.247.53)
  by mail.int.actia.fr with SMTP; 2 May 2007 07:05:35 -0000
From: "axel.reymonet" <axel.reymonet@actia.fr>
To: "Lucene ML" <java-user@lucene.apache.org>
Subject: java-user-unsubscribe@lucene.apache.org
Date: Wed, 2 May 2007 09:05:35 +0200
Message-ID: <CCEBKGICMIOFNJJPELELOEKLCAAA.axel.reymonet@actia.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0009_01C78C99.0BC6C790"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0009_01C78C99.0BC6C790
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Unsubscribe
------=_NextPart_000_0009_01C78C99.0BC6C790--


From java-user-return-27843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 09:23:04 2007
Return-Path: <java-user-return-27843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70585 invoked from network); 2 May 2007 09:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 09:23:02 -0000
Received: (qmail 49344 invoked by uid 500); 2 May 2007 09:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49313 invoked by uid 500); 2 May 2007 09:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49302 invoked by uid 99); 2 May 2007 09:23:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 02:23:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chrislin0426@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 02:22:54 -0700
Received: by nz-out-0506.google.com with SMTP id i1so65101nzh
        for <java-user@lucene.apache.org>; Wed, 02 May 2007 02:22:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JYJv8Faht+wMZoPOJTp+0dLCib3lcnGgOx6hQ0y1PSbHa+aVmP3SsJd3mq3MF0wU6X2WF4j31DkhSS7P0rt6kPFKq6iKgh55hesNyIJGQZ7OH9ng9IXH0P85oGo58VGDF3p2ViK2yXUD0W0aHGhr7sXC30QFCIRWR8wHsFWdFNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=piw4EW1JWfDGNVYo1zOVNhwHz9cSMFgJe94GY0zRpaL/NWrv8py5/moaHfY4vPPmzum32j/HQ/hrw6F3e58318CpZ26NWcJROIYXJis1a9nCrhujRYC7ScHUyxWnqaVEYC/Vt+y6n1GYA4aZHER2O0Fa7uhJ/nGu4gOTNSrZQ3w=
Received: by 10.114.89.1 with SMTP id m1mr131937wab.1178097752721;
        Wed, 02 May 2007 02:22:32 -0700 (PDT)
Received: by 10.114.103.14 with HTTP; Wed, 2 May 2007 02:22:27 -0700 (PDT)
Message-ID: <89762a530705020222r3246e4cbneea1b7199fb4304e@mail.gmail.com>
Date: Wed, 2 May 2007 17:22:27 +0800
From: Chris <chrislin0426@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch indexing
In-Reply-To: <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
	 <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry , ask a question.
You say FSDirectory is RADdirectory as least until it flushes.

I cannot understand your means . May you please teach me what it means?

FSDirectory stored in filesystem  , and RADdirectory stored in RAM.
MergeFactor and MaxBufferedDocs  settings are limited and controlled
the max docs and size with the tempory Indexing action?

If I am fault , tell me , please . Thank you.

=============================
Chris Lin
http://search20.portal20.com.tw
chrislin@pchome.com.tw
Taipei , Taiwan.
-----------------------------------------------------------


2007/4/29, Erick Erickson <erickerickson@gmail.com>:
> As I understand it, FSDirectory *is* RAMdirectory, at least until
> it flushes. There have been several discussions of this,
> search the mail archive for things like MergeFactor, MaxBufferedDocs
> and the like. You'll find quite a bit of information about how these
> parameters interact.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 12:41:29 2007
Return-Path: <java-user-return-27844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46138 invoked from network); 2 May 2007 12:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 12:41:28 -0000
Received: (qmail 72598 invoked by uid 500); 2 May 2007 12:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71729 invoked by uid 500); 2 May 2007 12:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71718 invoked by uid 99); 2 May 2007 12:41:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 05:41:26 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 05:41:19 -0700
Received: by mu-out-0910.google.com with SMTP id i10so126928mue
        for <java-user@lucene.apache.org>; Wed, 02 May 2007 05:40:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O7T4wHuzI8YinP2eh2BiSf2a3FZcgisOuKHWiTrseWg6FlgPWMcW4xH6GpWYU3QiogYuaSyDxpQVoDGPWYTeCEdti9dK5oNI2OOXs2XOBSC1TlrcD4IUElTpEopxS86fn6IFgZ4gK+ZmUhNep8/ZiPsRjuieltUlA2pLoOkakmg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ggxu8CMnSJXAxrWx9j7dfLJZYUWObqCibxvbzr8KXd/5tNGtOt/hJZ9dk9YnQFjgn83XdyXHojrl9idIxRx5hm9vSSSHfYkcAReY6yZaD3F5jFI++jeJrsOnK9hLk5cPC+jLRI23kvplxm3P8ks/id9Aik1h+RclHYLAYQvjpug=
Received: by 10.82.147.6 with SMTP id u6mr1359981bud.1178109657948;
        Wed, 02 May 2007 05:40:57 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 2 May 2007 05:40:57 -0700 (PDT)
Message-ID: <359a92830705020540n49d998c4y25c20bd24db967c8@mail.gmail.com>
Date: Wed, 2 May 2007 08:40:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch indexing
In-Reply-To: <89762a530705020222r3246e4cbneea1b7199fb4304e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2266_6663011.1178109657894"
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
	 <359a92830704290621k55ffb5cfi48876602e35a4957@mail.gmail.com>
	 <89762a530705020222r3246e4cbneea1b7199fb4304e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2266_6663011.1178109657894
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

For some intermediate period of time when indexing, the document are
buffered in RAM. There is a complex interplay between several of the
parameters to an IndexWriter that govern how many documents are
indexed in RAM before being flushed to the FSDirectory.

Of course, if you specify a RAMdirectory, it's never written to disk.
But if you specify an FSDirectory, as you write the index some
number of documents are indexed in RAM, then flushed to
disk.

Search the archives and particularly look at the thread titled for
more detailed information.....

"MergeFactor and MaxBufferedDocs value should ...?"


Best
Erick

On 5/2/07, Chris <chrislin0426@gmail.com> wrote:
>
> Sorry , ask a question.
> You say FSDirectory is RADdirectory as least until it flushes.
>
> I cannot understand your means . May you please teach me what it means?
>
> FSDirectory stored in filesystem  , and RADdirectory stored in RAM.
> MergeFactor and MaxBufferedDocs  settings are limited and controlled
> the max docs and size with the tempory Indexing action?
>
> If I am fault , tell me , please . Thank you.
>
> =============================
> Chris Lin
> http://search20.portal20.com.tw
> chrislin@pchome.com.tw
> Taipei , Taiwan.
> -----------------------------------------------------------
>
>
> 2007/4/29, Erick Erickson <erickerickson@gmail.com>:
> > As I understand it, FSDirectory *is* RAMdirectory, at least until
> > it flushes. There have been several discussions of this,
> > search the mail archive for things like MergeFactor, MaxBufferedDocs
> > and the like. You'll find quite a bit of information about how these
> > parameters interact.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2266_6663011.1178109657894--

From java-user-return-27845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 12:53:47 2007
Return-Path: <java-user-return-27845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50960 invoked from network); 2 May 2007 12:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 12:53:46 -0000
Received: (qmail 96943 invoked by uid 500); 2 May 2007 12:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96903 invoked by uid 500); 2 May 2007 12:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96892 invoked by uid 99); 2 May 2007 12:53:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 05:53:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 05:53:36 -0700
Received: by wx-out-0506.google.com with SMTP id i29so131051wxd
        for <java-user@lucene.apache.org>; Wed, 02 May 2007 05:53:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=M+Eznva6qgCXwvEVElW3giQgcz6PlRYzEIu+1xlhB4JSJ2FZ5yx81KwzLBmakXEINbBLlQkVo1vq5OgrIZ39qopuF8AXezp9xw1RcgZr4voCSiXwki9kZjO+IyUPm1Ygr17kAFUKU5cKgHi9R2HS3qjrHDKGygV3TCL99Uopg/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MQC1nKx13mMilz7bpfaIlc7PVImdos+YD/f/kW6yG4OYsrwGZfCszuH+Nj179fcNZ0/m4RbtxmxlNTLhRpPS7pZ+OzimJ/btAlPv045oAheepErDGDguWWSAt4S08Pj6gbctIndz1/SLz0DTK+2s97xg/7hHpvHhWGVpLkOVY8w=
Received: by 10.90.69.8 with SMTP id r8mr255019aga.1178110393496;
        Wed, 02 May 2007 05:53:13 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id l48sm846115wrl.2007.05.02.05.53.12;
        Wed, 02 May 2007 05:53:12 -0700 (PDT)
Message-ID: <46388994.1000603@gmail.com>
Date: Wed, 02 May 2007 08:52:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction
References: <363661.83409.qm@web26009.mail.ukl.yahoo.com>
In-Reply-To: <363661.83409.qm@web26009.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 From what I know you generally have to pay if you want something that 
does this really well. Or check out http://www.nzdl.org/Kea/
Unfortunately, the license is GPL. Really too bad; now that it is all 
Java, it would make a great combo with Lucene.

- Mark

mark harwood wrote:
> I believe the code Otis is referring to is here: http://issues.apache.org/jira/browse/LUCENE-474
>
> This is index-level analysis but could be adapted to work for just a single document.
> The implementation is optimised for speed rather than being a thorough examination of phrase significance. 
>
> Cheers
> Mark
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 30 April, 2007 4:11:36 AM
> Subject: Re: Keyphrase Extraction
>
> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Lucene Consulting - http://lucene-consulting.com/
>
>
> ----- Original Message ----
> From: "av_work@yahoo.com" <av_work@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, April 29, 2007 5:24:17 PM
> Subject: Keyphrase Extraction
>
> Hi,
>
> I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.
>
> I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?
>
> Thanks in advance!
> Av
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
> now.
> http://uk.answers.yahoo.com/ 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 14:30:44 2007
Return-Path: <java-user-return-27846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5063 invoked from network); 2 May 2007 14:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 14:30:43 -0000
Received: (qmail 27721 invoked by uid 500); 2 May 2007 14:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27678 invoked by uid 500); 2 May 2007 14:30:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27667 invoked by uid 99); 2 May 2007 14:30:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 07:30:41 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 07:30:34 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 999C621BD4A
	for <java-user@lucene.apache.org>; Wed,  2 May 2007 10:30:11 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Wed, 02 May 2007 10:30:13 -0400
X-Sasl-enc: gs6uJBnMSs/0hIdrSFKXlBIAueIj9FpbFUKtuL4VrGo8 1178116212
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 9B47A26B81
	for <java-user@lucene.apache.org>; Wed,  2 May 2007 10:30:12 -0400 (EDT)
Message-ID: <4638A074.4000509@fastmail.fm>
Date: Wed, 02 May 2007 15:30:12 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Problem with scoring:is it absolute or relative ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi I am having problems understanding lucenes scoring. I am using the 
Musicbrainz  which uses Lucene to provide searching facility over its 
data, which put simply consists of a database about recording artists , 
albums and song titles

I can construct a query such as:
    track:Minus AND artist:beck AND release:odelay

to return Tracks called Minus by the Artist Beck for the release Odelay, 
which works fine if all terms are correct however I am trying to 
implement the search in a program which takes the terms  from values 
embedded in existing audio files, so they may not be correct, so instead 
of using an AND search I want to use a OR search such as
    track:Minus  artist:beck  release:odelay
to improve the chances of getting a match, and then using the scoring 
returned work out whether the match is sufficiently simailr to accept it 
as a match.

Now the good news is that when multiple results are returned the record 
with the top score is normally the best match BUT the bad news is that 
if the match is very poor the top rated records normally return a score 
of 100 even though
only a few of the terms match.

    track:Minus  artist:rubbish  release:odelay

will return the Minus tracks by beck for the release odelay even through 
the artist term is incorrect because this is the best match it can make 
(2 out of 3 terms matched) but it is returning a score of 100 when I 
would expect a score
of 66 because only two of the terms match.

Why is it doing this, and how can I create a query that only returns 100 
if all terms match but will return possible matches where only some 
terms match ? I have spoke to the creators of MusicBrainz they say they 
are not using any kind of document/Field boosting and are that sure how 
its work as theve only added lucene to the site quite recently.

The above queries can be run tested from

http://musicbrainz.org/search.html

by:
    entering the query in the 'Search For' box
    selecting type:Track
    selecting Use advanced query syntax 
<http://musicbrainz.org/popup/TextSearchSyntax>

and clicking on Indexed Search

thanks Paul Taylor

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 15:54:28 2007
Return-Path: <java-user-return-27847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44290 invoked from network); 2 May 2007 15:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 15:54:27 -0000
Received: (qmail 99717 invoked by uid 500); 2 May 2007 15:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99689 invoked by uid 500); 2 May 2007 15:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99674 invoked by uid 99); 2 May 2007 15:54:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 08:54:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 02 May 2007 08:54:19 -0700
Received: (qmail 85110 invoked by uid 60001); 2 May 2007 15:43:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ng9HWUN8S6NRSjia/xFAvkSNr1lE/egfcS/VW3KSKWGaNo4qMF9LdIdY9jgBvTAtJDqc72PmAOHRlHndsnnpLlT+4lZoQlDp1I82f8M9/SsQRB9ps1vZGdAzMgnbe71RIP0iAks8Hs8/qY39uZ3SYCK/U2dcyM+0/NrP/GmwKKo=;
X-YMail-OSG: .MZSgGEVM1kXx4E1Ry_4MktmvbrWhqfHgbpjoLlHS5lhklGXE3p6HfDOYC4xcMDB9d3PpKCjVXd0Ixc6t9jBEgib7y_q93fmsvbzQPm0iCtiRK6qVqc-
Received: from [208.125.28.244] by web50302.mail.re2.yahoo.com via HTTP; Wed, 02 May 2007 08:43:16 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Wed, 2 May 2007 08:43:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Problem with scoring:is it absolute or relative ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <262090.84925.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Paul,

That is because the Hits class is likely being used under the covers.  When you use the IndexSearcher's search(...) method that returns Hits, hit scores are normalized, so they are always between 0 and 1.  If you want the raw scores, and it sounds like you do, you could use a lower-level search method, like the one that uses a HitCollector.

Otis 

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Paul Taylor <paul_t100@fastmail.fm>
To: java-user@lucene.apache.org
Sent: Wednesday, May 2, 2007 10:30:12 AM
Subject: Problem with scoring:is it absolute or relative ?

Hi I am having problems understanding lucenes scoring. I am using the 
Musicbrainz  which uses Lucene to provide searching facility over its 
data, which put simply consists of a database about recording artists , 
albums and song titles

I can construct a query such as:
    track:Minus AND artist:beck AND release:odelay

to return Tracks called Minus by the Artist Beck for the release Odelay, 
which works fine if all terms are correct however I am trying to 
implement the search in a program which takes the terms  from values 
embedded in existing audio files, so they may not be correct, so instead 
of using an AND search I want to use a OR search such as
    track:Minus  artist:beck  release:odelay
to improve the chances of getting a match, and then using the scoring 
returned work out whether the match is sufficiently simailr to accept it 
as a match.

Now the good news is that when multiple results are returned the record 
with the top score is normally the best match BUT the bad news is that 
if the match is very poor the top rated records normally return a score 
of 100 even though
only a few of the terms match.

    track:Minus  artist:rubbish  release:odelay

will return the Minus tracks by beck for the release odelay even through 
the artist term is incorrect because this is the best match it can make 
(2 out of 3 terms matched) but it is returning a score of 100 when I 
would expect a score
of 66 because only two of the terms match.

Why is it doing this, and how can I create a query that only returns 100 
if all terms match but will return possible matches where only some 
terms match ? I have spoke to the creators of MusicBrainz they say they 
are not using any kind of document/Field boosting and are that sure how 
its work as theve only added lucene to the site quite recently.

The above queries can be run tested from

http://musicbrainz.org/search.html

by:
    entering the query in the 'Search For' box
    selecting type:Track
    selecting Use advanced query syntax 
<http://musicbrainz.org/popup/TextSearchSyntax>

and clicking on Indexed Search

thanks Paul Taylor

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 02 16:54:17 2007
Return-Path: <java-user-return-27848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76708 invoked from network); 2 May 2007 16:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 May 2007 16:54:16 -0000
Received: (qmail 54645 invoked by uid 500); 2 May 2007 16:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54610 invoked by uid 500); 2 May 2007 16:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54590 invoked by uid 99); 2 May 2007 16:54:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 09:54:10 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 May 2007 09:54:03 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 0E0E921AD3C
	for <java-user@lucene.apache.org>; Wed,  2 May 2007 12:53:42 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Wed, 02 May 2007 12:53:43 -0400
X-Sasl-enc: mEmKIg+wAMYTP4/xq2Erml/kHk3uK8YNb1FP2PxbKukK 1178124823
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 0522715701
	for <java-user@lucene.apache.org>; Wed,  2 May 2007 12:53:42 -0400 (EDT)
Message-ID: <4638C217.500@fastmail.fm>
Date: Wed, 02 May 2007 17:53:43 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem with scoring:is it absolute or relative ?
References: <262090.84925.qm@web50302.mail.re2.yahoo.com>
In-Reply-To: <262090.84925.qm@web50302.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis

thanks, so the scores are relative to the result set.

Unfortunately I only have access to an xmlwebservice that let me send a 
lucene query so I don't have access to the various IndexSearcher 
methods. So it sounds like rather than just taking the top result and 
using that Ill have to take the first 10 results and work out my own 
score based on how many fields match and the importance of each field, 
unless anyone has any other ideas ?

Otis Gospodnetic wrote:
> Paul,
>
> That is because the Hits class is likely being used under the covers.  When you use the IndexSearcher's search(...) method that returns Hits, hit scores are normalized, so they are always between 0 and 1.  If you want the raw scores, and it sounds like you do, you could use a lower-level search method, like the one that uses a HitCollector.
>
> Otis 
>
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Paul Taylor <paul_t100@fastmail.fm>
> To: java-user@lucene.apache.org
> Sent: Wednesday, May 2, 2007 10:30:12 AM
> Subject: Problem with scoring:is it absolute or relative ?
>
> Hi I am having problems understanding lucenes scoring. I am using the 
> Musicbrainz  which uses Lucene to provide searching facility over its 
> data, which put simply consists of a database about recording artists , 
> albums and song titles
>
> I can construct a query such as:
>     track:Minus AND artist:beck AND release:odelay
>
> to return Tracks called Minus by the Artist Beck for the release Odelay, 
> which works fine if all terms are correct however I am trying to 
> implement the search in a program which takes the terms  from values 
> embedded in existing audio files, so they may not be correct, so instead 
> of using an AND search I want to use a OR search such as
>     track:Minus  artist:beck  release:odelay
> to improve the chances of getting a match, and then using the scoring 
> returned work out whether the match is sufficiently simailr to accept it 
> as a match.
>
> Now the good news is that when multiple results are returned the record 
> with the top score is normally the best match BUT the bad news is that 
> if the match is very poor the top rated records normally return a score 
> of 100 even though
> only a few of the terms match.
>
>     track:Minus  artist:rubbish  release:odelay
>
> will return the Minus tracks by beck for the release odelay even through 
> the artist term is incorrect because this is the best match it can make 
> (2 out of 3 terms matched) but it is returning a score of 100 when I 
> would expect a score
> of 66 because only two of the terms match.
>
> Why is it doing this, and how can I create a query that only returns 100 
> if all terms match but will return possible matches where only some 
> terms match ? I have spoke to the creators of MusicBrainz they say they 
> are not using any kind of document/Field boosting and are that sure how 
> its work as theve only added lucene to the site quite recently.
>
> The above queries can be run tested from
>
> http://musicbrainz.org/search.html
>
> by:
>     entering the query in the 'Search For' box
>     selecting type:Track
>     selecting Use advanced query syntax 
> <http://musicbrainz.org/popup/TextSearchSyntax>
>
> and clicking on Indexed Search
>
> thanks Paul Taylor
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 01:43:26 2007
Return-Path: <java-user-return-27849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43778 invoked from network); 3 May 2007 01:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 01:43:25 -0000
Received: (qmail 26205 invoked by uid 500); 3 May 2007 01:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25184 invoked by uid 500); 3 May 2007 01:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 89636 invoked by uid 99); 2 May 2007 22:06:48 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wdavies@cs.stanford.edu designates 171.64.64.25 as permitted sender)
Mime-Version: 1.0
Message-Id: <p0624085dc25eb8595072@[10.100.1.252]>
In-Reply-To: <194895.4762.qm@web50301.mail.re2.yahoo.com>
References: <194895.4762.qm@web50301.mail.re2.yahoo.com>
Date: Wed, 2 May 2007 15:06:07 -0700
To: java-user@lucene.apache.org
From: Winton Davies <wdavies@cs.stanford.edu>
Subject: Email Definition in StandardTokenizer.jj
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Spam-Score: -2.5
X-Spam-Checker-Version: SpamAssassin 3.0.4-cs-csdcf (2005-06-05) on cs-smtp-1.Stanford.EDU
X-Scan-Signature: b0d2d5ababd8fe43140185de29a9e1cb
X-Virus-Checked: Checked by ClamAV on apache.org

Hey guys,

Does someone who makes commits want to fix the EMAIL definition in 
StandardTokenizer.jj

Its a not very well known exception to the naming process, that you 
can use a "+" in the middle
of the email name, and the delivery agent sends the email to the 
prefixing name, but keeps the original name (so you can filter on it, 
for example).

I use this all the time to create unique, traceable email address 
from my gmail account for when I sign up with sites I don't trust not 
to sell my email address onto spammers.

Actually, if you ask me the whole thing is a lot more complicated 
after I did some research. Look at the set of non-alphanumeric chars 
you can use.

Its not a showstopper, but it'd be nice to have it right.

Cheers,
  Winton


http://en.wikipedia.org/wiki/E-mail_address:

According to RFC 2822, the local-part of the address may use any of 
these ASCII characters:
	*	Uppercase and lowercase letters (case sensitive)
	*	The digits 0 through 9
	*	The characters ! # $ % & ' * + - / = ? ^ _ ` { | } ~
	*	The character . provided that it is not the first or 
last character in the local-part.

According to RFC 2821, "the local-part MUST be interpreted and 
assigned semantics only by the host specified in the domain part of 
the address. In particular, for some hosts the user "smith" is 
different from the user "Smith".

Plus addressing is one of the benefits of this limitation. Some mail 
servers allow a user to append +tag to their email address 
(joeuser+tag@example.com). The text of tag can be used to apply 
filtering.
Some systems violate RFC 2822, and the recommendations in RFC 3696, 
by refusing to send mail addressed to a user on another system merely 
because the local-part of the address contains the plus sign (+). 
Users of these systems cannot use plus addressing.

On the other hand, most qmail installations support the use of '-' as 
a separator between local-address and domain parts. Such as 
joeuser-tag@example.com or joeuser-tag-sub-anything-else@example.com. 
This allows qmail through .qmail-default or 
.qmail-tag-sub-anything-else files to sort, filter, forward, or run 
application based on the tagging system established. Procmail and 
SpamAssassin are common applications to use with qmail to help sort 
out spam or further filter incoming email.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 07:46:52 2007
Return-Path: <java-user-return-27850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18725 invoked from network); 3 May 2007 07:46:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 07:46:50 -0000
Received: (qmail 39938 invoked by uid 500); 3 May 2007 07:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39889 invoked by uid 500); 3 May 2007 07:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39877 invoked by uid 99); 3 May 2007 07:46:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 00:46:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 00:46:43 -0700
Received: from neplaptop ([202.51.64.158])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id l438R2b3023306
	for <java-user@lucene.apache.org>; Thu, 3 May 2007 14:12:05 +0545
Message-Id: <200705030827.l438R2b3023306@idlewild.ccnep.com.np>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: drawback addindexes method
Date: Thu, 3 May 2007 13:31:09 +0545
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0051_01C78D87.5282E580"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AceNVWl2oiKyw5pDRGS5f4oUHSttkAAAa2yw
X-Scanned-By: MIMEDefang 2.51 on 202.51.64.130
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0051_01C78D87.5282E580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 

I found that IndexWriter.addIndexes(Directory[]) always calls optimize
method twice 
I am indexing a documents in batches , i.e I call this method when X no. of
documents are buffered in RAM
Using RAMDirectory . So as the index size grows , optimize method will only
increase by indexing time
 
Can these lines be commented out and call the optimize method only at the
end of indexing process?
 
Your thoughts please
 
Thanks
Chandan 

 


------=_NextPart_000_0051_01C78D87.5282E580--



From java-user-return-27851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 09:28:14 2007
Return-Path: <java-user-return-27851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56785 invoked from network); 3 May 2007 09:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 09:28:13 -0000
Received: (qmail 84565 invoked by uid 500); 3 May 2007 09:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84536 invoked by uid 500); 3 May 2007 09:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25976 invoked by uid 99); 3 May 2007 07:33:53 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sccarrera@uvigo.es designates 193.146.32.71 as permitted sender)
Message-ID: <1178177598.4639903e90203@correoweb.uvigo.es>
Date: Thu, 03 May 2007 09:33:18 +0200
From: sccarrera@uvigo.es
To: java-user@lucene.apache.org
Subject: Doubt in FuzzyQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
X-Originating-IP: 193.147.87.33
X-Mail-Scanned: Criba + Clamd smtp.uvigo.es
X-Virus-Checked: Checked by ClamAV on apache.org



Hi!

I have a problem in dealing whith a fuzzy query in Lucene 2.1.0.

In order to explain my problem, I illustrate it by a simple example:

I would like to recover files including the set of strings

"socit amricaine" and "socits amricaines"

from a fuzzy query relating the string "socit amricain"

I have tried to follow the instructions in the reference manual, apparently
without success.

Please, can you help me ?

Regards

--oOo-----------------------------------------------------------------oOo--

Servicio de acceso  correo electrnico va web da Universidade de Vigo
Servicio de acceso al correo electrnico va web de la Universidad de Vigo

Servicios Informticos [ http://si.uvigo.es ]
Universidade de Vigo [ http://www.uvigo.es ]

URL: https://correoweb.uvigo.es


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 09:48:07 2007
Return-Path: <java-user-return-27852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65847 invoked from network); 3 May 2007 09:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 09:48:07 -0000
Received: (qmail 17465 invoked by uid 500); 3 May 2007 09:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17018 invoked by uid 500); 3 May 2007 09:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17006 invoked by uid 99); 3 May 2007 09:48:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 02:48:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 02:47:57 -0700
Received: from melkor [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AFAD065C; Thu, 03 May 2007 11:47:25 +0200
Date: Thu, 03 May 2007 11:46:54 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: MergeFactor advice wanted
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.trqv4grfoftp72@melkor>
User-Agent: Opera Mail/9.10 (Win32)
X-Antivirus: avast! (VPS 000738-0, 05/03/2007), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: Dafad08f6000029a8.smd
X-Declude-RefID: 
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everyone!
I'm wondering if any of you have any helpful advice to what MergeFactor i  
should use...
The indexing process is handling a large amount of documents and i would  
like to index as fast as possible.
Initial thought was to increase the mergeFactor to make the indexer work  
more in memory and less writing to file. Thus this created a problem for  
me with "TOO-MANY-OPEN-FILES"... of course, since i choose 2000 as my  
mergeFactor:) Well, i could do an optimize from time to time, but the big  
question is whats more efficient? Optimize tends to take a loooong time on  
our system since it is quite a large index.

Any helpful advice to what i should do? 10 as mergeFactor cant possibly be  
the best solution here? Any advice would be highly appreciated!

- Aleksander

-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 10:18:50 2007
Return-Path: <java-user-return-27853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79231 invoked from network); 3 May 2007 10:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 10:18:49 -0000
Received: (qmail 76723 invoked by uid 500); 3 May 2007 10:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76699 invoked by uid 500); 3 May 2007 10:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76688 invoked by uid 99); 3 May 2007 10:18:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 03:18:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 03:18:39 -0700
Received: by wx-out-0506.google.com with SMTP id i29so469931wxd
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 03:18:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cWPYMkRIzL5dMaswLsG86Qa0+XK+ipda8Q3EOXi8GJAe4og6HMMJ/WzAL9zn8hKlqSdh6aUStS5G9BcbqEXYhgOx32x97s9WW7fc8cUNzsXpjSQWmyt2tAPv5Dl6wfUyhsLsqFqW8qWYxR7isHdSBxjnR+A7tfR+75GtS51B8Pw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uAjjk9UacJmHIfM9xQKLGetjv2vhF2U3a14YYDUpIjoaJ6TO1xu6y8lXScghr3vZuHavZv5HZzwnNuTUFsjEqleXvjxoi74tKI7IV+QxnJTGCsOCwHuBXyZnZdfGZ5rkCMPtFRhic8sq/Q7SycYZEJudymKF7kYn7QQ+wnA1apg=
Received: by 10.70.69.11 with SMTP id r11mr3481158wxa.1178187499202;
        Thu, 03 May 2007 03:18:19 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 32sm2825960wri.2007.05.03.03.18.18;
        Thu, 03 May 2007 03:18:19 -0700 (PDT)
Message-ID: <4639B6C4.1060709@gmail.com>
Date: Thu, 03 May 2007 06:17:40 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MergeFactor advice wanted
References: <op.trqv4grfoftp72@melkor>
In-Reply-To: <op.trqv4grfoftp72@melkor>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think it is worth your time to do some benchmarking. I think 
mergeFactor is not very helpful in the end...if you set it high, you'll 
index faster but then your searches will be slower prompting you to 
optimize...after which you'll find that you paid all your gains back. 
Test things out for yourself, but I'd recommend a low merge factor and 
then you can forget about the hassle of optimizing. Amortize, amortize...

- Mark

Aleksander M. Stensby wrote:
> Hello everyone!
> I'm wondering if any of you have any helpful advice to what 
> MergeFactor i should use...
> The indexing process is handling a large amount of documents and i 
> would like to index as fast as possible.
> Initial thought was to increase the mergeFactor to make the indexer 
> work more in memory and less writing to file. Thus this created a 
> problem for me with "TOO-MANY-OPEN-FILES"... of course, since i choose 
> 2000 as my mergeFactor:) Well, i could do an optimize from time to 
> time, but the big question is whats more efficient? Optimize tends to 
> take a loooong time on our system since it is quite a large index.
>
> Any helpful advice to what i should do? 10 as mergeFactor cant 
> possibly be the best solution here? Any advice would be highly 
> appreciated!
>
> - Aleksander
>
> --Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 11:05:24 2007
Return-Path: <java-user-return-27854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96200 invoked from network); 3 May 2007 11:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 11:05:23 -0000
Received: (qmail 50143 invoked by uid 500); 3 May 2007 11:05:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50100 invoked by uid 500); 3 May 2007 11:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50089 invoked by uid 99); 3 May 2007 11:05:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 04:05:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 04:05:12 -0700
Received: from melkor [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A1C60424; Thu, 03 May 2007 13:04:38 +0200
To: java-user@lucene.apache.org
Subject: Re: MergeFactor advice wanted
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <op.trqv4grfoftp72@melkor> <4639B6C4.1060709@gmail.com>
Content-Transfer-Encoding: 7bit
Date: Thu, 03 May 2007 13:04:08 +0200
Message-ID: <op.trqzo6cxoftp72@melkor>
In-Reply-To: <4639B6C4.1060709@gmail.com>
User-Agent: Opera Mail/9.10 (Win32)
X-Antivirus: avast! (VPS 000738-1, 05/03/2007), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: Dc1c6095f000034f1.smd
X-Declude-RefID: 
X-Virus-Checked: Checked by ClamAV on apache.org

Ok. but then you would not optimize at all? Not even in the end of the  
indexing run?

On Thu, 03 May 2007 12:17:40 +0200, Mark Miller <markrmiller@gmail.com>  
wrote:

> I think it is worth your time to do some benchmarking. I think  
> mergeFactor is not very helpful in the end...if you set it high, you'll  
> index faster but then your searches will be slower prompting you to  
> optimize...after which you'll find that you paid all your gains back.  
> Test things out for yourself, but I'd recommend a low merge factor and  
> then you can forget about the hassle of optimizing. Amortize, amortize...
>
> - Mark
>
> Aleksander M. Stensby wrote:
>> Hello everyone!
>> I'm wondering if any of you have any helpful advice to what MergeFactor  
>> i should use...
>> The indexing process is handling a large amount of documents and i  
>> would like to index as fast as possible.
>> Initial thought was to increase the mergeFactor to make the indexer  
>> work more in memory and less writing to file. Thus this created a  
>> problem for me with "TOO-MANY-OPEN-FILES"... of course, since i choose  
>> 2000 as my mergeFactor:) Well, i could do an optimize from time to  
>> time, but the big question is whats more efficient? Optimize tends to  
>> take a loooong time on our system since it is quite a large index.
>>
>> Any helpful advice to what i should do? 10 as mergeFactor cant possibly  
>> be the best solution here? Any advice would be highly appreciated!
>>
>> - Aleksander
>>
>> --Aleksander M. Stensby
>> Software Developer
>> Integrasco A/S
>> aleksander.stensby@integrasco.no
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 12:03:46 2007
Return-Path: <java-user-return-27855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17207 invoked from network); 3 May 2007 12:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 12:03:45 -0000
Received: (qmail 53374 invoked by uid 500); 3 May 2007 12:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53342 invoked by uid 500); 3 May 2007 12:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53326 invoked by uid 99); 3 May 2007 12:03:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 05:03:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 05:03:27 -0700
Received: from neplaptop ([202.51.64.158])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id l43ChlGe031538
	for <java-user@lucene.apache.org>; Thu, 3 May 2007 18:28:50 +0545
Message-Id: <200705031243.l43ChlGe031538@idlewild.ccnep.com.np>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: RE: MergeFactor advice wanted
Date: Thu, 3 May 2007 17:47:51 +0545
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <4639B6C4.1060709@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AceNciWaBhS59z8TQ2+cQdP/AS2ULwACKnTw
X-Scanned-By: MIMEDefang 2.51 on 202.51.64.130
X-Virus-Checked: Checked by ClamAV on apache.org

What if we are using addindexes(Ram Directory) method ? it calls optimize
function inside the function itself ?

Any solution to this ?

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Thursday, May 03, 2007 4:03 PM
To: java-user@lucene.apache.org
Subject: Re: MergeFactor advice wanted

I think it is worth your time to do some benchmarking. I think 
mergeFactor is not very helpful in the end...if you set it high, you'll 
index faster but then your searches will be slower prompting you to 
optimize...after which you'll find that you paid all your gains back. 
Test things out for yourself, but I'd recommend a low merge factor and 
then you can forget about the hassle of optimizing. Amortize, amortize...

- Mark

Aleksander M. Stensby wrote:
> Hello everyone!
> I'm wondering if any of you have any helpful advice to what 
> MergeFactor i should use...
> The indexing process is handling a large amount of documents and i 
> would like to index as fast as possible.
> Initial thought was to increase the mergeFactor to make the indexer 
> work more in memory and less writing to file. Thus this created a 
> problem for me with "TOO-MANY-OPEN-FILES"... of course, since i choose 
> 2000 as my mergeFactor:) Well, i could do an optimize from time to 
> time, but the big question is whats more efficient? Optimize tends to 
> take a loooong time on our system since it is quite a large index.
>
> Any helpful advice to what i should do? 10 as mergeFactor cant 
> possibly be the best solution here? Any advice would be highly 
> appreciated!
>
> - Aleksander
>
> --Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 13:06:10 2007
Return-Path: <java-user-return-27856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49992 invoked from network); 3 May 2007 13:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 13:06:09 -0000
Received: (qmail 77354 invoked by uid 500); 3 May 2007 13:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77310 invoked by uid 500); 3 May 2007 13:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77299 invoked by uid 99); 3 May 2007 13:06:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 06:06:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 06:06:00 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 5D9CC30481
	for <java-user@lucene.apache.org>; Thu,  3 May 2007 06:07:02 -0700 (PDT)
X-Quarantine-ID: <icXHzsUbsG9p>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id icXHzsUbsG9p for <java-user@lucene.apache.org>;
	Thu,  3 May 2007 06:06:45 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 036F233AA7
	for <java-user@lucene.apache.org>; Thu,  3 May 2007 06:06:42 -0700 (PDT)
Subject: RE: drawback addindexes method
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 3 May 2007 06:05:07 -0700
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E3250E729C@professorville.windows.esseff.org>
In-Reply-To: <200705030827.l438R2b3023306@idlewild.ccnep.com.np>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: drawback addindexes method
Thread-Index: AceNVWl2oiKyw5pDRGS5f4oUHSttkAAAa2ywAArrsMA=
References: <200705030827.l438R2b3023306@idlewild.ccnep.com.np>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

See IndexWriter#addIndexesNoOptimize, released with 2.1. Note that it
doesn't optimize before or after, so if you want an optimize at the end,
you need to ask for it manually.

-----Original Message-----
From: Chandan Tamrakar [mailto:chandan@ccnep.com.np]=20
Sent: Thursday, May 03, 2007 12:46 AM
To: java-user@lucene.apache.org
Subject: drawback addindexes method

=20

I found that IndexWriter.addIndexes(Directory[]) always calls optimize
method twice=20
I am indexing a documents in batches , i.e I call this method when X no.
of
documents are buffered in RAM
Using RAMDirectory . So as the index size grows , optimize method will
only
increase by indexing time
=20
Can these lines be commented out and call the optimize method only at
the
end of indexing process?
=20
Your thoughts please
=20
Thanks
Chandan=20

=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 14:18:37 2007
Return-Path: <java-user-return-27857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16326 invoked from network); 3 May 2007 14:18:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 14:18:37 -0000
Received: (qmail 26771 invoked by uid 500); 3 May 2007 14:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26733 invoked by uid 500); 3 May 2007 14:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26689 invoked by uid 99); 3 May 2007 14:18:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:18:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:18:28 -0700
Received: by ug-out-1314.google.com with SMTP id k40so394326ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 07:18:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yn3OSj6vMqmqiKIiZe0bK/elk9AZQN8bVp/BTNzfsfzv8iISytbn5SIuH1bk5IfzArxS9NXaW5AQH3BaCOnCvFIsRpmWETsZblXlluIlzfoENE3c+qGfkbVT8M29moYmv4+7KGWKL6KxrSRxMeSE2U0Sg2ptVYqG8qkgUWTHxi0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fWCOl72pkc9aY5UGDpdy9A0QWRRaxyYIGX7wrRG+GT1rF0tnrVCIsIp3X3MnglaJkwNrefz8VcL3+4GBZ9e1pgQ0Eg+I2uCXiMNlKUg8GNbPBRpqT5yIQ4E+Gwr4wI4Rkuc+rPL9XPhGUAjD3+vBLoYrRsp6u/ZZFnRXBzXYafM=
Received: by 10.82.184.2 with SMTP id h2mr3994017buf.1178201886055;
        Thu, 03 May 2007 07:18:06 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 07:18:06 -0700 (PDT)
Message-ID: <359a92830705030718n2751eb18n5ce18e85a0ad7855@mail.gmail.com>
Date: Thu, 3 May 2007 10:18:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Email Definition in StandardTokenizer.jj
In-Reply-To: <p0624085dc25eb8595072@10.100.1.252>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11135_16594952.1178201886014"
References: <194895.4762.qm@web50301.mail.re2.yahoo.com>
	 <p0624085dc25eb8595072@10.100.1.252>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11135_16594952.1178201886014
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can just see Hatcher's reply now......

Would you be willing to submit the correct code <G>?

Erick

On 5/2/07, Winton Davies <wdavies@cs.stanford.edu> wrote:
>
> Hey guys,
>
> Does someone who makes commits want to fix the EMAIL definition in
> StandardTokenizer.jj
>
> Its a not very well known exception to the naming process, that you
> can use a "+" in the middle
> of the email name, and the delivery agent sends the email to the
> prefixing name, but keeps the original name (so you can filter on it,
> for example).
>
> I use this all the time to create unique, traceable email address
> from my gmail account for when I sign up with sites I don't trust not
> to sell my email address onto spammers.
>
> Actually, if you ask me the whole thing is a lot more complicated
> after I did some research. Look at the set of non-alphanumeric chars
> you can use.
>
> Its not a showstopper, but it'd be nice to have it right.
>
> Cheers,
>   Winton
>
>
> http://en.wikipedia.org/wiki/E-mail_address:
>
> According to RFC 2822, the local-part of the address may use any of
> these ASCII characters:
>         *       Uppercase and lowercase letters (case sensitive)
>         *       The digits 0 through 9
>         *       The characters ! # $ % & ' * + - / = ? ^ _ ` { | } ~
>         *       The character . provided that it is not the first or
> last character in the local-part.
>
> According to RFC 2821, "the local-part MUST be interpreted and
> assigned semantics only by the host specified in the domain part of
> the address. In particular, for some hosts the user "smith" is
> different from the user "Smith".
>
> Plus addressing is one of the benefits of this limitation. Some mail
> servers allow a user to append +tag to their email address
> (joeuser+tag@example.com). The text of tag can be used to apply
> filtering.
> Some systems violate RFC 2822, and the recommendations in RFC 3696,
> by refusing to send mail addressed to a user on another system merely
> because the local-part of the address contains the plus sign (+).
> Users of these systems cannot use plus addressing.
>
> On the other hand, most qmail installations support the use of '-' as
> a separator between local-address and domain parts. Such as
> joeuser-tag@example.com or joeuser-tag-sub-anything-else@example.com.
> This allows qmail through .qmail-default or
> .qmail-tag-sub-anything-else files to sort, filter, forward, or run
> application based on the tagging system established. Procmail and
> SpamAssassin are common applications to use with qmail to help sort
> out spam or further filter incoming email.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11135_16594952.1178201886014--

From java-user-return-27858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 14:20:15 2007
Return-Path: <java-user-return-27858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17050 invoked from network); 3 May 2007 14:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 14:20:14 -0000
Received: (qmail 32244 invoked by uid 500); 3 May 2007 14:20:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32200 invoked by uid 500); 3 May 2007 14:20:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32189 invoked by uid 99); 3 May 2007 14:20:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:20:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:20:06 -0700
Received: by ug-out-1314.google.com with SMTP id k40so394615ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 07:19:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E323OvVt/7F+UuHajoEqp2QD7jjttWJXtueVFpF461Im7GSLcW0HZIoBqhVuHuO0KqkZeUFdxeb5nCktNR0Ofwe+xYEfyq+/KTSLr8kuICzODAQkWzq1QY3dxLv8vggne15owOoMkxlBwdcm6EPxkmnUFV2e/UfB2y/ejYoL0oA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mVDzFaFqJtLvORbYNjtbCEtV+Yr7tOE+wzonur8qKljsuaUqXGAmCAEsT1mbpScaDREhNlWXQTGFRm9J9QDwvlDEK+asmqo5tOwzIXm55PUvx2kXkPry9eVygE8Mv+0QACiUvBiM/GQPle6XeR8ZR1TmempBjVeA02mliQeyLK8=
Received: by 10.82.173.19 with SMTP id v19mr4012983bue.1178201984468;
        Thu, 03 May 2007 07:19:44 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 07:19:44 -0700 (PDT)
Message-ID: <359a92830705030719gf0b80b0k4b1b9d4fe04cd879@mail.gmail.com>
Date: Thu, 3 May 2007 10:19:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doubt in FuzzyQuery
In-Reply-To: <1178177598.4639903e90203@correoweb.uvigo.es>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11151_11830844.1178201984401"
References: <1178177598.4639903e90203@correoweb.uvigo.es>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11151_11830844.1178201984401
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

It would help a lot if you can either post a snippet of code showing
how you construct the fuzzy query or create a small, self-contained
program illustrating the problem.

With the latter approach, I've often found that in the middle of creating
the program, what I'm doing wrong surfaces ...

Best
Erick

On 5/3/07, sccarrera@uvigo.es <sccarrera@uvigo.es> wrote:
>
>
>
> Hi!
>
> I have a problem in dealing whith a fuzzy query in Lucene 2.1.0.
>
> In order to explain my problem, I illustrate it by a simple example:
>
> I would like to recover files including the set of strings
>
> "soci=E9t=E9 am=E9ricaine" and "soci=E9t=E9s am=E9ricaines"
>
> from a fuzzy query relating the string "soci=E9t=E9 am=E9ricain"
>
> I have tried to follow the instructions in the reference manual,
> apparently
> without success.
>
> Please, can you help me ?
>
> Regards
>
>
> --oOo-----------------------------------------------------------------oOo=
--
>
> Servicio de acceso =F3 correo electr=F3nico v=EDa web da Universidade de =
Vigo
> Servicio de acceso al correo electr=F3nico v=EDa web de la Universidad de=
 Vigo
>
> Servicios Inform=E1ticos [ http://si.uvigo.es ]
> Universidade de Vigo [ http://www.uvigo.es ]
>
> URL: https://correoweb.uvigo.es
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11151_11830844.1178201984401--

From java-user-return-27859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 14:31:28 2007
Return-Path: <java-user-return-27859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25369 invoked from network); 3 May 2007 14:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 14:31:27 -0000
Received: (qmail 57743 invoked by uid 500); 3 May 2007 14:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57716 invoked by uid 500); 3 May 2007 14:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57705 invoked by uid 99); 3 May 2007 14:31:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:31:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:31:18 -0700
Received: by ug-out-1314.google.com with SMTP id m2so451723uge
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 07:30:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DlZNG8tl6v1D61Ayn+bD6AS0rYMPM56B00nWOqrFypMCcqr7uysxtGu46ozMfscsbXN03OjraYv9bumJsKv14OokuLIu01BxT7vkfJWlM+xNttd2rgtUfWnRZdjXNRyAKE1AxCr5O+5gMr0C2cJqpBibKKWhmrGHMCK1lygJGfI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rO3j6TN2S8wxl0JeZgEl7Ilj7SgsXDddoqYTo2UZ/NMn7aSeycw9i/ht2if0lziwg6cInRMTsMIlADsgCmfdg4oHTbqUGrDn0K6JThKD4a6l/pe3ym6hffIbdwMLCoqyfdycvixlQ/By+yV2x2/6cMf+M6n6xCu2Q/o9ugINjvA=
Received: by 10.82.189.6 with SMTP id m6mr4105220buf.1178202651329;
        Thu, 03 May 2007 07:30:51 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 07:30:51 -0700 (PDT)
Message-ID: <359a92830705030730y35348ff6nbe4b30be63621c30@mail.gmail.com>
Date: Thu, 3 May 2007 10:30:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
Subject: Re: MergeFactor advice wanted
In-Reply-To: <op.trqzo6cxoftp72@melkor>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11287_31626095.1178202651277"
References: <op.trqv4grfoftp72@melkor> <4639B6C4.1060709@gmail.com>
	 <op.trqzo6cxoftp72@melkor>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11287_31626095.1178202651277
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think (but don't know for sure) whether optimizing before the
end of the run buys you anything. And you're right, it takes a while.
I've assumed that it was best done at the end of the entire run,
but that's only an assumption.

Search the archives for the thread titled

MergeFactor and MaxBufferedDocs value should ...?

for an exposition on how all the indexing factors relate.

Also, look at the (new to 2.1) IndexWriter.ramSizeInBytes() (or something
like that). Rather than worrying about MergeFactor and the other
parameters and guessing, this may allow you to flush RAM to disk
when needed rather than every N documents. CAUTION: there's
a bug (detailed in the thread referenced above) with this code, so look
at the thread...

In fact, yesterday I experimented with what I call an "AdaptiveWriter".
The idea is to query the op system for the amount of RAM I'm using,
and track the amount of RAM used to index a document as it
relates to size. Then flush when I get "too close for comfort" to an
OOM error. Yes, this is a digression from optimizing, but it is
related to indexing as fast as possible <G>.

By monitoring the size of the index growth and the size of the
incoming document, I can create a crude measure of how much
RAM the index needs for a document of a given size. Actually,
I tracked the ratio of the size of incoming doc to the change in
memory. When my available RAM for the process is less
than 2X the largest ratio yet times the size of the incoming
document, I flush. I'm not sure how much this changes things,
but I thought that creating one of these was better than
experimenting with the various factors for each new project...

Anyway, do look at that thread for ideas on how to make
this as efficient as possible, and you can probably ignore
the rest <G>...

Best
Erick



On 5/3/07, Aleksander M. Stensby <aleksander.stensby@integrasco.no> wrote:
>
> Ok. but then you would not optimize at all? Not even in the end of the
> indexing run?
>
> On Thu, 03 May 2007 12:17:40 +0200, Mark Miller <markrmiller@gmail.com>
> wrote:
>
> > I think it is worth your time to do some benchmarking. I think
> > mergeFactor is not very helpful in the end...if you set it high, you'll
> > index faster but then your searches will be slower prompting you to
> > optimize...after which you'll find that you paid all your gains back.
> > Test things out for yourself, but I'd recommend a low merge factor and
> > then you can forget about the hassle of optimizing. Amortize,
> amortize...
> >
> > - Mark
> >
> > Aleksander M. Stensby wrote:
> >> Hello everyone!
> >> I'm wondering if any of you have any helpful advice to what MergeFactor
> >> i should use...
> >> The indexing process is handling a large amount of documents and i
> >> would like to index as fast as possible.
> >> Initial thought was to increase the mergeFactor to make the indexer
> >> work more in memory and less writing to file. Thus this created a
> >> problem for me with "TOO-MANY-OPEN-FILES"... of course, since i choose
> >> 2000 as my mergeFactor:) Well, i could do an optimize from time to
> >> time, but the big question is whats more efficient? Optimize tends to
> >> take a loooong time on our system since it is quite a large index.
> >>
> >> Any helpful advice to what i should do? 10 as mergeFactor cant possibly
> >> be the best solution here? Any advice would be highly appreciated!
> >>
> >> - Aleksander
> >>
> >> --Aleksander M. Stensby
> >> Software Developer
> >> Integrasco A/S
> >> aleksander.stensby@integrasco.no
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11287_31626095.1178202651277--

From java-user-return-27860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 14:34:07 2007
Return-Path: <java-user-return-27860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26482 invoked from network); 3 May 2007 14:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 14:34:06 -0000
Received: (qmail 61055 invoked by uid 500); 3 May 2007 14:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61011 invoked by uid 500); 3 May 2007 14:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60997 invoked by uid 99); 3 May 2007 14:34:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:34:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 07:33:59 -0700
Received: by ug-out-1314.google.com with SMTP id k40so397019ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 07:33:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VwHwkrKX8Z0jlpfhCxGY6UFbP4YbZ0xOB0+7BJW5t166D1bUwkit0Rj7L8RYZjNA8OL5KU3HMcQ+gSs7POgvmRWtQSF4WDGcPwbZnxd5Agx9AnTOerwJ+326TtPdWGzqEl4NYxgsEbBsksx/W8LrTD1ABS938QgIIlHTv9Nl82Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NYjVc5xnS3cScLn9ku2cGkjMacat2yNln2gL0fpyIAYXbdwt6v91sq7xdFLWIrvJ3Ua/9tiya7FVVUuDrITn3Rp/CPnljPf8koZj3ljo3Wm0peK8lyQRi3GdVKJDByj1Yjjg6xpkCcMkaYr7+Zk0d8+9LKv47uir57sxhNwTQ+c=
Received: by 10.82.163.13 with SMTP id l13mr4041444bue.1178202817206;
        Thu, 03 May 2007 07:33:37 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 07:33:37 -0700 (PDT)
Message-ID: <359a92830705030733x2d4cedd1xe5b67bda10b00ff8@mail.gmail.com>
Date: Thu, 3 May 2007 10:33:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MergeFactor advice wanted
In-Reply-To: <200705031243.l43ChlGe031538@idlewild.ccnep.com.np>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11323_7311606.1178202817149"
References: <4639B6C4.1060709@gmail.com>
	 <200705031243.l43ChlGe031538@idlewild.ccnep.com.np>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11323_7311606.1178202817149
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think you're doing yourself any good by explicitly using a
RAMdirectory in the first place. If you use a simple FSDirectory, a
number of documents are added in RAM before being flushed to the
FS.

Why do you add this complexity to your code with no proof that
it does you any good? Or do you have some data that you
haven't posted? If so, please post it since I'm sure it would be
of interest to others as well as myself.

Best
Erick

On 5/3/07, Chandan Tamrakar <chandan@ccnep.com.np> wrote:
>
> What if we are using addindexes(Ram Directory) method ? it calls optimize
> function inside the function itself ?
>
> Any solution to this ?
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Thursday, May 03, 2007 4:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: MergeFactor advice wanted
>
> I think it is worth your time to do some benchmarking. I think
> mergeFactor is not very helpful in the end...if you set it high, you'll
> index faster but then your searches will be slower prompting you to
> optimize...after which you'll find that you paid all your gains back.
> Test things out for yourself, but I'd recommend a low merge factor and
> then you can forget about the hassle of optimizing. Amortize, amortize...
>
> - Mark
>
> Aleksander M. Stensby wrote:
> > Hello everyone!
> > I'm wondering if any of you have any helpful advice to what
> > MergeFactor i should use...
> > The indexing process is handling a large amount of documents and i
> > would like to index as fast as possible.
> > Initial thought was to increase the mergeFactor to make the indexer
> > work more in memory and less writing to file. Thus this created a
> > problem for me with "TOO-MANY-OPEN-FILES"... of course, since i choose
> > 2000 as my mergeFactor:) Well, i could do an optimize from time to
> > time, but the big question is whats more efficient? Optimize tends to
> > take a loooong time on our system since it is quite a large index.
> >
> > Any helpful advice to what i should do? 10 as mergeFactor cant
> > possibly be the best solution here? Any advice would be highly
> > appreciated!
> >
> > - Aleksander
> >
> > --Aleksander M. Stensby
> > Software Developer
> > Integrasco A/S
> > aleksander.stensby@integrasco.no
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11323_7311606.1178202817149--

From java-user-return-27861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 18:06:00 2007
Return-Path: <java-user-return-27861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33223 invoked from network); 3 May 2007 18:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 18:05:59 -0000
Received: (qmail 7339 invoked by uid 500); 3 May 2007 18:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7303 invoked by uid 500); 3 May 2007 18:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7292 invoked by uid 99); 3 May 2007 18:05:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 11:05:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.42 as permitted sender)
Received: from [206.46.252.42] (HELO vms042pub.verizon.net) (206.46.252.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 11:05:51 -0700
Received: from dorthy ([71.248.159.221])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JHH00G748X6XFP5@vms042.mailsrvcs.net> for
 java-user@lucene.apache.org; Thu, 03 May 2007 13:05:30 -0500 (CDT)
Date: Thu, 03 May 2007 13:05:30 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Implementing lagre secure Lucene search system questions.
To: <java-user@lucene.apache.org>
Message-id: <000a01c78dad$a3091ad0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <4639B6C4.1060709@gmail.com>
 <200705031243.l43ChlGe031538@idlewild.ccnep.com.np>
 <359a92830705030733x2d4cedd1xe5b67bda10b00ff8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I'm a relative Lucene newbe and would appreciate some expert advice.

I would like to make fulltest searchable,  files distributed on various 
local hosts in the intranet. My startup plan is to index these files locally 
and then merge all the little indexes into a master indexes on a search 
host. Once complete I will delete all the little indexes and just keep the 
master index.

Then over time as new files are added to the various local hosts I'll index 
it (new file) locally and then (once again) send the little indexes to be 
merged into the master index on the search host. Once complete I will again 
delete the no longer needed little index.

I have been reading that merging indexes can be slow, my master index will 
be huge since the entire documents collection may be in the tens of 
millions.

Is this true? If so would it be better to send the (new) document to the 
search host and index it there rather then sending a little indexes to be 
merged into the master index? Either way is fine with me but which would be 
better for Lucene?

I've also read about Remote Parallel Multi Searcher, seems I might be able 
to keep the indexes on the local hosts and use Remote Parallel MultiSearcher 
to search, but the security of the files and their content is a big issue. I 
can't be opening any back doors (ports) to the files or their contents, port 
8080 only w/HTTPS.

So I guess I am asking two questions. Is searching distributed indexes via 
Remote Parallel MultiSearcher easily doable, safe and recommended (Can RMI 
tunnel thru 8080?)  or,  given the security constraints,  is maintaining a 
master index the  better/only  way.

Going with the master index approach, would it be better/faster to index a 
new document directly into the master index or index locally and then merge 
a tiny index into the master index?

Thanks to any and all that take the time to advice me.

jim s.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 19:33:16 2007
Return-Path: <java-user-return-27862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67061 invoked from network); 3 May 2007 19:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 19:33:15 -0000
Received: (qmail 80642 invoked by uid 500); 3 May 2007 19:33:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80617 invoked by uid 500); 3 May 2007 19:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80606 invoked by uid 99); 3 May 2007 19:33:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 12:33:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stefan.will@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 May 2007 12:33:07 -0700
Received: (qmail invoked by alias); 03 May 2007 19:32:45 -0000
Received: from 64-71-1-246.static.wiline.com (EHLO [172.25.1.157]) [64.71.1.246]
  by mail.gmx.net (mp049) with SMTP; 03 May 2007 21:32:45 +0200
X-Authenticated: #2748410
X-Provags-ID: V01U2FsdGVkX1/ZM7dAIKjZU/sch2aBiDnuHio+8x3O1ztmV5Z9A3
	GZYCZ1bHjsZhgo
Message-ID: <463A3908.8060800@gmx.net>
Date: Thu, 03 May 2007 12:33:28 -0700
From: Stefan Will <stefan.will@gmx.net>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Doubt in FuzzyQuery
References: <1178177598.4639903e90203@correoweb.uvigo.es>
In-Reply-To: <1178177598.4639903e90203@correoweb.uvigo.es>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

It seems to me like a french stemmer is what you need instead of a fuzzy 
query. What analyzer are you using for your documents and queries ?

-- Stefan

sccarrera@uvigo.es wrote:
> Hi!
>
> I have a problem in dealing whith a fuzzy query in Lucene 2.1.0.
>
> In order to explain my problem, I illustrate it by a simple example:
>
> I would like to recover files including the set of strings
>
> "socit amricaine" and "socits amricaines"
>
> >from a fuzzy query relating the string "socit amricain"
>
> I have tried to follow the instructions in the reference manual, apparently
> without success.
>
> Please, can you help me ?
>
> Regards
>
> --oOo-----------------------------------------------------------------oOo--
>
> Servicio de acceso  correo electrnico va web da Universidade de Vigo
> Servicio de acceso al correo electrnico va web de la Universidad de Vigo
>
> Servicios Informticos [ http://si.uvigo.es ]
> Universidade de Vigo [ http://www.uvigo.es ]
>
> URL: https://correoweb.uvigo.es
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 19:55:45 2007
Return-Path: <java-user-return-27863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73318 invoked from network); 3 May 2007 19:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 19:55:45 -0000
Received: (qmail 24778 invoked by uid 500); 3 May 2007 19:55:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24421 invoked by uid 500); 3 May 2007 19:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24409 invoked by uid 99); 3 May 2007 19:55:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 12:55:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 12:55:37 -0700
Received: by py-out-1112.google.com with SMTP id a25so500440pyi
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 12:55:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fJt/t3uY2mNh/8bnIb6+/hS1YcgK7szusCcAO2WcwGB+scpQgYHxkr9BB0pqic2KPPm/QiC8QQ8eH2Cr1Ezmc9fGvfyOMlke64T3WK63qS6vxin1QgzFlC7nTRPFbOZylDzCKkp59dEIXWcrr9uT9TJs86H3Cs+Rp4jM7HM28YM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JkKwCJlYud7ahNlq9FNbjOGpF72NMdoTwi2uCTWKjZ/P+VAVdN1wdGWyOd2TFf98ThRvtzfn/iQ1wwJm0lEz9caxg6VkvRJbF1n5P92FOqOW499uusCO6W5CIBH23uS8zR0MRodowEoyHhebfNvSja/L+O62vF7Gj/LU1cc5flo=
Received: by 10.35.43.10 with SMTP id v10mr3800342pyj.1178222116366;
        Thu, 03 May 2007 12:55:16 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Thu, 3 May 2007 12:55:16 -0700 (PDT)
Message-ID: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
Date: Thu, 3 May 2007 15:55:16 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: For indexing: how to estimate needed memory?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Our application includes an indexing server that writes to multiple
indexes in parallel (each thread writes to a single index). In order
to avoid an OutOfMemoryError, each request to index a document is
checked to see if the JVM has enough memory available to index the
document.

I know that IndexWriter.ramSizeInBytes() can be used to determine how
much memory was consumed at the conclusion of indexing a document, but
is there a way to know (or estimate) the peak memory consumed while
indexing a document?

For example, in a test set I have a 22 MB document where nearly every
"word" is unique. It has text like this:

'DestAddrType' bin: 00 0D
AttributeCustomerID 'Resources'
AttributeDNIS '7730'
AttributeUserData [295] 00 0E 00 00..
'DNIS_DATA' '323,000,TM,SDM1K5,AAR,,,'
'ENV_FLAG' 'P'
'T_APP_CODE' 'TM'
TelephoneLine' '8'
'C_CALL_DATE' '01/19/06'
'C_START_TIME' '145650'
'C_END_TIME' '145710'
 AttributeCallType 2

 and so on...

 We are indexing a handful of fields for document meta-data - but they
 are tiny compared to the body of the document. Eight of those fields are
 stored (like a messageid, posteddate, typecode).

 The body is indexed into a single field. Our Analyzer splits tokens
 based on Character.isLetterOrDigit() and when in uppercase, indexes a
 lowercase version of the term.

 After indexing that single document ramSizeInBytes() returns 15.7 MB.
 That seems ok to me.

 But for this particular document I found (via trial and error) that
 at -Xmx165m Lucene throws an OutOfMemoryError.

 At -Xmx170m the it indexes successfully.

 Just before calling addDoc() I see maximum available memory of: 160.5 MB

 The 160.5 MB is from this calc:

  Runtime rt = Runtime.getRuntime();
  long maxAvail = rt.maxMemory() - (rt.totalMemory() - rt.freeMemory());

 So it would appear that for this particular document, to avoid an
 OutOfMemoryError I'd need to be certain of having available memory
 approx 7x the doc size.

 I could require 7x the doc size available memory for each doc (on
 the assumption my test document is at the extreme), but for more
 typical documents I'd be over-reserving memory with a result of
 reduced throughput (as docs were forced to wait for sufficient
 available memory that they likely don't need).

 Instead I'm wondering if there is better way for the index server to
 know (or guesstimate) what the memory requirement will be for each
 document? - so that it doesn't start indexing in parallel more
 documents than available memory can support.

 Thanks,
 david.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 20:06:48 2007
Return-Path: <java-user-return-27864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77848 invoked from network); 3 May 2007 20:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 20:06:47 -0000
Received: (qmail 46616 invoked by uid 500); 3 May 2007 20:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46266 invoked by uid 500); 3 May 2007 20:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46253 invoked by uid 99); 3 May 2007 20:06:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 13:06:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 13:06:39 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com  (LM-6) with ESMTP id l43K6HSw005303for <java-user@lucene.apache.org>; Thu, 3 May 2007 16:06:18 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JHH00601EI7Z9@lmco.com> for java-user@lucene.apache.org; Thu, 03 May 2007 16:06:17 -0400 (EDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JHH00IVFEI4T0@lmco.com> for java-user@lucene.apache.org; Thu, 03 May 2007 16:06:04 -0400 (EDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 03 May 2007 16:06:04 -0400
Date: Thu, 03 May 2007 16:06:04 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: Language detection library
In-reply-to: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Language detection library
Thread-Index: AceNvSLP5fxB/dJ9REKxXiueg5AyNgAATX8A
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
X-OriginalArrivalTime: 03 May 2007 20:06:04.0584 (UTC) FILETIME=[7ABCBA80:01C78DBE]
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone knows of a good language detection library that can detect what
language a document (text) is ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 20:17:25 2007
Return-Path: <java-user-return-27865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79693 invoked from network); 3 May 2007 20:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 20:17:24 -0000
Received: (qmail 66930 invoked by uid 500); 3 May 2007 20:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66903 invoked by uid 500); 3 May 2007 20:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66892 invoked by uid 99); 3 May 2007 20:17:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 13:17:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 May 2007 13:17:14 -0700
Received: (qmail 64103 invoked by uid 60001); 3 May 2007 20:16:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=JAhmEgxQ4nEOYLcH9LU3ugbygkKCYxdllDRqTR8nsKvYyMC6ESH3P5gKd2N8W8mv1SQtbLuVwqQQhDfY37BYid5zsbfnqUrzur2t6weIxsryhYdfXFKdaTCSxNUaxkHLibB/JMCszugBGFRAxAo/ZkLgeGNnszGyeAEGe8c0huU=;
X-YMail-OSG: fQZh68QVM1mjC5ANRUtIm8_WYm_2YjunU0oU7KcRSuj0ZC9y44ZWRne.OsCZ74SX6cqYbGwvKFsuh5JoixcXUdmB5yprCusEK6MBq.DUipFtsQ1wDPYrUDqg1lzmggk_hvnBvCzQCOpA
Received: from [70.107.156.108] by web50307.mail.re2.yahoo.com via HTTP; Thu, 03 May 2007 13:16:53 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Thu, 3 May 2007 13:16:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Language detection library
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <126501.63915.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

LingPipe - commercial unless your data/product/service is free.
Nutch language id plugin.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 3, 2007 4:06:04 PM
Subject: Language detection library

Anyone knows of a good language detection library that can detect what
language a document (text) is ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 21:00:25 2007
Return-Path: <java-user-return-27866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90326 invoked from network); 3 May 2007 21:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 21:00:25 -0000
Received: (qmail 60566 invoked by uid 500); 3 May 2007 21:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60529 invoked by uid 500); 3 May 2007 21:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60517 invoked by uid 99); 3 May 2007 21:00:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:00:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: unknown amxa:www.healthline.coma:mail.healthline.coma:mail.hl.locala:64-142-35-98.customer.sonic.neta:sfc-admin1.healthline.commx:mail.healthline.cominclude:sonic.net (herse.apache.org: encountered unrecognized mechanism during SPF processing of domain of jpump@healthline.com)
Received: from [64.142.35.101] (HELO mail.healthline.com) (64.142.35.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:00:15 -0700
Received: from [10.1.1.99] ([10.1.1.99]) by mail.healthline.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 May 2007 13:59:08 -0700
Message-ID: <463A4D49.6010008@healthline.com>
Date: Thu, 03 May 2007 13:59:53 -0700
From: Jason Pump <jason@healthline.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Language detection library
References: <126501.63915.qm@web50307.mail.re2.yahoo.com>
In-Reply-To: <126501.63915.qm@web50307.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 May 2007 20:59:08.0066 (UTC) FILETIME=[E43D8820:01C78DC5]
X-Virus-Checked: Checked by ClamAV on apache.org

http://software.wise-guys.nl/libtextcat/


Otis Gospodnetic wrote:
> LingPipe - commercial unless your data/product/service is free.
> Nutch language id plugin.
>
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, May 3, 2007 4:06:04 PM
> Subject: Language detection library
>
> Anyone knows of a good language detection library that can detect what
> language a document (text) is ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Jason Pump
Technical Architect
Healthline
660 Third Street, Ste. 100
San Francisco, CA 94107
direct dial 415.281.3133
cell 510.812.1784
www.healthline.com 
09 F9 11 02 9D 74 E3 5B D8 41 56 C5 63 56 88 C0


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 21:06:35 2007
Return-Path: <java-user-return-27867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92379 invoked from network); 3 May 2007 21:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 21:06:34 -0000
Received: (qmail 72109 invoked by uid 500); 3 May 2007 21:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71850 invoked by uid 500); 3 May 2007 21:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71839 invoked by uid 99); 3 May 2007 21:06:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:06:33 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:06:26 -0700
Received: by mu-out-0910.google.com with SMTP id i10so724604mue
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 14:06:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=invOs7OJxJOzPweseoVHcEuftqL3adH/LI4MjqL0l/zif0LljT4dUAq089MjrPL7YVY95sIY3I0JrEebNJxh3MoNDOTfB0Rrse0SbeTcFWMnjhZz39XFKpsXWboURVs06FgcrZ9r9Wez7bJcvjftuijRIQ7snNF3CIhT6eXAVMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P69qo3cKO/mwalr5q+UgkGaDddvTfrm502cG5nBurzUT5lYqPzoW1CajEAb5cxQ4lrEW94Y9IyfNAi67QMAKNCaw5kxPQOoclzlRHeXymZsU++4mTsBvCjl3q0Gr+sKRSTHtZ4q6MPpXF1hiCaHegIBbEmTLEgDPCqnzjz1Cuag=
Received: by 10.82.187.16 with SMTP id k16mr4825378buf.1178226364032;
        Thu, 03 May 2007 14:06:04 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 14:06:03 -0700 (PDT)
Message-ID: <359a92830705031406ofd1fd46k901d27ffd4e99682@mail.gmail.com>
Date: Thu, 3 May 2007 17:06:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: For indexing: how to estimate needed memory?
In-Reply-To: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14306_10037842.1178226363983"
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14306_10037842.1178226363983
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Coincidentally, I'm hacking at this very problem....

First, are you sure you're free memory calculation is OK? Why not
just use freeMemory? Perhaps also calling the gc if the avail isn't
enough. Although I confess I don't know the innards of the
interplay of getting the various memory amounts.....

The approach I've been using is to gather some data as I'm indexing
to decide whether to flush the indexwriter or not. That is, record the
size change that ramSizeInBytes() returns before I start to index
a document, record the amount after, and keep the worst
ratio around. This got easier when I subclassed IndexWriter and
overrode the add methods.

But it does require that you call into your writer before you start
adding fields to a document to record the start size......

Then I'm requiring that I have 2X the worst case I've seen for the
incoming document, and flushing (perhaps gc-ing) if I don't have
enough.

Mostly, this is to keep from having to experiment with each different
data set that we get to find the right MERGE & etc. factors to use,
I'm not actually entirely sure that this is giving me any measurable
performance gains.

And I think that this is "good enough". What it allows (as does your
approach) is letting the usual cases of much smaller than 20M+ files
to accumulate and flush reasonably efficiently, and not penalizing
my speed by, say, always keeping 250M free or some such. Again,
the critical thing is that you have to call into here *before* you index.

Curiously, I also got ratios of around 7X, so there's a lot going on.

Keep me posted if you come up with anything really cool!

Best
Erick


On 5/3/07, david m <dmataxo@gmail.com> wrote:
>
> Our application includes an indexing server that writes to multiple
> indexes in parallel (each thread writes to a single index). In order
> to avoid an OutOfMemoryError, each request to index a document is
> checked to see if the JVM has enough memory available to index the
> document.
>
> I know that IndexWriter.ramSizeInBytes() can be used to determine how
> much memory was consumed at the conclusion of indexing a document, but
> is there a way to know (or estimate) the peak memory consumed while
> indexing a document?
>
> For example, in a test set I have a 22 MB document where nearly every
> "word" is unique. It has text like this:
>
> 'DestAddrType' bin: 00 0D
> AttributeCustomerID 'Resources'
> AttributeDNIS '7730'
> AttributeUserData [295] 00 0E 00 00..
> 'DNIS_DATA' '323,000,TM,SDM1K5,AAR,,,'
> 'ENV_FLAG' 'P'
> 'T_APP_CODE' 'TM'
> TelephoneLine' '8'
> 'C_CALL_DATE' '01/19/06'
> 'C_START_TIME' '145650'
> 'C_END_TIME' '145710'
> AttributeCallType 2
>
> and so on...
>
> We are indexing a handful of fields for document meta-data - but they
> are tiny compared to the body of the document. Eight of those fields are
> stored (like a messageid, posteddate, typecode).
>
> The body is indexed into a single field. Our Analyzer splits tokens
> based on Character.isLetterOrDigit() and when in uppercase, indexes a
> lowercase version of the term.
>
> After indexing that single document ramSizeInBytes() returns 15.7 MB.
> That seems ok to me.
>
> But for this particular document I found (via trial and error) that
> at -Xmx165m Lucene throws an OutOfMemoryError.
>
> At -Xmx170m the it indexes successfully.
>
> Just before calling addDoc() I see maximum available memory of: 160.5 MB
>
> The 160.5 MB is from this calc:
>
>   Runtime rt = Runtime.getRuntime();
>   long maxAvail = rt.maxMemory() - (rt.totalMemory() - rt.freeMemory());
>
> So it would appear that for this particular document, to avoid an
> OutOfMemoryError I'd need to be certain of having available memory
> approx 7x the doc size.
>
> I could require 7x the doc size available memory for each doc (on
> the assumption my test document is at the extreme), but for more
> typical documents I'd be over-reserving memory with a result of
> reduced throughput (as docs were forced to wait for sufficient
> available memory that they likely don't need).
>
> Instead I'm wondering if there is better way for the index server to
> know (or guesstimate) what the memory requirement will be for each
> document? - so that it doesn't start indexing in parallel more
> documents than available memory can support.
>
> Thanks,
> david.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14306_10037842.1178226363983--

From java-user-return-27868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 21:20:45 2007
Return-Path: <java-user-return-27868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95330 invoked from network); 3 May 2007 21:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 21:20:45 -0000
Received: (qmail 99308 invoked by uid 500); 3 May 2007 21:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99281 invoked by uid 500); 3 May 2007 21:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99266 invoked by uid 99); 3 May 2007 21:20:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:20:43 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:20:36 -0700
Received: from [10.116.26.160] (inet20909na-0.eranet.pl [213.158.196.64])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l43LKR810054
	for <java-user@lucene.apache.org>; Thu, 3 May 2007 16:20:29 -0500
Message-ID: <463A51F1.7010000@getopt.org>
Date: Thu, 03 May 2007 23:19:45 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Language detection library
References: <126501.63915.qm@web50307.mail.re2.yahoo.com> <463A4D49.6010008@healthline.com>
In-Reply-To: <463A4D49.6010008@healthline.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jason Pump wrote:
> http://software.wise-guys.nl/libtextcat/


... which is what Nutch implements in its language-identifier plugin.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 21:56:45 2007
Return-Path: <java-user-return-27869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4706 invoked from network); 3 May 2007 21:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 21:56:44 -0000
Received: (qmail 51171 invoked by uid 500); 3 May 2007 21:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50822 invoked by uid 500); 3 May 2007 21:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50811 invoked by uid 99); 3 May 2007 21:56:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:56:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 14:56:36 -0700
Received: by ug-out-1314.google.com with SMTP id k40so469000ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 14:56:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Ln/xQ4Vt1F4OM8Wu2980FtizecZhA6cZThSqIGo7kvvCNwMp2pkbj/UpHMSbJUPF+D0rJS6gywfi1B0rXmTF9TYe27n11bdpA/Yoace1GULqDBt1wkwQK4o6eKZbZO7wWpq1msUroWZALdg7Hh0e86D5n6pRKaANSFSEHa+UjxE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=un2ImyuXUh4kaSC8rNJLPam1zPlo5MAZGgVZxNJYWhRcNvJrzozp2e60i+yUb70BTD3CMVFDa/TCPkTn0W1Njm6BOnYJbzpFQbY+msLLG91pIwwIiqEcfiJi1qYKLRzxvFpAOP4ld5eIH8SD92+qlTw5H05lZJUHvlFPgT83CtU=
Received: by 10.67.22.14 with SMTP id z14mr2217869ugi.1178229374654;
        Thu, 03 May 2007 14:56:14 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id z40sm3279879ugc.2007.05.03.14.56.13;
        Thu, 03 May 2007 14:56:13 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com>
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Language detection library
Date: Thu, 3 May 2007 23:55:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


3 maj 2007 kl. 22.06 skrev Mordo, Aviran (EXP N-NANNATEK):

> Anyone knows of a good language detection library that can detect what
> language a document (text) is ?

I posted this some time back:

https://issues.apache.org/jira/browse/LUCENE-826

A bit of proof-of-concept:ish, but it does the job well if you ask  
me. Uses Weka (GPL) and requires at least 150 characters to be trusted.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 23:06:57 2007
Return-Path: <java-user-return-27870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19882 invoked from network); 3 May 2007 23:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 23:06:56 -0000
Received: (qmail 50209 invoked by uid 500); 3 May 2007 23:06:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50009 invoked by uid 500); 3 May 2007 23:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49996 invoked by uid 99); 3 May 2007 23:06:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:06:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of James_Shaw@intuit.com designates 12.149.175.56 as permitted sender)
Received: from [12.149.175.56] (HELO mail4.intuit.com) (12.149.175.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:06:49 -0700
DomainKey-Signature: s=default; d=intuit.com; c=nofws; q=dns; b=xfTjjMwVpBGgtBqJmD44/FgvN10gk2sEubJuBPPu5HPX9U/kmYFm5GPIsa3Dk4gcoA1LnE/UCVOWKA03+j1k6U5nsH/pLPa76y/65iNqvb7Hsh7fPS1vdzOHcMfBh8Lw;
X-SBRS: None
X-IronPort-AV: E=Sophos;i="4.14,487,1170662400"; 
   d="scan'208,217";a="39547732"
Received: from sdgexbh04.corp.intuit.net ([172.17.135.78])
  by mail4.sdg.ie.intuit.com with ESMTP; 03 May 2007 16:06:28 -0700
Received: from SDGEXEVS01.corp.intuit.net ([172.17.135.183]) by sdgexbh04.corp.intuit.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 May 2007 16:06:28 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C78DD7.AE58D02C"
Subject: customizing index file name
Date: Thu, 3 May 2007 16:06:27 -0700
Message-ID: <95570511135B1042A7B5A3269303107004B46E85@SDGEXEVS01.corp.intuit.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: customizing index file name
Thread-Index: AceN1WUP33/LXFemSPq9Dwn6fWrIvAAAiicg
From: "Shaw, James" <James_Shaw@intuit.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 May 2007 23:06:28.0451 (UTC) FILETIME=[AE43C330:01C78DD7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C78DD7.AE58D02C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Does anyone know how to fix the .cfs file name in an index directory?
The deletable and segments file names are always the same, but we have
observed that the .cfs file name changes each time you index a content
directory with some changes to the directory (some deleted files, added
files, etc).  How is the name computed anyways?  Is there any way to fix
it?  Could there be other files generated in an index directory after
optimization besides these 3 files (.cfs, deletable, and segments)?

------_=_NextPart_001_01C78DD7.AE58D02C--

From java-user-return-27871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 23:35:29 2007
Return-Path: <java-user-return-27871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29141 invoked from network); 3 May 2007 23:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 23:35:28 -0000
Received: (qmail 86102 invoked by uid 500); 3 May 2007 23:35:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86074 invoked by uid 500); 3 May 2007 23:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86063 invoked by uid 99); 3 May 2007 23:35:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:35:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:35:21 -0700
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id AF72A4ED8DF
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 09:34:38 +1000 (EST)
Message-ID: <463A7244.1000504@nuix.com>
Date: Fri, 04 May 2007 09:37:40 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20070502)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Implementing lagre secure Lucene search system questions.
References: <4639B6C4.1060709@gmail.com> <200705031243.l43ChlGe031538@idlewild.ccnep.com.np> <359a92830705030733x2d4cedd1xe5b67bda10b00ff8@mail.gmail.com> <000a01c78dad$a3091ad0$2e01a8c0@dorthy>
In-Reply-To: <000a01c78dad$a3091ad0$2e01a8c0@dorthy>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jim shirreffs wrote:
> Hi, I'm a relative Lucene newbe and would appreciate some expert advice.

Sounds like you might want to start a new thread, otherwise people who 
know the answer to your problem might not see your post.

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 03 23:57:00 2007
Return-Path: <java-user-return-27872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34295 invoked from network); 3 May 2007 23:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 May 2007 23:56:59 -0000
Received: (qmail 6482 invoked by uid 500); 3 May 2007 23:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6451 invoked by uid 500); 3 May 2007 23:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6440 invoked by uid 99); 3 May 2007 23:56:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:56:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 16:56:50 -0700
Received: by ug-out-1314.google.com with SMTP id k40so481908ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 16:56:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DTXbND3W8dzFCEix2OYx0wKrv3kXuXYzuCXB4EfoXObXkbnykOtqhwTfyY6Af5YPZrbXcP4uUhjfSdtQfiMxxwbeT3y0PrZaMif5VGpdQqHy7zX68+QtXXqNFHgXxFhHjN0of/u/jNv1NZj/UIbKZMUoTZfKsyRqvYDjQP0sj+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nuR9qCGFpWHAL9WfiEW1aMlv+7xw/6KYPsrre63GTG9gXdM26WpIIM98t87TqT3IFMJOQmyQWfU+vAevNWg/1ZapkmoYuhoyAUipSHXRBNWxaI6bEuAnOs/NUlOFoRYqe8x6s5dWyOrgqafMa1GaAxV8usYrMh8NF34xzZ+kofc=
Received: by 10.82.100.1 with SMTP id x1mr5087391bub.1178236587202;
        Thu, 03 May 2007 16:56:27 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 16:56:27 -0700 (PDT)
Message-ID: <359a92830705031656g6128ea62v9ff7f5f19ce23ee1@mail.gmail.com>
Date: Thu, 3 May 2007 19:56:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: customizing index file name
In-Reply-To: <95570511135B1042A7B5A3269303107004B46E85@SDGEXEVS01.corp.intuit.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15119_9575485.1178236587133"
References: <95570511135B1042A7B5A3269303107004B46E85@SDGEXEVS01.corp.intuit.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15119_9575485.1178236587133
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Uh, what do you mean "fix"? You shouldn't have to do anything
with it at all. What behavior are you observing that you want
to change and why?

Erick

On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
>
> Does anyone know how to fix the .cfs file name in an index directory?
> The deletable and segments file names are always the same, but we have
> observed that the .cfs file name changes each time you index a content
> directory with some changes to the directory (some deleted files, added
> files, etc).  How is the name computed anyways?  Is there any way to fix
> it?  Could there be other files generated in an index directory after
> optimization besides these 3 files (.cfs, deletable, and segments)?
>

------=_Part_15119_9575485.1178236587133--

From java-user-return-27873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 00:20:47 2007
Return-Path: <java-user-return-27873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40429 invoked from network); 4 May 2007 00:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 00:20:46 -0000
Received: (qmail 35869 invoked by uid 500); 4 May 2007 00:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35833 invoked by uid 500); 4 May 2007 00:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35822 invoked by uid 99); 4 May 2007 00:20:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 17:20:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 17:20:38 -0700
Received: by ug-out-1314.google.com with SMTP id k40so484026ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 17:20:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eAKxxv0C6Ss7M7OGWYCNrsEv3Ds9STsqzPFJeqOV0Cxza0xUINdvVj6yN/jNRdmbWifIQc6Y0ocWM2jzbYfVztTWtBL98yICq5CRTa14STxmS9DepPrUK36zydyfiQGrh0Zl6+nM9JmIJpUDVsM8E0bWqHPbIvQlwNnh5RlzQgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WH1hPh/SJ+mOLRH8KlDlLoQefyQrvCINUnH4eraYsefpl2u+EHzvjHo3CvEGiR/OOIcwG+F0o5tqEjTyhgw063erQUX64pRROqrh6ti4vZbA2tCbdPLz9zpIkuh1TkmrEujBkUalh2Lhh9v52MHltQ44c0mI+Jz4w1YItxh5kkw=
Received: by 10.67.29.12 with SMTP id g12mr2293248ugj.1178238016949;
        Thu, 03 May 2007 17:20:16 -0700 (PDT)
Received: by 10.67.64.16 with HTTP; Thu, 3 May 2007 17:20:16 -0700 (PDT)
Message-ID: <6e3ae6310705031720x1eefe928sec4e4e0821838c21@mail.gmail.com>
Date: Thu, 3 May 2007 17:20:16 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Language detection library
In-Reply-To: <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
	 <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com>
	 <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I suppose if a document is indexed as English or French,
when users searching the document,
we need to parse the query as English or French also?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 5/3/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> 3 maj 2007 kl. 22.06 skrev Mordo, Aviran (EXP N-NANNATEK):
>
> > Anyone knows of a good language detection library that can detect what
> > language a document (text) is ?
>
> I posted this some time back:
>
> https://issues.apache.org/jira/browse/LUCENE-826
>
> A bit of proof-of-concept:ish, but it does the job well if you ask
> me. Uses Weka (GPL) and requires at least 150 characters to be trusted.
>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 00:33:26 2007
Return-Path: <java-user-return-27874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41829 invoked from network); 4 May 2007 00:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 00:33:25 -0000
Received: (qmail 47707 invoked by uid 500); 4 May 2007 00:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47407 invoked by uid 500); 4 May 2007 00:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47396 invoked by uid 99); 4 May 2007 00:33:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 17:33:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of James_Shaw@intuit.com designates 12.149.175.11 as permitted sender)
Received: from [12.149.175.11] (HELO mail1.intuit.com) (12.149.175.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 17:33:17 -0700
DomainKey-Signature: s=default; d=intuit.com; c=nofws; q=dns; b=ZL+5hPltdQd2pOyuBKydJqb+yPVRS8GmMcRBAjJwx+1iLOoIJOLWLhbylMscRpofuWNBE/Pyh5JLZR0wWBJQAzOK9wO2TnSL4ogI1Gb3eujxv9x8JYdKn7rIey3jNOah;
X-SBRS: None
X-IronPort-AV: E=Sophos;i="4.14,487,1170662400"; 
   d="scan'208";a="221975687"
Received: from sdgexbh04.corp.intuit.net ([172.17.135.78])
  by mail1.sdg.ie.intuit.com with ESMTP; 03 May 2007 17:32:57 -0700
Received: from SDGEXEVS01.corp.intuit.net ([172.17.135.183]) by sdgexbh04.corp.intuit.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 May 2007 17:32:57 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: customizing index file name
Date: Thu, 3 May 2007 17:32:56 -0700
Message-ID: <95570511135B1042A7B5A3269303107004B46FC9@SDGEXEVS01.corp.intuit.net>
In-Reply-To: <359a92830705031656g6128ea62v9ff7f5f19ce23ee1@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: customizing index file name
Thread-Index: AceN3rxn8npG07JvQIKgkjOXXun3KgABKe2w
From: "Shaw, James" <James_Shaw@intuit.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 May 2007 00:32:57.0082 (UTC) FILETIME=[C2EE05A0:01C78DE3]
X-Virus-Checked: Checked by ClamAV on apache.org

I mean specifying the name of the .csf file, rather than letting Lucene
come up with a name by itself.

I'm actually using Lucene.Net, and we pre-index during our build and
want to include the index in the installer, but the installer can only
reference named files, and it wouldn't work if the .csf changes every
time we index.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, May 03, 2007 4:56 PM
To: java-user@lucene.apache.org
Subject: Re: customizing index file name

Uh, what do you mean "fix"? You shouldn't have to do anything
with it at all. What behavior are you observing that you want
to change and why?

Erick

On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
>
> Does anyone know how to fix the .cfs file name in an index directory?
> The deletable and segments file names are always the same, but we have
> observed that the .cfs file name changes each time you index a content
> directory with some changes to the directory (some deleted files,
added
> files, etc).  How is the name computed anyways?  Is there any way to
fix
> it?  Could there be other files generated in an index directory after
> optimization besides these 3 files (.cfs, deletable, and segments)?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 01:25:52 2007
Return-Path: <java-user-return-27875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60360 invoked from network); 4 May 2007 01:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 01:25:52 -0000
Received: (qmail 4818 invoked by uid 500); 4 May 2007 01:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4786 invoked by uid 500); 4 May 2007 01:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4775 invoked by uid 99); 4 May 2007 01:25:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 18:25:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 18:25:45 -0700
Received: by ug-out-1314.google.com with SMTP id k40so490429ugc
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 18:25:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M3W8t+2i05umK5KPYTSw2OoYGimjS2oc5aloOfq9GbieK0Yn/VQxWcavxjB49XUGiNQzuhWCTL3L8nzBKwscwprijfLUy3taxcDmzdiWjh2HxJL74vMzix4VP9iLo1Ez42IsivwSEvuZ6bANdKkl6wvQpMmpZI027IRrNG//Ezc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TzTULyZJQIqLZkX+jCnX1+FH7yaWKDVEQg+YSOdZkE41Qajpp4pYLFnlpgAZ4YhGNj2rQ5see9gEBWVmwZZV43B9XShX5ndK3ey7OgaAnHs/KklD3vjdLc/93rJRwrLTzXrRyzIt2z1Bv4Vth4Ad3MfX0AZSqUOW4AcmxK/O3yk=
Received: by 10.82.145.7 with SMTP id s7mr5241657bud.1178241923586;
        Thu, 03 May 2007 18:25:23 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 3 May 2007 18:25:23 -0700 (PDT)
Message-ID: <359a92830705031825j510a849bhe71a429022ded0f@mail.gmail.com>
Date: Thu, 3 May 2007 21:25:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: customizing index file name
In-Reply-To: <95570511135B1042A7B5A3269303107004B46FC9@SDGEXEVS01.corp.intuit.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15439_9098487.1178241923532"
References: <359a92830705031656g6128ea62v9ff7f5f19ce23ee1@mail.gmail.com>
	 <95570511135B1042A7B5A3269303107004B46FC9@SDGEXEVS01.corp.intuit.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15439_9098487.1178241923532
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh, fix as in make constant, not fix as in broken <G>...

No, I don't know of any way to do this. Can your installer just
pack up everything in a directory?

Erick

On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
>
> I mean specifying the name of the .csf file, rather than letting Lucene
> come up with a name by itself.
>
> I'm actually using Lucene.Net, and we pre-index during our build and
> want to include the index in the installer, but the installer can only
> reference named files, and it wouldn't work if the .csf changes every
> time we index.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Thursday, May 03, 2007 4:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: customizing index file name
>
> Uh, what do you mean "fix"? You shouldn't have to do anything
> with it at all. What behavior are you observing that you want
> to change and why?
>
> Erick
>
> On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
> >
> > Does anyone know how to fix the .cfs file name in an index directory?
> > The deletable and segments file names are always the same, but we have
> > observed that the .cfs file name changes each time you index a content
> > directory with some changes to the directory (some deleted files,
> added
> > files, etc).  How is the name computed anyways?  Is there any way to
> fix
> > it?  Could there be other files generated in an index directory after
> > optimization besides these 3 files (.cfs, deletable, and segments)?
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15439_9098487.1178241923532--

From java-user-return-27876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 05:56:17 2007
Return-Path: <java-user-return-27876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27144 invoked from network); 4 May 2007 05:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 05:56:16 -0000
Received: (qmail 28825 invoked by uid 500); 4 May 2007 05:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27784 invoked by uid 500); 4 May 2007 05:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27773 invoked by uid 99); 4 May 2007 05:56:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 22:56:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 May 2007 22:56:07 -0700
Received: by wx-out-0506.google.com with SMTP id i29so780400wxd
        for <java-user@lucene.apache.org>; Thu, 03 May 2007 22:55:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fmtEHn+PLn0QrGWnSwob23/Sz9bvtNE1W1/+MbdL5U/Az69okV11TqC/Cr/+qLsJemKlCNXQOcvkD+OET3blUUqyAhmR5eLgrARC/2bWjLSnXKl4UzZiBKtE2vKNH5Fg1EYXf7/P9mMEXux2qljNHrPY8eXlrlXUh6TWGVlJ4BE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iEdXmbFubf2NhZ0DIDaAxYYtT7k6fsJbJVhyWLTISN6TVBTybePahJDyuM5asFNBHVMGWUNPUaRHlOaB7X/kSbR/U86LqyGT8/mvg4OXMATeata62uWIyahmdlMG8TJ+z4/86qp8NbYojPF+rQom3VvVMvh/QjfmZ0uw7hw6CCI=
Received: by 10.78.170.6 with SMTP id s6mr1301542hue.1178258146146;
        Thu, 03 May 2007 22:55:46 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 30sm4711819ugf.2007.05.03.22.55.43;
        Thu, 03 May 2007 22:55:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310705031720x1eefe928sec4e4e0821838c21@mail.gmail.com>
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com> <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com> <6e3ae6310705031720x1eefe928sec4e4e0821838c21@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1B845B59-EC3C-4281-A051-E1727614C600@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Language detection library
Date: Fri, 4 May 2007 07:54:55 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


4 maj 2007 kl. 02.20 skrev Chris Lu:

> I suppose if a document is indexed as English or French,
> when users searching the document,
> we need to parse the query as English or French also?

If you do some language specific token analysis such as stemming, yes.

Detecting the language on such small texts is sort of tricky though.  
You might want to introduce more dimensions in the classifier: user  
location, user locale, et c. Perhaps you want to store stemmed data  
in language specific fields. It might also be a good idea to place an  
initial query and re-classifiy to one of the top n scoring language  
and then replace the query.

The easiest way out is to simply ask the user what language they want  
to search in. And that seems to be the most common.


>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php? 
> title=Create_Lucene_Database_Search_in_3_minutes
>
>
> On 5/3/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>> 3 maj 2007 kl. 22.06 skrev Mordo, Aviran (EXP N-NANNATEK):
>>
>> > Anyone knows of a good language detection library that can  
>> detect what
>> > language a document (text) is ?
>>
>> I posted this some time back:
>>
>> https://issues.apache.org/jira/browse/LUCENE-826
>>
>> A bit of proof-of-concept:ish, but it does the job well if you ask
>> me. Uses Weka (GPL) and requires at least 150 characters to be  
>> trusted.
>>
>>
>> --
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 08:39:37 2007
Return-Path: <java-user-return-27877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69810 invoked from network); 4 May 2007 08:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 08:39:35 -0000
Received: (qmail 63437 invoked by uid 500); 4 May 2007 08:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63410 invoked by uid 500); 4 May 2007 08:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63399 invoked by uid 99); 4 May 2007 08:39:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 01:39:33 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 01:33:32 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 9C55221C548
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 04:33:11 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 04 May 2007 04:33:11 -0400
X-Sasl-enc: gwHvDdiw0kYjcV2pqfHGb80+ApeCRnVG1G9eoHend5LL 1178267591
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 6E8C526D43
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 04:33:11 -0400 (EDT)
Message-ID: <463AEFC5.1060700@fastmail.fm>
Date: Fri, 04 May 2007 09:33:09 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Unable to get wildcards to work
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have indexed some records in a JTable , and I am trying to return all 
records where the value in a particular column starts with a particular 
value(http://musicbrainz.org:), but I get no matches. If I match for an 
exact values it works fine, Im stumped as to why this would be the case

//Works ok
DataIndexer.getInstance().singleTermSearch(ID3TagNames.INDEX_UFID,"http://musicbrainz.org:4d08a37a-6e71-401c-ad54-dbe5a8ae919a");  


//No matches (last option is what I really want to do)
DataIndexer.getInstance().singleTermSearch(ID3TagNames.INDEX_UFID,"http://musicbrainz.org:4d08a37a-6e71-401c-ad54-dbe5a8ae919?");  

DataIndexer.getInstance().singleTermSearch(ID3TagNames.INDEX_UFID,"http://musicbrainz.org:4d08a37a-6e71-401c-ad54-dbe5a8ae919*");  

DataIndexer.getInstance().singleTermSearch(ID3TagNames.INDEX_UFID,"http://musicbrainz.org:*");  



My Index is constructed using a KeywordAnalyser, the following line add 
a value to the index (there is one document per row)

 document.add(new Field((String) tc.getIdentifier(), columnValue, 
Field.Store.YES, Field.Index.UN_TOKENIZED));

My Search Code is:
 public List <Integer> singleTermSearch(Integer columnId,String 
searchstring)
    {
        List <Integer> matchingRows = new ArrayList<Integer>();
        try
        {
            //make a new index searcher with the in memory (RAM) index.
            IndexSearcher is = new IndexSearcher(directory);

            //Search on column columnId for value searchstring
            TermQuery query = new TermQuery(new 
Term(String.valueOf(columnId),searchstring));

            //run the search
            Hits hits = is.search(query);

            Iterator i = hits.iterator();
            while(i.hasNext())
            {
                Document doc = ((Hit)i.next()).getDocument();
                matchingRows.add(new 
Integer(doc.getField(ROW_NUMBER).stringValue()));
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return matchingRows;
    }

thanks Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 09:51:54 2007
Return-Path: <java-user-return-27878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92157 invoked from network); 4 May 2007 09:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 09:51:52 -0000
Received: (qmail 1226 invoked by uid 500); 4 May 2007 09:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 977 invoked by uid 500); 4 May 2007 09:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 966 invoked by uid 99); 4 May 2007 09:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 02:51:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 02:51:44 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id D90F83163C
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 18:51:21 +0900 (JST)
Message-ID: <463B0213.5090601@r.email.ne.jp>
Date: Fri, 04 May 2007 18:51:15 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Unable to get wildcards to work
References: <463AEFC5.1060700@fastmail.fm>
In-Reply-To: <463AEFC5.1060700@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Pail,

Try WildcardQuery instead of TermQuery as follows:

           //Search on column columnId for value searchstring
           WildcardQuery query = new WildcardQuery(new 
Term(String.valueOf(columnId),searchstring));

Thank you,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 10:13:25 2007
Return-Path: <java-user-return-27879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98617 invoked from network); 4 May 2007 10:13:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 10:13:24 -0000
Received: (qmail 45350 invoked by uid 500); 4 May 2007 10:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45313 invoked by uid 500); 4 May 2007 10:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45302 invoked by uid 99); 4 May 2007 10:13:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 03:13:22 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 03:13:15 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id D49EA21DB50
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 06:12:53 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 04 May 2007 06:12:54 -0400
X-Sasl-enc: fP9CHWJi403AIn13LI7dK0tZ+Gh5U5xDC89gnD7sckI+ 1178273573
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id A5B132B983
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 06:12:52 -0400 (EDT)
Message-ID: <463B0722.70501@fastmail.fm>
Date: Fri, 04 May 2007 11:12:50 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Unable to get wildcards to work
References: <463AEFC5.1060700@fastmail.fm> <463B0213.5090601@r.email.ne.jp>
In-Reply-To: <463B0213.5090601@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, youve sparked a thought Ive now realised I was calling the wrong 
method i had another method (simpleSearch) that used the Query parser to 
parse the search string which I should have been using

cheers Paul

Koji Sekiguchi wrote:
> Hi Pail,
>
> Try WildcardQuery instead of TermQuery as follows:
>
>           //Search on column columnId for value searchstring
>           WildcardQuery query = new WildcardQuery(new 
> Term(String.valueOf(columnId),searchstring));
>
> Thank you,
>
> Koji
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 10:32:58 2007
Return-Path: <java-user-return-27880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3994 invoked from network); 4 May 2007 10:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 10:32:55 -0000
Received: (qmail 72909 invoked by uid 500); 4 May 2007 10:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72866 invoked by uid 500); 4 May 2007 10:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72855 invoked by uid 99); 4 May 2007 10:32:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 03:32:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 03:32:48 -0700
Received: by py-out-1112.google.com with SMTP id a25so629893pyi
        for <java-user@lucene.apache.org>; Fri, 04 May 2007 03:32:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tWwqGnJHetrYStlHLrlfrUg3tjebqpbbEmASeg4zjGDggVOwqHtl9Q/Tdoe0gpSbbd/bfDYHQ9C0QltESdSW0Ygwxuqp+G51UqqdOlp5ANicqaOrWveiJz3k5vB2nJDXR/xbLdZyVFDhQeAOS2ty9I1+hj0aYitrF5NVEK3dDUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eh5iGZf1aoJ3OQsvEE8Bkj9a8piouXsdw1/uJfGH8/SuZQoa1fsbGCJnX61J8TDCQ5H5rUs9MbqQ0vmK11alGckqDOWb+TOaWb3jW0l+xDpp+gxBRJdF42lq+MYZSXA6Fx9CdoBzMQOJBCiF4IjK/Sy4FuO8LyGzqP42qqnr2eM=
Received: by 10.35.127.7 with SMTP id e7mr80328pyn.1178274747237;
        Fri, 04 May 2007 03:32:27 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Fri, 4 May 2007 03:32:27 -0700 (PDT)
Message-ID: <3563fa0d0705040332u6dc1ef5fj4bc8c84074cf7ca2@mail.gmail.com>
Date: Fri, 4 May 2007 06:32:27 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: For indexing: how to estimate needed memory?
In-Reply-To: <359a92830705031406ofd1fd46k901d27ffd4e99682@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
	 <359a92830705031406ofd1fd46k901d27ffd4e99682@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> First, are you sure you're free memory calculation is OK? Why not
> just use freeMemory?
I _think_ my calculation is ok - my reasoning:

Runtime.maxMemory() - Amount of memory that can be given to the JVM -
based on -Xmx<value>

Runtime.totalMemory() - Amount of memory currently owned by the JVM

Runtime.freeMemory() - Amount of unused memory currently owned by the JVM

The amount of memory currently in use (inUse) = totalMemory() - freeMemory()

The amount we can still get (before hitting -Xmx<value>) = maxMemory() - inUse
And in the absence of -Xms, nothing to say we will be given that much.

> Perhaps also calling the gc if the avail isn't
> enough. Although I confess I don't know the innards of the
> interplay of getting the various memory amounts.....
I do call the gc - but sparingly. If I've done a flush to reclaim
memory in hopes of having enough memory for a pending document, then
I'll call the gc before checking if I now have enough memory
available. However, I too know little of the gc workings. On the
assumption that the JRE is smarter at knowing how & when to
execute gc than I am, I operate on the premise that it is not a good
practice to routinely be calling the gc.

> The approach I've been using is to gather some data as I'm indexing
> to decide whether to flush the indexwriter or not. That is, record the
> size change that ramSizeInBytes() returns before I start to index
> a document, record the amount after, and keep the worst
> ratio around. This got easier when I subclassed IndexWriter and
> overrode the add methods.
I agree this gives a conservative measure of the worse case memory
consumption by an indexed document. But it measures memory _after_
indexing. My observation is that the peak memory usage occurs _during_
indexing - so that if the process is low on memory, that is when the
problem (OutOfMemoryError) will hit. In my mind it is the peak usage
that really matters.

If there were a way to record and retrieve peak usage for each
document, we would be able to see if there is a relationship between
the peak during indexing and ramSizeInBytes() after indexing. If there
were a (somewhat) predictable relationship, then I think we'd have a
more accurate value to decide on a factor to use for avoiding
OutOfMemeoryErrors.

> Then I'm requiring that I have 2X the worst case I've seen for the
> incoming document, and flushing (perhaps gc-ing) if I don't have
> enough.
Based on the data I've collected, we've been using 1.5x - 2.0x of
document size as our value (and made it a configuration parameter).

> And I think that this is "good enough". What it allows (as does your
> approach) is letting the usual cases of much smaller than 20M+ files
> to accumulate and flush reasonably efficiently, and not penalizing
> my speed by, say, always keeping 250M free or some such.
Agreed... To me it is a balancing act of avoiding OutOfMemoryErrors
without unnecessarily throttling throughput in order to keep that 250M
(or whatever) of memory available for what we think is the unusual
document - and one that arrives for indexing while available memory
is relatively low. If it arrives when the indexer isn't busy with other
documents, then likely not a problem anyway.

>
> Keep me posted if you come up with anything really cool!
Ditto.

Thanks, david.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 13:49:18 2007
Return-Path: <java-user-return-27881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69318 invoked from network); 4 May 2007 13:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 13:49:17 -0000
Received: (qmail 7692 invoked by uid 500); 4 May 2007 13:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7512 invoked by uid 500); 4 May 2007 13:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7500 invoked by uid 99); 4 May 2007 13:49:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 06:49:14 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 06:49:07 -0700
Received: by ug-out-1314.google.com with SMTP id k40so564070ugc
        for <java-user@lucene.apache.org>; Fri, 04 May 2007 06:48:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rQXWQlaTor3tE9Hjmdaprtn06KGXoc+fweBzG6sykkmWGSD/+Jz25oiGL2NvehlmWAldi20mmCf10nmHSvNL1ZjCCCesBKoxnzkNd3w++RDztdfpTv0ujz/IK/0oEBmCppUYQyMpFnpcGianUpEATSMhr3RCF/UBRAiMW+08+lE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HU/lNtg/XeUttohdUjHhIU2fTqjfBk7IejYvKwZOAN5ETRpPFhRgIu2VGriBTg1mZ4IjaPFABbmsmje9z6tzVnet4V4keaA2wnKGGu2FQ0JTZNpBRAom1k8tLiQlZjaTUrxIk4FJTFoRnPJmd88M5alDbehMgKDxnQhL6ULs9kk=
Received: by 10.82.148.7 with SMTP id v7mr6554070bud.1178286522531;
        Fri, 04 May 2007 06:48:42 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Fri, 4 May 2007 06:48:42 -0700 (PDT)
Message-ID: <359a92830705040648s48b266c8n58c55bc4db1fe35d@mail.gmail.com>
Date: Fri, 4 May 2007 09:48:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: For indexing: how to estimate needed memory?
In-Reply-To: <3563fa0d0705040332u6dc1ef5fj4bc8c84074cf7ca2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18475_14747438.1178286522470"
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com>
	 <359a92830705031406ofd1fd46k901d27ffd4e99682@mail.gmail.com>
	 <3563fa0d0705040332u6dc1ef5fj4bc8c84074cf7ca2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18475_14747438.1178286522470
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A minor clarification. What I'm measuring is the size of the index
before I index a doc, and the size after (this involves "expert" usage
of my IndexWriter subclass....). Using those two figures, I get
a "bloat" factor. That is, how much the memory was consumed by
this document in the index. Say it's 7x the size of the original doc.

So when a doc comes in to be indexed, I multiply the incoming doc
size x7 x2 and flush if necessary.

I absolutely agree that this is a crude measure and doesn't take
into account memory consumption as that document is
indexed.

And I *strongly* suspect that the ridiculous factors I'm getting
(the index grows, at times, by 7x the size of the original doc)
are an artifact of some sort of "allocate some extra memory for
structure X" rather than a true measure of how much space that
document uses. Especially since I'm indexing 11G of raw
data in a 4G index. While storing lots of raw data. I'm imagining that
I index, say, a 20K document. And my index grows by 140K. All
because some internal structure say doubled in size. I have no
evidence for this, except that my index isn't 77G. Which suggests
that a better measure would be the total raw byte sizes of
all the documents compared to the total size of the index in
ram. Between flushes. Hmmmmm......

I guess in my situation, I'm indexing only as a batch process. Currently,
we build an index then deploy it then don't change except once in a
great while (months/years). So I can afford crude measurements and
figure out what to fix up when it explodes, since it has no chance
of affecting production systems. Which is a great luxury.....

I agree with all your points, it sounds like you've been around this
block once or twice. As I said, my main motivation is to have a
way to avoid experimenting with the various index factors, merge,etc.
on the *next* project. And because I got interested <G>. No doubt
I'll run into a situation where efficiency really does count, but so far
overnight is fast enough for building my indexes......

After noodling on this for a while, I'm probably going to throw it all
out and just flush when I have less than 100M free. Memory is
cheap and that would accomplish my real goal which is just to
have a class I can use to index the next project that doesn't
require me to fiddle with various factors and gives "good enough"
performance. If the indexing speed is painful, I'll revisit this. But
I suspect that squeezing the use of the last 90M in this case
won't buy me much. Now that I'm thinking of it, it would be
easy to measure how much better using the last 100M by
just comparing the times for building the index with an extra
100M allocated to the JVM. *Then* figure out whether the
speed gain was worth the complexity.....

It's nice to use writing things like this to figure out what I should
*really* be concerned with.

Best
Erick

On 5/4/07, david m <dmataxo@gmail.com> wrote:
>
> > First, are you sure you're free memory calculation is OK? Why not
> > just use freeMemory?
> I _think_ my calculation is ok - my reasoning:
>
> Runtime.maxMemory() - Amount of memory that can be given to the JVM -
> based on -Xmx<value>
>
> Runtime.totalMemory() - Amount of memory currently owned by the JVM
>
> Runtime.freeMemory() - Amount of unused memory currently owned by the JVM
>
> The amount of memory currently in use (inUse) = totalMemory() -
> freeMemory()
>
> The amount we can still get (before hitting -Xmx<value>) = maxMemory() -
> inUse
> And in the absence of -Xms, nothing to say we will be given that much.
>
> > Perhaps also calling the gc if the avail isn't
> > enough. Although I confess I don't know the innards of the
> > interplay of getting the various memory amounts.....
> I do call the gc - but sparingly. If I've done a flush to reclaim
> memory in hopes of having enough memory for a pending document, then
> I'll call the gc before checking if I now have enough memory
> available. However, I too know little of the gc workings. On the
> assumption that the JRE is smarter at knowing how & when to
> execute gc than I am, I operate on the premise that it is not a good
> practice to routinely be calling the gc.
>
> > The approach I've been using is to gather some data as I'm indexing
> > to decide whether to flush the indexwriter or not. That is, record the
> > size change that ramSizeInBytes() returns before I start to index
> > a document, record the amount after, and keep the worst
> > ratio around. This got easier when I subclassed IndexWriter and
> > overrode the add methods.
> I agree this gives a conservative measure of the worse case memory
> consumption by an indexed document. But it measures memory _after_
> indexing. My observation is that the peak memory usage occurs _during_
> indexing - so that if the process is low on memory, that is when the
> problem (OutOfMemoryError) will hit. In my mind it is the peak usage
> that really matters.
>
> If there were a way to record and retrieve peak usage for each
> document, we would be able to see if there is a relationship between
> the peak during indexing and ramSizeInBytes() after indexing. If there
> were a (somewhat) predictable relationship, then I think we'd have a
> more accurate value to decide on a factor to use for avoiding
> OutOfMemeoryErrors.
>
> > Then I'm requiring that I have 2X the worst case I've seen for the
> > incoming document, and flushing (perhaps gc-ing) if I don't have
> > enough.
> Based on the data I've collected, we've been using 1.5x - 2.0x of
> document size as our value (and made it a configuration parameter).
>
> > And I think that this is "good enough". What it allows (as does your
> > approach) is letting the usual cases of much smaller than 20M+ files
> > to accumulate and flush reasonably efficiently, and not penalizing
> > my speed by, say, always keeping 250M free or some such.
> Agreed... To me it is a balancing act of avoiding OutOfMemoryErrors
> without unnecessarily throttling throughput in order to keep that 250M
> (or whatever) of memory available for what we think is the unusual
> document - and one that arrives for indexing while available memory
> is relatively low. If it arrives when the indexer isn't busy with other
> documents, then likely not a problem anyway.
>
> >
> > Keep me posted if you come up with anything really cool!
> Ditto.
>
> Thanks, david.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18475_14747438.1178286522470--

From java-user-return-27882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 15:04:58 2007
Return-Path: <java-user-return-27882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8445 invoked from network); 4 May 2007 15:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 15:04:56 -0000
Received: (qmail 1129 invoked by uid 500); 4 May 2007 15:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1088 invoked by uid 500); 4 May 2007 15:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1074 invoked by uid 99); 4 May 2007 15:04:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 08:04:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 08:04:46 -0700
Received: from emss07g01.ems.lmco.com (relay5.ems.lmco.com [166.29.2.16])by mailgw1a.lmco.com  (LM-6) with ESMTP id l44F4KUs001438for <java-user@lucene.apache.org>; Fri, 4 May 2007 09:04:25 -0600 (MDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JHI00B01V6XGL@lmco.com> for java-user@lucene.apache.org; Fri, 04 May 2007 09:04:25 -0600 (MDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JHI003BFV712L@lmco.com> for java-user@lucene.apache.org; Fri, 04 May 2007 09:04:13 -0600 (MDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Fri,
 04 May 2007 11:04:13 -0400
Date: Fri, 04 May 2007 11:04:12 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Language detection library
In-reply-to: <126501.63915.qm@web50307.mail.re2.yahoo.com>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A4@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Language detection library
Thread-Index: AceNwBmP+m/lQ+efRFmirJ/EbDkTwAAnUS4w
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <126501.63915.qm@web50307.mail.re2.yahoo.com>
X-OriginalArrivalTime: 04 May 2007 15:04:13.0046 (UTC) FILETIME=[79D51960:01C78E5D]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, I got the natch plugin, and it is working great 

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Thursday, May 03, 2007 4:17 PM
To: java-user@lucene.apache.org
Subject: Re: Language detection library

LingPipe - commercial unless your data/product/service is free.
Nutch language id plugin.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 3, 2007 4:06:04 PM
Subject: Language detection library

Anyone knows of a good language detection library that can detect what
language a document (text) is ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 15:45:26 2007
Return-Path: <java-user-return-27883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27099 invoked from network); 4 May 2007 15:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 15:45:25 -0000
Received: (qmail 71342 invoked by uid 500); 4 May 2007 15:45:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71314 invoked by uid 500); 4 May 2007 15:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71303 invoked by uid 99); 4 May 2007 15:45:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 08:45:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 08:45:16 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hjzxn-00059V-J1
	for java-user@lucene.apache.org; Fri, 04 May 2007 08:44:55 -0700
Message-ID: <10323752.post@talk.nabble.com>
Date: Fri, 4 May 2007 08:44:55 -0700 (PDT)
From: larry hughes <typhoon_larry@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Copy index while updating the index
In-Reply-To: <1176232889.28232.1183911416@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: typhoon_larry@hotmail.com
References: <335064.23080.qm@web50311.mail.re2.yahoo.com> <1176232889.28232.1183911416@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there an example on how to do this (or can someone provide a sample code)? 
I've been looking at the Lucene API, particularly at IndexCommitPoint and
IndexDeletionPolicy interfaces,  but have no idea what I need to do in order
to implement a live backup.  Any help would be appreciated.

LH



Michael McCandless-2 wrote:
> 
> 
> You do need to be careful with this because if a writer commits while
> you are copying you can easily get a copy that's unusable (is missing
> files).
> 
> When you instantiate an IndexReader, it actually holds open most files
> that it uses which protects them from being deleted.  So in theory if
> you could open a reader successfully, ask it which files it is using,
> then copy those files.  Hmmm actually some files it does not hold open
> (eg the *.del files, and the segments_N file) which means this
> approach won't work.  Also on Unix the filenames disappear even though
> the underlying files are still held open.
> 
> One way that would work is to use the new custom deletion policy
> feature.
> 
> Unfortunately, this is not yet released (only available on trunk).
> The idea is fairly simple.  Make your own deletion policy which at
> normal times (no backup running) is the default policy (delete all but
> the last commit point).  Then, when you want to start a backup, this
> policy would mark the one commit point its now on as not deletable.
> This ensures the writer will not remove any of its files, even as new
> commits are being done.  Then, your backup copies these files off, and
> it's OK if this takes a while (eg if it runs with low priority or
> something) since writer won't delete the files.  Finally when backup
> is done, the deletion policy lets that commit point be deleted again
> and writer will remove its files.
> 
> This should allow you to do "live" (not pause indexing) backups of
> a Lucene index, cross platform.
> 
> Mike
> 
> "Otis Gospodnetic" <otis_gospodnetic@yahoo.com> wrote:
>> Here is one way to do it:
>> You can read/open an index at any point, even when it's being modified. 
>> You can then open a new FSDirectory pointing to a new directory and add
>> your original FSDirectory to that new FSDirectory.  That will copy the
>> index.  Of course, any new documents you add to the original index after
>> you've opened it will not be copied.  The same goes for any documents
>> that were still buffered in memory when you opened the index, and were
>> not yet flushed to disk.
>> 
>> See also:
>> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
>> 
>> Otis
>> 
>> 
>> 
>> ----- Original Message ----
>> From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, April 10, 2007 12:06:12 PM
>> Subject: Copy index while updating the index
>> 
>> Hello,
>> 
>> I have a scenario, where we need to set up our application, that uses
>> Lucene (and has on-demand indexing of documents) in Disaster-recovery
>> site.
>> 
>> The simple files/attachments used by our application can be simply
>> copied to the DR site just by syncing (manual copying).
>> 
>> Yes, we can also copy the index directory, but problem arises when we
>> have copy the index directory, while the index directory is being
>> updated, that means the Index is open.
>> 
>> Wont this corrupt the index directory.
>> 
>> Does Lucene 2.0 have support for copying opened index directory, without
>> corrupting it.
>> 
>> Please do let me know.
>> 
>> 
>> Thanks,
>> Divya.
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Copy-index-while-updating-the-index-tf3554068.html#a10323752
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 18:47:33 2007
Return-Path: <java-user-return-27884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96594 invoked from network); 4 May 2007 18:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 18:47:32 -0000
Received: (qmail 90803 invoked by uid 500); 4 May 2007 18:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90765 invoked by uid 500); 4 May 2007 18:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90751 invoked by uid 99); 4 May 2007 18:47:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 11:47:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 11:47:23 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
x-cr-puzzleid: {4BE8BC32-F4EE-4627-9D63-03A5DF0998D3}
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C78E7C.9A127F60"
Content-class: urn:content-classes:message
Subject: Help with Ajax-based prefix query?
x-cr-hashedpuzzle: 5rE= Auky BIIV BdxT C4Ow EmW2 Eoyv FhqG GAa7 GkpU G7R/ H/L5 IOMs JGus JRMC J0o4;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{4BE8BC32-F4EE-4627-9D63-03A5DF0998D3};bQBhAHgAQABhAHIAdABzAGEAbABsAGkAYQBuAGMAZQBsAGEAYgBzAC4AYwBvAG0A;Fri, 04 May 2007 18:46:58 GMT;SABlAGwAcAAgAHcAaQB0AGgAIABBAGoAYQB4AC0AYgBhAHMAZQBkACAAcAByAGUAZgBpAHgAIABxAHUAZQByAHkAPwA=
Date: Fri, 4 May 2007 14:46:58 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2007@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help with Ajax-based prefix query?
Thread-Index: AceOfJhWEvZorSfvQgCa7KLQvlt2ng==
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C78E7C.9A127F60
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi.  I'm trying to design a proper index and query mechanism for looking =
up a business listing using an Ajax-style autocompleting text box.  =
While I have gotten "versions" to work, I'm wondering what the optimal =
approach is.=20

=20

Someone may be looking for "Appleton Caf=E9."  That listing might be =
under "Appleton Caf=E9 and Bakery", or "Appleton Bakery Caf=E9" etc etc. =
 When they type "apple" I want to match it (easy), and when they type =
"Appleton ca" I want to match it also.  I'm taking a simple attempt now, =
which is just a PrefixQuery.  Problem is I seem to need to Store it, =
Tokenize it (KeywordAnalyzer), and store the Term Vector just to get the =
PrefixQuery to work.  Is this true?  Since I already have the "title" =
field stored using a Snowball analyzer in another field, I want the =
minimum bits required to make the PrefixQuery work to be stored in the =
index.

=20

Thanks very much for any pointers,

--Max


------_=_NextPart_001_01C78E7C.9A127F60--

From java-user-return-27885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 19:08:00 2007
Return-Path: <java-user-return-27885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7635 invoked from network); 4 May 2007 19:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 19:07:59 -0000
Received: (qmail 28936 invoked by uid 500); 4 May 2007 19:07:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28897 invoked by uid 500); 4 May 2007 19:07:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28886 invoked by uid 99); 4 May 2007 19:07:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 12:07:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 12:07:49 -0700
Received: by an-out-0708.google.com with SMTP id c3so909325ana
        for <java-user@lucene.apache.org>; Fri, 04 May 2007 12:07:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BomPzC3tbtMgvbf10gaPk4GDvZPpzTx9skcBiy8yDi5q63pFkDJ/jnDPOnKKro8c2tduXGszOnKQ5LElj7MeKWr1zYXJYlKmxPF/O7vgZMR8RpsLuGDNlfN2XtA14z9xyDesknvDo9gyWGv82HiflSf0mI71eJzbE6CXlx2gmMQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iXPG03apO1PLLCQWa6R3nnaGSUyjMZxUrhcDXdEaEAbko3tU2RXRk7ORHIuVA7wbUQZsLy+5ZFC/ggk0PqE9j9HNIhT2mcjA4/o8CwrvjQFnPfRln17Qr37USqwRYV3BjDPk1e6WRfZxNkOn/m8yrLCS0iCG9PWpz+yGtZAD89k=
Received: by 10.100.121.12 with SMTP id t12mr3023101anc.1178305648235;
        Fri, 04 May 2007 12:07:28 -0700 (PDT)
Received: by 10.100.9.12 with HTTP; Fri, 4 May 2007 12:07:28 -0700 (PDT)
Message-ID: <ab0709bf0705041207u6a7d144cl2c7ee35fb4dfea2f@mail.gmail.com>
Date: Fri, 4 May 2007 15:07:28 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help with Ajax-based prefix query?
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2007@sbsrv.AALabs.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53452_14206127.1178305648162"
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2007@sbsrv.AALabs.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53452_14206127.1178305648162
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

If I where going to do this I would create special autocomplete index. I
would add each name that I wanted to be able to autocomplete on to this
index. You can tokenize if you want (the lowercase filter) but do not use
something that will split up words...you want "Appleton Bakery Caf=E9" to g=
o
in as a single token. If you find a term already in the index, you can
reindex it with a higher boost to affect ordering in the suggestions. You
certainly do want to store (to retrieve the suggestions using the prefix
query), you don't need Term Vectors, and I see no reason to use the
KeywordAnalyzer (you want apple to match Apple).

- Mark

On 5/4/07, Max Metral <max@artsalliancelabs.com> wrote:
>
> Hi.  I'm trying to design a proper index and query mechanism for looking
> up a business listing using an Ajax-style autocompleting text box.  While=
 I
> have gotten "versions" to work, I'm wondering what the optimal approach i=
s.
>
>
>
> Someone may be looking for "Appleton Caf=E9."  That listing might be unde=
r
> "Appleton Caf=E9 and Bakery", or "Appleton Bakery Caf=E9" etc etc.  When =
they
> type "apple" I want to match it (easy), and when they type "Appleton ca" =
I
> want to match it also.  I'm taking a simple attempt now, which is just a
> PrefixQuery.  Problem is I seem to need to Store it, Tokenize it
> (KeywordAnalyzer), and store the Term Vector just to get the PrefixQuery =
to
> work.  Is this true?  Since I already have the "title" field stored using=
 a
> Snowball analyzer in another field, I want the minimum bits required to m=
ake
> the PrefixQuery work to be stored in the index.
>
>
>
> Thanks very much for any pointers,
>
> --Max
>
>

------=_Part_53452_14206127.1178305648162--

From java-user-return-27886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 19:18:08 2007
Return-Path: <java-user-return-27886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12653 invoked from network); 4 May 2007 19:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 19:18:07 -0000
Received: (qmail 42417 invoked by uid 500); 4 May 2007 19:18:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42040 invoked by uid 500); 4 May 2007 19:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42029 invoked by uid 99); 4 May 2007 19:18:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 12:18:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bill.w.au@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 12:17:58 -0700
Received: by nz-out-0506.google.com with SMTP id i1so938775nzh
        for <java-user@lucene.apache.org>; Fri, 04 May 2007 12:17:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=gkG1ODSnQH7LtNU/UB2Z5cjofo4wLzOHtLh+y2pZOd4POvzpQrBwqtGqYzlBfDl0F7wnVbyrlqoDbWTzmbgEn5mqKG7k1SiwfM47sbmM0F+tugTONA4PPMBmU/TKfeX0AK8i9NAvJuracYaU+DWUXCaYsnBpWrgl9B+kfkV3Q50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cH76WGc4Ls1SHYso6HAul70b5QGnZNr/y2XUYy2gxXiQChIOMSTT1spF1jrmXoVmx34AZZeuOcPd+x5YAhV57sEIcQNjPbDB4MPiVb4aYPAUjQJXH7+HIM1jusub54wCJ4XJI8fipkZChbuEbo9I/ho5vruQYCx9wUUObHMl6u0=
Received: by 10.114.183.1 with SMTP id g1mr1231337waf.1178306257140;
        Fri, 04 May 2007 12:17:37 -0700 (PDT)
Received: by 10.114.197.4 with HTTP; Fri, 4 May 2007 12:17:37 -0700 (PDT)
Message-ID: <3b5f72030705041217j3105215au4f7a8d1a4a21633a@mail.gmail.com>
Date: Fri, 4 May 2007 15:17:37 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser, PrefixQuery, and case sensitivity
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55215_2762717.1178306257088"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55215_2762717.1178306257088
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have an index with both fields that are case sensitive and insensitive.  I
am trying to use a QueryParser to accept query from end users for
searching.  The default behavior of QueryParser is to lowercase the prefix
text to create the PrefixQuery.  So wildcard search on the case sensitive
fields does not work.  If I use QueryParser.setLowercaseWildcardTerm(false),
then wildcard search on the case insensitive fields does not work.

Here is an example with two fields, name (case sensitive) and desc (case
insensitive).  The docment is

name (case sensitive): PowerBook
desc (case insensitive): professional  mac laptop

I want to be able to find the document with the following query:

+name:Power* +field:Pro*

Bill

------=_Part_55215_2762717.1178306257088--

From java-user-return-27887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 04 20:20:35 2007
Return-Path: <java-user-return-27887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42218 invoked from network); 4 May 2007 20:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 May 2007 20:20:33 -0000
Received: (qmail 28460 invoked by uid 500); 4 May 2007 20:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28419 invoked by uid 500); 4 May 2007 20:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28408 invoked by uid 99); 4 May 2007 20:20:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 13:20:33 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 13:20:25 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Hk4G4-0007d6-NV
	for java-user@lucene.apache.org; Fri, 04 May 2007 13:20:04 -0700
Message-ID: <10329266.post@talk.nabble.com>
Date: Fri, 4 May 2007 13:20:04 -0700 (PDT)
From: Suprakash <suprakash_das@yahoo.com>
To: java-user@lucene.apache.org
Subject: weird mergeFactor behavior in v1.4.3
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: suprakash_das@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All, 
I'm running Lucene 1.4.3 and have noticed that the mergeFactor setting is
not working as I would expect. To provide a little background - this all
started as an attempt to reduce the number of segments in the index
directory. After several months of use in a high update environment, I end
up with over a thousand (mostly 1KB) files in the index directory and search
performance takes a significant hit. My current settings are mergeFactor=750
& minMergeDocs=750 (maxMergeDocs=default).

I was first considering some kind of scheduled optimization solution, but
experts advise against it:

http://www.gossamer-threads.com/lists/lucene/java-dev/47895?search_string=optimize;#47895

So I started going down the path of lowering the mergeFactor. Here is what
I'm seeing - with mergeFactor=10 and a minMergeDocs=10, as I add 1000 docs
to the index (in one go) 10 segments of 10 docs get created and then rolled
up into 1 segment of 1000 docs. So far so good. However if I add 900 docs to
the index and then add 100 docs in a second pass (closing the IndexWriter
between the two runs), I get 10 segments on disk but they are not merged.
Also, if I add 10 docs with mergeFactor=1, I get 10 segments. 

Is this expected? I would have thought that a) segments are merged as they
are created regardless of timing b) a mergeFactor=1 would always keep the
index optimized. Am I running into a bug in version 1.4.3? Any ideas for how
to get around this? Upgrading to the latest version is not an option in my
case (I'm at the very end of a release cycle).

Thanks very much in advance!
Das
-- 
View this message in context: http://www.nabble.com/weird-mergeFactor-behavior-in-v1.4.3-tf3693916.html#a10329266
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 05 00:01:35 2007
Return-Path: <java-user-return-27888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16123 invoked from network); 5 May 2007 00:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 May 2007 00:01:34 -0000
Received: (qmail 597 invoked by uid 500); 5 May 2007 00:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 557 invoked by uid 500); 5 May 2007 00:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 545 invoked by uid 99); 5 May 2007 00:01:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 17:01:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 17:01:26 -0700
Received: by ug-out-1314.google.com with SMTP id k40so648170ugc
        for <java-user@lucene.apache.org>; Fri, 04 May 2007 17:01:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AlIf9YXmONLdIRQO1kCvCxDGqmupVBE/WKrTmZ/F7BcUK+wh8hba3mu5qTaxvMfsZcWMHh2TDAa19lceaXHWjS0wFJUXF3BZR/XJ7UF5n02xnqNpbJXP8qePC/2ubos0/AV20qqfn/KeNi2A95M5emOkpXnhIZK4A9XdhmSQKf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qR59gAcdEoF+z0kdEZVJ1X7zrUF+PLIo+FAa5WQJpsxFrfA8gn3PvYAhvX+/0+D7ugAukY98zM60xn7eLQJk3WpFMaC2WHnYsopOX17XjAyEkikjJGuT2WW0f+Jzg+aDgASGXDaN7Ku73Bc7ckJBw+oVx4DE+7QoH8YKHTOOzbM=
Received: by 10.82.188.15 with SMTP id l15mr7588638buf.1178323265147;
        Fri, 04 May 2007 17:01:05 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Fri, 4 May 2007 17:01:05 -0700 (PDT)
Message-ID: <359a92830705041701q42e47884n1276c366b3f31cbe@mail.gmail.com>
Date: Fri, 4 May 2007 20:01:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser, PrefixQuery, and case sensitivity
In-Reply-To: <3b5f72030705041217j3105215au4f7a8d1a4a21633a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22109_14643311.1178323265095"
References: <3b5f72030705041217j3105215au4f7a8d1a4a21633a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22109_14643311.1178323265095
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Look at PerFieldAnalyzerWrapper. It allows you to use different
analyzers on different fields during the query parsing phase.

But I wouldn't go there if you don't have to. I suspect you'll spend a
LOT of time tracking down errors in your use of a mixed case index.
If for no other reason than your users will use the "wrong" case.

Unless your index is huge (and I don't consider, say, 8G huge), I'd
index everything in, say, lower case. And ditto for your query
parsing.

If you need to return data to the user in mixed case, then you can
*store* (but perhaps not *index*) the display fields. So you search
on one field and return data from another.

Best
Erick

On 5/4/07, Bill Au <bill.w.au@gmail.com> wrote:
>
> I have an index with both fields that are case sensitive and
> insensitive.  I
> am trying to use a QueryParser to accept query from end users for
> searching.  The default behavior of QueryParser is to lowercase the prefix
> text to create the PrefixQuery.  So wildcard search on the case sensitive
> fields does not work.  If I use QueryParser.setLowercaseWildcardTerm
> (false),
> then wildcard search on the case insensitive fields does not work.
>
> Here is an example with two fields, name (case sensitive) and desc (case
> insensitive).  The docment is
>
> name (case sensitive): PowerBook
> desc (case insensitive): professional  mac laptop
>
> I want to be able to find the document with the following query:
>
> +name:Power* +field:Pro*
>
> Bill
>

------=_Part_22109_14643311.1178323265095--

From java-user-return-27889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 05 00:59:23 2007
Return-Path: <java-user-return-27889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28311 invoked from network); 5 May 2007 00:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 May 2007 00:59:21 -0000
Received: (qmail 51138 invoked by uid 500); 5 May 2007 00:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50154 invoked by uid 500); 5 May 2007 00:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50143 invoked by uid 99); 5 May 2007 00:59:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 17:59:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of James_Shaw@intuit.com designates 12.149.175.56 as permitted sender)
Received: from [12.149.175.56] (HELO mail4.intuit.com) (12.149.175.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 17:59:11 -0700
DomainKey-Signature: s=default; d=intuit.com; c=nofws; q=dns; b=cNa2UyxCnFd6R6QcCoepFRiLOSNoNtjToKa89dF5huTKSp3sBBJ6i9b5nVUY9jvFXolY+iQuqZHJ95zcTrbz6Jm859YuUMDpTFxBOEsdV1Qforxmpw5I+RF2ztf0Z6ui;
X-SBRS: None
X-IronPort-AV: E=Sophos;i="4.14,494,1170662400"; 
   d="scan'208";a="39735982"
Received: from sdgexbh04.corp.intuit.net ([172.17.135.78])
  by mail4.sdg.ie.intuit.com with ESMTP; 04 May 2007 17:58:50 -0700
Received: from SDGEXEVS01.corp.intuit.net ([172.17.135.183]) by sdgexbh04.corp.intuit.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 4 May 2007 17:58:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: customizing index file name
Date: Fri, 4 May 2007 17:58:50 -0700
Message-ID: <95570511135B1042A7B5A3269303107004BB940D@SDGEXEVS01.corp.intuit.net>
In-Reply-To: <359a92830705031825j510a849bhe71a429022ded0f@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: customizing index file name
Thread-Index: AceN6ywlQXRGaNtfRyCY6IvkLU55TAAxHgnQ
From: "Shaw, James" <James_Shaw@intuit.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 May 2007 00:58:50.0688 (UTC) FILETIME=[8B5D3C00:01C78EB0]
X-Virus-Checked: Checked by ClamAV on apache.org

It's not easy for us to have the installer team do that (it's a big
product).

We actually found IndexWriter.AddIndexes to do almost what we wanted:
just pass in empty list of IndexReader's, and customize the mergedName
to what we want it to be; I made extended IndexWriter to have this new
method.

        public virtual void MergeToName(string mergedName)
        {
            AddIndexes(new IndexReader[] { } );
            AddIndexes(new IndexReader[] { }, mergedName); // same as
current AddIndexes but lets mergedName passed in
        }

It has to have a merged segment with a random name (the 1st line), in
case the segment name is already mergedName.  Then it can merge to
mergedName.

Anways.  Just want to share this if anyone else needs constant .cfs name
in the generated index directory.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, May 03, 2007 6:25 PM
To: java-user@lucene.apache.org
Subject: Re: customizing index file name

Oh, fix as in make constant, not fix as in broken <G>...

No, I don't know of any way to do this. Can your installer just
pack up everything in a directory?

Erick

On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
>
> I mean specifying the name of the .csf file, rather than letting
Lucene
> come up with a name by itself.
>
> I'm actually using Lucene.Net, and we pre-index during our build and
> want to include the index in the installer, but the installer can only
> reference named files, and it wouldn't work if the .csf changes every
> time we index.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Thursday, May 03, 2007 4:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: customizing index file name
>
> Uh, what do you mean "fix"? You shouldn't have to do anything
> with it at all. What behavior are you observing that you want
> to change and why?
>
> Erick
>
> On 5/3/07, Shaw, James <James_Shaw@intuit.com> wrote:
> >
> > Does anyone know how to fix the .cfs file name in an index
directory?
> > The deletable and segments file names are always the same, but we
have
> > observed that the .cfs file name changes each time you index a
content
> > directory with some changes to the directory (some deleted files,
> added
> > files, etc).  How is the name computed anyways?  Is there any way to
> fix
> > it?  Could there be other files generated in an index directory
after
> > optimization besides these 3 files (.cfs, deletable, and segments)?
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 05 05:00:57 2007
Return-Path: <java-user-return-27890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85357 invoked from network); 5 May 2007 05:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 May 2007 05:00:55 -0000
Received: (qmail 5378 invoked by uid 500); 5 May 2007 05:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5346 invoked by uid 500); 5 May 2007 05:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5335 invoked by uid 99); 5 May 2007 05:00:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 22:00:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 May 2007 22:00:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5039F5B766; Fri,  4 May 2007 22:00:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 429947F403
	for <java-user@lucene.apache.org>; Fri,  4 May 2007 22:00:25 -0700 (PDT)
Date: Fri, 4 May 2007 22:00:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: weird mergeFactor behavior in v1.4.3
In-Reply-To: <10329266.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0705042158420.20753@hal.rescomp.berkeley.edu>
References: <10329266.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: up into 1 segment of 1000 docs. So far so good. However if I add 900 docs to
: the index and then add 100 docs in a second pass (closing the IndexWriter
: between the two runs), I get 10 segments on disk but they are not merged.
: Also, if I add 10 docs with mergeFactor=1, I get 10 segments.
:
: Is this expected? I would have thought that a) segments are merged as they
: are created regardless of timing b) a mergeFactor=1 would always keep the
: index optimized. Am I running into a bug in version 1.4.3? Any ideas for how
: to get around this? Upgrading to the latest version is not an option in my
: case (I'm at the very end of a release cycle).

I believe you are encountering a known bug with releases prior to 2.1,
noted in CHANGES.txt...

  6. LUCENE-672: New indexing segment merge policy flushes all
     buffered docs to their own segment and delays a merge until
     mergeFactor segments of a certain level have been accumulated.
     This increases indexing performance in the presence of deleted
     docs or partially full segments as well as enabling future
     optimizations.

     NOTE: this also fixes an "under-merging" bug whereby it is
     possible to get far too many segments in your index (which will
     drastically slow down search, risks exhausting file descriptor
     limit, etc.).  This can happen when the number of buffered docs
     at close, plus the number of docs in the last non-ram segment is
     greater than mergeFactor. (Ning Li, Yonik Seeley)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 05 14:19:18 2007
Return-Path: <java-user-return-27891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19010 invoked from network); 5 May 2007 14:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 May 2007 14:19:17 -0000
Received: (qmail 34288 invoked by uid 500); 5 May 2007 14:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34251 invoked by uid 500); 5 May 2007 14:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34240 invoked by uid 99); 5 May 2007 14:19:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 May 2007 07:19:15 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 May 2007 07:19:08 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1213273mue
        for <java-user@lucene.apache.org>; Sat, 05 May 2007 07:18:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MP2SZgbu06JlZ8Zbg6evJZk1TVV59AF9pUgESkgsTpAwL8aAEYaWwUQOzdhCbXWlPFaFuZAJDr+MeB/HwIKEZM9gu/+iGWeQwCJ09Xv1M3xAx0yHPhAVGBJoprgpqrMudyXQEqpZnsn51i10O7SBGWdxmsv6hVSRxjFyaNlG4OM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Loac0qgqPHeQsbxko4b46iwfON1UHRE22pCBkfqlGgVDFU4Ob4NZ/VatWDF+b3c9pe7h8kgtTBI5dGhUxKmqq8xNnJuunsDz1cmAPCsH0mldK9/hmVC8rbbD7RIsU4ylKdI0Qw4DgD5jG31ZOWEAVbNeoMMT8102VslwMCyf7Sk=
Received: by 10.82.126.5 with SMTP id y5mr790735buc.1178374724965;
        Sat, 05 May 2007 07:18:44 -0700 (PDT)
Received: by 10.82.118.10 with HTTP; Sat, 5 May 2007 07:18:44 -0700 (PDT)
Message-ID: <f81fa4180705050718lebb9119t964003b7a8f2be3f@mail.gmail.com>
Date: Sat, 5 May 2007 10:18:44 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
In-Reply-To: <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67009_19515380.1178374724925"
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
	 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
	 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
	 <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
	 <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67009_19515380.1178374724925
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 4/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> A custom Similaity class with simplified tf, idf, and queryNorm functions
> might also help you get scores from the Explain method that are more
> easily manageable since you'll have predictible query structures hard
> coded into your application.
>
> ie: run the large query once, get the results back, and for each result
> look at the explanation and pull out the individual pieces of hte
> explanation and compare them with those of hte other matches to create
> your own "normalization".


Chuck Williams mentioned a proposal he had for normalization of scores that
would give a constant score range that would allow comparison of scores.
Chuck, did you ever write any code to that end or was it just algorithmic
discussion?

Here is the point I'm at now:

I have my matching engine working.  The fields to be indexed and the queries
are defined by the user.  Hoss, I'm not sure how that affects your idea of
having a custom Similarity class since you mentioned that having predictable
query structures was important...
The user kicks off an indexing then defines the queries they want to try
matching with.  Here is an example of the query fragments I'm working with
right now:
year_str:"${Year}"^2 year_str:[${Year -1} TO ${Year +1}]
title_title_mv:"${Title}"^10 title_title_mv:${Title}^2
+(title_title_mv:"${Title}"~^5 title_title_mv:${Title}~)
director_name_mv:"${Director}"~2^10 director_name_mv:${Director}^5
director_name_mv:${Director}~.7

For each item in the source feed, the variables are interpolated (the query
term is transformed into a grouped term if there are multiple values for a
variable). That query is then made to find the overall best match.
I then determine the relevance for each query fragment.  I haven't written
any plugins for Lucene yet, so my current method of determining the
relevance is by running each query fragment by itself then iterating through
the results looking to see if the overall best match is in this result set.
If it is, I record the rank and multiply that rank (e.g. 5 out of 10) by a
configured fragment weight.

Since the scores aren't normalized, I have no good way of determining a poor
overall match from a really high quality one. The overall item could be the
first item returned in each of the query fragments.

Any help here would be very appreciated. Ideally, I'm hoping that maybe
Chuck has a patch or plugin that I could use to normalize my scores such
that I could let the user do a matching run, look at the results and
determine what score threshold to set for subsequent runs.

Thanks,
Daniel

------=_Part_67009_19515380.1178374724925--

From java-user-return-27892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 03:05:49 2007
Return-Path: <java-user-return-27892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80306 invoked from network); 6 May 2007 03:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 03:05:49 -0000
Received: (qmail 35481 invoked by uid 500); 6 May 2007 03:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35445 invoked by uid 500); 6 May 2007 03:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35429 invoked by uid 99); 6 May 2007 03:05:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 May 2007 20:05:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 May 2007 20:05:42 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1272267mue
        for <java-user@lucene.apache.org>; Sat, 05 May 2007 20:05:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=blFv6qFm6hKeMG3KhDaEfwP2Hb1yC8Zzz08M8DVhI51h9ariuHOx1MCL5G0uZNTV8zKREtN93CFdbwUXGWkVFFH1CWPYX8B8lfSm0jyolydRuu4os/sGtwmL8Ve85yOuXFuS5Bg95Wdcp/njgEi9qp6XpT20vxb4Q3sh5dfD8jk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=s9N5e1z6JpIwgfo/hQ2LfFbXC29gr6dko4bosJAtaxNl+yYdrk+5H6i+zEVeOGFhOt/PAE4RpGleTMEXhC3FzNHrZ1MT3WSN+9DSG1dp0vqb3BvRoj01umxAbQKdi6ryQKAiLwMMQVAg9BV8IvIOAOwrijBD8QYUBLABt6j5Bcw=
Received: by 10.82.189.6 with SMTP id m6mr9162713buf.1178420720698;
        Sat, 05 May 2007 20:05:20 -0700 (PDT)
Received: by 10.82.118.10 with HTTP; Sat, 5 May 2007 20:05:20 -0700 (PDT)
Message-ID: <f81fa4180705052005h266f57d8i2b60fe45f9e1608a@mail.gmail.com>
Date: Sat, 5 May 2007 23:05:20 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Questions regarding Lucene query syntax
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72270_18945630.1178420720658"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72270_18945630.1178420720658
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The query syntax reference page talks about the NOT and the - operators, but
it wasn't clear to me what exactly the difference is between them.  Could
someone tell me briefly what that difference might be or point me at some
further docs that describe it?


Is there a way to require a portion of a query only if there are values for
that field in the document?
e.g. If I know that I only want to match movies made between 1973 and 1975,
I would like to be able to say in my query that if the document has a year,
it must be in that range, but if the document has no year at all, don't fail
the document for that reason alone.
This is also important in the director name part.  If a document has a
director given, and it doesn't match what I'm searching for, that should be
a fail, but if the document has no director field, I don't want to fail the
document for that reason alone.

Thanks,

Daniel

------=_Part_72270_18945630.1178420720658--

From java-user-return-27893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 12:34:18 2007
Return-Path: <java-user-return-27893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63090 invoked from network); 6 May 2007 12:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 12:34:17 -0000
Received: (qmail 3467 invoked by uid 500); 6 May 2007 12:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2813 invoked by uid 500); 6 May 2007 12:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2801 invoked by uid 99); 6 May 2007 12:34:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 05:34:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 05:34:08 -0700
Received: from localhost (unknown [127.0.0.1])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 1145F63
	for <java-user@lucene.apache.org>; Sun,  6 May 2007 12:33:46 +0000 (UTC)
X-Virus-Scanned: amavisd-new at cs.put.poznan.pl
Received: from libra.cs.put.poznan.pl ([127.0.0.1])
	by localhost (libra.cs.put.poznan.pl [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id udDIROfM3G8Q for <java-user@lucene.apache.org>;
	Sun,  6 May 2007 14:33:40 +0200 (CEST)
Received: from [150.254.130.25] (idss-dw-2.cs.put.poznan.pl [150.254.130.25])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 329424A
	for <java-user@lucene.apache.org>; Sun,  6 May 2007 14:33:38 +0200 (CEST)
Message-ID: <463DCB02.5030305@cs.put.poznan.pl>
Date: Sun, 06 May 2007 14:33:06 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction
References: <363661.83409.qm@web26009.mail.ukl.yahoo.com> <46388994.1000603@gmail.com>
In-Reply-To: <46388994.1000603@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


You could also try splitting the document into paragraphs and use Carrot2's 
Lingo algorithm (www.carrot2.org) on a paragraph-level to extract clusters. 
Labelling routine in Lingo should extract 'key' phrases; this analysis is 
heavily frequency-based, but... you know, you may want to try it.

Dawid

Mark Miller wrote:
>  From what I know you generally have to pay if you want something that 
> does this really well. Or check out http://www.nzdl.org/Kea/
> Unfortunately, the license is GPL. Really too bad; now that it is all 
> Java, it would make a great combo with Lucene.
> 
> - Mark
> 
> mark harwood wrote:
>> I believe the code Otis is referring to is here: 
>> http://issues.apache.org/jira/browse/LUCENE-474
>>
>> This is index-level analysis but could be adapted to work for just a 
>> single document.
>> The implementation is optimised for speed rather than being a thorough 
>> examination of phrase significance.
>> Cheers
>> Mark
>>
>> ----- Original Message ----
>> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, 30 April, 2007 4:11:36 AM
>> Subject: Re: Keyphrase Extraction
>>
>> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he 
>> once contributed something that does this in JIRA.  If you are 
>> interested in a commercial solution, I can recommend LingPipe.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Lucene Consulting - http://lucene-consulting.com/
>>
>>
>> ----- Original Message ----
>> From: "av_work@yahoo.com" <av_work@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, April 29, 2007 5:24:17 PM
>> Subject: Keyphrase Extraction
>>
>> Hi,
>>
>> I tried using MoreLikeThis contrib feature to extract "interesting 
>> terms" from a document. This works very well - but only for SINGLE words.
>>
>> I am looking for a way to extra "keyPHRASES" from a document. Is there 
>> an easy way to achieve this using Lucene index?
>>
>> Thanks in advance!
>> Av
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around 
>> http://mail.yahoo.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>>       ___________________________________________________________
>> Yahoo! Answers - Got a question? Someone out there knows the answer. 
>> Try it
>> now.
>> http://uk.answers.yahoo.com/
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 14:09:02 2007
Return-Path: <java-user-return-27894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90413 invoked from network); 6 May 2007 14:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 14:09:01 -0000
Received: (qmail 87017 invoked by uid 500); 6 May 2007 14:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86983 invoked by uid 500); 6 May 2007 14:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86972 invoked by uid 99); 6 May 2007 14:09:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:09:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rampeters@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:08:54 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1270800nzh
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 07:08:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FccD56negoSjuEi5q87v3gXzVguDd4CZdALt+LCgCRTxxD3YBn2xLMNaUAn0nlGstIzswRhfyEhcV3QlHXNZj4KHvguOxZdlfzp8MSqKEva5ItolhIYgd7VL1gjAmZPm/9Lbo/vPVEokRhw7vhLdG+EUa11pGUXgTgbMqq9I8VM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=rxi+UAVCfrecTHfzIwcHDaAGwcY93AvqpYdf4/nV77ey6FYOa+zHpnMtm2AJinCX/JGqPB1fz+Z1YKRDB/HJGd4gFM6nlh25Eba6q+3PgmA3GSJXLY0sMJO/Wsln00qSiCvWXL7l+umdj6t4gINyKSTyxBYLITTmvbHinPz4bcs=
Received: by 10.115.54.1 with SMTP id g1mr1781113wak.1178460508707;
        Sun, 06 May 2007 07:08:28 -0700 (PDT)
Received: by 10.115.94.9 with HTTP; Sun, 6 May 2007 07:08:28 -0700 (PDT)
Message-ID: <81b45360705060708u745e7d79o1d36d1004fd99e69@mail.gmail.com>
Date: Sun, 6 May 2007 10:08:28 -0400
From: "Ram Peters" <rampeters@gmail.com>
To: java-user@lucene.apache.org
Subject: Search Result cutoff
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

How do you specify cutoff on search results?  If I want to sort the
search result, on other than relevancy, I don't want non related stuff
showing up at the top.  Is there way to set a cutoff, so only result
that falls between certain range are displayed?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 14:12:09 2007
Return-Path: <java-user-return-27895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92031 invoked from network); 6 May 2007 14:12:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 14:12:08 -0000
Received: (qmail 92132 invoked by uid 500); 6 May 2007 14:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92106 invoked by uid 500); 6 May 2007 14:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92095 invoked by uid 99); 6 May 2007 14:12:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:12:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of moti.nisenson@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:11:59 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1412811wxd
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 07:11:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=eMq+/GT+y2rEfPHy0728L9QSDDNxMtR3kt/JMnFMmWE/08dfYxwu1HYr4JNnt6LiBXtXu6892dqDnx+Jb+9O1+3FZjRWbUU92++O8K6WpRNgoLgBKMpJGHkuDpdAHkUkx6O7o0bNeyUxxSyWrPPefBfpKvvfJHbwvSZ4S/itAtc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Nlm39ePSZDTrRATYSomw6u2QtyuslHcTKox0AYURUrdjUePGumMBeIVwTKTwvb2JCIDMSmTn4oky7gKqnwqlyIflZ0sJrCYG22anvanhLWsNTFTQhia5WFgoZ6/hSwX1XPIKsJS2YfJWftLUNR4vh0QS0AeNyYVZfRa0iPUmDO0=
Received: by 10.78.124.9 with SMTP id w9mr97824huc.1178460697590;
        Sun, 06 May 2007 07:11:37 -0700 (PDT)
Received: by 10.78.183.20 with HTTP; Sun, 6 May 2007 07:11:37 -0700 (PDT)
Message-ID: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com>
Date: Sun, 6 May 2007 17:11:37 +0300
From: "Moti Nisenson" <moti.nisenson@gmail.com>
To: java-user@lucene.apache.org
Subject: Possible bug in SpanNearQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24262_4834054.1178460697544"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24262_4834054.1178460697544
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Looking over the implementation of SpanNearQuery I came upon what looked
like a bug. Below is a test which fails due to it. SpanNearQuery doesn't
return all matching spans; once it's found a span it always increments the
span of the clause appearing first in that span (ie. in the example below
the two spans should be "one two" and "one two two" where the second has a
slop of 1 - unfortunately the span of "one" gets incremented after "one two"
is found and so no additional spans get returned). Both in-order and
out-of-order SpanNearQueries fail this test.

I  think this is an undocumented feature and that the assumption is that if
someone searches for "one" near "two"  they're interested in the "one two"
result and not necessarily the "one two two" result. However,
SpanNearQueries can be combined and by not returning all matching spans this
can result in problems. For example were we to intersect (ie. SpanNearQuery
with 0 slop) between the results of different SpanNearQueries, it is
possible that the shortest possible span won't intersect, while a longer
span (with legal slop) would.

In my mind this is a bug (at least until there is some documentation), and I
would expect there to be an option (either a boolean parameter or a
different class) which would indeed return all spans which satisfy the slop
constraint.

What I'd like to know is:

1) Is this a bug?
2) Is there any known workaround for this issue (besides rolling my own, of
course)?
3) Could this bug/feature lead to problems with document scoring?

Thanks,

Moti



import java.io.StringReader;

import junit.framework.TestCase;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field ;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery ;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.search.spans.Spans;
import org.apache.lucene.store.RAMDirectory;

public class SpanNearQueryTest extends TestCase {

    private RAMDirectory dir;

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        dir = new RAMDirectory();
        Document doc = new Document();
        doc.add(new Field("field", new StringReader("one two two")));
        IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer());
        writer.addDocument(doc);
        writer.close();
    }

    public void testNearQueryInOrder() throws Exception {
        checkNearQuery(true);
    }

    public void testNearQueryNotInOrder() throws Exception {
        checkNearQuery(false);
    }

    private void checkNearQuery(boolean inOrder) throws Exception {
        SpanNearQuery query = new SpanNearQuery(new SpanQuery[]
                    {new SpanTermQuery(new Term("field", "one")),
                    new SpanTermQuery(new Term("field", "two"))}, 5,
inOrder);

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = 0;
        while (spans.next())
            numSpans++;

        reader.close();

        assertEquals(2, numSpans);
    }


    @Override
    protected void tearDown() throws Exception {
        dir = null; // release directory
        super.tearDown();
    }

------=_Part_24262_4834054.1178460697544--

From java-user-return-27896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 14:39:48 2007
Return-Path: <java-user-return-27896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99403 invoked from network); 6 May 2007 14:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 14:39:47 -0000
Received: (qmail 28951 invoked by uid 500); 6 May 2007 14:39:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28922 invoked by uid 500); 6 May 2007 14:39:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28911 invoked by uid 99); 6 May 2007 14:39:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:39:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:39:38 -0700
Received: by ug-out-1314.google.com with SMTP id k40so804478ugc
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 07:39:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B4Be7TKNWC70+c5MSMBjaAktdjucwZD/2E+WFeNsDbcRoI3MpzpLzTfN3Oeke8bjopmabzvL0i78A0s2VGMfuuXiT6H3TsbsveSuguHefLhzLEZmPz17BVgRAdF1pg19lve3m3ByWGYfVCra1wb7ZOEse+PS1YAmRUg5XHb5lV8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BjjfLaSev8bwlwL/Eyzio+bU9VY4B7PpcPfdxRxButW4dzMgTYDUNRHN41PwYtYqLbmRg5UJHE8+EJ2ZqJxQF0jGsUO++n5BvgKwdFu98/W+hUXjF1od0Bt02v6gfdK0s9IjwOxJYcYE0RNUQ079OHdkjoi1qHV6xEnGw/LE4Xo=
Received: by 10.82.188.15 with SMTP id l15mr9831303buf.1178462356830;
        Sun, 06 May 2007 07:39:16 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 6 May 2007 07:39:16 -0700 (PDT)
Message-ID: <359a92830705060739h276d41e7i2bb032905f246fd1@mail.gmail.com>
Date: Sun, 6 May 2007 10:39:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions regarding Lucene query syntax
In-Reply-To: <f81fa4180705052005h266f57d8i2b60fe45f9e1608a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28117_20703592.1178462356791"
References: <f81fa4180705052005h266f57d8i2b60fe45f9e1608a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28117_20703592.1178462356791
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On 5/5/07, Daniel Einspanjer <deinspanjer@gmail.com> wrote:
>
> The query syntax reference page talks about the NOT and the - operators,
> but
> it wasn't clear to me what exactly the difference is between them.  Could
> someone tell me briefly what that difference might be or point me at some
> further docs that describe it?


See the thread "Standard Parser Behavior". It has several explications
of what the Lucene query syntax is all about. This confuses everybody,
so I think that thread will help you a lot.

Also, see http://wiki.apache.org/lucene-java/BooleanQuerySyntax

Is there a way to require a portion of a query only if there are values for
> that field in the document?
> e.g. If I know that I only want to match movies made between 1973 and
> 1975,
> I would like to be able to say in my query that if the document has a
> year,
> it must be in that range, but if the document has no year at all, don't
> fail
> the document for that reason alone.
> This is also important in the director name part.  If a document has a
> director given, and it doesn't match what I'm searching for, that should
> be
> a fail, but if the document has no director field, I don't want to fail
> the
> document for that reason alone.


You'll have to include a dummy value I think. Remember that you're
searching for stuff with Lucene, so saying "match even if there's
nothing there" is, er, ABnormal..

I'd think about putting a dummy value in those fields you want to handle
this way. For instance, add "matchall" to documents with no date. Then
you'd need to add an 'or date:matchall' clause to all the dates you query
on. Make sure it's a value that behaves reasonably when you want to
include all dates, or all dates before ####, or all dates after ####.

Best
Erick

> Thanks,
>
> Daniel
>

------=_Part_28117_20703592.1178462356791--

From java-user-return-27897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 14:51:51 2007
Return-Path: <java-user-return-27897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 585 invoked from network); 6 May 2007 14:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 14:51:50 -0000
Received: (qmail 39123 invoked by uid 500); 6 May 2007 14:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38759 invoked by uid 500); 6 May 2007 14:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38748 invoked by uid 99); 6 May 2007 14:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:51:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 07:51:44 -0700
Received: by ug-out-1314.google.com with SMTP id k40so805574ugc
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 07:51:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QOXZOsX+y//K4pRIfS4F/iMvBPLFgvNzhbyLwzpL7IDojuFj8zmuafjAhl18ZV4IIpQFSl4Ef7QtdsqpC+JANjJn8cnZ7yms0JsUNTHXP6dP5FHLiK9ZZwIBTKImwgftwEOvvDGCoONPQCo4KcuEDiSImxKcvDAVYydXoWtloxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L9QgeEEmetzIVnWYdWY80kzMHT2/8bPi5MewhwBzrqF2S6QyvSU2iFpqIyOWARvbKCBaqrPfFOauntmWh+HNdSDEUPS8YA9NqNUxjc+UKMwoLBPzXOwQBSKpzNpXzsukKdXdSeWZ9O1987+CTKltBL98AmxiigIGS0Zk/XrflLU=
Received: by 10.82.148.7 with SMTP id v7mr9750593bud.1178463082948;
        Sun, 06 May 2007 07:51:22 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 6 May 2007 07:51:22 -0700 (PDT)
Message-ID: <359a92830705060751k691facb7l77e963c6ca3a84ae@mail.gmail.com>
Date: Sun, 6 May 2007 10:51:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Result cutoff
In-Reply-To: <81b45360705060708u745e7d79o1d36d1004fd99e69@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28245_32010312.1178463082899"
References: <81b45360705060708u745e7d79o1d36d1004fd99e69@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28245_32010312.1178463082899
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, "falls between a certain range" is problematical. There's
nothing hard and fast about scoring. That is, scores between, say,
two different queries are not comparable.

But I really don't understand the question. You won't get
"unrelated stuff" in your result set as far as I know. Everything
has a relevancy > 0. But what you *do* get is sorted by other
than relevancy. Admittedly, it can be pretty limited in relevance,
since the lowest document (by relevance) may bethe first in
the list because of your sorting.

But let's assume that your question is really something I actually
have experience with. That is, "how can I apply the sorting to the
first N of the most-relevant documents?". I used a TopDocs object
and threw the first N documents into a FieldSortedHitQueue
(Lucene 2.1, not sure how much earlier this is available). Which
has been working like a champ.

Best
Erick


On 5/6/07, Ram Peters <rampeters@gmail.com> wrote:
>
> How do you specify cutoff on search results?  If I want to sort the
> search result, on other than relevancy, I don't want non related stuff
> showing up at the top.  Is there way to set a cutoff, so only result
> that falls between certain range are displayed?
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28245_32010312.1178463082899--

From java-user-return-27898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 18:17:36 2007
Return-Path: <java-user-return-27898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41902 invoked from network); 6 May 2007 18:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 18:17:35 -0000
Received: (qmail 37871 invoked by uid 500); 6 May 2007 18:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37088 invoked by uid 500); 6 May 2007 18:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37075 invoked by uid 99); 6 May 2007 18:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 11:17:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 11:17:27 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id l46IH5sK058585
	for <java-user@lucene.apache.org>; Sun, 6 May 2007 20:17:06 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Possible bug in SpanNearQuery
Date: Sun, 6 May 2007 20:17:04 +0200
User-Agent: KMail/1.8.2
References: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com>
In-Reply-To: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705062017.05159.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Moti,

I tried your test and it fails in the way you describe, however, I don't think 
the test shows a bug.

Below is the javadoc comment for the package private class NearSpansOrdered.
Would that be sufficient documentation for the ordered case?

/** A Spans that is formed from the ordered subspans of a SpanNearQuery
 * where the subspans do not overlap and have a maximum slop between them.
 * <p>
 * The formed spans only contains minimum slop matches.<br>
 * The matching slop is computed from the distance(s) between
 * the non overlapping matching Spans.<br>
 * Successive matches are always formed from the successive Spans
 * of the SpanNearQuery.
 * <p>
 * The formed spans may contain overlaps when the slop is at least 1.
 * For example, when querying using
 * <pre>t1 t2 t3</pre>
 * with slop at least 1, the fragment:
 * <pre>t1 t2 t1 t3 t2 t3</pre>
 * matches twice:
 * <pre>t1 t2 .. t3      </pre>
 * <pre>      t1 .. t2 t3</pre>
 */

Unfortunately for the unordered case in NearSpansUnordered.java there is no 
class comment available in the code.

You can take a look at the existing span tests here:
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/search/spans


Regards,
Paul Elschot



On Sunday 06 May 2007 16:11, Moti Nisenson wrote:
> Looking over the implementation of SpanNearQuery I came upon what looked
> like a bug. Below is a test which fails due to it. SpanNearQuery doesn't
> return all matching spans; once it's found a span it always increments the
> span of the clause appearing first in that span (ie. in the example below
> the two spans should be "one two" and "one two two" where the second has a
> slop of 1 - unfortunately the span of "one" gets incremented after "one two"
> is found and so no additional spans get returned). Both in-order and
> out-of-order SpanNearQueries fail this test.
> 
> I  think this is an undocumented feature and that the assumption is that if
> someone searches for "one" near "two"  they're interested in the "one two"
> result and not necessarily the "one two two" result. However,
> SpanNearQueries can be combined and by not returning all matching spans this
> can result in problems. For example were we to intersect (ie. SpanNearQuery
> with 0 slop) between the results of different SpanNearQueries, it is
> possible that the shortest possible span won't intersect, while a longer
> span (with legal slop) would.
> 
> In my mind this is a bug (at least until there is some documentation), and I
> would expect there to be an option (either a boolean parameter or a
> different class) which would indeed return all spans which satisfy the slop
> constraint.
> 
> What I'd like to know is:
> 
> 1) Is this a bug?
> 2) Is there any known workaround for this issue (besides rolling my own, of
> course)?
> 3) Could this bug/feature lead to problems with document scoring?
> 
> Thanks,
> 
> Moti
> 
> 
> 
> import java.io.StringReader;
> 
> import junit.framework.TestCase;
> 
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field ;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.spans.SpanNearQuery;
> import org.apache.lucene.search.spans.SpanQuery ;
> import org.apache.lucene.search.spans.SpanTermQuery;
> import org.apache.lucene.search.spans.Spans;
> import org.apache.lucene.store.RAMDirectory;
> 
> public class SpanNearQueryTest extends TestCase {
> 
>     private RAMDirectory dir;
> 
>     @Override
>     protected void setUp() throws Exception {
>         super.setUp();
>         dir = new RAMDirectory();
>         Document doc = new Document();
>         doc.add(new Field("field", new StringReader("one two two")));
>         IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer());
>         writer.addDocument(doc);
>         writer.close();
>     }
> 
>     public void testNearQueryInOrder() throws Exception {
>         checkNearQuery(true);
>     }
> 
>     public void testNearQueryNotInOrder() throws Exception {
>         checkNearQuery(false);
>     }
> 
>     private void checkNearQuery(boolean inOrder) throws Exception {
>         SpanNearQuery query = new SpanNearQuery(new SpanQuery[]
>                     {new SpanTermQuery(new Term("field", "one")),
>                     new SpanTermQuery(new Term("field", "two"))}, 5,
> inOrder);
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = 0;
>         while (spans.next())
>             numSpans++;
> 
>         reader.close();
> 
>         assertEquals(2, numSpans);
>     }
> 
> 
>     @Override
>     protected void tearDown() throws Exception {
>         dir = null; // release directory
>         super.tearDown();
>     }
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 20:20:15 2007
Return-Path: <java-user-return-27899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64735 invoked from network); 6 May 2007 20:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 20:20:15 -0000
Received: (qmail 25074 invoked by uid 500); 6 May 2007 20:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25035 invoked by uid 500); 6 May 2007 20:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25024 invoked by uid 99); 6 May 2007 20:20:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 13:20:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 13:20:07 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HknCt-0005cf-31
	for java-user@lucene.apache.org; Sun, 06 May 2007 13:19:47 -0700
Message-ID: <10348815.post@talk.nabble.com>
Date: Sun, 6 May 2007 13:19:47 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Finding out which field matched for a query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
X-Virus-Checked: Checked by ClamAV on apache.org


Here's what is going wrong for me :

I have 10 documents, each with 10 fields with "parameterName and
parameterValue". Now, When i search for some term and I get 5 hits, how do I
find out which paramName-Value pair matched ? Very simple a problem, but I
could find no information on the forum for this. 

appreciate your help.

-thanks
-- 
View this message in context: http://www.nabble.com/Finding-out-which-field-matched-for-a-query-tf3700769.html#a10348815
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 21:04:17 2007
Return-Path: <java-user-return-27900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73382 invoked from network); 6 May 2007 21:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 21:04:15 -0000
Received: (qmail 57624 invoked by uid 500); 6 May 2007 21:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56519 invoked by uid 500); 6 May 2007 21:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56508 invoked by uid 99); 6 May 2007 21:04:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 14:04:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of debussy007@gmail.com designates 66.249.90.180 as permitted sender)
Received: from [66.249.90.180] (HELO ik-out-1112.google.com) (66.249.90.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 14:04:07 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1149806ika
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 14:03:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=XGqsoKlaS5//Rqlc1JSOUOkv0JVgoG1VO4JDiJNg1qrcHEtdeweoyxO//fi8i1AQ9ykVQT30G0hiE4JRUQB11U4PAkSEltuqL+TKUBu2HFWhQj1rY1bpojBzh25kP0gLDHg3DovbvSxqqXhEviEoJEkUXfHi1p1RJMfmcOmtmWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mM2KbuWAjqXHWaNGJYLkIpgH8GxN3a+J7OMx/2odVUIkEck8F0/YwP2lvJlkfw/nhaWOZXsropXqnb5W+oenfYUtE4F/ukefVMGyDh5kx5l5FIBw2JuLhK36paRNyD8/S57HwhN2jOT1yFuv2X1mXgFtOeohdZbighx2cAdwtuY=
Received: by 10.78.168.1 with SMTP id q1mr2101676hue.1178485426542;
        Sun, 06 May 2007 14:03:46 -0700 (PDT)
Received: by 10.78.189.9 with HTTP; Sun, 6 May 2007 14:03:46 -0700 (PDT)
Message-ID: <111056830705061403v1f944386vde2cb8973008207@mail.gmail.com>
Date: Sun, 6 May 2007 23:03:46 +0200
From: "Thomas Thomas" <debussy007@gmail.com>
To: java-user@lucene.apache.org
Subject: Scoring question - Get Score of Best Query in BooleanQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23307_28878371.1178485426497"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23307_28878371.1178485426497
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

Whenever I search a word in my web application, I search in some default
fields,
e.g. I search the word "hello", I generate these queries :

title:hello
headlines:hello
summary:hello
content:hello

Which I add in a BooleanQuery  (BooleanClause.Occur.SHOULD)

What I want to achieve is getting the score of the query that matches the
word entered, and return that score.
(e.g. hello was found in the summary, return the score of summary:hello,
and not the score of "title:hello headlines:hello summary:hello
content:hello")
(it should first look into my title field , then headlines , then summary,
etc.)

The problem is that my score is pretty low (and getting lower if I add more
fields in which to search)
and I tought that it is more obvious to return the best score of the best
query in my BooleanQuery.

I hope I was clear and that anyone here can help me in achieving this,
Thank u for any support.

------=_Part_23307_28878371.1178485426497--

From java-user-return-27901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 06 23:42:24 2007
Return-Path: <java-user-return-27901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7037 invoked from network); 6 May 2007 23:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 May 2007 23:42:23 -0000
Received: (qmail 94638 invoked by uid 500); 6 May 2007 23:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94595 invoked by uid 500); 6 May 2007 23:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94584 invoked by uid 99); 6 May 2007 23:42:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 16:42:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 16:42:14 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1373783mue
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 16:41:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sl2PZjFH8Iac5zkTgdswn5+AfSuMGozWZRQHfQ+xfY7uwif+N+g60O+dLPQ1aOoT7l7W3Od4GUQ7gm43VB6pVCHCdWp83qbo3QRHNu17IfJ/o99dv1leovAeuq77wXjyw8niYSTrCfYfvq72k3If5C2g+EXZy4sDmjtSm6zDCag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mfONW6D7te490lAcEt9JG4TPfdIg3yJ5gQxSMJVGf7C6/Y7P94eIMVvks5kE9U/a5kTw5RCS5Z1ILMXLBmlhQTD7MKAYdFnYeODmEoy2+0Bxgh1sn9Aw76djvu55qzEQ4a2jzzS4lDZjHDbxfeFnnRTAyQ+BUjLz4n4KuZW9638=
Received: by 10.82.156.12 with SMTP id d12mr10185124bue.1178494912718;
        Sun, 06 May 2007 16:41:52 -0700 (PDT)
Received: by 10.82.118.10 with HTTP; Sun, 6 May 2007 16:41:52 -0700 (PDT)
Message-ID: <f81fa4180705061641v7d05e775xd284f97badcb0529@mail.gmail.com>
Date: Sun, 6 May 2007 19:41:52 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions regarding Lucene query syntax
In-Reply-To: <359a92830705060739h276d41e7i2bb032905f246fd1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80976_18287408.1178494912402"
References: <f81fa4180705052005h266f57d8i2b60fe45f9e1608a@mail.gmail.com>
	 <359a92830705060739h276d41e7i2bb032905f246fd1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_80976_18287408.1178494912402
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 5/6/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> On 5/5/07, Daniel Einspanjer <deinspanjer@gmail.com> wrote:
> >
> > The query syntax reference page talks about the NOT and the - operators,
> > but
> > it wasn't clear to me what exactly the difference is between
> them.  Could
> > someone tell me briefly what that difference might be or point me at
> some
> > further docs that describe it?
>
> See the thread "Standard Parser Behavior". It has several explications
> of what the Lucene query syntax is all about. This confuses everybody,
> so I think that thread will help you a lot.
>
> Also, see http://wiki.apache.org/lucene-java/BooleanQuerySyntax



I'll take a look for this thread right now, and make sure I've already read
that wiki page.

Is there a way to require a portion of a query only if there are values for
> > that field in the document?
> > e.g. If I know that I only want to match movies made between 1973 and
> > 1975,
> > I would like to be able to say in my query that if the document has a
> > year,
> > it must be in that range, but if the document has no year at all, don't
> > fail
> > the document for that reason alone.
> > This is also important in the director name part.  If a document has a
> > director given, and it doesn't match what I'm searching for, that should
> > be
> > a fail, but if the document has no director field, I don't want to fail
> > the
> > document for that reason alone.
>
>
> You'll have to include a dummy value I think. Remember that you're
> searching for stuff with Lucene, so saying "match even if there's
> nothing there" is, er, ABnormal..
>
> I'd think about putting a dummy value in those fields you want to handle
> this way. For instance, add "matchall" to documents with no date. Then
> you'd need to add an 'or date:matchall' clause to all the dates you query
> on. Make sure it's a value that behaves reasonably when you want to
> include all dates, or all dates before ####, or all dates after ####.
>

Hrm.  I'll keep this idea on the cheat sheet for now. It turns out that
having a required date was causing too many mismatches for me.  Some of the
source feeds I'm matching have wildly inaccurate year fields, and when I
required that field, it would pull out some other poorly related item based
on the year and director, ignoring the right one because the year was bad.


By far the thing that is killing me the most is my trouble with trying to
provide users with scores that make sense from one item to the other.  I
tried out the SweetSpotSimilarity contrib, and I *think* it might have
helped the matching in general some, but it doesn't really give me a linear
range of scores that can be used for comparisons.  I keep scouring the web
looking for something that might explain enough tf and idf and norms in
terms that I could understand, but sadly, it just seems to be a bit over my
head right now. :/ Maybe I've just been fighting with this project for so
long my brain has turned to mush.

If I could find a way that the scores for the queries I've mentioned in this
thread and others could just return a simple linear scale (affected by
^boosts would be good though) for the number of terms matched, I think I'd
be all set.

------=_Part_80976_18287408.1178494912402--

From java-user-return-27902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 00:05:06 2007
Return-Path: <java-user-return-27902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12077 invoked from network); 7 May 2007 00:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 00:05:05 -0000
Received: (qmail 13984 invoked by uid 500); 7 May 2007 00:05:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13937 invoked by uid 500); 7 May 2007 00:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13921 invoked by uid 99); 7 May 2007 00:05:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 17:05:05 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DATE_IN_FUTURE_12_24
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 17:04:58 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 33BC44A816E
	for <java-user@lucene.apache.org>; Mon,  7 May 2007 10:07:46 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Finding out which field matched for a query
Date: Tue, 8 May 2007 10:04:34 +1000
User-Agent: KMail/1.9.6
References: <10348815.post@talk.nabble.com>
In-Reply-To: <10348815.post@talk.nabble.com>
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200705081004.34439.daniel@nuix.com>
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 07 May 2007 06:19:47 makkhar wrote:
> Here's what is going wrong for me :
>
> I have 10 documents, each with 10 fields with "parameterName and
> parameterValue". Now, When i search for some term and I get 5 hits, how do
> I find out which paramName-Value pair matched ? Very simple a problem, but
> I could find no information on the forum for this.

Seems easy enough to do it by looking at the text of the fields (we do this 
ourselves for highlighting the hits.)

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 02:58:15 2007
Return-Path: <java-user-return-27903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45746 invoked from network); 7 May 2007 02:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 02:58:14 -0000
Received: (qmail 24455 invoked by uid 500); 7 May 2007 02:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24419 invoked by uid 500); 7 May 2007 02:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24405 invoked by uid 99); 7 May 2007 02:58:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 19:58:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.69.121] (HELO web33006.mail.mud.yahoo.com) (209.191.69.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 06 May 2007 19:58:05 -0700
Received: (qmail 37077 invoked by uid 60001); 7 May 2007 02:57:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=b3QGjTYl3np/R7MtjmYA083FlGFOCjnI6GCTDNwU8H1WvH8puX5GzivtoENf2lUCyGb4YvEM7hXMO7be/IC/EIYnIdv7gPYiTVI1R+A6Zx7EbLZUzzbz9n+TBay4OzACl1ao/fOr4GI5kHvx3oyOFXRtdmnbfT9bsua0vnv7tSY=;
X-YMail-OSG: _Uhi7pIVM1k.CkjxEGUWDx96f3c7Go3zpPz0zUMSydTIgdc7gGfZuUs1qDJnS9EcTu0eWNtf0iT3j2wKk8i8fFdPRamqcVRqjuVOXi9qL1UXMKsUF_U7f_kEfBDxwg--
Received: from [209.191.118.121] by web33006.mail.mud.yahoo.com via HTTP; Sun, 06 May 2007 19:57:43 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Sun, 6 May 2007 19:57:42 -0700 (PDT)
From: "av_work@yahoo.com" <av_work@yahoo.com>
Subject: Re: Keyphrase Extraction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-24414775-1178506662=:36792"
Message-ID: <92631.36792.qm@web33006.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-24414775-1178506662=:36792
Content-Type: text/plain; charset=ascii

Hi Mark,

Do you know of a good paid product that does this?

Thanks,
Arsen


----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, May 2, 2007 7:52:36 AM
Subject: Re: Keyphrase Extraction


>From what I know you generally have to pay if you want something that 
does this really well. Or check out http://www.nzdl.org/Kea/
Unfortunately, the license is GPL. Really too bad; now that it is all 
Java, it would make a great combo with Lucene.

- Mark

mark harwood wrote:
> I believe the code Otis is referring to is here: http://issues.apache.org/jira/browse/LUCENE-474
>
> This is index-level analysis but could be adapted to work for just a single document.
> The implementation is optimised for speed rather than being a thorough examination of phrase significance. 
>
> Cheers
> Mark
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 30 April, 2007 4:11:36 AM
> Subject: Re: Keyphrase Extraction
>
> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Lucene Consulting - http://lucene-consulting.com/
>
>
> ----- Original Message ----
> From: "av_work@yahoo.com" <av_work@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, April 29, 2007 5:24:17 PM
> Subject: Keyphrase Extraction
>
> Hi,
>
> I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.
>
> I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?
>
> Thanks in advance!
> Av
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
> now.
> http://uk.answers.yahoo.com/ 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


 
____________________________________________________________________________________
Don't pick lemons.
See all the new 2007 cars at Yahoo! Autos.
http://autos.yahoo.com/new_cars.html 
--0-24414775-1178506662=:36792--

From java-user-return-27904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 03:23:46 2007
Return-Path: <java-user-return-27904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50841 invoked from network); 7 May 2007 03:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 03:23:46 -0000
Received: (qmail 44247 invoked by uid 500); 7 May 2007 03:23:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43575 invoked by uid 500); 7 May 2007 03:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43564 invoked by uid 99); 7 May 2007 03:23:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 20:23:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bill.w.au@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 20:23:38 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1384238nzh
        for <java-user@lucene.apache.org>; Sun, 06 May 2007 20:23:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fdNWA2P9kDCH68gSFAV8Ilye4tte97NpFPUMKKoze/pxb22sGpxJDasNEZB3gOS6hzGhgotF0D1oV4QzjLskAOIYOdU6Ah2U0Zt73kLo5VD+XFcFhV83h6cO7H3ou3NGJ6ffHtIUddBzgi702DV0omnvEfSmqF4QgboJSNhnBMQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O3OKMflaFeVAWdjrcIIVEE5QNP3SSYEQNNXOenKb97E9om7EJs4jyfKuaF0cvFJxKjd8nyLaIib32i8L1VqlSPGOAMIEf1FBOIq9LyyZe9rjty5WBzA6MS7Ol9QywFMY3KPYLyfDpBxPQ5qtN9B7N1s/KDQzTfE1zlUMu13O5I4=
Received: by 10.114.144.1 with SMTP id r1mr322658wad.1178508197468;
        Sun, 06 May 2007 20:23:17 -0700 (PDT)
Received: by 10.114.197.4 with HTTP; Sun, 6 May 2007 20:23:17 -0700 (PDT)
Message-ID: <3b5f72030705062023r33a48432ub92f01a33f412af9@mail.gmail.com>
Date: Sun, 6 May 2007 23:23:17 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser, PrefixQuery, and case sensitivity
In-Reply-To: <359a92830705041701q42e47884n1276c366b3f31cbe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3b5f72030705041217j3105215au4f7a8d1a4a21633a@mail.gmail.com>
	 <359a92830705041701q42e47884n1276c366b3f31cbe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,
     Thanks for the advice.  I will take a look at
PerFieldAnalyzerWrapper to see if I want to take this on.  For my
case, I have to use mexed case for a couple of fields since case
really does matter for them (ie apple is not the same as Apple), and I
actually don't want users to find the document if they enter the
"wrong" case (ie a search for Apple should not return docs containing
apple).

Bill

On 5/4/07, Erick Erickson <erickerickson@gmail.com> wrote:
> Look at PerFieldAnalyzerWrapper. It allows you to use different
> analyzers on different fields during the query parsing phase.
>
> But I wouldn't go there if you don't have to. I suspect you'll spend a
> LOT of time tracking down errors in your use of a mixed case index.
> If for no other reason than your users will use the "wrong" case.
>
> Unless your index is huge (and I don't consider, say, 8G huge), I'd
> index everything in, say, lower case. And ditto for your query
> parsing.
>
> If you need to return data to the user in mixed case, then you can
> *store* (but perhaps not *index*) the display fields. So you search
> on one field and return data from another.
>
> Best
> Erick
>
> On 5/4/07, Bill Au <bill.w.au@gmail.com> wrote:
> >
> > I have an index with both fields that are case sensitive and
> > insensitive.  I
> > am trying to use a QueryParser to accept query from end users for
> > searching.  The default behavior of QueryParser is to lowercase the prefix
> > text to create the PrefixQuery.  So wildcard search on the case sensitive
> > fields does not work.  If I use QueryParser.setLowercaseWildcardTerm
> > (false),
> > then wildcard search on the case insensitive fields does not work.
> >
> > Here is an example with two fields, name (case sensitive) and desc (case
> > insensitive).  The docment is
> >
> > name (case sensitive): PowerBook
> > desc (case insensitive): professional  mac laptop
> >
> > I want to be able to find the document with the following query:
> >
> > +name:Power* +field:Pro*
> >
> > Bill
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 03:34:59 2007
Return-Path: <java-user-return-27905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54542 invoked from network); 7 May 2007 03:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 03:34:59 -0000
Received: (qmail 53176 invoked by uid 500); 7 May 2007 03:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52648 invoked by uid 500); 7 May 2007 03:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52634 invoked by uid 99); 7 May 2007 03:34:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 20:34:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 06 May 2007 20:34:51 -0700
Received: (qmail 61790 invoked by uid 60001); 7 May 2007 03:34:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1VhFlOjTrHy0k6tCDbWwTo1gZs4sg8m0eG4AjDVu4RSOsSiP4yZ1P9vY9QsYhLCCQBB4Yfn63JsbnAsy3u8XMux2OtJh7Y+v4NuKk5bSkLDkEZHSI5l/KdmljEevKJ4QDY9z3g632Q4Jup8TlQjmpU6nJAZqEmcUN6Od2gNsK64=;
Received: from [72.231.8.153] by web50302.mail.re2.yahoo.com via HTTP; Sun, 06 May 2007 20:34:29 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Sun, 6 May 2007 20:34:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Keyphrase Extraction
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <998249.61763.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Arsen,
I already mentioned it (see below) - LingPipe - http://alias-i.com .

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: "av_work@yahoo.com" <av_work@yahoo.com>
To: java-user@lucene.apache.org
Sent: Sunday, May 6, 2007 10:57:42 PM
Subject: Re: Keyphrase Extraction

Hi Mark,

Do you know of a good paid product that does this?

Thanks,
Arsen


----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, May 2, 2007 7:52:36 AM
Subject: Re: Keyphrase Extraction


>From what I know you generally have to pay if you want something that 
does this really well. Or check out http://www.nzdl.org/Kea/
Unfortunately, the license is GPL. Really too bad; now that it is all 
Java, it would make a great combo with Lucene.

- Mark

mark harwood wrote:
> I believe the code Otis is referring to is here: http://issues.apache.org/jira/browse/LUCENE-474
>
> This is index-level analysis but could be adapted to work for just a single document.
> The implementation is optimised for speed rather than being a thorough examination of phrase significance. 
>
> Cheers
> Mark
>
> ----- Original Message ----
> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 30 April, 2007 4:11:36 AM
> Subject: Re: Keyphrase Extraction
>
> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Lucene Consulting - http://lucene-consulting.com/
>
>
> ----- Original Message ----
> From: "av_work@yahoo.com" <av_work@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, April 29, 2007 5:24:17 PM
> Subject: Keyphrase Extraction
>
> Hi,
>
> I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.
>
> I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?
>
> Thanks in advance!
> Av



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 05:21:40 2007
Return-Path: <java-user-return-27906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78050 invoked from network); 7 May 2007 05:21:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 05:21:39 -0000
Received: (qmail 38314 invoked by uid 500); 7 May 2007 05:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38271 invoked by uid 500); 7 May 2007 05:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38260 invoked by uid 99); 7 May 2007 05:21:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 22:21:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 May 2007 22:21:31 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hkveo-0006Gf-G0
	for java-user@lucene.apache.org; Sun, 06 May 2007 22:21:10 -0700
Message-ID: <10352292.post@talk.nabble.com>
Date: Sun, 6 May 2007 22:21:10 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Re: Finding out which field matched for a query
In-Reply-To: <200705081004.34439.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
References: <10348815.post@talk.nabble.com> <200705081004.34439.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, the approach you suggested is what we use now. We regex use pattern
matching to find the search term out. However, due to this we cannot use
some of the very sophisticated queries which lucene supports (like boolean
query etc). We sure can use highlighting to find out this information. But
highlighting is a very very heavy operation for wildcards. We work on really
large datasets, Hence we cannot use this approach. Any other ideas ?

Thanks


Daniel Noll-3 wrote:
> 
> On Monday 07 May 2007 06:19:47 makkhar wrote:
>> Here's what is going wrong for me :
>>
>> I have 10 documents, each with 10 fields with "parameterName and
>> parameterValue". Now, When i search for some term and I get 5 hits, how
>> do
>> I find out which paramName-Value pair matched ? Very simple a problem,
>> but
>> I could find no information on the forum for this.
> 
> Seems easy enough to do it by looking at the text of the fields (we do
> this 
> ourselves for highlighting the hits.)
> 
> Daniel
> 
> -- 
> Daniel Noll
> 
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://nuix.com/                               Fax: +61 2 9212 6902
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Finding-out-which-field-matched-for-a-query-tf3700769.html#a10352292
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 07:45:04 2007
Return-Path: <java-user-return-27907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11377 invoked from network); 7 May 2007 07:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 07:45:02 -0000
Received: (qmail 93014 invoked by uid 500); 7 May 2007 07:45:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92688 invoked by uid 500); 7 May 2007 07:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92677 invoked by uid 99); 7 May 2007 07:45:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 00:45:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of moti.nisenson@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 00:44:54 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1421845wra
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 00:44:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IVX7vBsTCyJKgmeYb6xOS5tl1AszIQR0zwTA3eGygSbbEbanqEEa4pVzu7k/AfmLu7LPNSOk4ZRSbbSGdyrCOZqM45oW6lzU3gzPoZOiXBrhYFGj4gfFafdpa0GUY+efP6QKRRDNcH9Wgpc6hKkC++srLljGpoTSw1lTz1sIE4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LcKHd1zFAl7bAE6p3OCxUwLFFdCAxhhyGAKpcsq9mzWydVSbxdseTZ1/8jrWKd05a2YueSPVZQ8jcdIQ0pQsYgQdtL+pHhgmPxmIVjMBFXWkOd3WPi/mfVNuS0I0ikmO5x8ZzuGmLhaGLY8Jq4LAq2G7rytlcdmKATsGPqfqkZM=
Received: by 10.78.81.20 with SMTP id e20mr2154720hub.1178523872191;
        Mon, 07 May 2007 00:44:32 -0700 (PDT)
Received: by 10.78.183.20 with HTTP; Mon, 7 May 2007 00:44:32 -0700 (PDT)
Message-ID: <268575990705070044m24076003u5d284a909e7f09be@mail.gmail.com>
Date: Mon, 7 May 2007 10:44:32 +0300
From: "Moti Nisenson" <moti.nisenson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Possible bug in SpanNearQuery
In-Reply-To: <200705062017.05159.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26872_27599529.1178523872114"
References: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com>
	 <200705062017.05159.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26872_27599529.1178523872114
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Paul,

The comment should be moved up into SpanNearQuery itself (as opposed to the
comments in the package private implementation classes). Still though, that
comment is inaccurate (regarding overlap - only "exact" overlap is handled).
Here are some additional tests for SpanNearQuery. They all fail except for
testNotExactOverlapInOrder, testTermOvelapStartInOrder and
testTermOverlapEndInOrder (note that the failures for the NotInOrder case
may be alright. There is no documentation indicating the desired behavior).


import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;

import junit.framework.TestCase;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.search.spans.Spans;
import org.apache.lucene.store.RAMDirectory;

public class SpanNearQueryTest extends TestCase {

    private RAMDirectory dir;

    @Override
    protected void setUp() throws Exception {
        super.setUp();
        dir = new RAMDirectory();
        Document doc = new Document();
        doc.add(new Field("field", new StringReader("one two two three four
five")));
        IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer());
        writer.addDocument(doc);
        writer.close();
    }

    public void testNearQueryInOrder() throws Exception {
        checkNearQuery(true);
    }

    public void testNearQueryNotInOrder() throws Exception {
        checkNearQuery(false);
    }

    private void checkNearQuery(boolean inOrder) throws Exception {
        SpanNearQuery query = buildQuery(5, inOrder, "one", "two");

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(2, numSpans);
    }

    private int countSpans(Spans spans) throws IOException {
        int numSpans = 0;
        while (spans.next())
            numSpans++;
        return numSpans;
    }

    public void testMinimalSpanInOrder() throws Exception {
        checkMinimalSpan(true);
    }

    public void testMinimalSpanNotInOrder() throws Exception {
        checkMinimalSpan(false);
    }

    private void checkMinimalSpan(boolean inOrder) throws Exception {
        SpanNearQuery query = buildQuery(5, inOrder, "two", "three");

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        boolean firstSpan = true;
        int firstSlop = -1;
        int numSpans = 0;
        while (spans.next()) {
            numSpans++;
            if (firstSpan) {
                firstSlop = spans.end() - spans.start();
                firstSpan = false;
            }
        }

        reader.close();

        assertEquals(1, numSpans);
        assertEquals(1, firstSlop);
    }


    public void testNotContainingStartInOrder() throws Exception {
        checkNotContainingStart(true);
    }

    public void testNotContainingStartNotInOrder() throws Exception {
        checkNotContainingStart(false);
    }

    public void testNotContainingEndInOrder() throws Exception {
        checkNotContainingEnd(true);
    }

    public void testNotContainingEndNotInOrder() throws Exception {
        checkNotContainingEnd(false);
    }

    public void testNotOverlappingInOrder() throws Exception {
        checkNotOverlapping(true);
    }

    public void testNotOverlappingNotInOrder() throws Exception {
        checkNotOverlapping(false);
    }

    public void testNotExactOverlapInOrder() throws Exception {
        checkNotExactOverlap(true);
    }

    public void testNotExactOverlapNotInOrder() throws Exception {
        checkNotExactOverlap(false);
    }


    private void checkNotContainingEnd(boolean inOrder) throws Exception {
        SpanNearQuery query1 = buildQuery(5, inOrder, "one", "three");
        SpanNearQuery query2 = buildQuery(5, inOrder, "two", "three");

        SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
query2}, 5, inOrder);

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(0, numSpans);
    }

    private void checkNotContainingStart(boolean inOrder) throws Exception {
        SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
        SpanNearQuery query2 = buildQuery(5, inOrder, "three", "five");

        SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
query2}, 5, inOrder);

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(0, numSpans);
    }

    private void checkNotOverlapping(boolean inOrder) throws Exception {
        SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
        SpanNearQuery query2 = buildQuery(5, inOrder, "four", "five");

        SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
query2}, 5, inOrder);

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(0, numSpans);
    }

    private void checkNotExactOverlap(boolean inOrder) throws Exception {
        SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
        SpanNearQuery query2 = buildQuery(5, inOrder, "three", "four");

        SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
query2}, 5, inOrder);

        IndexReader reader = IndexReader.open(dir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(0, numSpans);
    }


    // for these two tests w2 has the same position as w1
    public void testTermOverlapStartInOrder() throws Exception {
        checkTermOverlap("w2", true, "w1", "w2", "w5");
    }
    public void testTermOverlapStartNotInOrder() throws Exception {
        checkTermOverlap("w2", false, "w1", "w2", "w5");
    }

    // for these two tests w5 has the same position as w4
    public void testTermOverlapEndInOrder() throws Exception {
        checkTermOverlap("w5", true, "w1", "w4", "w5");
    }
    public void testTermOverlapEndNotInOrder() throws Exception {
        checkTermOverlap("w5", false, "w1", "w4", "w5");
    }


    private void checkTermOverlap(String term, boolean inOrder, String...
queryTerms) throws Exception {
        RAMDirectory tempDir = new RAMDirectory();
        Document doc = new Document();
        doc.add(new Field("field", new StringReader("w1 w2 w3 w1 w4 w5")));
        IndexWriter writer = new IndexWriter(tempDir,
getPositionAnalyzer(term));
        writer.addDocument(doc);
        writer.close();

        SpanNearQuery query = buildQuery(7, inOrder, queryTerms);

        IndexReader reader = IndexReader.open(tempDir);
        Spans spans = query.getSpans(reader);

        int numSpans = countSpans(spans);

        reader.close();

        assertEquals(0, numSpans);
    }


    private Analyzer getPositionAnalyzer(final String term) {
        return new Analyzer() {

            @Override
            public TokenStream tokenStream(String fieldName, Reader reader)
{
                return new TokenFilter(new
StandardAnalyzer().tokenStream(fieldName, reader)) {

                    @Override
                    public Token next() throws IOException {
                        Token result = input.next();

                        if (result != null && result.termText
().equals(term))
                            result.setPositionIncrement(0);

                        return result;
                    }

                };
            }

        };
    }

    private SpanNearQuery buildQuery(int slop, boolean inOrder, String...
terms) {
        SpanQuery[] termQueries = new SpanQuery[terms.length];
        for (int i = 0; i < termQueries.length; i++)
            termQueries[i] = new SpanTermQuery(new Term("field", terms[i]));

        return new SpanNearQuery(termQueries, slop, inOrder);
    }


    @Override
    protected void tearDown() throws Exception {
        dir = null; // release directory
        super.tearDown();
    }



}

On 5/6/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Moti,
>
> I tried your test and it fails in the way you describe, however, I don't
> think
> the test shows a bug.
>
> Below is the javadoc comment for the package private class
> NearSpansOrdered.
> Would that be sufficient documentation for the ordered case?
>
> /** A Spans that is formed from the ordered subspans of a SpanNearQuery
> * where the subspans do not overlap and have a maximum slop between them.
> * <p>
> * The formed spans only contains minimum slop matches.<br>
> * The matching slop is computed from the distance(s) between
> * the non overlapping matching Spans.<br>
> * Successive matches are always formed from the successive Spans
> * of the SpanNearQuery.
> * <p>
> * The formed spans may contain overlaps when the slop is at least 1.
> * For example, when querying using
> * <pre>t1 t2 t3</pre>
> * with slop at least 1, the fragment:
> * <pre>t1 t2 t1 t3 t2 t3</pre>
> * matches twice:
> * <pre>t1 t2 .. t3      </pre>
> * <pre>      t1 .. t2 t3</pre>
> */
>
> Unfortunately for the unordered case in NearSpansUnordered.java there is
> no
> class comment available in the code.
>
> You can take a look at the existing span tests here:
>
> http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/search/spans
>
>
> Regards,
> Paul Elschot
>
>
>
> On Sunday 06 May 2007 16:11, Moti Nisenson wrote:
> > Looking over the implementation of SpanNearQuery I came upon what looked
> > like a bug. Below is a test which fails due to it. SpanNearQuery doesn't
> > return all matching spans; once it's found a span it always increments
> the
> > span of the clause appearing first in that span (ie. in the example
> below
> > the two spans should be "one two" and "one two two" where the second has
> a
> > slop of 1 - unfortunately the span of "one" gets incremented after "one
> two"
> > is found and so no additional spans get returned). Both in-order and
> > out-of-order SpanNearQueries fail this test.
> >
> > I  think this is an undocumented feature and that the assumption is that
> if
> > someone searches for "one" near "two"  they're interested in the "one
> two"
> > result and not necessarily the "one two two" result. However,
> > SpanNearQueries can be combined and by not returning all matching spans
> this
> > can result in problems. For example were we to intersect (ie.
> SpanNearQuery
> > with 0 slop) between the results of different SpanNearQueries, it is
> > possible that the shortest possible span won't intersect, while a longer
> > span (with legal slop) would.
> >
> > In my mind this is a bug (at least until there is some documentation),
> and I
> > would expect there to be an option (either a boolean parameter or a
> > different class) which would indeed return all spans which satisfy the
> slop
> > constraint.
> >
> > What I'd like to know is:
> >
> > 1) Is this a bug?
> > 2) Is there any known workaround for this issue (besides rolling my own,
> of
> > course)?
> > 3) Could this bug/feature lead to problems with document scoring?
> >
> > Thanks,
> >
> > Moti
> >
> >
> >
> > import java.io.StringReader;
> >
> > import junit.framework.TestCase;
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field ;
> > import org.apache.lucene.index.IndexReader;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.index.Term;
> > import org.apache.lucene.search.spans.SpanNearQuery;
> > import org.apache.lucene.search.spans.SpanQuery ;
> > import org.apache.lucene.search.spans.SpanTermQuery;
> > import org.apache.lucene.search.spans.Spans;
> > import org.apache.lucene.store.RAMDirectory;
> >
> > public class SpanNearQueryTest extends TestCase {
> >
> >     private RAMDirectory dir;
> >
> >     @Override
> >     protected void setUp() throws Exception {
> >         super.setUp();
> >         dir = new RAMDirectory();
> >         Document doc = new Document();
> >         doc.add(new Field("field", new StringReader("one two two")));
> >         IndexWriter writer = new IndexWriter(dir, new
> StandardAnalyzer());
> >         writer.addDocument(doc);
> >         writer.close();
> >     }
> >
> >     public void testNearQueryInOrder() throws Exception {
> >         checkNearQuery(true);
> >     }
> >
> >     public void testNearQueryNotInOrder() throws Exception {
> >         checkNearQuery(false);
> >     }
> >
> >     private void checkNearQuery(boolean inOrder) throws Exception {
> >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[]
> >                     {new SpanTermQuery(new Term("field", "one")),
> >                     new SpanTermQuery(new Term("field", "two"))}, 5,
> > inOrder);
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = 0;
> >         while (spans.next())
> >             numSpans++;
> >
> >         reader.close();
> >
> >         assertEquals(2, numSpans);
> >     }
> >
> >
> >     @Override
> >     protected void tearDown() throws Exception {
> >         dir = null; // release directory
> >         super.tearDown();
> >     }
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26872_27599529.1178523872114--

From java-user-return-27908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 08:02:53 2007
Return-Path: <java-user-return-27908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14473 invoked from network); 7 May 2007 08:02:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 08:02:52 -0000
Received: (qmail 12019 invoked by uid 500); 7 May 2007 08:02:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11815 invoked by uid 500); 7 May 2007 08:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11804 invoked by uid 99); 7 May 2007 08:02:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 01:02:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 01:02:44 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HkyAq-0000pn-E1
	for java-user@lucene.apache.org; Mon, 07 May 2007 01:02:24 -0700
Message-ID: <10353549.post@talk.nabble.com>
Date: Mon, 7 May 2007 01:02:24 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Multi language indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,

I need to index a table containing company details (name, address, city ...
country).
Each record contains data written in the language appropriate to the records
country.
I was thinking of indexing each record using an analyzer according to the
records country value.
Then when searching, again using the needed analyzer according to the
entered country.
This means I index and search using the same analyzer.

I was interested to know if this is the way to go?

I am trying to implement this using "Hibernate search", and it seems to be a
problem changing analyzers according to a specific value in a record to be
indexed.

Before I break my head understanding how this can be implemented, I wanted
to know if this approach is correct?

Thanks in advance.

-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10353549
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 09:31:37 2007
Return-Path: <java-user-return-27909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45733 invoked from network); 7 May 2007 09:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 09:31:36 -0000
Received: (qmail 28432 invoked by uid 500); 7 May 2007 09:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27434 invoked by uid 500); 7 May 2007 09:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27421 invoked by uid 99); 7 May 2007 09:31:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 02:31:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sand.chawla@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 02:31:26 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1444711wra
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 02:31:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=bNftFPXEgPXZTO2KJgXq2mL8Of74yNCOLLrB02Jwtp8dCD37/3qbjelcsOdCj9w2kGsxK2awlo95xk3EL+ReMqMFZeLAvrUn40HAkrw6dlKWLI1IoXtGGcuLhGMYS9i7A5wWnRI04pn+8NPQc3/OF3Bf0LY/EEgR8QS5z7MtWOk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Q9llK6HjjdZpbJloA8/EPNjk6uFBGCbjPkI0Q0+A61YdwROotEuTW7QpxbSeoB3n1Y8mxTlIdAgeQ3ymYK3NW9PTR8fagVP13LR9WZYbeKCe8YQt1cD6DlN25uQ7b88itRgILQnPirNN16KHeM/GosQF3fh0GxmtCKXq+NKUkZg=
Received: by 10.114.210.2 with SMTP id i2mr2082502wag.1178530265427;
        Mon, 07 May 2007 02:31:05 -0700 (PDT)
Received: by 10.114.127.5 with HTTP; Mon, 7 May 2007 02:31:05 -0700 (PDT)
Message-ID: <a70e4c2b0705070231j3fb8a10blafb518b80717a235@mail.gmail.com>
Date: Mon, 7 May 2007 15:01:05 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: Porter 2 Stemming algorithim in java
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All.

is there a implemention of Porter2 Stemming algorithim in java..

I dont want to make a snowballfilter based on snowball  English Stemmer.

Thanks
Sandeep


-- 
SANDEEP CHAWLA
House No- 23                     			
10th main 					
BTM 1st  Stage     					
Bangalore						Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 10:03:48 2007
Return-Path: <java-user-return-27910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59468 invoked from network); 7 May 2007 10:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 10:03:47 -0000
Received: (qmail 71631 invoked by uid 500); 7 May 2007 10:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71592 invoked by uid 500); 7 May 2007 10:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71581 invoked by uid 99); 7 May 2007 10:03:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 03:03:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 03:03:37 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1216651ika
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 03:03:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=I2+hXKrKlHHW3P7m7xd/Jj6PNaqmNcJb3U38uPP+R1rRpq6Rs0t6rwfP+JVg6ivQd4vYIkGGn7n38ZiymZZTdBoP4mWxKNV7PBBikXfQ5jnyka3ScWmxMzujKHXQHvKXB3CL2ekCZtPMEeO+zFAhc3lGHXsBPqoKHdmh+wZq9Cs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=UZXThajqwOfkjVTj5O++L6g6E7MMWh9wCzWXFMFxHbf+BLCZDuEeg2JCRN8VU1hKEK3sDPb7WJR/YUw+71PcBHs8gkRVRdpXXBzuX2Qtpx6mn8FK3Rh479/8qKH3DzHAF4LfWq5jFpYqxYSOKz8gRjqnYBQq0TZD0cOp4dUri1E=
Received: by 10.65.222.11 with SMTP id z11mr2679052qbq.1178532195942;
        Mon, 07 May 2007 03:03:15 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id q18sm4027566qbq.2007.05.07.03.03.13;
        Mon, 07 May 2007 03:03:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10353549.post@talk.nabble.com>
References: <10353549.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Multi language indexing
Date: Mon, 7 May 2007 12:02:19 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


7 maj 2007 kl. 10.02 skrev bhecht:

> This means I index and search using the same analyzer.
>
> I was interested to know if this is the way to go?

That would be the way to go (unless you are really sure what you're  
doing).

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 10:16:39 2007
Return-Path: <java-user-return-27911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63932 invoked from network); 7 May 2007 10:16:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 10:16:38 -0000
Received: (qmail 90246 invoked by uid 500); 7 May 2007 10:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90211 invoked by uid 500); 7 May 2007 10:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90199 invoked by uid 99); 7 May 2007 10:16:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 03:16:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 03:16:28 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl0GF-0003YO-Do
	for java-user@lucene.apache.org; Mon, 07 May 2007 03:16:07 -0700
Message-ID: <10354930.post@talk.nabble.com>
Date: Mon, 7 May 2007 03:16:07 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I know indexing and searching need to use the same analyzer.

My question regarding "the way to go", was if it is a good solution to index
a content of a table, using more than 1 analyzer, determining the analyzer
by the country value of each record.

Couldn't find a post that describes exactly my problem, and I just want to
be sure this is how people with Lucene 
expiriance would have approached this problem.

Thanks
-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10354930
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 11:06:50 2007
Return-Path: <java-user-return-27912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86682 invoked from network); 7 May 2007 11:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 11:06:49 -0000
Received: (qmail 59221 invoked by uid 500); 7 May 2007 11:06:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58231 invoked by uid 500); 7 May 2007 11:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58220 invoked by uid 99); 7 May 2007 11:06:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 04:06:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 04:06:41 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1477961nzh
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 04:06:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=qKhmo7TxJiI9tHy9Igi0Lr4Cf2HIoSNj4WYQ82yMvcYMISVB5iqq2uk01fHit0v7r9ijGx0he/TPbtOIKOuJpERY1Y3+SowZTGgHX1CYRZvQDqUs3Dr86lF7bDijicwc67Z3CmE5eh7dC94i8NTuRIk5zDZYSmzQWEpzvf2Y/aA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=axTSQjlsrOoT563DkLaNhW1bRzMkLtxfKJ3dhOEob+OnC725rBUJeZQzMnPJ+Byk1yHPFi+qwNmr6s4rFJOV4O2eezdTFyfZ87Gi7NT/gNenFMU9EBdcxYcsG47yKHt9zReOtkCy6l7WlLsDfC2+F/X7RFMrnwP+cJ+O4YOzhzw=
Received: by 10.65.151.6 with SMTP id d6mr9790787qbo.1178535981262;
        Mon, 07 May 2007 04:06:21 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id e18sm5287818qba.2007.05.07.04.06.19;
        Mon, 07 May 2007 04:06:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10354930.post@talk.nabble.com>
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Multi language indexing
Date: Mon, 7 May 2007 13:05:24 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


7 maj 2007 kl. 12.16 skrev bhecht:

> My question regarding "the way to go", was if it is a good solution  
> to index
> a content of a table, using more than 1 analyzer, determining the  
> analyzer
> by the country value of each record.

I'm not sure what you mean, but I'll try.

Do you ask if it makes sense to stem text based on the language of  
the text and put in the same field no matter what language it is?

For the record, it usually makes very little sense to search in text  
stemmed for one language with a query stemmed for another language.  
This is what you will do if you store the stemmed text, no matter the  
language, in the same field. You could add another field called  
"language_iso" and add a boolean clause, but that would just be  
overkill and will increase the response time.

In essence, it depends on your needs. For instance, are users  
supposed to find documents written in other languages than the  
language specified? You want to limit searches to a content language?

My guess is that you probably want to index unstemmed in  
"unstemmed_text" and stemmed in a language specific field  
"stemmed_text_[language iso]", or so, querying the unstemmed field  
and the user language specific when searching, boosting the stemmed  
field.

I hope this helps.

-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 11:27:34 2007
Return-Path: <java-user-return-27913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92654 invoked from network); 7 May 2007 11:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 11:27:33 -0000
Received: (qmail 86150 invoked by uid 500); 7 May 2007 11:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85785 invoked by uid 500); 7 May 2007 11:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85774 invoked by uid 99); 7 May 2007 11:27:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 04:27:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 04:27:26 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl1Mv-00054m-Vz
	for java-user@lucene.apache.org; Mon, 07 May 2007 04:27:05 -0700
Message-ID: <10355770.post@talk.nabble.com>
Date: Mon, 7 May 2007 04:27:05 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


OK, thanks for the reply.
The last option seems to be the right one for me, using a stemmed and
unstemmed field.
I assume when you mean "unstemmed", you mean indexing the field using the
UN_TOKENIZED parameter.

Now my problem starts, when trying to implement this with "Hibernate
Search", which allows only 1 analyzer to be defined.

Thanks, I will post my problem now in the Hibernate search forum.

Good day.
-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10355770
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 12:51:26 2007
Return-Path: <java-user-return-27914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13946 invoked from network); 7 May 2007 12:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 12:51:26 -0000
Received: (qmail 20475 invoked by uid 500); 7 May 2007 12:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20442 invoked by uid 500); 7 May 2007 12:51:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20431 invoked by uid 99); 7 May 2007 12:51:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 05:51:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 05:51:16 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl2g4-0006x6-6w
	for java-user@lucene.apache.org; Mon, 07 May 2007 05:50:56 -0700
Message-ID: <10356834.post@talk.nabble.com>
Date: Mon, 7 May 2007 05:50:56 -0700 (PDT)
From: Vikas <vikaskumar_09@hotmail.com>
To: java-user@lucene.apache.org
Subject: Scope-based crawling and indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vikaskumar_09@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All:

Can I make nutch to crawl and create separate indices based on scope , where
scope is determined from the querystring?

For example:

Let's assume that I'm having URL like:

http://localhost/admin/orchindex/crawl.asp?lCrpID=0&lPrjID=609&lStrtID=3605&l

then,

lCrpId=0 is one scope

lCorpid=1 is another

and for all urls with lCrpId=0 we want one index and for those with lCrpId=1
we want another


Regards,
Vikas Kumar
-- 
View this message in context: http://www.nabble.com/Scope-based-crawling-and-indexing-tf3703543.html#a10356834
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 13:26:42 2007
Return-Path: <java-user-return-27915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30907 invoked from network); 7 May 2007 13:26:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 13:26:36 -0000
Received: (qmail 78231 invoked by uid 500); 7 May 2007 13:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77695 invoked by uid 500); 7 May 2007 13:26:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77684 invoked by uid 99); 7 May 2007 13:26:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 06:26:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 06:26:27 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1517129nzh
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 06:26:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=TgWq9kUPv6ZwmGjzuHUKT4KXNUcQucDkuZuPGQjSbB4q3Ut/lNT4fBBXAzReFHW1QGX8o1joTg2RRy3cXuJb0d4Qeau5ZQqDkGfsBRfZ+Wzjklfs/MoXhpTOTjG5jniOtHqkd2zKk1T9kffKtfgGg+5fNasQkdbRAGqP+3J+ALg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CEocfp0CdekW6sPsytFpMS/OsfYnR8dF2nxJqV/QvmbQQBAUp47uTRRLnbzqYt9JUlNhOdH/QTRfEsKqTf/+7PXukKHBNpMvc94vVLkfmkHWyj7SJHgT39r0xkK62S0Fgt+wtWVTlTtkHd/B4azmOea82jiLXrgdSkEX6ULgflk=
Received: by 10.64.131.4 with SMTP id e4mr10027076qbd.1178544366819;
        Mon, 07 May 2007 06:26:06 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id f12sm5436529qba.2007.05.07.06.26.05;
        Mon, 07 May 2007 06:26:05 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10355770.post@talk.nabble.com>
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Multi language indexing
Date: Mon, 7 May 2007 15:25:09 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


7 maj 2007 kl. 13.27 skrev bhecht:

> The last option seems to be the right one for me, using a stemmed and
> unstemmed field.
> I assume when you mean "unstemmed", you mean indexing the field  
> using the
> UN_TOKENIZED parameter.

No, I mean TOKENIZED, but not using a stemmer analyzer.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 13:45:56 2007
Return-Path: <java-user-return-27916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36504 invoked from network); 7 May 2007 13:45:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 13:45:56 -0000
Received: (qmail 5098 invoked by uid 500); 7 May 2007 13:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5074 invoked by uid 500); 7 May 2007 13:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5059 invoked by uid 99); 7 May 2007 13:45:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 06:45:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 06:45:47 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl3Wp-0000BO-36
	for java-user@lucene.apache.org; Mon, 07 May 2007 06:45:27 -0700
Message-ID: <10357611.post@talk.nabble.com>
Date: Mon, 7 May 2007 06:45:27 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com> <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


OK, thanks, I think I got it.

Just to see if I understood correctly:

When I do the search on both stemmed and unstemmed fields, I will do the
following:

1) If I know the country of the requested search -  I will use the stemmed
analyzer, and then the unstemmed field 
                                                                             
might not be found (the stemmed field will be found).

2) if I don't know the country of the requested search - I will use the
unstemmed analyzer, and then the stemmed field
                                                                                    
might not be found.

Am I correct?
-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10357611
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 16:28:28 2007
Return-Path: <java-user-return-27917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1457 invoked from network); 7 May 2007 16:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 16:28:25 -0000
Received: (qmail 51303 invoked by uid 500); 7 May 2007 16:28:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51263 invoked by uid 500); 7 May 2007 16:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51252 invoked by uid 99); 7 May 2007 16:28:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 09:28:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 09:28:17 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1722539wxd
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 09:27:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=A5uR0qOg0JPRZksKjp7880+hf3pr6gwzYI4oFTAGd9WtUBtzg6RiQGAUZqpjub56LZNuL8FLZcolKirh1cZSeUlkTUmf846Wl+Xu79o6PMTbOCUgUSq8XUgJrstpJZfvkbHTvCJMYIWYsEpJEkN37mn2xoa44tnD+E4uIgikETA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=h/t/hHZi0qDU7b6TUgzNGVkEwMfYx2EjXpX5JX5OSbsp5HAYQrda6nMzjaHhulYzkdUzUauzpgnLr7uzImMooE21e0FSsDZ1ZDjYGbWZdz6MRNUvNt71LSBJQZ9TFzR2NzfOUF6t1GZCBz8YOJmwC6ZNHzoYwTbc0zOJeDZLOQ4=
Received: by 10.90.97.11 with SMTP id u11mr5325036agb.1178555276672;
        Mon, 07 May 2007 09:27:56 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id f16sm5652015qba.2007.05.07.09.27.55;
        Mon, 07 May 2007 09:27:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <10357611.post@talk.nabble.com>
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com> <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com> <10357611.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Multi language indexing
Date: Mon, 7 May 2007 18:26:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


7 maj 2007 kl. 15.45 skrev bhecht:

>
> OK, thanks, I think I got it.
>
> Just to see if I understood correctly:
>
> When I do the search on both stemmed and unstemmed fields, I will  
> do the
> following:
>
> 1) If I know the country of the requested search -  I will use the  
> stemmed
> analyzer, and then the unstemmed field
>
> might not be found (the stemmed field will be found).
>
> 2) if I don't know the country of the requested search - I will use  
> the
> unstemmed analyzer, and then the stemmed field
>
> might not be found.
>
> Am I correct?

Above sounds very confused and I'm afraid you got it all mixed up.  
Please explain in detail what your data looks like and what effect  
you are looking for. It will make it easier for all parties.

I have no idea how Hibernate search works, perhaps that is the reason  
for me not to understand what you try to do.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 17:26:59 2007
Return-Path: <java-user-return-27918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20529 invoked from network); 7 May 2007 17:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 17:26:58 -0000
Received: (qmail 73123 invoked by uid 500); 7 May 2007 17:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72979 invoked by uid 500); 7 May 2007 17:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72968 invoked by uid 99); 7 May 2007 17:26:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:26:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:26:48 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl6yi-0006gb-1W
	for java-user@lucene.apache.org; Mon, 07 May 2007 10:26:28 -0700
Message-ID: <10361747.post@talk.nabble.com>
Date: Mon, 7 May 2007 10:26:27 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com> <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com> <10357611.post@talk.nabble.com> <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry,

I didn't understand I need to use the PerFieldanalyzerWrapper for this task,
and tried to index the document twice.
Sorry for the previous post.
thanks for the great help.

But if you already asked, I will be happy to explain what my goal is, and
maybe see if i'm approaching this correctly:

I have a database table containing records of company information, like
comapny name, address, city, state ... country.
The companies information may be written in different languages, but I can
determine the language according to the country field each record has (an
exception to this are countries that use more than 1 language).

I have a JSF form containing input fields for each column, so users can
search for companies.
I have my own metadata (stop words...) and matching alghorythms for each
different country, which I want to use during the analysis process of
Lucene. I have implemented my own analyzer for each country.
So as I see it, when I index these records, I want to provide lucene, with a
specific analyzer per record i'm indexing. 
When a user performs a query in my JSF form, I will use the country value he
entered, to get the needed analyzer, and query lucene with the users query
and the needed analyzer.
The user may also choose not to enter a country value to his search, and
here comes in the solution you gave me, to duplicate each field, and index
it using a non stemming analyzer (A standard analyzer without stop words
defined).
Then with no country entered ni a search, I will use the non stemming
analyzer.

Am I going the right direction?

-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10361747
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 17:30:02 2007
Return-Path: <java-user-return-27919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21197 invoked from network); 7 May 2007 17:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 17:30:01 -0000
Received: (qmail 82069 invoked by uid 500); 7 May 2007 17:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81828 invoked by uid 500); 7 May 2007 17:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81817 invoked by uid 99); 7 May 2007 17:30:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:30:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:29:51 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hl71f-0006jq-B7
	for java-user@lucene.apache.org; Mon, 07 May 2007 10:29:31 -0700
Message-ID: <10361747.post@talk.nabble.com>
Date: Mon, 7 May 2007 10:26:27 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com> <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com> <10357611.post@talk.nabble.com> <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry,

I didn't understand I need to use the PerFieldanalyzerWrapper for this task,
and tried to index the document twice.
Sorry for the previous post.
thanks for the great help.

But if you already asked, I will be happy to explain what my goal is, and
maybe see if i'm approaching this correctly:

I have a database table containing records of company information, like
comapny name, address, city, state ... country.
The companies information may be written in different languages, but I can
determine the language according to the country field each record has (an
exception to this are countries that use more than 1 language).

I have a JSF form containing input fields for each column, so users can
search for companies.
I have my own metadata (stop words...) and matching alghorythms for each
different country, which I want to use during the analysis process of
Lucene. 
I have implemented my own analyzer for each country.
So as I see it, when I index these records, I want to provide lucene, with a
specific analyzer per record i'm indexing. 
When a user performs a query in my JSF form, I will use the country value he
entered, to get the needed analyzer, and query lucene with the users query
and the needed analyzer.
The user may also choose not to enter a country value to his search, and
here comes in the solution you gave me, to duplicate each field, and index
it using a non stemming analyzer (A standard analyzer without stop words
defined).

Am I going the right direction?

-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10361747
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 17:35:02 2007
Return-Path: <java-user-return-27920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22087 invoked from network); 7 May 2007 17:35:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 17:35:01 -0000
Received: (qmail 91562 invoked by uid 500); 7 May 2007 17:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91524 invoked by uid 500); 7 May 2007 17:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91510 invoked by uid 99); 7 May 2007 17:35:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:35:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:34:53 -0700
Received: from [192.168.1.100] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id l47Hebm14248
	for <java-user@lucene.apache.org>; Mon, 7 May 2007 13:40:38 -0400
Message-ID: <463F637E.3030404@alias-i.com>
Date: Mon, 07 May 2007 13:35:58 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Language detection library
References: <3563fa0d0705031255m673f3fb8l60aba4ae02f61deb@mail.gmail.com> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4A3@emss10m02.us.lmco.com> <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com>
In-Reply-To: <7175B465-0F0B-4E32-AE7C-B7749B5B7F2C@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>> Anyone knows of a good language detection library that can detect what
>> language a document (text) is ?

Language detection is easy.  It's just a simple
text classification problem.

One way you can do this is using Lucene
itself.  Create a so-called pseudo-document
for each language consisting of lots of text
(1 MB or more, ideally).  Then build a Lucene
index using a character n-gram tokenizer.
Eg. "John Smith" tokenizes to "Jo", "oh",
"hn", "n ", " S", "Sm", "mi", "it", "th"
with 2-grams.

You'll have to make sure to index beyond the
first 1000 tokens or whatever Lucene is set to
by default.

To do language ID, just treat the language
to be identified as the basis of a query.
Parse it using the same character n-gram
tokenizer.  The highest-scoring result is
the answer and if two score high, you know
there may be some ambiguity.  You can't trust
Lucene's normalized scoring for rejection,
though.

Make sure the tokenizer includes spaces as
well as non-space characters (though all
spaces may be normalized to a single whitespace).
Using more orders (1-grams, 2-grams, 3-grams,
etc.) gives more accuracy; the IDF weighting
is quite sensible here and will work out the
details for the counts for you.

For a more sophisticated approach, check out
LingPipe's language ID tutorial, which is
based on probabilistic character language models.
Think of it as similar to the Lucene model but
with different term weighting.

    http://www.alias-i.com/lingpipe/demos/tutorial/langid/read-me.html

Here's accuracy vs. input length on a set of 15
languages from the Leipzig Corpus collection (just
one of the many evals in the tutorial):

#chars  accuracy
1	22.59%
2	34.82%
4	58.55%
8	81.17%
16	92.45%
32	97.33%
64	98.99%
128	99.67%

The end of the tutorial has references to other
popular language ID packages online (e.g. TextCat,
which is Gertjan van Noord's Perl package).  And it
also has references to the technical background
on TF/IDF classification with n-grams and
character language models.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 17:46:14 2007
Return-Path: <java-user-return-27921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29472 invoked from network); 7 May 2007 17:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 17:46:13 -0000
Received: (qmail 18779 invoked by uid 500); 7 May 2007 17:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18590 invoked by uid 500); 7 May 2007 17:46:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18579 invoked by uid 99); 7 May 2007 17:46:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:46:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 10:46:03 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id l47Hjfjs076826
	for <java-user@lucene.apache.org>; Mon, 7 May 2007 19:45:41 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Possible bug in SpanNearQuery
Date: Mon, 7 May 2007 19:45:40 +0200
User-Agent: KMail/1.8.2
References: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com> <200705062017.05159.paul.elschot@xs4all.nl> <268575990705070044m24076003u5d284a909e7f09be@mail.gmail.com>
In-Reply-To: <268575990705070044m24076003u5d284a909e7f09be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705071945.40811.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Moti,

I have not yet looked into all the details of your comments,
but I remember I had some trouble in trying to define the precise
semantics of NearSpansOrdered. I'll have another look at
being more precise for the overlaps.

NearSpansUnordered is a specialisation of the previous NearSpans
for the unordered case. The ordered case had a bug, which
was fixed by the introduction of NearSpansOrdered.

Your wish to have "one two two" match twice against a query
"one two" with sufficient slop could be probably implemented in
a (hopefully) minor variation of NearSpansOrdered.
NearSpansUnordered has a very different implementation and
I cannot say of the top of my head whether it could be varied
in a similar way.

Providing only the shortest possible match gives some efficiency
and is linguistically easy to understand.

Nested span queries, SpanOrQuery and multiple terms indexed
at the same position (i.e. overlapping in the index) can make these
things quite tricky to implement correctly.

I think it would be worthwhile to open a jira issue for these things.
Could you do that and add your test code there under APL 2?
To make it work as a junit test with the existing ant build.xml might
require renaming the class to start with Test... instead of ending in ...Test.

Shall we move further discussion to the java-dev list?

Regards,
Paul Elschot



On Monday 07 May 2007 09:44, Moti Nisenson wrote:
> Paul,
> 
> The comment should be moved up into SpanNearQuery itself (as opposed to the
> comments in the package private implementation classes). Still though, that
> comment is inaccurate (regarding overlap - only "exact" overlap is handled).
> Here are some additional tests for SpanNearQuery. They all fail except for
> testNotExactOverlapInOrder, testTermOvelapStartInOrder and
> testTermOverlapEndInOrder (note that the failures for the NotInOrder case
> may be alright. There is no documentation indicating the desired behavior).
> 
> 
> import java.io.IOException;
> import java.io.Reader;
> import java.io.StringReader;
> 
> import junit.framework.TestCase;
> 
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.Token;
> import org.apache.lucene.analysis.TokenFilter;
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.spans.SpanNearQuery;
> import org.apache.lucene.search.spans.SpanQuery;
> import org.apache.lucene.search.spans.SpanTermQuery;
> import org.apache.lucene.search.spans.Spans;
> import org.apache.lucene.store.RAMDirectory;
> 
> public class SpanNearQueryTest extends TestCase {
> 
>     private RAMDirectory dir;
> 
>     @Override
>     protected void setUp() throws Exception {
>         super.setUp();
>         dir = new RAMDirectory();
>         Document doc = new Document();
>         doc.add(new Field("field", new StringReader("one two two three four
> five")));
>         IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer());
>         writer.addDocument(doc);
>         writer.close();
>     }
> 
>     public void testNearQueryInOrder() throws Exception {
>         checkNearQuery(true);
>     }
> 
>     public void testNearQueryNotInOrder() throws Exception {
>         checkNearQuery(false);
>     }
> 
>     private void checkNearQuery(boolean inOrder) throws Exception {
>         SpanNearQuery query = buildQuery(5, inOrder, "one", "two");
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(2, numSpans);
>     }
> 
>     private int countSpans(Spans spans) throws IOException {
>         int numSpans = 0;
>         while (spans.next())
>             numSpans++;
>         return numSpans;
>     }
> 
>     public void testMinimalSpanInOrder() throws Exception {
>         checkMinimalSpan(true);
>     }
> 
>     public void testMinimalSpanNotInOrder() throws Exception {
>         checkMinimalSpan(false);
>     }
> 
>     private void checkMinimalSpan(boolean inOrder) throws Exception {
>         SpanNearQuery query = buildQuery(5, inOrder, "two", "three");
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         boolean firstSpan = true;
>         int firstSlop = -1;
>         int numSpans = 0;
>         while (spans.next()) {
>             numSpans++;
>             if (firstSpan) {
>                 firstSlop = spans.end() - spans.start();
>                 firstSpan = false;
>             }
>         }
> 
>         reader.close();
> 
>         assertEquals(1, numSpans);
>         assertEquals(1, firstSlop);
>     }
> 
> 
>     public void testNotContainingStartInOrder() throws Exception {
>         checkNotContainingStart(true);
>     }
> 
>     public void testNotContainingStartNotInOrder() throws Exception {
>         checkNotContainingStart(false);
>     }
> 
>     public void testNotContainingEndInOrder() throws Exception {
>         checkNotContainingEnd(true);
>     }
> 
>     public void testNotContainingEndNotInOrder() throws Exception {
>         checkNotContainingEnd(false);
>     }
> 
>     public void testNotOverlappingInOrder() throws Exception {
>         checkNotOverlapping(true);
>     }
> 
>     public void testNotOverlappingNotInOrder() throws Exception {
>         checkNotOverlapping(false);
>     }
> 
>     public void testNotExactOverlapInOrder() throws Exception {
>         checkNotExactOverlap(true);
>     }
> 
>     public void testNotExactOverlapNotInOrder() throws Exception {
>         checkNotExactOverlap(false);
>     }
> 
> 
>     private void checkNotContainingEnd(boolean inOrder) throws Exception {
>         SpanNearQuery query1 = buildQuery(5, inOrder, "one", "three");
>         SpanNearQuery query2 = buildQuery(5, inOrder, "two", "three");
> 
>         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> query2}, 5, inOrder);
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(0, numSpans);
>     }
> 
>     private void checkNotContainingStart(boolean inOrder) throws Exception {
>         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
>         SpanNearQuery query2 = buildQuery(5, inOrder, "three", "five");
> 
>         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> query2}, 5, inOrder);
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(0, numSpans);
>     }
> 
>     private void checkNotOverlapping(boolean inOrder) throws Exception {
>         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
>         SpanNearQuery query2 = buildQuery(5, inOrder, "four", "five");
> 
>         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> query2}, 5, inOrder);
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(0, numSpans);
>     }
> 
>     private void checkNotExactOverlap(boolean inOrder) throws Exception {
>         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
>         SpanNearQuery query2 = buildQuery(5, inOrder, "three", "four");
> 
>         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> query2}, 5, inOrder);
> 
>         IndexReader reader = IndexReader.open(dir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(0, numSpans);
>     }
> 
> 
>     // for these two tests w2 has the same position as w1
>     public void testTermOverlapStartInOrder() throws Exception {
>         checkTermOverlap("w2", true, "w1", "w2", "w5");
>     }
>     public void testTermOverlapStartNotInOrder() throws Exception {
>         checkTermOverlap("w2", false, "w1", "w2", "w5");
>     }
> 
>     // for these two tests w5 has the same position as w4
>     public void testTermOverlapEndInOrder() throws Exception {
>         checkTermOverlap("w5", true, "w1", "w4", "w5");
>     }
>     public void testTermOverlapEndNotInOrder() throws Exception {
>         checkTermOverlap("w5", false, "w1", "w4", "w5");
>     }
> 
> 
>     private void checkTermOverlap(String term, boolean inOrder, String...
> queryTerms) throws Exception {
>         RAMDirectory tempDir = new RAMDirectory();
>         Document doc = new Document();
>         doc.add(new Field("field", new StringReader("w1 w2 w3 w1 w4 w5")));
>         IndexWriter writer = new IndexWriter(tempDir,
> getPositionAnalyzer(term));
>         writer.addDocument(doc);
>         writer.close();
> 
>         SpanNearQuery query = buildQuery(7, inOrder, queryTerms);
> 
>         IndexReader reader = IndexReader.open(tempDir);
>         Spans spans = query.getSpans(reader);
> 
>         int numSpans = countSpans(spans);
> 
>         reader.close();
> 
>         assertEquals(0, numSpans);
>     }
> 
> 
>     private Analyzer getPositionAnalyzer(final String term) {
>         return new Analyzer() {
> 
>             @Override
>             public TokenStream tokenStream(String fieldName, Reader reader)
> {
>                 return new TokenFilter(new
> StandardAnalyzer().tokenStream(fieldName, reader)) {
> 
>                     @Override
>                     public Token next() throws IOException {
>                         Token result = input.next();
> 
>                         if (result != null && result.termText
> ().equals(term))
>                             result.setPositionIncrement(0);
> 
>                         return result;
>                     }
> 
>                 };
>             }
> 
>         };
>     }
> 
>     private SpanNearQuery buildQuery(int slop, boolean inOrder, String...
> terms) {
>         SpanQuery[] termQueries = new SpanQuery[terms.length];
>         for (int i = 0; i < termQueries.length; i++)
>             termQueries[i] = new SpanTermQuery(new Term("field", terms[i]));
> 
>         return new SpanNearQuery(termQueries, slop, inOrder);
>     }
> 
> 
>     @Override
>     protected void tearDown() throws Exception {
>         dir = null; // release directory
>         super.tearDown();
>     }
> 
> 
> 
> }
> 
> On 5/6/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > Moti,
> >
> > I tried your test and it fails in the way you describe, however, I don't
> > think
> > the test shows a bug.
> >
> > Below is the javadoc comment for the package private class
> > NearSpansOrdered.
> > Would that be sufficient documentation for the ordered case?
> >
> > /** A Spans that is formed from the ordered subspans of a SpanNearQuery
> > * where the subspans do not overlap and have a maximum slop between them.
> > * <p>
> > * The formed spans only contains minimum slop matches.<br>
> > * The matching slop is computed from the distance(s) between
> > * the non overlapping matching Spans.<br>
> > * Successive matches are always formed from the successive Spans
> > * of the SpanNearQuery.
> > * <p>
> > * The formed spans may contain overlaps when the slop is at least 1.
> > * For example, when querying using
> > * <pre>t1 t2 t3</pre>
> > * with slop at least 1, the fragment:
> > * <pre>t1 t2 t1 t3 t2 t3</pre>
> > * matches twice:
> > * <pre>t1 t2 .. t3      </pre>
> > * <pre>      t1 .. t2 t3</pre>
> > */
> >
> > Unfortunately for the unordered case in NearSpansUnordered.java there is
> > no
> > class comment available in the code.
> >
> > You can take a look at the existing span tests here:
> >
> > 
http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/search/spans
> >
> >
> > Regards,
> > Paul Elschot
> >
> >
> >
> > On Sunday 06 May 2007 16:11, Moti Nisenson wrote:
> > > Looking over the implementation of SpanNearQuery I came upon what looked
> > > like a bug. Below is a test which fails due to it. SpanNearQuery doesn't
> > > return all matching spans; once it's found a span it always increments
> > the
> > > span of the clause appearing first in that span (ie. in the example
> > below
> > > the two spans should be "one two" and "one two two" where the second has
> > a
> > > slop of 1 - unfortunately the span of "one" gets incremented after "one
> > two"
> > > is found and so no additional spans get returned). Both in-order and
> > > out-of-order SpanNearQueries fail this test.
> > >
> > > I  think this is an undocumented feature and that the assumption is that
> > if
> > > someone searches for "one" near "two"  they're interested in the "one
> > two"
> > > result and not necessarily the "one two two" result. However,
> > > SpanNearQueries can be combined and by not returning all matching spans
> > this
> > > can result in problems. For example were we to intersect (ie.
> > SpanNearQuery
> > > with 0 slop) between the results of different SpanNearQueries, it is
> > > possible that the shortest possible span won't intersect, while a longer
> > > span (with legal slop) would.
> > >
> > > In my mind this is a bug (at least until there is some documentation),
> > and I
> > > would expect there to be an option (either a boolean parameter or a
> > > different class) which would indeed return all spans which satisfy the
> > slop
> > > constraint.
> > >
> > > What I'd like to know is:
> > >
> > > 1) Is this a bug?
> > > 2) Is there any known workaround for this issue (besides rolling my own,
> > of
> > > course)?
> > > 3) Could this bug/feature lead to problems with document scoring?
> > >
> > > Thanks,
> > >
> > > Moti
> > >
> > >
> > >
> > > import java.io.StringReader;
> > >
> > > import junit.framework.TestCase;
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > import org.apache.lucene.document.Document;
> > > import org.apache.lucene.document.Field ;
> > > import org.apache.lucene.index.IndexReader;
> > > import org.apache.lucene.index.IndexWriter;
> > > import org.apache.lucene.index.Term;
> > > import org.apache.lucene.search.spans.SpanNearQuery;
> > > import org.apache.lucene.search.spans.SpanQuery ;
> > > import org.apache.lucene.search.spans.SpanTermQuery;
> > > import org.apache.lucene.search.spans.Spans;
> > > import org.apache.lucene.store.RAMDirectory;
> > >
> > > public class SpanNearQueryTest extends TestCase {
> > >
> > >     private RAMDirectory dir;
> > >
> > >     @Override
> > >     protected void setUp() throws Exception {
> > >         super.setUp();
> > >         dir = new RAMDirectory();
> > >         Document doc = new Document();
> > >         doc.add(new Field("field", new StringReader("one two two")));
> > >         IndexWriter writer = new IndexWriter(dir, new
> > StandardAnalyzer());
> > >         writer.addDocument(doc);
> > >         writer.close();
> > >     }
> > >
> > >     public void testNearQueryInOrder() throws Exception {
> > >         checkNearQuery(true);
> > >     }
> > >
> > >     public void testNearQueryNotInOrder() throws Exception {
> > >         checkNearQuery(false);
> > >     }
> > >
> > >     private void checkNearQuery(boolean inOrder) throws Exception {
> > >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[]
> > >                     {new SpanTermQuery(new Term("field", "one")),
> > >                     new SpanTermQuery(new Term("field", "two"))}, 5,
> > > inOrder);
> > >
> > >         IndexReader reader = IndexReader.open(dir);
> > >         Spans spans = query.getSpans(reader);
> > >
> > >         int numSpans = 0;
> > >         while (spans.next())
> > >             numSpans++;
> > >
> > >         reader.close();
> > >
> > >         assertEquals(2, numSpans);
> > >     }
> > >
> > >
> > >     @Override
> > >     protected void tearDown() throws Exception {
> > >         dir = null; // release directory
> > >         super.tearDown();
> > >     }
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 19:08:17 2007
Return-Path: <java-user-return-27922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56368 invoked from network); 7 May 2007 19:08:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 19:08:16 -0000
Received: (qmail 63946 invoked by uid 500); 7 May 2007 19:08:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63561 invoked by uid 500); 7 May 2007 19:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63547 invoked by uid 99); 7 May 2007 19:08:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 12:08:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of moti.nisenson@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 12:08:05 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1626249wra
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 12:07:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IVdtdATjnhRIFq96jII/WRYUSQ+CJ7M+zW001S9sG20Jsd1AcPrGfOAok2pgGmRnkQFtA0N+kETQvTYosm8E9U3L133rQQFTau+iHI7lJI5nT9mRPVrF9fKxOhcRNxeKBEWfU4Q62/TFDtUMkfro5X1J6C2n7FijOrAtf0Dbv4A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DPn7Ss3BAArUejl+xJ2pNPl/6meeCj0jlcnEEjKnkkIR7bZibjDk+hhW7058BR1oZ9Q85EAAwUw9iB1mThgkRU5a3hz2j8ONhlGJL3z2xv/iZ1ovwOeMYYSthwaAseTjqhwFbotf1AKuGWN778YN3rcWrQPUNWspZ7jQvT9nuSU=
Received: by 10.78.17.1 with SMTP id 1mr2231930huq.1178564863587;
        Mon, 07 May 2007 12:07:43 -0700 (PDT)
Received: by 10.78.183.20 with HTTP; Mon, 7 May 2007 12:07:43 -0700 (PDT)
Message-ID: <268575990705071207l528a1afawc77ad8073c23adc0@mail.gmail.com>
Date: Mon, 7 May 2007 21:07:43 +0200
From: "Moti Nisenson" <moti.nisenson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Possible bug in SpanNearQuery
In-Reply-To: <200705071945.40811.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31323_31432277.1178564863247"
References: <268575990705060711u4d4cc869wb4cb9af435c2526e@mail.gmail.com>
	 <200705062017.05159.paul.elschot@xs4all.nl>
	 <268575990705070044m24076003u5d284a909e7f09be@mail.gmail.com>
	 <200705071945.40811.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31323_31432277.1178564863247
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure thing. I actually haven't taken a sufficiently close look at
NearSpansOrdered (I was concentrating more on NearSpansUnordered, which has
got next to no documentation).

- Moti

On 5/7/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Moti,
>
> I have not yet looked into all the details of your comments,
> but I remember I had some trouble in trying to define the precise
> semantics of NearSpansOrdered. I'll have another look at
> being more precise for the overlaps.
>
> NearSpansUnordered is a specialisation of the previous NearSpans
> for the unordered case. The ordered case had a bug, which
> was fixed by the introduction of NearSpansOrdered.
>
> Your wish to have "one two two" match twice against a query
> "one two" with sufficient slop could be probably implemented in
> a (hopefully) minor variation of NearSpansOrdered.
> NearSpansUnordered has a very different implementation and
> I cannot say of the top of my head whether it could be varied
> in a similar way.
>
> Providing only the shortest possible match gives some efficiency
> and is linguistically easy to understand.
>
> Nested span queries, SpanOrQuery and multiple terms indexed
> at the same position (i.e. overlapping in the index) can make these
> things quite tricky to implement correctly.
>
> I think it would be worthwhile to open a jira issue for these things.
> Could you do that and add your test code there under APL 2?
> To make it work as a junit test with the existing ant build.xml might
> require renaming the class to start with Test... instead of ending in
> ...Test.
>
> Shall we move further discussion to the java-dev list?
>
> Regards,
> Paul Elschot
>
>
>
> On Monday 07 May 2007 09:44, Moti Nisenson wrote:
> > Paul,
> >
> > The comment should be moved up into SpanNearQuery itself (as opposed to
> the
> > comments in the package private implementation classes). Still though,
> that
> > comment is inaccurate (regarding overlap - only "exact" overlap is
> handled).
> > Here are some additional tests for SpanNearQuery. They all fail except
> for
> > testNotExactOverlapInOrder, testTermOvelapStartInOrder and
> > testTermOverlapEndInOrder (note that the failures for the NotInOrder
> case
> > may be alright. There is no documentation indicating the desired
> behavior).
> >
> >
> > import java.io.IOException;
> > import java.io.Reader;
> > import java.io.StringReader;
> >
> > import junit.framework.TestCase;
> >
> > import org.apache.lucene.analysis.Analyzer;
> > import org.apache.lucene.analysis.Token;
> > import org.apache.lucene.analysis.TokenFilter;
> > import org.apache.lucene.analysis.TokenStream;
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.index.IndexReader;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.index.Term;
> > import org.apache.lucene.search.spans.SpanNearQuery;
> > import org.apache.lucene.search.spans.SpanQuery;
> > import org.apache.lucene.search.spans.SpanTermQuery;
> > import org.apache.lucene.search.spans.Spans;
> > import org.apache.lucene.store.RAMDirectory;
> >
> > public class SpanNearQueryTest extends TestCase {
> >
> >     private RAMDirectory dir;
> >
> >     @Override
> >     protected void setUp() throws Exception {
> >         super.setUp();
> >         dir = new RAMDirectory();
> >         Document doc = new Document();
> >         doc.add(new Field("field", new StringReader("one two two three
> four
> > five")));
> >         IndexWriter writer = new IndexWriter(dir, new
> StandardAnalyzer());
> >         writer.addDocument(doc);
> >         writer.close();
> >     }
> >
> >     public void testNearQueryInOrder() throws Exception {
> >         checkNearQuery(true);
> >     }
> >
> >     public void testNearQueryNotInOrder() throws Exception {
> >         checkNearQuery(false);
> >     }
> >
> >     private void checkNearQuery(boolean inOrder) throws Exception {
> >         SpanNearQuery query = buildQuery(5, inOrder, "one", "two");
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(2, numSpans);
> >     }
> >
> >     private int countSpans(Spans spans) throws IOException {
> >         int numSpans = 0;
> >         while (spans.next())
> >             numSpans++;
> >         return numSpans;
> >     }
> >
> >     public void testMinimalSpanInOrder() throws Exception {
> >         checkMinimalSpan(true);
> >     }
> >
> >     public void testMinimalSpanNotInOrder() throws Exception {
> >         checkMinimalSpan(false);
> >     }
> >
> >     private void checkMinimalSpan(boolean inOrder) throws Exception {
> >         SpanNearQuery query = buildQuery(5, inOrder, "two", "three");
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         boolean firstSpan = true;
> >         int firstSlop = -1;
> >         int numSpans = 0;
> >         while (spans.next()) {
> >             numSpans++;
> >             if (firstSpan) {
> >                 firstSlop = spans.end() - spans.start();
> >                 firstSpan = false;
> >             }
> >         }
> >
> >         reader.close();
> >
> >         assertEquals(1, numSpans);
> >         assertEquals(1, firstSlop);
> >     }
> >
> >
> >     public void testNotContainingStartInOrder() throws Exception {
> >         checkNotContainingStart(true);
> >     }
> >
> >     public void testNotContainingStartNotInOrder() throws Exception {
> >         checkNotContainingStart(false);
> >     }
> >
> >     public void testNotContainingEndInOrder() throws Exception {
> >         checkNotContainingEnd(true);
> >     }
> >
> >     public void testNotContainingEndNotInOrder() throws Exception {
> >         checkNotContainingEnd(false);
> >     }
> >
> >     public void testNotOverlappingInOrder() throws Exception {
> >         checkNotOverlapping(true);
> >     }
> >
> >     public void testNotOverlappingNotInOrder() throws Exception {
> >         checkNotOverlapping(false);
> >     }
> >
> >     public void testNotExactOverlapInOrder() throws Exception {
> >         checkNotExactOverlap(true);
> >     }
> >
> >     public void testNotExactOverlapNotInOrder() throws Exception {
> >         checkNotExactOverlap(false);
> >     }
> >
> >
> >     private void checkNotContainingEnd(boolean inOrder) throws Exception
> {
> >         SpanNearQuery query1 = buildQuery(5, inOrder, "one", "three");
> >         SpanNearQuery query2 = buildQuery(5, inOrder, "two", "three");
> >
> >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> > query2}, 5, inOrder);
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(0, numSpans);
> >     }
> >
> >     private void checkNotContainingStart(boolean inOrder) throws
> Exception {
> >         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
> >         SpanNearQuery query2 = buildQuery(5, inOrder, "three", "five");
> >
> >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> > query2}, 5, inOrder);
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(0, numSpans);
> >     }
> >
> >     private void checkNotOverlapping(boolean inOrder) throws Exception {
> >         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
> >         SpanNearQuery query2 = buildQuery(5, inOrder, "four", "five");
> >
> >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> > query2}, 5, inOrder);
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(0, numSpans);
> >     }
> >
> >     private void checkNotExactOverlap(boolean inOrder) throws Exception
> {
> >         SpanNearQuery query1 = buildQuery(5, inOrder, "three", "four");
> >         SpanNearQuery query2 = buildQuery(5, inOrder, "three", "four");
> >
> >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {query1,
> > query2}, 5, inOrder);
> >
> >         IndexReader reader = IndexReader.open(dir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(0, numSpans);
> >     }
> >
> >
> >     // for these two tests w2 has the same position as w1
> >     public void testTermOverlapStartInOrder() throws Exception {
> >         checkTermOverlap("w2", true, "w1", "w2", "w5");
> >     }
> >     public void testTermOverlapStartNotInOrder() throws Exception {
> >         checkTermOverlap("w2", false, "w1", "w2", "w5");
> >     }
> >
> >     // for these two tests w5 has the same position as w4
> >     public void testTermOverlapEndInOrder() throws Exception {
> >         checkTermOverlap("w5", true, "w1", "w4", "w5");
> >     }
> >     public void testTermOverlapEndNotInOrder() throws Exception {
> >         checkTermOverlap("w5", false, "w1", "w4", "w5");
> >     }
> >
> >
> >     private void checkTermOverlap(String term, boolean inOrder,
> String...
> > queryTerms) throws Exception {
> >         RAMDirectory tempDir = new RAMDirectory();
> >         Document doc = new Document();
> >         doc.add(new Field("field", new StringReader("w1 w2 w3 w1 w4
> w5")));
> >         IndexWriter writer = new IndexWriter(tempDir,
> > getPositionAnalyzer(term));
> >         writer.addDocument(doc);
> >         writer.close();
> >
> >         SpanNearQuery query = buildQuery(7, inOrder, queryTerms);
> >
> >         IndexReader reader = IndexReader.open(tempDir);
> >         Spans spans = query.getSpans(reader);
> >
> >         int numSpans = countSpans(spans);
> >
> >         reader.close();
> >
> >         assertEquals(0, numSpans);
> >     }
> >
> >
> >     private Analyzer getPositionAnalyzer(final String term) {
> >         return new Analyzer() {
> >
> >             @Override
> >             public TokenStream tokenStream(String fieldName, Reader
> reader)
> > {
> >                 return new TokenFilter(new
> > StandardAnalyzer().tokenStream(fieldName, reader)) {
> >
> >                     @Override
> >                     public Token next() throws IOException {
> >                         Token result = input.next();
> >
> >                         if (result != null && result.termText
> > ().equals(term))
> >                             result.setPositionIncrement(0);
> >
> >                         return result;
> >                     }
> >
> >                 };
> >             }
> >
> >         };
> >     }
> >
> >     private SpanNearQuery buildQuery(int slop, boolean inOrder,
> String...
> > terms) {
> >         SpanQuery[] termQueries = new SpanQuery[terms.length];
> >         for (int i = 0; i < termQueries.length; i++)
> >             termQueries[i] = new SpanTermQuery(new Term("field",
> terms[i]));
> >
> >         return new SpanNearQuery(termQueries, slop, inOrder);
> >     }
> >
> >
> >     @Override
> >     protected void tearDown() throws Exception {
> >         dir = null; // release directory
> >         super.tearDown();
> >     }
> >
> >
> >
> > }
> >
> > On 5/6/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >
> > > Moti,
> > >
> > > I tried your test and it fails in the way you describe, however, I
> don't
> > > think
> > > the test shows a bug.
> > >
> > > Below is the javadoc comment for the package private class
> > > NearSpansOrdered.
> > > Would that be sufficient documentation for the ordered case?
> > >
> > > /** A Spans that is formed from the ordered subspans of a
> SpanNearQuery
> > > * where the subspans do not overlap and have a maximum slop between
> them.
> > > * <p>
> > > * The formed spans only contains minimum slop matches.<br>
> > > * The matching slop is computed from the distance(s) between
> > > * the non overlapping matching Spans.<br>
> > > * Successive matches are always formed from the successive Spans
> > > * of the SpanNearQuery.
> > > * <p>
> > > * The formed spans may contain overlaps when the slop is at least 1.
> > > * For example, when querying using
> > > * <pre>t1 t2 t3</pre>
> > > * with slop at least 1, the fragment:
> > > * <pre>t1 t2 t1 t3 t2 t3</pre>
> > > * matches twice:
> > > * <pre>t1 t2 .. t3      </pre>
> > > * <pre>      t1 .. t2 t3</pre>
> > > */
> > >
> > > Unfortunately for the unordered case in NearSpansUnordered.java there
> is
> > > no
> > > class comment available in the code.
> > >
> > > You can take a look at the existing span tests here:
> > >
> > >
>
> http://svn.apache.org/viewvc/lucene/java/trunk/src/test/org/apache/lucene/search/spans
> > >
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > >
> > > On Sunday 06 May 2007 16:11, Moti Nisenson wrote:
> > > > Looking over the implementation of SpanNearQuery I came upon what
> looked
> > > > like a bug. Below is a test which fails due to it. SpanNearQuery
> doesn't
> > > > return all matching spans; once it's found a span it always
> increments
> > > the
> > > > span of the clause appearing first in that span (ie. in the example
> > > below
> > > > the two spans should be "one two" and "one two two" where the second
> has
> > > a
> > > > slop of 1 - unfortunately the span of "one" gets incremented after
> "one
> > > two"
> > > > is found and so no additional spans get returned). Both in-order and
> > > > out-of-order SpanNearQueries fail this test.
> > > >
> > > > I  think this is an undocumented feature and that the assumption is
> that
> > > if
> > > > someone searches for "one" near "two"  they're interested in the
> "one
> > > two"
> > > > result and not necessarily the "one two two" result. However,
> > > > SpanNearQueries can be combined and by not returning all matching
> spans
> > > this
> > > > can result in problems. For example were we to intersect (ie.
> > > SpanNearQuery
> > > > with 0 slop) between the results of different SpanNearQueries, it is
> > > > possible that the shortest possible span won't intersect, while a
> longer
> > > > span (with legal slop) would.
> > > >
> > > > In my mind this is a bug (at least until there is some
> documentation),
> > > and I
> > > > would expect there to be an option (either a boolean parameter or a
> > > > different class) which would indeed return all spans which satisfy
> the
> > > slop
> > > > constraint.
> > > >
> > > > What I'd like to know is:
> > > >
> > > > 1) Is this a bug?
> > > > 2) Is there any known workaround for this issue (besides rolling my
> own,
> > > of
> > > > course)?
> > > > 3) Could this bug/feature lead to problems with document scoring?
> > > >
> > > > Thanks,
> > > >
> > > > Moti
> > > >
> > > >
> > > >
> > > > import java.io.StringReader;
> > > >
> > > > import junit.framework.TestCase;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > > import org.apache.lucene.document.Document;
> > > > import org.apache.lucene.document.Field ;
> > > > import org.apache.lucene.index.IndexReader;
> > > > import org.apache.lucene.index.IndexWriter;
> > > > import org.apache.lucene.index.Term;
> > > > import org.apache.lucene.search.spans.SpanNearQuery;
> > > > import org.apache.lucene.search.spans.SpanQuery ;
> > > > import org.apache.lucene.search.spans.SpanTermQuery;
> > > > import org.apache.lucene.search.spans.Spans;
> > > > import org.apache.lucene.store.RAMDirectory;
> > > >
> > > > public class SpanNearQueryTest extends TestCase {
> > > >
> > > >     private RAMDirectory dir;
> > > >
> > > >     @Override
> > > >     protected void setUp() throws Exception {
> > > >         super.setUp();
> > > >         dir = new RAMDirectory();
> > > >         Document doc = new Document();
> > > >         doc.add(new Field("field", new StringReader("one two
> two")));
> > > >         IndexWriter writer = new IndexWriter(dir, new
> > > StandardAnalyzer());
> > > >         writer.addDocument(doc);
> > > >         writer.close();
> > > >     }
> > > >
> > > >     public void testNearQueryInOrder() throws Exception {
> > > >         checkNearQuery(true);
> > > >     }
> > > >
> > > >     public void testNearQueryNotInOrder() throws Exception {
> > > >         checkNearQuery(false);
> > > >     }
> > > >
> > > >     private void checkNearQuery(boolean inOrder) throws Exception {
> > > >         SpanNearQuery query = new SpanNearQuery(new SpanQuery[]
> > > >                     {new SpanTermQuery(new Term("field", "one")),
> > > >                     new SpanTermQuery(new Term("field", "two"))}, 5,
> > > > inOrder);
> > > >
> > > >         IndexReader reader = IndexReader.open(dir);
> > > >         Spans spans = query.getSpans(reader);
> > > >
> > > >         int numSpans = 0;
> > > >         while (spans.next())
> > > >             numSpans++;
> > > >
> > > >         reader.close();
> > > >
> > > >         assertEquals(2, numSpans);
> > > >     }
> > > >
> > > >
> > > >     @Override
> > > >     protected void tearDown() throws Exception {
> > > >         dir = null; // release directory
> > > >         super.tearDown();
> > > >     }
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31323_31432277.1178564863247--

From java-user-return-27923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 22:11:46 2007
Return-Path: <java-user-return-27923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42309 invoked from network); 7 May 2007 22:11:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 22:11:45 -0000
Received: (qmail 90955 invoked by uid 500); 7 May 2007 22:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90732 invoked by uid 500); 7 May 2007 22:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90717 invoked by uid 99); 7 May 2007 22:11:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:11:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:11:37 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l47MBFgd287868
	for <java-user@lucene.apache.org>; Mon, 7 May 2007 22:11:15 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l47MBFVa585838
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 00:11:15 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l47MBEGA015271
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 00:11:14 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l47MBEhE015268
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 00:11:14 +0200
In-Reply-To: <f81fa4180705061641v7d05e775xd284f97badcb0529@mail.gmail.com>
Subject: Re: Questions regarding Lucene query syntax
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF8E3409C3.3B5F2A2B-ON882572D4.0077F06B-882572D4.00799E5B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 7 May 2007 15:08:23 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 08/05/2007 01:11:13
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> Is there a way to require a portion of a query only if there are values
for
> > > that field in the document?
> > > e.g. If I know that I only want to match movies made between 1973 and
> > > 1975,
> > > I would like to be able to say in my query that if the document has a
> > > year,
> > > it must be in that range, but if the document has no year at all,
don't
> > > fail
> > > the document for that reason alone.
> > > This is also important in the director name part.  If a document has
a
> > > director given, and it doesn't match what I'm searching for, that
should
> > > be
> > > a fail, but if the document has no director field, I don't want to
fail
> > > the
> > > document for that reason alone.
> >
> >
> > You'll have to include a dummy value I think. Remember that you're
> > searching for stuff with Lucene, so saying "match even if there's
> > nothing there" is, er, ABnormal..
> >
> > I'd think about putting a dummy value in those fields you want to
handle
> > this way. For instance, add "matchall" to documents with no date. Then
> > you'd need to add an 'or date:matchall' clause to all the dates you
query
> > on. Make sure it's a value that behaves reasonably when you want to
> > include all dates, or all dates before ####, or all dates after ####.
> >
>
> Hrm.  I'll keep this idea on the cheat sheet for now. It turns out that

Just to note that in case you do want this, then while
it would be more efficient to index a matchall word (as
Erik suggested), in case it was too late for this (index
already exists, etc.), it is still possible to phrase a
query that applies a range filter only upon docs containing
the range filter field.

With a query parser set to allowLeadingWildcard, this should do:

( +item -price:* ) ( +item +price:[0100 TO 0150] )

or, to avoid too-many-cluases risk:

( +item -price:[MIN TO MAX]) ( +item +price:[0100 TO 0150] )

where MIN and MAX cover (at least) the full range of the ranged field.

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 22:31:07 2007
Return-Path: <java-user-return-27924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47525 invoked from network); 7 May 2007 22:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 22:31:05 -0000
Received: (qmail 15048 invoked by uid 500); 7 May 2007 22:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15018 invoked by uid 500); 7 May 2007 22:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15007 invoked by uid 99); 7 May 2007 22:31:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:31:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:30:58 -0700
Received: by an-out-0708.google.com with SMTP id b8so372436ana
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 15:30:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mV6+VoViQegUNB4Uv8PWxsd0e0BsuIxjaqqTblMSrYLL0ns1TQhOespb1sXioVZPZqjAA3xq56PIOxd25SD42nyanSUWDoviHM6UC3jhe5PfBBScDJ5WswetQsHgH/ysqd5aV65mRrvMH+UDTimMY3KzXNVG5leX0VgSC7AlJqs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HXXaHoC1XTKF1pT1dCAgtvfkS6RJblPZDwSUT+ujpvDFE8S7/GX2dkMP01vgRZepuGEjTNo6/1AEZ3iRUFsCXjIOkoM1No64mC9oSaQSS35FhsRYV7QvcM6eaaoPOTdUaw9JEdfn/wwd/uMQPjh6VTc6vsNGDlcOylRpNRheCEM=
Received: by 10.100.212.15 with SMTP id k15mr5214729ang.1178577036670;
        Mon, 07 May 2007 15:30:36 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id c37sm14500681ana.2007.05.07.15.30.35;
        Mon, 07 May 2007 15:30:36 -0700 (PDT)
Message-ID: <463FA840.1070704@gmail.com>
Date: Mon, 07 May 2007 18:29:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Porter 2 Stemming algorithim in java
References: <a70e4c2b0705070231j3fb8a10blafb518b80717a235@mail.gmail.com>
In-Reply-To: <a70e4c2b0705070231j3fb8a10blafb518b80717a235@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://snowball.tartarus.org/

That is the Snowball page. There exists a Snowball version of the 
Porter2 Stemming algorithm. If you hunt around the download page you 
will find it.

- Mark

sandeep chawla wrote:
> Hi All.
>
> is there a implemention of Porter2 Stemming algorithim in java..
>
> I dont want to make a snowballfilter based on snowball  English Stemmer.
>
> Thanks
> Sandeep
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 07 22:35:47 2007
Return-Path: <java-user-return-27925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48679 invoked from network); 7 May 2007 22:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 May 2007 22:35:45 -0000
Received: (qmail 23102 invoked by uid 500); 7 May 2007 22:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23072 invoked by uid 500); 7 May 2007 22:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23061 invoked by uid 99); 7 May 2007 22:35:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:35:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 15:35:36 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1833021wxd
        for <java-user@lucene.apache.org>; Mon, 07 May 2007 15:35:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=i98ajjaY/4sowtR/ya/dhoIHnYkbHqmvEysytg+xVOU0WwXqoPt7bDPkuBumc2O8hRqtEf/9gwm0Ugb38KUiOCoL0gqJyTG/d/1uejjaBckTo9wY7QgwX5CdOOQUxYusiyL8sUM/lXWsBsHu+ngNqK0A/kHrjIHaQuFmMyO9UZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DTyHRWGVeZ59QnaRvVtF5NbmEERPwaRX82eRV/x2n4gv+2O/3qJKbW56pQNAYYxTq8sQwrkNW9I+rqSnXTM2hr/y2cWO+Jl/PdKyFNG2dZFLggj9ewDhBHqDBOGrHoYfbErMsQkhlXempryj/gOz8wPM5+bf6LOkGMjf5S4nug0=
Received: by 10.70.103.12 with SMTP id a12mr12809662wxc.1178577314128;
        Mon, 07 May 2007 15:35:14 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id q30sm9011935wrq.2007.05.07.15.35.11;
        Mon, 07 May 2007 15:35:12 -0700 (PDT)
Message-ID: <463FA954.1020109@gmail.com>
Date: Mon, 07 May 2007 18:33:56 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction
References: <92631.36792.qm@web33006.mail.mud.yahoo.com>
In-Reply-To: <92631.36792.qm@web33006.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The only commercial options that I have seen do not have a web presence 
(that I know of or can find) and I don't recall the company names (only 
peripherally involved).

Here is a web page where a guy does a nice writeup on a few options: 
http://dsanalytics.com/dsblog/the-start-of-the-art-in-keyphrase-extraction_99

- Mark

av_work@yahoo.com wrote:
> Hi Mark,
>
> Do you know of a good paid product that does this?
>
> Thanks,
> Arsen
>
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, May 2, 2007 7:52:36 AM
> Subject: Re: Keyphrase Extraction
>
>
> >From what I know you generally have to pay if you want something that 
> does this really well. Or check out http://www.nzdl.org/Kea/
> Unfortunately, the license is GPL. Really too bad; now that it is all 
> Java, it would make a great combo with Lucene.
>
> - Mark
>
> mark harwood wrote:
>   
>> I believe the code Otis is referring to is here: http://issues.apache.org/jira/browse/LUCENE-474
>>
>> This is index-level analysis but could be adapted to work for just a single document.
>> The implementation is optimised for speed rather than being a thorough examination of phrase significance. 
>>
>> Cheers
>> Mark
>>
>> ----- Original Message ----
>> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, 30 April, 2007 4:11:36 AM
>> Subject: Re: Keyphrase Extraction
>>
>> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once contributed something that does this in JIRA.  If you are interested in a commercial solution, I can recommend LingPipe.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Lucene Consulting - http://lucene-consulting.com/
>>
>>
>> ----- Original Message ----
>> From: "av_work@yahoo.com" <av_work@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, April 29, 2007 5:24:17 PM
>> Subject: Keyphrase Extraction
>>
>> Hi,
>>
>> I tried using MoreLikeThis contrib feature to extract "interesting terms" from a document. This works very well - but only for SINGLE words.
>>
>> I am looking for a way to extra "keyPHRASES" from a document. Is there an easy way to achieve this using Lucene index?
>>
>> Thanks in advance!
>> Av
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around 
>> http://mail.yahoo.com 
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>>       ___________________________________________________________
>> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
>> now.
>> http://uk.answers.yahoo.com/ 
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
> ____________________________________________________________________________________
> Don't pick lemons.
> See all the new 2007 cars at Yahoo! Autos.
> http://autos.yahoo.com/new_cars.html 
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 00:54:58 2007
Return-Path: <java-user-return-27926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79810 invoked from network); 8 May 2007 00:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 00:54:57 -0000
Received: (qmail 93519 invoked by uid 500); 8 May 2007 00:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93417 invoked by uid 500); 8 May 2007 00:54:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93402 invoked by uid 99); 8 May 2007 00:54:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 17:54:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 May 2007 17:54:49 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l480sRlV195898
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 00:54:27 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l480sR9s3846358
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 02:54:27 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l480sRXX011343
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 02:54:27 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l480sRd2011340
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 02:54:27 +0200
In-Reply-To: <10361747.post@talk.nabble.com>
Subject: Re: Multi language indexing
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 7 May 2007 17:51:37 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 08/05/2007 03:54:26
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

bhecht <bhecht@ams-sys.com> wrote on 07/05/2007 10:26:27:

> I have implemented my own analyzer for each country.
> So as I see it, when I index these records, I want to
> provide lucene, with a specific analyzer per record
> i'm indexing.
>
> When a user performs a query in my JSF form, I will
> use the country value he entered, to get the needed
> analyzer, and query lucene with the users query and
> the needed analyzer.
>
> The user may also choose not to enter a country value
> to his search, and here comes in the solution you gave
> me, to duplicate each field, and index it using a non
> stemming analyzer (A standard analyzer without stop
> words defined).
>
> Am I going the right direction?

Sounds ok to me except that there seems to be a mix
between stemming and stop-words elimination. Perhaps
just a typo in the above text, but anyhow while the
StandardAnalyzer constructor takes a stopwords list
parameter and would eliminate these words (e.g. "is"),
it would not do stemming (e.g "knives" --> "knive").
(Though both a stop-list and a stemming algorithm
are language specific.)

So, rephrasing the discussion so far, assuming:

1) a single field "F" (for simplicity),
2) (doc) language always known at indexing
3) (user) language sometimes known at search

I think a resonable solution might be:

1) use PerFieldanalyzerWrapper
2) index each doc to F and to F_LAN
3) F would be language neutral - no
   stemming and no stop words elimination
4) F_LAN (e.g. F_en) would be language specific,
   so a specific language stopwords list would be
   used, and a specific stemmer would be used.
5) Search would go to F_LAN when the language is
   known and to F when the language is not known,
   using language specific analysis as while indexing.
6) Note Karl's mentioning having both F and F_LAN at
   search, assigning higher boost to F_LAN. Useful when
   there is some uncertainty on the "marked language".

There can be other considerations - for instance (1) the
certainty of language id; (2) fallback to English when the
language is unknown...

Note that SnowballFilter can be used for applying
stemming on the output of StandardAnalyzer.

Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 09:10:57 2007
Return-Path: <java-user-return-27927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18994 invoked from network); 8 May 2007 09:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 09:10:56 -0000
Received: (qmail 17902 invoked by uid 500); 8 May 2007 09:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17870 invoked by uid 500); 8 May 2007 09:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17859 invoked by uid 99); 8 May 2007 09:10:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 02:10:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 02:10:46 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HlLiE-0001ru-9C
	for java-user@lucene.apache.org; Tue, 08 May 2007 02:10:26 -0700
Message-ID: <10372286.post@talk.nabble.com>
Date: Tue, 8 May 2007 02:10:26 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: Multi language indexing
In-Reply-To: <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10353549.post@talk.nabble.com> <9D45BFED-7995-4545-A9F6-8B840224C352@gmail.com> <10354930.post@talk.nabble.com> <7F71E4E6-591E-4D78-8629-42F5113E27B0@gmail.com> <10355770.post@talk.nabble.com> <0F6C3EC9-2A07-4B56-8685-8E442C31C231@gmail.com> <10357611.post@talk.nabble.com> <9FE50B73-AB7B-4089-BFE9-7ED670D2F77D@gmail.com> <10361747.post@talk.nabble.com> <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Doron,

Thank you very much for your time and for the detailed explanations. This is
exactly what I meant and I am happy to see I understood correctly.

I am now using the Snowball which seems to work very good.

Thanks again and good day,

Barak Hecht.



-- 
View this message in context: http://www.nabble.com/Multi-language-indexing-tf3702402.html#a10372286
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 09:30:31 2007
Return-Path: <java-user-return-27928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25618 invoked from network); 8 May 2007 09:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 09:30:30 -0000
Received: (qmail 60051 invoked by uid 500); 8 May 2007 09:30:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59759 invoked by uid 500); 8 May 2007 09:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59748 invoked by uid 99); 8 May 2007 09:30:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 02:30:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hans-christian.stadler@psi.ch designates 129.129.191.54 as permitted sender)
Received: from [129.129.191.54] (HELO MAILSEND02.psi.ch) (129.129.191.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 02:30:22 -0700
Received: from pc5443.psi.ch ([129.129.195.206]) by MAILSEND02.psi.ch with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 8 May 2007 11:30:00 +0200
From: Stadler Hans-Christian <hans-christian.stadler@psi.ch>
Organization: PSI
To: java-user@lucene.apache.org
Subject: Is it necessary to optimize?
Date: Tue, 8 May 2007 11:30:00 +0200
User-Agent: KMail/1.9.1
References: <10353549.post@talk.nabble.com> <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com> <10372286.post@talk.nabble.com>
In-Reply-To: <10372286.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705081130.00168.hans-christian.stadler@psi.ch>
X-OriginalArrivalTime: 08 May 2007 09:30:00.0604 (UTC) FILETIME=[734C45C0:01C79153]
X-Virus-Checked: Checked by ClamAV on apache.org

If mergeFactor is set to 2 and no optimize() is ever done on the index,
what is the impact on

1) the number opened files during indexing
2) the number of opened files during searching
2) the search speed
3) the indexing speed

??

HC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 10:15:11 2007
Return-Path: <java-user-return-27929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38910 invoked from network); 8 May 2007 10:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 10:15:10 -0000
Received: (qmail 32074 invoked by uid 500); 8 May 2007 10:15:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31980 invoked by uid 500); 8 May 2007 10:15:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31945 invoked by uid 99); 8 May 2007 10:15:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 03:15:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 03:14:55 -0700
Received: from melkor.grm.hia.no [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AD7C0A34; Tue, 08 May 2007 12:14:20 +0200
Date: Tue, 08 May 2007 12:13:46 +0200
To: java-user@lucene.apache.org
Subject: Re: Is it necessary to optimize?
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <10353549.post@talk.nabble.com> <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com> <10372286.post@talk.nabble.com> <200705081130.00168.hans-christian.stadler@psi.ch>
Content-Transfer-Encoding: 7bit
Message-ID: <op.trz6o8tqoftp72@melkor.grm.hia.no>
In-Reply-To: <200705081130.00168.hans-christian.stadler@psi.ch>
User-Agent: Opera Mail/9.20 (Win32)
X-Antivirus: avast! (VPS 000738-4, 05/07/2007), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: D4d7c06d700008a4e.smd
X-Declude-RefID: 
X-Virus-Checked: Checked by ClamAV on apache.org

I would say, that over time, the number of files will grow. and continue  
growing if you never perform
an optimize(). After some very adviceful mails from Erick i settled on a  
mergeFactor of 30, and since I do the indexing in large batches, I perform  
an optimize() only in the end of the indexing-run. This works really great  
and reduced the indexing time greatly!

as to your points, the number of opened files is closely related to the  
merge factor, since;
"With the default value of 10, Lucene will store 10 documents in memory  
before writing them to a single segment on the disk. The mergeFactor value  
of 10 also means that once the number of segments on the disk has reached  
the power of 10, Lucene will merge these segments into a single segment."

It is also a fact that higher mergeFactor allows less file-io, hence  
faster indexing.
"MergeFactor - Determines the minimal number of documents required before  
the buffered in-memory documents are merged and a new Segment is created.  
Since Documents are merged in a RAMDirectory, large value gives faster  
indexing. "

Backside is when using a too large mergeFactor you may experience the "Too  
many open files" exception.
"For instance, with a default mergeFactor of 10 and an index of 1 million  
documents, Lucene will require 110 open files on an unoptimized index.  
When IndexWrite's optimize() method is called, all segments are merged  
into a single segment, which minimizes the number of open files that  
Lucene needs."

"using a higher value for mergeFactor will cause Lucene to use more RAM,  
but will let Lucene write data to disk less frequently, which will speed  
up the indexing process. A smaller mergeFactor will use less memory and  
will cause the index to be updated more frequently, which will make it  
more up-to-date, but will also slow down the indexing process. Similarly,  
a larger maxMergeDocs is better suited for batch indexing, and a smaller  
maxMergeDocs is better for more interactive indexing."

- Aleksander

On Tue, 08 May 2007 11:30:00 +0200, Stadler Hans-Christian  
<hans-christian.stadler@psi.ch> wrote:

> If mergeFactor is set to 2 and no optimize() is ever done on the index,
> what is the impact on
>
> 1) the number opened files during indexing
> 2) the number of opened files during searching
> 2) the search speed
> 3) the indexing speed
>
> ??
>
> HC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 11:03:13 2007
Return-Path: <java-user-return-27930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53243 invoked from network); 8 May 2007 11:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 11:03:12 -0000
Received: (qmail 17520 invoked by uid 500); 8 May 2007 11:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17481 invoked by uid 500); 8 May 2007 11:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17456 invoked by uid 99); 8 May 2007 11:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:03:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:03:03 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <514751(2)>; Tue, 8 May 2007 04:02:26 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Tue, 8 May 2007 04:02:21 PDT
To: java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction 
In-reply-to: <463DCB02.5030305@cs.put.poznan.pl> 
References: <363661.83409.qm@web26009.mail.ukl.yahoo.com> <46388994.1000603@gmail.com> <463DCB02.5030305@cs.put.poznan.pl>
Comments: In-reply-to Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
    message dated "Sun, 06 May 2007 05:33:06 -0700."
Date: Tue, 8 May 2007 04:02:14 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07May8.040221pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dawid Weiss wrote:
> You could also try splitting the document into paragraphs and use Carrot2's 
> Lingo algorithm (www.carrot2.org) on a paragraph-level to extract clusters. 
> Labelling routine in Lingo should extract 'key' phrases; this analysis is 
> heavily frequency-based, but... you know, you may want to try it.

Just to make sure I'm following...

So you're suggesting splitting the document into paragraphs, then
treating each paragraph as if it were a Carrot2 search result,
performing the clustering, then looking at the label Lingo chooses for
each cluster, and treating that label as the "key phrase"?

Would DirectDocumentFeedExample be a good starting point?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 11:15:49 2007
Return-Path: <java-user-return-27931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56233 invoked from network); 8 May 2007 11:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 11:15:48 -0000
Received: (qmail 32333 invoked by uid 500); 8 May 2007 11:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32307 invoked by uid 500); 8 May 2007 11:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32296 invoked by uid 99); 8 May 2007 11:15:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:15:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:15:40 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1634722mue
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 04:15:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tA65MAPCIafBxJuFRl1WFqmVNj0PJshY1tE1R2LaNunT4nSoiZPRZANSmb7OnMFc//pmklqlU7d8WG1og/qCZCZ/DLU4Nyuc7lgC8tHKmGKI8tieAJP9OMXDZRIaDxK/5QRqJipmXr81Cokzf2F97vi5SafgaAucZvtViDJDgEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GIiD0DxFcV4yFXpVZ3BfNYPNFpYw1DY8w+VbgI0u34d9bnlCTBFb4wyjMPCp+eA8AfxQxROCZIXZ6rr3IEGrpNa50lqpzKBaDWWjyhfBQzwhcLDPX1p6f7jkuUPG3loil+B7yx2VzAt4cGvwgBoUzwEJSfRQVYIjMuUVUbl5QkY=
Received: by 10.82.184.2 with SMTP id h2mr11422028buf.1178622918802;
        Tue, 08 May 2007 04:15:18 -0700 (PDT)
Received: by 10.82.118.10 with HTTP; Tue, 8 May 2007 04:15:18 -0700 (PDT)
Message-ID: <f81fa4180705080415v36d789f0vc44a179805ebb009@mail.gmail.com>
Date: Tue, 8 May 2007 07:15:18 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Questions regarding Lucene query syntax
In-Reply-To: <OF8E3409C3.3B5F2A2B-ON882572D4.0077F06B-882572D4.00799E5B@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180705061641v7d05e775xd284f97badcb0529@mail.gmail.com>
	 <OF8E3409C3.3B5F2A2B-ON882572D4.0077F06B-882572D4.00799E5B@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/7/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> With a query parser set to allowLeadingWildcard, this should do:
> ( +item -price:* ) ( +item +price:[0100 TO 0150] )
> or, to avoid too-many-cluases risk:
> ( +item -price:[MIN TO MAX]) ( +item +price:[0100 TO 0150] )
> where MIN and MAX cover (at least) the full range of the ranged field.

Nice! This tip will be a handy one to have. Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 11:18:14 2007
Return-Path: <java-user-return-27932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56746 invoked from network); 8 May 2007 11:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 11:18:14 -0000
Received: (qmail 37753 invoked by uid 500); 8 May 2007 11:18:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37719 invoked by uid 500); 8 May 2007 11:18:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37707 invoked by uid 99); 8 May 2007 11:18:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:18:14 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [147.96.1.101] (HELO brett.sim.ucm.es) (147.96.1.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:18:05 -0700
Received: from brett.sim.ucm.es (brett.sim.ucm.es [127.0.0.1])
	by localhost.ucm.es (Postfix) with ESMTP id 9B77139E42B
	for <java-user@lucene.apache.org>; Tue,  8 May 2007 13:16:00 +0200 (CEST)
Received: from ODISEO.sim.ucm.es (unknown [10.150.1.32])by brett.sim.ucm.es 
	(Postfix) with ESMTP id 8455739E422for <java-user@lucene.apache.org>; Tue, 
	 8 May 2007 13:16:00 +0200 (CEST)
Received: from ucm.es ([10.147.128.157])by ODISEO.sim.ucm.es (Sun Java 
	System Messaging Server 6.2-6.01 (built Apr  32006)) with ESMTP id 
	<0JHP00AE5ZDJVJ60@ODISEO.sim.ucm.es> forjava-user@lucene.apache.org; Tue, 
	08 May 2007 13:17:43 +0200 (CEST)
Received: from [10.150.1.32] (Forwarded-For: [10.150.1.32])by 
	menelao.adm.ucm.es (mshttpd); Tue, 08 May 2007 13:17:43 +0200
Date: Tue, 08 May 2007 13:17:43 +0200
From: =?iso-8859-1?B?Ikpvc+kgUmFt824gUOlyZXogQWf8ZXJhIg==?=<jose.aguera@fdi.ucm.es>
Subject: Keyphrase Extraction
To: java-user@lucene.apache.org
Message-id: <f757ccc45bd.46407877@ucm.es>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.2-6.01 (built Apr  3 2006)
Content-type: multipart/alternative;
	boundary=--d65a029e3c0e5113177
Content-language: es
X-Accept-Language: es
Priority: normal
X-imss-version: 2.046
X-imss-result: Passed
X-imss-scanInfo: M:B L:E SM:2
X-imss-tmaseResult: TT:1 TS:7.2868 TC:1F TRN:20 TV:3.6.1039(15162.003)
X-imss-scores: Clean:0.34966 C:2 M:3 S:5 R:5
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked by ClamAV on apache.org

----d65a029e3c0e5113177
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

here you have a very good tool for Keyphrase Extraction=2E It is GNU and=

easy to integrate in Lucene=2E

http=3A//www=2Epaynter=2Einfo/academia/Kea=2Ephp

best

jose

Jos=E9 Ram=F3n P=E9rez Ag=FCera

Dept=2E de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf=2E 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

----d65a029e3c0e5113177--

From java-user-return-27933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 11:25:25 2007
Return-Path: <java-user-return-27933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58181 invoked from network); 8 May 2007 11:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 11:25:25 -0000
Received: (qmail 49586 invoked by uid 500); 8 May 2007 11:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49550 invoked by uid 500); 8 May 2007 11:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49539 invoked by uid 99); 8 May 2007 11:25:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:25:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:25:16 -0700
Received: (qmail 12890 invoked from network); 8 May 2007 16:49:12 +0530
Received: from unknown (HELO vishalslaptop) (203.197.35.2)
  by mailserver with SMTP; 8 May 2007 16:49:12 +0530
Reply-To: <vishals@rediff.co.in>
From: "Vishal Shah" <vishals@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: Keyphrase Extraction
Date: Tue, 8 May 2007 16:56:29 +0530
Organization: Rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AceQ91KSzMakzyu7TIejnq7qrA/PbwAbBVMg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
In-Reply-To: <463FA954.1020109@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070508112517.B6D8010FB011@herse.apache.org>

Hi Arsen,

  I've seen another commercial one from a company called Connexor
(www.connexor.com) . It has a decent part-of-speech tagger that could be
used in keyphrase extraction with some heuristics on top of it. 

-vishal.

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Tuesday, May 08, 2007 4:04 AM
To: java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction

The only commercial options that I have seen do not have a web presence 
(that I know of or can find) and I don't recall the company names (only 
peripherally involved).

Here is a web page where a guy does a nice writeup on a few options: 
http://dsanalytics.com/dsblog/the-start-of-the-art-in-keyphrase-extraction_9
9

- Mark

av_work@yahoo.com wrote:
> Hi Mark,
>
> Do you know of a good paid product that does this?
>
> Thanks,
> Arsen
>
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, May 2, 2007 7:52:36 AM
> Subject: Re: Keyphrase Extraction
>
>
> >From what I know you generally have to pay if you want something that 
> does this really well. Or check out http://www.nzdl.org/Kea/
> Unfortunately, the license is GPL. Really too bad; now that it is all 
> Java, it would make a great combo with Lucene.
>
> - Mark
>
> mark harwood wrote:
>   
>> I believe the code Otis is referring to is here:
http://issues.apache.org/jira/browse/LUCENE-474
>>
>> This is index-level analysis but could be adapted to work for just a
single document.
>> The implementation is optimised for speed rather than being a thorough
examination of phrase significance. 
>>
>> Cheers
>> Mark
>>
>> ----- Original Message ----
>> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, 30 April, 2007 4:11:36 AM
>> Subject: Re: Keyphrase Extraction
>>
>> Av, look at Lucene's JIRA and search for Mark Harwood.  I believe he once
contributed something that does this in JIRA.  If you are interested in a
commercial solution, I can recommend LingPipe.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Lucene Consulting - http://lucene-consulting.com/
>>
>>
>> ----- Original Message ----
>> From: "av_work@yahoo.com" <av_work@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, April 29, 2007 5:24:17 PM
>> Subject: Keyphrase Extraction
>>
>> Hi,
>>
>> I tried using MoreLikeThis contrib feature to extract "interesting terms"
from a document. This works very well - but only for SINGLE words.
>>
>> I am looking for a way to extra "keyPHRASES" from a document. Is there an
easy way to achieve this using Lucene index?
>>
>> Thanks in advance!
>> Av
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around 
>> http://mail.yahoo.com 
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>
>>       ___________________________________________________________
>> Yahoo! Answers - Got a question? Someone out there knows the answer. Try
it
>> now.
>> http://uk.answers.yahoo.com/ 
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>
____________________________________________________________________________
________
> Don't pick lemons.
> See all the new 2007 cars at Yahoo! Autos.
> http://autos.yahoo.com/new_cars.html 
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 11:50:15 2007
Return-Path: <java-user-return-27934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64949 invoked from network); 8 May 2007 11:50:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 11:50:09 -0000
Received: (qmail 84699 invoked by uid 500); 8 May 2007 11:49:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84645 invoked by uid 500); 8 May 2007 11:49:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84614 invoked by uid 99); 8 May 2007 11:49:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:49:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 04:49:50 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 90855131A31
	for <java-user@lucene.apache.org>; Tue,  8 May 2007 04:49:29 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200705081130.00168.hans-christian.stadler@psi.ch>
References: <10353549.post@talk.nabble.com> <OF21D69216.93FC8A1B-ON882572D5.00018272-882572D5.0004BA26@il.ibm.com> <10372286.post@talk.nabble.com> <200705081130.00168.hans-christian.stadler@psi.ch>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <10BAA112-3045-455E-A41A-0AEB34D8C40C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Is it necessary to optimize?
Date: Tue, 8 May 2007 07:49:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The contrib/benchmark addition can help you characterize many of  
these scenarios, especially if you write a DocMaker and QueryMaker  
for your collection.

On May 8, 2007, at 5:30 AM, Stadler Hans-Christian wrote:

> If mergeFactor is set to 2 and no optimize() is ever done on the  
> index,
> what is the impact on
>
> 1) the number opened files during indexing
> 2) the number of opened files during searching
> 2) the search speed
> 3) the indexing speed
>
> ??
>
> HC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 12:36:48 2007
Return-Path: <java-user-return-27935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81584 invoked from network); 8 May 2007 12:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 12:36:47 -0000
Received: (qmail 67870 invoked by uid 500); 8 May 2007 12:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67828 invoked by uid 500); 8 May 2007 12:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 95659 invoked by uid 99); 8 May 2007 11:57:50 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sccarrera@uvigo.es designates 193.146.32.71 as permitted sender)
Message-ID: <1178625439.4640659fc45d7@correoweb.uvigo.es>
Date: Tue, 08 May 2007 13:57:19 +0200
From: sccarrera@uvigo.es
To: java-user@lucene.apache.org
Subject: Doubt in FuzzyQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
X-Originating-IP: 193.147.87.33
X-Mail-Scanned: Criba + Clamd smtp.uvigo.es
X-Virus-Checked: Checked by ClamAV on apache.org



Last week I send a message with a doubt in a FuzzyQuery. I am working with
Lucene 2.1.0.

I would like to recover files including the set of strings

"socit amricaine" and "socits amricaines"

from a fuzzy query relating the string "socit amricain"

I create a method "getDocuments" and I call it with the query introducing by the
user. For example, in this case:

getDocuments("\""+query+"\"~");

the variable "query" is equal to "socit amricain".

Bellow you can see the code of the method:

private void getDocuments(String queryString)
{
	Directory dir=FSDirectory.getDirectory(pathIndexador);
	IndexSearcher searcher=new IndexSearcher(dir);
	
	File stopWordsFile=new File(fichStopW);
	Analyzer analyzer=new StopAnalyzer(stopWordsFile);
	
	QueryParser queryParse=new QueryParser("contenido", analyzer);
	queryParse.setFuzzyMinSim(0.5f);
	Query query=queryParse.parse(queryString);
	
	PhraseQuery pq=(PhraseQuery)query;
	Term [] term=pq.getTerms();
	
	SpanTermQuery[] clausulas=new SpanTermQuery[term.length];
	for(int i=0;i<clausulas.length;i++)
	{
		clausulas[i]=new SpanTermQuery(term[i]);
	}
	SpanNearQuery queryspanNormal= new SpanNearQuery(clausulas,2,true);
	Hits hitsNormal=searcher.search(queryspanNormal,Sort.RELEVANCE);
}

Can you help me?

Regards.

--oOo-----------------------------------------------------------------oOo--

Servicio de acceso  correo electrnico va web da Universidade de Vigo
Servicio de acceso al correo electrnico va web de la Universidad de Vigo

Servicios Informticos [ http://si.uvigo.es ]
Universidade de Vigo [ http://www.uvigo.es ]

URL: https://correoweb.uvigo.es


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 12:36:57 2007
Return-Path: <java-user-return-27936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81659 invoked from network); 8 May 2007 12:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 12:36:56 -0000
Received: (qmail 67974 invoked by uid 500); 8 May 2007 12:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67935 invoked by uid 500); 8 May 2007 12:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31660 invoked by uid 99); 8 May 2007 11:15:14 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jose.aguera@gmail.com designates 209.85.132.241 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UDTzFGilATEjHFB4tQyBcaJZxIehhJK6+gVoqcaVab+tH9iJt1mqGyTQyOVR0gkODzGAEribVpDxs1V3CDl8mQvMThK7ASEknb7jniD8nNqOuVZPnnsMAnohQJvyT5bLrdAzTkUGllUJ/K/AQ2kn2sbInGF5whAOMgAajGboGyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HGSyFQOTbL09ASM0fcL/W73UvIj0HKEDb6At50XWnYtFXWuU7PyDd+9SB53Gy1IkAsLpEkEVV/V7lEAVU9iUDpgo7BtTS48gVDnBG8kpeENHkmEQqJSbjXSft8fhQ4kZszqhBInnfXDb2MVlOFBbY4NttWub8ThxZ8P7l1RSvq0=
Message-ID: <9ab5344d0705080414i5ebbe0d4k40afc84bb53b9c47@mail.gmail.com>
Date: Tue, 8 May 2007 13:14:45 +0200
From: "=?ISO-8859-1?Q?Jos=E9_Ram=F3n_P=E9rez_Ag=FCera?=" <jose.aguera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction
In-Reply-To: <07May8.040221pdt.57996@synergy1.parc.xerox.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <363661.83409.qm@web26009.mail.ukl.yahoo.com>
	 <46388994.1000603@gmail.com> <463DCB02.5030305@cs.put.poznan.pl>
	 <07May8.040221pdt.57996@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

here you have a very good tool for Keyphrase Extraction. It is GNU and
easy to integrate in Lucene.

http://www.paynter.info/academia/Kea.php

best

jose

On 5/8/07, Bill Janssen <janssen@parc.com> wrote:
> Dawid Weiss wrote:
> > You could also try splitting the document into paragraphs and use Carro=
t2's
> > Lingo algorithm (www.carrot2.org) on a paragraph-level to extract clust=
ers.
> > Labelling routine in Lingo should extract 'key' phrases; this analysis =
is
> > heavily frequency-based, but... you know, you may want to try it.
>
> Just to make sure I'm following...
>
> So you're suggesting splitting the document into paragraphs, then
> treating each paragraph as if it were a Carrot2 search result,
> performing the clustering, then looking at the label Lingo chooses for
> each cluster, and treating that label as the "key phrase"?
>
> Would DirectDocumentFeedExample be a good starting point?
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Jos=E9 Ram=F3n P=E9rez Ag=FCera

Dept. de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf. 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 13:20:42 2007
Return-Path: <java-user-return-27937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97408 invoked from network); 8 May 2007 13:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 13:20:40 -0000
Received: (qmail 49309 invoked by uid 500); 8 May 2007 13:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48226 invoked by uid 500); 8 May 2007 13:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48215 invoked by uid 99); 8 May 2007 13:20:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 06:20:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 06:20:30 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1HlPbm-0005yF-3X
	for java-user@lucene.apache.org; Tue, 08 May 2007 15:20:02 +0200
Received: from vip.schaubroeck.be ([193.75.212.66])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 15:20:02 +0200
Received: from ge0ffrey.spam by vip.schaubroeck.be with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 15:20:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Geoffrey De Smet <ge0ffrey.spam@gmail.com>
Subject:  Automatic analyzer resolving based on Locale
Date:  Tue, 08 May 2007 15:13:08 +0200
Lines: 16
Message-ID: <f1pt2m$2e1$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vip.schaubroeck.be
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I have a use case, in which I need to select the Analyzer based on a Locale.
For example:
"nl" => DutchAnalyzer
"nl_BE" => DutchAnalyzer
"fr" => FrenchAnalyzer
"foobar" => StandardAnalyzer (fallback)

I was wondering if lucene has any sort of "AutomaticAnalyzerResolver" 
class that could do this for me?
I 'll write it myself if it doesn't exist, but it might be very handy 
for the community to have this in Lucene's jar, as when new Analyzers 
are added, they could be hooked in automatically.

-- 
With kind regards,
Geoffrey De Smet


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 13:27:29 2007
Return-Path: <java-user-return-27938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5078 invoked from network); 8 May 2007 13:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 13:27:28 -0000
Received: (qmail 60468 invoked by uid 500); 8 May 2007 13:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60414 invoked by uid 500); 8 May 2007 13:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60371 invoked by uid 99); 8 May 2007 13:27:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 06:27:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 06:27:19 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1425601ika
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 06:26:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ji2cdKfma1Y69FHt8VuhoASYfDv9s4pZtFg29Wd0dKOHGgds/u/N8B4g833+lrfS5CcN3MUaeJO4pg3ZvOOjFDz+X2CCBQ4YCSww3awUGFkwTO+ZabTUJiGOXNytW609fj1H9Oseg3Zzj5WWkeZi7teAZ0r/Wa1MjpF79xa7NgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qdYUVnfPQNT+7Db7hyhSfZylJgCpFCmuD/2nm04M5gVMhUgYW4WI4O5DUO6UyQjLa3c8DrpVF9nYG9p2oP8LcXxROwmPEyxfY8y9d729NCRX/Eg0uzXBBZOuRpNSa+K8xwpeR3Wy9bAiPpux5+0ETtyVd9LkAJ8Q7j9wGqN/oIk=
Received: by 10.82.148.7 with SMTP id v7mr11752665bud.1178630817049;
        Tue, 08 May 2007 06:26:57 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Tue, 8 May 2007 06:26:57 -0700 (PDT)
Message-ID: <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com>
Date: Tue, 8 May 2007 09:26:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Automatic analyzer resolving based on Locale
In-Reply-To: <f1pt2m$2e1$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44258_647219.1178630817004"
References: <f1pt2m$2e1$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44258_647219.1178630817004
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is nothing canned that I know of. I'm also not sure how this
would be used. If you're using a single index, how are you going
to index, then search using these analyzers? Or is there some
other magic going on?

Consider your document with a field "text". If you index into this
field with different analyzers at different times (language based),
how can you trust your results no matter *what* analyzer is used
at search time?

Conversely, if you only use a single analyzer at index time, how can
you trust queries created with different languages against that
field?

Or am I completely off base and you have no intention of
putting more than one language in an index <G>?

Best
Erick


On 5/8/07, Geoffrey De Smet <ge0ffrey.spam@gmail.com> wrote:
>
> I have a use case, in which I need to select the Analyzer based on a
> Locale.
> For example:
> "nl" => DutchAnalyzer
> "nl_BE" => DutchAnalyzer
> "fr" => FrenchAnalyzer
> "foobar" => StandardAnalyzer (fallback)
>
> I was wondering if lucene has any sort of "AutomaticAnalyzerResolver"
> class that could do this for me?
> I 'll write it myself if it doesn't exist, but it might be very handy
> for the community to have this in Lucene's jar, as when new Analyzers
> are added, they could be hooked in automatically.
>
> --
> With kind regards,
> Geoffrey De Smet
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44258_647219.1178630817004--

From java-user-return-27939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 15:15:40 2007
Return-Path: <java-user-return-27939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44098 invoked from network); 8 May 2007 15:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 15:15:38 -0000
Received: (qmail 70087 invoked by uid 500); 8 May 2007 15:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70054 invoked by uid 500); 8 May 2007 15:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70043 invoked by uid 99); 8 May 2007 15:15:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 08:15:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 May 2007 08:15:28 -0700
Received: (qmail 8280 invoked by uid 60001); 8 May 2007 15:15:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=an3WU/pgOqbnwRg3Fs7Ttrh+gpcz9IcnQDpiYGSpuUQbcsCkpuqXCRJ/VZMbbIaMeSM86pE4aNQulFUHKacZsHuaXuMatnzUjaAgpPH/WSIKjYKBBdDmzJP7HdNF3rauqqlDiWruhpOOGSykO0ucrdCxsrDM974f/jEX7Hh5V1g=;
X-YMail-OSG: i2Sfh0sVM1kabPLHJ5YDmBw7oBxg8_T_XiEYeViwgb6HPxMX_YHC.Rk6p4eUhliNuZ3t0QQ6bPwaAN6xuXCc_LAfdeRbgjzSOx9pHKXIgw03Fwpty4WOzYktVPqEIW0DKC6w9.hhCmi0jic-
Received: from [208.125.28.244] by web50305.mail.re2.yahoo.com via HTTP; Tue, 08 May 2007 08:15:07 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Tue, 8 May 2007 08:15:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Is it necessary to optimize?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <382541.8001.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

----- Original Message ----
From: Stadler Hans-Christian <hans-christian.stadler@psi.ch>

If mergeFactor is set to 2 and no optimize() is ever done on the index,
what is the impact on

1) the number opened files during indexing

OG: it will grow a little, but frequently go down as Lucene merges segments automatically during indexing.  The pattern is increase slowly-reduce rapidly, increase slowly-reduce rapidly, etc.

2) the number of opened files during searching

OG: the trend will follow the trend for the number of files from 1)

2) the search speed

OG: fast

3) the indexing speed

OG: slower than if you increased the mergeFactor, as with mergeFactor set to only 2, Lucene will merge segments pretty frequently.

Otis
--
Lucene Consulting -- http://lucene-consulting.com/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 17:36:19 2007
Return-Path: <java-user-return-27940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95627 invoked from network); 8 May 2007 17:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 17:36:18 -0000
Received: (qmail 98941 invoked by uid 500); 8 May 2007 17:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98100 invoked by uid 500); 8 May 2007 17:36:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98088 invoked by uid 99); 8 May 2007 17:36:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 10:36:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 10:36:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 602375B770; Tue,  8 May 2007 10:35:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 575017F403
	for <java-user@lucene.apache.org>; Tue,  8 May 2007 10:35:49 -0700 (PDT)
Date: Tue, 8 May 2007 10:35:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Automatic analyzer resolving based on Locale
In-Reply-To: <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705081032240.9572@hal.rescomp.berkeley.edu>
References: <f1pt2m$2e1$1@sea.gmane.org> <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: There is nothing canned that I know of. I'm also not sure how this
: would be used. If you're using a single index, how are you going
: to index, then search using these analyzers? Or is there some
: other magic going on?

i suspect the use case is "shipped" software product, where you want to
have one jar that works anywhere, but you want the analyzer used to depend
on Locale of the JVM the software is installed in.

Personally, i would advise against auto-selecting an Analyzer based on the
runtime Locale ... it's a fine approach when dealing with purely transient
data (ie: parsing Dates iput into a form) but it's a bad idea for
persistant data (ie: formating dates to write them to a file) because the
user could change their Locale and now the index they built the last time
they ran your softare doesn't work anymore.

just make it an option configurable at install time.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 17:47:23 2007
Return-Path: <java-user-return-27941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98685 invoked from network); 8 May 2007 17:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 17:47:22 -0000
Received: (qmail 17615 invoked by uid 500); 8 May 2007 17:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17583 invoked by uid 500); 8 May 2007 17:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17572 invoked by uid 99); 8 May 2007 17:47:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 10:47:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 10:47:14 -0700
Content-class: urn:content-classes:message
Subject: search problem/odd results
MIME-Version: 1.0
Date: Tue, 8 May 2007 12:46:17 -0500
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C79198.C79BCBE2"
Message-ID: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search problem/odd results
Thread-Index: AceRmMfZu7OcaDCHT364sNg16hpJ5Q==
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C79198.C79BCBE2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I don't understand why I'm getting the results I'm getting.

=20

If I search for "pandock*" I get 6 results

Np-pandock

Np-pandock-L

Np-pandock-1

Np-pandock-2

Np-pandock

Np-pandock-L1

=20

If I search for np-pandock I get=20

Np-pandock

Np-pandock-L

=20

If I search for pandock I get=20

Np-pandock

Np-pandock-l

=20

=20

At this point, why those two?     I was searching on lots of fields but
now I've limited it to just this "name" field.    This is under lucene
1.4.

I have one field of name as a keyword , another (nametxt) as text type.
This is the name of the item.     I have other description fields I need
to search through but at this point I don't understand why "pandock" or
"np-pandock" get those two and nothing else.

=20

If I search for np-pandock-l1 I get

Np-pandock-l1

=20

So that makes sense.       but why would "pandock" only come back with
two results?

=20

Thanks for any help in this matter.


------_=_NextPart_001_01C79198.C79BCBE2--

From java-user-return-27942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 18:47:19 2007
Return-Path: <java-user-return-27942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19484 invoked from network); 8 May 2007 18:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 18:47:18 -0000
Received: (qmail 53098 invoked by uid 500); 8 May 2007 18:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53036 invoked by uid 500); 8 May 2007 18:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53019 invoked by uid 99); 8 May 2007 18:47:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 11:47:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 11:47:09 -0700
Received: by ug-out-1314.google.com with SMTP id k40so146679ugc
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 11:46:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ii7HtYrvzp9vi9XY4KWddA5BfffMXEnqbQY/ylpuGljYUGv0QZXJgdKna2urAafrwx/9gk/ErSeeI0YhkMASfeDSfbM07dpNVaW562VWA7jpLofsXA/8nf1F7ELlp6DG71q5RZGhsJLFzYxZtkAPQeZi8nfCW9HbM96LnC+2WDM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UxOkJK1wDlZLDatHGIJPjqVCEe96MFfjQL3QoS7MZlAaz5DJSzNZq9yn0keMD/6mYRH7wEJC2aRA06PqxwbzbuQb591p8lc57J81UdmFvrq5LeuYZcVpFHled1IaTqXzwVWhF9/ECPssw7mYrzWMEc/BB5D2KGd7yJSz/byCt6E=
Received: by 10.82.173.19 with SMTP id v19mr12305978bue.1178650007530;
        Tue, 08 May 2007 11:46:47 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Tue, 8 May 2007 11:46:47 -0700 (PDT)
Message-ID: <359a92830705081146p280b5d1elb6b9b08d00b3f5c0@mail.gmail.com>
Date: Tue, 8 May 2007 14:46:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results
In-Reply-To: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46986_31916118.1178650007374"
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46986_31916118.1178650007374
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First question: What analyzers are you using at index and search time?

Second question: Have you tried using query.toString() to see how
the query parses? If so, you should post the results.

Third question: Have you used Luke to examine your index, to see
what's actually in there (which may surprise you depending upon
what analyzers you are using). You can also see how queries
parse using various analyzers. Which may also surprise you.

Best
Erick

On 5/8/07, John Powers <jpowers@configureone.com> wrote:
>
> I don't understand why I'm getting the results I'm getting.
>
>
>
> If I search for "pandock*" I get 6 results
>
> Np-pandock
>
> Np-pandock-L
>
> Np-pandock-1
>
> Np-pandock-2
>
> Np-pandock
>
> Np-pandock-L1
>
>
>
> If I search for np-pandock I get
>
> Np-pandock
>
> Np-pandock-L
>
>
>
> If I search for pandock I get
>
> Np-pandock
>
> Np-pandock-l
>
>
>
>
>
> At this point, why those two?     I was searching on lots of fields but
> now I've limited it to just this "name" field.    This is under lucene
> 1.4.
>
> I have one field of name as a keyword , another (nametxt) as text type.
> This is the name of the item.     I have other description fields I need
> to search through but at this point I don't understand why "pandock" or
> "np-pandock" get those two and nothing else.
>
>
>
> If I search for np-pandock-l1 I get
>
> Np-pandock-l1
>
>
>
> So that makes sense.       but why would "pandock" only come back with
> two results?
>
>
>
> Thanks for any help in this matter.
>
>

------=_Part_46986_31916118.1178650007374--

From java-user-return-27943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 21:24:58 2007
Return-Path: <java-user-return-27943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72389 invoked from network); 8 May 2007 21:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 21:24:56 -0000
Received: (qmail 30737 invoked by uid 500); 8 May 2007 21:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30710 invoked by uid 500); 8 May 2007 21:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30699 invoked by uid 99); 8 May 2007 21:24:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:24:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:24:47 -0700
Received: from [192.168.1.100] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id l48LUmm20443
	for <java-user@lucene.apache.org>; Tue, 8 May 2007 17:30:49 -0400
Message-ID: <4640EAB4.8010202@alias-i.com>
Date: Tue, 08 May 2007 17:25:08 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction
References: <92631.36792.qm@web33006.mail.mud.yahoo.com> <463FA954.1020109@gmail.com>
In-Reply-To: <463FA954.1020109@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> The only commercial options that I have seen do not have a web presence 
> (that I know of or can find) and I don't recall the company names (only 
> peripherally involved).

Are we talking about Yahoo's buzz index and
Amazon's SIPs or CAPs?

I actually think the most interesting application
of this is in the Scirus.com search engine, built by
Fast Search (Lucene competitor) and Elsevier (publisher).
They extract phrases relative to a query (I have guesses
as to how they do this quickly) and show those for
query refinement.  For instance, the query "text data
mining" finds the following "keywords" (and then some):

	association rules	
	case-based reasoning	
	computational biology	
	data integration	
	data visualization	
	genomics	
	information access	
	information filtering	
	information integration

The standard way to tackle this problem (see, e.g.,
Manning and Schuetze's 1999 NLP textbook) is to
look for collocations -- terms that don't look to
be random according to standard independence tests
(e.g. a t-test or chi-squared test).  That is,
do "data" and "visualization" show up more than
you would expect them to in the results of the
query "text data mining"?)

Although Manning and Schuetze
don't really discuss it, you can also compare one
corpus to another (e.g. today's news to the last
month's to see what's newly hot today, or the top
1000 hits for a query relative to a whole collection).

You can find pretty much every version ever
put forward implemented in Ted Pedersen's
n-grams package:

      http://www.d.umn.edu/~tpederse/nsp.html

which is in Perl with lots of doc and manuals
and papers with all the (very easy) math.

These techniques are also very very easy to implement,
as in first exercise in an undergrad computer sci
class easy.  The only real issues are (a) scaling
and (b) heuristic pruning.  Popular pruning options
include using only nouns (as determined by a part
of speech tagger), only capitalized phrases,
or even phrases appearing after "the".  With enough
pruning, scaling's easy.

We provide a tutorial in LingPipe:

     http://www.alias-i.com/lingpipe/demos/tutorial/interestingPhrases/read-me.html

And here's a blog entry comparing our hypothesis
testing approach to a standard mutual-info based
method (discussed by Matthew Hurst, when he was
at Nielsen BuzzMetrics):

     http://www.alias-i.com/blog/?p=14

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 21:43:06 2007
Return-Path: <java-user-return-27944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80272 invoked from network); 8 May 2007 21:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 21:43:05 -0000
Received: (qmail 55122 invoked by uid 500); 8 May 2007 21:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55084 invoked by uid 500); 8 May 2007 21:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55073 invoked by uid 99); 8 May 2007 21:43:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:43:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:42:57 -0700
Content-class: urn:content-classes:message
Subject: RE: search problem/odd results
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 8 May 2007 16:42:01 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B294564F3@bettylou.configureone.net>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <359a92830705081146p280b5d1elb6b9b08d00b3f5c0@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search problem/odd results
Thread-Index: AceRoTVtLnmWRHCoQAyKt0GUjqN8JwAF8koA
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <359a92830705081146p280b5d1elb6b9b08d00b3f5c0@mail.gmail.com>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Here are the queries

In my code I have:
			System.out.println("luceneQuery: " +
luceneQuery);
			query =3D
MultiFieldQueryParser.parse(luceneQuery.toString(),
IndexerExternal.CARTABLE, IndexerExternal.getAnalyzer());
			System.out.println("query: " + query);


That produces this:

luceneQuery: ( (name:np-pandock*^1 nametxt:np-pandock*^1)
(name:"np-pandock*"^1 nametxt:"np-pandock*"^1) )

query: (name:np-pandock* nametxt:np-pandock*) (name:"np pandock"
nametxt:"np pandock")


I am using StandardAnalyzer

I've had problems with luke in the past not being able to read the
files.   So I don't use it.     But given the queries below, the data is
there, right?    If "pandock" works, wouldn't "np-pandock"  ... if it
didn't work completely, that'd be fine.   but it returns two.. why those
two?    That's the part I'm not getting.

Thanks for your response...

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, May 08, 2007 1:47 PM
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results

First question: What analyzers are you using at index and search time?

Second question: Have you tried using query.toString() to see how
the query parses? If so, you should post the results.

Third question: Have you used Luke to examine your index, to see
what's actually in there (which may surprise you depending upon
what analyzers you are using). You can also see how queries
parse using various analyzers. Which may also surprise you.

Best
Erick

On 5/8/07, John Powers <jpowers@configureone.com> wrote:
>
> I don't understand why I'm getting the results I'm getting.
>
>
>
> If I search for "pandock*" I get 6 results
>
> Np-pandock
>
> Np-pandock-L
>
> Np-pandock-1
>
> Np-pandock-2
>
> Np-pandock
>
> Np-pandock-L1
>
>
>
> If I search for np-pandock I get
>
> Np-pandock
>
> Np-pandock-L
>
>
>
> If I search for pandock I get
>
> Np-pandock
>
> Np-pandock-l
>
>
>
>
>
> At this point, why those two?     I was searching on lots of fields
but
> now I've limited it to just this "name" field.    This is under lucene
> 1.4.
>
> I have one field of name as a keyword , another (nametxt) as text
type.
> This is the name of the item.     I have other description fields I
need
> to search through but at this point I don't understand why "pandock"
or
> "np-pandock" get those two and nothing else.
>
>
>
> If I search for np-pandock-l1 I get
>
> Np-pandock-l1
>
>
>
> So that makes sense.       but why would "pandock" only come back with
> two results?
>
>
>
> Thanks for any help in this matter.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 21:46:04 2007
Return-Path: <java-user-return-27945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80671 invoked from network); 8 May 2007 21:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 21:46:01 -0000
Received: (qmail 58268 invoked by uid 500); 8 May 2007 21:46:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58226 invoked by uid 500); 8 May 2007 21:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58215 invoked by uid 99); 8 May 2007 21:46:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:46:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 14:45:52 -0700
Received: (qmail 7152 invoked from network); 8 May 2007 21:45:29 -0000
Received: from unknown (HELO p54bfdb9a.dip.t-dialin.net) ([pbs]695637@[84.191.219.154])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 May 2007 21:45:29 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results
Date: Tue, 8 May 2007 23:44:40 +0200
User-Agent: KMail/1.8.2
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <359a92830705081146p280b5d1elb6b9b08d00b3f5c0@mail.gmail.com> <F9E303076B72074AB76B2C8F78952B294564F3@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B294564F3@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705082344.40933@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 08 May 2007 23:42, John Powers wrote:

> I've had problems with luke in the past not being able to read the
> files. 

Just make sure you specify the directory, not the files when opening an 
index with Luke. Also use the latest version (0.7).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 22:33:40 2007
Return-Path: <java-user-return-27946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95750 invoked from network); 8 May 2007 22:33:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 22:33:40 -0000
Received: (qmail 36688 invoked by uid 500); 8 May 2007 22:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36660 invoked by uid 500); 8 May 2007 22:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36649 invoked by uid 99); 8 May 2007 22:33:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 15:33:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rampeters@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 15:33:32 -0700
Received: by nz-out-0506.google.com with SMTP id i1so2110113nzh
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 15:33:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=P/XevqsLXnXK/fQ6siNwLNK6L/PoDOX3r/nfrBe+5FW9puegcqWC/l2eKG4QlenoDsQfjH71TAU8BROr1Sy+GDwN3nTW5xjt+EYD/5LYeB5y2CZRWUakYsvd7DfPc5gzqc1zXlH1vn+jQgqf6ize7cLinPNkmtjvclcNbqmm99M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VteU542FcMLGzlSW6V8ILYOUtc7PnRI8SN7RBpJulR9GxVM6wGrhBdaNCPOVR8j+SoEG0xab3nBOh1XkzS1vgNzjtxa7PblXCe+G78YQrMHgNfXMpohSRlsyRZ/O4te5PbnsfjO8t0j2pxB9lVKVFFIHFcm38n0GzKBXPBIZzVk=
Received: by 10.114.179.1 with SMTP id b1mr2793631waf.1178663591003;
        Tue, 08 May 2007 15:33:11 -0700 (PDT)
Received: by 10.115.94.9 with HTTP; Tue, 8 May 2007 15:33:10 -0700 (PDT)
Message-ID: <81b45360705081533l3c7dbdb7j99192ccf968672b6@mail.gmail.com>
Date: Tue, 8 May 2007 18:33:10 -0400
From: "Ram Peters" <rampeters@gmail.com>
To: java-user@lucene.apache.org
Subject: Periodic Indexing DESIGN QUESTION
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I am indexing documents periodically every hour.  I have a scenario.
For example, when you are indexing every hour and large document set
is present, it takes >1 hr to index the documents.  Now you are
already behind indexing for the next hour.  How do you design
something that is robust?

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 08 23:30:28 2007
Return-Path: <java-user-return-27947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18405 invoked from network); 8 May 2007 23:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 May 2007 23:30:27 -0000
Received: (qmail 27703 invoked by uid 500); 8 May 2007 23:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27668 invoked by uid 500); 8 May 2007 23:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27651 invoked by uid 99); 8 May 2007 23:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 16:30:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 16:30:18 -0700
Received: by wx-out-0506.google.com with SMTP id i29so7237wxd
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 16:29:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QdZjLT1KYedcA+Da++sbFc0GL09Y4hpRcsOxhSIvrQam40U9ygO8jtml47GrC8t6qigLnqhVjk1Lycqq7O6XVtvSlVEsdrZYUwIRnGtEs5ptY8lLB6NVRFkwrhqSEsGqJGwaGb90PNq8KVv0U95fkmBEiteMYBBGEXORI0Lr23k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oP5S0yv+W588WZe/OqzSOTPX+rlvW3YbfpdH6ddfxqRORt5oUAfpst6gdpUit4ShsUCl8GLoJEff8gbBkws+7EbKqx4zG/+aWEfyxpOiG77s4r8l1nG/ttOKotpIu188r7ySUctPT1kT4ldWZtLu0/KcA7rg9clmXmFVUbIGhUQ=
Received: by 10.82.185.12 with SMTP id i12mr12773459buf.1178666996639;
        Tue, 08 May 2007 16:29:56 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Tue, 8 May 2007 16:29:56 -0700 (PDT)
Message-ID: <359a92830705081629q6191847bpdcf3e912bde6cc83@mail.gmail.com>
Date: Tue, 8 May 2007 19:29:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Periodic Indexing DESIGN QUESTION
In-Reply-To: <81b45360705081533l3c7dbdb7j99192ccf968672b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49078_14809383.1178666996342"
References: <81b45360705081533l3c7dbdb7j99192ccf968672b6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49078_14809383.1178666996342
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't do it that way <G>? Is this an actual or theoretical
scenario? And do you reasonably expect it to become actual?
Otherwise, why bother?

And you've got other problems here. If you're indexing that
much data, you'll soon outgrow your disk. Unless you're
replacing most of the documents.

But assuming that all this is somehow not a problem, I'd
consider something like indexing by directory. That is, for an
hour, collect all the incoming documents in directory d1. Then
turn an indexer process loose on d1 and start collecting docs in
d2. At the end of the next hour, start indexing d2 and collecting d3.

When each indexing process finishes, you can use
IndexWriter.addIndexes. Or you could batch them up and add
all the indexes that have been created in the last, say, 6 hours
at once. You could even split this across multiple machines if
you get CPU bound.

That said, I can't stress enough that you really need to consider
how long you can keep indexing data at that rate and have any
performance to speak of at search time.

If you're not indexing that much data, *and* you still have speed
problems, I'd look long and hard at my code to see why indexing
is taking so long. Are you closing/reopening the IndexWriter? Are
you optimizing too often? Is the way you access the data (perhaps
querying a database) painful?

Some real numbers would help. Things like:
How many documents are in your index?
How many arrive each hour?
How long does it take to index, say, 100 docs?
How big are the docs upon input? How much bigger do they make the index?

Have you measured *any* of these things? if so, please post
the numbers. Think about doing everything *except* indexing and see
if your bottleneck is somewhere unexpected.

Anyway, hope this helps
Erick

On 5/8/07, Ram Peters <rampeters@gmail.com> wrote:
>
> I am indexing documents periodically every hour.  I have a scenario.
> For example, when you are indexing every hour and large document set
> is present, it takes >1 hr to index the documents.  Now you are
> already behind indexing for the next hour.  How do you design
> something that is robust?
>
> thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49078_14809383.1178666996342--

From java-user-return-27948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 03:59:52 2007
Return-Path: <java-user-return-27948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2320 invoked from network); 9 May 2007 03:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 03:59:51 -0000
Received: (qmail 15187 invoked by uid 500); 9 May 2007 03:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15163 invoked by uid 500); 9 May 2007 03:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15145 invoked by uid 99); 9 May 2007 03:59:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 20:59:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 20:59:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CFD5B5B763; Tue,  8 May 2007 20:59:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C6F367F403
	for <java-user@lucene.apache.org>; Tue,  8 May 2007 20:59:20 -0700 (PDT)
Date: Tue, 8 May 2007 20:59:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Periodic Indexing DESIGN QUESTION
In-Reply-To: <81b45360705081533l3c7dbdb7j99192ccf968672b6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705082041300.16560@hal.rescomp.berkeley.edu>
References: <81b45360705081533l3c7dbdb7j99192ccf968672b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: For example, when you are indexing every hour and large document set
: is present, it takes >1 hr to index the documents.  Now you are
: already behind indexing for the next hour.  How do you design
: something that is robust?

fundementally, this question is really about issues in a producer/consumer
model then it is specificly about indexing... given a situation where data
comes into a queue (from some set of producers) and you wnat to process
that data (by some set of consumers) what do you do if the producers
produce faster then the consumers consume.

i know of 7 options:
  1) decrease the number of producers
  2) make the producers produce slower
  3) make the queue infinitely large
  4) make the queue block
  5) make the consumers consumer faster
  6) increase the number of consumers
  7) throw away data

#1, #2 and #3 are not usually practical but are listed for completelness.
#4 may be practical in some situations, but there are no easy rules to
know when.  #5 tends to be very feasible in a well designed system where
things can be parallelized while #6 can be frequently be achieved either
by profiling and optimizing your code, or by making your code do
less; which segues nicely to #7 -- it may sound like a joke but frequently
big throughput gains can be made by reducing the amount of data being sent
to the consumers ... sometimes it's a matter of taking some work that the
consumers do making the producers do it (ie: eliminating data from the
that you know you aren't going to index), in other cases it may truely be
throwing away data because you can see that your queue is so full you
switch into "critial info only mode" where you don't bother to process
every little bit of data -- just the important stuff.  you make the
concious choice that it's better to be caught up on the big stuff then to
fall way way behind dealing with the little stuff.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 04:27:07 2007
Return-Path: <java-user-return-27949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7236 invoked from network); 9 May 2007 04:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 04:27:06 -0000
Received: (qmail 42057 invoked by uid 500); 9 May 2007 04:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42017 invoked by uid 500); 9 May 2007 04:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42006 invoked by uid 99); 9 May 2007 04:27:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 21:27:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 21:26:59 -0700
Received: by wr-out-0506.google.com with SMTP id 68so66076wra
        for <java-user@lucene.apache.org>; Tue, 08 May 2007 21:26:38 -0700 (PDT)
Received: by 10.114.202.15 with SMTP id z15mr26888waf.1178684798116;
        Tue, 08 May 2007 21:26:38 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Tue, 8 May 2007 21:26:38 -0700 (PDT)
Message-ID: <1324e4e20705082126n3e7eb32r262f1e020f41f8c6@mail.gmail.com>
Date: Wed, 9 May 2007 09:56:38 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Lock obtain timed out while searching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73096_23008516.1178684798055"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73096_23008516.1178684798055
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

I am getting the following exception while searching:

Lock obtain timed out: java.io.IOException: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock

I have implemented MultiSearcher only, No other methods are updating/adding
the docs in index, so how it is going ?

Thanks in advance,
Laxmilal

------=_Part_73096_23008516.1178684798055--

From java-user-return-27950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 06:40:27 2007
Return-Path: <java-user-return-27950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36856 invoked from network); 9 May 2007 06:40:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 06:40:27 -0000
Received: (qmail 94098 invoked by uid 500); 9 May 2007 06:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94063 invoked by uid 500); 9 May 2007 06:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94052 invoked by uid 99); 9 May 2007 06:40:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 23:40:25 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FORGED_YAHOO_RCVD,PLING_QUERY,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 May 2007 23:40:18 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hlfq9-0007Hg-Lv
	for java-user@lucene.apache.org; Tue, 08 May 2007 23:39:57 -0700
Message-ID: <10389201.post@talk.nabble.com>
Date: Tue, 8 May 2007 23:39:57 -0700 (PDT)
From: supereric <eric_Calin_Cruise@yahoo.com>
To: java-user@lucene.apache.org
Subject: Scoring results?!
In-Reply-To: <dac893430704140555n726f91fcy4b65b5d4da829f7c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: eric_Calin_Cruise@yahoo.com
References: <9989930.post@talk.nabble.com> <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com> <dac893430704140555n726f91fcy4b65b5d4da829f7c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


How I can get the tag word score in lucene. suppose that you have searched a
tag word and 3 hit documents
are now found. 
1 -How someone could find number of occurrences in any document so it could
sort the results.
Also I wan to have some other policies for ranking the results. What should
I do to handle that. for example 
I want to score boldfaced tag words in an html document twice normal texts.
2- How I can omit some tag words from the index?! for example common words
in another language?



EDMOND KEMOKAI wrote:
> 
> You'll have to implement your own ranking on top of Lucene.  Lucene only
> gives you document scores, which is a measure of how well your query match
> a
> document. Page rank determines how relevant a document is to your query, a
> document might score well by having a lot of the query words, but it might
> not be what you're looking for.
> 
> On 4/14/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 14 apr 2007 kl. 06.19 skrev supereric:
>>
>> > I want to change the page ranking algorithm in lucene and I do not
>> > know
>> > where to start from and what file should I change?
>> > I do not know what classes are involved. I have only a few days to
>> > do so, so
>> > please help me with your complete explanation as a big favor!
>>
>> Eric,
>>
>> Lucene has no built in page rank, however you might mean something
>> else. It is easier to help if you explain what it is you want to achive.
>>
>> http://wiki.apache.org/jakarta-lucene/PageRank
>>
>>
>> --
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> "talk trash and carry a small stick."
> PAUL KRUGMAN (NYT)
> 
> 

-- 
View this message in context: http://www.nabble.com/PAGE-RANKING-IN-LUCENE----%3CNEED-URGENT-HELP%21%3E-tf3574992.html#a10389201
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 11:14:25 2007
Return-Path: <java-user-return-27951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8085 invoked from network); 9 May 2007 11:14:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 11:14:24 -0000
Received: (qmail 14586 invoked by uid 500); 9 May 2007 11:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14548 invoked by uid 500); 9 May 2007 11:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14537 invoked by uid 99); 9 May 2007 11:14:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 04:14:21 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 04:14:14 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id BD6AD5C2E2
	for <java-user@lucene.apache.org>; Wed,  9 May 2007 04:13:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <10389201.post@talk.nabble.com>
References: <9989930.post@talk.nabble.com> <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com> <dac893430704140555n726f91fcy4b65b5d4da829f7c@mail.gmail.com> <10389201.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B4C1AE93-A783-4E02-9401-759867DE2075@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Scoring results?!
Date: Wed, 9 May 2007 07:13:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eric,

On May 9, 2007, at 2:39 AM, supereric wrote:

>
> How I can get the tag word score in lucene. suppose that you have  
> searched a
> tag word and 3 hit documents
> are now found.
> 1 -How someone could find number of occurrences in any document so  
> it could
> sort the results.

Span Queries tell you where the matches occur in the document by  
offset, but I am not sure what your sorting criteria would be.  The  
explain method also can give you information about why a particular  
document scored a particular way.


> Also I wan to have some other policies for ranking the results.  
> What should
> I do to handle that. for example
> I want to score boldfaced tag words in an html document twice  
> normal texts.

Although totally experimental at this stage, the new Payload stuff in  
the trunk version of Lucene (or nightly builds) is designed for such  
a scenario.  Check out the BoostingTermQuery which can boost term  
scores based on the contents of a payload located at a particular  
term.  Feedback on the APIs is very much appreciated.

> 2- How I can omit some tag words from the index?! for example  
> common words
> in another language?

See the StopFilter token filter and/or the StopwordAnalyzer


>
>

HTH,
Grant

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 13:18:46 2007
Return-Path: <java-user-return-27952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41037 invoked from network); 9 May 2007 13:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 13:18:45 -0000
Received: (qmail 17763 invoked by uid 500); 9 May 2007 13:18:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17742 invoked by uid 500); 9 May 2007 13:18:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17731 invoked by uid 99); 9 May 2007 13:18:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 06:18:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 06:18:37 -0700
Received: by nz-out-0506.google.com with SMTP id i1so179750nzh
        for <java-user@lucene.apache.org>; Wed, 09 May 2007 06:18:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VVeXSH6pRVDJZmrMlvZvhYXzFs9+ij4rBHZQD9EUpbMim67Bsl5LOBXt5q+6b/u0idlxdoiWZcYhkhILqz1o/1+VivtqD2dnRiNkjUsuhiqesIE8GwGjGbuIYQhOJ2sl2u2Aqeo+pHf6jDGGuXfRim/ytH2coLWvzTObrV1qla4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=VAyYSS1F0VLX0OHQMe8SDfN92jFwCo86xfOeCO0YZO9moMubY5eHVCxFbmOBYvG0Q/KBnMq88UHQ7fcg4QaSR0tpNW/mPtvx38thP0j2ZKSwuKY4DzTscTJMIh7RQMNWxsmZHzqaK/s5xamAKiAWtBy+1EgPMPOpZE94odUWeVY=
Received: by 10.114.74.1 with SMTP id w1mr162974waa.1178716696434;
        Wed, 09 May 2007 06:18:16 -0700 (PDT)
Received: by 10.114.108.8 with HTTP; Wed, 9 May 2007 06:18:16 -0700 (PDT)
Message-ID: <ae6f38f60705090618ub2f317bnf6a044cc0006eb28@mail.gmail.com>
Date: Wed, 9 May 2007 09:18:16 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Proximity searching with subexpressions
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

According to the documentation for Lucene's Query Parser Syntax, the
tilde operator provides a proximity search.

For instance, "Harry Hallows"~6 should match the text 'Harry Potter
and the Deathly Hallows'.

And while this is fine for two token phrases, I was wondering if it
worked well for subexpressions:

( ( "alien" "ufo" "crash site" ) ( "Roswell" "NM" "New Mexico" ) ) ~10

Will this match "alien ship crashed in Roswell" in addition to "ufo
spotted hovering over New Mexico"?

I've been searching through the Lucene groups
(http://www.gossamer-threads.com/lists/lucene/java-user/) for span and
proximity, but have come up with nothing about such syntax or
capability.

Additionally, I tried entering expressions containing a tilde into
Luke and then doing an explain structure.

Surprisingly, I didn't see a difference between a simple case like "A
B" and "A B"~10 in the explanation.

Is this a problem with Luke, or did I possibly miss something trivial?

Anyhow, the more important question is: Is it possible to do proximity
searches on lists of terms?

Thanks,
-Walt Stoneburner, <wls@wwco.com>
 http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 14:18:11 2007
Return-Path: <java-user-return-27953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74577 invoked from network); 9 May 2007 14:18:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 14:18:10 -0000
Received: (qmail 89684 invoked by uid 500); 9 May 2007 14:18:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89654 invoked by uid 500); 9 May 2007 14:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89643 invoked by uid 99); 9 May 2007 14:18:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 07:18:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 07:18:02 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: search problem/odd results
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Wed, 9 May 2007 09:17:02 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net>
In-Reply-To: <200705082344.40933@danielnaber.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search problem/odd results
Thread-Index: AceRuiz97ubmUtVNQ6mpbWaf4QNaTAAinJ9w
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <359a92830705081146p280b5d1elb6b9b08d00b3f5c0@mail.gmail.com> <F9E303076B72074AB76B2C8F78952B294564F3@bettylou.configureone.net> <200705082344.40933@danielnaber.de>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, it doesn't work.     it gives an error modal dialog box that says
"IMPL".



-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: Tuesday, May 08, 2007 4:45 PM
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results

On Tuesday 08 May 2007 23:42, John Powers wrote:

> I've had problems with luke in the past not being able to read the
> files.=20

Just make sure you specify the directory, not the files when opening an=20
index with Luke. Also use the latest version (0.7).

Regards
 Daniel

--=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 15:15:48 2007
Return-Path: <java-user-return-27954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96559 invoked from network); 9 May 2007 15:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 15:15:36 -0000
Received: (qmail 22936 invoked by uid 500); 9 May 2007 15:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22670 invoked by uid 500); 9 May 2007 15:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21990 invoked by uid 99); 9 May 2007 15:15:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 08:15:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 08:15:16 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Hlns6-0005es-Rq
	for java-user@lucene.apache.org; Wed, 09 May 2007 17:14:30 +0200
Received: from vip.schaubroeck.be ([193.75.212.66])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 09 May 2007 17:14:30 +0200
Received: from ge0ffrey.spam by vip.schaubroeck.be with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 09 May 2007 17:14:30 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Geoffrey De Smet <ge0ffrey.spam@gmail.com>
Subject:  Re: Automatic analyzer resolving based on Locale
Date:  Wed, 09 May 2007 17:13:25 +0200
Lines: 45
Message-ID: <f1sofs$lcr$1@sea.gmane.org>
References:  <f1pt2m$2e1$1@sea.gmane.org> <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com> <Pine.LNX.4.58.0705081032240.9572@hal.rescomp.berkeley.edu>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vip.schaubroeck.be
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
In-Reply-To: <Pine.LNX.4.58.0705081032240.9572@hal.rescomp.berkeley.edu>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We 'd use a different index for each locale's language that is 
configured, however this might have an impact on performance.

Would this be attainable (maybe some day in lucene)?

- Use an IndexEverythingAnalyzer for writing,
so "werk", "werkte", "gewerkt" and "en" is indexed as-is when they are 
encountered.

- And then use a DutchAnalyzer for reading,
which if I ask "werk" searches for "werk", "werkte" and "gewerkt",
and also ignores stop words like "en" in the query.
EnglishAnalyzer would search with "werk" for "werk", "werkes", "werked", ...


- It might seem a bad idea to mix several languages in the same index,
but in reality few data comes with the meta-data which declares the 
language of the data is written in.


With kind regards,
Geoffrey De Smet

Chris Hostetter schreef:
> : There is nothing canned that I know of. I'm also not sure how this
> : would be used. If you're using a single index, how are you going
> : to index, then search using these analyzers? Or is there some
> : other magic going on?
> 
> i suspect the use case is "shipped" software product, where you want to
> have one jar that works anywhere, but you want the analyzer used to depend
> on Locale of the JVM the software is installed in.
> 
> Personally, i would advise against auto-selecting an Analyzer based on the
> runtime Locale ... it's a fine approach when dealing with purely transient
> data (ie: parsing Dates iput into a form) but it's a bad idea for
> persistant data (ie: formating dates to write them to a file) because the
> user could change their Locale and now the index they built the last time
> they ran your softare doesn't work anymore.
> 
> just make it an option configurable at install time.
> 
> 
> 
> -Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 15:47:00 2007
Return-Path: <java-user-return-27955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13899 invoked from network); 9 May 2007 15:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 15:46:58 -0000
Received: (qmail 27463 invoked by uid 500); 9 May 2007 15:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27434 invoked by uid 500); 9 May 2007 15:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27423 invoked by uid 99); 9 May 2007 15:46:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 08:46:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 08:46:50 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HloN3-0004jY-UB
	for java-user@lucene.apache.org; Wed, 09 May 2007 08:46:29 -0700
Message-ID: <10396965.post@talk.nabble.com>
Date: Wed, 9 May 2007 08:46:29 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: FuzzyLikeThisQuery what does maxNumTerms mean
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,

I am new to lucene and want to use the FuzzyLikeThisQuery.

I have read the documentation for this class, and read the following for
what maxNumTerms means:
"maxNumTerms - The total number of terms clauses that will appear once
rewritten as a BooleanQuery".
In addition in the classes documentation it reads:
"Fuzzifies ALL terms provided as strings and then picks the best n
differentiating terms"

1) I want to understand if the meaning of  "n" in "the best n
differentiating terms" refers to maxNumTerms .
2) I want to understand how does this number affect the query built for this
scenario:
    
FuzzyLikeThisQuery fuzzyLikeThisQuery = new FuzzyLikeThisQuery(3, new
StandardAnalyzer());
fuzzyLikeThisQuery.addTerms("tem1 term2 term3 term4", fieldName, 0.75f, 2);

If the number of maxNumTerms = 3, how will this affect the query built. Will
it only use the first 3 terms or what?

Thanks in advance.



 
-- 
View this message in context: http://www.nabble.com/FuzzyLikeThisQuery-what-does-maxNumTerms-mean-tf3716547.html#a10396965
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 16:04:40 2007
Return-Path: <java-user-return-27956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20678 invoked from network); 9 May 2007 16:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 16:04:39 -0000
Received: (qmail 80700 invoked by uid 500); 9 May 2007 16:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80582 invoked by uid 500); 9 May 2007 16:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80571 invoked by uid 99); 9 May 2007 16:04:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 09:04:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 09:04:25 -0700
Received: by an-out-0708.google.com with SMTP id b8so57712ana
        for <java-user@lucene.apache.org>; Wed, 09 May 2007 09:04:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SD9vqpElINo8RNdVWxGmyB9of+kb0jE3kUEoT1uSvDjQeUphR3PY/LNWlU26jBUICsDpD3uyAFzoLeH2HOtRod/M5jiOb6P5br8w/1NVdbbHoqKPFS7tbDAtxQwDBK/IDF+26zW5jfyyd+ni78R8u8kZClhhUcbXaATgxSJPeTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tWFRwzyYtnthgooN6xUNeku4HvqIDgba44/Wb+GsVODR4rqbxqsUCT/kNeSTln6KuuS8NSwSBtAwcD+h1Z+42tnwFlxZ0FFHVdrhx3Zgmuh8DOz5rYUqO2lEe4o5+kI2Rvbi4HGZfc5TVn7QCYwBKbbbXQIrhiNTEFrNsapCNY8=
Received: by 10.100.119.14 with SMTP id r14mr489161anc.1178726644473;
        Wed, 09 May 2007 09:04:04 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Wed, 9 May 2007 09:04:04 -0700 (PDT)
Message-ID: <ab0709bf0705090904x49015c43qca08a9a865ac3d02@mail.gmail.com>
Date: Wed, 9 May 2007 12:04:04 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Proximity searching with subexpressions
In-Reply-To: <ae6f38f60705090618ub2f317bnf6a044cc0006eb28@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28493_23660324.1178726644375"
References: <ae6f38f60705090618ub2f317bnf6a044cc0006eb28@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28493_23660324.1178726644375
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The ~ syntax can only be applied to a single phrase, i.e. "the greate
one"~3. This sets the slop allowed for the phrase to be 3. The defintion of
slop can be found by searching the archive, but it will not easily allow for
what you are looking for. The Lucene query language has not yet recived Span
systax support. You might want to check out Surround in contrib which is an
alternate syntax with support for Spans. I also have a parser that adds
proximity support...I am currently sitting on version 1.0 waiting for some
free time to release. My syntax consists of binary operators including a
proximity operator. Precedence works as expected (being a binary op sytax)
and a search for (alien ufo crash site ) ~10 (Roswell NM New Mexico ) would
make sure that each term on the left is within 10 of each term on the right
(if you default space operator was AND).

-Mark


On 5/9/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
>
> According to the documentation for Lucene's Query Parser Syntax, the
> tilde operator provides a proximity search.
>
> For instance, "Harry Hallows"~6 should match the text 'Harry Potter
> and the Deathly Hallows'.
>
> And while this is fine for two token phrases, I was wondering if it
> worked well for subexpressions:
>
> ( ( "alien" "ufo" "crash site" ) ( "Roswell" "NM" "New Mexico" ) ) ~10
>
> Will this match "alien ship crashed in Roswell" in addition to "ufo
> spotted hovering over New Mexico"?
>
> I've been searching through the Lucene groups
> (http://www.gossamer-threads.com/lists/lucene/java-user/) for span and
> proximity, but have come up with nothing about such syntax or
> capability.
>
> Additionally, I tried entering expressions containing a tilde into
> Luke and then doing an explain structure.
>
> Surprisingly, I didn't see a difference between a simple case like "A
> B" and "A B"~10 in the explanation.
>
> Is this a problem with Luke, or did I possibly miss something trivial?
>
> Anyhow, the more important question is: Is it possible to do proximity
> searches on lists of terms?
>
> Thanks,
> -Walt Stoneburner, <wls@wwco.com>
> http://www.wwco.com/~wls/blog/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28493_23660324.1178726644375--

From java-user-return-27957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 17:21:52 2007
Return-Path: <java-user-return-27957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47615 invoked from network); 9 May 2007 17:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 17:21:51 -0000
Received: (qmail 34184 invoked by uid 500); 9 May 2007 17:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34154 invoked by uid 500); 9 May 2007 17:21:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34143 invoked by uid 99); 9 May 2007 17:21:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 10:21:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 May 2007 10:21:42 -0700
Received: (qmail 24995 invoked by uid 60001); 9 May 2007 17:21:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=TlPSuBWixbKXcH/6KpSRAYg1YhfQMefYAhhSvqLeALEJVe3bH+KnShEj1xY2yxNPtvX8ZSCUv3uTIezpIqX016pOrLgQt4TPpaF6ov7zAfA+0Epak5Lvbo8IJEnCOcm5vM95qXlF2tm1ZmEdfwsM0n4iKOua2iE6Tqb8DjPoVWI=;
X-YMail-OSG: 5bPoXboVM1nAw1PucQ8RkH65Q.3frmX6zDkeCHp5zaEaH1UZJ1KIDWuTVffnWDQsG16dWCWCtHnaoYleIKPoh66W7Yfer0vu1L01eVfiAdBukPLbaui.O_s6AJA-
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Wed, 09 May 2007 17:21:17 GMT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Wed, 9 May 2007 17:21:17 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <170278.22978.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

FuzzyLikeThis is effectively the same as MoreLikeThis but adds fuzzy variations for the selected terms.

>>Will it only use the first 3 terms or what?

It works the same way as MoreLikeThis in that it is selective about which input terms are used for querying - words like "the" will typically get ignored.
So, given the input terms "accommodation in the Brecon beacons" the terms selected for querying are likely to be:

    accommodation - accomodation - accommadation - accomadation
    brecon - breacon - breckon - bracken
    beacons - beacon

This list of terms is then is shortlisted to the maxNumTerms value.

Unlike standard FuzzyQuery the rare term variations (i.e. the misspellings) will not be boosted above the hopefully more common correct spelling due to their IDF.

Hope this makes sense.

Cheers
Mark

----- Original Message ----
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 9 May, 2007 4:46:29 PM
Subject: FuzzyLikeThisQuery what does maxNumTerms mean


Hello all,

I am new to lucene and want to use the FuzzyLikeThisQuery.

I have read the documentation for this class, and read the following for
what maxNumTerms means:
"maxNumTerms - The total number of terms clauses that will appear once
rewritten as a BooleanQuery".
In addition in the classes documentation it reads:
"Fuzzifies ALL terms provided as strings and then picks the best n
differentiating terms"

1) I want to understand if the meaning of  "n" in "the best n
differentiating terms" refers to maxNumTerms .
2) I want to understand how does this number affect the query built for this
scenario:
    
FuzzyLikeThisQuery fuzzyLikeThisQuery = new FuzzyLikeThisQuery(3, new
StandardAnalyzer());
fuzzyLikeThisQuery.addTerms("tem1 term2 term3 term4", fieldName, 0.75f, 2);

If the number of maxNumTerms = 3, how will this affect the query built. Will
it only use the first 3 terms or what?

Thanks in advance.



 
-- 
View this message in context: http://www.nabble.com/FuzzyLikeThisQuery-what-does-maxNumTerms-mean-tf3716547.html#a10396965
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 17:59:55 2007
Return-Path: <java-user-return-27958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58232 invoked from network); 9 May 2007 17:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 17:59:54 -0000
Received: (qmail 12201 invoked by uid 500); 9 May 2007 17:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12169 invoked by uid 500); 9 May 2007 17:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12153 invoked by uid 99); 9 May 2007 17:59:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 10:59:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 10:59:41 -0700
Received: by mu-out-0910.google.com with SMTP id i10so154664mue
        for <java-user@lucene.apache.org>; Wed, 09 May 2007 10:59:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j2CB2mUm5S2ihSHETjERI8dWU3AIlyBK+amTU2AbZVDqAncrHE1GNoa+qSaZrdstK1bRb8PrJsF4QxecK8tUpfg0ro0Oj4T2bU6vC9lHPQ5/C3jG2Q02Ee76GSkwJnJdF84qwYkUFfRnWJiiVWHViMpziHvsNLlqbvEkdW3yMYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SE9Gl6Ok1+2zENcyIemkDPGElls9dxcnZV7vthdJOsBQ2D9lyc/Ls1yV5TbPwUN4SYMp10/AEeYyIj9yjGJ8aDbRPdUGFGB6gfDIFpSWgDKljy33ub3iqCnUx05y9DB6uP3p9jfo4qM0fjYTNILjSeWgBfzOXHx0WkkWFJ2eU6o=
Received: by 10.82.151.14 with SMTP id y14mr1480809bud.1178733560338;
        Wed, 09 May 2007 10:59:20 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 9 May 2007 10:59:20 -0700 (PDT)
Message-ID: <359a92830705091059v1ddea4d6ufff23bf10c35a6e7@mail.gmail.com>
Date: Wed, 9 May 2007 13:59:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Automatic analyzer resolving based on Locale
In-Reply-To: <f1sofs$lcr$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57653_28462193.1178733560218"
References: <f1pt2m$2e1$1@sea.gmane.org>
	 <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com>
	 <Pine.LNX.4.58.0705081032240.9572@hal.rescomp.berkeley.edu>
	 <f1sofs$lcr$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57653_28462193.1178733560218
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I don't see how this can work. In your example, you'd
index "werkte". But how are you going to search such that
this matches "werk"? No matter what analyzers you use? It looks
like you're thinking about either stemming or wildcarding, but
I really suspect that stemming is language dependent. So
I don't think you're going to get reasonable results when mixing
languages if you try to stem....

You might try something like indexing AND searching in a single
language. Say the standard low-ascii character set, with all the
accented characters folded into their unaccented forms. Of course,
the data you search on isn't the same data you display, so you
could still display the data in the native language.

Mind you, I think this is tricky, with hidden problems. But it
might work.

As far as the stemming is concerned, I also suppose you could
do something like use the native stemmer at index time, *then* fold
all the characters into values 20-127, THEN index the result. And do
the same at query time. I *still* think you'd get some "interesting"
results, but it could suffice. Although this requires you to know what
the language is that the person writing the query is using.

But no matter what you do, I'm pretty sure you'll get some results that
won't be what you want. The results may be close enough though.

Best
Erick

On 5/9/07, Geoffrey De Smet <ge0ffrey.spam@gmail.com> wrote:
>
> We 'd use a different index for each locale's language that is
> configured, however this might have an impact on performance.
>
> Would this be attainable (maybe some day in lucene)?
>
> - Use an IndexEverythingAnalyzer for writing,
> so "werk", "werkte", "gewerkt" and "en" is indexed as-is when they are
> encountered.
>
> - And then use a DutchAnalyzer for reading,
> which if I ask "werk" searches for "werk", "werkte" and "gewerkt",
> and also ignores stop words like "en" in the query.
> EnglishAnalyzer would search with "werk" for "werk", "werkes", "werked",
> ...
>
>
> - It might seem a bad idea to mix several languages in the same index,
> but in reality few data comes with the meta-data which declares the
> language of the data is written in.
>
>
> With kind regards,
> Geoffrey De Smet
>
> Chris Hostetter schreef:
> > : There is nothing canned that I know of. I'm also not sure how this
> > : would be used. If you're using a single index, how are you going
> > : to index, then search using these analyzers? Or is there some
> > : other magic going on?
> >
> > i suspect the use case is "shipped" software product, where you want to
> > have one jar that works anywhere, but you want the analyzer used to
> depend
> > on Locale of the JVM the software is installed in.
> >
> > Personally, i would advise against auto-selecting an Analyzer based on
> the
> > runtime Locale ... it's a fine approach when dealing with purely
> transient
> > data (ie: parsing Dates iput into a form) but it's a bad idea for
> > persistant data (ie: formating dates to write them to a file) because
> the
> > user could change their Locale and now the index they built the last
> time
> > they ran your softare doesn't work anymore.
> >
> > just make it an option configurable at install time.
> >
> >
> >
> > -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57653_28462193.1178733560218--

From java-user-return-27959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 18:01:44 2007
Return-Path: <java-user-return-27959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58611 invoked from network); 9 May 2007 18:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 18:01:43 -0000
Received: (qmail 15922 invoked by uid 500); 9 May 2007 18:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15886 invoked by uid 500); 9 May 2007 18:01:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15875 invoked by uid 99); 9 May 2007 18:01:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 11:01:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 11:01:36 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EE53E5B764; Wed,  9 May 2007 11:01:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EAE117F403
	for <java-user@lucene.apache.org>; Wed,  9 May 2007 11:01:15 -0700 (PDT)
Date: Wed, 9 May 2007 11:01:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Automatic analyzer resolving based on Locale
In-Reply-To: <f1sofs$lcr$1@sea.gmane.org>
Message-ID: <Pine.LNX.4.58.0705091056480.3457@hal.rescomp.berkeley.edu>
References: <f1pt2m$2e1$1@sea.gmane.org> <359a92830705080626y22b62bd7vd1eb45ca2226e591@mail.gmail.com>
 <Pine.LNX.4.58.0705081032240.9572@hal.rescomp.berkeley.edu> <f1sofs$lcr$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: - Use an IndexEverythingAnalyzer for writing,
: so "werk", "werkte", "gewerkt" and "en" is indexed as-is when they are
: encountered.
:
: - And then use a DutchAnalyzer for reading,
: which if I ask "werk" searches for "werk", "werkte" and "gewerkt",
: and also ignores stop words like "en" in the query.
: EnglishAnalyzer would search with "werk" for "werk", "werkes", "werked", ...

that sounds liek a fairly simplistic view of things ... sucessful analysis
tends to require compatible efforts taken when indexing and querying ...
when indexing you know context, and structure; when querying you have much
more limited information to start with.  Most Stemming algorithms i've
seen end to rely more on work done when indexing then work done when
searching -- even if you had an extremely well maintained dictionary based
stemmer, you would probably wind up wanting to do stem normalation when
indexing (as opposed to expansion when searching) to keep your search
times fast.

: - It might seem a bad idea to mix several languages in the same index,
: but in reality few data comes with the meta-data which declares the
: language of the data is written in.

i'm told by the people who seem to know a lot about this that this is
where langauge detection comes ito play .. when indexing documnts, even
without metadata, you tend to have a large neough "chunk" of text to make
assumptions about the language.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 19:19:25 2007
Return-Path: <java-user-return-27960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79813 invoked from network); 9 May 2007 19:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 19:19:24 -0000
Received: (qmail 48076 invoked by uid 500); 9 May 2007 19:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48051 invoked by uid 500); 9 May 2007 19:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48040 invoked by uid 99); 9 May 2007 19:19:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 12:19:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 12:19:16 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 9 May 2007 12:18:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Locking in Lucene 2.1
Date: Wed, 9 May 2007 12:18:54 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278012E58BC@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Locking in Lucene 2.1
Thread-Index: AceSbuJQubiEYTSFSnmUw7AW559WVQ==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 May 2007 19:18:55.0407 (UTC) FILETIME=[E2E513F0:01C7926E]
X-Virus-Checked: Checked by ClamAV on apache.org

I am in the process to migrate from Lucene 2.0 to Lucene 2.1.

>From reading the Changes document I understand that the write locks are
now written into the index folder instead of the java.io.tmpdir.=20

In the "Apache Lucene - Index File Formats" document in section "6.2
Lock File" I read that there is a write lock used to indicate that
another process is writing into the index and that this file is stored
in the java.io.tempdir.

This is confusing to me.  I had the impression all lock files go into
the index folder now.  And using the the java.io.tempdir is only local
and does not support access to shared index folders.

Do I miss something here or is the documentation not updated?

Andreas

 =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 19:30:20 2007
Return-Path: <java-user-return-27961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88558 invoked from network); 9 May 2007 19:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 19:30:20 -0000
Received: (qmail 66107 invoked by uid 500); 9 May 2007 19:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66079 invoked by uid 500); 9 May 2007 19:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66068 invoked by uid 99); 9 May 2007 19:30:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 12:30:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 12:30:12 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HlrrD-0002wL-U9
	for java-user@lucene.apache.org; Wed, 09 May 2007 12:29:51 -0700
Message-ID: <10401149.post@talk.nabble.com>
Date: Wed, 9 May 2007 12:29:51 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
In-Reply-To: <170278.22978.qm@web26001.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mark for the detailed explanation.
So one more question if I may:
How is the list shortened to to include <maxNumTerms> terms only?
In your example you had 2 stop words which of course are not included in the
token stream.
But what happens if you get more than maxNumTerms terms, how are the
maxNumTerms selected from the list?
Thanks.
-- 
View this message in context: http://www.nabble.com/FuzzyLikeThisQuery-what-does-maxNumTerms-mean-tf3716547.html#a10401149
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 20:28:45 2007
Return-Path: <java-user-return-27962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12955 invoked from network); 9 May 2007 20:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 20:28:44 -0000
Received: (qmail 83609 invoked by uid 500); 9 May 2007 20:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83526 invoked by uid 500); 9 May 2007 20:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83482 invoked by uid 99); 9 May 2007 20:28:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:28:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:28:24 -0700
Received: (qmail 30584 invoked from network); 9 May 2007 20:28:02 -0000
Received: from unknown (HELO p54bfca5f.dip.t-dialin.net) ([pbs]695637@[84.191.202.95])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 May 2007 20:28:02 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results
Date: Wed, 9 May 2007 22:27:19 +0200
User-Agent: KMail/1.8.2
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <200705082344.40933@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200705092227.19285@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 09 May 2007 16:17, John Powers wrote:

> Yes, it doesn't work. =C2=A0 =C2=A0 it gives an error modal dialog box th=
at says
> "IMPL".

Is there a more useful error message when you start Luke from the command=20
line and try to open the index?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 20:38:12 2007
Return-Path: <java-user-return-27963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14801 invoked from network); 9 May 2007 20:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 20:38:11 -0000
Received: (qmail 2203 invoked by uid 500); 9 May 2007 20:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2172 invoked by uid 500); 9 May 2007 20:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2092 invoked by uid 99); 9 May 2007 20:38:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:38:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:37:54 -0700
Received: (qmail 2973 invoked from network); 9 May 2007 20:37:33 -0000
Received: from unknown (HELO p54bfca5f.dip.t-dialin.net) ([pbs]695637@[84.191.202.95])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 May 2007 20:37:33 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Locking in Lucene 2.1
Date: Wed, 9 May 2007 22:36:49 +0200
User-Agent: KMail/1.8.2
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E58BC@WDCCPMAIL01.markettools.com>
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E58BC@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705092236.50103@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 09 May 2007 21:18, Andreas Guther wrote:

> Do I miss something here or is the documentation not updated?

Looks like that part of the documentation isn't up-to-date. The file is 
called write.lock and it's stored in the index directory. Could you file 
an issue so the documentation gets updated?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 20:54:48 2007
Return-Path: <java-user-return-27964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21841 invoked from network); 9 May 2007 20:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 20:54:47 -0000
Received: (qmail 44285 invoked by uid 500); 9 May 2007 20:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44258 invoked by uid 500); 9 May 2007 20:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44247 invoked by uid 99); 9 May 2007 20:54:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:54:46 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 13:54:38 -0700
Content-class: urn:content-classes:message
Subject: RE: search problem/odd results
Date: Wed, 9 May 2007 15:53:40 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-ID: <F9E303076B72074AB76B2C8F78952B29456572@bettylou.configureone.net>
In-Reply-To: <200705092227.19285@danielnaber.de>
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-TNEF-Correlator: 
Thread-Topic: search problem/odd results
Thread-Index: AceSeIuczaMybZ+XSIm6d5zOoDN+ggAA48pg
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <200705082344.40933@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net> <200705092227.19285@danielnaber.de>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

java.lang.NoSuchFieldException: IMPL
        at java.lang.Class.getDeclaredField(Unknown Source)
        at org.getopt.luke.Luke.openDirectory(Unknown Source)
        at org.getopt.luke.Luke.openIndex(Unknown Source)
        at org.getopt.luke.Luke.openOk(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown =
Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at thinlet.Thinlet.invokeImpl(Unknown Source)
        at thinlet.Thinlet.invoke(Unknown Source)
        at thinlet.Thinlet.handleMouseEvent(Unknown Source)
        at thinlet.Thinlet.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown =
Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown =
Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown =
Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown =
Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown =
Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)
IMPL

-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: Wednesday, May 09, 2007 3:27 PM
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results

On Wednesday 09 May 2007 16:17, John Powers wrote:

> Yes, it doesn't work. =A0 =A0 it gives an error modal dialog box that =
says
> "IMPL".

Is there a more useful error message when you start Luke from the =
command=20
line and try to open the index?

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 21:10:25 2007
Return-Path: <java-user-return-27965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28587 invoked from network); 9 May 2007 21:10:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 21:10:23 -0000
Received: (qmail 79220 invoked by uid 500); 9 May 2007 21:10:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79192 invoked by uid 500); 9 May 2007 21:10:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79176 invoked by uid 99); 9 May 2007 21:10:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:10:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.32] (HELO smtp001.mail.ukl.yahoo.com) (217.12.11.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 May 2007 14:10:13 -0700
Received: (qmail 89165 invoked from network); 9 May 2007 21:09:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=KLn0yNH07zNVjbayx7TXsoBshvwPDQoh8dz1Bj2ow4ePdp31HSeDD7/HS7vkDJ57wncRx6/0bmnFCcClQMunViW39VQwPgYn7HtyEz3mfjJ/lxzm8wlwizrXe0oa4CQlGcLZNhNA5Wq9IxYoXZ60yvYGYvb6o6N87v1E4RJgnkE=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp001.mail.ukl.yahoo.com with SMTP; 9 May 2007 21:09:51 -0000
X-YMail-OSG: h1thI5IVM1mg3Uz3lNgkv.UqP0mWrw0OHdAPLDmyomSTdghdzlF5k4LYp_zpatss8mflsBQbEQ--
Message-ID: <4642389E.2040900@yahoo.co.uk>
Date: Wed, 09 May 2007 22:09:50 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com> <10401149.post@talk.nabble.com>
In-Reply-To: <10401149.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The shortlisting isn't based on stop words - a score is produced to 
prioritise term selections. The score uses the IDF (inverse document 
frequency) of the original term and mixes in the "edit-distance" for 
each of the fuzzy variations of original terms. Care is taken to ensure 
that in the query produced, fuzzy variants all use the root term's IDF 
(or if the root term is not in the index the average IDF of all of the 
variants is used by each variant). This avoids the rarer variants 
ranking more highly than the source term in query results.

Mark

bhecht wrote:
> Thanks Mark for the detailed explanation.
> So one more question if I may:
> How is the list shortened to to include <maxNumTerms> terms only?
> In your example you had 2 stop words which of course are not included in the
> token stream.
> But what happens if you get more than maxNumTerms terms, how are the
> maxNumTerms selected from the list?
> Thanks.
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 21:21:21 2007
Return-Path: <java-user-return-27966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33573 invoked from network); 9 May 2007 21:21:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 21:21:20 -0000
Received: (qmail 13893 invoked by uid 500); 9 May 2007 21:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13861 invoked by uid 500); 9 May 2007 21:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13845 invoked by uid 99); 9 May 2007 21:21:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:21:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:21:11 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hltad-00064a-Hz
	for java-user@lucene.apache.org; Wed, 09 May 2007 14:20:51 -0700
Message-ID: <10402974.post@talk.nabble.com>
Date: Wed, 9 May 2007 14:20:51 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
In-Reply-To: <4642389E.2040900@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com> <10401149.post@talk.nabble.com> <4642389E.2040900@yahoo.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mark,
I have updated my previous post I guess, before you had a chance to read it.
Can you please re-read my post again?

Thanks
-- 
View this message in context: http://www.nabble.com/FuzzyLikeThisQuery-what-does-maxNumTerms-mean-tf3716547.html#a10402974
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 21:22:41 2007
Return-Path: <java-user-return-27967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34154 invoked from network); 9 May 2007 21:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 21:22:41 -0000
Received: (qmail 16625 invoked by uid 500); 9 May 2007 21:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16335 invoked by uid 500); 9 May 2007 21:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16322 invoked by uid 99); 9 May 2007 21:22:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:22:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:22:33 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l49LMSO16807
	for <java-user@lucene.apache.org>; Wed, 9 May 2007 16:22:28 -0500
Message-ID: <46423B6A.90008@getopt.org>
Date: Wed, 09 May 2007 23:21:46 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <200705082344.40933@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net> <200705092227.19285@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456572@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B29456572@bettylou.configureone.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

John Powers wrote:
> java.lang.NoSuchFieldException: IMPL
>         at java.lang.Class.getDeclaredField(Unknown Source)

That's a strange one ... Which version of Lucene are you using with Luke 
(you can check this in Help -> About box, look for "Lucene version:"). 
Are you running this from Java WebStart? Which version of JDK is this?

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 21:25:16 2007
Return-Path: <java-user-return-27968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35850 invoked from network); 9 May 2007 21:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 21:25:15 -0000
Received: (qmail 22345 invoked by uid 500); 9 May 2007 21:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22305 invoked by uid 500); 9 May 2007 21:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22294 invoked by uid 99); 9 May 2007 21:25:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:25:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:25:07 -0700
Content-class: urn:content-classes:message
Subject: RE: search problem/odd results
Date: Wed, 9 May 2007 16:24:10 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <F9E303076B72074AB76B2C8F78952B29456589@bettylou.configureone.net>
In-Reply-To: <46423B6A.90008@getopt.org>
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-TNEF-Correlator: 
Thread-Topic: search problem/odd results
Thread-Index: AceSgBT+zt4yAN5ASGCiRHsQN1413gAACT+Q
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <200705082344.40933@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net> <200705092227.19285@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456572@bettylou.configureone.net> <46423B6A.90008@getopt.org>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene 1.4 is what I use for the application and how I compile things
But in the help/about it says "null"
And I usually use the webstart, ya.  But I've tried from a downloaded
jar as well.  and I'm using java1.6 from sun


-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org]=20
Sent: Wednesday, May 09, 2007 4:22 PM
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results

John Powers wrote:
> java.lang.NoSuchFieldException: IMPL
>         at java.lang.Class.getDeclaredField(Unknown Source)

That's a strange one ... Which version of Lucene are you using with Luke

(you can check this in Help -> About box, look for "Lucene version:").=20
Are you running this from Java WebStart? Which version of JDK is this?

--=20

Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 21:33:47 2007
Return-Path: <java-user-return-27969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41311 invoked from network); 9 May 2007 21:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 21:33:47 -0000
Received: (qmail 39086 invoked by uid 500); 9 May 2007 21:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39046 invoked by uid 500); 9 May 2007 21:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39031 invoked by uid 99); 9 May 2007 21:33:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:33:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 14:33:38 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l49LXX821658
	for <java-user@lucene.apache.org>; Wed, 9 May 2007 16:33:33 -0500
Message-ID: <46423E06.7000801@getopt.org>
Date: Wed, 09 May 2007 23:32:54 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search problem/odd results
References: <F9E303076B72074AB76B2C8F78952B294564EF@bettylou.configureone.net> <200705082344.40933@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456515@bettylou.configureone.net> <200705092227.19285@danielnaber.de> <F9E303076B72074AB76B2C8F78952B29456572@bettylou.configureone.net> <46423B6A.90008@getopt.org> <F9E303076B72074AB76B2C8F78952B29456589@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B29456589@bettylou.configureone.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

John Powers wrote:
> Lucene 1.4 is what I use for the application and how I compile things
> But in the help/about it says "null"
> And I usually use the webstart, ya.  But I've tried from a downloaded
> jar as well.  and I'm using java1.6 from sun

Ah, all is clear now. Luke will not work with Lucene < 2.0. You should 
simply get the lukeall.jar and start it from cmd-line - and make sure 
that there are no other versions of Lucene jars on the classpath. 
lukeall.jar contains a copy of Lucene 2.1, and it should be able to open 
indexes created with 1.4.x.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 22:34:16 2007
Return-Path: <java-user-return-27970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59339 invoked from network); 9 May 2007 22:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 22:34:15 -0000
Received: (qmail 40230 invoked by uid 500); 9 May 2007 22:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40065 invoked by uid 500); 9 May 2007 22:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40054 invoked by uid 99); 9 May 2007 22:34:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:34:13 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:34:06 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 9 May 2007 15:33:45 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Locking in Lucene 2.1
Date: Wed, 9 May 2007 15:33:44 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278012E59C6@WDCCPMAIL01.markettools.com>
In-Reply-To: <200705092236.50103@danielnaber.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Locking in Lucene 2.1
Thread-Index: AceSefTm+FxlSwEvQ7ObUeY++4naywAEAeIQ
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E58BC@WDCCPMAIL01.markettools.com> <200705092236.50103@danielnaber.de>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 May 2007 22:33:45.0362 (UTC) FILETIME=[1AA6A720:01C7928A]
X-Virus-Checked: Checked by ClamAV on apache.org

I opened an issue: https://issues.apache.org/jira/browse/LUCENE-877


-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: Wednesday, May 09, 2007 1:37 PM
To: java-user@lucene.apache.org
Subject: Re: Locking in Lucene 2.1

On Wednesday 09 May 2007 21:18, Andreas Guther wrote:

> Do I miss something here or is the documentation not updated?

Looks like that part of the documentation isn't up-to-date. The file is=20
called write.lock and it's stored in the index directory. Could you file

an issue so the documentation gets updated?

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 22:36:18 2007
Return-Path: <java-user-return-27971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61035 invoked from network); 9 May 2007 22:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 22:36:18 -0000
Received: (qmail 47932 invoked by uid 500); 9 May 2007 22:36:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47901 invoked by uid 500); 9 May 2007 22:36:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47890 invoked by uid 99); 9 May 2007 22:36:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:36:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:36:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CEC2B5B766; Wed,  9 May 2007 15:35:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C21F47F403
	for <java-user@lucene.apache.org>; Wed,  9 May 2007 15:35:49 -0700 (PDT)
Date: Wed, 9 May 2007 15:35:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
In-Reply-To: <10402974.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0705091532330.17098@hal.rescomp.berkeley.edu>
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com>
 <10401149.post@talk.nabble.com> <4642389E.2040900@yahoo.co.uk>
 <10402974.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have updated my previous post I guess, before you had a chance to read it.
: Can you please re-read my post again?

: Sent from the Lucene - Java Users mailing list archive at Nabble.com.

please do not "update" posts ... independent of any features that third
party companies may provide for archiving java-user@lucene, or exposing
it as a web forum, it is still first and formost a mailing list, and
"updates" to existing messages made through GUIs on those web forums do
not makit it to peoples inboxes.  this not only leads to cofusion for hte
people reading messages as email who don't see your updates, but also for
people reading the version you *did* update who don't understand why the
people replying are answering a differnet question then the one they are
reading.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 22:38:53 2007
Return-Path: <java-user-return-27972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61414 invoked from network); 9 May 2007 22:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 22:38:52 -0000
Received: (qmail 55263 invoked by uid 500); 9 May 2007 22:38:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55230 invoked by uid 500); 9 May 2007 22:38:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55219 invoked by uid 99); 9 May 2007 22:38:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:38:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 May 2007 15:38:45 -0700
Received: (qmail 44390 invoked from network); 9 May 2007 22:38:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=bBBMrxoJp5AnsjyKU6ymEwUiroP4bkH+yyrw+bF++X+6CLNuIqFj31xYkiHshbEntRyJHGcfO8nmQSRTspBR1ThLrAWre45lDpTBcCs9Pn0gmwOKkOC4yHZvJmXbL2INfGFIpwjKdX4lx53ynK2TffSqKO8U3MNRW7WB3xdlOy4=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 9 May 2007 22:38:23 -0000
X-YMail-OSG: CXQ.OPYVM1kQuVaMw6qOlN1aGLeEXlujrUXXni1yDeCmmH9K8mWleOM9b.1dEGoi7gcfRHsgtg--
Message-ID: <46424D60.4090707@yahoo.co.uk>
Date: Wed, 09 May 2007 23:38:24 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com> <10401149.post@talk.nabble.com> <4642389E.2040900@yahoo.co.uk> <10402974.post@talk.nabble.com>
In-Reply-To: <10402974.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bhecht wrote:
> Thanks Mark,
> I have updated my previous post I guess, before you had a chance to read it.
>   

Did you edit your post on Nabble? That edit didn't come through as a 
message to java-user so I didn't see it.
You shouldn't need to call rewrite on your FuzzyLikeThisQuery unless you 
want to pass it to the Highlighter.

As for which is best,  MoreLikeThis or FuzzyLikeThisQuery -it depends. 
Are the records you are trying to match frequently mis-spelt? If so, 
FuzzyLikeThisQuery may provide better results by matching on spelling 
variations. Try both classes and see.  There is no single solution to 
all tasks as it depends on the data and there are various settings on 
both classes which can alter results. Using the Highlighter will show 
you the basis of any matches produced and can help you to see what is 
going on. Having a human-validated collection of matches will be useful 
so you can measure the effectiveness of your choice of algorithm.

Cheers
Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 09 22:39:31 2007
Return-Path: <java-user-return-27973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61554 invoked from network); 9 May 2007 22:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 May 2007 22:39:30 -0000
Received: (qmail 59178 invoked by uid 500); 9 May 2007 22:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59148 invoked by uid 500); 9 May 2007 22:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59133 invoked by uid 99); 9 May 2007 22:39:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:39:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 15:39:20 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HluoF-00082T-Rs
	for java-user@lucene.apache.org; Wed, 09 May 2007 15:38:59 -0700
Message-ID: <10404218.post@talk.nabble.com>
Date: Wed, 9 May 2007 15:38:59 -0700 (PDT)
From: Theodan <dan@theodan.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting on a field that can have null values
In-Reply-To: <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dan@theodan.com
References: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com> <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org



Chris Hostetter wrote:
> 
> 
> : If i rememebr correctly (you'll have to test this) sorting on a field
> : which doesn't exist for every doc does what you would want (docs with
> : values are listed before docs without)
> 
> : The actual behavior is different than described above. I modified
> : TestSort.java:
> 
> : The actual order of the results is: "ZJI". I believe this happens
> because
> : the field string cache 'order' array contains 0's for all the documents
> that
> : don't contain the field and thus sort first.
> 
> i guess wasn't precise enough in that old thread, what i ment was that not
> having a vlaue results in the docs sorting the same as if they had a value
> lower then the lowest existing value -- so they sort at the end of the
> list if you are doing a descending sort, and at the begining of the list
> if you do an ascending sort.  If you want to always have them come "last"
> regardless of order, there is a SortComparator for that purpose in Solr...
> 
> https://issues.apache.org/jira/browse/LUCENE-406
> http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java?view=log
> 
> 

But how can you use both the MissingStringLastComparatorSource and also your
own custom SortComparator (i.e. having a custom getComparable() method)?

I have tried the obvious, which was to make my custom SortComparator extend
MissingStringLastComparatorSource instead of SortComparator.  But then it
seems that my custom getComparable() method is ignored.  The sorting
framework doesn't seem to use the Comparables returned from my
getComparable() method to sort the results; instead, it seems to use the
ScoreDocComparator returned from the newComparator() method of
MissingStringLastComparatorSource.

FYI, my end goal is to be able to sort on a field called "AssetType".  Some
of the docs in the index may be missing this field (and I'd like those docs
to be sorted at the end of the results).  Furthermore, I need a custom
sorting order on the values in this "AssetType" field (first videos, then
articles, then images, etc.).

Here is my custom comparator, after changing it to extend
MissingStringLastComparatorSource (all that I changed was the "extends"
clause; the body remained the same):

======================================================================
private static class AssetTypeSortComparator extends
MissingStringLastComparatorSource /*SortComparator*/ {

	private static final Map ASSET_TYPE_ORDER_MAP = new HashMap();
	static {
		ASSET_TYPE_ORDER_MAP.put("Video", new Integer(0));
		ASSET_TYPE_ORDER_MAP.put("Article", new Integer(1));
		ASSET_TYPE_ORDER_MAP.put("Image", new Integer(2));
	}

	private static final Integer DEFAULT_ORDER = new Integer(3);

	protected Comparable getComparable(String termtext) {
		if (ASSET_TYPE_ORDER_MAP.containsKey(termtext)) {
			return (Integer)ASSET_TYPE_ORDER_MAP.get(termtext);
		}
		else {
			return DEFAULT_ORDER;
		}
	}

}
======================================================================

-Theo
-- 
View this message in context: http://www.nabble.com/Sorting-on-a-field-that-can-have-null-values-tf3568102.html#a10404218
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 01:14:00 2007
Return-Path: <java-user-return-27974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95417 invoked from network); 10 May 2007 01:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 01:13:59 -0000
Received: (qmail 43310 invoked by uid 500); 10 May 2007 01:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43264 invoked by uid 500); 10 May 2007 01:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43253 invoked by uid 99); 10 May 2007 01:13:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 18:13:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 18:13:48 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <384547(1)>; Wed, 9 May 2007 18:13:19 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Wed, 9 May 2007 18:13:17 PDT
To: java-user@lucene.apache.org
Subject: Re: Keyphrase Extraction (via Lingo)
In-reply-to: <07May8.040221pdt."57996"@synergy1.parc.xerox.com> 
References: <363661.83409.qm@web26009.mail.ukl.yahoo.com> <46388994.1000603@gmail.com> <463DCB02.5030305@cs.put.poznan.pl> <07May8.040221pdt."57996"@synergy1.parc.xerox.com>
Comments: In-reply-to Bill Janssen <janssen@parc.com>
    message dated "Tue, 08 May 2007 04:02:14 -0700."
Date: Wed, 9 May 2007 18:13:10 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07May9.181317pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> Dawid Weiss wrote:
> > You could also try splitting the document into paragraphs and use Carrot2's 
> > Lingo algorithm (www.carrot2.org) on a paragraph-level to extract clusters. 
> > Labelling routine in Lingo should extract 'key' phrases; this analysis is 
> > heavily frequency-based, but... you know, you may want to try it.
> 
> Just to make sure I'm following...
> 
> So you're suggesting splitting the document into paragraphs, then
> treating each paragraph as if it were a Carrot2 search result,
> performing the clustering, then looking at the label Lingo chooses for
> each cluster, and treating that label as the "key phrase"?

I tried it.  Not so great results, but perhaps I'm doing it wrong.
Here's my code.  The input file is a text file with an ID number and
one paragraph per (long) line -- standard textual paragraphs.  I'm
running on a corpus of technical papers.

Bill

-----------------------------------------------------------------
import org.carrot2.filter.lingo.common.*;
import org.carrot2.filter.lingo.lsicluster.*;

import java.io.*;

public class test {

    public static void main (String[] argv) {
        DefaultClusteringContext context = new DefaultClusteringContext();
        try {
            BufferedReader r = new BufferedReader(new FileReader(argv[0]));
            String line;
            while ((line = r.readLine()) != null) {
                String[] parts = line.trim().split("\\s");
		// there must be an easier way to split off the first token
		// of a line...
                if (parts.length > 1) {
                    String id = parts[0];
		    // and to glue the other parts together again...
                    String body = parts[1];
                    for (int i = 2;  i < parts.length;  i++) {
                        body = body + " " + parts[i];
                    }
                    context.addSnippet(new Snippet(id, "", body));
                }
            }
        } catch (Exception x) {
            x.printStackTrace(System.err);
        }
        
        context.setQuery("");
        Cluster[] clusters = context.cluster();
        for (int i = 0;  i < clusters.length;  i++) {
            System.out.println("Cluster --");
            String[] labels = clusters[i].getLabels();
            for (int j = 0;  j < labels.length;  j++) {
                System.out.println("    Label:  " + labels[j]);
            }
            Snippet[] snippets = clusters[i].getSnippets();
            System.out.println("    " + snippets.length + " snippets:");
            for (int j = 0;  j < snippets.length;  j++) {
                System.out.println("         " + snippets[j].getSnippetId() +
		" -- " + snippets[j].getText());
            }
        }
    }
}
----------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 01:32:38 2007
Return-Path: <java-user-return-27975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7271 invoked from network); 10 May 2007 01:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 01:32:37 -0000
Received: (qmail 74113 invoked by uid 500); 10 May 2007 01:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74076 invoked by uid 500); 10 May 2007 01:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74061 invoked by uid 99); 10 May 2007 01:32:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 18:32:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.176] (HELO web27315.mail.ukl.yahoo.com) (217.146.177.176)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 May 2007 18:32:30 -0700
Received: (qmail 77668 invoked by uid 60001); 10 May 2007 01:32:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.gr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hZm+0oBdStzV4iDs779jNICA9wgvj4wdqiz7YOb0CRfvJR6JSa+TT48OuOtrx7j0ZR4VeIA/LCXgW+HRUZaFOrdtQ3RDJPEpGf0kUw22yRPLU8WflGUrfvwzzkQh1PmUlyeKyvAK4H9ofr8220yNkdj5BG/5f15IImBX3yUKPNQ=;
X-YMail-OSG: OaU4NNYVM1nfdXgE7O9oKB8dYvpT7RU_owqZUBVlOtWk0HPkjBr8hWphL8kKFmJglEaAGaMKbTZYCL5KVRX5BNFIPmQeKO85Z3deESUPa1ygx2hBO70QTl6Zw9w-
Received: from [83.76.21.159] by web27315.mail.ukl.yahoo.com via HTTP; Thu, 10 May 2007 02:32:08 BST
Date: Thu, 10 May 2007 02:32:08 +0100 (BST)
From: STEFANOS STEFANOS <stefanos888888@yahoo.gr>
Subject: add in an existing document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1111534829-1178760728=:77403"
Content-Transfer-Encoding: 8bit
Message-ID: <848139.77403.qm@web27315.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1111534829-1178760728=:77403
Content-Type: text/plain; charset=iso-8859-7
Content-Transfer-Encoding: 8bit

Hello,
   
      I would like to ask you about the function add of lucene 2.0. When i am trying to add a document in an existed index the index's documents are replaced by the new document. I did it according to the book. 
   
   
  cheers,
   
  Stefanos

 	      
---------------------------------
  Yahoo!
      (spam);  Yahoo! Mail          
 http://login.yahoo.com/config/mail?.intl=gr 
--0-1111534829-1178760728=:77403--

From java-user-return-27976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 05:01:24 2007
Return-Path: <java-user-return-27976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44757 invoked from network); 10 May 2007 05:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 05:01:22 -0000
Received: (qmail 81905 invoked by uid 500); 10 May 2007 05:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81858 invoked by uid 500); 10 May 2007 05:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81847 invoked by uid 99); 10 May 2007 05:01:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 22:01:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 May 2007 22:01:14 -0700
Received: (qmail 2190 invoked by uid 60001); 10 May 2007 05:00:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dEg8nn5OFWqSWp6P3fNxe+T8sTX89SzQwqG0tGdqZ+h/vbKYmnnVySLdMl9VDWJLp8iEq3sfIWwtA1p5h2tV2c4dDojNFjGel72XfHtgR5ixwkoavNa+gIXy6vsUekPcFuu7DdLqiQ2N3V1NhWciX//FWyRQBSKCt6Q4Nrlt7Vo=;
X-YMail-OSG: bwNq4DQVM1lc2QklT6IPP3dZt8CAF_CdW2BU.JO1YVir3dHygPM.g1GiWTWug8AHM8dHQE7f0zdQA3Rk_0PY7KE5N5wzCmJjVqIE8ZDDnm93QCQdTM0-
Received: from [66.108.160.145] by web50308.mail.re2.yahoo.com via HTTP; Wed, 09 May 2007 22:00:53 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Wed, 9 May 2007 22:00:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lock obtain timed out while searching
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <167003.903.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Laxmilal - this could be a left-over lock.  Try removing it "manually" and re-running your search app.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Laxmilal Menaria <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Sent: Wednesday, May 9, 2007 12:26:38 AM
Subject: Lock obtain timed out while searching

Hello everyone,

I am getting the following exception while searching:

Lock obtain timed out: java.io.IOException: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock

I have implemented MultiSearcher only, No other methods are updating/adding
the docs in index, so how it is going ?

Thanks in advance,
Laxmilal




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 05:54:38 2007
Return-Path: <java-user-return-27977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51901 invoked from network); 10 May 2007 05:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 05:54:37 -0000
Received: (qmail 27537 invoked by uid 500); 10 May 2007 05:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27499 invoked by uid 500); 10 May 2007 05:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27336 invoked by uid 99); 10 May 2007 05:54:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 22:54:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 May 2007 22:54:17 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hm1bA-0007qf-Q8
	for java-user@lucene.apache.org; Wed, 09 May 2007 22:53:56 -0700
Message-ID: <10407540.post@talk.nabble.com>
Date: Wed, 9 May 2007 22:53:56 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: FuzzyLikeThisQuery what does maxNumTerms mean
In-Reply-To: <46424D60.4090707@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10396965.post@talk.nabble.com> <170278.22978.qm@web26001.mail.ukl.yahoo.com> <10401149.post@talk.nabble.com> <4642389E.2040900@yahoo.co.uk> <10402974.post@talk.nabble.com> <46424D60.4090707@yahoo.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks again.
I wasn't aware of the problematic part with updating posts. Sorry for that,
and thanks for the answer.
Good day.
-- 
View this message in context: http://www.nabble.com/FuzzyLikeThisQuery-what-does-maxNumTerms-mean-tf3716547.html#a10407540
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 08:31:31 2007
Return-Path: <java-user-return-27978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90255 invoked from network); 10 May 2007 08:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 08:31:30 -0000
Received: (qmail 35492 invoked by uid 500); 10 May 2007 08:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35464 invoked by uid 500); 10 May 2007 08:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35452 invoked by uid 99); 10 May 2007 08:31:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 01:31:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 01:31:21 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id B5C2D21F6E8
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 04:32:46 -0400 (EDT)
Received: from web4.messagingengine.com ([10.202.2.213])
  by compute2.internal (MEProxy); Thu, 10 May 2007 04:31:00 -0400
Received: by web4.messagingengine.com (Postfix, from userid 99)
	id 9A59117DF29; Thu, 10 May 2007 04:30:50 -0400 (EDT)
Message-Id: <1178785850.4695.1189072109@webmail.messagingengine.com>
X-Sasl-Enc: ckyDrUdEVCS59/y6ZphsT69tgAmVidf5uLjZ4xA+Sy9+ 1178785850
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E58BC@WDCCPMAIL01.markettools.com>
   <200705092236.50103@danielnaber.de>
   <3FB08D6A21B3EC4D8749EF6D9E626278012E59C6@WDCCPMAIL01.markettools.com>
Subject: RE: Locking in Lucene 2.1
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E59C6@WDCCPMAIL01.markettools.com>
Date: Thu, 10 May 2007 04:30:50 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Andreas Guther" <Andreas.Guther@markettools.com> wrote:
> I opened an issue: https://issues.apache.org/jira/browse/LUCENE-877

Thanks for opening this issue, Andreas.  I've fixed this in the trunk so
it will be in Lucene 2.2.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 10:35:42 2007
Return-Path: <java-user-return-27979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25464 invoked from network); 10 May 2007 10:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 10:35:41 -0000
Received: (qmail 49226 invoked by uid 500); 10 May 2007 10:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49199 invoked by uid 500); 10 May 2007 10:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49178 invoked by uid 99); 10 May 2007 10:35:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 03:35:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 03:35:32 -0700
Received: from [10.200.1.12] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 468821DB13D
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 03:35:11 -0700 (PDT)
Message-ID: <4642F55E.1070809@affinitycircles.com>
Date: Thu, 10 May 2007 03:35:10 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: query syntax question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have a question about empty fields.  I want to run a query that will 
search against a few particular fields for the query term but then also 
also check to see if a two other fields have any value at all.  i.e., I 
want to search for a set records but don't want to return a record if 
that record has blank first and last name fields.  Any help would be 
greatly appreciated.

Les

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 13:03:08 2007
Return-Path: <java-user-return-27980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70006 invoked from network); 10 May 2007 13:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 13:03:06 -0000
Received: (qmail 79557 invoked by uid 500); 10 May 2007 13:03:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79510 invoked by uid 500); 10 May 2007 13:03:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79499 invoked by uid 99); 10 May 2007 13:03:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 06:03:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 06:02:55 -0700
Received: by ug-out-1314.google.com with SMTP id k40so478812ugc
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 06:02:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rQ/WyHptq/ntkW4fAhZA2WME17HcYoW3d2N7UqaKyIXiKvuT0L1PF4Y2gX7HJorUIvl4V5X8oXWKfocBPg0Q03LPSBT3KFjBtrL9LsCxGJthmJ9jSqK/nwI1x6zAiQWJRT6zhL1pk4nxqWmw69M2r71xKSeqMr6oSJ46bWUHLGg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tmxGhUY+qE0ad8CmVnUSPmcMTVFUXSpZqUe/gguFKGbL+TyWlmah3U3PDQFeFfbB7sLvcRwQ/h6tv1AtmNsVWsqJLSfcE298fJHLDek4et0i/8IY3aPK2IkfIMTbOG+acouB0jcMMwNz+PHvFakMlziAM6adAM8b0wgvOk90QT0=
Received: by 10.82.145.7 with SMTP id s7mr2986388bud.1178802154164;
        Thu, 10 May 2007 06:02:34 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 10 May 2007 06:02:34 -0700 (PDT)
Message-ID: <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>
Date: Thu, 10 May 2007 09:02:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax question
In-Reply-To: <4642F55E.1070809@affinitycircles.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64480_18300099.1178802154122"
References: <4642F55E.1070809@affinitycircles.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64480_18300099.1178802154122
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could create a Lucene Filter that had a bit for each document that
had a first or last name and use that at query time to restrict your
results appropriately. You could create this at startup time or at
query time. See CachingWrapperFilter for a way to cache it.


Another approach would be to add a dummy field to each document,
something like HASFIRSTORLASTNAME. At index time, when
you index a document, if it has a first or last name, put "yes" in the
field. Otherwise, put "no".

Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
query......

You could add as many states to this field as you want.


Erick


On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>
> I have a question about empty fields.  I want to run a query that will
> search against a few particular fields for the query term but then also
> also check to see if a two other fields have any value at all.  i.e., I
> want to search for a set records but don't want to return a record if
> that record has blank first and last name fields.  Any help would be
> greatly appreciated.
>
> Les
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64480_18300099.1178802154122--

From java-user-return-27981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 18:22:46 2007
Return-Path: <java-user-return-27981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 407 invoked from network); 10 May 2007 18:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 18:22:45 -0000
Received: (qmail 57507 invoked by uid 500); 10 May 2007 18:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57479 invoked by uid 500); 10 May 2007 18:22:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57468 invoked by uid 99); 10 May 2007 18:22:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 11:22:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 11:22:34 -0700
Received: by ug-out-1314.google.com with SMTP id k40so538729ugc
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 11:22:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=DGEyasGzt9iqygakMjHvgnoYiow9QtB32IuS5EkgVMDNnvzwpcY0ACyPOuqppa/SGqNq+ygeCIuFh8xdjZLQngZgFo0XzmSe6WYT8P0DPv4U5KbHTL0EjEAU8djE71IiwctCaak3F4Kr0coew/duM27WUJMKwuwQG3z+gC4qrF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=kbhCP7wVsk6SUzlPmlpI0LALW5afmjNo4s+a4mAT1/8qfgnQcwXFwExGSXsAc0bJ+rKAHtncejClWfjIs2JsEPIcc+TxwXvtcgjdFgVlMRKydIveCiwi3iWnxDzIT8tz6uZwlYRU8Tu+nbIDsVDpU6zdBaVtKlBjsfAxrtLwRQ4=
Received: by 10.66.243.2 with SMTP id q2mr2244839ugh.1178821333362;
        Thu, 10 May 2007 11:22:13 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j33sm4753380ugc.2007.05.10.11.22.10;
        Thu, 10 May 2007 11:22:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: optimization behaviour
Date: Thu, 10 May 2007 20:21:05 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I really want to use document numbers as a secondary key in my object  
storage. If I got it all right, the main problem is deleted documents  
and optimization. Are there any other issues?

All my tests tells me optimization does this:

Legend:
action
docNum	doc.toString()

> for (int i=0; i<4; i++) indexWriter.add(documentFactory(i);
> 0	Document<stored/uncompressed,indexed<f:0>>
> 1	Document<stored/uncompressed,indexed<f:1>>
> 2	Document<stored/uncompressed,indexed<f:2>>
> 3	Document<stored/uncompressed,indexed<f:3>>
>
> indexReader.deleteDocument(1);
> 0	Document<stored/uncompressed,indexed<f:0>>
> 1	DELETED
> 2	Document<stored/uncompressed,indexed<f:2>>
> 3	Document<stored/uncompressed,indexed<f:3>>
>
> indexWriter.add(documentFactory(4);
> 0	Document<stored/uncompressed,indexed<f:0>>
> 1	DELETED
> 2	Document<stored/uncompressed,indexed<f:2>>
> 3	Document<stored/uncompressed,indexed<f:3>>
> 4	Document<stored/uncompressed,indexed<f:4>>
>
> indexWriter.optimize();
> 0	Document<stored/uncompressed,indexed<f:0>>
> 1	Document<stored/uncompressed,indexed<f:2>>
> 2	Document<stored/uncompressed,indexed<f:3>>
> 3	Document<stored/uncompressed,indexed<f:4>>

Given this is true at all times, would it not be fairly easy to  
inspect the index prior to optimization in order to find out how  
document numbers will change during optimization?

It might end up beeing really expensive to update virtually all  
references to documents in the object storage, and the current thread  
on update/replace document on the dev-list mde me look in to the  
problem.

I don't know too much about the file format and SegementMerger (as  
far as I know, this is the class that handle optimization), but what  
is it that makes it so hard to insert a document at the position of a  
deleted one? Tracing the code a bit gave me the feeling it should be  
possible to make exceptions for deleted documents. Something like an  
alternative merge policy (or so) for segments containing the document  
to be assigned specific document numbers. Or? If it's not a waste of  
time, I'd be happy to give it a try.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 18:40:06 2007
Return-Path: <java-user-return-27982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3428 invoked from network); 10 May 2007 18:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 18:40:04 -0000
Received: (qmail 85350 invoked by uid 500); 10 May 2007 18:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85301 invoked by uid 500); 10 May 2007 18:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85290 invoked by uid 99); 10 May 2007 18:40:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 11:40:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 11:39:56 -0700
Received: by wr-out-0506.google.com with SMTP id 68so689257wra
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 11:39:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=U+O73BFbR2r8gZ7ZgvFUe8MjIg4oy5+YkSiIGnkXznPSC1eTYJU2IKZ84UaL9Y+kAlSkUJxHHq9eWCnZbf1FiUlLnuiYW/vITpV472hPojsv+NuXf2TfSTjy+JvCH/i1ikAQ+AmjHCLZu4Kbk2fWVsAhWXmMc+qadbcQ6HmXOY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FPLgDZwqBtKifbMO6sVeRO5poGAFJs+4eaUm6zgjL14WsviE9GHl0gHzjeC3DSNxSmaZv5CbSKvv2/GdGH0G5yjCVlU05M2Q15rwsKWjHqKCLAmZ5rHfuYuyNDa/cJB1Mq+LRPTTI+lUDXKygSp2uXhk721lA60h1utInMy7UuU=
Received: by 10.114.195.19 with SMTP id s19mr646538waf.1178822375032;
        Thu, 10 May 2007 11:39:35 -0700 (PDT)
Received: by 10.114.136.13 with HTTP; Thu, 10 May 2007 11:39:34 -0700 (PDT)
Message-ID: <52c3ddca0705101139j4d41f5cbx6c7e198e341d8db1@mail.gmail.com>
Date: Thu, 10 May 2007 20:39:35 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Stop words (how to create ideal set of stop words?)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_144031_30309680.1178822375000"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_144031_30309680.1178822375000
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Can anybody point me to some references how to create an ideal set of stop
words? I konw that this is more like a theoretical question but how do
Luceners determine which words shuold be excluded when creating Analyzers
for a new languages? And which technique was used for validation of stop
word lists in current Analyzers?

More specificaly I am interested in situations when there is a need to build
a search engine around specific corpus (for example when we need to search
set of articles related to programming languages only). Given a specific
corpus is there any recommended technique of stop words derivation?

Thanks,
Lukas

------=_Part_144031_30309680.1178822375000--

From java-user-return-27983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 19:18:25 2007
Return-Path: <java-user-return-27983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13155 invoked from network); 10 May 2007 19:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 19:18:22 -0000
Received: (qmail 38126 invoked by uid 500); 10 May 2007 19:18:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38092 invoked by uid 500); 10 May 2007 19:18:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38081 invoked by uid 99); 10 May 2007 19:18:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:18:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:18:15 -0700
Received: from [10.200.1.12] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 1ECC31DB143
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 12:17:55 -0700 (PDT)
Message-ID: <46436FE2.6050300@affinitycircles.com>
Date: Thu, 10 May 2007 12:17:54 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: query syntax question
References: <4642F55E.1070809@affinitycircles.com> <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>
In-Reply-To: <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I like the idea of the filter since I am making heavy use of filters for 
this particular query, but how would one go about constructing it 
efficiently at query time?  All I can see is hacking around not being 
able to use the * as the first character.

Les

Erick Erickson wrote:

> You could create a Lucene Filter that had a bit for each document that
> had a first or last name and use that at query time to restrict your
> results appropriately. You could create this at startup time or at
> query time. See CachingWrapperFilter for a way to cache it.
>
>
> Another approach would be to add a dummy field to each document,
> something like HASFIRSTORLASTNAME. At index time, when
> you index a document, if it has a first or last name, put "yes" in the
> field. Otherwise, put "no".
>
> Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
> query......
>
> You could add as many states to this field as you want.
>
>
> Erick
>
>
> On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>
>>
>> I have a question about empty fields.  I want to run a query that will
>> search against a few particular fields for the query term but then also
>> also check to see if a two other fields have any value at all.  i.e., I
>> want to search for a set records but don't want to return a record if
>> that record has blank first and last name fields.  Any help would be
>> greatly appreciated.
>>
>> Les
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 19:27:17 2007
Return-Path: <java-user-return-27984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28046 invoked from network); 10 May 2007 19:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 19:27:16 -0000
Received: (qmail 56837 invoked by uid 500); 10 May 2007 19:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56799 invoked by uid 500); 10 May 2007 19:27:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56788 invoked by uid 99); 10 May 2007 19:27:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:27:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:27:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 720985B773; Thu, 10 May 2007 12:26:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 652FE7F403
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 12:26:48 -0700 (PDT)
Date: Thu, 10 May 2007 12:26:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting on a field that can have null values
In-Reply-To: <10404218.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0705101212490.11175@hal.rescomp.berkeley.edu>
References: <e994873a0704121324t4c427cb8jb916197c639d3a80@mail.gmail.com>
 <Pine.LNX.4.58.0704121502510.11112@hal.rescomp.berkeley.edu>
 <10404218.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: But how can you use both the MissingStringLastComparatorSource and also your
: own custom SortComparator (i.e. having a custom getComparable() method)?
:
: I have tried the obvious, which was to make my custom SortComparator extend
: MissingStringLastComparatorSource instead of SortComparator.  But then it
: seems that my custom getComparable() method is ignored.  The sorting

well, yes that's true.  getComparable is an abstract method in
SortComparator so that subclasses of SortComparator can efinte how the
newComparator method will behave ... if you don't subcalss SortComparator
getComparable has no meaning.

(SortComparator is an instance of SortComparatorSource, but that doesn't
mean all other instances of SortComparatorSource -- like
MissingStringLastComparatorSource -- have any notion of APIs introduced in
SortComparator)

It didn't occur to me beofre that you were writing a custom SortComparator
... skimming the code for SortComparator and FieldCache briefly there
seems to be a limitation/feature (depending on how you look at it)
such that getComparable(null) is never called to decide what do do with
the null values -- it just assumes you want a null Comparable as well.

: FYI, my end goal is to be able to sort on a field called "AssetType".  Some
: of the docs in the index may be missing this field (and I'd like those docs
: to be sorted at the end of the results).  Furthermore, I need a custom
: sorting order on the values in this "AssetType" field (first videos, then
: articles, then images, etc.).

Frankly, My advice to you is to "encode" the AssetType field into some new
"SortableAssetType" field when you index your docs -- the code to do that
is not only easier to udnerstand then writiting a custom
SortComparator or SortComparatorSource but it's also going to be a lot
faster ... you do a little more work when indexing, and you make
searching/sortign a lot more efficient.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 19:29:05 2007
Return-Path: <java-user-return-27985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28388 invoked from network); 10 May 2007 19:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 19:29:04 -0000
Received: (qmail 62248 invoked by uid 500); 10 May 2007 19:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62208 invoked by uid 500); 10 May 2007 19:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62191 invoked by uid 99); 10 May 2007 19:29:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:29:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:28:56 -0700
Received: by py-out-1112.google.com with SMTP id a25so560285pyi
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 12:28:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=matBT6cmQdW2NYjiES1q9NFv2OURaRhNa0p/Jg75fLIUzgDKdpQPIocNsOwpChhxIgLzDXwzvaiO3rimPEaKCktjFHwXNOHd/tyuO+4lCIeBWDKNkfTdUQRd8Y65SMpoGDGBmXKKmsxygCAFt9U1LCa288AnxNumH2ugqjtFJGY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bEE78w5G2MZcKysW5x0dIDb0TCrgWjTAXkjV+XYSmgXOSGf5KZwCz74ZrawA7tvDdjSgsmadQMh8ntv6iKglDyJsZNFmZz0ml3Z4FnB16k84TnbFj4oAxDa01uyVGsjexsvT/GUUWrvo4jfalKdIkCHXPaLoi79UoGKdg7W3DRM=
Received: by 10.35.72.1 with SMTP id z1mr3501928pyk.1178825315520;
        Thu, 10 May 2007 12:28:35 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 10 May 2007 12:28:35 -0700 (PDT)
Message-ID: <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
Date: Thu, 10 May 2007 15:28:35 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: optimization behaviour
In-Reply-To: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
X-Google-Sender-Auth: 9aa8ffd4a0b486ef
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/10/07, karl wettin <karl.wettin@gmail.com> wrote:
> I really want to use document numbers as a secondary key in my object
> storage. If I got it all right, the main problem is deleted documents
> and optimization. Are there any other issues?

Deleted documents are removed on segment merges (for documents marked
as deleted in those segments).

> Given this is true at all times, would it not be fairly easy to
> inspect the index prior to optimization in order to find out how
> document numbers will change during optimization?

Yes.

> I don't know too much about the file format and SegementMerger (as
> far as I know, this is the class that handle optimization), but what
> is it that makes it so hard to insert a document at the position of a
> deleted one?

Due to the nature of an inverted index, it's impossible w/o going over
the complete index looking for all references to that docid.

*but*, that happens anyway during segment merges, so it should be
possible at that time to index a new document in the place of the old.
 At this point, I'm not sure if the complexity involved is worth it to
be in Lucene core, but I'll keep an open mind.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 19:30:27 2007
Return-Path: <java-user-return-27986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30889 invoked from network); 10 May 2007 19:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 19:30:25 -0000
Received: (qmail 65929 invoked by uid 500); 10 May 2007 19:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65895 invoked by uid 500); 10 May 2007 19:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65884 invoked by uid 99); 10 May 2007 19:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:30:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:30:18 -0700
Received: by py-out-1112.google.com with SMTP id a25so560699pyi
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 12:29:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=LJFovz1/UUkr96CnZ1n6/4r8I+/1rajV5fLgUXkIOHNtDe77Zpv1aA39i4RtMwqHKgAV3tX+nWyuqTE8LQeICDc8L/BRVr8WupAvJJDZsll5CoZUm27eesiFeCcJ+JHOpQgXo0VQ/Sis1CtEMhW1g3dp6cOWuuM8OYu7Mkw/sXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dCdXwybH0Q4bIDwk94PK/lMMeK92PKLZ3kdZBGzlfE10OKEmdleqwQYyx1R3UHMO1GDfg5n+40b9J489kaz9rNo7snRQtkGb/GqSnFo7SCWEH3o0VwkfC8hmfdyPf47nepvzyZFP6T5HdIkIf0hyBfdq6Op/mZ8bC+/z+TBSXsY=
Received: by 10.35.106.1 with SMTP id i1mr3586762pym.1178825397652;
        Thu, 10 May 2007 12:29:57 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 10 May 2007 12:29:57 -0700 (PDT)
Message-ID: <c68e39170705101229t74899e0ej3d017b44f0d4a252@mail.gmail.com>
Date: Thu, 10 May 2007 15:29:57 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: optimization behaviour
In-Reply-To: <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
	 <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
X-Google-Sender-Auth: 34e34ec39c5f9cfb
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/10/07, Yonik Seeley <yonik@apache.org> wrote:
> Deleted documents are removed on segment merges (for documents marked
> as deleted in those segments).

Of course, that doesn't have to be the case.  It would be a trivial
change to merge segments and not remove the deleted docs.  That
usecase could be useful in conjunction with ParallelReader.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 19:57:59 2007
Return-Path: <java-user-return-27987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44068 invoked from network); 10 May 2007 19:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 19:57:57 -0000
Received: (qmail 12462 invoked by uid 500); 10 May 2007 19:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12431 invoked by uid 500); 10 May 2007 19:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12420 invoked by uid 99); 10 May 2007 19:57:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:57:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 12:57:48 -0700
Received: by py-out-1112.google.com with SMTP id a25so568544pyi
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 12:57:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JPlluMEOo3jMRlleVJIdMZQ1NqlhBaWdktZruQUyYiI7Dc4akFK+RbXPV/SCrg7YrGzdhj11em6eyht1IGLFBO6b6xViFZraVhhURU6yP5yCUWMz28scKMJF1ydAm4Xd2sWGhJl72SzoRZgpRoN1kgE+wdVeJacUDBvRWIS5Iz0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J+JG/+xR1+oKDU1mjkaOFO0qsdfZmlZWjBXpEu+B69NHGEwi9neoZnnKhsgrdKJmcYhicxmVNrgxHJZZ0gD9c/6kD4N7eQ63wDcDJWHkUAv1l7JcrftPoDJYTcn4UrMTTX7+voolpmhFLa1d05Zf1V7xdYq/MQdjAa/7zgp4Iy4=
Received: by 10.65.133.8 with SMTP id k8mr3945982qbn.1178827044672;
        Thu, 10 May 2007 12:57:24 -0700 (PDT)
Received: by 10.65.150.14 with HTTP; Thu, 10 May 2007 12:57:24 -0700 (PDT)
Message-ID: <e994873a0705101257u6762f49cof80317f00fb287de@mail.gmail.com>
Date: Thu, 10 May 2007 15:57:24 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: optimization behaviour
In-Reply-To: <c68e39170705101229t74899e0ej3d017b44f0d4a252@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1794_17820690.1178827044469"
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
	 <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
	 <c68e39170705101229t74899e0ej3d017b44f0d4a252@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1794_17820690.1178827044469
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>Of course, that doesn't have to be the case.  It would be a trivial
>change to merge segments and not remove the deleted docs.  That
>usecase could be useful in conjunction with ParallelReader.

If the behavior of deleted docs during merging or optimization ever changes,
please make this configurable. Our application uses the Lucene docid as a
key into our numeric values 'extension' file, and it depends on the simple
behavior described in the previous posts.

Thanks,
Peter


On 5/10/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 5/10/07, Yonik Seeley <yonik@apache.org> wrote:
> > Deleted documents are removed on segment merges (for documents marked
> > as deleted in those segments).
>
> Of course, that doesn't have to be the case.  It would be a trivial
> change to merge segments and not remove the deleted docs.  That
> usecase could be useful in conjunction with ParallelReader.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1794_17820690.1178827044469--

From java-user-return-27988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 20:25:53 2007
Return-Path: <java-user-return-27988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51626 invoked from network); 10 May 2007 20:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 20:25:52 -0000
Received: (qmail 72090 invoked by uid 500); 10 May 2007 20:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72056 invoked by uid 500); 10 May 2007 20:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72027 invoked by uid 99); 10 May 2007 20:25:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:25:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:25:44 -0700
Received: by ug-out-1314.google.com with SMTP id k40so560588ugc
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 13:25:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CMYZ8J9B/feKmS/ZEpJQMuPNQLs7aIFrS8/SDMkMOgZlhtIFbVj2DHqz27yaPjZS3JVhB0ZEnu1e6VaKNE0UXbm5UumWmywXWRHD52QMx7EA17TOQxV/p7jII7GXe9Nna+KeH6myGAtTzIRHhZpEOcM6Ufhx40KoRqq5YQfal+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=YLq1MNYsSt7K1BRLqIEk7njVnpI675nqSJXemXDof5KgO1rvC6F7gfTugap0JnPlxiEnRWnIvJAvsPhtebuLslI2ybUtR1OQKamzWfKofjfdwj2otCfZob3AXV3bsVhpJErKpHNPhRgb+8fojvmDbXHZCRlhvQiHyc85TDyGSN8=
Received: by 10.67.32.19 with SMTP id k19mr2287202ugj.1178828723221;
        Thu, 10 May 2007 13:25:23 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id k30sm4981834ugc.2007.05.10.13.25.19;
        Thu, 10 May 2007 13:25:21 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com> <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <242AB84B-CF70-417D-8716-74CA9E54FA28@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: optimization behaviour
Date: Thu, 10 May 2007 22:24:13 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 maj 2007 kl. 21.28 skrev Yonik Seeley:

> Deleted documents are removed on segment merges (for documents marked
> as deleted in those segments).

> Due to the nature of an inverted index, it's impossible w/o going over
> the complete index looking for all references to that docid.

What about alternative solutions to avoid change of document numbers?  
That would be an alternative solution for me. Perhaps something like  
adding dummy documents, marking them deleted even after merge or so?  
What would the effects or implications be?

I'll probably just hack something in there, but would of course  
welcome a discussion on some sort of policy interface design.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 20:30:17 2007
Return-Path: <java-user-return-27989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54724 invoked from network); 10 May 2007 20:30:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 20:30:17 -0000
Received: (qmail 82481 invoked by uid 500); 10 May 2007 20:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82436 invoked by uid 500); 10 May 2007 20:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82425 invoked by uid 99); 10 May 2007 20:30:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:30:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:30:08 -0700
Received: from [10.200.1.12] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id CF5321DB144
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 13:29:47 -0700 (PDT)
Message-ID: <464380BB.2080200@affinitycircles.com>
Date: Thu, 10 May 2007 13:29:47 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: query syntax question
References: <4642F55E.1070809@affinitycircles.com> <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com> <46436FE2.6050300@affinitycircles.com>
In-Reply-To: <46436FE2.6050300@affinitycircles.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Would a good solution be to insert a secret string into blank fields 
that represents blank.  That way you could search for:

firstname:(-Xd8fgrSjg) lastname:(-Xd8fgrSjg) some query string

Les

Les Fletcher wrote:

> I like the idea of the filter since I am making heavy use of filters 
> for this particular query, but how would one go about constructing it 
> efficiently at query time?  All I can see is hacking around not being 
> able to use the * as the first character.
>
> Les
>
> Erick Erickson wrote:
>
>> You could create a Lucene Filter that had a bit for each document that
>> had a first or last name and use that at query time to restrict your
>> results appropriately. You could create this at startup time or at
>> query time. See CachingWrapperFilter for a way to cache it.
>>
>>
>> Another approach would be to add a dummy field to each document,
>> something like HASFIRSTORLASTNAME. At index time, when
>> you index a document, if it has a first or last name, put "yes" in the
>> field. Otherwise, put "no".
>>
>> Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
>> query......
>>
>> You could add as many states to this field as you want.
>>
>>
>> Erick
>>
>>
>> On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>>
>>>
>>> I have a question about empty fields.  I want to run a query that will
>>> search against a few particular fields for the query term but then also
>>> also check to see if a two other fields have any value at all.  i.e., I
>>> want to search for a set records but don't want to return a record if
>>> that record has blank first and last name fields.  Any help would be
>>> greatly appreciated.
>>>
>>> Les
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 20:59:42 2007
Return-Path: <java-user-return-27990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60775 invoked from network); 10 May 2007 20:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 20:59:41 -0000
Received: (qmail 23089 invoked by uid 500); 10 May 2007 20:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23063 invoked by uid 500); 10 May 2007 20:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23052 invoked by uid 99); 10 May 2007 20:59:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:59:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 13:59:32 -0700
Received: by ug-out-1314.google.com with SMTP id k40so566072ugc
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 13:59:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=m3LzY8T4U/N2GLIuh2ed/1jQXek/+duXvDgT99LtFkImcLHwKrFW6NsQ+IQnw0DWvn9uEmtXRXcDITakvNr5zAUivL6CXGk6Wsn0sPgN2wdobQvbxEraVXOLNK3F7m8/B+3Xio5bjXIFz20lmS2hD0wAufrvaC6lrKjDoh1ade0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=IsZVAnfyX8Yr28x4nXaGlHGLm6XFeE/+4h7T8n/08nTQw1yjWYnyIXY0MyTpan5oaRmgrzM5uvxY4C26QUqZ0CJViSEdhXMoOiS+EDBADzKWkiKDpm1H5TKVCodQy7nhFMEvK9JMMphR95mdehen4W4ld3F/m5DWh7M1cRcPs5E=
Received: by 10.67.93.7 with SMTP id v7mr2323420ugl.1178830751162;
        Thu, 10 May 2007 13:59:11 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id j34sm4971679ugc.2007.05.10.13.58.57;
        Thu, 10 May 2007 13:59:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <52c3ddca0705101139j4d41f5cbx6c7e198e341d8db1@mail.gmail.com>
References: <52c3ddca0705101139j4d41f5cbx6c7e198e341d8db1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <18AFFB09-E691-4083-825C-FDAA4036F580@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Stop words (how to create ideal set of stop words?)
Date: Thu, 10 May 2007 22:57:33 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 maj 2007 kl. 20.39 skrev Lukas Vlcek:

> Can anybody point me to some references how to create an ideal set  
> of stop
> words? I konw that this is more like a theoretical question but how do
> Luceners determine which words shuold be excluded when creating  
> Analyzers
> for a new languages?

The idea with stop words is to keep the index as small as possible  
without major loss of features, thus they ought to be frequently  
occuring words with little or no semantic meaning. What these words  
are really depends on language, corpus, et c.

> And which technique was used for validation of stop
> word lists in current Analyzers?

My guess is that they are manually choosen from a corpus term  
frequency vector.

> More specificaly I am interested in situations when there is a need  
> to build
> a search engine around specific corpus (for example when we need to  
> search
> set of articles related to programming languages only). Given a  
> specific
> corpus is there any recommended technique of stop words derivation?

If you have no knowledge of the language for wich you wish to produce  
stop words, then it will be fairly hard to know what to consider a  
stop word. You might be able to consider it as a text classification  
problem. Feature/attribute selection for classifiers is a well  
researched subject. Weka, Yale, R, et c are all tools that might help  
you. But I honestly think no matter how you turn and twist the data,  
manually choosing the stop words is the way to go.


-- 
karl




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 21:05:25 2007
Return-Path: <java-user-return-27991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62502 invoked from network); 10 May 2007 21:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 21:05:22 -0000
Received: (qmail 30838 invoked by uid 500); 10 May 2007 21:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30529 invoked by uid 500); 10 May 2007 21:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30517 invoked by uid 99); 10 May 2007 21:05:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:05:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:05:14 -0700
Received: by mu-out-0910.google.com with SMTP id i10so401089mue
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 14:04:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P0+lD4QU8q3H/y90PDLhWsCxexZf5a6PPtOP7k+90BGcRIPwrGuJVgUo9KKXJXWEkWQSc8HLKdXs3rRKvQYGTqGT5nYukPTj52hTNUdRHh/pDuGZgY3j++BpfFYvtcJP7AYVKSZRK0b0r0mmU2CcY0Sg1GxOf6T9y1Lz5ye11EQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j8qAl6x3AJ23ZO/uurerqn0SZVca+APaO+wc9LRWkvtOgiq/wiFtme4sH45TqJzOGW5jFT7ucL4+wg/DEd1WKVXleB/cc0rivhmHgkdG+ytLmgu5xuSm3/0rIMsRTy292pQV1nGVMFWUdXXY58mKbAsTu8l7aToybWY1eOkhaoo=
Received: by 10.82.156.12 with SMTP id d12mr3889215bue.1178831091977;
        Thu, 10 May 2007 14:04:51 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 10 May 2007 14:04:51 -0700 (PDT)
Message-ID: <359a92830705101404x427b6d1cj6a07ca6e6ceadae9@mail.gmail.com>
Date: Thu, 10 May 2007 17:04:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax question
In-Reply-To: <46436FE2.6050300@affinitycircles.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68717_20893377.1178831091904"
References: <4642F55E.1070809@affinitycircles.com>
	 <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>
	 <46436FE2.6050300@affinitycircles.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68717_20893377.1178831091904
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was going to suggest something about TermEnum/TermDocs, but
upon reflection that doesn't work so well because you have to
enumerate all the terms over all the docs for a field. Ouch.

But one could combine the two approaches. Don't index
any "special" values in your firstname or lastname fields.
I suspect this will hurt you down the road...

Instead, ONLY for those documents that DO have either a first
or last name, index an orthogonal field, HASNAMES with
a single value of "yes" or something. Now you can construct
your filter efficiently by enumerating the HASNAMES terms/docs
by only enumerating a single term/value.

Depending upon how big your index is, you might be able to
get away with the termenum/terndocs approach by constructing
your filter at start-up time and caching it away somewhere...

You *might* also be able to do something at startup time like
for (each document in the index) {
   get the firstname and lastname. If both null, set your filter bit
}

If you use the lazy loading, you may be able to do this without
loading all of every document....

I'm curious to know what you settle on and how it works....

Does this make sense in your application?

Erick

On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>
> I like the idea of the filter since I am making heavy use of filters for
> this particular query, but how would one go about constructing it
> efficiently at query time?  All I can see is hacking around not being
> able to use the * as the first character.
>
> Les
>
> Erick Erickson wrote:
>
> > You could create a Lucene Filter that had a bit for each document that
> > had a first or last name and use that at query time to restrict your
> > results appropriately. You could create this at startup time or at
> > query time. See CachingWrapperFilter for a way to cache it.
> >
> >
> > Another approach would be to add a dummy field to each document,
> > something like HASFIRSTORLASTNAME. At index time, when
> > you index a document, if it has a first or last name, put "yes" in the
> > field. Otherwise, put "no".
> >
> > Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
> > query......
> >
> > You could add as many states to this field as you want.
> >
> >
> > Erick
> >
> >
> > On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
> >
> >>
> >> I have a question about empty fields.  I want to run a query that will
> >> search against a few particular fields for the query term but then also
> >> also check to see if a two other fields have any value at all.  i.e., I
> >> want to search for a set records but don't want to return a record if
> >> that record has blank first and last name fields.  Any help would be
> >> greatly appreciated.
> >>
> >> Les
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68717_20893377.1178831091904--

From java-user-return-27992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 21:07:37 2007
Return-Path: <java-user-return-27992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62860 invoked from network); 10 May 2007 21:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 21:07:36 -0000
Received: (qmail 33708 invoked by uid 500); 10 May 2007 21:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33665 invoked by uid 500); 10 May 2007 21:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33654 invoked by uid 99); 10 May 2007 21:07:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:07:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 May 2007 14:07:28 -0700
Received: (qmail 77041 invoked from network); 10 May 2007 21:07:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=fbKQkYGtLscwtOJyw5OjFaDhDzB/2QC+kS/Nvi2WsiXaRUiOwqwYpg0t5EjYmutfZ2TMZ5NRHezsdUPVbRn99tf8/MysbO1TzZinXph1B880E5cQT1k1gBKF6qw57rcDPdW/kRggxVL+RRfGHLCmyZySPdqnHjFAw/i7XGsq4QY=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 10 May 2007 21:07:06 -0000
X-YMail-OSG: vSrviLkVM1nOM2Ds5mD1frBJSfxisV7oLWAeENd5y_Wz4lyfYVv90tHXjKlvkOaZMG3tTVQzJrjRwihxIsJSkXEZdutjSLN9FOnmncKg9ihqGHrISrdRu9qbdTs-
Message-ID: <46438979.5080904@yahoo.co.uk>
Date: Thu, 10 May 2007 22:07:05 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: query syntax question
References: <4642F55E.1070809@affinitycircles.com> <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com> <46436FE2.6050300@affinitycircles.com> <464380BB.2080200@affinitycircles.com>
In-Reply-To: <464380BB.2080200@affinitycircles.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here's a way to do it using the XML query parser in contrib....
1) Create this query.xsl file (note use of cached double negative filter)

<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/Document">
<FilteredQuery>
    <Query>
        <UserQuery><xsl:value-of select="query"/></UserQuery>
    </Query>
    <Filter>
        <CachedFilter>
            <BooleanFilter>
                <Clause occurs="mustNot">
                    <RangeFilter fieldName="surname" lowerTerm="a" 
upperTerm="z"/>
                </Clause>
                <Clause occurs="mustNot">
                    <RangeFilter fieldName="forename" lowerTerm="a" 
upperTerm="z"/>
                </Clause>
            </BooleanFilter>
        </CachedFilter>
    </Filter>
</FilteredQuery>
</xsl:template>
</xsl:stylesheet> 

2) Query as follows:
        //Setup test data
        Analyzer analyzer=new WhitespaceAnalyzer();       
        RAMDirectory rd=new RAMDirectory();
        IndexWriter w=new IndexWriter(rd,new WhitespaceAnalyzer(),true);
        Document d=new Document();
        d.add(new Field("contents","foo 1- must not 
match",Field.Store.YES,Field.Index.TOKENIZED));
        d.add(new 
Field("surname","smith",Field.Store.YES,Field.Index.TOKENIZED));
        w.addDocument(d);
       
        d=new Document();
        d.add(new Field("contents","foo 2- must not 
match",Field.Store.YES,Field.Index.TOKENIZED));
        d.add(new 
Field("forename","fred",Field.Store.YES,Field.Index.TOKENIZED));
        w.addDocument(d);
       
        d=new Document();
        d.add(new Field("contents","foo 3- must not 
match",Field.Store.YES,Field.Index.TOKENIZED));
        d.add(new 
Field("forename","fred",Field.Store.YES,Field.Index.TOKENIZED));
        d.add(new 
Field("surname","smith",Field.Store.YES,Field.Index.TOKENIZED));
        w.addDocument(d);
       
        d=new Document();
        d.add(new Field("contents","foo 4- must 
match",Field.Store.YES,Field.Index.TOKENIZED));
        w.addDocument(d);
        w.close();
       
        IndexSearcher searcher=new IndexSearcher(rd);
       
        //one-off setup - store these
        QueryTemplateManager qtm=new QueryTemplateManager(
                TestXml.class.getResourceAsStream("query.xsl"));
        CorePlusExtensionsParser cp = new CorePlusExtensionsParser(analyzer,
                new QueryParser("contents",analyzer));
       
         //get the user form input
        String queryString="foo";
        Properties userInput=new Properties();
        userInput.setProperty("query",queryString);

//        Transform the user input into a Lucene XML query, then pass to 
parser
        Query 
q=cp.getQuery(qtm.getQueryAsDOM(userInput).getDocumentElement());
       
        Hits h = searcher.search(q);
        for (int i = 0; i < h.length(); i++)
        {
            d=h.doc(i);
            System.out.println(d.get("contents"));
        }

Cheers
Mark




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 21:08:12 2007
Return-Path: <java-user-return-27993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62994 invoked from network); 10 May 2007 21:08:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 21:08:11 -0000
Received: (qmail 35403 invoked by uid 500); 10 May 2007 21:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35359 invoked by uid 500); 10 May 2007 21:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35348 invoked by uid 99); 10 May 2007 21:08:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:08:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bbrown@botspiritcompany.com designates 216.154.214.159 as permitted sender)
Received: from [216.154.214.159] (HELO botspiritcompany.com) (216.154.214.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:08:04 -0700
Received: from www.botspiritcompany.com (botspiritcompany.com [127.0.0.1])
	by botspiritcompany.com (8.13.1/8.13.1) with ESMTP id l4AL9sQY006135
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 17:09:54 -0400
From: "bbrown" <bbrown@botspiritcompany.com>
To: java-user@lucene.apache.org
Subject: Simple, always do wildcard or fuzzy query
Date: Thu, 10 May 2007 17:09:53 -0400
Message-Id: <20070510210821.M9502@www.botspiritcompany.com>
X-Mailer: Open WebMail 2.51 20050228
X-OriginatingIP: 68.208.8.10 (bbrown)
MIME-Version: 1.0
Content-Type: text/plain;
	charset=iso-8859-1
Received-SPF: pass (botspiritcompany.com: domain of bbrown@www.botspiritcompany.com designates 127.0.0.1 as permitted sender) receiver=botspiritcompany.com; client-ip=127.0.0.1; helo=www.botspiritcompany.com; envelope-from=bbrown@www.botspiritcompany.com; x-software=spfmilter 0.97 http://www.acme.com/software/spfmilter/ with libspf2-1.0.0;
X-Virus-Checked: Checked by ClamAV on apache.org

I think this is a simple question; or dont know. Is there a way to 
automatically convert all tokens to wildcard query with any given input.

ie, if I enter 'n' it will convert that to 'n*'.  Also, I am using multiple 
fields, so this is how I presently have it.

MultiFieldQueryParser parser = new MultiFieldQueryParser( fields, analyzer);
	
Query obj = parser.parse(line);

url_title:n full_name:n keywords:n

is it possible to generate

url_title:n* full_name:n* keywords:n*

with only an input of 'n'

--
Berlin Brown
[berlin dot brown at gmail dot com]
http://botspiritcompany.com/botlist/?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 21:43:33 2007
Return-Path: <java-user-return-27994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82369 invoked from network); 10 May 2007 21:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 21:43:32 -0000
Received: (qmail 11068 invoked by uid 500); 10 May 2007 21:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11039 invoked by uid 500); 10 May 2007 21:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11028 invoked by uid 99); 10 May 2007 21:43:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:43:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 14:43:23 -0700
Received: from [10.200.1.12] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 58E891DB145
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 14:43:03 -0700 (PDT)
Message-ID: <464391E7.5030205@affinitycircles.com>
Date: Thu, 10 May 2007 14:43:03 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Debian Thunderbird 1.0.2 (X11/20051002)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: query syntax question
References: <4642F55E.1070809@affinitycircles.com>	 <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>	 <46436FE2.6050300@affinitycircles.com> <359a92830705101404x427b6d1cj6a07ca6e6ceadae9@mail.gmail.com>
In-Reply-To: <359a92830705101404x427b6d1cj6a07ca6e6ceadae9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortuantely at the moment we don't make good use of lucene caching, so 
the setting up of the filter on startup doesn't really work for us at 
the moment.  Maybe just a general flag field instead of a hasname field 
would work better and be more general.  You could just fill this field 
with any flags that need to be set for the particular document.  Each 
flag has a different unique tag that gets concatinated into the field 
then you can make use of your filters with:

flagfield:(+hasfirstname +haslastname)

and the like. 

How does this sound?

Les

Erick Erickson wrote:

> I was going to suggest something about TermEnum/TermDocs, but
> upon reflection that doesn't work so well because you have to
> enumerate all the terms over all the docs for a field. Ouch.
>
> But one could combine the two approaches. Don't index
> any "special" values in your firstname or lastname fields.
> I suspect this will hurt you down the road...
>
> Instead, ONLY for those documents that DO have either a first
> or last name, index an orthogonal field, HASNAMES with
> a single value of "yes" or something. Now you can construct
> your filter efficiently by enumerating the HASNAMES terms/docs
> by only enumerating a single term/value.
>
> Depending upon how big your index is, you might be able to
> get away with the termenum/terndocs approach by constructing
> your filter at start-up time and caching it away somewhere...
>
> You *might* also be able to do something at startup time like
> for (each document in the index) {
>   get the firstname and lastname. If both null, set your filter bit
> }
>
> If you use the lazy loading, you may be able to do this without
> loading all of every document....
>
> I'm curious to know what you settle on and how it works....
>
> Does this make sense in your application?
>
> Erick
>
> On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>
>>
>> I like the idea of the filter since I am making heavy use of filters for
>> this particular query, but how would one go about constructing it
>> efficiently at query time?  All I can see is hacking around not being
>> able to use the * as the first character.
>>
>> Les
>>
>> Erick Erickson wrote:
>>
>> > You could create a Lucene Filter that had a bit for each document that
>> > had a first or last name and use that at query time to restrict your
>> > results appropriately. You could create this at startup time or at
>> > query time. See CachingWrapperFilter for a way to cache it.
>> >
>> >
>> > Another approach would be to add a dummy field to each document,
>> > something like HASFIRSTORLASTNAME. At index time, when
>> > you index a document, if it has a first or last name, put "yes" in the
>> > field. Otherwise, put "no".
>> >
>> > Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
>> > query......
>> >
>> > You could add as many states to this field as you want.
>> >
>> >
>> > Erick
>> >
>> >
>> > On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>> >
>> >>
>> >> I have a question about empty fields.  I want to run a query that 
>> will
>> >> search against a few particular fields for the query term but then 
>> also
>> >> also check to see if a two other fields have any value at all.  
>> i.e., I
>> >> want to search for a set records but don't want to return a record if
>> >> that record has blank first and last name fields.  Any help would be
>> >> greatly appreciated.
>> >>
>> >> Les
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 10 23:45:16 2007
Return-Path: <java-user-return-27995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32494 invoked from network); 10 May 2007 23:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 May 2007 23:45:15 -0000
Received: (qmail 87267 invoked by uid 500); 10 May 2007 23:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87227 invoked by uid 500); 10 May 2007 23:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87216 invoked by uid 99); 10 May 2007 23:45:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 16:45:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 16:45:07 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4ANij9q142780
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 23:44:45 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4ANijNW3784894
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 01:44:45 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4ANiitm013919
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 01:44:45 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4ANii4O013914
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 01:44:44 +0200
In-Reply-To: <18AFFB09-E691-4083-825C-FDAA4036F580@gmail.com>
Subject: Re: Stop words (how to create ideal set of stop words?)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF2117E6CB.1D30BAE5-ON882572D7.0081B55D-882572D7.00821BD0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 10 May 2007 16:41:08 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 11/05/2007 02:44:43
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

See also  en.wikipedia.org/wiki/Stop_words  and
www.ranks.nl/tools/stopwords.html

karl wettin <karl.wettin@gmail.com> wrote on 10/05/2007 13:57:33:

>
> 10 maj 2007 kl. 20.39 skrev Lukas Vlcek:
>
> > Can anybody point me to some references how to create an ideal set
> > of stop
> > words? I konw that this is more like a theoretical question but how do
> > Luceners determine which words shuold be excluded when creating
> > Analyzers
> > for a new languages?
>
> The idea with stop words is to keep the index as small as possible
> without major loss of features, thus they ought to be frequently
> occuring words with little or no semantic meaning. What these words
> are really depends on language, corpus, et c.
>
> > And which technique was used for validation of stop
> > word lists in current Analyzers?
>
> My guess is that they are manually choosen from a corpus term
> frequency vector.
>
> > More specificaly I am interested in situations when there is a need
> > to build
> > a search engine around specific corpus (for example when we need to
> > search
> > set of articles related to programming languages only). Given a
> > specific
> > corpus is there any recommended technique of stop words derivation?
>
> If you have no knowledge of the language for wich you wish to produce
> stop words, then it will be fairly hard to know what to consider a
> stop word. You might be able to consider it as a text classification
> problem. Feature/attribute selection for classifiers is a well
> researched subject. Weka, Yale, R, et c are all tools that might help
> you. But I honestly think no matter how you turn and twist the data,
> manually choosing the stop words is the way to go.
>
>
> --
> karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 00:02:49 2007
Return-Path: <java-user-return-27996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39408 invoked from network); 11 May 2007 00:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 00:02:47 -0000
Received: (qmail 13013 invoked by uid 500); 11 May 2007 00:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12966 invoked by uid 500); 11 May 2007 00:02:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12955 invoked by uid 99); 11 May 2007 00:02:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 17:02:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 17:02:39 -0700
Received: by ug-out-1314.google.com with SMTP id k40so588800ugc
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 17:02:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tYC3/46KXxH1SWzzFSbbY9sB4fedhxrQFUIRqnvc3rKnz3BV2Qv7PScintU3H+0cfOJkbG2Ya/6JQtCTA/j+g8EIlRSzTCUrCnMWdSfm0U14U84OA+8fNInZIb6FnfxQbIB4JM1vOPFNrwnbdpld4aPQDmioevAx3aXEKW5unPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IqUT52oDAPdqr3+eAoJumqYQl5C90rMOJOSZuaVquVT+NsmOHKg8RZ9HOwVEpzl7okRTmuD/5AirFTjeibhW2Pla2Z17301sSf/HeYg5fm1TIvkRE5LA+9BrG7TQq32KdCfwqte8npfkzU0cHWHke6NJyHOc+c8dIskXvzeUR9o=
Received: by 10.82.146.14 with SMTP id t14mr4216255bud.1178841737717;
        Thu, 10 May 2007 17:02:17 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 10 May 2007 17:02:17 -0700 (PDT)
Message-ID: <359a92830705101702n1f1a2f1dn836a717c2b239535@mail.gmail.com>
Date: Thu, 10 May 2007 20:02:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query syntax question
In-Reply-To: <464391E7.5030205@affinitycircles.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69622_10911815.1178841737457"
References: <4642F55E.1070809@affinitycircles.com>
	 <359a92830705100602v1d77eb14n4c3d912b336da10b@mail.gmail.com>
	 <46436FE2.6050300@affinitycircles.com>
	 <359a92830705101404x427b6d1cj6a07ca6e6ceadae9@mail.gmail.com>
	 <464391E7.5030205@affinitycircles.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69622_10911815.1178841737457
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've thought about a flag field, and I see no reason why that wouldn't
work quite well, it all depends, I suppose, upon how ugly it would
eventually get....

But about caching, what does making a filter have to do with Lucene
caching<G>? Sure, there exist Lucene filter caching classes, but
there's no reason you could not implement, say, a singleton class
whose first invocation filled the underlying filter out and just use that.
in other parts of your program.

Anyway, it sounds like you're well on the way to a solution.

Good luck!
Erick

On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
>
> Unfortuantely at the moment we don't make good use of lucene caching, so
> the setting up of the filter on startup doesn't really work for us at
> the moment.  Maybe just a general flag field instead of a hasname field
> would work better and be more general.  You could just fill this field
> with any flags that need to be set for the particular document.  Each
> flag has a different unique tag that gets concatinated into the field
> then you can make use of your filters with:
>
> flagfield:(+hasfirstname +haslastname)
>
> and the like.
>
> How does this sound?
>
> Les
>
> Erick Erickson wrote:
>
> > I was going to suggest something about TermEnum/TermDocs, but
> > upon reflection that doesn't work so well because you have to
> > enumerate all the terms over all the docs for a field. Ouch.
> >
> > But one could combine the two approaches. Don't index
> > any "special" values in your firstname or lastname fields.
> > I suspect this will hurt you down the road...
> >
> > Instead, ONLY for those documents that DO have either a first
> > or last name, index an orthogonal field, HASNAMES with
> > a single value of "yes" or something. Now you can construct
> > your filter efficiently by enumerating the HASNAMES terms/docs
> > by only enumerating a single term/value.
> >
> > Depending upon how big your index is, you might be able to
> > get away with the termenum/terndocs approach by constructing
> > your filter at start-up time and caching it away somewhere...
> >
> > You *might* also be able to do something at startup time like
> > for (each document in the index) {
> >   get the firstname and lastname. If both null, set your filter bit
> > }
> >
> > If you use the lazy loading, you may be able to do this without
> > loading all of every document....
> >
> > I'm curious to know what you settle on and how it works....
> >
> > Does this make sense in your application?
> >
> > Erick
> >
> > On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
> >
> >>
> >> I like the idea of the filter since I am making heavy use of filters
> for
> >> this particular query, but how would one go about constructing it
> >> efficiently at query time?  All I can see is hacking around not being
> >> able to use the * as the first character.
> >>
> >> Les
> >>
> >> Erick Erickson wrote:
> >>
> >> > You could create a Lucene Filter that had a bit for each document
> that
> >> > had a first or last name and use that at query time to restrict your
> >> > results appropriately. You could create this at startup time or at
> >> > query time. See CachingWrapperFilter for a way to cache it.
> >> >
> >> >
> >> > Another approach would be to add a dummy field to each document,
> >> > something like HASFIRSTORLASTNAME. At index time, when
> >> > you index a document, if it has a first or last name, put "yes" in
> the
> >> > field. Otherwise, put "no".
> >> >
> >> > Then, at search time, add an +HASFIRSTORLASTNAME:yes to the
> >> > query......
> >> >
> >> > You could add as many states to this field as you want.
> >> >
> >> >
> >> > Erick
> >> >
> >> >
> >> > On 5/10/07, Les Fletcher <les@affinitycircles.com> wrote:
> >> >
> >> >>
> >> >> I have a question about empty fields.  I want to run a query that
> >> will
> >> >> search against a few particular fields for the query term but then
> >> also
> >> >> also check to see if a two other fields have any value at all.
> >> i.e., I
> >> >> want to search for a set records but don't want to return a record
> if
> >> >> that record has blank first and last name fields.  Any help would be
> >> >> greatly appreciated.
> >> >>
> >> >> Les
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_69622_10911815.1178841737457--

From java-user-return-27997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 00:35:05 2007
Return-Path: <java-user-return-27997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51188 invoked from network); 11 May 2007 00:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 00:35:04 -0000
Received: (qmail 61601 invoked by uid 500); 11 May 2007 00:35:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61079 invoked by uid 500); 11 May 2007 00:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61068 invoked by uid 99); 11 May 2007 00:35:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 17:35:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 17:34:56 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 9C61114D6AA
	for <java-user@lucene.apache.org>; Thu, 10 May 2007 17:34:33 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <OF2117E6CB.1D30BAE5-ON882572D7.0081B55D-882572D7.00821BD0@il.ibm.com>
References: <OF2117E6CB.1D30BAE5-ON882572D7.0081B55D-882572D7.00821BD0@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <894CA52B-4E42-4524-B7A7-0AA4C23E2095@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Stop words (how to create ideal set of stop words?)
Date: Thu, 10 May 2007 20:34:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Also, from the empirical side, have a look at Luke (after indexing w/ 
o any stopwords, or just the standard ones) and see what the most  
common terms are and see if they are meaningful or not in the context  
of your application.

-Grant


On May 10, 2007, at 7:41 PM, Doron Cohen wrote:

> See also  en.wikipedia.org/wiki/Stop_words  and
> www.ranks.nl/tools/stopwords.html
>
> karl wettin <karl.wettin@gmail.com> wrote on 10/05/2007 13:57:33:
>
>>
>> 10 maj 2007 kl. 20.39 skrev Lukas Vlcek:
>>
>>> Can anybody point me to some references how to create an ideal set
>>> of stop
>>> words? I konw that this is more like a theoretical question but  
>>> how do
>>> Luceners determine which words shuold be excluded when creating
>>> Analyzers
>>> for a new languages?
>>
>> The idea with stop words is to keep the index as small as possible
>> without major loss of features, thus they ought to be frequently
>> occuring words with little or no semantic meaning. What these words
>> are really depends on language, corpus, et c.
>>
>>> And which technique was used for validation of stop
>>> word lists in current Analyzers?
>>
>> My guess is that they are manually choosen from a corpus term
>> frequency vector.
>>
>>> More specificaly I am interested in situations when there is a need
>>> to build
>>> a search engine around specific corpus (for example when we need to
>>> search
>>> set of articles related to programming languages only). Given a
>>> specific
>>> corpus is there any recommended technique of stop words derivation?
>>
>> If you have no knowledge of the language for wich you wish to produce
>> stop words, then it will be fairly hard to know what to consider a
>> stop word. You might be able to consider it as a text classification
>> problem. Feature/attribute selection for classifiers is a well
>> researched subject. Weka, Yale, R, et c are all tools that might help
>> you. But I honestly think no matter how you turn and twist the data,
>> manually choosing the stop words is the way to go.
>>
>>
>> --
>> karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 02:24:35 2007
Return-Path: <java-user-return-27998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75170 invoked from network); 11 May 2007 02:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 02:24:34 -0000
Received: (qmail 63573 invoked by uid 500); 11 May 2007 02:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63349 invoked by uid 500); 11 May 2007 02:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63337 invoked by uid 99); 11 May 2007 02:24:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 19:24:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 May 2007 19:24:23 -0700
Received: (qmail 35128 invoked by uid 60001); 11 May 2007 02:24:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=VnQDjosFSsSuJCu0BBA2B+g5HRuyySDBMcUVZbioSkcpUvgm1NCSmRvQBftOToYaWQlzPxRhHui8HtI/aHLLk+fxkxnLMycAoslARtWxj7XDAtQ06phlyj7Um6bnrfvVy29hMFSh40ONRn9Y2mrUw2p9UO2PwMbE95nb/Ze4etc=;
X-YMail-OSG: NnueoaYVM1kwhvxJc_9Pikh2WE_iwllV67WmI08bbAxD4Aus1suzzzlU2RlXS9ql.sAG340tr6Q_eTu5hoJ8pmbL9JtzXcBPJ3z8mV6XSV.aS.mkqqo-
Received: from [74.64.53.68] by web50310.mail.re2.yahoo.com via HTTP; Thu, 10 May 2007 19:24:00 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Thu, 10 May 2007 19:24:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Stop words (how to create ideal set of stop words?)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <852257.34073.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There is a handy class in contrib/misc.../ that will show you the most frequent terms in an index. Handy dandy.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Lukas Vlcek <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 10, 2007 2:39:35 PM
Subject: Stop words (how to create ideal set of stop words?)

Hi,

Can anybody point me to some references how to create an ideal set of stop
words? I konw that this is more like a theoretical question but how do
Luceners determine which words shuold be excluded when creating Analyzers
for a new languages? And which technique was used for validation of stop
word lists in current Analyzers?

More specificaly I am interested in situations when there is a need to build
a search engine around specific corpus (for example when we need to search
set of articles related to programming languages only). Given a specific
corpus is there any recommended technique of stop words derivation?

Thanks,
Lukas




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-27999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 05:33:07 2007
Return-Path: <java-user-return-27999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17500 invoked from network); 11 May 2007 05:33:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 05:33:06 -0000
Received: (qmail 79371 invoked by uid 500); 11 May 2007 05:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79331 invoked by uid 500); 11 May 2007 05:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79320 invoked by uid 99); 11 May 2007 05:33:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:33:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:32:57 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 10 May 2007 22:32:34 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: How to re-open the IndexSearcher's IndexReader
Date: Thu, 10 May 2007 22:32:32 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to re-open the IndexSearcher's IndexReader
Thread-Index: AceTjcXzGiGqrfEBTmOSbQvKZ2tL7w==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 05:32:34.0906 (UTC) FILETIME=[C77083A0:01C7938D]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

How can I re-use an IndexSearcher and keep track of changes to the
index?


I am dealing with Index Directories of several GB.  Opening and
IndexSearcher is very expensive and can take several seconds.  Therefore
I am caching the IndexSearcher for re-use.

Our indexes are frequently updated.  Before I pass the IndexSearcher
retrieved from the cache I use the IndexSearcher getIndexReader() method
to get the IndexReader and to check if the IndexReader is current (via
the isCurrent() method).

The isCurrent method is documented as follows:

/**
   * Check whether this IndexReader still works on a current version of
the index.
   * If this is not the case you will need to re-open the IndexReader to
   * make sure you see the latest changes made to the index.
   *=20
   * @throws IOException
   */

Opening a new  IndexReader  is trivial.  But then how do I set the
IndexSearcher's reader to the new one without getting a new instance?


Thanks in advance for any help.


Andreas





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 05:54:27 2007
Return-Path: <java-user-return-28000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21047 invoked from network); 11 May 2007 05:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 05:54:26 -0000
Received: (qmail 99845 invoked by uid 500); 11 May 2007 05:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99545 invoked by uid 500); 11 May 2007 05:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99533 invoked by uid 99); 11 May 2007 05:54:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:54:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:54:18 -0700
Received: by wr-out-0506.google.com with SMTP id 68so841770wra
        for <java-user@lucene.apache.org>; Thu, 10 May 2007 22:53:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RJ/k6f2xbYcTFIcgsMxO4P9eZXMx2IPG7ZUv0B99Thhp7h4Me3WNBJggsk+pkzdTr3R8otTIjKjWxKDGS2n/WeXq1BVvHPEwPWz384JNv12y8BCpwKE1Du0QYxyUGgU0o9m/o6F50950Q2syDCz/13C69j6wRj/7PTg9Y2Q7zG4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kPFhyZYGqKv2K3Ob1K1mGAQLvIZBvWmSJ/6EQVfB9lc5PTpNMMPib2Gx4rnGpj5IJ0pMiXvXOsMT6OKeF7uwJQP1Y+WSuP/g8hU8RQVt65J80923R/rLkHk/baPOa5wU5JO2QUMaWEeAecueDMWFmfe8vpM1Db/PYZ8dPm0rprM=
Received: by 10.114.36.1 with SMTP id j1mr720489waj.1178862837197;
        Thu, 10 May 2007 22:53:57 -0700 (PDT)
Received: by 10.114.136.13 with HTTP; Thu, 10 May 2007 22:53:57 -0700 (PDT)
Message-ID: <52c3ddca0705102253h43544849kdf18ce2ecd595c80@mail.gmail.com>
Date: Fri, 11 May 2007 07:53:57 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Stop words (how to create ideal set of stop words?)
In-Reply-To: <852257.34073.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_150310_20536271.1178862837143"
References: <852257.34073.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_150310_20536271.1178862837143
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Thanks for your comments!

I was thinking that there could be some method based on frequency and
linguistic research. So far it seems that manually choosen set of words is
very common approach but this leaves some questions opened in my mind.
I am not a native english speaker but I think that this (
http://www.ranks.nl/tools/stopwords.html) makes sense, but for my native
language (http://www.ranks.nl/stopwords/czech.html) this can be questionable
in some cases (especially in case of specific corpus).

What I am searching for is some authomatic method of stop words extraction
based on given set of documents. I don't expect such method to be 100% exact
but I would expect it to be ~good enough~.

I will try to search in citeseer as well (was hoping somebody could give me
some references of this kind).

Thanks!
Lukas

On 5/11/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> There is a handy class in contrib/misc.../ that will show you the most
> frequent terms in an index. Handy dandy.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Lukas Vlcek <lukas.vlcek@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, May 10, 2007 2:39:35 PM
> Subject: Stop words (how to create ideal set of stop words?)
>
> Hi,
>
> Can anybody point me to some references how to create an ideal set of stop
> words? I konw that this is more like a theoretical question but how do
> Luceners determine which words shuold be excluded when creating Analyzers
> for a new languages? And which technique was used for validation of stop
> word lists in current Analyzers?
>
> More specificaly I am interested in situations when there is a need to
> build
> a search engine around specific corpus (for example when we need to search
> set of articles related to programming languages only). Given a specific
> corpus is there any recommended technique of stop words derivation?
>
> Thanks,
> Lukas
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_150310_20536271.1178862837143--

From java-user-return-28001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 05:56:46 2007
Return-Path: <java-user-return-28001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21343 invoked from network); 11 May 2007 05:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 05:56:44 -0000
Received: (qmail 3638 invoked by uid 500); 11 May 2007 05:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3501 invoked by uid 500); 11 May 2007 05:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3392 invoked by uid 99); 11 May 2007 05:56:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:56:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 May 2007 22:56:35 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 10 May 2007 22:56:15 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to re-open the IndexSearcher's IndexReader
Date: Thu, 10 May 2007 22:56:12 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB8@WDCCPMAIL01.markettools.com>
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to re-open the IndexSearcher's IndexReader
Thread-Index: AceTjcXzGiGqrfEBTmOSbQvKZ2tL7wAAyVng
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 05:56:15.0003 (UTC) FILETIME=[15E21EB0:01C79391]
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe I should add that I am currently using Lucene 2.0.  From other
threads I get the impression that this might be solved in Lucene 2.1.

-----Original Message-----
From: Andreas Guther [mailto:Andreas.Guther@markettools.com]=20
Sent: Thursday, May 10, 2007 10:33 PM
To: java-user@lucene.apache.org
Subject: How to re-open the IndexSearcher's IndexReader


Hi,

How can I re-use an IndexSearcher and keep track of changes to the
index?


I am dealing with Index Directories of several GB.  Opening and
IndexSearcher is very expensive and can take several seconds.  Therefore
I am caching the IndexSearcher for re-use.

Our indexes are frequently updated.  Before I pass the IndexSearcher
retrieved from the cache I use the IndexSearcher getIndexReader() method
to get the IndexReader and to check if the IndexReader is current (via
the isCurrent() method).

The isCurrent method is documented as follows:

/**
   * Check whether this IndexReader still works on a current version of
the index.
   * If this is not the case you will need to re-open the IndexReader to
   * make sure you see the latest changes made to the index.
   *=20
   * @throws IOException
   */

Opening a new  IndexReader  is trivial.  But then how do I set the
IndexSearcher's reader to the new one without getting a new instance?


Thanks in advance for any help.


Andreas





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 08:38:13 2007
Return-Path: <java-user-return-28002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56167 invoked from network); 11 May 2007 08:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 08:38:11 -0000
Received: (qmail 88460 invoked by uid 500); 11 May 2007 08:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88274 invoked by uid 500); 11 May 2007 08:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88263 invoked by uid 99); 11 May 2007 08:38:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 01:38:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.61] (HELO web26514.mail.ukl.yahoo.com) (217.146.177.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 May 2007 01:38:01 -0700
Received: (qmail 12730 invoked by uid 60001); 11 May 2007 08:37:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=krzdzNqPi6mv3OTX6ju/UUnNO/8wRiydhHAsaGQm9Lxd3mGpTrM/mRqkV4JnQLbwQFZzbUsQCkvttR7MLxtKJpxD5HiEDglT8W7CJTZaPRzxOBsk/XSSfvlLkagCQ1fs64dmO7KrYrJCeG8Y7pQ2UD88hoqFh9vG7hXxWqmznd4=;
X-YMail-OSG: 0Trfaf0VM1k_5K2JdXAQFY9wZivl6JCtT3aW6vm70jKnoVT9SMyifn2KsksfWZAoazKDmQFbdkA0JMRnI3M3Ko2b45tXgV_MbrwJFyuG.h_sGE2O.yJPQ6Ek7qU-
Received: from [193.49.212.252] by web26514.mail.ukl.yahoo.com via HTTP; Fri, 11 May 2007 10:37:39 CEST
Date: Fri, 11 May 2007 10:37:39 +0200 (CEST)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Subject: Help IndexWriter,Multi-threaded index access
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-317291350-1178872659=:12447"
Content-Transfer-Encoding: 8bit
Message-ID: <815511.12447.qm@web26514.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-317291350-1178872659=:12447
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello,


I work on a web application deployed on a Tomcat server 5. Many jsp front pages (thanks to controllers) query a single manager (retrieved by a factory as an instance). This manager deals with Lucene index, stored by using a FSDirectory, to create several kind of documents, append or remove them from the index and so on ... The problem is that many errors often occur when the manager performs the index treatment because I don't know how to use the IndewWriter efficiently. The main question is : Can I use an single instance of IndexWriter (only ONE for the manager that means only one IndexWriter for all the front access) ? I guess it's not possible, I got so many times a "RAMDirectory.createOutput error". In that way, is it reasonable to create an IndexWriter each time the manager need to add a document ? Is there another way to proceed ?

I join a complete JUnit test which behaves exactly as my manager. The main methods to look at are testIndexManagement (the test),getIndexWriter,addDocument,performExactSearchIntoIndex,performApproximativeSearchIntoIndex.

Thank you for your help,

Best regards,

Thomas Legrand
France


/**************************************************************************************/

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;


public class IndexTest extends TestCase{

    protected static IndexWriter mWriter=null;
    protected static IndexReader mReader=null;
    protected static IndexSearcher mSearcher=null;
    protected static Analyzer mIndexAnalyser=null;
    
    private static  boolean IS_INDEX_LOADED=false;
    private static  String INDEX_LOCATION="indexes//test";
    private static  String ID="ID";
    private static  String CONTENT="content";
    
    public static void main(String[] args) {
        junit.textui.TestRunner.run(suite());
    }

    public IndexTest(String _testName) {
        super(_testName);
        System.out.println("--> "+_testName); 
    }
    
    
    protected void tearDown() throws Exception {
        super.tearDown();
    }
    
    protected void setUp() throws Exception {        
        super.setUp();
        
        /* load index */
        if(IS_INDEX_LOADED){
            System.out.println("\n[setUp] Index already loaded");
        }else{
            System.out.println("\n[setUp] Index loading...");
            loadIndexes();
            IS_INDEX_LOADED=true;
        }
    }


    private Analyzer getIndexAnalyser(){
        System.out.println("\n[getIndexAnalyser][begin]");        
        try{
            if(mIndexAnalyser==null){
                mIndexAnalyser=new SimpleAnalyzer(); 
                System.out.println("[getIndexAnalyser] SimpleAnalyzer created");
            }    
        }catch(Exception analyzex){
            System.out.println("[getIndexAnalyser] Error when creating the analyzers: "+analyzex);
            analyzex.printStackTrace();
            fail();            
        }
        System.out.println("[getIndexAnalyser] [end]");
        return mIndexAnalyser;
    }
    
    
    private IndexWriter getIndexWriter(){
        System.out.println("\n[getIndexWriter][begin]");
        Directory indexDir=null;
        
        // Where is the index ?    
        System.out.println("[getIndexWriter] Indexes located in: "+INDEX_LOCATION);
        
        // Get the ad's analyser
        Analyzer analyser = getIndexAnalyser(); 
        
        /* create a new writer each time it's required ! */
        if(mWriter==null ){
            try{
                indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
                 
                boolean isTheIndexNew=true;
                mWriter = new IndexWriter(indexDir, analyser, isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer created");
            
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{
            try{
                indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
                 
                boolean isTheIndexNew=true;
                mWriter = new IndexWriter(INDEX_LOCATION, analyser, isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer created");
            
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }
        System.out.println("[getIndexWriter] [end]");
        return mWriter;
    }
    
    
    private IndexReader getIndexReader(){
        System.out.println("\n[getIndexReader][begin]");
        Directory indexDir=null;
        
        // Where is the index ?
        try{
            indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
        }catch(Exception direx){
            System.out.println("[getIndexReader] Error when asserting the directory for the index");
            direx.printStackTrace();
            fail();
        }
        System.out.println("[getIndexReader] Indexes located in: "+INDEX_LOCATION);
        
        // create the reader if it doesn't exist yet
        if(mReader==null){
            try{
                mReader= IndexReader.open(indexDir); 
                System.out.println("[getIndexReader] User index reader has been created");
            
            }catch(Exception ex){
                System.out.println("[getIndexReader] Cannot instantiate index reader: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{                    
            try{
                /* do we need to re-open it ? */
                if(mReader.isCurrent()==false){
                    System.out.println("[getIndexReader] Need to re-open the index reader");
                    mReader=IndexReader.open(indexDir);
                }
            }catch(Exception ioex){
                System.out.println("[getIndexReader] Error when re-opening the index reader: "+ioex);
                ioex.printStackTrace();
                fail();
            }            
        }
        System.out.println("[getIndexReader][end]");
        return mReader;
    }
    
    
    private IndexSearcher getIndexSearcher(){
        System.out.println("\n[getIndexSearcher] [begin]");

        // create the searcher if it doesn't exist yet
        if(mSearcher==null){
            try{
                mSearcher= new IndexSearcher(getIndexReader()); 
                System.out.println("[getIndexSearcher]The index searcher has been created");
            
            }catch(Exception ex){
                System.out.println("[getIndexSearcher] Cannot instantiate index searcher: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{        
            try{
                /* do we need to re-open it ? */
                if(!mSearcher.getIndexReader().isCurrent()){
                    System.out.println("[getIndexSearcher] Need to re-open the index searcher (reader)");
                    mSearcher=new IndexSearcher(getIndexReader());
                }
            }catch(Exception ioex){
                System.out.println("[getIndexSearcher] Error when re-opening the index searcher: "+ioex);
                ioex.printStackTrace();
                fail();
            }            
        }
        System.out.println("[getIndexSearcher] [end]");
        return mSearcher;
    }
    

    private void addDocument(Document _doc){
        System.out.println("\n[addDocument][begin]");

        try{
            System.out.println("[addDocument] Want to add the doc: "+_doc.toString());

            IndexWriter    writer=this.getIndexWriter();

            writer.addDocument(_doc); 
            writer.optimize();
            writer.close();            
            
        }catch(Exception docex){            
            System.out.println("[addDocument] Error when adding the document: "+ docex);
            docex.printStackTrace();
            fail();
        }
        System.out.println("[addDocument][end]");
    }
    
    
    private ArrayList<Document> buildDocuments() {
        System.out.println("\n[buildDocuments] [begin]");

        // the result to build 
        ArrayList<Document> documents=null;
        
        try{
            // create the result
            documents= new ArrayList<Document> ();

            Document doc1=new Document();
            doc1.add(new Field(ID,"1", Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc1.add(new Field(CONTENT,"test", Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc1);                        
        
            Document doc2=new Document();
            doc2.add(new Field(ID,"2", Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc2.add(new Field(CONTENT,"othertest", Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc2);    
                
        }catch(Exception ex){            
            System.out.println("[buildDocuments] An error occured while building the list of documents: " + ex);
            ex.printStackTrace();
            fail();
        }
        System.out.println("[buildDocuments] [end]");
        return documents;        
    }
    

    private void loadIndexes() throws EncheromaxException{
        
        System.out.println("\n[loadIndexes] [begin]");        
        try{ 
            
            /* build all the documents we need */
            ArrayList<Document> docsToIndex=buildDocuments();
            
            if(docsToIndex==null){
                System.out.println("[oadIndexes] No doc found to index");
            }else{                
                System.out.println("[loadIndexes] Total number of doc to index="+docsToIndex.size());
                
                /* create the index now ! */
                Iterator<Document> docIter=docsToIndex.iterator();        
                int total=0;
                while(docIter.hasNext()){
                    Document doc=docIter.next();
                    addDocument(doc);    
                    total++;
                }                    
                System.out.println("[loadIndexes] Total doc indexed="+total);

                System.out.println("[loadIndexes] Indexes successfully created");
            }    
            }catch(Exception indexex){
                indexex.printStackTrace();
                fail();
            }    
            System.out.println("[loadIndexes][end]");
    }

    
    protected void appendDocToIndex(String _ID,String _content){        
        System.out.println("\n[appendDocToIndex][begin]");        

        /* that's it */
        try{             
            /* build all the document we need */
            Document doc=new Document();
            doc.add(new Field(ID,_ID, Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc.add(new Field(CONTENT,_content, Field.Store.YES,Field.Index.TOKENIZED));

            /* write it to the index */
            System.out.println("[appendDocToIndex] Add the document: "+doc.toString());
            addDocument(doc);                             
            System.out.println("[appendDocToIndex] Append document successfully");
    
            }catch(Exception indexex){                 
                 System.out.println("[appendDocToIndex] Cannot append the doc to the index: "+ indexex);
                 indexex.printStackTrace();
                 fail();
            }    
            System.out.println("[appendDocToIndex] [end]");
    }
    
    
    
    protected void removeDocFromIndex(String _ID) throws EncheromaxException{        
        System.out.println("\n[removeDocFromIndex][begin]");        
        
        /* first checking */
        if(_ID==null){
            System.out.println("[removeDocFromIndex] No ID provided");
            fail();
        }
        
        /* that's it */
        try{                                 
            // build the term with the ID
            Term iDTerm=new Term(ID,_ID);
            
            // get all the documents that contain the given  ID
            TermDocs docs=getIndexReader().termDocs(iDTerm);
            
            System.out.println("[removeDocFromIndex] Trying to delete a document with term: "+iDTerm);        
            int docID=0;
            while(docs.next()){
                docID=docs.doc();
                getIndexReader().deleteDocument(docID);        
                System.out.println("[removeDocFromIndex] Document with ID="+docID + " deleted");        
            }
            
            // avoid lock ?
            getIndexReader().close();            
            
            /* check if the document has really been removed */
            TermDocs finalDocs=getIndexReader().termDocs(iDTerm);            
            if(finalDocs.next()){
                System.out.println("[removeDocFromIndex] The document is still in the index !");
                //fail();
            }else{
                System.out.println("[removeDocFromIndex] The document has really been removed from the index");
            }
            
            
        }catch(Exception indexex){
            System.out.println("[removeDocFromIndex] Cannot remove the document from the index: "+ indexex);
            indexex.printStackTrace();
            fail();
        }    
        System.out.println("[removeDocFromIndex][end]");
    }
    
    

    private ArrayList<Document> performExactSearchIntoIndex(String _content,String _fieldName) {
        System.out.println("\n[performExactSearchIntoIndex][begin]");    
        ArrayList<Document> documentsFound=null;
        try{            
            // build the term
             Term term=new Term(_fieldName,_content);
                
            //     search now !
            TermDocs docs=getIndexReader().termDocs(term);        
            
            // build the result
            documentsFound=new ArrayList<Document>();    

            int docID=0;
            while(docs.next()){
                docID=docs.doc();
                System.out.println("[performExactSearchIntoIndex] Doc found with ID="+docID);                
                Document currentDoc=getIndexReader().document(docID);        
                documentsFound.add(currentDoc); 
            }    
            
        }catch(Exception querex){
            System.out.println("[performExactSearchIntoIndex] Error when searching into the doc index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        System.out.println("[performExactSearchIntoIndex][end]");    
        return documentsFound;
    }
    
    
    private ArrayList<Document> performApproximativeSearchIntoIndex(String _content,String _fieldName){
        System.out.println("\n[performApproximativeSearchIntoIndex][begin]");    
        ArrayList<Document> documentsFound=null;
        
        //     get the searcher        
        IndexSearcher searcher = getIndexSearcher();
        
        try{            
            // build the query
             FuzzyQuery query=new FuzzyQuery(new Term(_fieldName,_content));
                     
            //     search now !
            Hits hits = searcher.search(query);
            System.out.println("[performApproximativeSearchIntoIndex] Total result found="+ hits.length());
            
            // build the result
            documentsFound=new ArrayList<Document>();    
            
            int maxAproxHitReturned=hits.length();
            for(int i = 0; i <maxAproxHitReturned; i++){ 
                System.out.println("[performApproximativeSearchIntoIndex] Add a document with score="+hits.score(i));
                Document currentDoc = hits.doc(i);                             
                documentsFound.add(currentDoc); 
            }             
        }catch(Exception querex){
            System.out.println("[performApproximativeSearchIntoIndex] Error when searching into document in the index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        System.out.println("[performApproximativeSearchIntoIndex][end]");    
        return documentsFound;
    }
    
    
    private ArrayList<Document> searchDocIntoIndex(String[] _search,String[] _onfields){
        System.out.println("\n[searchDocIntoIndex] [begin]");    
        ArrayList<Document> docFound=null;
        ArrayList<Document> docFromExactSearch=null;
        ArrayList<Document> docFromApproxSearch=null;    
        HashSet<String> docAlreadyTreatened=null;
        
        if(_search == null || _onfields==null || _search.length!=_onfields.length){
            System.out.println("[searchDocIntoIndex] No search field given or wrong size");
            fail();
        }
        
        /* ** search a doc by using an exact method (expect only one doc found) ** */
        for(int i=0;i<_search.length;i++){
            if(_onfields[i].toString()==CONTENT){
                System.out.println("[searchDocIntoIndex] Perform an exact search on content: "+_search[i]);    
                docFromExactSearch=performExactSearchIntoIndex(_search[i], _onfields[i]);
            }
        }        
        /* build the documents */
        if(docFromExactSearch==null || docFromExactSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by the exact search");    
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned by the exact search (expect 1!) ="+docFromExactSearch.size());    
            // build the result here
            docFound=new ArrayList<Document>();
            // keep the doc found by the exact method to avoid having him twice in the final result
            docAlreadyTreatened=new HashSet<String> (docFromExactSearch.size());
            
            for(int i=0;i<docFromExactSearch.size();i++){
                docFound.add(docFromExactSearch.get(i));
                
                // flag the doc ID as treatened
                docAlreadyTreatened.add(docFromExactSearch.get(i).get(ID));
            }
        }
        
        /* ** search a doc by using an approximative  method ** */
        for(int i=0;i<_search.length;i++){
            if(_onfields[i].toString()==CONTENT){
                System.out.println("[searchDocIntoIndex] Perform an approximative search on content: "+_search[i]);    
                docFromApproxSearch=performApproximativeSearchIntoIndex(_search[i], _onfields[i]);
            }
        }        
        /* build the documents */
        if(docFromApproxSearch==null || docFromApproxSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by the approximative search");    
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned by the approximative search="+docFromApproxSearch.size());    
            // build the result here
            if(docFound==null)
                docFound=new ArrayList<Document>();
            for(int i=0;i<docFromApproxSearch.size();i++){
                
                if(docAlreadyTreatened!=null && !docAlreadyTreatened.contains(docFromApproxSearch.get(i).get(ID))){
                    docFound.add(docFromApproxSearch.get(i));
                }else if(docAlreadyTreatened==null){
                    docFound.add(docFromApproxSearch.get(i));
                }else
                    System.out.println("[searchDocIntoIndex] Doc with ID="+docFromApproxSearch.get(i).get(ID) + " already treatened by the exact search");    
            }
        }
        System.out.println("[searchDocIntoIndex] [end]");
        return docFound;
    }


    public  static Test suite() {        
        TestSuite testsuite = new TestSuite();
        testsuite.addTest(new IndexTest("testIndexManagement"));        
        return testsuite;
    }    
    
    
    
    public void testIndexManagement(){
        System.out.println("[testIndexManagement][begin]");        
        Date justBefore=new Date();
        long timeBefore=justBefore.getTime();
        
                
        /* make sure we don't already have a new do in the index  */
        System.out.println("\n\n---- Not in the index ----------------------------------------");
        try{            
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertNull(searchDocIntoIndex(search,field));        
            
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }        
        
        /* append a new doc to the index  */
        System.out.println("\n\n---- Append doc ----------------------------------------");
        try{
            appendDocToIndex("3", "new")    ;        
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }        
    
        
        /* make sure we have the new doc once in the index */
        System.out.println("\n\n---- Once in the index ----------------------------------------");
        try{
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertEquals(searchDocIntoIndex(search,field).size(),1);        
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }    
        
        /* delete the doc */
        System.out.println("\n\n---- Delete the doc ----------------------------------------");
        try{
            removeDocFromIndex("3");
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }    

        
        /* make sure he disappeared from the index */
        System.out.println("\n\n---- Doc dissapeared ----------------------------------------");
        try{
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertNull(searchDocIntoIndex(field,search));        
            
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }
        
        
        Date justAfter=new Date();
        long timeAfter=justAfter.getTime();
        System.out.println("[testIndexManagement] Test  performed in " + (timeAfter-timeBefore) + " ms");
        System.out.println("[testIndexManagement][end]\n");
    }
}

 		
---------------------------------
 Dcouvrez une nouvelle faon d'obtenir des rponses  toutes vos questions ! Profitez des connaissances, des opinions et des expriences des internautes sur Yahoo! Questions/Rponses.
--0-317291350-1178872659=:12447--

From java-user-return-28003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 08:50:40 2007
Return-Path: <java-user-return-28003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59907 invoked from network); 11 May 2007 08:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 08:50:39 -0000
Received: (qmail 4458 invoked by uid 500); 11 May 2007 08:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4420 invoked by uid 500); 11 May 2007 08:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4409 invoked by uid 99); 11 May 2007 08:50:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 01:50:37 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 01:50:29 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l4B8o7i4016770
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 04:50:07 -0400 (EDT)
Received: from corpussmtp4.corp.emc.com (corpussmtp4.corp.emc.com [10.254.64.54])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l4B8nRqu029216
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 04:50:04 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX60B.corp.emc.com ([10.254.64.37]) by corpussmtp4.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 04:49:24 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help IndexWriter,Multi-threaded index access
Date: Fri, 11 May 2007 04:49:22 -0400
Message-ID: <DC061CD2AFA7774FB904EEB43D98CB3A863825@CORPUSMX60B.corp.emc.com>
In-Reply-To: <815511.12447.qm@web26514.mail.ukl.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help IndexWriter,Multi-threaded index access
Thread-Index: AceTp7idi/pOOqRaQ+O5Y1SNh0GFzgAACeeQ
References: <815511.12447.qm@web26514.mail.ukl.yahoo.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 08:49:24.0518 (UTC) FILETIME=[46844C60:01C793A9]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.11.12034
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, SUPERLONG_LINE 0.05, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
	You cannot create more than one indexwriter for one index instance. But =
you can share the indexwriter through multi servlets or threads. Don't =
open a new IndexWriter in different threads, reuse the old one.

Regards,


-----Original Message-----
From: legrand thomas [mailto:thomaslegrand14@yahoo.fr]=20
Sent: Friday, May 11, 2007 4:38 PM
To: java-user@lucene.apache.org
Subject: Help IndexWriter,Multi-threaded index access

Hello,


I work on a web application deployed on a Tomcat server 5. Many jsp =
front pages (thanks to controllers) query a single manager (retrieved by =
a factory as an instance). This manager deals with Lucene index, stored =
by using a FSDirectory, to create several kind of documents, append or =
remove them from the index and so on ... The problem is that many errors =
often occur when the manager performs the index treatment because I =
don't know how to use the IndewWriter efficiently. The main question is =
: Can I use an single instance of IndexWriter (only ONE for the manager =
that means only one IndexWriter for all the front access) ? I guess it's =
not possible, I got so many times a "RAMDirectory.createOutput error". =
In that way, is it reasonable to create an IndexWriter each time the =
manager need to add a document ? Is there another way to proceed ?

I join a complete JUnit test which behaves exactly as my manager. The =
main methods to look at are testIndexManagement (the =
test),getIndexWriter,addDocument,performExactSearchIntoIndex,performAppro=
ximativeSearchIntoIndex.

Thank you for your help,

Best regards,

Thomas Legrand
France


/************************************************************************=
**************/

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;


public class IndexTest extends TestCase{

    protected static IndexWriter mWriter=3Dnull;
    protected static IndexReader mReader=3Dnull;
    protected static IndexSearcher mSearcher=3Dnull;
    protected static Analyzer mIndexAnalyser=3Dnull;
   =20
    private static  boolean IS_INDEX_LOADED=3Dfalse;
    private static  String INDEX_LOCATION=3D"indexes//test";
    private static  String ID=3D"ID";
    private static  String CONTENT=3D"content";
   =20
    public static void main(String[] args) {
        junit.textui.TestRunner.run(suite());
    }

    public IndexTest(String _testName) {
        super(_testName);
        System.out.println("--> "+_testName);=20
    }
   =20
   =20
    protected void tearDown() throws Exception {
        super.tearDown();
    }
   =20
    protected void setUp() throws Exception {       =20
        super.setUp();
       =20
        /* load index */
        if(IS_INDEX_LOADED){
            System.out.println("\n[setUp] Index already loaded");
        }else{
            System.out.println("\n[setUp] Index loading...");
            loadIndexes();
            IS_INDEX_LOADED=3Dtrue;
        }
    }


    private Analyzer getIndexAnalyser(){
        System.out.println("\n[getIndexAnalyser][begin]");       =20
        try{
            if(mIndexAnalyser=3D=3Dnull){
                mIndexAnalyser=3Dnew SimpleAnalyzer();=20
                System.out.println("[getIndexAnalyser] SimpleAnalyzer =
created");
            }   =20
        }catch(Exception analyzex){
            System.out.println("[getIndexAnalyser] Error when creating =
the analyzers: "+analyzex);
            analyzex.printStackTrace();
            fail();           =20
        }
        System.out.println("[getIndexAnalyser] [end]");
        return mIndexAnalyser;
    }
   =20
   =20
    private IndexWriter getIndexWriter(){
        System.out.println("\n[getIndexWriter][begin]");
        Directory indexDir=3Dnull;
       =20
        // Where is the index ?   =20
        System.out.println("[getIndexWriter] Indexes located in: =
"+INDEX_LOCATION);
       =20
        // Get the ad's analyser
        Analyzer analyser =3D getIndexAnalyser();=20
       =20
        /* create a new writer each time it's required ! */
        if(mWriter=3D=3Dnull ){
            try{
                indexDir=3DFSDirectory.getDirectory(INDEX_LOCATION);
                =20
                boolean isTheIndexNew=3Dtrue;
                mWriter =3D new IndexWriter(indexDir, analyser, =
isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer =
created");
           =20
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate =
index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{
            try{
                indexDir=3DFSDirectory.getDirectory(INDEX_LOCATION);
                =20
                boolean isTheIndexNew=3Dtrue;
                mWriter =3D new IndexWriter(INDEX_LOCATION, analyser, =
isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer =
created");
           =20
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate =
index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }
        System.out.println("[getIndexWriter] [end]");
        return mWriter;
    }
   =20
   =20
    private IndexReader getIndexReader(){
        System.out.println("\n[getIndexReader][begin]");
        Directory indexDir=3Dnull;
       =20
        // Where is the index ?
        try{
            indexDir=3DFSDirectory.getDirectory(INDEX_LOCATION);
        }catch(Exception direx){
            System.out.println("[getIndexReader] Error when asserting =
the directory for the index");
            direx.printStackTrace();
            fail();
        }
        System.out.println("[getIndexReader] Indexes located in: =
"+INDEX_LOCATION);
       =20
        // create the reader if it doesn't exist yet
        if(mReader=3D=3Dnull){
            try{
                mReader=3D IndexReader.open(indexDir);=20
                System.out.println("[getIndexReader] User index reader =
has been created");
           =20
            }catch(Exception ex){
                System.out.println("[getIndexReader] Cannot instantiate =
index reader: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{                   =20
            try{
                /* do we need to re-open it ? */
                if(mReader.isCurrent()=3D=3Dfalse){
                    System.out.println("[getIndexReader] Need to re-open =
the index reader");
                    mReader=3DIndexReader.open(indexDir);
                }
            }catch(Exception ioex){
                System.out.println("[getIndexReader] Error when =
re-opening the index reader: "+ioex);
                ioex.printStackTrace();
                fail();
            }           =20
        }
        System.out.println("[getIndexReader][end]");
        return mReader;
    }
   =20
   =20
    private IndexSearcher getIndexSearcher(){
        System.out.println("\n[getIndexSearcher] [begin]");

        // create the searcher if it doesn't exist yet
        if(mSearcher=3D=3Dnull){
            try{
                mSearcher=3D new IndexSearcher(getIndexReader());=20
                System.out.println("[getIndexSearcher]The index searcher =
has been created");
           =20
            }catch(Exception ex){
                System.out.println("[getIndexSearcher] Cannot =
instantiate index searcher: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{       =20
            try{
                /* do we need to re-open it ? */
                if(!mSearcher.getIndexReader().isCurrent()){
                    System.out.println("[getIndexSearcher] Need to =
re-open the index searcher (reader)");
                    mSearcher=3Dnew IndexSearcher(getIndexReader());
                }
            }catch(Exception ioex){
                System.out.println("[getIndexSearcher] Error when =
re-opening the index searcher: "+ioex);
                ioex.printStackTrace();
                fail();
            }           =20
        }
        System.out.println("[getIndexSearcher] [end]");
        return mSearcher;
    }
   =20

    private void addDocument(Document _doc){
        System.out.println("\n[addDocument][begin]");

        try{
            System.out.println("[addDocument] Want to add the doc: =
"+_doc.toString());

            IndexWriter    writer=3Dthis.getIndexWriter();

            writer.addDocument(_doc);=20
            writer.optimize();
            writer.close();           =20
           =20
        }catch(Exception docex){           =20
            System.out.println("[addDocument] Error when adding the =
document: "+ docex);
            docex.printStackTrace();
            fail();
        }
        System.out.println("[addDocument][end]");
    }
   =20
   =20
    private ArrayList<Document> buildDocuments() {
        System.out.println("\n[buildDocuments] [begin]");

        // the result to build=20
        ArrayList<Document> documents=3Dnull;
       =20
        try{
            // create the result
            documents=3D new ArrayList<Document> ();

            Document doc1=3Dnew Document();
            doc1.add(new Field(ID,"1", =
Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc1.add(new Field(CONTENT,"test", =
Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc1);                       =20
       =20
            Document doc2=3Dnew Document();
            doc2.add(new Field(ID,"2", =
Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc2.add(new Field(CONTENT,"othertest", =
Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc2);   =20
               =20
        }catch(Exception ex){           =20
            System.out.println("[buildDocuments] An error occured while =
building the list of documents: " + ex);
            ex.printStackTrace();
            fail();
        }
        System.out.println("[buildDocuments] [end]");
        return documents;       =20
    }
   =20

    private void loadIndexes() throws EncheromaxException{
       =20
        System.out.println("\n[loadIndexes] [begin]");       =20
        try{=20
           =20
            /* build all the documents we need */
            ArrayList<Document> docsToIndex=3DbuildDocuments();
           =20
            if(docsToIndex=3D=3Dnull){
                System.out.println("[oadIndexes] No doc found to =
index");
            }else{               =20
                System.out.println("[loadIndexes] Total number of doc to =
index=3D"+docsToIndex.size());
               =20
                /* create the index now ! */
                Iterator<Document> docIter=3DdocsToIndex.iterator();     =
  =20
                int total=3D0;
                while(docIter.hasNext()){
                    Document doc=3DdocIter.next();
                    addDocument(doc);   =20
                    total++;
                }                   =20
                System.out.println("[loadIndexes] Total doc =
indexed=3D"+total);

                System.out.println("[loadIndexes] Indexes successfully =
created");
            }   =20
            }catch(Exception indexex){
                indexex.printStackTrace();
                fail();
            }   =20
            System.out.println("[loadIndexes][end]");
    }

   =20
    protected void appendDocToIndex(String _ID,String _content){       =20
        System.out.println("\n[appendDocToIndex][begin]");       =20

        /* that's it */
        try{            =20
            /* build all the document we need */
            Document doc=3Dnew Document();
            doc.add(new Field(ID,_ID, =
Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc.add(new Field(CONTENT,_content, =
Field.Store.YES,Field.Index.TOKENIZED));

            /* write it to the index */
            System.out.println("[appendDocToIndex] Add the document: =
"+doc.toString());
            addDocument(doc);                            =20
            System.out.println("[appendDocToIndex] Append document =
successfully");
   =20
            }catch(Exception indexex){                =20
                 System.out.println("[appendDocToIndex] Cannot append =
the doc to the index: "+ indexex);
                 indexex.printStackTrace();
                 fail();
            }   =20
            System.out.println("[appendDocToIndex] [end]");
    }
   =20
   =20
   =20
    protected void removeDocFromIndex(String _ID) throws =
EncheromaxException{       =20
        System.out.println("\n[removeDocFromIndex][begin]");       =20
       =20
        /* first checking */
        if(_ID=3D=3Dnull){
            System.out.println("[removeDocFromIndex] No ID provided");
            fail();
        }
       =20
        /* that's it */
        try{                                =20
            // build the term with the ID
            Term iDTerm=3Dnew Term(ID,_ID);
           =20
            // get all the documents that contain the given  ID
            TermDocs docs=3DgetIndexReader().termDocs(iDTerm);
           =20
            System.out.println("[removeDocFromIndex] Trying to delete a =
document with term: "+iDTerm);       =20
            int docID=3D0;
            while(docs.next()){
                docID=3Ddocs.doc();
                getIndexReader().deleteDocument(docID);       =20
                System.out.println("[removeDocFromIndex] Document with =
ID=3D"+docID + " deleted");       =20
            }
           =20
            // avoid lock ?
            getIndexReader().close();           =20
           =20
            /* check if the document has really been removed */
            TermDocs finalDocs=3DgetIndexReader().termDocs(iDTerm);      =
     =20
            if(finalDocs.next()){
                System.out.println("[removeDocFromIndex] The document is =
still in the index !");
                //fail();
            }else{
                System.out.println("[removeDocFromIndex] The document =
has really been removed from the index");
            }
           =20
           =20
        }catch(Exception indexex){
            System.out.println("[removeDocFromIndex] Cannot remove the =
document from the index: "+ indexex);
            indexex.printStackTrace();
            fail();
        }   =20
        System.out.println("[removeDocFromIndex][end]");
    }
   =20
   =20

    private ArrayList<Document> performExactSearchIntoIndex(String =
_content,String _fieldName) {
        System.out.println("\n[performExactSearchIntoIndex][begin]");    =

        ArrayList<Document> documentsFound=3Dnull;
        try{           =20
            // build the term
             Term term=3Dnew Term(_fieldName,_content);
               =20
            //     search now !
            TermDocs docs=3DgetIndexReader().termDocs(term);       =20
           =20
            // build the result
            documentsFound=3Dnew ArrayList<Document>();   =20

            int docID=3D0;
            while(docs.next()){
                docID=3Ddocs.doc();
                System.out.println("[performExactSearchIntoIndex] Doc =
found with ID=3D"+docID);               =20
                Document currentDoc=3DgetIndexReader().document(docID);  =
     =20
                documentsFound.add(currentDoc);=20
            }   =20
           =20
        }catch(Exception querex){
            System.out.println("[performExactSearchIntoIndex] Error when =
searching into the doc index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        System.out.println("[performExactSearchIntoIndex][end]");   =20
        return documentsFound;
    }
   =20
   =20
    private ArrayList<Document> =
performApproximativeSearchIntoIndex(String _content,String _fieldName){
        =
System.out.println("\n[performApproximativeSearchIntoIndex][begin]");    =

        ArrayList<Document> documentsFound=3Dnull;
       =20
        //     get the searcher       =20
        IndexSearcher searcher =3D getIndexSearcher();
       =20
        try{           =20
            // build the query
             FuzzyQuery query=3Dnew FuzzyQuery(new =
Term(_fieldName,_content));
                    =20
            //     search now !
            Hits hits =3D searcher.search(query);
            System.out.println("[performApproximativeSearchIntoIndex] =
Total result found=3D"+ hits.length());
           =20
            // build the result
            documentsFound=3Dnew ArrayList<Document>();   =20
           =20
            int maxAproxHitReturned=3Dhits.length();
            for(int i =3D 0; i <maxAproxHitReturned; i++){=20
                =
System.out.println("[performApproximativeSearchIntoIndex] Add a document =
with score=3D"+hits.score(i));
                Document currentDoc =3D hits.doc(i);                     =
       =20
                documentsFound.add(currentDoc);=20
            }            =20
        }catch(Exception querex){
            System.out.println("[performApproximativeSearchIntoIndex] =
Error when searching into document in the index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        =
System.out.println("[performApproximativeSearchIntoIndex][end]");   =20
        return documentsFound;
    }
   =20
   =20
    private ArrayList<Document> searchDocIntoIndex(String[] =
_search,String[] _onfields){
        System.out.println("\n[searchDocIntoIndex] [begin]");   =20
        ArrayList<Document> docFound=3Dnull;
        ArrayList<Document> docFromExactSearch=3Dnull;
        ArrayList<Document> docFromApproxSearch=3Dnull;   =20
        HashSet<String> docAlreadyTreatened=3Dnull;
       =20
        if(_search =3D=3D null || _onfields=3D=3Dnull || =
_search.length!=3D_onfields.length){
            System.out.println("[searchDocIntoIndex] No search field =
given or wrong size");
            fail();
        }
       =20
        /* ** search a doc by using an exact method (expect only one doc =
found) ** */
        for(int i=3D0;i<_search.length;i++){
            if(_onfields[i].toString()=3D=3DCONTENT){
                System.out.println("[searchDocIntoIndex] Perform an =
exact search on content: "+_search[i]);   =20
                =
docFromExactSearch=3DperformExactSearchIntoIndex(_search[i], =
_onfields[i]);
            }
        }       =20
        /* build the documents */
        if(docFromExactSearch=3D=3Dnull || =
docFromExactSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by =
the exact search");   =20
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned =
by the exact search (expect 1!) =3D"+docFromExactSearch.size());   =20
            // build the result here
            docFound=3Dnew ArrayList<Document>();
            // keep the doc found by the exact method to avoid having =
him twice in the final result
            docAlreadyTreatened=3Dnew HashSet<String> =
(docFromExactSearch.size());
           =20
            for(int i=3D0;i<docFromExactSearch.size();i++){
                docFound.add(docFromExactSearch.get(i));
               =20
                // flag the doc ID as treatened
                =
docAlreadyTreatened.add(docFromExactSearch.get(i).get(ID));
            }
        }
       =20
        /* ** search a doc by using an approximative  method ** */
        for(int i=3D0;i<_search.length;i++){
            if(_onfields[i].toString()=3D=3DCONTENT){
                System.out.println("[searchDocIntoIndex] Perform an =
approximative search on content: "+_search[i]);   =20
                =
docFromApproxSearch=3DperformApproximativeSearchIntoIndex(_search[i], =
_onfields[i]);
            }
        }       =20
        /* build the documents */
        if(docFromApproxSearch=3D=3Dnull || =
docFromApproxSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by =
the approximative search");   =20
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned =
by the approximative search=3D"+docFromApproxSearch.size());   =20
            // build the result here
            if(docFound=3D=3Dnull)
                docFound=3Dnew ArrayList<Document>();
            for(int i=3D0;i<docFromApproxSearch.size();i++){
               =20
                if(docAlreadyTreatened!=3Dnull && =
!docAlreadyTreatened.contains(docFromApproxSearch.get(i).get(ID))){
                    docFound.add(docFromApproxSearch.get(i));
                }else if(docAlreadyTreatened=3D=3Dnull){
                    docFound.add(docFromApproxSearch.get(i));
                }else
                    System.out.println("[searchDocIntoIndex] Doc with =
ID=3D"+docFromApproxSearch.get(i).get(ID) + " already treatened by the =
exact search");   =20
            }
        }
        System.out.println("[searchDocIntoIndex] [end]");
        return docFound;
    }


    public  static Test suite() {       =20
        TestSuite testsuite =3D new TestSuite();
        testsuite.addTest(new IndexTest("testIndexManagement"));       =20
        return testsuite;
    }   =20
   =20
   =20
   =20
    public void testIndexManagement(){
        System.out.println("[testIndexManagement][begin]");       =20
        Date justBefore=3Dnew Date();
        long timeBefore=3DjustBefore.getTime();
       =20
               =20
        /* make sure we don't already have a new do in the index  */
        System.out.println("\n\n---- Not in the index =
----------------------------------------");
        try{           =20
            String[] field=3Dnew String[1];
            field[0]=3DCONTENT;
            String[] search=3Dnew String[1];
            search[0]=3D"new";
            assertNull(searchDocIntoIndex(search,field));       =20
           =20
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }       =20
       =20
        /* append a new doc to the index  */
        System.out.println("\n\n---- Append doc =
----------------------------------------");
        try{
            appendDocToIndex("3", "new")    ;       =20
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }       =20
   =20
       =20
        /* make sure we have the new doc once in the index */
        System.out.println("\n\n---- Once in the index =
----------------------------------------");
        try{
            String[] field=3Dnew String[1];
            field[0]=3DCONTENT;
            String[] search=3Dnew String[1];
            search[0]=3D"new";
            assertEquals(searchDocIntoIndex(search,field).size(),1);     =
  =20
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }   =20
       =20
        /* delete the doc */
        System.out.println("\n\n---- Delete the doc =
----------------------------------------");
        try{
            removeDocFromIndex("3");
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }   =20

       =20
        /* make sure he disappeared from the index */
        System.out.println("\n\n---- Doc dissapeared =
----------------------------------------");
        try{
            String[] field=3Dnew String[1];
            field[0]=3DCONTENT;
            String[] search=3Dnew String[1];
            search[0]=3D"new";
            assertNull(searchDocIntoIndex(field,search));       =20
           =20
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }
       =20
       =20
        Date justAfter=3Dnew Date();
        long timeAfter=3DjustAfter.getTime();
        System.out.println("[testIndexManagement] Test  performed in " + =
(timeAfter-timeBefore) + " ms");
        System.out.println("[testIndexManagement][end]\n");
    }
}

 	=09
---------------------------------
 D=E9couvrez une nouvelle fa=E7on d'obtenir des r=E9ponses =E0 toutes =
vos questions ! Profitez des connaissances, des opinions et des =
exp=E9riences des internautes sur Yahoo! Questions/R=E9ponses.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 09:21:33 2007
Return-Path: <java-user-return-28004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68048 invoked from network); 11 May 2007 09:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 09:21:32 -0000
Received: (qmail 53824 invoked by uid 500); 11 May 2007 09:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53740 invoked by uid 500); 11 May 2007 09:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53717 invoked by uid 99); 11 May 2007 09:21:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 02:21:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of neu.hubs@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 02:21:23 -0700
Received: by mu-out-0910.google.com with SMTP id i10so485518mue
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 02:21:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=k4FPDs0q80VUTWzvWr2jt1gNd3mzwmAgtMeydStQl0EdblkPDYG7p09RehSIyb5ES4L9Vtd4QwPleU63uwek3o9mqZJvprvUZM3w/ngTUd0qJ+glS6HGsXuAIZtuYJXpweKia5HoIw/X1uU88NKqzJAmfDF1rrELl7Lk1+Pvhwo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=cWdDPNRz4tE8j3SIgrjuidYcVssjP1KZ6trekiVDEQ+kGJ3C5qJITKDLv6kTtU0pp3KkiHSjOMgOCbqYz7Tu+LCU7ISJYxBa/IzrdFZZioOUONmJxTzDxygmgn6yesl1ojNMb4nW4qPSN45ebRAVsep/9DHuwWTHVMk4hSqjulE=
Received: by 10.82.145.7 with SMTP id s7mr5072125bud.1178875261625;
        Fri, 11 May 2007 02:21:01 -0700 (PDT)
Received: by 10.82.165.3 with HTTP; Fri, 11 May 2007 02:21:01 -0700 (PDT)
Message-ID: <d8bb68df0705110221v1943da67jeb0afc8237d0a5a2@mail.gmail.com>
Date: Fri, 11 May 2007 17:21:01 +0800
From: "=?GB2312?B?uvqxpsuz?=" <neu.hubs@gmail.com>
To: java-user@lucene.apache.org
Subject: Is the Similarity Algorithm of Lucene Better Than Standard VSM?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,all:

Is the Similarity Algorithm of Lucene Better Than Standard VSM(vector
space model)?
Are there any papers that have proved this?
Could you send me this paper?
Thanks a lot.

neu.hubs@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 10:33:35 2007
Return-Path: <java-user-return-28005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86884 invoked from network); 11 May 2007 10:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 10:33:34 -0000
Received: (qmail 37382 invoked by uid 500); 11 May 2007 10:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37345 invoked by uid 500); 11 May 2007 10:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37330 invoked by uid 99); 11 May 2007 10:33:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 03:33:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [12.40.51.197] (HELO mailhost.virtusa.com) (12.40.51.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 03:33:26 -0700
Received: from ws-mailsvr.Virtusa.com ([10.3.8.4]unverified) by mailhost.virtusa.com with InterScan Message Security Suite; Fri, 11 May 2007 06:26:27 -0400
Received: from HS-MAILSVR.Virtusa.com ([10.4.10.60]) by ws-mailsvr.Virtusa.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 06:33:05 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C793B7.B639D699"
Subject: Indexing the ORACLE using lucene
Date: Fri, 11 May 2007 16:02:44 +0530
Message-ID: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing the ORACLE using lucene
Thread-Index: AceTt7Xypa5FEdeeT8qs/z3Pdum0/g==
From: "Krishna Prasad Mekala" <krishnapm@virtusa.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 10:33:05.0024 (UTC) FILETIME=[C23A3000:01C793B7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C793B7.B639D699
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi all,

=20

I am new to Lucene. I am developing a small search utility using lucene.
I have to create the index from my Oracle database. Can anybody tell me
how to create the index from Oracle using lucene? Please send me code
snippets if possible.

=20

Your valuable help is highly appreciated.=20

=20

Thanks in advance.

=20

Thanks and best regards,

=20

Krishna Prasad M


------_=_NextPart_001_01C793B7.B639D699--

From java-user-return-28006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 10:45:43 2007
Return-Path: <java-user-return-28006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90043 invoked from network); 11 May 2007 10:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 10:45:42 -0000
Received: (qmail 50705 invoked by uid 500); 11 May 2007 10:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50665 invoked by uid 500); 11 May 2007 10:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50650 invoked by uid 99); 11 May 2007 10:45:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 03:45:41 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.247.81.251] (HELO tss16.serverconfig.com) (63.247.81.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 03:45:34 -0700
Received: from cpanel by tss16.serverconfig.com with local (Exim 4.63)
	(envelope-from <recruitment@purplefrogtext.com>)
	id 1HmScc-0001Eo-4j
	for java-user@lucene.apache.org; Fri, 11 May 2007 12:45:14 +0200
Received: from 134.219.176.98 ([134.219.176.98]) by www.purplefrogtext.com
	(Horde MIME library) with HTTP; Fri, 11 May 2007 12:45:14 +0200
Message-ID: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
Date: Fri, 11 May 2007 12:45:14 +0200
From: recruitment@purplefrogtext.com
To: java-user@lucene.apache.org
Subject: Lucene Developer
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - tss16.serverconfig.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32002 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - purplefrogtext.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

We are a startup company based in the city of Sheffield, UK actively  
seeking  experienced java programmers to develop intelligent web  
mining systems using Apache Lucene/Nutch.  Experience of genetic  
programming would be an advantage but is not essential.  If you are  
interested in this fascinating and challenging post please send us  
your resume/c.v. as soon as possible.

Purple Frog Text


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 11:14:42 2007
Return-Path: <java-user-return-28007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97535 invoked from network); 11 May 2007 11:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 11:14:41 -0000
Received: (qmail 89119 invoked by uid 500); 11 May 2007 11:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88884 invoked by uid 500); 11 May 2007 11:14:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88873 invoked by uid 99); 11 May 2007 11:14:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 04:14:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 04:14:34 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 569AA5B52D
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 04:14:13 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <52c3ddca0705102253h43544849kdf18ce2ecd595c80@mail.gmail.com>
References: <852257.34073.qm@web50310.mail.re2.yahoo.com> <52c3ddca0705102253h43544849kdf18ce2ecd595c80@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8EFCA1E1-5BA5-47EC-B2C0-51D62903F0AD@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Stop words (how to create ideal set of stop words?)
Date: Fri, 11 May 2007 07:14:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Use Lucener's tend to be more practically oriented!  :-)

For some reason, the application of zipf's law comes to mind, whereby  
you could look at the most commonly occurring words and  
mathematically deduce which ones are "too" common, but where your  
cutoff is still may be difficult to choose.  You will always have the  
balance between losing some information and shrinking the index, etc.

Google Scholar search for "zipf's law +stopwords" yields: http:// 
ir.dcs.gla.ac.uk/terrier/publications/rtlo_DIRpaper.pdf  which looks  
like it holds promise (but I admit I didn't read beyond the abstract)  
as it has references to old approaches for the same task, plus a  
"new" approach.

Good Luck and if you find something that works well, we would love to  
have it contributed back!

-Grant



On May 11, 2007, at 1:53 AM, Lukas Vlcek wrote:

> Hi,
>
> Thanks for your comments!
>
> I was thinking that there could be some method based on frequency and
> linguistic research. So far it seems that manually choosen set of  
> words is
> very common approach but this leaves some questions opened in my mind.
> I am not a native english speaker but I think that this (
> http://www.ranks.nl/tools/stopwords.html) makes sense, but for my  
> native
> language (http://www.ranks.nl/stopwords/czech.html) this can be  
> questionable
> in some cases (especially in case of specific corpus).
>
> What I am searching for is some authomatic method of stop words  
> extraction
> based on given set of documents. I don't expect such method to be  
> 100% exact
> but I would expect it to be ~good enough~.
>
> I will try to search in citeseer as well (was hoping somebody could  
> give me
> some references of this kind).
>
> Thanks!
> Lukas
>
> On 5/11/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>
>> There is a handy class in contrib/misc.../ that will show you the  
>> most
>> frequent terms in an index. Handy dandy.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: Lukas Vlcek <lukas.vlcek@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, May 10, 2007 2:39:35 PM
>> Subject: Stop words (how to create ideal set of stop words?)
>>
>> Hi,
>>
>> Can anybody point me to some references how to create an ideal set  
>> of stop
>> words? I konw that this is more like a theoretical question but  
>> how do
>> Luceners determine which words shuold be excluded when creating  
>> Analyzers
>> for a new languages? And which technique was used for validation  
>> of stop
>> word lists in current Analyzers?
>>
>> More specificaly I am interested in situations when there is a  
>> need to
>> build
>> a search engine around specific corpus (for example when we need  
>> to search
>> set of articles related to programming languages only). Given a  
>> specific
>> corpus is there any recommended technique of stop words derivation?
>>
>> Thanks,
>> Lukas
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 11:29:07 2007
Return-Path: <java-user-return-28008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3269 invoked from network); 11 May 2007 11:29:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 11:29:05 -0000
Received: (qmail 13291 invoked by uid 500); 11 May 2007 11:29:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13267 invoked by uid 500); 11 May 2007 11:29:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 51151 invoked by uid 99); 11 May 2007 08:12:20 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=IRalzfXlxqp5/FTZOuXgIhRQ18XEPJPd8kc6Esa1a7/ShvPVsCdhWRFFcOm+Re9G0S8UjpkvpbicXHy5Y1GuwhU/FCMqbHodWqsQLTS4O9ivo/Bkz2oLs8juoUPJ+c0oZmByc81MZvO+ip6Ns2U83WZQhblw7ea5rf9uMcSlODM=;
X-YMail-OSG: K5OAHcUVM1lZWjbXMAFVAxEbMT71IvBvMAk_QzJwreCDM5qQyl5ch_NRh7vivaY.Lck.RUyP44NcyvZZqhxxnYmb79U9aA69s1p.MU6Fq3yWBfTIhB5a9oswWrI-
Date: Fri, 11 May 2007 10:11:48 +0200 (CEST)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Subject: Help IndexWriter,Multi-threaded index access
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-156157682-1178871108=:96118"
Content-Transfer-Encoding: 8bit
Message-ID: <128081.96118.qm@web26504.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-156157682-1178871108=:96118
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Hello,

I work on a web application deployed on a Tomcat server 5. Many jsp front pages (thanks to controllers) query a single manager (retrieved by a factory as an instance). This manager deals with Lucene index, stored by using a FSDirectory, to create several kind of documents, append or remove them from the index and so on ... The problem is that many errors often occur when the manager performs the index treatment because I don't know how to use the IndewWriter efficiently. The main question is : Can I use an single instance of IndexWriter (only ONE for the manager that means only one IndexWriter for all the front access) ? I guess it's not possible, I got so many times a "RAMDirectory.createOutput error". In that way, is it reasonable to create an IndexWriter each time the manager need to add a document ? Is there another way to proceed ?

I join a complete JUnit test which behaves exactly as my manager. The main methods to look at are testIndexManagement (the test),getIndexWriter,addDocument,performExactSearchIntoIndex,performApproximativeSearchIntoIndex.

Thank you for your help,

Best regards,

Thomas Legrand
France


/**************************************************************************************/

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;

import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;


public class IndexTest extends TestCase{

    protected static IndexWriter mWriter=null;
    protected static IndexReader mReader=null;
    protected static IndexSearcher mSearcher=null;
    protected static Analyzer mIndexAnalyser=null;
    
    private static  boolean IS_INDEX_LOADED=false;
    private static  String INDEX_LOCATION="indexes//test";
    private static  String ID="ID";
    private static  String CONTENT="content";
    
    public static void main(String[] args) {
        junit.textui.TestRunner.run(suite());
    }

    public IndexTest(String _testName) {
        super(_testName);
        System.out.println("--> "+_testName); 
    }
    
    
    protected void tearDown() throws Exception {
        super.tearDown();
    }
    
    protected void setUp() throws Exception {        
        super.setUp();
        
        /* load index */
        if(IS_INDEX_LOADED){
            System.out.println("\n[setUp] Index already loaded");
        }else{
            System.out.println("\n[setUp] Index loading...");
            loadIndexes();
            IS_INDEX_LOADED=true;
        }
    }


    private Analyzer getIndexAnalyser(){
        System.out.println("\n[getIndexAnalyser][begin]");        
        try{
            if(mIndexAnalyser==null){
                mIndexAnalyser=new SimpleAnalyzer(); 
                System.out.println("[getIndexAnalyser] SimpleAnalyzer created");
            }    
        }catch(Exception analyzex){
            System.out.println("[getIndexAnalyser] Error when creating the analyzers: "+analyzex);
            analyzex.printStackTrace();
            fail();            
        }
        System.out.println("[getIndexAnalyser] [end]");
        return mIndexAnalyser;
    }
    
    
    private IndexWriter getIndexWriter(){
        System.out.println("\n[getIndexWriter][begin]");
        Directory indexDir=null;
        
        // Where is the index ?    
        System.out.println("[getIndexWriter] Indexes located in: "+INDEX_LOCATION);
        
        // Get the ad's analyser
        Analyzer analyser = getIndexAnalyser(); 
        
        /* create a new writer each time it's required ! */
        if(mWriter==null ){
            try{
                indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
                 
                boolean isTheIndexNew=true;
                mWriter = new IndexWriter(indexDir, analyser, isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer created");
            
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{
            try{
                indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
                 
                boolean isTheIndexNew=true;
                mWriter = new IndexWriter(INDEX_LOCATION, analyser, isTheIndexNew);
                System.out.println("[getIndexWriter] Doc index writer created");
            
            }catch(Exception ex){
                System.out.println("[getIndexWriter] Cannot instantiate index writer: "+ex);
                ex.printStackTrace();
                fail();
            }
        }
        System.out.println("[getIndexWriter] [end]");
        return mWriter;
    }
    
    
    private IndexReader getIndexReader(){
        System.out.println("\n[getIndexReader][begin]");
        Directory indexDir=null;
        
        // Where is the index ?
        try{
            indexDir=FSDirectory.getDirectory(INDEX_LOCATION);
        }catch(Exception direx){
            System.out.println("[getIndexReader] Error when asserting the directory for the index");
            direx.printStackTrace();
            fail();
        }
        System.out.println("[getIndexReader] Indexes located in: "+INDEX_LOCATION);
        
        // create the reader if it doesn't exist yet
        if(mReader==null){
            try{
                mReader= IndexReader.open(indexDir); 
                System.out.println("[getIndexReader] User index reader has been created");
            
            }catch(Exception ex){
                System.out.println("[getIndexReader] Cannot instantiate index reader: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{                    
            try{
                /* do we need to re-open it ? */
                if(mReader.isCurrent()==false){
                    System.out.println("[getIndexReader] Need to re-open the index reader");
                    mReader=IndexReader.open(indexDir);
                }
            }catch(Exception ioex){
                System.out.println("[getIndexReader] Error when re-opening the index reader: "+ioex);
                ioex.printStackTrace();
                fail();
            }            
        }
        System.out.println("[getIndexReader][end]");
        return mReader;
    }
    
    
    private IndexSearcher getIndexSearcher(){
        System.out.println("\n[getIndexSearcher] [begin]");

        // create the searcher if it doesn't exist yet
        if(mSearcher==null){
            try{
                mSearcher= new IndexSearcher(getIndexReader()); 
                System.out.println("[getIndexSearcher]The index searcher has been created");
            
            }catch(Exception ex){
                System.out.println("[getIndexSearcher] Cannot instantiate index searcher: "+ex);
                ex.printStackTrace();
                fail();
            }
        }else{        
            try{
                /* do we need to re-open it ? */
                if(!mSearcher.getIndexReader().isCurrent()){
                    System.out.println("[getIndexSearcher] Need to re-open the index searcher (reader)");
                    mSearcher=new IndexSearcher(getIndexReader());
                }
            }catch(Exception ioex){
                System.out.println("[getIndexSearcher] Error when re-opening the index searcher: "+ioex);
                ioex.printStackTrace();
                fail();
            }            
        }
        System.out.println("[getIndexSearcher] [end]");
        return mSearcher;
    }
    

    private void addDocument(Document _doc){
        System.out.println("\n[addDocument][begin]");

        try{
            System.out.println("[addDocument] Want to add the doc: "+_doc.toString());

            IndexWriter    writer=this.getIndexWriter();

            writer.addDocument(_doc); 
            writer.optimize();
            writer.close();            
            
        }catch(Exception docex){            
            System.out.println("[addDocument] Error when adding the document: "+ docex);
            docex.printStackTrace();
            fail();
        }
        System.out.println("[addDocument][end]");
    }
    
    
    private ArrayList<Document> buildDocuments() {
        System.out.println("\n[buildDocuments] [begin]");

        // the result to build 
        ArrayList<Document> documents=null;
        
        try{
            // create the result
            documents= new ArrayList<Document> ();

            Document doc1=new Document();
            doc1.add(new Field(ID,"1", Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc1.add(new Field(CONTENT,"test", Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc1);                        
        
            Document doc2=new Document();
            doc2.add(new Field(ID,"2", Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc2.add(new Field(CONTENT,"othertest", Field.Store.YES,Field.Index.TOKENIZED));
            documents.add(doc2);    
                
        }catch(Exception ex){            
            System.out.println("[buildDocuments] An error occured while building the list of documents: " + ex);
            ex.printStackTrace();
            fail();
        }
        System.out.println("[buildDocuments] [end]");
        return documents;        
    }
    

    private void loadIndexes() throws EncheromaxException{
        
        System.out.println("\n[loadIndexes] [begin]");        
        try{ 
            
            /* build all the documents we need */
            ArrayList<Document> docsToIndex=buildDocuments();
            
            if(docsToIndex==null){
                System.out.println("[oadIndexes] No doc found to index");
            }else{                
                System.out.println("[loadIndexes] Total number of doc to index="+docsToIndex.size());
                
                /* create the index now ! */
                Iterator<Document> docIter=docsToIndex.iterator();        
                int total=0;
                while(docIter.hasNext()){
                    Document doc=docIter.next();
                    addDocument(doc);    
                    total++;
                }                    
                System.out.println("[loadIndexes] Total doc indexed="+total);

                System.out.println("[loadIndexes] Indexes successfully created");
            }    
            }catch(Exception indexex){
                indexex.printStackTrace();
                fail();
            }    
            System.out.println("[loadIndexes][end]");
    }

    
    protected void appendDocToIndex(String _ID,String _content){        
        System.out.println("\n[appendDocToIndex][begin]");        

        /* that's it */
        try{             
            /* build all the document we need */
            Document doc=new Document();
            doc.add(new Field(ID,_ID, Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc.add(new Field(CONTENT,_content, Field.Store.YES,Field.Index.TOKENIZED));

            /* write it to the index */
            System.out.println("[appendDocToIndex] Add the document: "+doc.toString());
            addDocument(doc);                             
            System.out.println("[appendDocToIndex] Append document successfully");
    
            }catch(Exception indexex){                 
                 System.out.println("[appendDocToIndex] Cannot append the doc to the index: "+ indexex);
                 indexex.printStackTrace();
                 fail();
            }    
            System.out.println("[appendDocToIndex] [end]");
    }
    
    
    
    protected void removeDocFromIndex(String _ID) throws EncheromaxException{        
        System.out.println("\n[removeDocFromIndex][begin]");        
        
        /* first checking */
        if(_ID==null){
            System.out.println("[removeDocFromIndex] No ID provided");
            fail();
        }
        
        /* that's it */
        try{                                 
            // build the term with the ID
            Term iDTerm=new Term(ID,_ID);
            
            // get all the documents that contain the given  ID
            TermDocs docs=getIndexReader().termDocs(iDTerm);
            
            System.out.println("[removeDocFromIndex] Trying to delete a document with term: "+iDTerm);        
            int docID=0;
            while(docs.next()){
                docID=docs.doc();
                getIndexReader().deleteDocument(docID);        
                System.out.println("[removeDocFromIndex] Document with ID="+docID + " deleted");        
            }
            
            // avoid lock ?
            getIndexReader().close();            
            
            /* check if the document has really been removed */
            TermDocs finalDocs=getIndexReader().termDocs(iDTerm);            
            if(finalDocs.next()){
                System.out.println("[removeDocFromIndex] The document is still in the index !");
                //fail();
            }else{
                System.out.println("[removeDocFromIndex] The document has really been removed from the index");
            }
            
            
        }catch(Exception indexex){
            System.out.println("[removeDocFromIndex] Cannot remove the document from the index: "+ indexex);
            indexex.printStackTrace();
            fail();
        }    
        System.out.println("[removeDocFromIndex][end]");
    }
    
    

    private ArrayList<Document> performExactSearchIntoIndex(String _content,String _fieldName) {
        System.out.println("\n[performExactSearchIntoIndex][begin]");    
        ArrayList<Document> documentsFound=null;
        try{            
            // build the term
             Term term=new Term(_fieldName,_content);
                
            //     search now !
            TermDocs docs=getIndexReader().termDocs(term);        
            
            // build the result
            documentsFound=new ArrayList<Document>();    

            int docID=0;
            while(docs.next()){
                docID=docs.doc();
                System.out.println("[performExactSearchIntoIndex] Doc found with ID="+docID);                
                Document currentDoc=getIndexReader().document(docID);        
                documentsFound.add(currentDoc); 
            }    
            
        }catch(Exception querex){
            System.out.println("[performExactSearchIntoIndex] Error when searching into the doc index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        System.out.println("[performExactSearchIntoIndex][end]");    
        return documentsFound;
    }
    
    
    private ArrayList<Document> performApproximativeSearchIntoIndex(String _content,String _fieldName){
        System.out.println("\n[performApproximativeSearchIntoIndex][begin]");    
        ArrayList<Document> documentsFound=null;
        
        //     get the searcher        
        IndexSearcher searcher = getIndexSearcher();
        
        try{            
            // build the query
             FuzzyQuery query=new FuzzyQuery(new Term(_fieldName,_content));
                     
            //     search now !
            Hits hits = searcher.search(query);
            System.out.println("[performApproximativeSearchIntoIndex] Total result found="+ hits.length());
            
            // build the result
            documentsFound=new ArrayList<Document>();    
            
            int maxAproxHitReturned=hits.length();
            for(int i = 0; i <maxAproxHitReturned; i++){ 
                System.out.println("[performApproximativeSearchIntoIndex] Add a document with score="+hits.score(i));
                Document currentDoc = hits.doc(i);                             
                documentsFound.add(currentDoc); 
            }             
        }catch(Exception querex){
            System.out.println("[performApproximativeSearchIntoIndex] Error when searching into document in the index: "+ querex);
            querex.printStackTrace();
            fail();
        }
        System.out.println("[performApproximativeSearchIntoIndex][end]");    
        return documentsFound;
    }
    
    
    private ArrayList<Document> searchDocIntoIndex(String[] _search,String[] _onfields){
        System.out.println("\n[searchDocIntoIndex] [begin]");    
        ArrayList<Document> docFound=null;
        ArrayList<Document> docFromExactSearch=null;
        ArrayList<Document> docFromApproxSearch=null;    
        HashSet<String> docAlreadyTreatened=null;
        
        if(_search == null || _onfields==null || _search.length!=_onfields.length){
            System.out.println("[searchDocIntoIndex] No search field given or wrong size");
            fail();
        }
        
        /* ** search a doc by using an exact method (expect only one doc found) ** */
        for(int i=0;i<_search.length;i++){
            if(_onfields[i].toString()==CONTENT){
                System.out.println("[searchDocIntoIndex] Perform an exact search on content: "+_search[i]);    
                docFromExactSearch=performExactSearchIntoIndex(_search[i], _onfields[i]);
            }
        }        
        /* build the documents */
        if(docFromExactSearch==null || docFromExactSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by the exact search");    
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned by the exact search (expect 1!) ="+docFromExactSearch.size());    
            // build the result here
            docFound=new ArrayList<Document>();
            // keep the doc found by the exact method to avoid having him twice in the final result
            docAlreadyTreatened=new HashSet<String> (docFromExactSearch.size());
            
            for(int i=0;i<docFromExactSearch.size();i++){
                docFound.add(docFromExactSearch.get(i));
                
                // flag the doc ID as treatened
                docAlreadyTreatened.add(docFromExactSearch.get(i).get(ID));
            }
        }
        
        /* ** search a doc by using an approximative  method ** */
        for(int i=0;i<_search.length;i++){
            if(_onfields[i].toString()==CONTENT){
                System.out.println("[searchDocIntoIndex] Perform an approximative search on content: "+_search[i]);    
                docFromApproxSearch=performApproximativeSearchIntoIndex(_search[i], _onfields[i]);
            }
        }        
        /* build the documents */
        if(docFromApproxSearch==null || docFromApproxSearch.isEmpty()){
            System.out.println("[searchDocIntoIndex] No doc returned by the approximative search");    
        }else{
            System.out.println("[searchDocIntoIndex] Total doc returned by the approximative search="+docFromApproxSearch.size());    
            // build the result here
            if(docFound==null)
                docFound=new ArrayList<Document>();
            for(int i=0;i<docFromApproxSearch.size();i++){
                
                if(docAlreadyTreatened!=null && !docAlreadyTreatened.contains(docFromApproxSearch.get(i).get(ID))){
                    docFound.add(docFromApproxSearch.get(i));
                }else if(docAlreadyTreatened==null){
                    docFound.add(docFromApproxSearch.get(i));
                }else
                    System.out.println("[searchDocIntoIndex] Doc with ID="+docFromApproxSearch.get(i).get(ID) + " already treatened by the exact search");    
            }
        }
        System.out.println("[searchDocIntoIndex] [end]");
        return docFound;
    }


    public  static Test suite() {        
        TestSuite testsuite = new TestSuite();
        testsuite.addTest(new IndexTest("testIndexManagement"));        
        return testsuite;
    }    
    
    
    
    public void testIndexManagement(){
        System.out.println("[testIndexManagement][begin]");        
        Date justBefore=new Date();
        long timeBefore=justBefore.getTime();
        
                
        /* make sure we don't already have a new do in the index  */
        System.out.println("\n\n---- Not in the index ----------------------------------------");
        try{            
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertNull(searchDocIntoIndex(search,field));        
            
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }        
        
        /* append a new doc to the index  */
        System.out.println("\n\n---- Append doc ----------------------------------------");
        try{
            appendDocToIndex("3", "new")    ;        
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }        
    
        
        /* make sure we have the new doc once in the index */
        System.out.println("\n\n---- Once in the index ----------------------------------------");
        try{
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertEquals(searchDocIntoIndex(search,field).size(),1);        
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }    
        
        /* delete the doc */
        System.out.println("\n\n---- Delete the doc ----------------------------------------");
        try{
            removeDocFromIndex("3");
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }    

        
        /* make sure he disappeared from the index */
        System.out.println("\n\n---- Doc dissapeared ----------------------------------------");
        try{
            String[] field=new String[1];
            field[0]=CONTENT;
            String[] search=new String[1];
            search[0]="new";
            assertNull(searchDocIntoIndex(field,search));        
            
        } catch (Exception ex){
            ex.printStackTrace();
            fail();
        }
        
        
        Date justAfter=new Date();
        long timeAfter=justAfter.getTime();
        System.out.println("[testIndexManagement] Test  performed in " + (timeAfter-timeBefore) + " ms");
        System.out.println("[testIndexManagement][end]\n");
    }
}









 
             
---------------------------------
 Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! Mail 
--0-156157682-1178871108=:96118--

From java-user-return-28009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 11:40:21 2007
Return-Path: <java-user-return-28009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7111 invoked from network); 11 May 2007 11:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 11:40:20 -0000
Received: (qmail 31501 invoked by uid 500); 11 May 2007 11:40:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31469 invoked by uid 500); 11 May 2007 11:40:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31458 invoked by uid 99); 11 May 2007 11:40:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 04:40:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.34] (HELO web26012.mail.ukl.yahoo.com) (217.146.177.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 May 2007 04:40:11 -0700
Received: (qmail 34346 invoked by uid 60001); 11 May 2007 11:39:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=a8ZDotpvQkJDaqtjtH0VUiZjvBwRYFCkVx3riGOSU7bLg83lo+OKxGqf53TgQeg1N5lPn27r69tHgYHhBhb4Y/7c0C0o8LK/YtAlBnEmGlGELEKGoIhmhGWIJ02KDdBHBZGq+q6Rycd+NAaqXT63bY2eBhnce5qcwlHrPjl+jhg=;
X-YMail-OSG: ROXBePoVM1mJsBS88AUg_LMWeibgSlEawtk4ZklGcmTwhvYW.mRhzvd3vDCICoRjd9K1Q7oItGMy2eG4i.mKMmm24E4TWWbGCNfTnvmwRqXLVVyAA9Xey_5gUz4-
Received: from [193.36.230.96] by web26012.mail.ukl.yahoo.com via HTTP; Fri, 11 May 2007 11:39:49 GMT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Fri, 11 May 2007 11:39:49 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Stop words (how to create ideal set of stop words?)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <648875.34152.qm@web26012.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>For some reason, the application of zipf's law comes to mind, whereby  
>you could look at the most commonly occurring words and  
>mathematically deduce which ones are "too" common, but where your  
>cutoff is still may be difficult to choose.

I recently gave Andrzej a "Zipf visualisation" plug-in for Luke which may help. I can post the code somewhere if this is useful.

Mark



----- Original Message ----
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Sent: Friday, 11 May, 2007 12:14:12 PM
Subject: Re: Stop words (how to create ideal set of stop words?)

Use Lucener's tend to be more practically oriented!  :-)

For some reason, the application of zipf's law comes to mind, whereby  
you could look at the most commonly occurring words and  
mathematically deduce which ones are "too" common, but where your  
cutoff is still may be difficult to choose.  You will always have the  
balance between losing some information and shrinking the index, etc.

Google Scholar search for "zipf's law +stopwords" yields: http:// 
ir.dcs.gla.ac.uk/terrier/publications/rtlo_DIRpaper.pdf  which looks  
like it holds promise (but I admit I didn't read beyond the abstract)  
as it has references to old approaches for the same task, plus a  
"new" approach.

Good Luck and if you find something that works well, we would love to  
have it contributed back!

-Grant



On May 11, 2007, at 1:53 AM, Lukas Vlcek wrote:

> Hi,
>
> Thanks for your comments!
>
> I was thinking that there could be some method based on frequency and
> linguistic research. So far it seems that manually choosen set of  
> words is
> very common approach but this leaves some questions opened in my mind.
> I am not a native english speaker but I think that this (
> http://www.ranks.nl/tools/stopwords.html) makes sense, but for my  
> native
> language (http://www.ranks.nl/stopwords/czech.html) this can be  
> questionable
> in some cases (especially in case of specific corpus).
>
> What I am searching for is some authomatic method of stop words  
> extraction
> based on given set of documents. I don't expect such method to be  
> 100% exact
> but I would expect it to be ~good enough~.
>
> I will try to search in citeseer as well (was hoping somebody could  
> give me
> some references of this kind).
>
> Thanks!
> Lukas
>
> On 5/11/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>
>> There is a handy class in contrib/misc.../ that will show you the  
>> most
>> frequent terms in an index. Handy dandy.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: Lukas Vlcek <lukas.vlcek@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, May 10, 2007 2:39:35 PM
>> Subject: Stop words (how to create ideal set of stop words?)
>>
>> Hi,
>>
>> Can anybody point me to some references how to create an ideal set  
>> of stop
>> words? I konw that this is more like a theoretical question but  
>> how do
>> Luceners determine which words shuold be excluded when creating  
>> Analyzers
>> for a new languages? And which technique was used for validation  
>> of stop
>> word lists in current Analyzers?
>>
>> More specificaly I am interested in situations when there is a  
>> need to
>> build
>> a search engine around specific corpus (for example when we need  
>> to search
>> set of articles related to programming languages only). Given a  
>> specific
>> corpus is there any recommended technique of stop words derivation?
>>
>> Thanks,
>> Lukas
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






		
___________________________________________________________ 
Copy addresses and emails from any email account to Yahoo! Mail - quick, easy and free. http://uk.docs.yahoo.com/trueswitch2.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 12:59:17 2007
Return-Path: <java-user-return-28010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34894 invoked from network); 11 May 2007 12:59:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 12:59:16 -0000
Received: (qmail 63846 invoked by uid 500); 11 May 2007 12:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63249 invoked by uid 500); 11 May 2007 12:59:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63231 invoked by uid 99); 11 May 2007 12:59:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 05:59:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 05:59:08 -0700
Received: by ug-out-1314.google.com with SMTP id k40so668778ugc
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 05:58:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KGGm53gRDrE2HhiIZeNFUE1/5pGDKCsVuC7pE3w/0DPLRkkks6gioplWv+pN0yuwnqVrpSR4xhMkDialdf1Cw9Xu11fCV+4MxnixyLy+maxvr6o/FQpeuDHf1ssB4GlpjRmvU6G2sozWAUU2tMudespzwxX2Jumxje4FseY74VQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W/moD4Pdg0YOPpbzjZDRhVxscsWmAMrTPPcx/zG2tO6y+gL78X0o9flxsR7QtvHvaMzMP+v091nPvysOfGTAWkq9sErvRC8V+6Wg8osFtKQb7csbpKFLL4CL1xLm97i6TIO89YVPHfz+CNAmkSR9UxT/ZnvYV/3xzIwYqzmSb8o=
Received: by 10.82.126.5 with SMTP id y5mr5460319buc.1178888326441;
        Fri, 11 May 2007 05:58:46 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 11 May 2007 05:58:46 -0700 (PDT)
Message-ID: <359a92830705110558q1904db88i4c4b339413c266fe@mail.gmail.com>
Date: Fri, 11 May 2007 08:58:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to re-open the IndexSearcher's IndexReader
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB8@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41164_28153989.1178888326321"
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB8@WDCCPMAIL01.markettools.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41164_28153989.1178888326321
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As far as I know, you have to open a new instance. I don't think
this is solved in Lucene 2.1 at all.

I do remember discussions a while ago where the general idea
was to open a new reader and, perhaps, fire a few "primer" queries
at it on some background thread. Then, your main thread can switch
to the new one. Of course, you have to do some fancy-dancing to
coordinate all of the threads using that searcher...

Solr has been mentioned as having solved this problem. But I
haven't looked at it myself.

WARNING: Our applications haven't had to worry about this, so
I'm not speaking from actual experience.

Erick


On 5/11/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Maybe I should add that I am currently using Lucene 2.0.  From other
> threads I get the impression that this might be solved in Lucene 2.1.
>
> -----Original Message-----
> From: Andreas Guther [mailto:Andreas.Guther@markettools.com]
> Sent: Thursday, May 10, 2007 10:33 PM
> To: java-user@lucene.apache.org
> Subject: How to re-open the IndexSearcher's IndexReader
>
>
> Hi,
>
> How can I re-use an IndexSearcher and keep track of changes to the
> index?
>
>
> I am dealing with Index Directories of several GB.  Opening and
> IndexSearcher is very expensive and can take several seconds.  Therefore
> I am caching the IndexSearcher for re-use.
>
> Our indexes are frequently updated.  Before I pass the IndexSearcher
> retrieved from the cache I use the IndexSearcher getIndexReader() method
> to get the IndexReader and to check if the IndexReader is current (via
> the isCurrent() method).
>
> The isCurrent method is documented as follows:
>
> /**
>    * Check whether this IndexReader still works on a current version of
> the index.
>    * If this is not the case you will need to re-open the IndexReader to
>    * make sure you see the latest changes made to the index.
>    *
>    * @throws IOException
>    */
>
> Opening a new  IndexReader  is trivial.  But then how do I set the
> IndexSearcher's reader to the new one without getting a new instance?
>
>
> Thanks in advance for any help.
>
>
> Andreas
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41164_28153989.1178888326321--

From java-user-return-28011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 13:02:36 2007
Return-Path: <java-user-return-28011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35762 invoked from network); 11 May 2007 13:02:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 13:02:34 -0000
Received: (qmail 69273 invoked by uid 500); 11 May 2007 13:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69236 invoked by uid 500); 11 May 2007 13:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69225 invoked by uid 99); 11 May 2007 13:02:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 06:02:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 06:02:25 -0700
Received: by ug-out-1314.google.com with SMTP id k40so669299ugc
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 06:02:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hgWi5YpDqLR/8NwR3xblsCT6rNQ+pQTxOMEKCANTzISE5YetmOCbacXVWR1RFjt3PSEKTSWK+Qk4MuA2jtTXBY5tzIrEl69/eNKLNTASvG338Zaui0aYLGVDmmVqtDg58SjCFNVqLP1m+YTockbokOYodtzr7XIcdxWevgT4YZ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=npbaQFMF5Fzf5KU7DcjjgFzmnPWtnIeQ2ioYZkSEU2haWZd6/XCBpwHhRQM8bTz9cwPzE1IZbv/YdPRIJyEULJdtYwprqE/Q/QKncsZ8YjsG/9G7Z4XfkIZ1YtzUEvzz6KmbMzAqnZXgaceRU2Szqzb9C+VuA7AqgR9vK4PWcPY=
Received: by 10.82.113.6 with SMTP id l6mr5458530buc.1178888524173;
        Fri, 11 May 2007 06:02:04 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 11 May 2007 06:02:04 -0700 (PDT)
Message-ID: <359a92830705110602p2b7889bo1d207e9a2b6f45ed@mail.gmail.com>
Date: Fri, 11 May 2007 09:02:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the ORACLE using lucene
In-Reply-To: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41201_23086202.1178888524129"
References: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41201_23086202.1178888524129
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Search the mail archive for Oracle, and there's lengthy discussion. The
short form is that you query your database, taking selected
data from it and add it to a Lucene document, then write the
document to your Lucene index. Repeat this for as many "documents"
as you need.

There are a large number of decisions to be made. For instance,
what constitutes a "document". Whether (or how much) to de-normalize
your data. etc. The question "how to create an index from an Oracle
database" is far too general to give any more specific advice.


Best
Erick

On 5/11/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
>
> Hi all,
>
>
>
> I am new to Lucene. I am developing a small search utility using lucene.
> I have to create the index from my Oracle database. Can anybody tell me
> how to create the index from Oracle using lucene? Please send me code
> snippets if possible.
>
>
>
> Your valuable help is highly appreciated.
>
>
>
> Thanks in advance.
>
>
>
> Thanks and best regards,
>
>
>
> Krishna Prasad M
>
>

------=_Part_41201_23086202.1178888524129--

From java-user-return-28012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 13:32:38 2007
Return-Path: <java-user-return-28012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52926 invoked from network); 11 May 2007 13:32:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 13:32:38 -0000
Received: (qmail 31016 invoked by uid 500); 11 May 2007 13:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30984 invoked by uid 500); 11 May 2007 13:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30973 invoked by uid 99); 11 May 2007 13:32:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 06:32:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 06:32:30 -0700
Received: by py-out-1112.google.com with SMTP id a25so756187pyi
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 06:32:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=NW2X6Kihgf01iz2tTo9dyVTfo2J3uxn93snDBVgcAkEQQgzIaJb4xrApMl4OPGG+VrAc/98M5P9MaR9zALlB81aOidCIOnxQjYNzNHjS2/+CLPlP2g3eGEm9w8JvvCV4gl9C6vRbET4UTjH4GVoWJLCHntnYGYmVqKzLFuNQNYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=gJRvVxJVUnURWKhDt27VbupxjQOA34GbW+fP+1HjmYjD2S49zSeCMVCE47ZdWdckPpWViDV0SLrDAp4Gqq8HwLCjRFftLR5uMRNLc8tYzzwIPVdJEkiZXLaGpXv/wgHq3uUg9BKFiLhp5woKTr6q/pd9lp8SGiPOnKYP6q4t65A=
Received: by 10.35.43.10 with SMTP id v10mr5010228pyj.1178890326141;
        Fri, 11 May 2007 06:32:06 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Fri, 11 May 2007 06:32:06 -0700 (PDT)
Message-ID: <c68e39170705110632n792c1db3l5feff52c29d0c124@mail.gmail.com>
Date: Fri, 11 May 2007 09:32:06 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: optimization behaviour
In-Reply-To: <242AB84B-CF70-417D-8716-74CA9E54FA28@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com>
	 <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com>
	 <242AB84B-CF70-417D-8716-74CA9E54FA28@gmail.com>
X-Google-Sender-Auth: 70ccf453c0cab498
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/10/07, karl wettin <karl.wettin@gmail.com> wrote:
> > Deleted documents are removed on segment merges (for documents marked
> > as deleted in those segments).
>
> > Due to the nature of an inverted index, it's impossible w/o going over
> > the complete index looking for all references to that docid.
>
> What about alternative solutions to avoid change of document numbers?
> That would be an alternative solution for me. Perhaps something like
> adding dummy documents, marking them deleted even after merge or so?
> What would the effects or implications be?

Thats an interesting question.
One problem would be the growth of maxDoc and the corresponding growth
of filters, fieldCache entries, and maxDoc exceeding 2GB.  So it's
probably doable in the short term, but broken in the long term for
constantly changing indicies.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 16:16:46 2007
Return-Path: <java-user-return-28013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18286 invoked from network); 11 May 2007 16:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 16:16:45 -0000
Received: (qmail 56432 invoked by uid 500); 11 May 2007 16:16:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56397 invoked by uid 500); 11 May 2007 16:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56386 invoked by uid 99); 11 May 2007 16:16:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:16:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hans-christian.stadler@psi.ch designates 129.129.191.54 as permitted sender)
Received: from [129.129.191.54] (HELO MAILSEND02.psi.ch) (129.129.191.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:16:36 -0700
Received: from pc5443.psi.ch ([129.129.195.206]) by MAILSEND02.psi.ch with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 18:16:13 +0200
From: Stadler Hans-Christian <hans-christian.stadler@psi.ch>
Organization: PSI
To: java-user@lucene.apache.org
Subject: Numerical fields
Date: Fri, 11 May 2007 18:16:13 +0200
User-Agent: KMail/1.9.1
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
In-Reply-To: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705111816.13473.hans-christian.stadler@psi.ch>
X-OriginalArrivalTime: 11 May 2007 16:16:13.0882 (UTC) FILETIME=[B22499A0:01C793E7]
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an enhancment/plugin to Lucene which would allow
queries like

myNumericalField > 100

I know that usually one has to index such fields as text with
the property   a > b => lex(text(a)) > lex(text(b))  and devise
the text(n) transformation appropriately.

What I'm looking for is an enhancement which would eliminate
the a -> text(a) transformation or simplify it. Is it necessary f.ex.
to implement the above query as a range query

100 <= myNumericalField <= 999999999999999999999999.....

Since many people use numeric field, I guess there exists some
enhancement allready that simplifz the treatment of numerical fields.

HC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 16:34:33 2007
Return-Path: <java-user-return-28014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27947 invoked from network); 11 May 2007 16:34:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 16:34:31 -0000
Received: (qmail 95656 invoked by uid 500); 11 May 2007 16:34:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95621 invoked by uid 500); 11 May 2007 16:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95610 invoked by uid 99); 11 May 2007 16:34:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:34:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:34:23 -0700
Received: by ug-out-1314.google.com with SMTP id k40so705894ugc
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 09:34:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=EAVmdRO1/QcmBaRfJE4iaCdA/9RAfoe/zAXejw8iiQo6q2/X6EaMoex88AeyaLJuMqjGMeydlM9qJvJKFK4CpIDxOthbk/dRYbSEdcDOEN8Z0cBLp8KX/L74iBLr2nu+ZBlK1G/zDGPjmhGVp3czfxe69YaDuQDmMFOBkclbX9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=orR4tiCj9ymsK9QzjlmgV6UZbVSKps2bmBqzV0BXNkxprYrty4KMfqFVhBCpGgMDdeqiePUeSLNZWdgZp7bmGoMKCjEQ5wF8WHR+6EKDY0L8uEqkhy4uD9C1vF0TcU0njD2W6NPRugH4ONr4RgCbjdXuFI6g7XWvwMCrEZgcFro=
Received: by 10.66.222.9 with SMTP id u9mr2671832ugg.1178901241673;
        Fri, 11 May 2007 09:34:01 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id m1sm7669955uge.2007.05.11.09.33.57;
        Fri, 11 May 2007 09:34:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c68e39170705101229t74899e0ej3d017b44f0d4a252@mail.gmail.com>
References: <EE6D93FA-163A-4FF9-B664-5298DA29B704@gmail.com> <c68e39170705101228j3c0fbd02ifd357f4748199fac@mail.gmail.com> <c68e39170705101229t74899e0ej3d017b44f0d4a252@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FC851C6A-F4D2-4ABF-98CC-626679E04BC3@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: optimization behaviour
Date: Fri, 11 May 2007 18:32:51 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


10 maj 2007 kl. 21.29 skrev Yonik Seeley:

> On 5/10/07, Yonik Seeley <yonik@apache.org> wrote:
>> Deleted documents are removed on segment merges (for documents marked
>> as deleted in those segments).
>
> Of course, that doesn't have to be the case.  It would be a trivial
> change to merge segments and not remove the deleted docs.  That
> usecase could be useful in conjunction with ParallelReader.

I'm at this now. There are two issues as far as I got:

The IllegalArgumentException thrown in SegmentReader.document

   /**
    * @throws CorruptIndexException if the index is corrupt
    * @throws IOException if there is a low-level IO error
    */
   public synchronized Document document(int n, FieldSelector  
fieldSelector) throws CorruptIndexException, IOException {
       ensureOpen();
     if (isDeleted(n))
       throw new IllegalArgumentException
               ("attempt to access a deleted document");
     return fieldsReader.doc(n, fieldSelector);
   }

I can get around that problem, but I still have to ask: is there a  
reason for not allowing consumers to read deleted documents?

I'm not certain how to mark the document deleted in the merged  
directory via SegmentMerger.mergeField or FieldsWriter.addDocument.  
Without doing that, the document will not be deleted. My solution for  
now is to add an empty dummy document instead.





-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 16:40:32 2007
Return-Path: <java-user-return-28015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33887 invoked from network); 11 May 2007 16:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 16:40:31 -0000
Received: (qmail 13107 invoked by uid 500); 11 May 2007 16:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13064 invoked by uid 500); 11 May 2007 16:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13052 invoked by uid 99); 11 May 2007 16:40:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:40:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:40:22 -0700
Received: by wr-out-0506.google.com with SMTP id 68so1017402wra
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 09:40:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=corFGq1e2ZTA/5qzMGw+FRIUt6TsndaCXQqI5rn6L6RFuWGJir0jIU+gEfrlrEXTDN927ndzU30revq1SSaIgtat1j4wf+wQ4RnAnS/B/GzxQyye1AgG82izRzCwdkg/X8gyNkpk4EfBSiqOLgDO30+WMl5JENMpFTdsy/lCBeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rcIRVt613Xw1ChJhIJ/PmItQUf1UKQIPx8wWx6kNvRJowGe4rtlQr8GiI0avY8FlnUVMZ6maqgSY2vErEfoIOWXPNW8/Ixw643JdwhRFz2joeZWd5XigwNb6kmvuBCVcsTJtDp9aCCXAUGkg1hHxiPVEGqVywfLFOdCSD/xN0XQ=
Received: by 10.78.177.3 with SMTP id z3mr915249hue.1178901601260;
        Fri, 11 May 2007 09:40:01 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id m1sm7681805uge.2007.05.11.09.39.57;
        Fri, 11 May 2007 09:40:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <200705111816.13473.hans-christian.stadler@psi.ch>
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np> <200705111816.13473.hans-christian.stadler@psi.ch>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <01C14BDC-18A8-4279-AF9E-E428D5A48031@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Numerical fields
Date: Fri, 11 May 2007 18:38:46 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


11 maj 2007 kl. 18.16 skrev Stadler Hans-Christian:

> Is there an enhancment/plugin to Lucene which would allow
> queries like
>
> myNumericalField > 100

FunctionQuery might be what you are looking for.

http://issues.apache.org/jira/browse/LUCENE-446

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 16:45:33 2007
Return-Path: <java-user-return-28016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36631 invoked from network); 11 May 2007 16:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 16:45:31 -0000
Received: (qmail 29237 invoked by uid 500); 11 May 2007 16:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29205 invoked by uid 500); 11 May 2007 16:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29194 invoked by uid 99); 11 May 2007 16:45:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:45:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 09:45:13 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 09:44:46 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: IndexReader.isCurrent very slow in 2.1
Date: Fri, 11 May 2007 09:44:45 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexReader.isCurrent very slow in 2.1
Thread-Index: AceT666fenwqaopOTzSi9O7ge0kX8A==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 16:44:46.0511 (UTC) FILETIME=[AEF30BF0:01C793EB]
X-Virus-Checked: Checked by ClamAV on apache.org

I moved today from Lucene 2.0 to 2.1 and I noticed that the
IndexReader.isCurrent() call is very expensive.  What took 20
milliseconds in 2.0 now takes seconds in 2.1.

I have the following scenario:

- 7 index directories of different size, ranging from some MB to 5 GIG=20
- Some index are upgraded to Lucene 2.1, some are still in the old
format, depending if an update happened or not
- Cached IndexSearcher for each index
- I was using the IndexSearcher's indexReader to check if changes
happened since the Searcher was chached

The isCurrent check takes between less than 10 millis up to 1400 millis,
depending on the folder.  The time needed seems not to be relevant to
the size of the index.

However, the isCurrent check is definitely too expensive. =20

What can I do to get a faster information?

Andreas=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 17:21:32 2007
Return-Path: <java-user-return-28017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56378 invoked from network); 11 May 2007 17:21:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 17:21:30 -0000
Received: (qmail 10095 invoked by uid 500); 11 May 2007 17:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10056 invoked by uid 500); 11 May 2007 17:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10043 invoked by uid 99); 11 May 2007 17:21:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:21:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bbrown@botspiritcompany.com designates 216.154.214.159 as permitted sender)
Received: from [216.154.214.159] (HELO botspiritcompany.com) (216.154.214.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:21:21 -0700
Received: from www.botspiritcompany.com (botspiritcompany.com [127.0.0.1])
	by botspiritcompany.com (8.13.1/8.13.1) with ESMTP id l4BHNIs9013691
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 13:23:18 -0400
From: "bbrown" <bbrown@botspiritcompany.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the ORACLE using lucene
Date: Fri, 11 May 2007 13:23:17 -0400
Message-Id: <20070511172017.M17413@www.botspiritcompany.com>
In-Reply-To: <359a92830705110602p2b7889bo1d207e9a2b6f45ed@mail.gmail.com>
References: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com> <359a92830705110602p2b7889bo1d207e9a2b6f45ed@mail.gmail.com>
X-Mailer: Open WebMail 2.51 20050228
X-OriginatingIP: 12.163.2.10 (bbrown)
MIME-Version: 1.0
Content-Type: text/plain;
	charset=iso-8859-1
Received-SPF: pass (botspiritcompany.com: domain of bbrown@www.botspiritcompany.com designates 127.0.0.1 as permitted sender) receiver=botspiritcompany.com; client-ip=127.0.0.1; helo=www.botspiritcompany.com; envelope-from=bbrown@www.botspiritcompany.com; x-software=spfmilter 0.97 http://www.acme.com/software/spfmilter/ with libspf2-1.0.0;
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 11 May 2007 09:02:04 -0400, Erick Erickson wrote
> Search the mail archive for Oracle, and there's lengthy discussion. The
> short form is that you query your database, taking selected
> data from it and add it to a Lucene document, then write the
> document to your Lucene index. Repeat this for as many "documents"
> as you need.
> 
> There are a large number of decisions to be made. For instance,
> what constitutes a "document". Whether (or how much) to de-normalize
> your data. etc. The question "how to create an index from an Oracle
> database" is far too general to give any more specific advice.
> 
> Best
> Erick
> 
> On 5/11/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
> >
> > Hi all,
> >
> >
> >
> > I am new to Lucene. I am developing a small search utility using lucene.
> > I have to create the index from my Oracle database. Can anybody tell me
> > how to create the index from Oracle using lucene? Please send me code
> > snippets if possible.
> >
> >
> >
> > Your valuable help is highly appreciated.
> >
> >
> >
> > Thanks in advance.
> >
> >
> >
> > Thanks and best regards,
> >
> >
> >
> > Krishna Prasad M
> >
> >

Yea, there isnt much documentation out there on how to do this.  But, ideally 
it is pretty simple.  Your goal is to index the content from your database 
into the Lucene.  That is pretty much it.  So, just look at the Document 
creation code.

Also, to other lucene developers; I actually had to index the 'ID' field.  I 
kept getting null if I didnt index it?

This is what I have done with MySQL, which should work for Oracle (jdbc).

http://docs.google.com/Doc?id=dq6cjjg_72fmbcj4

On updating the index.  For me, it is just as easy for me to delete the 
entire index (eg, delete the entire directory) and re-index the database 
again.  It takes more processing as opposed to a 'real' update but is simpler 
development-wise.

--
Berlin Brown
[berlin dot brown at gmail dot com]
http://botspiritcompany.com/botlist/?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 17:21:41 2007
Return-Path: <java-user-return-28018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56624 invoked from network); 11 May 2007 17:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 17:21:40 -0000
Received: (qmail 10833 invoked by uid 500); 11 May 2007 17:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10780 invoked by uid 500); 11 May 2007 17:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10749 invoked by uid 99); 11 May 2007 17:21:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:21:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:21:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1FAB85B770; Fri, 11 May 2007 10:21:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1CC447F403;
	Fri, 11 May 2007 10:21:04 -0700 (PDT)
Date: Fri, 11 May 2007 10:21:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: recruitment@purplefrogtext.com
Cc: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Lucene Developer
In-Reply-To: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
Message-ID: <Pine.LNX.4.58.0705111019210.3462@hal.rescomp.berkeley.edu>
References: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Please do not send resume requests to any of the @lucene email lists.
There is a wiki page listing parties available for hire who are
knowledgable in Lucene for this explicit purpose...

	http://wiki.apache.org/lucene-java/Support

: We are a startup company based in the city of Sheffield, UK actively
: seeking  experienced java programmers to develop intelligent web
: mining systems using Apache Lucene/Nutch.  Experience of genetic
: programming would be an advantage but is not essential.  If you are
: interested in this fascinating and challenging post please send us
: your resume/c.v. as soon as possible.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 17:35:21 2007
Return-Path: <java-user-return-28019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61601 invoked from network); 11 May 2007 17:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 17:35:20 -0000
Received: (qmail 32298 invoked by uid 500); 11 May 2007 17:35:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32271 invoked by uid 500); 11 May 2007 17:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32260 invoked by uid 99); 11 May 2007 17:35:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:35:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:35:12 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 564CC21F7F7
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 13:37:07 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Fri, 11 May 2007 13:34:52 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id ACD5240D6; Fri, 11 May 2007 13:34:51 -0400 (EDT)
Message-Id: <1178904891.28048.1189357841@webmail.messagingengine.com>
X-Sasl-Enc: is9dbwd1pZAtil7zsC2dxq1Ls8K2p/X5hVRYlC3T2FiR 1178904891
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
Date: Fri, 11 May 2007 13:34:51 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Andreas Guther" <Andreas.Guther@markettools.com> wrote:
> I moved today from Lucene 2.0 to 2.1 and I noticed that the
> IndexReader.isCurrent() call is very expensive.  What took 20
> milliseconds in 2.0 now takes seconds in 2.1.
> 
> I have the following scenario:
> 
> - 7 index directories of different size, ranging from some MB to 5 GIG 
> - Some index are upgraded to Lucene 2.1, some are still in the old
> format, depending if an update happened or not
> - Cached IndexSearcher for each index
> - I was using the IndexSearcher's indexReader to check if changes
> happened since the Searcher was chached
> 
> The isCurrent check takes between less than 10 millis up to 1400 millis,
> depending on the folder.  The time needed seems not to be relevant to
> the size of the index.

Hmmm, that code did change in 2.1 as part of lockless commits
(LUCENE-701).

Previously we obtained the commit lock, opened the file "segments" and
read the version from that.

Now, we list the directory, locate the segments_N file with the
largest "N" (falling back to "segments" if it exists) and open that
one, and read the version.

Are you always using a 2.1 IndexReader to check isCurrent, and you are
finding that those indexes that have been updated with a 2.1
IndexWriter are the slow ones?

Or, are you comparing 2.0 isCurrent call with the 2.1 isCurrent call?

Are there are large number of files in your index directory?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 17:50:31 2007
Return-Path: <java-user-return-28020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66848 invoked from network); 11 May 2007 17:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 17:50:30 -0000
Received: (qmail 66663 invoked by uid 500); 11 May 2007 17:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66635 invoked by uid 500); 11 May 2007 17:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66624 invoked by uid 99); 11 May 2007 17:50:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:50:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:50:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 50D435B770; Fri, 11 May 2007 10:50:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4CFDE7F403
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 10:50:01 -0700 (PDT)
Date: Fri, 11 May 2007 10:50:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to re-open the IndexSearcher's IndexReader
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
Message-ID: <Pine.LNX.4.58.0705111048010.4369@hal.rescomp.berkeley.edu>
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5DB7@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Opening a new  IndexReader  is trivial.  But then how do I set the
: IndexSearcher's reader to the new one without getting a new instance?

just reopen a new IndexSearcher ... IndexSearchers are extremely light
weight and cheap, the meat they have is the IndexReader itself, so there
wouldn't be much benefit to changing the IndexReader for an IndexSearcher
.. it would be dangerous however for some of the APIs (like Hits), which
maintain a refrence to the Searcher that constructed them and expect the
view of the index to be consistent.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 17:53:51 2007
Return-Path: <java-user-return-28021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68443 invoked from network); 11 May 2007 17:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 17:53:49 -0000
Received: (qmail 78361 invoked by uid 500); 11 May 2007 17:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78328 invoked by uid 500); 11 May 2007 17:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78292 invoked by uid 99); 11 May 2007 17:53:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:53:48 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 10:53:41 -0700
Received: by wx-out-0506.google.com with SMTP id i29so978724wxd
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 10:53:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IrOAs66WOiSoV9jCH5uDDJ/Mn68xRKrkX4knVmbAgQ89kZ69m/GQXg3t0walx8P+46Scu70IExL8Nabr1PpYFUNxzvd6Dq9TuCCobXazimjJ+wZOh0PHc9T4uxhaIVLZUD3rd9mrKbmufgpo5c1VPtKbPh8t9rMFhJpMzw3QiU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tIkiXacQ4SXd0M/cTzCnB3p6By7jwpvnGV4vRFd8ti2NaHAcHf3ZtcHTCTOzr+NU7e6XZNNpesAYdUEFFzkjRdjcb84p61KJR3tUYFdHZRGD1PiPRupVPOHr7tFgmH2hfIS8J5UMJrBZiA8R/CIjvvZxCbOvp0WZyYv3A5nWokg=
Received: by 10.70.87.9 with SMTP id k9mr5568512wxb.1178905999532;
        Fri, 11 May 2007 10:53:19 -0700 (PDT)
Received: by 10.70.72.9 with HTTP; Fri, 11 May 2007 10:53:19 -0700 (PDT)
Message-ID: <bddd3c950705111053w3aaefdb8jf47f44694724a392@mail.gmail.com>
Date: Fri, 11 May 2007 21:23:19 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: add in an existing document
In-Reply-To: <848139.77403.qm@web27315.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90950_25849288.1178905999471"
References: <848139.77403.qm@web27315.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90950_25849288.1178905999471
Content-Type: text/plain; charset=ISO-8859-7; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SG93IGFib3V0IHRoaXMgaWRlYToKLSBhIHNwZWNpYWwgSWRlbnRpZmllciBmaWVsZC4KLSBBIERv
Y3VtZW50SGFzaCBjbGFzcyB3aGljaCBjYWxjdWxhdGVzIGEgaGFzaCB2YWx1ZSBmcm9tIGEgRG9j
dW1lbnQuCi0gQSBxdWVyeSBvbiBJZGVudGlmaWVyIGJlZm9yZSBpbnNlcnRpbmcgbmV3IERvY3Vt
ZW50cyB0byBjaGVjayBpZiBpdAphbHJlYWR5IGV4aXN0cy4KCi0tamFmCgpPbiA1LzEwLzA3LCBT
VEVGQU5PUyBTVEVGQU5PUyA8c3RlZmFub3M4ODg4ODhAeWFob28uZ3I+IHdyb3RlOgo+Cj4gSGVs
bG8sCj4KPiAgICAgICBJIHdvdWxkIGxpa2UgdG8gYXNrIHlvdSBhYm91dCB0aGUgZnVuY3Rpb24g
YWRkIG9mIGx1Y2VuZSAyLjAuIFdoZW4gaQo+IGFtIHRyeWluZyB0byBhZGQgYSBkb2N1bWVudCBp
biBhbiBleGlzdGVkIGluZGV4IHRoZSBpbmRleCdzIGRvY3VtZW50cyBhcmUKPiByZXBsYWNlZCBi
eSB0aGUgbmV3IGRvY3VtZW50LiBJIGRpZCBpdCBhY2NvcmRpbmcgdG8gdGhlIGJvb2suCj4KPgo+
ICAgY2hlZXJzLAo+Cj4gICBTdGVmYW5vcwo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiDX8efz6ezv8O/p5d/05SBZYWhvbyEKPiDC4fHl6N7q4fTlIPThIOXt7/fr5/Tp
6twg7Oft/SDs4fThIChzcGFtKTsg1O8gWWFob28hIE1haWwg5Onh6N305ekg9OftCj4g6uHr/fTl
8ecg5PXt4fTeIPDx7/P04fPf4SDq4fTcIPT57SDl7e/36+f06er+7SDs5+317Nz0+e0KPiBodHRw
Oi8vbG9naW4ueWFob28uY29tL2NvbmZpZy9tYWlsPy5pbnRsPWdyCg==
------=_Part_90950_25849288.1178905999471--

From java-user-return-28022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 18:03:19 2007
Return-Path: <java-user-return-28022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70626 invoked from network); 11 May 2007 18:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 18:03:18 -0000
Received: (qmail 90759 invoked by uid 500); 11 May 2007 18:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90716 invoked by uid 500); 11 May 2007 18:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90705 invoked by uid 99); 11 May 2007 18:03:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:03:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:03:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D80F85B770; Fri, 11 May 2007 11:02:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D39347F403
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 11:02:50 -0700 (PDT)
Date: Fri, 11 May 2007 11:02:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <1178904891.28048.1189357841@webmail.messagingengine.com>
Message-ID: <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
 <1178904891.28048.1189357841@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Are there are large number of files in your index directory?

and is there any correlation between the number files matching segment*
and the time isCurrent taks?

it would also be handy to know what filesystem you use as well ...
directory listings may be more expensive on some filesystems then others.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 18:10:43 2007
Return-Path: <java-user-return-28023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72862 invoked from network); 11 May 2007 18:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 18:10:42 -0000
Received: (qmail 4343 invoked by uid 500); 11 May 2007 18:10:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4303 invoked by uid 500); 11 May 2007 18:10:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4287 invoked by uid 99); 11 May 2007 18:10:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:10:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:10:34 -0700
Received: (qmail 7726 invoked from network); 11 May 2007 18:10:11 -0000
Received: from unknown (HELO p54bfdcf8.dip.t-dialin.net) ([pbs]695637@[84.191.220.248])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 11 May 2007 18:10:11 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Simple, always do wildcard or fuzzy query
Date: Fri, 11 May 2007 20:09:39 +0200
User-Agent: KMail/1.8.2
References: <20070510210821.M9502@www.botspiritcompany.com>
In-Reply-To: <20070510210821.M9502@www.botspiritcompany.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705112009.39366@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 10 May 2007 23:09, bbrown wrote:

> I think this is a simple question; or dont know. Is there a way to
> automatically convert all tokens to wildcard query with any given input.

Either just append the "*" before you pass your terms, or extend 
QueryParser and overwrite getFieldQuery() to return a PrefixQuery instead 
of a TermQuery. One question is what is supposed to happen if there's 
already a different operator like "~" at the end of the word.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 18:19:58 2007
Return-Path: <java-user-return-28024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75436 invoked from network); 11 May 2007 18:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 18:19:57 -0000
Received: (qmail 24849 invoked by uid 500); 11 May 2007 18:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24813 invoked by uid 500); 11 May 2007 18:19:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24802 invoked by uid 99); 11 May 2007 18:19:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:19:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:19:49 -0700
Received: (qmail 10688 invoked from network); 11 May 2007 18:19:27 -0000
Received: from unknown (HELO p54bfdcf8.dip.t-dialin.net) ([pbs]695637@[84.191.220.248])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 11 May 2007 18:19:27 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Lucene Developer
Date: Fri, 11 May 2007 20:18:55 +0200
User-Agent: KMail/1.8.2
References: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com> <Pine.LNX.4.58.0705111019210.3462@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0705111019210.3462@hal.rescomp.berkeley.edu>
Cc: recruitment@purplefrogtext.com
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200705112018.55561@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 11 May 2007 19:21, Chris Hostetter wrote:

> Please do not send resume requests to any of the @lucene email lists.
> There is a wiki page listing parties available for hire who are
> knowledgable in Lucene for this explicit purpose...
>
> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0http://wiki.apache.org/lu=
cene-java/Support

That's more a list of people/companies providing Lucene-related services,=20
not so much for people looking for a new job. For me think it's okay if=20
these job offers are posted here.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 18:39:10 2007
Return-Path: <java-user-return-28025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80062 invoked from network); 11 May 2007 18:39:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 18:39:10 -0000
Received: (qmail 57952 invoked by uid 500); 11 May 2007 18:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57915 invoked by uid 500); 11 May 2007 18:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57904 invoked by uid 99); 11 May 2007 18:39:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:39:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 11:39:02 -0700
Received: by wx-out-0506.google.com with SMTP id i29so992163wxd
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 11:38:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AFX5eCKVXnr/tgcniVqk16s+KA9Sv5DIga/zHhzdlnw3LmqFqjIpgVHmUsBxIvSu204+8tKj/G/LIaS/UA7No4EbnIlYP0TIUyh/3QMmxHHobBQERfPRTWrrqkmQEkY66cbbxucKrlvvt/2FEMNZL+KWuAcmb7u39KcJTwsPq1k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XzJeeqBi7ExUUjieEYvmQds+00NYfryt0SXiTSSeLMAi9mWXHaTya8QXHkBo+BDTbzzMetxrN7tRpwwF+yoKhF+ZZlIclBFyynQGYQGXJeRTLY/6NTjX5NKEHN4JAo4ukcpPhr8hY9j4EVjguxXtSRixZRrZurBQLeLlLopp65E=
Received: by 10.70.90.18 with SMTP id n18mr5645556wxb.1178908721292;
        Fri, 11 May 2007 11:38:41 -0700 (PDT)
Received: by 10.70.72.9 with HTTP; Fri, 11 May 2007 11:38:41 -0700 (PDT)
Message-ID: <bddd3c950705111138r50a3fcb3p97a1ddd78a9f15d6@mail.gmail.com>
Date: Fri, 11 May 2007 22:08:41 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_91166_21522938.1178908721151"
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
	 <1178904891.28048.1189357841@webmail.messagingengine.com>
	 <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_91166_21522938.1178908721151
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am experiencing a same problem with some 40 segments. Chris, Do you have
any recommendation on the file system to use?

On 5/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Are there are large number of files in your index directory?
>
> and is there any correlation between the number files matching segment*
> and the time isCurrent taks?
>
> it would also be handy to know what filesystem you use as well ...
> directory listings may be more expensive on some filesystems then others.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_91166_21522938.1178908721151--

From java-user-return-28026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 19:03:26 2007
Return-Path: <java-user-return-28026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86503 invoked from network); 11 May 2007 19:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 19:03:24 -0000
Received: (qmail 14781 invoked by uid 500); 11 May 2007 19:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14750 invoked by uid 500); 11 May 2007 19:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14727 invoked by uid 99); 11 May 2007 19:03:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 12:03:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 12:03:13 -0700
Received: by ug-out-1314.google.com with SMTP id k40so729358ugc
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 12:02:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dH+g3kAucwd+1vv9j7pDqfQ7TPvU1882NZEOdiTNmjZjgF/zfajj/G3Gi48HVSLDfW6jAKEo/3jc8rXgfCL74xoSOr2gyJ/TG6oROuJSlEALaPWnuNejSc8FBTpy2d0cHyTf0toOQZ7w5W114wKzj2m6NKEbtMUzDbrpa4aF7Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DEpnmN+oLBASbakULuDFwPJyGdoGs8ga55MT+2oF/s023GeEdcTLdlxCANNN7mHYFR4iltXWt1II0/18ZDjvN/4pEico5dymt1TOCXhwfWCT9dKRHOkfsiMHPXfL6YP25ZVEsJgYzglUYeYok8rGH+DlcAXl+Zjr1NU52N2KN/A=
Received: by 10.67.88.20 with SMTP id q20mr3044239ugl.1178910172769;
        Fri, 11 May 2007 12:02:52 -0700 (PDT)
Received: by 10.67.64.16 with HTTP; Fri, 11 May 2007 12:02:52 -0700 (PDT)
Message-ID: <6e3ae6310705111202n297fc9dav2df5ac9146b3261d@mail.gmail.com>
Date: Fri, 11 May 2007 12:02:52 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the ORACLE using lucene
In-Reply-To: <20070511172017.M17413@www.botspiritcompany.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
	 <359a92830705110602p2b7889bo1d207e9a2b6f45ed@mail.gmail.com>
	 <20070511172017.M17413@www.botspiritcompany.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Just let you know DBSight already handles the index synchronization
with the database, including incremental indexing, with either
soft-deleted or hard-deleted records.

And it's free without any size limit if you just need to create an
index from the database. You don't need to do any java coding.

Like Erik mentioned, there are many things to consider. DBSight let
you easily change your logic, what to select, what to index, what
Analyzer to use, what XML/JSON/HTML to return.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 5/11/07, bbrown <bbrown@botspiritcompany.com> wrote:
> On Fri, 11 May 2007 09:02:04 -0400, Erick Erickson wrote
> > Search the mail archive for Oracle, and there's lengthy discussion. The
> > short form is that you query your database, taking selected
> > data from it and add it to a Lucene document, then write the
> > document to your Lucene index. Repeat this for as many "documents"
> > as you need.
> >
> > There are a large number of decisions to be made. For instance,
> > what constitutes a "document". Whether (or how much) to de-normalize
> > your data. etc. The question "how to create an index from an Oracle
> > database" is far too general to give any more specific advice.
> >
> > Best
> > Erick
> >
> > On 5/11/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
> > >
> > > Hi all,
> > >
> > >
> > >
> > > I am new to Lucene. I am developing a small search utility using lucene.
> > > I have to create the index from my Oracle database. Can anybody tell me
> > > how to create the index from Oracle using lucene? Please send me code
> > > snippets if possible.
> > >
> > >
> > >
> > > Your valuable help is highly appreciated.
> > >
> > >
> > >
> > > Thanks in advance.
> > >
> > >
> > >
> > > Thanks and best regards,
> > >
> > >
> > >
> > > Krishna Prasad M
> > >
> > >
>
> Yea, there isnt much documentation out there on how to do this.  But, ideally
> it is pretty simple.  Your goal is to index the content from your database
> into the Lucene.  That is pretty much it.  So, just look at the Document
> creation code.
>
> Also, to other lucene developers; I actually had to index the 'ID' field.  I
> kept getting null if I didnt index it?
>
> This is what I have done with MySQL, which should work for Oracle (jdbc).
>
> http://docs.google.com/Doc?id=dq6cjjg_72fmbcj4
>
> On updating the index.  For me, it is just as easy for me to delete the
> entire index (eg, delete the entire directory) and re-index the database
> again.  It takes more processing as opposed to a 'real' update but is simpler
> development-wise.
>
> --
> Berlin Brown
> [berlin dot brown at gmail dot com]
> http://botspiritcompany.com/botlist/?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 19:05:47 2007
Return-Path: <java-user-return-28027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87130 invoked from network); 11 May 2007 19:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 19:05:46 -0000
Received: (qmail 23278 invoked by uid 500); 11 May 2007 19:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23248 invoked by uid 500); 11 May 2007 19:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23237 invoked by uid 99); 11 May 2007 19:05:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 12:05:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 12:05:38 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4BJ5Gtx381858
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 19:05:16 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4BJ5GGF3498166
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 21:05:16 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4BJ5GTB021547
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 21:05:16 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4BJ5Aqo021514
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 21:05:10 +0200
In-Reply-To: <01C14BDC-18A8-4279-AF9E-E428D5A48031@gmail.com>
Subject: Re: Numerical fields
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1BB0A52D.3DDACB74-ON882572D8.00677E57-882572D8.006899F5@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 11 May 2007 12:02:31 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 11/05/2007 22:05:10
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:

>
> 11 maj 2007 kl. 18.16 skrev Stadler Hans-Christian:
>
> > Is there an enhancment/plugin to Lucene which would allow
> > queries like
> >
> > myNumericalField > 100
>
> FunctionQuery might be what you are looking for.
>
> http://issues.apache.org/jira/browse/LUCENE-446

LUCENE-446 allows also score manipulation. It can also be
used to filter docs by assigning 0 score to out-of-range
docs.

But note two aspects of using search.function: (1) values
cannot exceed Integer.MAX_VALUE. (some examples given
here had larger values...)   (2) all values are loaded
(once, cached) into memory, so expect RAM usage of
numDocs * 1/2/4/8 bytes, depending on the maximal
needed value.

A user discussion that may be relevant:
http://www.mail-archive.com/java-user@lucene.apache.org/msg11965.html

>
> --
> karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 20:46:43 2007
Return-Path: <java-user-return-28028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19821 invoked from network); 11 May 2007 20:46:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 20:46:42 -0000
Received: (qmail 93379 invoked by uid 500); 11 May 2007 20:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93345 invoked by uid 500); 11 May 2007 20:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93334 invoked by uid 99); 11 May 2007 20:46:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 13:46:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 13:46:34 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 13:46:13 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexReader.isCurrent very slow in 2.1
Date: Fri, 11 May 2007 13:46:12 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278013446B5@WDCCPMAIL01.markettools.com>
In-Reply-To: <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexReader.isCurrent very slow in 2.1
Thread-Index: AceT9qZ66ueBuctUTFeoPt0/Zq0CqAAFlgIQ
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com> <1178904891.28048.1189357841@webmail.messagingengine.com> <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 May 2007 20:46:13.0072 (UTC) FILETIME=[699CD500:01C7940D]
X-Virus-Checked: Checked by ClamAV on apache.org

We have everything on Windows NTFS.  Our index folders are on a server
and accessed via shared drive.

I haven't optimized the folders yet but after doing optimization on a
test folder I noticed that we have very little files left.  That might
help.

I am going to optimize all folders now and then will come back with more
information.

Andreas


-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Friday, May 11, 2007 11:03 AM
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1


: Are there are large number of files in your index directory?

and is there any correlation between the number files matching segment*
and the time isCurrent taks?

it would also be handy to know what filesystem you use as well ...
directory listings may be more expensive on some filesystems then
others.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 20:50:30 2007
Return-Path: <java-user-return-28029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21722 invoked from network); 11 May 2007 20:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 20:50:28 -0000
Received: (qmail 2714 invoked by uid 500); 11 May 2007 20:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2678 invoked by uid 500); 11 May 2007 20:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2667 invoked by uid 99); 11 May 2007 20:50:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 13:50:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 13:50:17 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1065094nzh
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 13:49:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mIQIlZHxCmxrHiXlvyPClnc93mKSuksa56X3Y9+tB76kUU9r2mOGDg+o0wTSR8nCrRoYcgibEaCltP3UBUINxH6u7FaDLllbBCW/EjANLgEv78eQW5FEAOkyzWGcbhzaXJue9wAugPZ+leVqY2IK4/v5yDwWf/zagOXQEqUDvcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=gDZ0OIOxVPqvJY3fc1Z++B9kQX+Xm8KnzKKgT3timFtywZpLzFnqbg/8PtgGsIoeyEbRy8SfI5AOLA6B3ltGEjboSPTfG+CqiPbb+gyFipD5CRYbma++/bUe+cF8mQTfHmbHyL2hviptoy4zao+TsTdCNMF24optzAH1XXj6Fto=
Received: by 10.114.157.1 with SMTP id f1mr10809wae.1178916596177;
        Fri, 11 May 2007 13:49:56 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Fri, 11 May 2007 13:49:56 -0700 (PDT)
Message-ID: <ae6f38f60705111349o6e042ce6r30b89b52b0277f07@mail.gmail.com>
Date: Fri, 11 May 2007 16:49:56 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Mixing Case and Case-Insensitive Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Time to give a little something back to the Lucene community, even if
it's just a little knowledge for the maintainers...

Back on 17-Apr-2007 (for those searching the archives), I expressed a
need to match on queries using an intermix of case-sensitive with
case-insensitive terms.

The example that I cited was the word LET, which is an acronym when it
appears in uppercase, and extremely common word otherwise, such that
it appears in a large bulk of documents as a false positive,
especially when one tries this query: "company LET"~10


Erick Erickson had a fantastic idea to prefix a token with a dollar
sign to signify that was an acronym and do a little translating back
and forth.

Chris "Hoss" Hostetter suggested a "customized bastard stepchild of
StopFilter and LowercaseFiltter", doing processing based on whether
something was an acronym or not.


However, in producing a concrete example for the sake of discussion, I
neglected to indicate that it was the mixing of case-sensitive and
case-insensitive matching in a single Lucene field that I was after,
not acronyms in general.

Turns out there was no way to know an acronym list up front, and worse
yet, I'd be searching for people's names... some foreign, which also
happened to be stop words in English.



Thanks to both Erick and Hoss's input, I was actually able to develop
a working hybrid solution!  And, I'd like to share a smidge bit of the
technical part on the off chance such a thing would be valuable to
other people.

I can now search for things like "+company +$LET" and case-insensitive
match on 'company' while doing a case-sensitive match on 'LET',
ignoring other cases of 'let'.

Warning: what follows is a high-level technical walk-thru of how to
bastardize your Lucene .jar file to make the above possible.  Coding
skills required.


STEP ZERO:  Go read the Lucene Tutorial by Steven J. Owens at
http://darksleep.com/lucene/ -- this is the best walk through of the
Lucene classes that I've yet to encounter.  It starts you off assuming
zero knowledge on your part, goes through no specific implementation
details, and addresses the responsibilities and relationships of the
Lucene classes in such a way that there's no forward references in the
discussion.

In this tutorial he stresses not once, not twice, but three times that
the same Analyzer that is used to build an index -must- also be used
when performing a Query.  There is great detail explaining why this is
so.

However, in order to get our magic to work, we need to violate this
rule in a very clever way.


STEP ONE: Building an index that has both case-sensitive and
case-insensitive tokens in it.

As a document is ingested and turned into a stream of tokens, we want
to do something different than the StandardAnalyzer.  For each token
encountered, we want to emit two tokens into the index, both at the
same physical position: one is the case-sensitive token, the other is
the case-insensitive token.

We accomplish this by building our own class derived Analyzer, though
we don't do the LowerCaseFilter or the StopFilter steps.  Instead, we
call a new custom filter that we'll write.

It creates a token, unchanged, and prefixes a dollar sign on the front
as-is.  It also creates a lower-cased version, which is used for the
case insensitive.

While it's common to think of filters as tossing out tokens, they can
also be used to inject extra ones.  A reasonable way of doing this can
be found on page 130 of the rather dated book Lucene In Action (ISBN
1-932394-28-1) using the synonym example as a template.

Using Luke, it's possible to verify that indeed that two tokens make
it into the index.


STEP TWO:  Being able to query with dollar signs.

This step is where things get complicated.  It turns out that
StandardAnalyzer, which uses the StandardTokenizer, throws away dollar
signs.  So, it doesn't matter how many you type in your query, they
all vanish, never giving you the opportunity to do anything with them
downstream.

By luck, this wasn't a problem in step one.  Any dollar signs in the
query are thrown away, and it's only after we construct the custom
token is one prepended.  Which, as luck would turn out, is exactly the
format we want anyhow.

It also turns out, though, that we can't use the special analyzer we
just built in step one, because it's spewing two tokens for every one
provided.  If a document contained only "let" and we queries for
"+LET", then re-using the tokenizer would produce a query that looked
like "+let +$LET", and since the latter term doesn't appear in the
document, we won't get a hit when we should.

Consequently, we've got three problems to solve before this all ties
together nicely.

First, we need to build a new Analyzer for queries.  It needs to take
a special tokenizer that can handle dollar signs  ...more on that in a
minute...

Second, we need to run it's output through a new custom filter the
conditionally converts a term to lowercase or not.

This is easy, because if the token's termText() starts with a dollar
sign, we leave it alone.  Otherwise, we lowercase the token.

Follow that...  If we type "$LET" it searches for "$LET", but if we
type "LET" it searches for "let".  Anything that isn't flagged with
the dollar sign is converted to lowercase.  This nicely fits the
syntax Erick suggested, plus it works for everything without the need
to know the acronyms up front.  "Let" becomes "let", and "$Let" stays
"$Let" which is different from "$LET".

The third problem is the ugly one... making the tokenizer handle
dollar signs.  When Hoss was talking about customized, bastard
stepchildren, he wasn't kidding.

We're actually going to have to go inside Lucene and twiddle the
grammars for the Lucene parser and tokenizer.  This requires a little
bit of knowledge of JavaCC, because you're not modifying the source,
but the .jj files, which are used to generate the .java files.

In the QueryParser.jj file, we need to let the tokenizer know a term
can start with a dollar sign, so "$" has to be added to the end of the
TERM_CHAR line (just like - and + are).

Next we copy the StandardTokenizer.jj file to our own dollar aware
version, making a new class (replace StandardTokenizer with the class
name of your choice throughout the file).  Now we teach it that an
optional dollar sign can appear before certain tokens.  Here's how.

In front of the expressions for ALPHANUM, APOSTROPHE, ACRONYM,
COMPANY, EMAIL, HOST, and NUM we add (["$"])? which is the JavaCC way
of doing regexs.  The dollar sign now means that a new case-sensitive
token is starting.

Of course, you'll have to modify the build.xml file for Lucene to add
your special class right after the StandardTokenizer.jj rule, the
jjdoc rule, and the clean-javacc rule.  Then rebuild with  ant javacc
and then  ant  to make a new .jar file, which you'll then use with
your software.


Bringing it all together, it's now possible to user your new query
version token analyzer with the QueryParser.  And calling .parse()
with dollar sign prefixed strings will search for exact-case matches,
where omitting it works like the regular old Lucene we all know and
love.

The down side...?  The index has twice as many tokens.


Given all of the Lucene internal code is new to me, I can't promise
that I've done things in the most optimal fashion or that I haven't
introduced some subtle problem.

But from what I can tell using hand crafted sample documents,
ingesting, and inspecting them with Luke, while stepping through
source looking at generated queries, it all seems to be working
perfectly.

I'd love to see a formal syntax like this officially enter the Lucene
standard query language someday.

If someone can figure point me at how to do this without twiddling
Lucene's code directly, I'd be happy to contribute the modification.

-Walt Stoneburner
 http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 21:19:29 2007
Return-Path: <java-user-return-28030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30128 invoked from network); 11 May 2007 21:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 21:19:28 -0000
Received: (qmail 58433 invoked by uid 500); 11 May 2007 21:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58404 invoked by uid 500); 11 May 2007 21:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58392 invoked by uid 99); 11 May 2007 21:19:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 14:19:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 14:19:20 -0700
Received: by py-out-1112.google.com with SMTP id a25so880794pyi
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 14:19:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Z1yqKHoVJ4xeDKVDmRyKd/AyUjHk7B9o71PQbUXEtLtUXEoF69DRMpz1R2tx3CvCk4XOvFY201uimcatS1wbw30AMK0IpSP2Oh2slA5/hrLwoUqMJjWgfWOnPReCzH/AhSMtfIVk0mW2CFPVaa6jvw9zyEzctqhl5z8xoMOSLUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=TlG0X8GMyUC0Ww0t+6WDqVnrrgMlhBX+hbWHcLNUOQmvlV//QycIj17xQlzL2vk0fVIhOje+CfIv1nxEnj9Lzo1wZND7f3ZoLY9DHXImG6xxK/yQCMgR49Z5XdXYy9qOUG1jD2on+2g4tvMPYdKrZ8n5/RhhNfu9B3xlIOlHvxw=
Received: by 10.35.27.2 with SMTP id e2mr5635421pyj.1178918340160;
        Fri, 11 May 2007 14:19:00 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Fri, 11 May 2007 14:19:00 -0700 (PDT)
Message-ID: <c68e39170705111419w1e3ccf1bs8af6ef52c3b6b0ab@mail.gmail.com>
Date: Fri, 11 May 2007 17:19:00 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
In-Reply-To: <ae6f38f60705111349o6e042ce6r30b89b52b0277f07@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60705111349o6e042ce6r30b89b52b0277f07@mail.gmail.com>
X-Google-Sender-Auth: ca3479fbd5fee8a1
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/11/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
> In this tutorial he stresses not once, not twice, but three times that
> the same Analyzer that is used to build an index -must- also be used
> when performing a Query.  There is great detail explaining why this is
> so.
>
> However, in order to get our magic to work, we need to violate this
> rule in a very clever way.

Yeah, "compatible" analyzer would be a better way to put it.  Using
the same analyzer for anything that produces multiple tokens at the
same position is normally wrong.
Solr allows specification of a "query" analyzer and an "index"
analyzer for these cases.

> STEP ONE: Building an index that has both case-sensitive and
> case-insensitive tokens in it.

Yep, your approach sounds fine, and will work in phrase queries (which
the two-field solution currently can't handle).  The greater
difficulty lies in making it generic (working for many analyzers,
etc).

> This step is where things get complicated.  It turns out that
> StandardAnalyzer, which uses the StandardTokenizer, throws away dollar
> signs.  So, it doesn't matter how many you type in your query, they
> all vanish, never giving you the opportunity to do anything with them
> downstream.

This points out the difficulty of doing this in a *generic* way.
Better than a "$" would be a flag on the Token IMO.  Not currently
really supported by lucene, but you could perhaps subclass Token.


> Bringing it all together, it's now possible to user your new query
> version token analyzer with the QueryParser.  And calling .parse()
> with dollar sign prefixed strings will search for exact-case matches,
> where omitting it works like the regular old Lucene we all know and
> love.
>
> The down side...?  The index has twice as many tokens.

I've also considered case-insensitive support at the Term-Enum level.
It would make lookups slower, but the index wouldn't be much bigger (it would
be slightly bigger because one would index everything w/o lowercasing).

> I'd love to see a formal syntax like this officially enter the Lucene
> standard query language someday.
>
> If someone can figure point me at how to do this without twiddling
> Lucene's code directly, I'd be happy to contribute the modification.

If you picked a token prefix/postfix that would pass through
the QueryParser w/o a syntax error, the necessary manipulation could
all be done in the Analyzer/TokenFilter.  Much easier, but perhaps not
as nice a syntax.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 21:37:42 2007
Return-Path: <java-user-return-28031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37116 invoked from network); 11 May 2007 21:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 21:37:40 -0000
Received: (qmail 95787 invoked by uid 500); 11 May 2007 21:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95751 invoked by uid 500); 11 May 2007 21:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95740 invoked by uid 99); 11 May 2007 21:37:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 14:37:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 14:37:27 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1635DF16@mailer.syr.edu>; Fri, 11 May 2007 17:37:06 -0400
Message-ID: <4644E1DE.8070708@syr.edu>
Date: Fri, 11 May 2007 17:36:30 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing the ORACLE using lucene
References: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
In-Reply-To: <0EBBD6FA3D0E7F4385D69764942C752E181962AD@HS-MAILSVR.Virtusa.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Krishna Prasad Mekala wrote:
> I have to create the index from my Oracle database. Can anybody tell me
> how to create the index from Oracle using lucene?

Check out Marcelo Ochoa's Oracle/Lucene integration:

   http://issues.apache.org/jira/browse/LUCENE-724

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 22:39:09 2007
Return-Path: <java-user-return-28032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53721 invoked from network); 11 May 2007 22:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 22:39:09 -0000
Received: (qmail 83225 invoked by uid 500); 11 May 2007 22:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83193 invoked by uid 500); 11 May 2007 22:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83181 invoked by uid 99); 11 May 2007 22:39:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 15:39:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 15:38:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 82D615B763; Fri, 11 May 2007 15:38:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7FDBD7F403
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 15:38:36 -0700 (PDT)
Date: Fri, 11 May 2007 15:38:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Numerical fields
In-Reply-To: <200705111816.13473.hans-christian.stadler@psi.ch>
Message-ID: <Pine.LNX.4.58.0705111535050.24245@hal.rescomp.berkeley.edu>
References: <200704291232.l3TCWepJ012432@idlewild.ccnep.com.np>
 <200705111816.13473.hans-christian.stadler@psi.ch>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I know that usually one has to index such fields as text with
: the property   a > b => lex(text(a)) > lex(text(b))  and devise
: the text(n) transformation appropriately.
:
: What I'm looking for is an enhancement which would eliminate
: the a -> text(a) transformation or simplify it. Is it necessary f.ex.

the transformation has to happen either way, so the best we can do is
create it and put it in a utility ... NumberTools already meets this need
for longs, but there are some other utils in Solr that could be promoted
if someone wants to do so.

: to implement the above query as a range query
:
: 100 <= myNumericalField <= 999999999999999999999999.....

that's just not true ... ConstantScoreRangeQuery can support open ended
ranges -- there is no need to specify an artificial uper bound.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 23:41:56 2007
Return-Path: <java-user-return-28033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67316 invoked from network); 11 May 2007 23:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 23:41:55 -0000
Received: (qmail 54754 invoked by uid 500); 11 May 2007 23:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54713 invoked by uid 500); 11 May 2007 23:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54702 invoked by uid 99); 11 May 2007 23:41:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 16:41:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 16:41:48 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E8DF85B763; Fri, 11 May 2007 16:41:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DB67A7F403
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 16:41:27 -0700 (PDT)
Date: Fri, 11 May 2007 16:41:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <bddd3c950705111138r50a3fcb3p97a1ddd78a9f15d6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705111637080.24245@hal.rescomp.berkeley.edu>
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
  <1178904891.28048.1189357841@webmail.messagingengine.com> 
 <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
 <bddd3c950705111138r50a3fcb3p97a1ddd78a9f15d6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I am experiencing a same problem with some 40 segments. Chris, Do you have

do you have 40 segments, or do you have 40 files matching the glob
segement* .. there is a differnece (the "segment" files records the number
of segments, as of 2.1 they are versioned so they have names like
"segments_7" "segments_8" etc...

: any recommendation on the file system to use?

not really .. i just wanted to know which filesystem people noticing this
problem are using ... becuase it might make a differnece (since checking
currentness is esentially just a directory lookup followed by reading one
int from a file)

back in the day i remember being told that NFS volumns would have serious
performance issues doing any directory operations (list, create ne file,
dleete file) once they had ~4K files, but i have no idea if that's still
true.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 11 23:49:50 2007
Return-Path: <java-user-return-28034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69244 invoked from network); 11 May 2007 23:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 May 2007 23:49:49 -0000
Received: (qmail 59897 invoked by uid 500); 11 May 2007 23:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59861 invoked by uid 500); 11 May 2007 23:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59850 invoked by uid 99); 11 May 2007 23:49:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 16:49:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 16:49:42 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 90C205B763; Fri, 11 May 2007 16:49:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7257A7F403;
	Fri, 11 May 2007 16:49:20 -0700 (PDT)
Date: Fri, 11 May 2007 16:49:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: recruitment@purplefrogtext.com
Subject: Re: Lucene Developer
In-Reply-To: <200705112018.55561@danielnaber.de>
Message-ID: <Pine.LNX.4.58.0705111643060.24245@hal.rescomp.berkeley.edu>
References: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
 <Pine.LNX.4.58.0705111019210.3462@hal.rescomp.berkeley.edu>
 <200705112018.55561@danielnaber.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=utf-8
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


: > =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0http://wiki.apache.org/=
lucene-java/Support
:
: That's more a list of people/companies providing Lucene-related services,
: not so much for people looking for a new job. For me think it's okay if
: these job offers are posted here.

Hmmm .. not sure if i would agree, i know that it's generally been
discouraged in the past, most recently...

http://www.nabble.com/Looking-For-Lucene-Job-Opportunities-tf3648956.html#a=
10192458

=2E..pesonally, i can barely keep up with all of my lucene email as is, if =
i
wantedto wade through a bunch of email from companies looking to hire and
people looking for work i'd go read monster.com :)

if we really want to support something like this, perhaps it should be on
a jobs@lucene.apache.org type list?





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 01:19:44 2007
Return-Path: <java-user-return-28035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86551 invoked from network); 12 May 2007 01:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 01:19:43 -0000
Received: (qmail 30264 invoked by uid 500); 12 May 2007 01:19:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29214 invoked by uid 500); 12 May 2007 01:19:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29199 invoked by uid 99); 12 May 2007 01:19:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 18:19:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 18:19:36 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 11 May 2007 18:19:14 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexReader.isCurrent very slow in 2.1
Date: Fri, 11 May 2007 18:19:13 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
In-Reply-To: <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexReader.isCurrent very slow in 2.1
Thread-Index: AceT9qZ66ueBuctUTFeoPt0/Zq0CqAAPC3tw
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com> <1178904891.28048.1189357841@webmail.messagingengine.com> <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 May 2007 01:19:14.0577 (UTC) FILETIME=[8DC02010:01C79433]
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

I have optimized our index directories using the compound index format.
I have also moved the index directories for testing purposes local to
the search process (before it was over network and shared NTFS file
system).

Now the time for getting the isCurrent information is negligible, i.e.
less than 10 millis per call.

Thanks for your input.

Andreas



-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Friday, May 11, 2007 11:03 AM
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1


: Are there are large number of files in your index directory?

and is there any correlation between the number files matching segment*
and the time isCurrent taks?

it would also be handy to know what filesystem you use as well ...
directory listings may be more expensive on some filesystems then
others.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 02:42:27 2007
Return-Path: <java-user-return-28036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9623 invoked from network); 12 May 2007 02:42:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 02:42:27 -0000
Received: (qmail 90588 invoked by uid 500); 12 May 2007 02:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90551 invoked by uid 500); 12 May 2007 02:42:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90540 invoked by uid 99); 12 May 2007 02:42:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 19:42:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 19:42:20 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9F0C430EFC17; Fri, 11 May 2007 20:41:59 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-4-75-10.dhcp.embarqhsd.net [76.4.75.10])
	by ehatchersolutions.com (Postfix) with ESMTP id 8677830EFC16
	for <java-user@lucene.apache.org>; Fri, 11 May 2007 20:41:57 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <Pine.LNX.4.58.0705111643060.24245@hal.rescomp.berkeley.edu>
References: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com> <Pine.LNX.4.58.0705111019210.3462@hal.rescomp.berkeley.edu> <200705112018.55561@danielnaber.de> <Pine.LNX.4.58.0705111643060.24245@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <038BC284-1BDA-442C-8B3E-5BD529D095A1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene Developer
Date: Fri, 11 May 2007 22:41:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.5 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On May 11, 2007, at 7:49 PM, Chris Hostetter wrote:
> ...pesonally, i can barely keep up with all of my lucene email as  
> is, if i
> wantedto wade through a bunch of email from companies looking to  
> hire and
> people looking for work i'd go read monster.com :)

or tune into the Lucene-powered goodness of indeed.com!  :)

	<http://www.indeed.com/jobs?q=lucene>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 03:47:10 2007
Return-Path: <java-user-return-28037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22035 invoked from network); 12 May 2007 03:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 03:47:09 -0000
Received: (qmail 37772 invoked by uid 500); 12 May 2007 03:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37740 invoked by uid 500); 12 May 2007 03:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37729 invoked by uid 99); 12 May 2007 03:47:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 20:47:07 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hx50859042@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 May 2007 20:47:00 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1091093wxd
        for <java-user@lucene.apache.org>; Fri, 11 May 2007 20:46:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BTAHSMPjegkNeTklI1xWOE493oPNHHmR6tTRjHVENKlPBLtwxQvq1dl1BEVcO1Vceh/Ctee5Jdm+EYjzxmHytlWMlHo9LPhTpODzi6KFm7h37jDNmXomMfen5U3X7gpsdpiP4YfjPYYAtqsV0PgCgVYgTiI89phT0x1GGyRdLBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WW/4xO799LDvaYjwvhWj8JYoe0Ufin6TuWopZhhDZ4KLrzv7bZCI8Avam0sIjftQQGWpz4waZbu3bUV2MnaPYgPWcBUpSTZALqn1zNJ876HbGEDAOIT7xmk1HG6RWbf2hsmbzT2r5rItJqbcAO+8XQ+g61E82QCEvpmtl0EiCWU=
Received: by 10.70.52.2 with SMTP id z2mr6300727wxz.1178941599593;
        Fri, 11 May 2007 20:46:39 -0700 (PDT)
Received: by 10.70.35.19 with HTTP; Fri, 11 May 2007 20:46:39 -0700 (PDT)
Message-ID: <a6ea2d6e0705112046w3b180f1eg1edb9929cde03473@mail.gmail.com>
Date: Sat, 12 May 2007 11:46:39 +0800
From: "xin huang" <hx50859042@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Developer
In-Reply-To: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_71618_33279294.1178941599502"
References: <20070511124514.lckupkrriif44os0@www.purplefrogtext.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71618_33279294.1178941599502
Content-Type: multipart/alternative; 
	boundary="----=_Part_71619_6267510.1178941599502"

------=_Part_71619_6267510.1178941599502
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to get this job,you could see my resume
 thank you


2007/5/11, recruitment@purplefrogtext.com <recruitment@purplefrogtext.com>:
>
> We are a startup company based in the city of Sheffield, UK actively
> seeking  experienced java programmers to develop intelligent web
> mining systems using Apache Lucene/Nutch.  Experience of genetic
> programming would be an advantage but is not essential.  If you are
> interested in this fascinating and challenging post please send us
> your resume/c.v. as soon as possible.
>
> Purple Frog Text
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_71619_6267510.1178941599502
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div>I want to get this job,you could see my resume</div>
<div>&nbsp;thank you <br><br>&nbsp;</div>
<div><span class="gmail_quote">2007/5/11, <a href="mailto:recruitment@purplefrogtext.com">recruitment@purplefrogtext.com</a> &lt;<a href="mailto:recruitment@purplefrogtext.com">recruitment@purplefrogtext.com</a>&gt;:</span>

<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">We are a startup company based in the city of Sheffield, UK actively<br>seeking&nbsp;&nbsp;experienced java programmers to develop intelligent web
<br>mining systems using Apache Lucene/Nutch.&nbsp;&nbsp;Experience of genetic<br>programming would be an advantage but is not essential.&nbsp;&nbsp;If you are<br>interested in this fascinating and challenging post please send us<br>your resume/c.v. as soon as possible.
<br><br>Purple Frog Text<br><br><br>---------------------------------------------------------------------<br>To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org
</a><br>For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br><br></blockquote></div><br>

------=_Part_71619_6267510.1178941599502--


------=_Part_71618_33279294.1178941599502
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_71618_33279294.1178941599502--

From java-user-return-28038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 10:25:32 2007
Return-Path: <java-user-return-28038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39697 invoked from network); 12 May 2007 10:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 10:25:32 -0000
Received: (qmail 83072 invoked by uid 500); 12 May 2007 10:25:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83044 invoked by uid 500); 12 May 2007 10:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83033 invoked by uid 99); 12 May 2007 10:25:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 03:25:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 03:25:23 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id EB11021EE67
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 06:27:16 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Sat, 12 May 2007 06:24:49 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 107E65622; Sat, 12 May 2007 06:24:48 -0400 (EDT)
Message-Id: <1178965488.32648.1189444687@webmail.messagingengine.com>
X-Sasl-Enc: 86j5h+b6ejxGXlBipzWmkKVHqrMuPc9nWMuwTbiUX3KM 1178965488
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
   <1178904891.28048.1189357841@webmail.messagingengine.com>
   <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
   <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
Subject: RE: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
Date: Sat, 12 May 2007 06:24:48 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Andreas Guther" <Andreas.Guther@markettools.com> wrote:

> I have optimized our index directories using the compound index format.
> I have also moved the index directories for testing purposes local to
> the search process (before it was over network and shared NTFS file
> system).
> 
> Now the time for getting the isCurrent information is negligible, i.e.
> less than 10 millis per call.

OK, glad to hear that.

Though I'm surprised that SMB/CIFS mount was so slow.  Is your file
server on the same LAN as your client?  Or is the file server heavily
shared with many clients?  Just want to gather data while we have your
attention :)  Thanks.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 11:23:30 2007
Return-Path: <java-user-return-28039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39263 invoked from network); 12 May 2007 11:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 11:23:30 -0000
Received: (qmail 31922 invoked by uid 500); 12 May 2007 11:23:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31891 invoked by uid 500); 12 May 2007 11:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31880 invoked by uid 99); 12 May 2007 11:23:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 04:23:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 04:23:20 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id CBFF921FB58
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 07:25:28 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Sat, 12 May 2007 07:23:00 -0400
X-Sasl-enc: os241ahzdlgNlDyYsi7mUvh8nHi8c1amFiYdbGT2GVA0 1178968980
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 1D79C3257B
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 07:23:00 -0400 (EDT)
Message-ID: <4645A395.8010906@fastmail.fm>
Date: Sat, 12 May 2007 12:23:01 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem with scoring:is it absolute or relative ?
References: <262090.84925.qm@web50302.mail.re2.yahoo.com> <4638C217.500@fastmail.fm>
In-Reply-To: <4638C217.500@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I might be able to get a change in place, but Im struggling to 
understand what exactly needs to change. By default the IndexSearcher 
uses a TopDocCollecter, but it also uses a Scorer, Ive taken a look but 
Im struggling to find the code
that takes the score and normalises it, I just want to remove the 
normalization aspect so if the query was

track:Minus OR artist:beck OR release:odelay

it would return 3.0 when all three values matched, 2.0 if two matched 
and 1.0 if only one matched, I would expect it to take it into account 
query boosting, so that
if the query was

track:Minus^3 OR artist:beck OR release:odelay

it would return 5 if all three terms matched, 4 if the track and artist 
term matched ecetera.

thanks for any help paul

Paul Taylor wrote:
> Hi Otis
>
> thanks, so the scores are relative to the result set.
>
> Unfortunately I only have access to an xmlwebservice that let me send 
> a lucene query so I don't have access to the various IndexSearcher 
> methods. So it sounds like rather than just taking the top result and 
> using that Ill have to take the first 10 results and work out my own 
> score based on how many fields match and the importance of each field, 
> unless anyone has any other ideas ?
>
> Otis Gospodnetic wrote:
>> Paul,
>>
>> That is because the Hits class is likely being used under the 
>> covers.  When you use the IndexSearcher's search(...) method that 
>> returns Hits, hit scores are normalized, so they are always between 0 
>> and 1.  If you want the raw scores, and it sounds like you do, you 
>> could use a lower-level search method, like the one that uses a 
>> HitCollector.
>>
>> Otis
>> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: Paul Taylor <paul_t100@fastmail.fm>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, May 2, 2007 10:30:12 AM
>> Subject: Problem with scoring:is it absolute or relative ?
>>
>> Hi I am having problems understanding lucenes scoring. I am using the 
>> Musicbrainz  which uses Lucene to provide searching facility over its 
>> data, which put simply consists of a database about recording artists 
>> , albums and song titles
>>
>> I can construct a query such as:
>>     track:Minus AND artist:beck AND release:odelay
>>
>> to return Tracks called Minus by the Artist Beck for the release 
>> Odelay, which works fine if all terms are correct however I am trying 
>> to implement the search in a program which takes the terms  from 
>> values embedded in existing audio files, so they may not be correct, 
>> so instead of using an AND search I want to use a OR search such as
>>     track:Minus  artist:beck  release:odelay
>> to improve the chances of getting a match, and then using the scoring 
>> returned work out whether the match is sufficiently simailr to accept 
>> it as a match.
>>
>> Now the good news is that when multiple results are returned the 
>> record with the top score is normally the best match BUT the bad news 
>> is that if the match is very poor the top rated records normally 
>> return a score of 100 even though
>> only a few of the terms match.
>>
>>     track:Minus  artist:rubbish  release:odelay
>>
>> will return the Minus tracks by beck for the release odelay even 
>> through the artist term is incorrect because this is the best match 
>> it can make (2 out of 3 terms matched) but it is returning a score of 
>> 100 when I would expect a score
>> of 66 because only two of the terms match.
>>
>> Why is it doing this, and how can I create a query that only returns 
>> 100 if all terms match but will return possible matches where only 
>> some terms match ? I have spoke to the creators of MusicBrainz they 
>> say they are not using any kind of document/Field boosting and are 
>> that sure how its work as theve only added lucene to the site quite 
>> recently.
>>
>> The above queries can be run tested from
>>
>> http://musicbrainz.org/search.html
>>
>> by:
>>     entering the query in the 'Search For' box
>>     selecting type:Track
>>     selecting Use advanced query syntax 
>> <http://musicbrainz.org/popup/TextSearchSyntax>
>>
>> and clicking on Indexed Search
>>
>> thanks Paul Taylor
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>   
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 12:23:06 2007
Return-Path: <java-user-return-28040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47710 invoked from network); 12 May 2007 12:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 12:23:05 -0000
Received: (qmail 70846 invoked by uid 500); 12 May 2007 12:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69818 invoked by uid 500); 12 May 2007 12:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69807 invoked by uid 99); 12 May 2007 12:23:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 05:23:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 05:22:57 -0700
Received: by ug-out-1314.google.com with SMTP id k40so818368ugc
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 05:22:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V0lhZUl7IahFM/es/XxroAFNVYg8jEFln9UkoAtuXYqG2wAvGylvvxb0vak3XFNI8o7ofUBftAAEgSB3iPrbUXelxwgiRmuY3FhezmbBgZ4P/rUOs1OVtnfaWceMEk/cUtKRNJ0hIYOh8lt6pVGBT1GCSVxrTGBj4vveNzQQUzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m+Ue2DPhzWWdtY/wZ8t1w0AtxC85pGUC5rF7mlGisSEQ3YkRPnN6n8Af1tZYvFPrEm56tGRt1/m5mZ1es5OuSXRe6bQBWd9O7Ja9r8dSVEA0Q+bJsm6HxrRTcqUubeYNtYblV5xcIrzvGVGSxudMzsD0TIMAva7p4wbez6CcCC4=
Received: by 10.78.153.17 with SMTP id a17mr1230026hue.1178972556540;
        Sat, 12 May 2007 05:22:36 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sat, 12 May 2007 05:22:36 -0700 (PDT)
Message-ID: <359a92830705120522m4c1a9619ia24dfda3a5c8230b@mail.gmail.com>
Date: Sat, 12 May 2007 08:22:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48123_7617873.1178972556477"
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
	 <1178904891.28048.1189357841@webmail.messagingengine.com>
	 <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48123_7617873.1178972556477
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, do you have a sense of this action it actually was that
made the biggest difference? Or, if you have to move the files
back out to the network, could you let us know if your times
go back up?

Or was it just the optimization?

Thanks
Erick

On 5/11/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Chris,
>
> I have optimized our index directories using the compound index format.
> I have also moved the index directories for testing purposes local to
> the search process (before it was over network and shared NTFS file
> system).
>
> Now the time for getting the isCurrent information is negligible, i.e.
> less than 10 millis per call.
>
> Thanks for your input.
>
> Andreas
>
>
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: Friday, May 11, 2007 11:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: IndexReader.isCurrent very slow in 2.1
>
>
> : Are there are large number of files in your index directory?
>
> and is there any correlation between the number files matching segment*
> and the time isCurrent taks?
>
> it would also be handy to know what filesystem you use as well ...
> directory listings may be more expensive on some filesystems then
> others.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48123_7617873.1178972556477--

From java-user-return-28041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 17:03:22 2007
Return-Path: <java-user-return-28041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8058 invoked from network); 12 May 2007 17:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 17:03:22 -0000
Received: (qmail 25841 invoked by uid 500); 12 May 2007 17:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25815 invoked by uid 500); 12 May 2007 17:03:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25804 invoked by uid 99); 12 May 2007 17:03:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:03:20 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:03:13 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 7A25B21FDFA
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 13:05:26 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sat, 12 May 2007 13:02:54 -0400
X-Sasl-enc: LZZAl9dfYanTIvB1qtLM+pHVt04wu0FCELX2veED4v1G 1178989373
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 9536FFBA
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 13:02:53 -0400 (EDT)
Message-ID: <4645F33E.50300@fastmail.fm>
Date: Sat, 12 May 2007 18:02:54 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Problem using wildcardsearch in  phrase search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I seem to be having problems using a * in a phrase term query

This is my search String, its not finding any matches
54:"MusicIP PUID*"

If I match on a particular record it works ok
54:"MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d"

The problem appears to be the space character, because I have another 
situation where there is no space and it works ok.

I use a keyword analyser to create the index so the value 'MusicIP 
PUIDa39494bf-927e-1638-fb06-782ec55ac22d' is stored
as a single value, and then use the same analyser in my search code, 
which is as follows:

public List <Integer> generalSearch(String luceneSearch)
    {
        System.out.println("Search Query Is"+luceneSearch);
        List <Integer> matchingRows = new ArrayList<Integer>();
        try
        {
            IndexSearcher is = new IndexSearcher(directory);

            //Build a query based on the searchString and cached analyzer
            QueryParser parser = new QueryParser(ROW_NUMBER,analyzer);
            Query query = parser.parse(luceneSearch);
            //run the search
            Hits hits = is.search(query);
            Iterator i = hits.iterator();
            while(i.hasNext())
            {
                Document doc = ((Hit)i.next()).getDocument();
                matchingRows.add(new 
Integer(doc.getField(ROW_NUMBER).stringValue()));
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return matchingRows;
    }

I cant see what the problem is, thanks paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 17:18:59 2007
Return-Path: <java-user-return-28042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12299 invoked from network); 12 May 2007 17:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 17:18:57 -0000
Received: (qmail 39132 invoked by uid 500); 12 May 2007 17:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39089 invoked by uid 500); 12 May 2007 17:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39078 invoked by uid 99); 12 May 2007 17:18:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:18:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:18:50 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1257332nzh
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 10:18:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jRFBehfKy3Z6MnpLg0rxmBdtvHpHcdcGpqEOYn/zhotSgW8kI3smMIPlYjuwSJBcgDVclGyJDVMrg14WnUkq+wCksBo87TfMc7CcCX8tBzM2oy2Z4dd0UK0PsCIQK8Aj47yMJ9mIrx6kdykDY9eA/1+cxfuUxT4vEQ3OfsTaORU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=X1GuVYfkN0sFpkX208D6oAmcHqHJTER9KcIc8mAYo1HyGJD0gOKkXLyWs7jxIhWgHp/Mxc5XyC1U6gU8zFf7UP6vGgaOJ7n4511UGp8u2US0/lldE/rZH7mWuryX23rIiMwpDPpc2Q/sXe6YDBMZzDBDdkQHZztuSBoJvOYLyMQ=
Received: by 10.114.180.1 with SMTP id c1mr303406waf.1178990309477;
        Sat, 12 May 2007 10:18:29 -0700 (PDT)
Received: by 10.114.108.2 with HTTP; Sat, 12 May 2007 10:18:29 -0700 (PDT)
Message-ID: <ae6f38f60705121018g1f3b94b8if549c199eb374737@mail.gmail.com>
Date: Sat, 12 May 2007 13:18:29 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley adds some wonderful observations:
> Yeah, "compatible" analyzer would be a better way to put it.  Using
> the same analyzer for anything that produces multiple tokens at the
> same position is normally wrong.

I came to the same conclusion the moment I realized that my query
string was being transformed into tokens.  What I wasn't sure of 100%,
and what you just gave comfort to, was the idea that if I used two
different analyzers, if that broke anything or not.

Seems not only does it not, but it's also necessary.


> Solr allows specification of a "query" analyzer and an "index"
> analyzer for these cases.

I've had a very passing glance at Solr.  It looked like an awesome
replacement for anyone considering a Google appliance.

The scalability and additional features of Solr really appealed to me,
but it felt too much like a complete solution sealed in a pretty bow
than an API library I could utilize with my code.

Is it worth a second look at Solr?  And, if so, is it possible to
easily capitalize on the Lucene modifications there, without bringing
in the other extras?


> Yep, your [two token] approach sounds fine, and will work in phrase
> queries (which the two-field solution currently can't handle).
> The greater difficulty lies in making it generic (working for many
> analyzers, etc).

Since the index writer is still writing the same tokens the other
analyzers do, the standard query mechanisms still work.  The extra
dollar-sign-prefixed-case-preserved-tokens simply get ignored.

It would be nice, as you point out, to be able to utilize them with
other analyzers, though even with 20/20 hindsight, I'm not sure how
that'd be accomplished without some basic architectural trade-offs
that would inadvertently impact performance for those not interested
in the feature.

> This points out the difficulty of doing this in a *generic* way.
> Better than a "$" would be a flag on the Token IMO.  Not currently
> really supported by lucene, but you could perhaps subclass Token.

In fact, this is how I wanted to started go about approaching the
problem.  I was surprised there wasn't a flag field available to
tinker with.

I'll have to look into the subclassing solution, though I ponder if
it'd be my subclass that would always be called to create a token.  I
haven't going through the Lucene engine as a whole, yet, only
considering the parts immediately applicable to my short-term problem
and solution.

Still this is a good idea.  I'll look into it.

My biggest concern is the fact that I can't just have my own class /
subclass for the parsing.  At the moment, I'm stuck replicating the
Lucene .jj grammar, modifying it, and making my own personal copy.
Should the base copy of Lucene get update, say a new version is
released, now I've got to hope the implementation didn't change, go
manually copy the code, and patch it again, opposed to some method I
can subclass or some data structure I can augment.

The way I make myself feel better about this is to keep telling myself
that Lucene is an API, and these classes are mere examples, and that I
should be writing my own parser.  It may not be true, but it helps me
sleep at night.


> I've also considered case-insensitive support at the Term-Enum level.
> It would make lookups slower, but the index wouldn't be much bigger (it would
> be slightly bigger because one would index everything w/o lowercasing).

I'm fairly certain I'm not the only person who's tried to mix
case-sensitive searching into a query.  What I'd love to have seen is
a LuceneConfig.java file that said:

// While not for everyone, due to size and performance overhead if not
being used,
// set the following line to true to enable mixed cased searching in a
single field.
boolean ENABLE_MIXEDCASE_SEARCHING = false;


Better yet, now that I'm thinking of it, this should actually be an
attribute of the Field itself.

That makes far more sense.


> If you picked a token prefix/postfix that would pass through
> the QueryParser w/o a syntax error, the necessary manipulation could
> all be done in the Analyzer/TokenFilter.  Much easier, but perhaps not
> as nice a syntax.

The problem I ran into was that the lexical analyzer seemed to strip
any symbolic characters that were not part of a legitimate Lucene
query syntax.  Thus my dollar sign solution wouldn't have worked
without the modifications to the parser anyhow.  I also wasn't too hot
on further overloading the meaning of a symbol.


Thanks for the feedback.  I hope that at least knowing it IS possible
to do helps some poor soul.

-Walt Stoneburner,
 http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 17:55:16 2007
Return-Path: <java-user-return-28043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24566 invoked from network); 12 May 2007 17:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 17:55:15 -0000
Received: (qmail 83779 invoked by uid 500); 12 May 2007 17:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83730 invoked by uid 500); 12 May 2007 17:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83719 invoked by uid 99); 12 May 2007 17:55:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:55:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 10:55:07 -0700
Received: by ug-out-1314.google.com with SMTP id k40so847515ugc
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 10:54:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VZPLAwu5AbK8O7HBNENy5d7RbjaxqI+T9Fiz8w4/EvX4ct7tDmAiHtxlXPGmJKrFpan88No/xKhtMjF7HPfTyqPj+8O+FB1mqhqJupYcKhsSkz59CVeCqCzUxYpJeQTLx4gjWqQkEi3DiBpw9Z19pEpQDzpWTLj26N/Zin9n1yQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l+NQO/JoQaY99NSICYozzZMn9aHiywU+4OY2khaXfnGGv66QpJlmKQj7EC4vm/90g/AtlxnGCr0ChjycaGrFHUOxaq0f7TK9q2nAfqJ0qpVfzVYo2WmHQEeAL5N3X88wjjCTauND94eOORQx8u4oog3TAWY6JUqhJTXMAWj3km4=
Received: by 10.78.142.14 with SMTP id p14mr1440945hud.1178992485211;
        Sat, 12 May 2007 10:54:45 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sat, 12 May 2007 10:54:45 -0700 (PDT)
Message-ID: <359a92830705121054q4843b1a1ic1cebf18f9ec9c5a@mail.gmail.com>
Date: Sat, 12 May 2007 13:54:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Problem using wildcardsearch in phrase search
In-Reply-To: <4645F33E.50300@fastmail.fm>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49415_10026095.1178992485163"
References: <4645F33E.50300@fastmail.fm>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49415_10026095.1178992485163
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Somewhere in the list, I remember one of the guys who know what
they're talking about mentions something about KeywordAnalyzer
being "subject to the meta-semantics of the QueryParser".

So try looking at query.toString() in your example. What I think you'll
find is that KeywordAnalyzer doesn't quite do what you expect at
query time. This code

            QueryParser qp = new QueryParser("field", new
KeywordAnalyzer());

            Query q = qp.parse("Does this tokenize*");
            System.out.println(q.toString());


Produces
field:Does field:this field:tokenize*

which isn't really what you're looking for, I don't think. In fact, I don't
see any difference between this and WhitespaceAnalyzer. What I
think you want is


Try rewriting the query and dumping the output to see how your
term expands...

If you haven't already, get a copy of Luke (google Lucene Luke). That'll
allow you to examine how different analyzers work at query time and
give you a much better idea of what is going on.....

But it's a beautiful Saturday, and I'm going to go outside and garden so....

Erick


On 5/12/07, Paul Taylor <paul_t100@fastmail.fm> wrote:
>
> I seem to be having problems using a * in a phrase term query
>
> This is my search String, its not finding any matches
> 54:"MusicIP PUID*"
>
> If I match on a particular record it works ok
> 54:"MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d"
>
> The problem appears to be the space character, because I have another
> situation where there is no space and it works ok.
>
> I use a keyword analyser to create the index so the value 'MusicIP
> PUIDa39494bf-927e-1638-fb06-782ec55ac22d' is stored
> as a single value, and then use the same analyser in my search code,
> which is as follows:
>
> public List <Integer> generalSearch(String luceneSearch)
>     {
>         System.out.println("Search Query Is"+luceneSearch);
>         List <Integer> matchingRows = new ArrayList<Integer>();
>         try
>         {
>             IndexSearcher is = new IndexSearcher(directory);
>
>             //Build a query based on the searchString and cached analyzer
>             QueryParser parser = new QueryParser(ROW_NUMBER,analyzer);
>             Query query = parser.parse(luceneSearch);
>             //run the search
>             Hits hits = is.search(query);
>             Iterator i = hits.iterator();
>             while(i.hasNext())
>             {
>                 Document doc = ((Hit)i.next()).getDocument();
>                 matchingRows.add(new
> Integer(doc.getField(ROW_NUMBER).stringValue()));
>             }
>         }
>         catch (Exception e)
>         {
>             e.printStackTrace();
>         }
>         return matchingRows;
>     }
>
> I cant see what the problem is, thanks paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49415_10026095.1178992485163--

From java-user-return-28044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 18:07:29 2007
Return-Path: <java-user-return-28044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28888 invoked from network); 12 May 2007 18:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 18:07:28 -0000
Received: (qmail 96925 invoked by uid 500); 12 May 2007 18:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96886 invoked by uid 500); 12 May 2007 18:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96875 invoked by uid 99); 12 May 2007 18:07:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 11:07:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 11:07:19 -0700
Received: by an-out-0708.google.com with SMTP id b8so305325ana
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 11:06:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xe1N4iVvffURHnSeuXiZl5PJf42kN300OP0N7m4fAxDXj9WFoYP/gKkahl2RKNomLJDEdwgek4MULiJrJoVy44OTlbWaXr+YH+aOTkHrvJK0u4NnlYWQfTzU9yN1xuMQSltk/WRHDZB53eaovITCd/lX/o0lPSEPbmCIIkIWZi0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C+1IP8RpoT56OzHmj9qkZzthOdPVkD79GabuE9yy7ItA+yvQcsWOaPiclyGDSwpcRRsVIECObC8cbNX90WJohU9+tV4u1bF+8RPT/0vdOgLFU1UVb08A64RBcPtvrlWEtv79fJQRK/cUstvnENvktpFxs+bnVdg0/t2leTHaelM=
Received: by 10.100.94.3 with SMTP id r3mr2173790anb.1178993217306;
        Sat, 12 May 2007 11:06:57 -0700 (PDT)
Received: by 10.100.43.4 with HTTP; Sat, 12 May 2007 11:06:57 -0700 (PDT)
Message-ID: <c38ea6f20705121106v78de5975ode4df57e79351586@mail.gmail.com>
Date: Sat, 12 May 2007 11:06:57 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.isCurrent very slow in 2.1
In-Reply-To: <359a92830705120522m4c1a9619ia24dfda3a5c8230b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_212107_27269832.1178993217192"
References: <3FB08D6A21B3EC4D8749EF6D9E626278012E5E66@WDCCPMAIL01.markettools.com>
	 <1178904891.28048.1189357841@webmail.messagingengine.com>
	 <Pine.LNX.4.58.0705111100530.6525@hal.rescomp.berkeley.edu>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013447DD@WDCCPMAIL01.markettools.com>
	 <359a92830705120522m4c1a9619ia24dfda3a5c8230b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_212107_27269832.1178993217192
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am currently converting a copy of our production data and then I am going
to run some tests against a test server.  This is the same server I started
with.  Once I have a better picture and a more complete and production like
test suite I will come back with my last conclusions.

Andreas



On 5/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Also, do you have a sense of this action it actually was that
> made the biggest difference? Or, if you have to move the files
> back out to the network, could you let us know if your times
> go back up?
>
> Or was it just the optimization?
>
> Thanks
> Erick
>
> On 5/11/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> >
> > Chris,
> >
> > I have optimized our index directories using the compound index format.
> > I have also moved the index directories for testing purposes local to
> > the search process (before it was over network and shared NTFS file
> > system).
> >
> > Now the time for getting the isCurrent information is negligible, i.e.
> > less than 10 millis per call.
> >
> > Thanks for your input.
> >
> > Andreas
> >
> >
> >
> > -----Original Message-----
> > From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> > Sent: Friday, May 11, 2007 11:03 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: IndexReader.isCurrent very slow in 2.1
> >
> >
> > : Are there are large number of files in your index directory?
> >
> > and is there any correlation between the number files matching segment*
> > and the time isCurrent taks?
> >
> > it would also be handy to know what filesystem you use as well ...
> > directory listings may be more expensive on some filesystems then
> > others.
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_212107_27269832.1178993217192--

From java-user-return-28045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 19:59:22 2007
Return-Path: <java-user-return-28045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53186 invoked from network); 12 May 2007 19:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 19:59:22 -0000
Received: (qmail 94608 invoked by uid 500); 12 May 2007 19:59:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94575 invoked by uid 500); 12 May 2007 19:59:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94564 invoked by uid 99); 12 May 2007 19:59:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 12:59:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 12:59:13 -0700
Received: by an-out-0708.google.com with SMTP id b8so309604ana
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 12:58:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WBe55/qK0q8QIh4+lPcqYehvscNAPiPjgsnBbFptJ8NF+ZX/y3y8qduwAtJ2D4yd9xAKsL0q5HErLLwhpI3CZEDi0F1KV/BTayqgk86gGgH38XgR0k6rE/PMEb23WKhrX/5oWz2toQKH4Ne/ncG1BixPxh87vgLMpKjVuj8gvvs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=i4k/p7P9DK4SPjLc4B2y767l4D6k+0yLg683YEXNeYNaCOu4VVGHn/Xof3lji5rzMKXpRRNMo1RQ1WTBOuIJ8igVt3RLZiSID4/FfjHVAfkUjpIIHC1eLbPGy1F5hn5IKqYGZzFV5l/oPwYYOJoP/+AT66EMvwqk6PnWqbzN2s8=
Received: by 10.100.32.1 with SMTP id f1mr3277064anf.1178999930661;
        Sat, 12 May 2007 12:58:50 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id d21sm26222642and.2007.05.12.12.58.49;
        Sat, 12 May 2007 12:58:50 -0700 (PDT)
Message-ID: <46461C62.3050701@gmail.com>
Date: Sat, 12 May 2007 15:58:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Mixing Case and Case-Insensitive Searching
References: <ae6f38f60705111349o6e042ce6r30b89b52b0277f07@mail.gmail.com>
In-Reply-To: <ae6f38f60705111349o6e042ce6r30b89b52b0277f07@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> I'd love to see a formal syntax like this officially enter the Lucene
> standard query language someday.
>
I doubt that this is something that is ever going to really happen. 
There are a couple of approaches to the problem and there are other 
similar  problems (like  allowing stemmed and unstemmed searches)  and I 
think you are going to be stuck with roll your own for this type of 
thing. The problem with it being in the syntax is that it requires you 
to use certain analyzer's and indexing schemes...something not 
guaranteed...and if you where to add a case sensitive approach to the 
core of Lucene it would slow down the common case for a somewhat rare 
case. I think the brilliance of Lucenes approach is that it provides 
building blocks for your own search solution. I wouldn't consider it out 
of the normal to write your own parser or modify Lucenes parser...I 
think a lot of people do. Your solution is a good one, and I think its 
the right approach with Lucene...there are a lot of cool things you can 
do with different analyzers and token positions...but adding more 
support than what is there will tie down the sweet open endedness. Maybe 
a sandbox package with all of the necessary analyzers and the modified 
query parser would be more likely...even still it seems a lot of stuff 
does not even make the sandbox. These guys keep quite intent on keeping 
Lucene lean and mean and I am quite thankful for it.

As far as solr, a lot of the code can just be stolen or you might check 
out embedded solr and I think there is something else similar to 
embedded solr that might not require a web server...

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 20:29:34 2007
Return-Path: <java-user-return-28046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58935 invoked from network); 12 May 2007 20:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 20:29:34 -0000
Received: (qmail 21096 invoked by uid 500); 12 May 2007 20:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21062 invoked by uid 500); 12 May 2007 20:29:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21051 invoked by uid 99); 12 May 2007 20:29:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 13:29:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 13:29:27 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1233984wxd
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 13:29:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=f3G+1Y/YP3Kf2CHEL1Q79u3SrkhSiDOfzR+3VmVf5ZM8vloXgqF8gqOGbgR5cGmcSvw+7SLvk1Aw++FABofNErWZbTOLkO+H8WfekJXPycF2HAFIR2+Ikx1XquVID7DB6+3oj6FkxLixnNOZ5N55aTNv3s2sYAZrX7OGKpCyEag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XWg43j7dAvrXqR09KdzCn3pfmjwaLEiiSKI4g1Yy9MNcybuE71EyB/5TEYeNWlqOrB6soISVjzLcA0sHeQUlgSNIJIUVNorv7VFitpdLkyVbfa8951I4DL8e8dl7LjFS3jfkEo1Zshbz44s1I1zrFbrwL0j0pIJ0E550wfnrIR8=
Received: by 10.70.67.2 with SMTP id p2mr4490846wxa.1179001745880;
        Sat, 12 May 2007 13:29:05 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 71sm4621396wry.2007.05.12.13.29.04;
        Sat, 12 May 2007 13:29:05 -0700 (PDT)
Message-ID: <46462379.207@gmail.com>
Date: Sat, 12 May 2007 16:28:41 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm>
In-Reply-To: <4645F33E.50300@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Paul Taylor wrote:
> I seem to be having problems using a * in a phrase term query
>
> This is my search String, its not finding any matches
> 54:"MusicIP PUID*"
>
> If I match on a particular record it works ok
> 54:"MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d"
>
"MusicIP PUID*" means to search for MusicIP within one of PUID*...I am 
pretty sure that KeywordAnalyzer does not split on whitespace like 
WhiteSpaceAnalyzer does...which means that MusicIP is never within one 
of PUID*..."MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d" is one 
whole token.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 21:04:58 2007
Return-Path: <java-user-return-28047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68442 invoked from network); 12 May 2007 21:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 21:04:57 -0000
Received: (qmail 52260 invoked by uid 500); 12 May 2007 21:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52227 invoked by uid 500); 12 May 2007 21:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52216 invoked by uid 99); 12 May 2007 21:04:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 14:04:57 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 14:04:49 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 628A821EF4F
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 17:04:31 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sat, 12 May 2007 17:04:29 -0400
X-Sasl-enc: lkmAvuYZIw75hZOBdBbuMYU9fV8NZMtRTJBWc6+xYkfz 1179003869
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 63981105C7
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 17:04:29 -0400 (EDT)
Message-ID: <46462BDE.9060107@fastmail.fm>
Date: Sat, 12 May 2007 22:04:30 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com>
In-Reply-To: <46462379.207@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> "MusicIP PUID*" means to search for MusicIP within one of PUID*
Sorry I dont understand, can you give me a further reference

> ...I am pretty sure that KeywordAnalyzer does not split on whitespace 
> like WhiteSpaceAnalyzer does...which means that MusicIP is never 
> within one of PUID*..."MusicIP 
> PUIDa39494bf-927e-1638-fb06-782ec55ac22d" is one whole token.
>
I use keyword analyser for both creating the index and parsing the 
query, I was hoping that MusicIP Puid* would be treated as one thing 
when I search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 21:39:54 2007
Return-Path: <java-user-return-28048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77948 invoked from network); 12 May 2007 21:39:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 21:39:53 -0000
Received: (qmail 85183 invoked by uid 500); 12 May 2007 21:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85150 invoked by uid 500); 12 May 2007 21:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85139 invoked by uid 99); 12 May 2007 21:39:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 14:39:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 14:39:46 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1243460wxd
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 14:39:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=C3Eos9lnU9jETmsS+WCHNRTU3dzW/YrbtcAT2efBuO/MUYDQS/xYv/f5cvzwwbhRN15LkwLmycnc6kBhyju/STHTaapt+dC32N1T2Jf+D8Gm3v1LSH6/+Y2bt0fYzuV6ISGrDUDTV5L4cBd58bHHDM1Wkn6zDVXcFV4IzgZ5lkc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=F3D4Hr2rA+Fc3XQKDSObJ3UrbHFPHPXLsI9q/VEakD2a5gBIdl3Ccy+FiOjeyvNlE9UqGewqiUdYBdmuCRpafSEam1NOCOhqXe6yV2IFIdT0ByF/WmdRQXpIAlxONbeW8RAZGp79RKFRpa4C0Oiwvrc2DiAbgTAxEom9Vu3xrIc=
Received: by 10.70.47.19 with SMTP id u19mr7476820wxu.1179005964176;
        Sat, 12 May 2007 14:39:24 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 13sm9418985wrl.2007.05.12.14.39.23;
        Sat, 12 May 2007 14:39:23 -0700 (PDT)
Message-ID: <464633F3.9030008@gmail.com>
Date: Sat, 12 May 2007 17:38:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <46462BDE.9060107@fastmail.fm>
In-Reply-To: <46462BDE.9060107@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Paul Taylor wrote:
> Mark Miller wrote:
>> "MusicIP PUID*" means to search for MusicIP within one of PUID*
> Sorry I dont understand, can you give me a further reference
>
>> ...I am pretty sure that KeywordAnalyzer does not split on whitespace 
>> like WhiteSpaceAnalyzer does...which means that MusicIP is never 
>> within one of PUID*..."MusicIP 
>> PUIDa39494bf-927e-1638-fb06-782ec55ac22d" is one whole token.
>>
> I use keyword analyser for both creating the index and parsing the 
> query, I was hoping that MusicIP Puid* would be treated as one thing 
> when I search
>
>
Didn't you say you where using a phrasequery? If you are, things will 
not work as expected. You need to leave the quotes out of your search as 
a phrasequery will not match what you are putting in your index. If you 
are not using a phrasequery then things should work as you would expect. 
Can you provide any other info?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 22:16:08 2007
Return-Path: <java-user-return-28049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83530 invoked from network); 12 May 2007 22:16:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 22:16:07 -0000
Received: (qmail 17160 invoked by uid 500); 12 May 2007 22:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17128 invoked by uid 500); 12 May 2007 22:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17117 invoked by uid 99); 12 May 2007 22:16:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 15:16:07 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 15:16:00 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id BF31721F8D0
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 18:15:42 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sat, 12 May 2007 18:15:40 -0400
X-Sasl-enc: B+cfg67YhzLbf3nH8Zydb3R1DXaom3iuI1j0rMmSwo1C 1179008139
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id CDDD010E98
	for <java-user@lucene.apache.org>; Sat, 12 May 2007 18:15:39 -0400 (EDT)
Message-ID: <46463C8C.6020009@fastmail.fm>
Date: Sat, 12 May 2007 23:15:40 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <46462BDE.9060107@fastmail.fm> <464633F3.9030008@gmail.com>
In-Reply-To: <464633F3.9030008@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Didn't you say you where using a phrasequery? If you are, things will 
> not work as expected. You need to leave the quotes out of your search 
> as a phrasequery will not match what you are putting in your index. If 
> you are not using a phrasequery then things should work as you would 
> expect. Can you provide any other info?
>
> - Mark

No, I meant I was parsing a search String of the form fieldname:"MusicIP 
Puid*" (because I was using quotes and it is surrounded by double quotes 
I called it a phrase query), then I use the QueryParser().parse() to 
convert this search string into a Query (as shown in the code I posted 
earlier)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 12 23:25:03 2007
Return-Path: <java-user-return-28050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98224 invoked from network); 12 May 2007 23:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 May 2007 23:25:02 -0000
Received: (qmail 78721 invoked by uid 500); 12 May 2007 23:25:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78693 invoked by uid 500); 12 May 2007 23:25:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78676 invoked by uid 99); 12 May 2007 23:25:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 16:25:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 16:24:53 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1257169wxd
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 16:24:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W+IJhKDQtsxb4bnWj60E46/VA2d2GDQ9TihuPiI0p6CpI9loab6M5iE31yN/EsYpTIYnHA3Qq8jifkQUXsckqpUgza4fUW/ttLbj4hX8fwrYDPycA1ryb+fVZvkYjJNaONZahyFaAPGbS6HDZg210wPJcu7swhnoM2CXMZNeifc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OJd6tqP7oUS29DF0ccBPF4TV5dTC65YciUP0OaBqheQrTnFD2gECklPj0X7rKqk5denMrYQky7gV4E0TgSn14QxP6mBSIY2sO+VT/qJTx/QTGCRkSVd7vBY+ThlHGGpVakVFQZt7PDt1N8MnQ9Yw8D2fbHHpzkYGzWyXmxv7SN0=
Received: by 10.70.57.8 with SMTP id f8mr7493393wxa.1179012272704;
        Sat, 12 May 2007 16:24:32 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id g3sm2482673wra.2007.05.12.16.24.31;
        Sat, 12 May 2007 16:24:32 -0700 (PDT)
Message-ID: <46464C95.8090606@gmail.com>
Date: Sat, 12 May 2007 19:24:05 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <46462BDE.9060107@fastmail.fm> <464633F3.9030008@gmail.com> <46463C8C.6020009@fastmail.fm>
In-Reply-To: <46463C8C.6020009@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well I am confused so I suppose I'll let someone else give it a shot.

Just in case though...if you are using the query: fieldname:"MusicIP Puid*"
Then you should not...you need to leave out the quotes...quotes create a 
phrasequery, and a phrasequery will not match what is in your index.
This may end up being the problem though...without the quotes, the space 
will be treated as the default operator -- you may need to write your 
own super simple parser that suits your needs instead...you don't want 
the space to act as a default operator but as a normal token character.

Then again, I am not sure if you are using those quotes or not...

- Mark

Paul Taylor wrote:
> Mark Miller wrote:
>> Didn't you say you where using a phrasequery? If you are, things will 
>> not work as expected. You need to leave the quotes out of your search 
>> as a phrasequery will not match what you are putting in your index. 
>> If you are not using a phrasequery then things should work as you 
>> would expect. Can you provide any other info?
>>
>> - Mark
>
> No, I meant I was parsing a search String of the form 
> fieldname:"MusicIP Puid*" (because I was using quotes and it is 
> surrounded by double quotes I called it a phrase query), then I use 
> the QueryParser().parse() to convert this search string into a Query 
> (as shown in the code I posted earlier)
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 00:06:11 2007
Return-Path: <java-user-return-28051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8749 invoked from network); 13 May 2007 00:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 00:06:10 -0000
Received: (qmail 6434 invoked by uid 500); 13 May 2007 00:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6265 invoked by uid 500); 13 May 2007 00:06:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6253 invoked by uid 99); 13 May 2007 00:06:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 17:06:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 17:06:03 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1262720wxd
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 17:05:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=oRBYjDBK54Dd9/OnY5Hra3oLjwTW9VcPWOZG7riHoXTEOB1w5QM0U+23M6oOGUMRxtxeRBALfDXaLVv3DARv22sgzg0af2OspiK1gyTpwNZ1gB4wfX3kKkot+aHObhzJWOdg90RcyGRGHiyGkyMjtaa05lAGYUlOmjh9MehiERU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aNHe6y2wZTS/t986VicVteNOrbGyqvB9zI8E9WenR3da4a3RSiDWRlK6TguhQo48vAJhUBlQBc57I+n+07Mt4fL/lhbeW2yh7IHnFc2CPBqCBiR3LkpA18dfax7wSTQfD+oxW2rjgTLNvoqADG/biwoiV5XC+6uYoF+9so+m40E=
Received: by 10.70.42.20 with SMTP id p20mr7509899wxp.1179014742506;
        Sat, 12 May 2007 17:05:42 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 3sm14044659wrh.2007.05.12.17.05.38;
        Sat, 12 May 2007 17:05:41 -0700 (PDT)
Message-ID: <46465637.9030204@gmail.com>
Date: Sat, 12 May 2007 20:05:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in  phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <46462BDE.9060107@fastmail.fm> <464633F3.9030008@gmail.com> <46463C8C.6020009@fastmail.fm>
In-Reply-To: <46463C8C.6020009@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This just keeps running around in my head...

I was wrong on one point...if you use the KeywordAnalyzer and you put 
your search in quotes then you will not generate a phrase query because 
a PhraseQuery is only generated if the analyzer produces more than one 
token. The problem is that, instead of a PhraseQuery, a TermQuery is 
generated. You don't get to the wildcard handling part of the parser...a 
TermQuery is returned. The QueryParser's javacc syntax will not 
recognize wildcards in quotes and the handling for a quoted token does 
not check for wildcards.

You might try an override in 'Query getFieldQuery(String field, String 
queryText)' that scans the token for a wildcard and if it finds one, 
generate a wildcard query instead of a termquery.

- Mark

Paul Taylor wrote:
> Mark Miller wrote:
>> Didn't you say you where using a phrasequery? If you are, things will 
>> not work as expected. You need to leave the quotes out of your search 
>> as a phrasequery will not match what you are putting in your index. 
>> If you are not using a phrasequery then things should work as you 
>> would expect. Can you provide any other info?
>>
>> - Mark
>
> No, I meant I was parsing a search String of the form 
> fieldname:"MusicIP Puid*" (because I was using quotes and it is 
> surrounded by double quotes I called it a phrase query), then I use 
> the QueryParser().parse() to convert this search string into a Query 
> (as shown in the code I posted earlier)
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 00:42:50 2007
Return-Path: <java-user-return-28052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14373 invoked from network); 13 May 2007 00:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 00:42:47 -0000
Received: (qmail 34401 invoked by uid 500); 13 May 2007 00:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34355 invoked by uid 500); 13 May 2007 00:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34338 invoked by uid 99); 13 May 2007 00:42:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 17:42:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 17:42:37 -0700
Received: by ug-out-1314.google.com with SMTP id k40so877872ugc
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 17:42:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LZBwpQ+V6P6j6fChh4GlZRqeFbrUWZffF3lJBiwnBfqp4NmnqmfsL/DEyPFJ494STJ0NCWp1y5nElqP8yfZtDg0jZTKxm3I5uWeMS3cCQat56vWLVwhgf23XlcCgimj0F4HtoV9Ra1ntdHaH+qjVXn8CDYz98wQ7ovGhULGmoiU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KBhhK/Jv6T2PXNYpjift07hlT5oltqqdeclT/+Xjktiuvr6erWQy4xE2KpOqFPoUpOa2M3f7+EgsWyA8BQcZBcSgG4+LI8zqO2JWA8pOPIflbhxoUevEaFAgdptGRDAzcSQXerlrJganKxq8OW6broH1iu33rSrKnnkFPy1j+oA=
Received: by 10.78.178.5 with SMTP id a5mr1609275huf.1179016935702;
        Sat, 12 May 2007 17:42:15 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sat, 12 May 2007 17:42:15 -0700 (PDT)
Message-ID: <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com>
Date: Sat, 12 May 2007 20:42:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
In-Reply-To: <46462379.207@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51023_9378234.1179016935646"
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51023_9378234.1179016935646
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below....

On 5/12/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>
> Paul Taylor wrote:
> > I seem to be having problems using a * in a phrase term query
> >
> > This is my search String, its not finding any matches
> > 54:"MusicIP PUID*"
> >
> > If I match on a particular record it works ok
> > 54:"MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d"
> >
> "MusicIP PUID*" means to search for MusicIP within one of PUID*...I am
> pretty sure that KeywordAnalyzer does not split on whitespace like
> WhiteSpaceAnalyzer does...


Perhaps not like whitespaceanalyzer does in all cases, but this code

            QueryParser qp = new QueryParser("field", new
WhitespaceAnalyzer());

            Query q = qp.parse("Does this tokenize*");
            System.out.println(q.toString());

produces

field:Does field:this field:tokenize*



while this code
            QueryParser qp = new QueryParser("field", new
KeywordAnalyzer());

            Query q = qp.parse("Does this tokenize*");
            System.out.println(q.toString());


Produces:
field:Does field:this field:tokenize*

The only difference is using KeywordAnalyzer rather than WhitespaceAnalyzer.

I sure don't see the difference, and it's puzzled me on and off.

Erick

which means that MusicIP is never within one
> of PUID*..."MusicIP PUIDa39494bf-927e-1638-fb06-782ec55ac22d" is one
> whole token.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51023_9378234.1179016935646--

From java-user-return-28053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 01:18:21 2007
Return-Path: <java-user-return-28053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25545 invoked from network); 13 May 2007 01:18:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 01:18:19 -0000
Received: (qmail 57834 invoked by uid 500); 13 May 2007 01:18:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57791 invoked by uid 500); 13 May 2007 01:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57772 invoked by uid 99); 13 May 2007 01:18:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 18:18:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 May 2007 18:18:12 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1271864wxd
        for <java-user@lucene.apache.org>; Sat, 12 May 2007 18:17:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=T21QdeBti51YvPdWrFVuL87YFFQLC9D+fXNlD6Tw3dui1M8I4psAo9FL7twh9C4uR++gLnj4FlErdE8PhGD333hN3ZWryVUE+5ljFobxSag00WSZjPGWiDh3tx03KBQ3x7NBdSy0Qifl6mDIlnSGNWQh5MrrnIsJ9KAlyqLEvQg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Ggms1/TlMiaR72bNfAlbHSzrh4BlTSvwllBO5+126r1K9JkL4ET1YOUCthGFQPaiAGcHHMNPwFDBkn3kNnZmj2fyfgGKNFGC7fIm0k/5Zuy50HLf4H29UGLIcoNXAZtGdTmJc5kQjxWrYZC4hw+OTTbVDSdqmxcbcWgn4IjB2BY=
Received: by 10.70.90.17 with SMTP id n17mr7564538wxb.1179019071573;
        Sat, 12 May 2007 18:17:51 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 27sm3720559wra.2007.05.12.18.17.50;
        Sat, 12 May 2007 18:17:50 -0700 (PDT)
Message-ID: <46466721.7090707@gmail.com>
Date: Sat, 12 May 2007 21:17:21 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com>
In-Reply-To: <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
>
> Perhaps not like whitespaceanalyzer does in all cases, but this code
>
>            QueryParser qp = new QueryParser("field", new
> WhitespaceAnalyzer());
>
>            Query q = qp.parse("Does this tokenize*");
>            System.out.println(q.toString());
>
> produces
>
> field:Does field:this field:tokenize*
>
>
>
> while this code
>            QueryParser qp = new QueryParser("field", new
> KeywordAnalyzer());
>
>            Query q = qp.parse("Does this tokenize*");
>            System.out.println(q.toString());
>
>
> Produces:
> field:Does field:this field:tokenize*
>
> The only difference is using KeywordAnalyzer rather than 
> WhitespaceAnalyzer.
>
> I sure don't see the difference, and it's puzzled me on and off.
>
> Erick
QueryParser breaks up "Does this tokenize*" before it even gets to the 
Analyzer...each space separated term is fed to the analyzer one at a 
time...unless they are surrounded in quotes in which case the whole 
string in the quotes is fed into the analyzer.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 09:02:59 2007
Return-Path: <java-user-return-28054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42253 invoked from network); 13 May 2007 09:02:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 09:02:58 -0000
Received: (qmail 14286 invoked by uid 500); 13 May 2007 09:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14243 invoked by uid 500); 13 May 2007 09:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14231 invoked by uid 99); 13 May 2007 09:02:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 02:02:55 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 02:02:47 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 806A9220027
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 05:02:38 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Sun, 13 May 2007 05:02:27 -0400
X-Sasl-enc: RaFbu/8YXaGKbNnaD1MpWOFSPNeArDe+2EriSs2ercnP 1179046947
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 1CC592A77D
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 05:02:27 -0400 (EDT)
Message-ID: <4646D424.7090609@fastmail.fm>
Date: Sun, 13 May 2007 10:02:28 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com>
In-Reply-To: <46466721.7090707@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think the KeywordAnlyser bit is maybe a red herring, the problem seems 
to be that you cant use * within double quotes, I made some changes to 
my data and index to remove the space character

If I fed 54:puid* to my code it generates a Prefix Query and works as 
required
Search Query Is54:puid*
Parsed Search Query Is54:puid*of type:class 
org.apache.lucene.search.PrefixQuery

but with the quotes (which I would need if my value contained spaces)  I 
only get a Term Query (which doesnt handle wildcards)
Search Query Is54:"puid*"
Parsed Search Query Is54:puid*of type:class 
org.apache.lucene.search.TermQuery

so why is this ?

thanks Paul

code is:
 public List <Integer> generalSearch(String luceneSearch)
    {
        System.out.println("Search Query Is"+luceneSearch);
        List <Integer> matchingRows = new ArrayList<Integer>();
        try
        {
            //make a new index searcher with the inmemory (RAM) index.
            IndexSearcher is = new IndexSearcher(directory);

            //Build a query based on the searchString and cached analyzer
            QueryParser parser = new QueryParser(ROW_NUMBER,analyzer);
            Query query = parser.parse(luceneSearch);
            System.out.println("Parsed Search Query 
Is"+query.toString()+"of type:"+query.getClass());
            //run the search
            Hits hits = is.search(query);
            Iterator i = hits.iterator();
            while(i.hasNext())
            {
                Document doc = ((Hit)i.next()).getDocument();
                matchingRows.add(new 
Integer(doc.getField(ROW_NUMBER).stringValue()));
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        System.out.println("Search Query Results Set:"+matchingRows.size());
        return matchingRows;
    }


Mark Miller wrote:
>
>>
>>
>> Perhaps not like whitespaceanalyzer does in all cases, but this code
>>
>>            QueryParser qp = new QueryParser("field", new
>> WhitespaceAnalyzer());
>>
>>            Query q = qp.parse("Does this tokenize*");
>>            System.out.println(q.toString());
>>
>> produces
>>
>> field:Does field:this field:tokenize*
>>
>>
>>
>> while this code
>>            QueryParser qp = new QueryParser("field", new
>> KeywordAnalyzer());
>>
>>            Query q = qp.parse("Does this tokenize*");
>>            System.out.println(q.toString());
>>
>>
>> Produces:
>> field:Does field:this field:tokenize*
>>
>> The only difference is using KeywordAnalyzer rather than 
>> WhitespaceAnalyzer.
>>
>> I sure don't see the difference, and it's puzzled me on and off.
>>
>> Erick
> QueryParser breaks up "Does this tokenize*" before it even gets to the 
> Analyzer...each space separated term is fed to the analyzer one at a 
> time...unless they are surrounded in quotes in which case the whole 
> string in the quotes is fed into the analyzer.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 11:07:19 2007
Return-Path: <java-user-return-28055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75444 invoked from network); 13 May 2007 11:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 11:07:18 -0000
Received: (qmail 93421 invoked by uid 500); 13 May 2007 11:07:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93065 invoked by uid 500); 13 May 2007 11:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93054 invoked by uid 99); 13 May 2007 11:07:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:07:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:07:10 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem using wildcardsearch in phrase search
Date: Sun, 13 May 2007 07:06:47 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B122A2092@sbsrv.AALabs.local>
In-Reply-To: <4646D424.7090609@fastmail.fm>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem using wildcardsearch in phrase search
Thread-Index: AceVPYAsqIEsuy+2QtyWxonpCEUeRAAES7Dg
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm>
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Instead of using QueryParser.Parse, what if you make a WildcardQuery
directly?  I had similar troubles getting prefix queries (for ajax)
working properly, never did solve it.

-----Original Message-----
From: Paul Taylor [mailto:paul_t100@fastmail.fm]=20
Sent: Sunday, May 13, 2007 5:02 AM
To: java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search

I think the KeywordAnlyser bit is maybe a red herring, the problem seems

to be that you cant use * within double quotes, I made some changes to=20
my data and index to remove the space character

If I fed 54:puid* to my code it generates a Prefix Query and works as=20
required
Search Query Is54:puid*
Parsed Search Query Is54:puid*of type:class=20
org.apache.lucene.search.PrefixQuery

but with the quotes (which I would need if my value contained spaces)  I

only get a Term Query (which doesnt handle wildcards)
Search Query Is54:"puid*"
Parsed Search Query Is54:puid*of type:class=20
org.apache.lucene.search.TermQuery

so why is this ?

thanks Paul

code is:
 public List <Integer> generalSearch(String luceneSearch)
    {
        System.out.println("Search Query Is"+luceneSearch);
        List <Integer> matchingRows =3D new ArrayList<Integer>();
        try
        {
            //make a new index searcher with the inmemory (RAM) index.
            IndexSearcher is =3D new IndexSearcher(directory);

            //Build a query based on the searchString and cached
analyzer
            QueryParser parser =3D new QueryParser(ROW_NUMBER,analyzer);
            Query query =3D parser.parse(luceneSearch);
            System.out.println("Parsed Search Query=20
Is"+query.toString()+"of type:"+query.getClass());
            //run the search
            Hits hits =3D is.search(query);
            Iterator i =3D hits.iterator();
            while(i.hasNext())
            {
                Document doc =3D ((Hit)i.next()).getDocument();
                matchingRows.add(new=20
Integer(doc.getField(ROW_NUMBER).stringValue()));
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        System.out.println("Search Query Results
Set:"+matchingRows.size());
        return matchingRows;
    }


Mark Miller wrote:
>
>>
>>
>> Perhaps not like whitespaceanalyzer does in all cases, but this code
>>
>>            QueryParser qp =3D new QueryParser("field", new
>> WhitespaceAnalyzer());
>>
>>            Query q =3D qp.parse("Does this tokenize*");
>>            System.out.println(q.toString());
>>
>> produces
>>
>> field:Does field:this field:tokenize*
>>
>>
>>
>> while this code
>>            QueryParser qp =3D new QueryParser("field", new
>> KeywordAnalyzer());
>>
>>            Query q =3D qp.parse("Does this tokenize*");
>>            System.out.println(q.toString());
>>
>>
>> Produces:
>> field:Does field:this field:tokenize*
>>
>> The only difference is using KeywordAnalyzer rather than=20
>> WhitespaceAnalyzer.
>>
>> I sure don't see the difference, and it's puzzled me on and off.
>>
>> Erick
> QueryParser breaks up "Does this tokenize*" before it even gets to the

> Analyzer...each space separated term is fed to the analyzer one at a=20
> time...unless they are surrounded in quotes in which case the whole=20
> string in the quotes is fed into the analyzer.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 11:37:17 2007
Return-Path: <java-user-return-28056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79092 invoked from network); 13 May 2007 11:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 11:37:16 -0000
Received: (qmail 14703 invoked by uid 500); 13 May 2007 11:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14661 invoked by uid 500); 13 May 2007 11:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14650 invoked by uid 99); 13 May 2007 11:37:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:37:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:37:09 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1347387wxd
        for <java-user@lucene.apache.org>; Sun, 13 May 2007 04:36:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=G5Zebfo6Eg2/Ez58d6mPim57Q2iJMN1T/TBaU1U5vyRH8vB0oLUI8qp8fXAx1Q6akrUoNVxMmfAxeU5WwQS913s91q5ijJq280XbYbS9OgCQqKsHdEj6dNI6zk8GAA+FtIlbtVK9NqWagIgQR5y3vpWzozhcuiT0CJiOAiOF2H8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=o8pVzbjxZJndHOrG/mjaHrftnm1OifPi2gnqqlX4/IPYf7g1aml97B9B4KPVq1DgJI/xw+xoDY92D+3NrjoYstQ42Ubwsh4DIKdKncHN5XSl2Zx3dJhE9/B2MRk84Rxot2cdO3Qf3jrV6yc7N0x4PFokC9c/dM9Tjv5gTQHN4Yo=
Received: by 10.70.80.6 with SMTP id d6mr3420620wxb.1179056208734;
        Sun, 13 May 2007 04:36:48 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 26sm16445159wra.2007.05.13.04.36.46;
        Sun, 13 May 2007 04:36:48 -0700 (PDT)
Message-ID: <4646F823.7020203@gmail.com>
Date: Sun, 13 May 2007 07:36:03 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm>
In-Reply-To: <4646D424.7090609@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> I think the KeywordAnlyser bit is maybe a red herring, the problem 
> seems to be that you cant use * within double quotes, I made some 
> changes to my data and index to remove the space character
>
You can't use a wildcard within double quotes. The Lucene syntax grammar 
does not look for such things. The KeywordAnalyzer is not a red herring 
though...it will not work as expected. Like I said, the QueryParser 
breaks up a query where it sees spaces BEFORE sending to an analyzer. 
This is why Erik thinks that KeywordAnazlyer is the same as 
WhiteSpaceAnalyzer...it is not...KeywordAnazlyer does not break up words 
on spaces...it just looks like it when you use QueryParser because 
QueryParser breaks up words by spaces before even using an Analyzer. 
When you use KeywordAnalyzer for indexing it will not break on 
spaces...when you use it with the QueryParser it WILL break on spaces.
> If I fed 54:puid* to my code it generates a Prefix Query and works as 
> required
> Search Query Is54:puid*
> Parsed Search Query Is54:puid*of type:class 
> org.apache.lucene.search.PrefixQuery
>
> but with the quotes (which I would need if my value contained spaces)  
> I only get a Term Query (which doesnt handle wildcards)
> Search Query Is54:"puid*"
> Parsed Search Query Is54:puid*of type:class 
> org.apache.lucene.search.TermQuery
I explained this, though apparently not well. QueryParser feeds chunks 
of text to the analyzer. If there are spaces, each term is fed to the 
analyzer one at a time and a TermQuery is generated for each chunk. If 
you have something in quotes, the whole piece is fed to the 
analyzer...if the analyzer generates more than one token, a phrasequery 
is generated...if only ONE token is generated (as is the case when you 
feed anything within quotes to a KeywordAnalyzer), then a TermQuery is 
generated. The code does not look for any wildcards. Look at the 
QueryParser code, getField in particular. One option you have is to 
override getField, and before generating a TermQuery, scan for wildcards 
and if you find one, return a wildcardquery instead of a term query.

I realize I have a weak grasp of my own language and can be a lot less 
than clear...but the information you need has certainly been given in my 
emails. Perhaps someone else could be a little more clearer than I am able.

- Mark
>
> so why is this ?
>
> thanks Paul
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 11:51:17 2007
Return-Path: <java-user-return-28057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80525 invoked from network); 13 May 2007 11:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 11:51:16 -0000
Received: (qmail 24434 invoked by uid 500); 13 May 2007 11:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24105 invoked by uid 500); 13 May 2007 11:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24094 invoked by uid 99); 13 May 2007 11:51:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:51:16 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 04:51:09 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id CCB2721F4B5
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 07:51:02 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Sun, 13 May 2007 07:50:49 -0400
X-Sasl-enc: jQCO6mRniJJ3zPhhas90DzvfQCX4wvBpbvsoDza3IRMs 1179057049
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 4374415B00
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 07:50:49 -0400 (EDT)
Message-ID: <4646FB9A.1080505@fastmail.fm>
Date: Sun, 13 May 2007 12:50:50 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com>
In-Reply-To: <4646F823.7020203@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> You can't use a wildcard within double quotes. The Lucene syntax 
> grammar does not look for such things. 
This is the bit I don't get (I have got round the problem), why can't 
you use wildcards within double quotes, this isnt mentioned anywhere in 
http://lucene.apache.org/java/docs/queryparsersyntax.html

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 12:34:06 2007
Return-Path: <java-user-return-28058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91244 invoked from network); 13 May 2007 12:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 12:34:04 -0000
Received: (qmail 63256 invoked by uid 500); 13 May 2007 12:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63223 invoked by uid 500); 13 May 2007 12:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63212 invoked by uid 99); 13 May 2007 12:34:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 05:34:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 05:33:56 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1355409wxd
        for <java-user@lucene.apache.org>; Sun, 13 May 2007 05:33:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cC8Ezqi/foVBDpkhzFrjut3RJXsPJAFeG/h34FfDTDbdcGNqn2WK4VXn+GMW8bK04G9mhmpQFFFmF2ogCy0qAc+2XP1/NPjagIPTId9MHp63o1MDADZ33I2XutmnjYNAwJCs3T0GkgztqMewQ63mchPCjeyVWccIn15ptUhlfgo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=f9lRkJflZWIlXdLn/2myAST+VoWx3xGeyCB9qGXz4/WfjFKkMEvxA2eMG4OWpwaGbyLi7yrUGQCEtyAt+OGluDvionG9OuQLAQ6KycoIIcLct6o5idS2m4ToY7AZSqzu67p1Z+PCd/2OoqyABdFCupuPtbA745sMuE9XuxbrYL0=
Received: by 10.70.23.1 with SMTP id 1mr8139609wxw.1179059615394;
        Sun, 13 May 2007 05:33:35 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id m6sm10139263wrm.2007.05.13.05.33.34;
        Sun, 13 May 2007 05:33:35 -0700 (PDT)
Message-ID: <46470573.6080204@gmail.com>
Date: Sun, 13 May 2007 08:32:51 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com> <4646FB9A.1080505@fastmail.fm>
In-Reply-To: <4646FB9A.1080505@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You cannot use wildcards in quotes simply because the QueryParser syntax 
does not look for such things...at the top level it is either looking 
for a Wildcard token OR a Quoted token. There is good reason for this: a 
phrase query does not support wildcards. The hack that I suggested 
(looking for a wildcard in the token before returning the TermQuery) was 
only going to work because you where not generating a PhraseQuery with 
your quotes...the KeywordAnalyzer only emits a single token keeping a 
PhraseQuery from being generated....a TermQuery was being generated 
instead...which you wanted to turn into a WildcardQuery if you found a * 
or ? in the Term.

If you wanted Lucene to generally support wildcard queries within quotes 
you have to do a bit of work. One way: instead of generating 
PhraseQueries you override the QueryParser to generate SpanNearQueries, 
then you need to implement a simple SpanWildcardQuery and change some 
logic around in the QueryParser to look for wildcard characters in the 
quoted token and generate the correct Query of SpanNearQuery's and 
SpanWildcardQueries.

Again, I know I am not the clearest of explainers...I just have an itch 
to try and help out anyway <g>.

- Mark

Paul Taylor wrote:
> Mark Miller wrote:
>> You can't use a wildcard within double quotes. The Lucene syntax 
>> grammar does not look for such things. 
> This is the bit I don't get (I have got round the problem), why can't 
> you use wildcards within double quotes, this isnt mentioned anywhere 
> in http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 13:36:05 2007
Return-Path: <java-user-return-28059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7740 invoked from network); 13 May 2007 13:36:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 13:36:02 -0000
Received: (qmail 23542 invoked by uid 500); 13 May 2007 13:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23495 invoked by uid 500); 13 May 2007 13:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23480 invoked by uid 99); 13 May 2007 13:36:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 06:36:01 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 06:35:54 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 585A521F4C7
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 09:35:49 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sun, 13 May 2007 09:35:35 -0400
X-Sasl-enc: RBj32Wlb/e9BX63Fefv86Y/C8UFAym/9SC8Dp5JVEbDm 1179063334
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 89693EC27
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 09:35:34 -0400 (EDT)
Message-ID: <46471428.2090803@fastmail.fm>
Date: Sun, 13 May 2007 14:35:36 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com> <4646FB9A.1080505@fastmail.fm> <46470573.6080204@gmail.com>
In-Reply-To: <46470573.6080204@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> You cannot use wildcards in quotes simply because the QueryParser 
> syntax does not look for such things...at the top level it is either 
> looking for a Wildcard token OR a Quoted token. There is good reason 
> for this: a phrase query does not support wildcards.
OK thanks for all the info, as I said previously I worked round the 
problem so I dont need to do any coding, but the obvious followup 
question to above is:Why don't Phrase queries support wildcards, does it 
not just not make sense, or has it just not been done yet, as i said 
before there is nothing in the query syntax documentation to indicate it 
isnt supported.

thanks paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 14:13:36 2007
Return-Path: <java-user-return-28060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19554 invoked from network); 13 May 2007 14:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 14:13:35 -0000
Received: (qmail 67494 invoked by uid 500); 13 May 2007 14:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67464 invoked by uid 500); 13 May 2007 14:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67453 invoked by uid 99); 13 May 2007 14:13:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 07:13:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 07:13:28 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1370203wxd
        for <java-user@lucene.apache.org>; Sun, 13 May 2007 07:13:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eZOw5PAuhh8sTLojimh+PBUT5G+MGivc7WN5n1UCs+9qx8npM36+xo8Y8iSUrfDcLXhFMBmQ47VES6TaRA433AsrUHJm5PiQa+jIPCpAI4KzrQwd9csTfixZahdfASEy5KRVCLpyMdIyARlxha60t1HwU3RWJnPPgzzRn5u9Qmo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dU66gKPkm9hgyzUiPEMrTn9dF3LCkvtlz6SNkz0pjjs/Arq+Y+A6/0aulV5dvatQgYsgJOYKe6gYT1Q/mgpUYerSRRIrmz8gmR0OsYc6UXA4etib+f2WaybvIRu9ht4DyiO5SCLl2qL9MNdzoyE8dyp37xIZqCabeLHsjCasp5Q=
Received: by 10.70.57.8 with SMTP id f8mr8229661wxa.1179065585821;
        Sun, 13 May 2007 07:13:05 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id g3sm3046733wra.2007.05.13.07.13.04;
        Sun, 13 May 2007 07:13:05 -0700 (PDT)
Message-ID: <46471CC4.9020905@gmail.com>
Date: Sun, 13 May 2007 10:12:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com> <4646FB9A.1080505@fastmail.fm> <46470573.6080204@gmail.com> <46471428.2090803@fastmail.fm>
In-Reply-To: <46471428.2090803@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I do not know enough about PhraseQuery to say how hard it would be to 
add support for wildcards, but I am sure there is some method of doing 
it -- it has just not been done. From what I can tell it would be easier 
to stop using PhraseQuery and use SpanQuery's if you wanted to do this. 
Maybe someone more knowledgeable about PhraseQuery could elaborate on 
some of the difficulties of adding wildcard support...then again I think 
you may find discussion of this if you search the archives.

- Mark

Paul Taylor wrote:
> Mark Miller wrote:
>> You cannot use wildcards in quotes simply because the QueryParser 
>> syntax does not look for such things...at the top level it is either 
>> looking for a Wildcard token OR a Quoted token. There is good reason 
>> for this: a phrase query does not support wildcards.
> OK thanks for all the info, as I said previously I worked round the 
> problem so I dont need to do any coding, but the obvious followup 
> question to above is:Why don't Phrase queries support wildcards, does 
> it not just not make sense, or has it just not been done yet, as i 
> said before there is nothing in the query syntax documentation to 
> indicate it isnt supported.
>
> thanks paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 17:54:12 2007
Return-Path: <java-user-return-28061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70724 invoked from network); 13 May 2007 17:54:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 17:54:12 -0000
Received: (qmail 87804 invoked by uid 500); 13 May 2007 17:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87774 invoked by uid 500); 13 May 2007 17:54:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87763 invoked by uid 99); 13 May 2007 17:54:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 10:54:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 10:54:05 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 778C05B764; Sun, 13 May 2007 10:53:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5AC287F403;
	Sun, 13 May 2007 10:53:44 -0700 (PDT)
Date: Sun, 13 May 2007 10:53:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Subject: Re: Problem using wildcardsearch in phrase search
In-Reply-To: <4646FB9A.1080505@fastmail.fm>
Message-ID: <Pine.LNX.4.58.0705131044160.14957@hal.rescomp.berkeley.edu>
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com>
 <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com>
 <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com>
 <4646FB9A.1080505@fastmail.fm>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > You can't use a wildcard within double quotes. The Lucene syntax
: > grammar does not look for such things.

: This is the bit I don't get (I have got round the problem), why can't
: you use wildcards within double quotes, this isnt mentioned anywhere in
: http://lucene.apache.org/java/docs/queryparsersyntax.html

Documenting a negated set against the universe of all posisble syntax
isn't feasible -- ie: the docs list what things QueryParser can do, not
the full list of all permutations of things it can't do.

It can't deal with Span Queries, it can't handle fuzzy phrase queries, it
doesn't suppord math on field vaues, it doesn't support negative values
for boost, ... these are just some of the things it doesn't support.

If you read the section on Proximity Searches (aka: PhraseQuery) you'll
eee it clearly says "Lucene supports finding words are a within a specific
distance away." ... note that word "word".  It does *not* say "...finding
QUERIES are within...."  There is no implication that the QueryParser's
Proximity Searching support incudes any query types (like wildcards) other
then simple term matching.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 13 21:14:51 2007
Return-Path: <java-user-return-28062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43855 invoked from network); 13 May 2007 21:14:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 May 2007 21:14:47 -0000
Received: (qmail 99978 invoked by uid 500); 13 May 2007 21:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99744 invoked by uid 500); 13 May 2007 21:14:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99733 invoked by uid 99); 13 May 2007 21:14:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 14:14:46 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=FROM_HAS_ULINE_NUMS,MISSING_HEADERS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 May 2007 14:14:39 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 6553E21F30E
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 17:14:39 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sun, 13 May 2007 17:14:19 -0400
X-Sasl-enc: MG+RFu46mhcQhsx0dKWopobjWXQufbNs6VUvpyQXJSWy 1179090858
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id ACB9AEA0F
	for <java-user@lucene.apache.org>; Sun, 13 May 2007 17:14:18 -0400 (EDT)
Message-ID: <46477FAC.4030106@fastmail.fm>
Date: Sun, 13 May 2007 22:14:20 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
CC:  java-user@lucene.apache.org
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com> <4646FB9A.1080505@fastmail.fm> <Pine.LNX.4.58.0705131044160.14957@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0705131044160.14957@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : > You can't use a wildcard within double quotes. The Lucene syntax
> : > grammar does not look for such things.
>
> : This is the bit I don't get (I have got round the problem), why can't
> : you use wildcards within double quotes, this isnt mentioned anywhere in
> : http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> Documenting a negated set against the universe of all posisble syntax
> isn't feasible -- ie: the docs list what things QueryParser can do, not
> the full list of all permutations of things it can't do.
>
>   
Thats true, obviously but the point I was making was that the 
queryparsersyntax page which is where I expect most novices (such as 
myself) start with lucene seems to indicate that wildcards can be used 
in, and this page is
as far as one should need to go to understand basic query syntax, this 
page should be corrected.

Quoting:
'Terms: A query is broken up into terms and operators. There are two 
types of terms: Single Terms and Phrases.
A Single Term is a single word such as "test" or "hello".
A Phrase is a group of words surrounded by double quotes such as "hello 
dolly".

....

Wildcard Searches
Lucene supports single and multiple character wildcard searches.
To perform a multiple character wildcard search use the "*" symbol.
Multiple character wildcard searches looks for 0 or more characters. For 
example, to search for test, tests or tester, you can use the search:

test*
You can also use the wildcard searches in the middle of a term.

'
there is nothing to indicate in the section on Wildcard Searches that it 
can be performed only on Single word terms not Phrase terms.

> It can't deal with Span Queries,
No they are never mentioned(,I don't even know what they are.), so it is 
not a problem.

>  it can't handle fuzzy phrase queries, 
>   
no and it states this correctly ' Lucene supports fuzzy searches based 
on the Levenshtein Distance, or Edit Distance algorithm. To do a fuzzy 
search use the tilde, "~", symbol at the end of a Single word Term'
> If you read the section on Proximity Searches (aka: PhraseQuery) you'll
> eee it clearly says "Lucene supports finding words are a within a specific
> distance away." ... note that word "word".  It does *not* say "...finding
> QUERIES are within...." 
>   
but why would I look here, I was just trying to understand query syntax,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 07:29:52 2007
Return-Path: <java-user-return-28063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20285 invoked from network); 14 May 2007 07:29:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 07:29:51 -0000
Received: (qmail 34692 invoked by uid 500); 14 May 2007 07:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34387 invoked by uid 500); 14 May 2007 07:29:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34376 invoked by uid 99); 14 May 2007 07:29:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 00:29:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.238.89.128] (HELO bioscene.co.jp) (202.238.89.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 May 2007 00:29:43 -0700
Received: (qmail 3230 invoked from network); 14 May 2007 07:30:44 -0000
Received: from unknown (HELO eth0.sonoda) (192.168.2.5)
  by bioscene.co.jp with SMTP; 14 May 2007 07:30:44 -0000
Subject: How can I limit the number of hits in my query?
From: David Leangen <apache@leangen.net>
Reply-To: apache@leangen.net
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Mon, 14 May 2007 16:24:02 +0900
Message-Id: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hello!

I am new to Lucene, so forgive me if my question is basic. I did try
googling for an answer...


For an ajax autocomplete widget, I am querying using Lucene. I only want
to return, for example, the first 20 hits of anything that Lucene finds
in whatever order Lucene gives to me.

Two questions:

 - How can I limit the number of hits? I don't know in
   advance what the data will be, so it's not feasible for
   me to use RangeQuery.

 - Will this solve the problem I am getting with maxClauseCount?

   org.apache.lucene.search.BooleanQuery$TooManyClauses
   maxClauseCount is set to 1024


Thank you!
David




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 10:49:25 2007
Return-Path: <java-user-return-28064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87403 invoked from network); 14 May 2007 10:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 10:49:24 -0000
Received: (qmail 87497 invoked by uid 500); 14 May 2007 10:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87466 invoked by uid 500); 14 May 2007 10:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87437 invoked by uid 99); 14 May 2007 10:49:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 03:49:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gilbert.groenendijk@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 03:49:15 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1584636wxd
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 03:48:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p+pudr5mfAahIaq1HBX8WOfWLa46xU0S4m0fy6yNcQqce2R0T8uO6SKWOG0cSXVdYAfI4Xs6trbWWd1PiLc3I49Xji4+KMLb12hZdKthI50R/K2hhBbf0YsRH0E+R6LfUpngVgWqfovOcc9FYtXkbwngc8CnE5biC6KB5T2kG7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S10v5lk20bQfdMjLEdTtsMQVsAeBoNHOZv/d9lHL9m6PubR9lszkdf3o5Hbo78YxWlzvGCDCS/BAA/rePa708YwS3AEhzOSuSfBX47ihQ8+MMNgPM1HQxKWlZ/GyOHYXPgp/MkIqyKvAbdd6fOACT3Ww/WTLYD+aQXVoCCdxj0Q=
Received: by 10.90.115.9 with SMTP id n9mr4492067agc.1179139735337;
        Mon, 14 May 2007 03:48:55 -0700 (PDT)
Received: by 10.90.74.18 with HTTP; Mon, 14 May 2007 03:48:55 -0700 (PDT)
Message-ID: <db1f8a4e0705140348r818e66bn544d6ae1410be8c@mail.gmail.com>
Date: Mon, 14 May 2007 12:48:55 +0200
From: "Gilbert Groenendijk" <gilbert.groenendijk@gmail.com>
To: java-user@lucene.apache.org
Subject: FSDirectory and merge indexes
In-Reply-To: <db1f8a4e0705140340r70992c33h1ceeda1d4a6b29f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104853_7268614.1179139735289"
References: <db1f8a4e0705140340r70992c33h1ceeda1d4a6b29f7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104853_7268614.1179139735289
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,



Currently I'm trying to create a temporary index on my filesystem and after
that merge it with an existing index. I've tried to use
'addIndexesNoOptimize' but I need to pass in an array of directories. How do
I create that array when I'm using FSDirectory.getDirectory. it gives me an
error like 'addIndexesNoOptimize([o:FSDirectory]). ' Illegal argument.

-- 
Gilbert Groenendijk
__________________________________________________

------=_Part_104853_7268614.1179139735289--

From java-user-return-28065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 13:00:08 2007
Return-Path: <java-user-return-28065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44017 invoked from network); 14 May 2007 13:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 13:00:07 -0000
Received: (qmail 8991 invoked by uid 500); 14 May 2007 13:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8965 invoked by uid 500); 14 May 2007 13:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8947 invoked by uid 99); 14 May 2007 13:00:06 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.51.197] (HELO mailhost.virtusa.com) (12.40.51.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:00:05 -0700
Received: from ws-mailsvr.Virtusa.com ([10.3.8.4]unverified) by mailhost.virtusa.com with InterScan Message Security Suite; Mon, 14 May 2007 08:52:27 -0400
Received: from HS-MAILSVR.Virtusa.com ([10.4.10.60]) by ws-mailsvr.Virtusa.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 14 May 2007 08:59:06 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C79627.A5D05C9E"
Subject: How to Update the Index once it is created
Date: Mon, 14 May 2007 18:29:02 +0530
Message-ID: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to Update the Index once it is created
Thread-Index: AceWJ6WMkByScOpRQ8eAAa2jZLAPYQ==
From: "Krishna Prasad Mekala" <krishnapm@virtusa.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 May 2007 12:59:06.0576 (UTC) FILETIME=[A7C22D00:01C79627]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C79627.A5D05C9E
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

Thanks for your response. I have one more doubt. How can I update a
index once created from Oracle, instead of recreating the whole.
Whenever there is a change in the oracle table
(insertion/updation/deletion of a row) my application should update the
index.

=20

Thanks in advance.

=20

=20

Krishna Prasad M

=20


------_=_NextPart_001_01C79627.A5D05C9E--

From java-user-return-28066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 13:10:27 2007
Return-Path: <java-user-return-28066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49359 invoked from network); 14 May 2007 13:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 13:10:26 -0000
Received: (qmail 31072 invoked by uid 500); 14 May 2007 13:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31040 invoked by uid 500); 14 May 2007 13:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31029 invoked by uid 99); 14 May 2007 13:10:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:10:23 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DATE_IN_FUTURE_06_12,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jyoti@netcore.co.in designates 202.162.240.3 as permitted sender)
Received: from [202.162.240.3] (HELO lvs2.netcore.co.in) (202.162.240.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:10:16 -0700
Received: from uucp3.netcore.co.in (uucp3.netcore.co.in [202.162.229.13])
	by lvs2.netcore.co.in (Postfix) with ESMTP id 41A76B8048
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 18:39:44 +0530 (IST)
Received: from uucp1.netcore.co.in (uucp1.netcore.co.in [202.162.229.12])
	by uucp3.netcore.co.in (Postfix) with ESMTP id C5635AA2C
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 18:39:43 +0530 (IST)
Received: by uucp1.netcore.co.in (Postfix, from userid 10)
	id 9B87323888; Mon, 14 May 2007 18:39:44 +0530 (IST)
Received: from [192.168.70.11] (unknown [192.168.70.11])
	by ho.netcore.co.in (Postfix) with ESMTP id 82E2910009
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 18:46:51 +0530 (IST)
Message-ID: <4648E43D.5030906@netcore.co.in>
Date: Mon, 14 May 2007 18:35:41 -0400
From: Jyoti Narula Ranjan <jyoti@netcore.co.in>
User-Agent: Thunderbird 1.5.0.8 (X11/20060911)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to Update the Index once it is created
References: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
In-Reply-To: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailScanner-From: jyoti@netcore.co.in
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Krishna

I am also new to Lucene and it seems that the response to your query was
made directly to you.
May I request you to forward the replies to me as well, so I may refer
to these when needed.

Thanks
Regards
Jyoti
Krishna Prasad Mekala wrote:
> Hi All,
>
>  
>
> Thanks for your response. I have one more doubt. How can I update a
> index once created from Oracle, instead of recreating the whole.
> Whenever there is a change in the oracle table
> (insertion/updation/deletion of a row) my application should update the
> index.
>
>  
>
> Thanks in advance.
>
>  
>
>  
>
> Krishna Prasad M
>
>  
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 13:24:47 2007
Return-Path: <java-user-return-28067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61645 invoked from network); 14 May 2007 13:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 13:24:44 -0000
Received: (qmail 61662 invoked by uid 500); 14 May 2007 13:24:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61322 invoked by uid 500); 14 May 2007 13:24:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61238 invoked by uid 99); 14 May 2007 13:24:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:24:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:24:34 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1063449ugc
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 06:24:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UN4opXXPnrdnQsZj561Viy/KyTnZm5JXjWqcx0kqO0E3OTZ0pxfrl+YIZtPdRuymHe2P9igX8ANtOdYdbxFbyP3qtiLqbpaDNxDydCG/6ETupE/6DdTVf1LhUaSm/WOs8vDk7GVsfhT37wXvZujoQWfxIFrpwosZqSkB5Y1vHRU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WMT/xfLQ/0SFv2KKqgG1tVHqgxZsWty+QXOmBoqishzJZGuAQCGCsZSQ2MkPhN86Y2E5p8EIz8jYYa3vbgLExTXm1UAIzepIhJLM+QCkUnTsNzut24RXH6dwito3awW+MrPcmLbd14+kgneMGPuhu7AhpFIVDfXqwRVLuNVZxj4=
Received: by 10.82.173.19 with SMTP id v19mr1641461bue.1179149052131;
        Mon, 14 May 2007 06:24:12 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 14 May 2007 06:24:11 -0700 (PDT)
Message-ID: <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com>
Date: Mon, 14 May 2007 09:24:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, apache@leangen.net
Subject: Re: How can I limit the number of hits in my query?
In-Reply-To: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60102_32839513.1179149052014"
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60102_32839513.1179149052014
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On 5/14/07, David Leangen <apache@leangen.net> wrote:
>
>
> Hello!
>
> I am new to Lucene, so forgive me if my question is basic. I did try
> googling for an answer...
>
>
> For an ajax autocomplete widget, I am querying using Lucene. I only want
> to return, for example, the first 20 hits of anything that Lucene finds
> in whatever order Lucene gives to me.
>
> Two questions:
>
> - How can I limit the number of hits? I don't know in
>    advance what the data will be, so it's not feasible for
>    me to use RangeQuery.



You can use a TopDocs or a HitCollector object which allows you
to process each object as it's hit. But I doubt you need to do this. Under
the covers, a Hits object actually stops at about 100 documents and
re-executes the query to fetch the next 100 etc. So, I really doubt you'll
have any noticeable difference in either performance or resource
usage by getting fancy.

One of the design goals of the Hits object was exactly to incur the least
expense while getting the top 100 docs....


- Will this solve the problem I am getting with maxClauseCount?
>
>    org.apache.lucene.search.BooleanQuery$TooManyClauses
>    maxClauseCount is set to 1024



No.  I expect you're using a wildcard, and wildcard handling is
complicated. Search the mail archive at
http://www.gossamer-threads.com/lists/lucene/java-user/
for TooManyClauses and you'll find a wealth of information about
why/how this happens and what to do to avoid it. Also, see

http://wiki.apache.org/lucene-java/LuceneFAQ

where this is one of th questions....

Best
Erick

Thank you!
> David
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60102_32839513.1179149052014--

From java-user-return-28068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 13:35:12 2007
Return-Path: <java-user-return-28068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68374 invoked from network); 14 May 2007 13:35:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 13:35:10 -0000
Received: (qmail 86692 invoked by uid 500); 14 May 2007 13:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86640 invoked by uid 500); 14 May 2007 13:35:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86628 invoked by uid 99); 14 May 2007 13:35:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:35:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:35:01 -0700
Received: by mu-out-0910.google.com with SMTP id i10so948024mue
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 06:34:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cGVi0JMftlEKYqQ4tUIZphksbSlIX4UJx0DycWOFJux+EAwFc7GNzVeiK09h9ft5yGCYza2tcbLzqOXtQbSD1KU1cOdJbPmRZcedRqf+yoKGrlrscHPDTRQXmebObSpaoBOKZlH5JN8QjTF0MHdUIO7pl5lUzkMaBrSA/irLcTA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f+/6LPSNwzVHlwLJCa4kVz0TLIsVNC5Gwm9iUq0W3obHrqFecjgZGe6Ab2pMMhgGCwKgD5xgPsgVVZk4vcS+10Od47aj5SYAx0fZ0pMICAVPbUtFXAz4bYrItzcEr5IjB0XDxnnR5veqBdOc380GeUEmIY4vewcS7ymosUltLgg=
Received: by 10.82.148.7 with SMTP id v7mr1733993bud.1179149679595;
        Mon, 14 May 2007 06:34:39 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 14 May 2007 06:34:39 -0700 (PDT)
Message-ID: <359a92830705140634v17bf205fv4290b7e97ee5f6bc@mail.gmail.com>
Date: Mon, 14 May 2007 09:34:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FSDirectory and merge indexes
In-Reply-To: <db1f8a4e0705140348r818e66bn544d6ae1410be8c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60258_3053559.1179149679547"
References: <db1f8a4e0705140340r70992c33h1ceeda1d4a6b29f7@mail.gmail.com>
	 <db1f8a4e0705140348r818e66bn544d6ae1410be8c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60258_3053559.1179149679547
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

            FSDirectory fsd1 = FSDirectory.getDirectory("e:/Index1");
            FSDirectory fsd2 = FSDirectory.getDirectory("e:/Index2");
            FSDirectory fsd3 = FSDirectory.getDirectory("e:/Index3");
            FSDirectory fsd4 = FSDirectory.getDirectory("e:/Index4");
            FSDirectory fsd5 = FSDirectory.getDirectory("e:/Index5");
            FSDirectory fsd6 = FSDirectory.getDirectory("e:/Index6");
            IndexWriter writer = new IndexWriter(blah blah blah);

            writer.addIndexes(new Directory[] { fsd1, fsd2, fsd3, fsd4,
fsd5, fsd6 });


On 5/14/07, Gilbert Groenendijk <gilbert.groenendijk@gmail.com> wrote:
>
> Hi,
>
>
>
> Currently I'm trying to create a temporary index on my filesystem and
> after
> that merge it with an existing index. I've tried to use
> 'addIndexesNoOptimize' but I need to pass in an array of directories. How
> do
> I create that array when I'm using FSDirectory.getDirectory. it gives me
> an
> error like 'addIndexesNoOptimize([o:FSDirectory]). ' Illegal argument.
>
> --
> Gilbert Groenendijk
> __________________________________________________
>

------=_Part_60258_3053559.1179149679547--

From java-user-return-28069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 13:49:36 2007
Return-Path: <java-user-return-28069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75912 invoked from network); 14 May 2007 13:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 13:49:35 -0000
Received: (qmail 15577 invoked by uid 500); 14 May 2007 13:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15550 invoked by uid 500); 14 May 2007 13:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15539 invoked by uid 99); 14 May 2007 13:49:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:49:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 06:49:26 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1067792ugc
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 06:49:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MjcyWxh8KuEbaVogce1JXSrgLelmUIOXgdgyrW5WUBpyoV8ZUtoutwZCazvXVxrhKXgsOg6EkvYhifN7K2adslVQbA07bLOM/QvL7qotssJsYCnKRSBtUQCKun2LkmQG+VpMJ9FtVIVtTkd9cJo62TLMrKpwxXK0uaGFSDZJqi4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K9LmAFvpESk05rvlt/xYGExYeyXsH318gH7Wd8kaX9hFQwRvKBvjMhWLIlhB8zceRg31gLiHwFBZLyPu4xu2w/lD5MUTaz+XoO9hyHb0DsVPzsTNXJpxERx00QJvWCJGUSJSuSyba/WxNPH26RPVEuFiSQOoMaYmvWbyL3Xx0p4=
Received: by 10.82.162.14 with SMTP id k14mr1737690bue.1179150545137;
        Mon, 14 May 2007 06:49:05 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 14 May 2007 06:49:05 -0700 (PDT)
Message-ID: <359a92830705140649uea63ef9vd8081a299975606f@mail.gmail.com>
Date: Mon, 14 May 2007 09:49:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to Update the Index once it is created
In-Reply-To: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60398_26288262.1179150545083"
References: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60398_26288262.1179150545083
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to delete the old document and add it a new one.

See IndexModifier class.

There is no ability to modify a document in place.

Best
Erick

On 5/14/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
>
> Hi All,
>
>
>
> Thanks for your response. I have one more doubt. How can I update a
> index once created from Oracle, instead of recreating the whole.
> Whenever there is a change in the oracle table
> (insertion/updation/deletion of a row) my application should update the
> index.
>
>
>
> Thanks in advance.
>
>
>
>
>
> Krishna Prasad M
>
>
>
>

------=_Part_60398_26288262.1179150545083--

From java-user-return-28070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 18:47:54 2007
Return-Path: <java-user-return-28070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51831 invoked from network); 14 May 2007 18:47:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 18:47:53 -0000
Received: (qmail 20948 invoked by uid 500); 14 May 2007 18:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20906 invoked by uid 500); 14 May 2007 18:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20893 invoked by uid 99); 14 May 2007 18:47:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 11:47:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 11:47:44 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1124831ugc
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 11:47:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=Ei6knMPlFuPFtKZyQxSV6r6XuuT3AjPkpOAXZQ5OFWk6z+xcw4YdljWTlEHxp1o+XPCBGH6PJnzy/uWgxX7u9dOZnuj9cFB/Jk9bLY9hVXFH5+dLnYe/bPN1E6KSzXtN8udeyITet7gT49T2ly3gegcZhywl1JsPHevCu7HNVzU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=nPUEUTjPjQGLVSOQW1B7WXjPP8uyrCQD3xnOWodfoVmpDVAVEQDawu2M2hdZr71J7tTgSRvoNX7jttxoOrhFNqucYgxNgI4zEY92ru0Aoa3ALFIjOq8zSNoxphlyjZ50An6cqUrESV9nYqn0undFeHhSvfrwf2WDNrQsMx6odbk=
Received: by 10.67.121.18 with SMTP id y18mr5386553ugm.1179168442137;
        Mon, 14 May 2007 11:47:22 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id 39sm11669576ugb.2007.05.14.11.47.20;
        Mon, 14 May 2007 11:47:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5C5F0104-5F62-44CF-AB80-D00CD70F29D8@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: [ANN] Limax
Date: Mon, 14 May 2007 20:46:12 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Limax is a Java 1.5 @annotation and reflection powered transactional  
object storage and tokenization framework for Lucene, distributed  
under the Apache license.

There are no external dependencies. Lucene is used for object storage  
and index.

http://projects.ginandtonique.org/projects/limax/

This is version 0.1 beta 1. If you do look at it, please let me know  
what you think of the API. It works, but I'm sure there are plenty of  
bugs I have not yet encountered.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 20:04:08 2007
Return-Path: <java-user-return-28071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90696 invoked from network); 14 May 2007 20:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 20:04:06 -0000
Received: (qmail 34602 invoked by uid 500); 14 May 2007 20:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34568 invoked by uid 500); 14 May 2007 20:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34553 invoked by uid 99); 14 May 2007 20:04:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 13:04:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 13:03:55 -0700
Received: by ik-out-1112.google.com with SMTP id b32so991128ika
        for <java-user@lucene.apache.org>; Mon, 14 May 2007 13:03:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=krnQkJB/IE3NSwaGa5P98FkrCDjb3OJ8w7DMX2Owv6rGfAiBdGJtWB2h8gQYnrzXQxrE0dz0N1SPJhB73NzYO4RifeEjyTA0CeheWCN7o9BnzHzcutfPF7S1Qu/YSkLLNXPsKJKTh8pZlCeXJg6WJaZh4jIXj4hk4qdYW2GJwXE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TGLwYZTPMj4rjUMEEgsZh1+fdI5d4LsF8/QyS4usuZliaGDsWW16xLF4C3r2CPCm0W5SJ6Isor9jDLIUrwHFBR2Axb+yOS0b3TFuls3Wn0R/9GHXFfuyBtdNA2eQv7f9YGIUii41wvUrUvd7gsxq1AO8jByoPYRdy7gmo3gU1YQ=
Received: by 10.64.84.3 with SMTP id h3mr4920618qbb.1179173012630;
        Mon, 14 May 2007 13:03:32 -0700 (PDT)
Received: by 10.64.185.14 with HTTP; Mon, 14 May 2007 13:03:32 -0700 (PDT)
Message-ID: <882004010705141303j77f97c0dsf8bb5a35a111865d@mail.gmail.com>
Date: Mon, 14 May 2007 16:03:32 -0400
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader.deleteDocument(int docid) equivalent in 2.1 IndexWriter?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_116109_29962542.1179173012546"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_116109_29962542.1179173012546
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I noticed that the API for Lucene 2.1+ includes a deleteDocuments(Term)
method in the IndexWriter.  I'd love to be able to change my application to
use it (we're constantly updating docs, which means opening/closing the
writer/reader each time we update a doc). I use complex queries to determine
which docs to delete.  Pre-2.1, I've just executed a search and then looped
through hits.id() as the parameter to the IndexReader.deleteDocument().  I'm
trying to figure out how to do the same for Lucene 2.1.  Is there a way to
specify the internal docid as a term? (So I can call
IndexWriter.deleteDocuments(internalId)?  Otherwise, I was thinking of using
a hit collector to fetch just our external UID.

Thanks for any guidance.

L

------=_Part_116109_29962542.1179173012546--

From java-user-return-28072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 20:29:01 2007
Return-Path: <java-user-return-28072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3097 invoked from network); 14 May 2007 20:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 20:29:00 -0000
Received: (qmail 73562 invoked by uid 500); 14 May 2007 20:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73303 invoked by uid 500); 14 May 2007 20:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73292 invoked by uid 99); 14 May 2007 20:29:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 13:29:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 13:28:52 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4EKSVWY025984
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 20:28:31 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4EKSVMJ4010202
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 22:28:31 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4EKSUvI008193
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 22:28:30 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4EKSUlg008190
	for <java-user@lucene.apache.org>; Mon, 14 May 2007 22:28:30 +0200
In-Reply-To: <882004010705141303j77f97c0dsf8bb5a35a111865d@mail.gmail.com>
Subject: Re: IndexReader.deleteDocument(int docid) equivalent in 2.1 IndexWriter?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF5B0373F2.F4FACB3A-ON882572DB.006F4858-882572DB.00703A54@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 14 May 2007 13:25:49 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 14/05/2007 23:28:29
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Lucifer Hammer" <lucener@gmail.com> wrote on 14/05/2007 13:03:32:

> I noticed that the API for Lucene 2.1+ includes a deleteDocuments(Term)
> method in the IndexWriter.  I'd love to be able to change my application
to
> use it (we're constantly updating docs, which means opening/closing the
> writer/reader each time we update a doc). I use complex queries to
determine
> which docs to delete.  Pre-2.1, I've just executed a search and then
looped
> through hits.id() as the parameter to the IndexReader.deleteDocument().
I'm
> trying to figure out how to do the same for Lucene 2.1.  Is there a way
to
> specify the internal docid as a term? (So I can call
> IndexWriter.deleteDocuments(internalId)?

This could not work, b/c there is no way to guarantee that the internal
ids seen by the searcher are the same as those used/seen by the writer,
because
each merge operation might change the internal ids.

Note that when you were using the same indexReader (for search and delete)
it was guaranteed that internal ids used for delete and those
seen at search do match.

> Otherwise, I was thinking of using
> a hit collector to fetch just our external UID.

This would work. If it does not result in slowdown (a new field,
one more field to fetch during search-for-delete) then it seems
a better way to me.

Note however that since you search in order to find the docs
to be deleted, this would not save the need to reopen readers
in order to be able to find docs to be deleted among those
docs that were just added...

Btw, see also IndexWriter.updateDocument(Term, Document).

>
> Thanks for any guidance.
>
> L


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 14 21:36:09 2007
Return-Path: <java-user-return-28073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26730 invoked from network); 14 May 2007 21:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 May 2007 21:36:08 -0000
Received: (qmail 70649 invoked by uid 500); 14 May 2007 21:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70623 invoked by uid 500); 14 May 2007 21:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70612 invoked by uid 99); 14 May 2007 21:36:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 14:36:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 14:36:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B6FDB5B764; Mon, 14 May 2007 14:35:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B22F47F403;
	Mon, 14 May 2007 14:35:39 -0700 (PDT)
Date: Mon, 14 May 2007 14:35:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>, paul_t100@fastmail.fm
Subject: Re: Problem using wildcardsearch in phrase search
In-Reply-To: <46477FAC.4030106@fastmail.fm>
Message-ID: <Pine.LNX.4.58.0705141428100.23436@hal.rescomp.berkeley.edu>
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com>
 <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com>
 <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com>
 <4646FB9A.1080505@fastmail.fm> <Pine.LNX.4.58.0705131044160.14957@hal.rescomp.berkeley.edu>
 <46477FAC.4030106@fastmail.fm>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: queryparsersyntax page which is where I expect most novices (such as
: myself) start with lucene seems to indicate that wildcards can be used
: in, and this page is
: as far as one should need to go to understand basic query syntax, this
: page should be corrected.

if you have a suggestion for improving the page, please by all means
submit a patch with your suggestions.  I've said it before and i'll say it
again: novice users are the best documentation writers because unlike
seasoned experinced usersor developers, they are ones just learning the
system who don't already have ingrained knowledge that they take for
granted.

: A Phrase is a group of words surrounded by double quotes such as "hello
: dolly".
:
: ....
:
: Wildcard Searches
: Lucene supports single and multiple character wildcard searches.
: To perform a multiple character wildcard search use the "*" symbol.
: Multiple character wildcard searches looks for 0 or more characters. For
: example, to search for test, tests or tester, you can use the search:
:
: test*
: You can also use the wildcard searches in the middle of a term.
:
: '
: there is nothing to indicate in the section on Wildcard Searches that it
: can be performed only on Single word terms not Phrase terms.

I would meanwhile argue that there is nothing in the description of a
Phrase to indicate that it can be anything other then what it says "a
group of words surrounded by double quotes" .. at no point does ist
suggest that other types of queries or syntax can be used inside the
quotes.  likewise the discussion of Wildcards makes no mention of phrases
to suggest that wildcard characters can be used in a phrase.

But as i said: if you have suggestions for clarifying the docs, please
submit them as a patch.  just saying the docs need to be improved without
providing a specific suggestion for how they can be improved doesn't
really help the situation.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 02:13:30 2007
Return-Path: <java-user-return-28074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38579 invoked from network); 15 May 2007 02:13:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 02:13:29 -0000
Received: (qmail 83544 invoked by uid 500); 15 May 2007 02:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83496 invoked by uid 500); 15 May 2007 02:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83484 invoked by uid 99); 15 May 2007 02:13:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 19:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.238.89.128] (HELO bioscene.co.jp) (202.238.89.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 May 2007 19:13:20 -0700
Received: (qmail 9389 invoked from network); 15 May 2007 02:14:23 -0000
Received: from unknown (HELO eth0.sonoda) (192.168.2.5)
  by bioscene.co.jp with SMTP; 15 May 2007 02:14:23 -0000
Subject: Re: How can I limit the number of hits in my query?
From: David Leangen <apache@leangen.net>
Reply-To: apache@leangen.net
To: Erick Erickson <erickerickson@gmail.com>
Cc: java-user@lucene.apache.org
In-Reply-To: <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com>
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
	 <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Date: Tue, 15 May 2007 11:07:37 +0900
Message-Id: <1179194857.1593.26.camel@sonoda.bioscene.co.jp>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you very much for this. Some more questions inline...


>         
>         - How can I limit the number of hits? I don't know in
>            advance what the data will be, so it's not feasible for
>            me to use RangeQuery.
> 
> 
> You can use a TopDocs or a HitCollector object which allows you
> to process each object as it's hit. But I doubt you need to do this. 

> No.  I expect you're using a wildcard, and wildcard handling is
> complicated. 


Ok, you're right. It's not the limiting of the results that's the
problem, it's the way the search is expanded.

Since this is an autocomplete, when the user types, for example "a" or a
Japanese character "", I am using PrefixFilter for this, so I guess
the search turns into "a*" and "*" respectively.

In the archive, the related posts I read either refer to a DateRange
(where it is possible to search first by year, then month... etc.), or
they suggest to increase the max count.

Neither of these solutions work in my case... It's not a date, and I
have no idea of the results in advance and it would not be practical or
elegant to speculate on the results (for example first try aa*~ab* and
see what that gives, etc.).

I can get access to the "weight" values of the terms (a data field
determined by their frequency of use), so I'll try something related to
that. For people with more experience, would that be a good path to
take?

Otherwise, would a reasonable solution be to override or re-implement
PrefixFilter?


Thank you so much!
David




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 06:31:44 2007
Return-Path: <java-user-return-28075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22989 invoked from network); 15 May 2007 06:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 06:31:43 -0000
Received: (qmail 56353 invoked by uid 500); 15 May 2007 06:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55594 invoked by uid 500); 15 May 2007 06:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55583 invoked by uid 99); 15 May 2007 06:31:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 23:31:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.133] (HELO anumail7.anu.edu.au) (130.56.64.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 May 2007 23:31:34 -0700
Received: from smtphost.anu.edu.au (ds1.anu.edu.au [130.56.64.53])
	by anumail7.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4F6VBSM029680
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 16:31:12 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4F6VB2R006454
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 16:31:11 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4F6VAYo019041
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 16:31:11 +1000 (EST)
Message-ID: <464953A9.5030004@anu.edu.au>
Date: Tue, 15 May 2007 16:31:05 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Memory leak (JVM 1.6 only)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.14.231635 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I have an application that indexes/searches xml documents using Lucene. 
I'm having a problem with what looks like a memory leak, which occurs 
when indexing a large number of documents, but only when the application 
is running under JVM 1.6. Under JVM 1.5 there is no problem. What 
happens is that the memory allocated consistently rises during indexing 
until the JVM crashes with an OutOfMemory exception.

I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess 
API, which hands out references to cached IndexWriter/Reader/Searchers 
to objects that need to use them, and handles closing and re-opening 
IndexSearchers after documents are added to the index. The application 
is running under Tomcat 6.

I'm a bit out of my depth determining the source of the leak - I've 
tried using Netbeans profiler, which shows a large number of HashMap 
instances that survive a long time, but these are created by many 
different classes so it's difficult to pinpoint one source.

Has anyone found similar problems with Lucene indexing operations 
running under JVM 1.6? Does anyone have any suggestions re how to deal 
with this?

Any help much appreciated.

Thanks,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 07:06:00 2007
Return-Path: <java-user-return-28076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31838 invoked from network); 15 May 2007 07:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 07:05:59 -0000
Received: (qmail 94379 invoked by uid 500); 15 May 2007 07:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93825 invoked by uid 500); 15 May 2007 07:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93814 invoked by uid 99); 15 May 2007 07:05:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 00:05:58 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of anybridge@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 00:05:50 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1905211wxd
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 00:05:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=imiUsYOWKQx6JNcWJtJyA09mlHsSPqOJT4A9qdPjIngehOmsgqLaOGhbJCv6D7SFoNETMdV2LsUPm+Wp0MUqSy5qdyNf2jTi21v6hilAS1yN/vujuZ9ZdPtIWfccc+PHqlyJAkYVniyX3UEuLala/4DY/9DU3WXlqalenP75AyU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rAAW+Baa2xqAiqGlg7LVdrVVveWwbXXuYN0R+GsUGCpL6lb075iKwOlFG6lF6Jdb0+Q6GVfBCQ8URAaCXnYswyEJmjA5CUqsWcuR/2TpF+5626Zbm+a9YiwpldLqU/ZvEaSsyXh9Hl6EVtTVJ8IHdIllCMEEESaqpjuTagB+O5k=
Received: by 10.70.50.10 with SMTP id x10mr11100622wxx.1179212729942;
        Tue, 15 May 2007 00:05:29 -0700 (PDT)
Received: by 10.70.75.10 with HTTP; Tue, 15 May 2007 00:05:29 -0700 (PDT)
Message-ID: <41255c260705150005s68914523h3b9e98cdafac34b@mail.gmail.com>
Date: Tue, 15 May 2007 15:05:29 +0800
From: "Anny Bridge" <anybridge@gmail.com>
To: java-user@lucene.apache.org
Subject: number of times the keyword match
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39855_28513148.1179212729893"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39855_28513148.1179212729893
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

When do search with lucene,can i get the number of times the keyword match
with a specific document?

Thanks in advance.

Best Regards,
Anny.

------=_Part_39855_28513148.1179212729893--

From java-user-return-28077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 10:56:19 2007
Return-Path: <java-user-return-28077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54963 invoked from network); 15 May 2007 10:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 10:56:17 -0000
Received: (qmail 7154 invoked by uid 500); 15 May 2007 10:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6843 invoked by uid 500); 15 May 2007 10:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6821 invoked by uid 99); 15 May 2007 10:56:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 03:56:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a15.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 03:55:59 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id B59D97F05F
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 03:55:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <41255c260705150005s68914523h3b9e98cdafac34b@mail.gmail.com>
References: <41255c260705150005s68914523h3b9e98cdafac34b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DAD719AC-2788-471C-9398-5DC099F5A935@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: number of times the keyword match
Date: Tue, 15 May 2007 06:55:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, have a look at the SpanQuery functionality.

-Grant

On May 15, 2007, at 3:05 AM, Anny Bridge wrote:

> Hi all,
>
> When do search with lucene,can i get the number of times the  
> keyword match
> with a specific document?
>
> Thanks in advance.
>
> Best Regards,
> Anny.

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 11:38:18 2007
Return-Path: <java-user-return-28078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67228 invoked from network); 15 May 2007 11:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 11:38:17 -0000
Received: (qmail 73156 invoked by uid 500); 15 May 2007 11:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72310 invoked by uid 500); 15 May 2007 11:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72280 invoked by uid 99); 15 May 2007 11:38:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 04:38:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 04:38:07 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1962703wxd
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 04:37:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LiLcyc4MUM9KduYqecJI8TosXfFreS6wXx0l1tohDnWba3i+ZQ7XSMOhommIfZQtXSSLh/cvAxj+zGNPBN8PhAigj24mkVUzZ1bUjqtcJlUFuyDuK+q8U9wWNwoxIPQRF+PGGnA6KtNxOb8GOuXv/kvcA9TqF7hPUUzV68hsxHg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BbPzI7saNtb6UE8tbjfbl3DVpZXi5V41o2718pmsSoNcINPUgijd2L2l73vzQy7zJ7BOW9P1nKRiz9TNS6P7v2DDS3os8rYbaTLj+LIZeiaRKJRvdRdeD3cMh+dfpdR3fCysHPlIF1mP69YTvW4un+DdQs4I4jW2v2xS6wFHTZQ=
Received: by 10.90.113.18 with SMTP id l18mr5875343agc.1179229067114;
        Tue, 15 May 2007 04:37:47 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 25sm319010wra.2007.05.15.04.37.44;
        Tue, 15 May 2007 04:37:45 -0700 (PDT)
Message-ID: <46499B50.9060307@gmail.com>
Date: Tue, 15 May 2007 07:36:48 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <464953A9.5030004@anu.edu.au>
In-Reply-To: <464953A9.5030004@anu.edu.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I don't have much help to offer other than to say I am also using a 
tweaked version of the IndexAccess code you are, with java 1.6, with 
hundreds of thousands to millions of docs, at multiple locations, for 
months -- and I have not seen any memory leaks. Leads me to think the 
leak may be with your code and not any Lucene code...

I will mention that the IndexAccess code does not handle multi-searchers 
very well without some adjustments, but even that should not cause a leak.

Keep playing with the Netbeans profiler...if it really is a leak, you 
aught to be able to find it.

- Mark

Stephen Gray wrote:
> Hi everyone,
>
> I have an application that indexes/searches xml documents using 
> Lucene. I'm having a problem with what looks like a memory leak, which 
> occurs when indexing a large number of documents, but only when the 
> application is running under JVM 1.6. Under JVM 1.5 there is no 
> problem. What happens is that the memory allocated consistently rises 
> during indexing until the JVM crashes with an OutOfMemory exception.
>
> I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess 
> API, which hands out references to cached IndexWriter/Reader/Searchers 
> to objects that need to use them, and handles closing and re-opening 
> IndexSearchers after documents are added to the index. The application 
> is running under Tomcat 6.
>
> I'm a bit out of my depth determining the source of the leak - I've 
> tried using Netbeans profiler, which shows a large number of HashMap 
> instances that survive a long time, but these are created by many 
> different classes so it's difficult to pinpoint one source.
>
> Has anyone found similar problems with Lucene indexing operations 
> running under JVM 1.6? Does anyone have any suggestions re how to deal 
> with this?
>
> Any help much appreciated.
>
> Thanks,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 12:00:02 2007
Return-Path: <java-user-return-28079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70483 invoked from network); 15 May 2007 12:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 12:00:01 -0000
Received: (qmail 9869 invoked by uid 500); 15 May 2007 12:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9837 invoked by uid 500); 15 May 2007 12:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9826 invoked by uid 99); 15 May 2007 12:00:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 05:00:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of npanwar@chambal.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 04:59:53 -0700
Received: by nz-out-0506.google.com with SMTP id i1so107030nzh
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 04:59:32 -0700 (PDT)
Received: by 10.114.176.1 with SMTP id y1mr1538567wae.1179230372059;
        Tue, 15 May 2007 04:59:32 -0700 (PDT)
Received: by 10.114.170.10 with HTTP; Tue, 15 May 2007 04:59:31 -0700 (PDT)
Message-ID: <7fa3c1080705150459s7a06d83dp44880c7708f759c0@mail.gmail.com>
Date: Tue, 15 May 2007 17:29:31 +0530
From: "Narednra Singh Panwar" <npanwar@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
In-Reply-To: <464953A9.5030004@anu.edu.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_181_21084300.1179230371961"
References: <464953A9.5030004@anu.edu.au>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_181_21084300.1179230371961
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

try using -Xmx option with your Application. and specify maximum/ minimum
memory for your Application.
Hope this will solve you problem.




On 5/15/07, Stephen Gray <Stephen.Gray@anu.edu.au> wrote:
>
> Hi everyone,
>
> I have an application that indexes/searches xml documents using Lucene.
> I'm having a problem with what looks like a memory leak, which occurs
> when indexing a large number of documents, but only when the application
> is running under JVM 1.6. Under JVM 1.5 there is no problem. What
> happens is that the memory allocated consistently rises during indexing
> until the JVM crashes with an OutOfMemory exception.
>
> I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess
> API, which hands out references to cached IndexWriter/Reader/Searchers
> to objects that need to use them, and handles closing and re-opening
> IndexSearchers after documents are added to the index. The application
> is running under Tomcat 6.
>
> I'm a bit out of my depth determining the source of the leak - I've
> tried using Netbeans profiler, which shows a large number of HashMap
> instances that survive a long time, but these are created by many
> different classes so it's difficult to pinpoint one source.
>
> Has anyone found similar problems with Lucene indexing operations
> running under JVM 1.6? Does anyone have any suggestions re how to deal
> with this?
>
> Any help much appreciated.
>
> Thanks,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_181_21084300.1179230371961--

From java-user-return-28080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 12:47:05 2007
Return-Path: <java-user-return-28080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92373 invoked from network); 15 May 2007 12:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 12:47:04 -0000
Received: (qmail 87697 invoked by uid 500); 15 May 2007 12:47:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87658 invoked by uid 500); 15 May 2007 12:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87647 invoked by uid 99); 15 May 2007 12:47:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 05:47:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gilbert.groenendijk@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 05:46:55 -0700
Received: by wr-out-0506.google.com with SMTP id 68so2001442wra
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 05:46:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VF/PGVyHl0PfXL052sIymy9H416+jBi5xYde8Y4VMiCUgIhDF/EWJcnHoEQYh19fSdcMpCPJFBnZopq+/ClnTYA9HVI2Ze1RZ2HaerqQTwncdgcALUh+LthDPBAWzRcQaoVAa0ymA9GgZEpKif1D9dewF59OLGstZNicGYajHcg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SSAMxzaPlOE7tDOicGnFDj0tIfShFjRgSfTY2e8eQqmDxQD8FFhOcMyXSt6ej1D9yskyFYudatRjXg45ChSlEbYoJfuIFaZli1MksOnTAwjRqu6lTPRYOlElIUw0PwKMS42goY8D1D3H7Ce3kyt41uf6swD1+zWPvH+qnX7fjxI=
Received: by 10.90.102.20 with SMTP id z20mr5949971agb.1179233194805;
        Tue, 15 May 2007 05:46:34 -0700 (PDT)
Received: by 10.90.74.16 with HTTP; Tue, 15 May 2007 05:46:34 -0700 (PDT)
Message-ID: <db1f8a4e0705150546g4d8ea417hec68705a0e58f98a@mail.gmail.com>
Date: Tue, 15 May 2007 14:46:34 +0200
From: "Gilbert Groenendijk" <gilbert.groenendijk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FSDirectory and merge indexes
In-Reply-To: <359a92830705140634v17bf205fv4290b7e97ee5f6bc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_917_18393747.1179233194753"
References: <db1f8a4e0705140340r70992c33h1ceeda1d4a6b29f7@mail.gmail.com>
	 <db1f8a4e0705140348r818e66bn544d6ae1410be8c@mail.gmail.com>
	 <359a92830705140634v17bf205fv4290b7e97ee5f6bc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_917_18393747.1179233194753
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you for your reply. With addIndexes this works perfectly but when i
change it to:

 writer.addIndexesNoOptimize(new Directory[] { fsd1});

It throws an exception saying it doesn't have a method with this parameters.
I need a fast merge and with the optimization this is not possible and i
want to test how fast it is without optimizing.



On 5/14/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
>            FSDirectory fsd1 = FSDirectory.getDirectory("e:/Index1");
>            FSDirectory fsd2 = FSDirectory.getDirectory("e:/Index2");
>            FSDirectory fsd3 = FSDirectory.getDirectory("e:/Index3");
>            FSDirectory fsd4 = FSDirectory.getDirectory("e:/Index4");
>            FSDirectory fsd5 = FSDirectory.getDirectory("e:/Index5");
>            FSDirectory fsd6 = FSDirectory.getDirectory("e:/Index6");
>            IndexWriter writer = new IndexWriter(blah blah blah);
>
>            writer.addIndexes(new Directory[] { fsd1, fsd2, fsd3, fsd4,
> fsd5, fsd6 });
>
>
> On 5/14/07, Gilbert Groenendijk <gilbert.groenendijk@gmail.com> wrote:
> >
> > Hi,
> >
> >
> >
> > Currently I'm trying to create a temporary index on my filesystem and
> > after
> > that merge it with an existing index. I've tried to use
> > 'addIndexesNoOptimize' but I need to pass in an array of directories.
> How
> > do
> > I create that array when I'm using FSDirectory.getDirectory. it gives me
> > an
> > error like 'addIndexesNoOptimize([o:FSDirectory]). ' Illegal argument.
> >
> > --
> > Gilbert Groenendijk
> > __________________________________________________
> >
>

------=_Part_917_18393747.1179233194753--

From java-user-return-28081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 13:42:20 2007
Return-Path: <java-user-return-28081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19069 invoked from network); 15 May 2007 13:42:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 13:42:19 -0000
Received: (qmail 93368 invoked by uid 500); 15 May 2007 13:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93328 invoked by uid 500); 15 May 2007 13:42:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93312 invoked by uid 99); 15 May 2007 13:42:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 06:42:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 06:42:09 -0700
Received: (qmail 27961 invoked by uid 89); 15 May 2007 13:41:48 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 15 May 2007 13:41:48 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: phrases containing escaped quotes
Date: Tue, 15 May 2007 09:41:47 -0400
User-Agent: KMail/1.9.6
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1226704.hxXztddvZU";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705150941.47703.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart1226704.hxXztddvZU
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I tried to parse the following phrase: "foo \"bar\""
I get the following exception:
org.apache.lucene.queryParser.ParseException: Lexical error at line 1, colu=
mn=20
18.  Encountered: <EOF> after : "\") "

Am I mistaken that "foo \"bar\"" is a valid phrase?

Thanks!
Martin

--nextPart1226704.hxXztddvZU
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGSbibtFAZVxKupnURApcCAKCd5eUgIyodD/fg+sE5FLxA9QlXfwCeMh9E
9FNzYvJSEiTniJZPCyXglxM=
=ELZ6
-----END PGP SIGNATURE-----

--nextPart1226704.hxXztddvZU--

From java-user-return-28082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 14:00:36 2007
Return-Path: <java-user-return-28082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22873 invoked from network); 15 May 2007 14:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 14:00:36 -0000
Received: (qmail 20140 invoked by uid 500); 15 May 2007 14:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20078 invoked by uid 500); 15 May 2007 14:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20051 invoked by uid 99); 15 May 2007 14:00:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:00:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of buschmic@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:00:23 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1266208ugc
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 06:59:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pp3zTYnm7ATA1bBtP9VuXY2PdfnVqBR+js+vQ76UwfphXB/eK53L0hF3VeaIqURBCY7m7Q5w+hcYARAAB/mRYnpisk3VBLpChkl749pcfXCSbqYMIOtwRQnvu7thfWgbQyyLGWdHm8GttjwZ3raLUmRqL6mm28/GdnNj28GX1eM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Kdyb6/3UNXps6va3ftoNVj+tP4fTNQicQUiMNqicUNcxCRZmONNhxSrsgeDWwDC1r3S8GBu5IRrwpOYN+LwbAyTmkmfBSgIX+ICRlZrr++T2VE4qU38Cgmna4qXF6s/An8wnzF2oPKOyOz57zPHRclWhVugOaR+fsuGrXiP6On0=
Received: by 10.66.239.16 with SMTP id m16mr4655940ugh.1179237597815;
        Tue, 15 May 2007 06:59:57 -0700 (PDT)
Received: from ?9.152.232.43? ( [195.212.29.179])
        by mx.google.com with ESMTP id g30sm16198415ugd.2007.05.15.06.59.56;
        Tue, 15 May 2007 06:59:56 -0700 (PDT)
Message-ID: <4649BCCE.5020703@gmail.com>
Date: Tue, 15 May 2007 15:59:42 +0200
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: phrases containing escaped quotes
References: <200705150941.47703.martin.kobele@netsweeper.com>
In-Reply-To: <200705150941.47703.martin.kobele@netsweeper.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Martin Kobele wrote:
> Hi,
>
> I tried to parse the following phrase: "foo \"bar\""
> I get the following exception:
> org.apache.lucene.queryParser.ParseException: Lexical error at line 1, column 
> 18.  Encountered: <EOF> after : "\") "
>
> Am I mistaken that "foo \"bar\"" is a valid phrase?
>
> Thanks!
> Martin
>   
Hi Martin,

which Lucene version are you using? This was a bug in Lucene 2.0 and 
earlier versions, but should be fixed in 2.1.


Regards,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 14:06:57 2007
Return-Path: <java-user-return-28083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24590 invoked from network); 15 May 2007 14:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 14:06:56 -0000
Received: (qmail 35707 invoked by uid 500); 15 May 2007 14:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35678 invoked by uid 500); 15 May 2007 14:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35667 invoked by uid 99); 15 May 2007 14:06:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:06:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:06:48 -0700
Received: by an-out-0708.google.com with SMTP id b8so503116ana
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 07:06:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=phpsxzdea4c+sERzKZtpuR68zoVsIYv0LH1Sm4GCXtl/LwFf/6ObzBmkV0Vdu2WihTeZE2o+Pyxpse2gWbLGZiKMdIa9qy78XRUuky0ZALK/rolg5ltjgiOMKkebKaOz8zF2eSK9I6ae9+8I3WiiI6i8+eIhSnEgN6+qRb6pLR0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NgzgQQmxTq5qQwhFtAZGij4u/rp7JhVhRGTj7PA8UbpJB+hG69XyThRoC3MWiDdRHgSTTOUuBavCL4EXZMfu+0G3AgKjTvzKKDRDEDXLjhSkFqTC/kPn82Zk+hWiz0NrCCCwmJsYieLKgPEu2Ws966PHPcHW1nch/AXRpiY9cI4=
Received: by 10.100.205.9 with SMTP id c9mr5455552ang.1179237987320;
        Tue, 15 May 2007 07:06:27 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Tue, 15 May 2007 07:06:27 -0700 (PDT)
Message-ID: <ab0709bf0705150706q481ac01g98a4a03db2e4182a@mail.gmail.com>
Date: Tue, 15 May 2007 10:06:27 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org, martin.kobele@netsweeper.com
Subject: Re: phrases containing escaped quotes
In-Reply-To: <200705150941.47703.martin.kobele@netsweeper.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2662_30775331.1179237987145"
References: <200705150941.47703.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2662_30775331.1179237987145
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Works fine as long as you escape your query correctly -- in java code:

String query = "\"foo \\\"bar\\\"\""

On 5/15/07, Martin Kobele <martin.kobele@netsweeper.com> wrote:
>
> Hi,
>
> I tried to parse the following phrase: "foo \"bar\""
> I get the following exception:
> org.apache.lucene.queryParser.ParseException: Lexical error at line 1,
> column
> 18.  Encountered: <EOF> after : "\") "
>
> Am I mistaken that "foo \"bar\"" is a valid phrase?
>
> Thanks!
> Martin
>
>

------=_Part_2662_30775331.1179237987145--

From java-user-return-28084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 14:24:21 2007
Return-Path: <java-user-return-28084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29525 invoked from network); 15 May 2007 14:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 14:24:19 -0000
Received: (qmail 72238 invoked by uid 500); 15 May 2007 14:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72005 invoked by uid 500); 15 May 2007 14:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71994 invoked by uid 99); 15 May 2007 14:24:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:24:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 07:24:11 -0700
Received: (qmail 8248 invoked by uid 89); 15 May 2007 14:23:50 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 15 May 2007 14:23:50 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: Re: phrases containing escaped quotes
Date: Tue, 15 May 2007 10:23:49 -0400
User-Agent: KMail/1.9.6
Cc: Michael Busch <buschmic@gmail.com>
References: <200705150941.47703.martin.kobele@netsweeper.com> <4649BCCE.5020703@gmail.com>
In-Reply-To: <4649BCCE.5020703@gmail.com>
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart4364947.Y71Rn87NvF";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705151023.49996.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart4364947.Y71Rn87NvF
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thank you! I was indeed using lucene 2.0 and it works very nicely with 2.1
thanks!

Martin

On Tuesday 15 May 2007 09:59:42 Michael Busch wrote:
> Martin Kobele wrote:
> > Hi,
> >
> > I tried to parse the following phrase: "foo \"bar\""
> > I get the following exception:
> > org.apache.lucene.queryParser.ParseException: Lexical error at line 1,
> > column 18.  Encountered: <EOF> after : "\") "
> >
> > Am I mistaken that "foo \"bar\"" is a valid phrase?
> >
> > Thanks!
> > Martin
>
> Hi Martin,
>
> which Lucene version are you using? This was a bug in Lucene 2.0 and
> earlier versions, but should be fixed in 2.1.
>
>
> Regards,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


--nextPart4364947.Y71Rn87NvF
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGScJ1tFAZVxKupnURAgqwAJ9YDZe+KnF2ya5PvSE14e5W+z9GPQCfYn7D
syl5hXyDyhCoJSNZxNeWH14=
=ejZS
-----END PGP SIGNATURE-----

--nextPart4364947.Y71Rn87NvF--

From java-user-return-28085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 15:04:20 2007
Return-Path: <java-user-return-28085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41985 invoked from network); 15 May 2007 15:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 15:04:18 -0000
Received: (qmail 61869 invoked by uid 500); 15 May 2007 15:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61833 invoked by uid 500); 15 May 2007 15:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61819 invoked by uid 99); 15 May 2007 15:04:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 08:04:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 08:04:09 -0700
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id l4FF3h505568
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 10:03:48 -0500 (CDT)
Received: from EX-101.mail.navisite.com ([172.16.1.62]) by EX-008.mail.navisite.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 15 May 2007 10:03:44 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
Subject: RE: How can I limit the number of hits in my query?
Date: Tue, 15 May 2007 10:03:34 -0500
Message-ID: <E1F190DAC247C64FAA46B38316FA151D065634EC@EX-101.mail.navisite.com>
In-Reply-To: <1179194857.1593.26.camel@sonoda.bioscene.co.jp>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How can I limit the number of hits in my query?
Thread-Index: AceWlqAwyTthtzgeQR+LD95FcUpT2wAaz30A
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp> <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com> <1179194857.1593.26.camel@sonoda.bioscene.co.jp>
From: "Bruce Ritchie" <bruce@jivesoftware.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 May 2007 15:03:44.0154 (UTC) FILETIME=[3B27C7A0:01C79702]
X-Virus-Checked: Checked by ClamAV on apache.org

> Ok, you're right. It's not the limiting of the results that's 
> the problem, it's the way the search is expanded.
> 
> Since this is an autocomplete, when the user types, for 
> example "a" or a Japanese character "$B$"(J", I am using 
> PrefixFilter for this, so I guess the search turns into "a*" 
> and "$B$"(J*" respectively.
> 
> In the archive, the related posts I read either refer to a 
> DateRange (where it is possible to search first by year, then 
> month... etc.), or they suggest to increase the max count.
> 
> Neither of these solutions work in my case... It's not a 
> date, and I have no idea of the results in advance and it 
> would not be practical or elegant to speculate on the results 
> (for example first try aa*~ab* and see what that gives, etc.).
> 
> I can get access to the "weight" values of the terms (a data 
> field determined by their frequency of use), so I'll try 
> something related to that. For people with more experience, 
> would that be a good path to take?
> 
> Otherwise, would a reasonable solution be to override or 
> re-implement PrefixFilter?

One possible solution that may or may not work for you is explained here: http://mail-archives.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3c42357B7E.3000709@i-hypergrid.com%3e. For general purpose searching I'm not sure it's a great choice however I wanted to make you aware of it.


Regards,

Bruce Ritchie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 16:19:35 2007
Return-Path: <java-user-return-28086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77313 invoked from network); 15 May 2007 16:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 16:19:34 -0000
Received: (qmail 21875 invoked by uid 500); 15 May 2007 16:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21838 invoked by uid 500); 15 May 2007 16:19:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21827 invoked by uid 99); 15 May 2007 16:19:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 09:19:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rampeters@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 09:19:25 -0700
Received: by wr-out-0506.google.com with SMTP id 68so2082110wra
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 09:19:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=llTYtTbC4HdRRHfSVgix2bmzjclcZSh4UWHagmRDW5Nm4ITRnoAlEfnKhoTYVRsP4hLmM/8s+VTioMedp36p7lF9LueXB9aW9c7TXO3H2qIyu45TvRCq4Nf2pGfjzQBstRvLi/9qI7RoTS0SWScHVTHtTqCtav8WSnVozEc/BTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=CAY248piL6mNwEWXP1naJCwN9JS3eqABrHx37qCs6TuqPwfKSTMt1iAJ5QsaGeYKOy+Gk16YMHCxBZa8dmyhY4GbeB0lEMuJ9mnT8SK8JfLhWYOXOpPSNnbC7Hp9HJyT4upY1Lu0r1tFXeXZRaH8uGFvj9Dr0KdFTwT+bMeIvMQ=
Received: by 10.115.60.1 with SMTP id n1mr1634630wak.1179245943297;
        Tue, 15 May 2007 09:19:03 -0700 (PDT)
Received: by 10.115.94.9 with HTTP; Tue, 15 May 2007 09:19:03 -0700 (PDT)
Message-ID: <81b45360705150919y23c4ca8fh2371e4c0de2a98e4@mail.gmail.com>
Date: Tue, 15 May 2007 12:19:03 -0400
From: "Ram Peters" <rampeters@gmail.com>
To: java-user@lucene.apache.org
Subject: Can UID be URI or it has to be INTEGER?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Can UID be URI or it has to be INTEGER?

thnx

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 16:32:50 2007
Return-Path: <java-user-return-28087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84692 invoked from network); 15 May 2007 16:32:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 16:32:48 -0000
Received: (qmail 47977 invoked by uid 500); 15 May 2007 16:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47929 invoked by uid 500); 15 May 2007 16:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47910 invoked by uid 99); 15 May 2007 16:32:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 09:32:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 09:32:36 -0700
Received: by mu-out-0910.google.com with SMTP id i10so1202508mue
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 09:32:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=chuoeAzwefmRjhr0TrOOs0n7kdz6C8Xzet58Tbi/hqyQPR+0/WNLwCR/X73CijCyBiZpD2g7XUk77F1UnBap/vEPyM/yr3ERANQyeSyYHb0zhwpvWU35Lc1xmv9oi/rAZXIPqwX8ysS1/q9xRsvqd5fEmF1Hl8YZHYAXrfsF/50=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VK07W6XZcjeVoudRVhI/zyEuvomA75Y9Ox7RO+JYIzBm7SVlGj1uUSx9dW5f3Io6i0a/brNzNl1KPyUBvBtiK6tckPQ6weKSHfiOBGPJYsjx4ZCv4mns93yR2iqf/alps4tZr/UbicmrKT2ejhOS6ktOSM0hN8wDHcc0pWZilh8=
Received: by 10.82.100.1 with SMTP id x1mr4302431bub.1179246734514;
        Tue, 15 May 2007 09:32:14 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 15 May 2007 09:32:14 -0700 (PDT)
Message-ID: <359a92830705150932h3798f820lc506ddd711b9dc1f@mail.gmail.com>
Date: Tue, 15 May 2007 12:32:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FSDirectory and merge indexes
In-Reply-To: <db1f8a4e0705150546g4d8ea417hec68705a0e58f98a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2627_29031465.1179246734444"
References: <db1f8a4e0705140340r70992c33h1ceeda1d4a6b29f7@mail.gmail.com>
	 <db1f8a4e0705140348r818e66bn544d6ae1410be8c@mail.gmail.com>
	 <359a92830705140634v17bf205fv4290b7e97ee5f6bc@mail.gmail.com>
	 <db1f8a4e0705150546g4d8ea417hec68705a0e58f98a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2627_29031465.1179246734444
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That *should* work. Can you post more of your code?
Particularly the index creation code where you instantiate
your index.

Also, what assurance do you have that fsd1 exists? Although
even if it doesn't exist the exception seems odd.

Instead of just giving the name of the exception, please post

exception.printStackTrace()

which will give people much more to work with....

Erick

On 5/15/07, Gilbert Groenendijk <gilbert.groenendijk@gmail.com> wrote:
>
> Thank you for your reply. With addIndexes this works perfectly but when i
> change it to:
>
> writer.addIndexesNoOptimize(new Directory[] { fsd1});
>
> It throws an exception saying it doesn't have a method with this
> parameters.
> I need a fast merge and with the optimization this is not possible and i
> want to test how fast it is without optimizing.
>
>
>
> On 5/14/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> >            FSDirectory fsd1 = FSDirectory.getDirectory("e:/Index1");
> >            FSDirectory fsd2 = FSDirectory.getDirectory("e:/Index2");
> >            FSDirectory fsd3 = FSDirectory.getDirectory("e:/Index3");
> >            FSDirectory fsd4 = FSDirectory.getDirectory("e:/Index4");
> >            FSDirectory fsd5 = FSDirectory.getDirectory("e:/Index5");
> >            FSDirectory fsd6 = FSDirectory.getDirectory("e:/Index6");
> >            IndexWriter writer = new IndexWriter(blah blah blah);
> >
> >            writer.addIndexes(new Directory[] { fsd1, fsd2, fsd3, fsd4,
> > fsd5, fsd6 });
> >
> >
> > On 5/14/07, Gilbert Groenendijk <gilbert.groenendijk@gmail.com> wrote:
> > >
> > > Hi,
> > >
> > >
> > >
> > > Currently I'm trying to create a temporary index on my filesystem and
> > > after
> > > that merge it with an existing index. I've tried to use
> > > 'addIndexesNoOptimize' but I need to pass in an array of directories.
> > How
> > > do
> > > I create that array when I'm using FSDirectory.getDirectory. it gives
> me
> > > an
> > > error like 'addIndexesNoOptimize([o:FSDirectory]). ' Illegal argument.
> > >
> > > --
> > > Gilbert Groenendijk
> > > __________________________________________________
> > >
> >
>

------=_Part_2627_29031465.1179246734444--

From java-user-return-28088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 20:56:02 2007
Return-Path: <java-user-return-28088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89482 invoked from network); 15 May 2007 20:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 20:56:00 -0000
Received: (qmail 88641 invoked by uid 500); 15 May 2007 20:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88598 invoked by uid 500); 15 May 2007 20:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88587 invoked by uid 99); 15 May 2007 20:55:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 13:55:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 13:55:51 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 054085B52F
	for <java-user@lucene.apache.org>; Tue, 15 May 2007 13:55:29 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <81b45360705150919y23c4ca8fh2371e4c0de2a98e4@mail.gmail.com>
References: <81b45360705150919y23c4ca8fh2371e4c0de2a98e4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F2D9C2D4-F594-4009-AF80-0D73297298F8@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Can UID be URI or it has to be INTEGER?
Date: Tue, 15 May 2007 16:55:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

If by UID you mean the internal, volatile, Lucene integer used to  
identify docs, then, yes, it must be an integer.  If by UID you mean  
some application specific field set on your document, then it can be  
whatever you want that uniquely identifies that doc.  Just know  
Lucene knows nothing about it being your UID.

Grant

On May 15, 2007, at 12:19 PM, Ram Peters wrote:

> Can UID be URI or it has to be INTEGER?
>
> thnx
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 23:07:41 2007
Return-Path: <java-user-return-28089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33969 invoked from network); 15 May 2007 23:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 23:07:40 -0000
Received: (qmail 84889 invoked by uid 500); 15 May 2007 23:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84855 invoked by uid 500); 15 May 2007 23:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84844 invoked by uid 99); 15 May 2007 23:07:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 16:07:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 16:07:32 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id D07554A8175
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:10:32 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
Date: Wed, 16 May 2007 09:07:05 +1000
User-Agent: KMail/1.9.6
References: <464953A9.5030004@anu.edu.au> <7fa3c1080705150459s7a06d83dp44880c7708f759c0@mail.gmail.com>
In-Reply-To: <7fa3c1080705150459s7a06d83dp44880c7708f759c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705160907.05468.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 15 May 2007 21:59:31 Narednra Singh Panwar wrote:
> try using -Xmx option with your Application. and specify maximum/ minimum
> memory for your Application.

It's funny how a lot of people instantly suggest this.  What if it isn't 
possible?  There was a situation a while back where I said I had allocated it 
1.8GB, and someone *still* recommended this option. :-)

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 15 23:59:53 2007
Return-Path: <java-user-return-28090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57269 invoked from network); 15 May 2007 23:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 May 2007 23:59:52 -0000
Received: (qmail 39095 invoked by uid 500); 15 May 2007 23:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39054 invoked by uid 500); 15 May 2007 23:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39043 invoked by uid 99); 15 May 2007 23:59:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 16:59:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.133] (HELO anumail7.anu.edu.au) (130.56.64.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 16:59:43 -0700
Received: from smtphost.anu.edu.au (ds2.anu.edu.au [130.56.64.54])
	by anumail7.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4FNxKIT015666
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:59:20 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4FNxJOX000484
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:59:19 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4FNxJN5001783
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:59:19 +1000 (EST)
Message-ID: <464A4952.7060407@anu.edu.au>
Date: Wed, 16 May 2007 09:59:14 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <464953A9.5030004@anu.edu.au> <46499B50.9060307@gmail.com>
In-Reply-To: <46499B50.9060307@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.15.164433 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, that narrows it down a bit.

Thanks for all the replies to my question.

Steve

Mark Miller wrote:
> I don't have much help to offer other than to say I am also using a 
> tweaked version of the IndexAccess code you are, with java 1.6, with 
> hundreds of thousands to millions of docs, at multiple locations, for 
> months -- and I have not seen any memory leaks. Leads me to think the 
> leak may be with your code and not any Lucene code...
>
> I will mention that the IndexAccess code does not handle 
> multi-searchers very well without some adjustments, but even that 
> should not cause a leak.
>
> Keep playing with the Netbeans profiler...if it really is a leak, you 
> aught to be able to find it.
>
> - Mark
>
> Stephen Gray wrote:
>> Hi everyone,
>>
>> I have an application that indexes/searches xml documents using 
>> Lucene. I'm having a problem with what looks like a memory leak, 
>> which occurs when indexing a large number of documents, but only when 
>> the application is running under JVM 1.6. Under JVM 1.5 there is no 
>> problem. What happens is that the memory allocated consistently rises 
>> during indexing until the JVM crashes with an OutOfMemory exception.
>>
>> I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess 
>> API, which hands out references to cached 
>> IndexWriter/Reader/Searchers to objects that need to use them, and 
>> handles closing and re-opening IndexSearchers after documents are 
>> added to the index. The application is running under Tomcat 6.
>>
>> I'm a bit out of my depth determining the source of the leak - I've 
>> tried using Netbeans profiler, which shows a large number of HashMap 
>> instances that survive a long time, but these are created by many 
>> different classes so it's difficult to pinpoint one source.
>>
>> Has anyone found similar problems with Lucene indexing operations 
>> running under JVM 1.6? Does anyone have any suggestions re how to 
>> deal with this?
>>
>> Any help much appreciated.
>>
>> Thanks,
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Stephen Gray
Archive IT Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 00:20:34 2007
Return-Path: <java-user-return-28091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62030 invoked from network); 16 May 2007 00:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 00:20:33 -0000
Received: (qmail 66530 invoked by uid 500); 16 May 2007 00:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66482 invoked by uid 500); 16 May 2007 00:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72527 invoked by uid 99); 15 May 2007 15:11:52 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=prodigy.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ASEgBzrUmSCqgdpw1uWXzm30sbF4FoGQ3AqoQzpptybMUpktfuE6xGaysHVFp+0SwWZk+TxSDrCpObdeYA8nHmQmo5ofS7JtNOIk0ZJXo1ZGJLyZFfMMf3amfMmxKEkLZXaKHgp0C9L2PQLI/nnY7UUCXHfZYI9EEk2mslrqkcY=;
X-YMail-OSG: jSC9g0YVM1miSbxbHQpTEKqPOcQEcRQgNEwIhWGszYZelOeH.ILfOXok3jilq8KSri6HYsdRuVKh4HXKVj.Q4N8QAi6cRnc7F9511.AQ3gZ2GcGbfn67Q3R.dbZBXj6ud_1u0w--
Date: Tue, 15 May 2007 08:11:16 -0700 (PDT)
From: Charles Patridge <charles_s_patridge@prodigy.net>
Subject: Concept Search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-343938337-1179241876=:53019"
Content-Transfer-Encoding: 8bit
Message-ID: <648393.53019.qm@web80203.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-343938337-1179241876=:53019
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

  I have looked around on Lucene web site as well as some documentation 
but have not found anything to do with Concept Search.
   
    My definition of Concept Search is as follows:
  
  1.  I would have a file (list) of various phrases / N-grams which I 
would like to Lucene to use as a search basis without having to type in 
all these phrases manually, and have Lucene return the results as it 
would normally if a single search query was entered.
   
    2.  An example would be - find !Wild_Animals! - where the "!" would 
indicate that this is a search that would use a file (ie 
Wild_Animals.txt) and read in the various phrases within this file and perform the 
search in the corpus for these phrases.
   
    3.  The contents of Wild_Animals.txt could look like this:
  BUFFALO
  BEAR
  MOOSE
  COYOTE
  WOLF
  MOUNTAIN GOAT
  MOUNTAIN SHEEP
  DALL SHEEP
  DEER
  KODIAK BEAR
  BROWN BEAR
  BLACK BEAR
  etc etc etc
   
    4.  Is my idea of a Concept Search feasible / doable???  If so, can 
you point me to any documentation that exists whereby this could be done 
within Lucene
   
    Please send any info you have on this to me - 
Charles_S_Patridge@prodigy.net
  
  Thank you in advance for your time and efforts.



Charles S Patridge - PDPC, Ltd.
172 Monce Road - Burlington, CT 06013 USA
Email: Charles_S_Patridge@prodigy.net
Web: http://www.sconsig.com
Web: http://pages.prodigy.net/charles_s_patridge
Web: http://www.munic.state.ct.us/burlington
--0-343938337-1179241876=:53019--

From java-user-return-28092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 01:01:22 2007
Return-Path: <java-user-return-28092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76023 invoked from network); 16 May 2007 01:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 01:01:22 -0000
Received: (qmail 18431 invoked by uid 500); 16 May 2007 01:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18282 invoked by uid 500); 16 May 2007 01:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18271 invoked by uid 99); 16 May 2007 01:01:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 18:01:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [168.144.250.246] (HELO xsmtp06.mail2web.com) (168.144.250.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 18:01:13 -0700
Received: from [10.5.14.9] (helo=exfe04.ad2.softcom.biz)
	by xsmtp06.mail2web.com with esmtp (Exim 4.63)
	(envelope-from <anna@sendmemobile.com>)
	id 1Ho7so-0004O5-SO
	for java-user@lucene.apache.org; Tue, 15 May 2007 21:00:52 -0400
Received: from CL4EXBE03.ad2.softcom.biz ([10.5.13.16]) by exfe04.ad2.softcom.biz with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 15 May 2007 21:02:19 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C79755.D59799F5"
Date: Tue, 15 May 2007 21:00:18 -0400
Message-ID: <18D8E943D728594C864C7AA427FDC6220E257759@CL4EXBE03.ad2.softcom.biz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryFilter usage
Thread-Index: AceXVZIlZThfyhoWSPOUb/l5KRU96w==
From: "Anna Putnam" <anna@sendmemobile.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 May 2007 01:02:19.0915 (UTC) FILETIME=[DA9DFDB0:01C79755]
Subject: QueryFilter usage
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C79755.D59799F5
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

=20

I am new to Lucene so I apologize if this is a really easy question.  I
am having trouble using the QueryFilter class. =20

=20

Basically, I want to narrow my search results, getting hits only for a
particular category.

=20

This is what I've tried (getting no results)

=20

String line =3D"justin";

Query query =3D parser.parse(line);

System.out.println("Query: " + query.toString());

Term t =3D new Term("category", "Pop");

TermQuery tq =3D new TermQuery(t);

QueryFilter qf =3D new QueryFilter(tq);

System.out.println("Filtered Query: " + fq.toString());

     =20

fq =3D new FilteredQuery(query, qf);

=20

search(fq);

=20

My debug gives the following:

=20

Query: author:justin title:justin

Filtered Query: filtered(author:justin
title:justin)->QueryFilter(category:Pop)

=20

If I call search(query) I get full results so I know "category" is
indexed.

=20

Any help would be greatly appreciated.

=20

-Anna

=20


------_=_NextPart_001_01C79755.D59799F5--

From java-user-return-28093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 01:11:37 2007
Return-Path: <java-user-return-28093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78621 invoked from network); 16 May 2007 01:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 01:11:36 -0000
Received: (qmail 31555 invoked by uid 500); 16 May 2007 01:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31525 invoked by uid 500); 16 May 2007 01:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31514 invoked by uid 99); 16 May 2007 01:11:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 18:11:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 18:11:28 -0700
Received: by py-out-1112.google.com with SMTP id a25so332758pyi
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 18:11:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MSYY8BM1lldwifZL3gJwfH7sgKsD0cBgL7dt+X6IST++KXqY55gFUVyrUHtZsl6GHcOC1q6BjjU7BSum5dmcmnW4H0r9Qd3evqYGCBql1bEeefl0bL6prRwjzZjwhhGWpyXoO4CaVAVkY+kSQfBkLs/3qTHOympYOgRnKRmNmwk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VLVe4E2DTXu+J2LM5s4EHDjNeAcc2n2TlGB5dkfI8vV8PKlRPO4oXMqKo6aqNc/gwNSYfzNZ/ADSHbN7WGFh6yjYrX9GbqKvUjPqUPpE7IDpASlmbM20oeMuxsFcDNhtiNH25fpc2aUEqBvOLwoTPzetv0h1pYlA619jeJ4GJnw=
Received: by 10.65.235.7 with SMTP id m7mr1988511qbr.1179277867701;
        Tue, 15 May 2007 18:11:07 -0700 (PDT)
Received: by 10.64.183.9 with HTTP; Tue, 15 May 2007 18:11:07 -0700 (PDT)
Message-ID: <386a4720705151811t5153ed9p3eed24fb2ca29ba7@mail.gmail.com>
Date: Tue, 15 May 2007 21:11:07 -0400
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryFilter usage
In-Reply-To: <18D8E943D728594C864C7AA427FDC6220E257759@CL4EXBE03.ad2.softcom.biz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5587_25701665.1179277867610"
References: <18D8E943D728594C864C7AA427FDC6220E257759@CL4EXBE03.ad2.softcom.biz>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5587_25701665.1179277867610
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

unsubscribe

------=_Part_5587_25701665.1179277867610--

From java-user-return-28094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 06:13:36 2007
Return-Path: <java-user-return-28094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58884 invoked from network); 16 May 2007 06:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 06:13:35 -0000
Received: (qmail 17419 invoked by uid 500); 16 May 2007 06:13:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16457 invoked by uid 500); 16 May 2007 06:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16446 invoked by uid 99); 16 May 2007 06:13:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 23:13:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mskumar@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 May 2007 23:13:27 -0700
Received: by nz-out-0506.google.com with SMTP id i1so435929nzh
        for <java-user@lucene.apache.org>; Tue, 15 May 2007 23:13:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=AuL+Ng5/jsNxRq32I/uuhTePRHubTf1nX5gbGOCLVqDiEbGacoK36ArljHJbaXWZ6cPQ5ysU/0u7BFScYLHOYkald+9RwVHftgGktHwPOVtrAO8yuta9s2Y+Fif839DzAtRovaNHooHAt0jrRW2PabrtpkXkxQ3TNplQ7UpqA7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mnL0IqYLVNtODR6byzby7vEfvqnEFrEBV5vglNFW+lgDXLC373lxmUX4wYTLawvIAO1MQUz0XmDQrmGPBI6+vpzhupSlw0+/GVQcMm9TzqI4aar7BPfDRufMULPUnKY4ympJPiMswBBfvLb+o7oTztUhUKSAWwXq/xf7bGsNctk=
Received: by 10.115.15.1 with SMTP id s1mr1994892wai.1179295986340;
        Tue, 15 May 2007 23:13:06 -0700 (PDT)
Received: by 10.114.173.13 with HTTP; Tue, 15 May 2007 23:13:06 -0700 (PDT)
Message-ID: <f514763f0705152313v1b567e0ak7429e851d7dc026a@mail.gmail.com>
Date: Wed, 16 May 2007 11:43:06 +0530
From: Saravana <mskumar@gmail.com>
To: java-user@lucene.apache.org
Subject: Term Frequency for Partial Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13522_21179598.1179295986280"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13522_21179598.1179295986280
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear All,

I am creating an index file per day i.e it will contain data for every 24
hours (00:00:00 to 23:59:59). This time value is a field in each document.
Document has other text fields too on which users can search.

User's search criteria would be a combination of time and other field
values. We are forming a RangeQuery for time and normal query for other
field values.

Now I am able to find  Term Frequency per index i.e for the whole 24
hours.   But I want to find the Term Frequency for 1 hour i.e between
01:00:00 to 02:00:00. Will it be possible? Is there any API to find Term
Frequency with Range Query?  I believe  it would take much more time if we
go and find term frequency per document if the matching documents are huge.

MSK

------=_Part_13522_21179598.1179295986280--

From java-user-return-28095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 12:19:28 2007
Return-Path: <java-user-return-28095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11083 invoked from network); 16 May 2007 12:19:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 12:19:26 -0000
Received: (qmail 82992 invoked by uid 500); 16 May 2007 12:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82950 invoked by uid 500); 16 May 2007 12:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82939 invoked by uid 99); 16 May 2007 12:19:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 05:19:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wsgrah@wm.edu designates 128.239.35.14 as permitted sender)
Received: from [128.239.35.14] (HELO mail3.wm.edu) (128.239.35.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 05:19:17 -0700
Received: from [127.0.0.1] (wm159-115.admin.wm.edu [128.239.115.159])
	by mail3.wm.edu (MOS 3.8.3-GA)
	with ESMTP id AHZ98606 (AUTH wsgrah);
	Wed, 16 May 2007 08:18:55 -0400 (EDT)
Message-ID: <464AF6A9.8020403@wm.edu>
Date: Wed, 16 May 2007 08:18:49 -0400
From: Wayne Graham <wsgrah@wm.edu>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryFilter usage
References: <18D8E943D728594C864C7AA427FDC6220E257759@CL4EXBE03.ad2.softcom.biz>
In-Reply-To: <18D8E943D728594C864C7AA427FDC6220E257759@CL4EXBE03.ad2.softcom.biz>
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Junkmail-Whitelist: YES (by domain whitelist at mail3.wm.edu)
X-Virus-Checked: Checked by ClamAV on apache.org

While I too am still learning, I ran into this last week.

Try this:

String line = "justin";

Query query = parser.parse(line);

TermQuery tq = new TermQuery(new Term("category", "Pop"));

Filter qf = new QueryFilter(tq);

Hits hits = search(query, qf);

HTH,
Wayne

Anna Putnam wrote:
> Hi all,
> 
>  
> 
> I am new to Lucene so I apologize if this is a really easy question.  I
> am having trouble using the QueryFilter class.  
> 
>  
> 
> Basically, I want to narrow my search results, getting hits only for a
> particular category.
> 
>  
> 
> This is what I've tried (getting no results)
> 
>  
> 
> String line ="justin";
> 
> Query query = parser.parse(line);
> 
> System.out.println("Query: " + query.toString());
> 
> Term t = new Term("category", "Pop");
> 
> TermQuery tq = new TermQuery(t);
> 
> QueryFilter qf = new QueryFilter(tq);
> 
> System.out.println("Filtered Query: " + fq.toString());
> 
>       
> 
> fq = new FilteredQuery(query, qf);
> 
>  
> 
> search(fq);
> 
>  
> 
> My debug gives the following:
> 
>  
> 
> Query: author:justin title:justin
> 
> Filtered Query: filtered(author:justin
> title:justin)->QueryFilter(category:Pop)
> 
>  
> 
> If I call search(query) I get full results so I know "category" is
> indexed.
> 
>  
> 
> Any help would be greatly appreciated.
> 
>  
> 
> -Anna
> 
>  
> 
> 

-- 
/**
 * Wayne Graham
 * Earl Gregg Swem Library
 * PO Box 8794
 * Williamsburg, VA 23188
 * 757.221.3112
 * http://swem.wm.edu/blogs/waynegraham/
 */


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 13:16:59 2007
Return-Path: <java-user-return-28096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37744 invoked from network); 16 May 2007 13:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 13:16:57 -0000
Received: (qmail 9693 invoked by uid 500); 16 May 2007 13:16:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9665 invoked by uid 500); 16 May 2007 13:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9654 invoked by uid 99); 16 May 2007 13:16:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:16:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:16:49 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16383A7F@mailer.syr.edu>; Wed, 16 May 2007 9:16:28 -0400
Message-ID: <464B040B.3020202@syr.edu>
Date: Wed, 16 May 2007 09:15:55 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Concept Search
References: <648393.53019.qm@web80203.mail.mud.yahoo.com>
In-Reply-To: <648393.53019.qm@web80203.mail.mud.yahoo.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Charles,

The need presented by your use case sounds very similar to that served
by the SynonymAnalyzer given in Erik Hatcher's and Otis Gospodnetic's
excellent book "Lucene in Action" - take a look:

    http://lucenebook.com/

Steve

Charles Patridge wrote:
>   I have looked around on Lucene web site as well as some documentation 
> but have not found anything to do with Concept Search.
>    
>     My definition of Concept Search is as follows:
>   
>   1.  I would have a file (list) of various phrases / N-grams which I 
> would like to Lucene to use as a search basis without having to type in 
> all these phrases manually, and have Lucene return the results as it 
> would normally if a single search query was entered.
>    
>     2.  An example would be - find !Wild_Animals! - where the "!" would 
> indicate that this is a search that would use a file (ie 
> Wild_Animals.txt) and read in the various phrases within this file and perform the 
> search in the corpus for these phrases.
>    
>     3.  The contents of Wild_Animals.txt could look like this:
>   BUFFALO
>   BEAR
>   MOOSE
>   COYOTE
>   WOLF
>   MOUNTAIN GOAT
>   MOUNTAIN SHEEP
>   DALL SHEEP
>   DEER
>   KODIAK BEAR
>   BROWN BEAR
>   BLACK BEAR
>   etc etc etc
>    
>     4.  Is my idea of a Concept Search feasible / doable???  If so, can 
> you point me to any documentation that exists whereby this could be done 
> within Lucene
>    
>     Please send any info you have on this to me - 
> Charles_S_Patridge@prodigy.net
>   
>   Thank you in advance for your time and efforts.
> 
> 
> 
> Charles S Patridge - PDPC, Ltd.
> 172 Monce Road - Burlington, CT 06013 USA
> Email: Charles_S_Patridge@prodigy.net
> Web: http://www.sconsig.com
> Web: http://pages.prodigy.net/charles_s_patridge
> Web: http://www.munic.state.ct.us/burlington


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 13:51:26 2007
Return-Path: <java-user-return-28097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57729 invoked from network); 16 May 2007 13:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 13:51:26 -0000
Received: (qmail 10507 invoked by uid 500); 16 May 2007 13:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10301 invoked by uid 500); 16 May 2007 13:51:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10286 invoked by uid 99); 16 May 2007 13:51:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:51:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:51:17 -0700
Received: by mu-out-0910.google.com with SMTP id i10so102753mue
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 06:50:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oloF36pFsEvPOhvDk4XrDcLg+gS7Cfs46El9o47PjZ8iZXGttvjN0CMg0M+O7wbct2m/3fJdj8Do1muGfuqliP5qLndG8TDIXngzlXYo0alXpdO2f62TokolrF3C9n8sfI34yoFxaOjeY9v83Sqe3mR8UAFNMOhW4woxeyxKhFc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Nv47k7Yil1SjKvIeiAWjg/GxI+KnBMs2aJdNrnkDGxXpxZTpH9CDDVHaLN6LyEfiIimMWqbE8xuoVdC6FGb/2XhusDatRZ0UPAhx6bwHCOR03Wwdk1SM6QeKfT7kzyiotmVpNv5u42UBw0VMeDEnJOO6yYEg/ESf7xLFZmfurO0=
Received: by 10.82.162.14 with SMTP id k14mr5148478bue.1179323455414;
        Wed, 16 May 2007 06:50:55 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 16 May 2007 06:50:55 -0700 (PDT)
Message-ID: <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
Date: Wed, 16 May 2007 09:50:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concept Search
In-Reply-To: <464B040B.3020202@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9468_27106689.1179323455373"
References: <648393.53019.qm@web80203.mail.mud.yahoo.com>
	 <464B040B.3020202@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9468_27106689.1179323455373
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's interesting. I suppose you could add the "synonym" of
WildAnimals$ whenever you encountered any of the items in your
list, then when concept searching is called for, search on
WildAnimals$.

Highlighting might be tricky, but certainly do-able, especially with
the capabilities of a MemoryIndex......

Erick

On 5/16/07, Steven Rowe <sarowe@syr.edu> wrote:
>
> Hi Charles,
>
> The need presented by your use case sounds very similar to that served
> by the SynonymAnalyzer given in Erik Hatcher's and Otis Gospodnetic's
> excellent book "Lucene in Action" - take a look:
>
>     http://lucenebook.com/
>
> Steve
>
> Charles Patridge wrote:
> >   I have looked around on Lucene web site as well as some documentation
> > but have not found anything to do with Concept Search.
> >
> >     My definition of Concept Search is as follows:
> >
> >   1.  I would have a file (list) of various phrases / N-grams which I
> > would like to Lucene to use as a search basis without having to type in
> > all these phrases manually, and have Lucene return the results as it
> > would normally if a single search query was entered.
> >
> >     2.  An example would be - find !Wild_Animals! - where the "!" would
> > indicate that this is a search that would use a file (ie
> > Wild_Animals.txt) and read in the various phrases within this file and
> perform the
> > search in the corpus for these phrases.
> >
> >     3.  The contents of Wild_Animals.txt could look like this:
> >   BUFFALO
> >   BEAR
> >   MOOSE
> >   COYOTE
> >   WOLF
> >   MOUNTAIN GOAT
> >   MOUNTAIN SHEEP
> >   DALL SHEEP
> >   DEER
> >   KODIAK BEAR
> >   BROWN BEAR
> >   BLACK BEAR
> >   etc etc etc
> >
> >     4.  Is my idea of a Concept Search feasible / doable???  If so, can
> > you point me to any documentation that exists whereby this could be done
> > within Lucene
> >
> >     Please send any info you have on this to me -
> > Charles_S_Patridge@prodigy.net
> >
> >   Thank you in advance for your time and efforts.
> >
> >
> >
> > Charles S Patridge - PDPC, Ltd.
> > 172 Monce Road - Burlington, CT 06013 USA
> > Email: Charles_S_Patridge@prodigy.net
> > Web: http://www.sconsig.com
> > Web: http://pages.prodigy.net/charles_s_patridge
> > Web: http://www.munic.state.ct.us/burlington
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9468_27106689.1179323455373--

From java-user-return-28098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 13:57:26 2007
Return-Path: <java-user-return-28098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59578 invoked from network); 16 May 2007 13:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 13:57:21 -0000
Received: (qmail 23835 invoked by uid 500); 16 May 2007 13:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23807 invoked by uid 500); 16 May 2007 13:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23796 invoked by uid 99); 16 May 2007 13:57:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:57:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 06:56:53 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16383F12@mailer.syr.edu>; Wed, 16 May 2007 9:56:32 -0400
Message-ID: <464B0D6A.9070103@syr.edu>
Date: Wed, 16 May 2007 09:55:54 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Concept Search
References: <648393.53019.qm@web80203.mail.mud.yahoo.com>	 <464B040B.3020202@syr.edu> <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
In-Reply-To: <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

That's not precisely what I was imagining, although it does sound viable
- I was thinking of using standard indexing, and then generating concept
instantiations ("synonyms") at query time. - Steve

Erick Erickson wrote:
> That's interesting. I suppose you could add the "synonym" of
> WildAnimals$ whenever you encountered any of the items in your
> list, then when concept searching is called for, search on
> WildAnimals$.
> 
> Highlighting might be tricky, but certainly do-able, especially with
> the capabilities of a MemoryIndex......
> 
> Erick
> 
> On 5/16/07, Steven Rowe <sarowe@syr.edu> wrote:
>>
>> Hi Charles,
>>
>> The need presented by your use case sounds very similar to that served
>> by the SynonymAnalyzer given in Erik Hatcher's and Otis Gospodnetic's
>> excellent book "Lucene in Action" - take a look:
>>
>>     http://lucenebook.com/
>>
>> Steve
>>
>> Charles Patridge wrote:
>> >   I have looked around on Lucene web site as well as some documentation
>> > but have not found anything to do with Concept Search.
>> >
>> >     My definition of Concept Search is as follows:
>> >
>> >   1.  I would have a file (list) of various phrases / N-grams which I
>> > would like to Lucene to use as a search basis without having to type in
>> > all these phrases manually, and have Lucene return the results as it
>> > would normally if a single search query was entered.
>> >
>> >     2.  An example would be - find !Wild_Animals! - where the "!" would
>> > indicate that this is a search that would use a file (ie
>> > Wild_Animals.txt) and read in the various phrases within this file and
>> perform the
>> > search in the corpus for these phrases.
>> >
>> >     3.  The contents of Wild_Animals.txt could look like this:
>> >   BUFFALO
>> >   BEAR
>> >   MOOSE
>> >   COYOTE
>> >   WOLF
>> >   MOUNTAIN GOAT
>> >   MOUNTAIN SHEEP
>> >   DALL SHEEP
>> >   DEER
>> >   KODIAK BEAR
>> >   BROWN BEAR
>> >   BLACK BEAR
>> >   etc etc etc
>> >
>> >     4.  Is my idea of a Concept Search feasible / doable???  If so, can
>> > you point me to any documentation that exists whereby this could be
>> done
>> > within Lucene
>> >
>> >     Please send any info you have on this to me -
>> > Charles_S_Patridge@prodigy.net
>> >
>> >   Thank you in advance for your time and efforts.
>> >
>> >
>> >
>> > Charles S Patridge - PDPC, Ltd.
>> > 172 Monce Road - Burlington, CT 06013 USA
>> > Email: Charles_S_Patridge@prodigy.net
>> > Web: http://www.sconsig.com
>> > Web: http://pages.prodigy.net/charles_s_patridge
>> > Web: http://www.munic.state.ct.us/burlington


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 16:07:10 2007
Return-Path: <java-user-return-28099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20665 invoked from network); 16 May 2007 16:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 16:07:09 -0000
Received: (qmail 52637 invoked by uid 500); 16 May 2007 16:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52454 invoked by uid 500); 16 May 2007 16:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52443 invoked by uid 99); 16 May 2007 16:07:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:07:08 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,HTML_TAG_EXIST_TBODY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of webegray@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:07:01 -0700
Received: by an-out-0708.google.com with SMTP id b8so50562ana
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:06:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=Bhg5Aert55nqr3oOqCcCyjvgtHsudVgQkcVTwG3xW+ttxRQeOduZue3aan/UZYCOyekJ9DFcu5DXVu1dd4vzug8d6BrEtxaCFrZxzpVcNXrl1ENkeBj9ke3FvGKrJKcD16eAaC3Hx7RE0VX4h9uZu0sAEB1mNAkhr2wIGynTb4s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=ILt1ky+FffZshaMaPpPEXiDTVpkhlk/udnCrYVIVlor+LjPU3cpuJQnN3qHbGAKo4Hku2z0xrqz6aG3Y3IfkBdIDleG/kUnoSWH3E5Pl6Smlebhk16CLZPisRh0IM75U6y/s6s5K7I8+GtfT/OhcOo9Fqf0JY7oCJWPJC9E2SBw=
Received: by 10.100.108.11 with SMTP id g11mr6299075anc.1179331599124;
        Wed, 16 May 2007 09:06:39 -0700 (PDT)
Received: by 10.100.4.5 with HTTP; Wed, 16 May 2007 09:06:39 -0700 (PDT)
Message-ID: <1a7066650705160906o50b3674fg873722bd31498ee@mail.gmail.com>
Date: Wed, 16 May 2007 12:06:39 -0400
From: david <dmataxo@gmail.com>
Sender: webegray@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Suspected problem in the QueryParser
In-Reply-To: <Pine.LNX.4.58.0611031144560.30415@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27082_7233956.1179331599063"
References: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com>
	 <Pine.LNX.4.58.0611031144560.30415@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 785d676f09c420a9
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27082_7233956.1179331599063
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I understand that it would be best to have a UI that mapped lists of terms
to MUST, MUST_NOT and SHOULD, but I'm currently constrained to using the
QueryParser with boolean operators.

Given that, I was thinking that the addition of "*:*" (in 2.1) to represent
MatchAllDocsQuery might help solve:

> "  NOT Chair " is the problem ... you can't have a negative clause in
> isolation by itself -- it doesn't make sense because there isn't anything
> positively selecting results for you to then exclude results from.
>
> by making that: "*:* NOT Chair"

To test, I indexed these documents:

  *DocID*

*Body Value*

0

A B C

1

A B C D

2

A C D

3

B C D

4

C D

5

B

Searching in Luke, here's what I see:

*Query*

*Parsed As*

*Expected Matches*

*Actual Matches*

NOT B

-body:B

2, 4

<none>

*:* NOT B

MatchAllDocsQuery -body:B

2, 4

2, 4, 5

*.* AND NOT B

+MatchAllDocsQuery -body:B

2, 4

2, 4, 5

Can someone explain why doc 5 is matched for both "*:* NOT B" and  "*.* AND
NOT B"?
Are my Expected Matches incorrect?

Thanks, david


On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : When I enter the query: "Table AND NOT Chair"  I get one hit, doc3
> : When I enter the query: "Table AND (NOT Chair)" I get 0 hits.
> :
> : I had thought that both queries would return the same results.  Is this
> a
> : bug, or, am I not understanding the query language correctly?
>
> it's a confusing eccentricity of the QueryParser syntax ... as a general
> rule, thing in parens need to be self contained, effective, queries ... if
>
> you have something in parens which would not make sense as a query by
> itself, then it won't make any more sense as part of a larger query.
>
> In your case, the query "  NOT Chair " is the problem ... you can't have
> a negative clause in isolation by itself -- it doesn't make sense because
> there isn't anything positively selecting results for you to then exclude
> results from.
>
>
> As a side not: i strongly encourage you to train yourself to think in
> terms of MUST, MUST_NOT and SHOULD (which are represented in the query
> parser as the prefixes "+", "-" and the default) instead of in terms of
> AND, OR, and NOT ... Lucene's BooleanQuery (and thus Lucene's QueryParser)
>
> is not a strict Boolean Logic system, so it's best not to try and think
> of it like one.
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27082_7233956.1179331599063--

From java-user-return-28100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 16:17:28 2007
Return-Path: <java-user-return-28100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25014 invoked from network); 16 May 2007 16:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 16:17:26 -0000
Received: (qmail 81324 invoked by uid 500); 16 May 2007 16:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81295 invoked by uid 500); 16 May 2007 16:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81280 invoked by uid 99); 16 May 2007 16:17:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:17:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:17:17 -0700
Received: by py-out-1112.google.com with SMTP id a25so529246pyi
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 09:16:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QKyuCLzYP3OcyHNj6MHXPRfiypfnh4ICWfScHlCiEE4lH1FHLzVDOmr1wVpg+4wjuta8W0iiobYrroQ+5O2F5EpWh3DrdQ6VeSMPPgPz0cyI98AjpfWZTQ4OfZNgGEuKRyAW9Mf666Yed5zD0VpHpNbqYJNyyqolsVjU/lByL18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i5Jcjn8u5+dLq7I6cv5NlbwRpOA95YKjZXl7CuXkcSflwFkPjxihBGqtkoy7AdAtiUOQARN8qCs3WES3vdZHJGfh/JSfLju+qlYSfKPHMug/9y0J25amKz79Kx3nTN/bAA+7bdGer9o3BcddTVmbpPEzJM/ZYt9kBdd0JptrMz4=
Received: by 10.35.98.6 with SMTP id a6mr5406512pym.1179332217197;
        Wed, 16 May 2007 09:16:57 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Wed, 16 May 2007 09:16:57 -0700 (PDT)
Message-ID: <3563fa0d0705160916w5df5d7fcs909e7521badc500a@mail.gmail.com>
Date: Wed, 16 May 2007 12:16:57 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suspected problem in the QueryParser
In-Reply-To: <1a7066650705160906o50b3674fg873722bd31498ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11695_1403910.1179332217116"
References: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com>
	 <Pine.LNX.4.58.0611031144560.30415@hal.rescomp.berkeley.edu>
	 <1a7066650705160906o50b3674fg873722bd31498ee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11695_1403910.1179332217116
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I see my tables didn't come through so well. Here's (I hope) a plain
text version:

I understand that it would be best to have a UI that mapped lists of
terms to MUST, MUST_NOT and SHOULD, but I'm currently constrained to
using the QueryParser with boolean operators.

Given that, I was thinking that the addition of "*:*" (in 2.1) to
represent MatchAllDocsQuery might help solve:

> "  NOT Chair " is the problem ... you can't have a negative
> clause in isolation by itself -- it doesn't make sense because
> there isn't anything positively selecting results for you to then
> exclude results from.

by making that: "*:* NOT Chair"

To test, I indexed these documents:

DocID  Body Value
-----  ----------
  0     A B C
  1     A B C D
  2     A C D
  3     B C D
  4     C D
  5     B
                                          Expected Actual
Query           Parsed As                 Matches  Matches
-----           ---------                 -------- -------
NOT B           -body:B                     2, 4   <none>
*:* NOT B       MatchAllDocsQuery -body:B   2, 4   2, 4, 5
*.* AND NOT B   +MatchAllDocsQuery -body:B  2, 4   2, 4, 5

Can someone explain why doc 5 is matched for both "*:* NOT B" and
"*.* AND NOT B"?

Are my Expected Matches incorrect?

Thanks, david

------=_Part_11695_1403910.1179332217116--

From java-user-return-28101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 16:23:37 2007
Return-Path: <java-user-return-28101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28010 invoked from network); 16 May 2007 16:23:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 16:23:36 -0000
Received: (qmail 7258 invoked by uid 500); 16 May 2007 16:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7232 invoked by uid 500); 16 May 2007 16:23:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7221 invoked by uid 99); 16 May 2007 16:23:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:23:34 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:23:25 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HoMHI-0007HO-Qs
	for java-user@lucene.apache.org; Wed, 16 May 2007 09:23:04 -0700
Message-ID: <10645247.post@talk.nabble.com>
Date: Wed, 16 May 2007 09:23:04 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Multi-field distinct query
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I know this whole distinct query has been discussed a bunch of times for
various scenarios because I've been scouring the forums trying to find a
clue as to how I could solve my problem. I'm indexing a large set of
parent-child term relations (~1 million). The number of unique terms is
about ~570,000. Each relation is a document. Each term in a relation
contains all of the term's attributes. Effectively, a term's attributes will
be duplicated "x" number of times for the "x" number of relations it
participates in. For example, say I have the following term tree:

A
|--B
    |--E
        |--H
    |--F
|--C
    |--G
|--D

I would then have documents for:
A->B, A->C, A->D, B->E, (and so forth...)

For all relations involving A, A's attributes will be duplicated in 3
separate documents.
For all relations involving B, B's attributes will be duplicated in 3
separate documents.
(you get the picture...)

This index structure works great for queries which traverse up and down the
tree. However, I have a requirement where I would also like to do a distinct
query which returns the data for each unique term satisfying the query. For
example, say I have a query which returns all relations where A or B is the
parent (that would be 5 documents in total),
but do a distinct on the parent such that I get 2 documents back, one for A
as the parent (any 1 of the 3 matching docs)  and the other where B is the
parent (any 1 of the 2 matching docs). For this query, I don't care about
the child information since I'm only interested in retrieving the distinct
parent terms. This query is analogous to a 'select distinct <set of parent
term attributes>' . I played around with caching BitSets for the fields
which I'd like to do a distinct on, but given the amount of data, I run out
of memory. I also took the approach where I retrieve the bitset using a
queryfilter and then process each document id, hashing the field values on
which I'm doing a distinct to construct my distinct set. Problem with this
is that I have tree structures where a parent has over 100K children.
Retrieving each doc for this size is too time- and memory- consuming. Since
I don't really want to return that much data, I thought that I could use
paging. The problem I faced is that I do not know if a distinct value in the
current query was actually returned in some previous query for a previous
page.

Sorry for the long description, but wanted to make sure I explained it as
clearly as I could.

-Terry
-- 
View this message in context: http://www.nabble.com/Multi-field-distinct-query-tf3765636.html#a10645247
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 16:56:42 2007
Return-Path: <java-user-return-28102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45213 invoked from network); 16 May 2007 16:56:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 16:56:41 -0000
Received: (qmail 83256 invoked by uid 500); 16 May 2007 16:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82944 invoked by uid 500); 16 May 2007 16:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82933 invoked by uid 99); 16 May 2007 16:56:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:56:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 09:56:32 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HoMnL-0007RA-UO
	for java-user@lucene.apache.org; Wed, 16 May 2007 18:56:11 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Aee5YxtxEAtC for <java-user@lucene.apache.org>;
	Wed, 16 May 2007 18:56:10 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HoMnK-0007Qy-Cn
	for java-user@lucene.apache.org; Wed, 16 May 2007 18:56:10 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <KSSDY1FB>; Wed, 16 May 2007 18:56:10 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C5269A@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: @devs: please release Lucene 2.1 to ibiblio!
Date: Wed, 16 May 2007 18:56:03 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

Could you please upload the 2.1 version of lucene core and analyzers to =
the
maven2 repository?

See:
http://jira.codehaus.org/browse/MAVENUPLOAD-1541?page=3Dcom.atlassian.ji=
ra.plu
gin.system.issuetabpanels:all-tabpanel

I tried to do it myself, but they wouldn't let me. Thanks a lot!

Regards,


Michael


--=20
Michael B=F6ckling
Java Engineer
dmc digital media center GmbH=20
Rommelstra=DFe 11=20
70376 Stuttgart (Germany)=20
Telefon: +49 711 601747-0
Telefax: +49 711 601747-141=20
E-Mail: Michael.Boeckling@dmc.de=20
Internet: www.dmc.de=20

Handelsregister: AG Stuttgart HRB 18974
Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend

---------------------------------------------
Besseres E-Business.
dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. =
Seit
=FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden =
z=E4hlen
neckermann.de, Kodak und Telekom Training.

dmc auf Platz 8 im aktuellen New Media Service Ranking.
Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir =
mit einem
Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
Dienstleister in Deutschland.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 17:33:34 2007
Return-Path: <java-user-return-28103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65827 invoked from network); 16 May 2007 17:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 17:33:33 -0000
Received: (qmail 72448 invoked by uid 500); 16 May 2007 17:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72417 invoked by uid 500); 16 May 2007 17:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72406 invoked by uid 99); 16 May 2007 17:33:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 10:33:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 10:33:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DF12A5B76C; Wed, 16 May 2007 10:33:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D59297F403
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 10:33:05 -0700 (PDT)
Date: Wed, 16 May 2007 10:33:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Suspected problem in the QueryParser
In-Reply-To: <3563fa0d0705160916w5df5d7fcs909e7521badc500a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705161032050.7734@hal.rescomp.berkeley.edu>
References: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com> 
 <Pine.LNX.4.58.0611031144560.30415@hal.rescomp.berkeley.edu> 
 <1a7066650705160906o50b3674fg873722bd31498ee@mail.gmail.com>
 <3563fa0d0705160916w5df5d7fcs909e7521badc500a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

:   5     B
:                                           Expected Actual
: Query           Parsed As                 Matches  Matches
: -----           ---------                 -------- -------
: NOT B           -body:B                     2, 4   <none>
: *:* NOT B       MatchAllDocsQuery -body:B   2, 4   2, 4, 5
: *.* AND NOT B   +MatchAllDocsQuery -body:B  2, 4   2, 4, 5

your actual matches do not apear correct based based on my personal
experience .. cna you post a short test case that demonstrates this?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 18:03:56 2007
Return-Path: <java-user-return-28104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78838 invoked from network); 16 May 2007 18:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 18:03:55 -0000
Received: (qmail 18000 invoked by uid 500); 16 May 2007 18:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17970 invoked by uid 500); 16 May 2007 18:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17955 invoked by uid 99); 16 May 2007 18:03:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:03:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:03:47 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4GI3PFT379792
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 18:03:25 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4GI3KVN3948742
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 20:03:25 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4GI3ANb011355
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 20:03:10 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4GI392N010846
	for <java-user@lucene.apache.org>; Wed, 16 May 2007 20:03:09 +0200
In-Reply-To: <3563fa0d0705160916w5df5d7fcs909e7521badc500a@mail.gmail.com>
Subject: Re: Suspected problem in the QueryParser
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFDD037DFF.F9AA99A5-ON882572DD.006164F0-882572DD.0062E39F@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 16 May 2007 11:00:07 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 16/05/2007 21:03:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> Query           Parsed As                 Matches  Matches
> -----           ---------                 -------- -------
> NOT B           -body:B                     2, 4   <none>
> *:* NOT B       MatchAllDocsQuery -body:B   2, 4   2, 4, 5
> *.* AND NOT B   +MatchAllDocsQuery -body:B  2, 4   2, 4, 5

Last line should be  ":" AND NOT B

>
> Can someone explain why doc 5 is matched for both "*:* NOT B" and
> "*.* AND NOT B"?
>
> Are my Expected Matches incorrect?

Your expectations are correct.
This works for me as expected in both current trunk and
official 2.1, returning only {2,4} in both last cases, so
I suspect it is something in your code...

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 18:16:05 2007
Return-Path: <java-user-return-28105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84184 invoked from network); 16 May 2007 18:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 18:16:04 -0000
Received: (qmail 46840 invoked by uid 500); 16 May 2007 18:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46810 invoked by uid 500); 16 May 2007 18:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46799 invoked by uid 99); 16 May 2007 18:16:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:16:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:15:55 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16386940@mailer.syr.edu>; Wed, 16 May 2007 14:15:34 -0400
Message-ID: <464B4A28.3010106@syr.edu>
Date: Wed, 16 May 2007 14:15:04 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multi-field distinct query
References: <10633050.post@talk.nabble.com> <464B07A2.6020702@syr.edu> <10645416.post@talk.nabble.com>
In-Reply-To: <10645416.post@talk.nabble.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

[Moving the discussion from java-dav to java-user]

Hi Terry,

The index I suggested would be in addition to the one you now have, so
the requirements you mentioned would not be affected (unless of course
you have a single-index requirement :) ).

Given the narrow use for this additional index, you might be able to
address your memory issues either by not storing the "children" field
terms, or by using Lazy Field Loading - see the api docs for
IndexReader.document(int, FieldSelector):

<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/index/IndexReader.html#document(int,%20org.apache.lucene.document.FieldSelector)>

Grant Ingersoll's "Advanced Lucene" talk at ApacheCon Europe earlier
this month mentioned Lazy Field Loading - see the second to last slide
in the slide presentation, available on the Lucene wiki Resources page,
under Presentations:

<http://wiki.apache.org/lucene-java/Resources#head-538bbb76157074df20f3a9a30195c74d68772f4b>

Steve

dontspamterry wrote:
> Hi Steve,
> 
> We originally had documents which were term-centric, i.e. what you described
> - document for the parent and all of its children. We changed it to model a
> single, parent-child relation as one document due to requirements and the
> fact that we were having memory issues for cases where a parent had an
> extremely large number of children (~200,000).
> 
> -Terry
> 
> 
> Steven Rowe wrote:
>> Hi Terry,
>>
>> Why not have another index in which a document has one field for the
>> parent and another field containing all of its children.  An OR query
>> over the "children" field would return you exactly what you want - one
>> document for each distinct parent.
>>
>> Steve
>>
>> dontspamterry wrote:
>>> Hi all,
>>>
>>> I know this whole distinct query has been discussed a bunch of times for
>>> various scenarios because I've been scouring the forums trying to find a
>>> clue as to how I could solve my problem. I'm indexing a large set of
>>> parent-child term relations (~1 million). The number of unique terms is
>>> about ~570,000. Each relation is a document. Each term in a relation
>>> contains all of the term's attributes. Effectively, a term's attributes
>>> will
>>> be duplicated "x" number of times for the "x" number of relations it
>>> participates in. For example, say I have the following term tree:
>>>
>>> A
>>> |--B
>>>     |--E
>>>         |--H
>>>     |--F
>>> |--C
>>>     |--G
>>> |--D
>>>
>>> I would then have documents for:
>>> A->B, A->C, A->D, B->E, (and so forth...)
>>>
>>> For all relations involving A, A's attributes will be duplicated in 3
>>> separate documents.
>>> For all relations involving B, B's attributes will be duplicated in 3
>>> separate documents.
>>> (you get the picture...)
>>>
>>> This index structure works great for queries which traverse up and down
>>> the
>>> tree. However, I have a requirement where I would also like to do a
>>> distinct
>>> query which returns the data for each unique term satisfying the query.
>>> For
>>> example, say I have a query which returns all relations where A or B is
>>> the
>>> parent (that would be 5 documents in total),
>>> but do a distinct on the parent such that I get 2 documents back, one for
>>> A
>>> as the parent (any 1 of the 3 matching docs)  and the other where B is
>>> the
>>> parent (any 1 of the 2 matching docs). For this query, I don't care about
>>> the child information since I'm only interested in retrieving the
>>> distinct
>>> parent terms. This query is analogous to a 'select distinct <set of
>>> parent
>>> term attributes>' . I played around with caching BitSets for the fields
>>> which I'd like to do a distinct on, but given the amount of data, I run
>>> out
>>> of memory. I also took the approach where I retrieve the bitset using a
>>> queryfilter and then process each document id, hashing the field values
>>> on
>>> which I'm doing a distinct to construct my distinct set. Problem with
>>> this
>>> is that I have tree structures where a parent has over 100K children.
>>> Retrieving each doc for this size is too time- and memory- consuming.
>>> Since
>>> I don't really want to return that much data, I thought that I could use
>>> paging. The problem I faced is that I do not know if a distinct value in
>>> the
>>> current query was actually returned in some previous query for a previous
>>> page.
>>>
>>> Sorry for the long description, but wanted to make sure I explained it as
>>> clearly as I could.
>>>
>>> -Terry


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 18:36:19 2007
Return-Path: <java-user-return-28106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89657 invoked from network); 16 May 2007 18:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 18:36:18 -0000
Received: (qmail 94598 invoked by uid 500); 16 May 2007 18:36:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94547 invoked by uid 500); 16 May 2007 18:36:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94536 invoked by uid 99); 16 May 2007 18:36:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:36:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 11:36:10 -0700
Content-class: urn:content-classes:message
Subject: index integrity detection in lucene 2.1.0?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 16 May 2007 14:35:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA56039395@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: index integrity detection in lucene 2.1.0?
Thread-Index: AceX5kM6Aungk35lT/u9RWRmiL8ytAAAlN9Q
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org



I noticed in previous discussion about some index integrity detection
classes that were around in version 1.4 (NoOpDirectory or
NullDirectory). Does anyone know if this in the 2.1.0 release? I didn't
see in 2.1.0 or the contrib folders.

Brian Beard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 19:28:07 2007
Return-Path: <java-user-return-28107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14228 invoked from network); 16 May 2007 19:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 19:28:06 -0000
Received: (qmail 91823 invoked by uid 500); 16 May 2007 19:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91793 invoked by uid 500); 16 May 2007 19:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91780 invoked by uid 99); 16 May 2007 19:28:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 12:28:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dmataxo@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 12:27:58 -0700
Received: by py-out-1112.google.com with SMTP id a25so590753pyi
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 12:27:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=itzzjeIs4cZaHmBcDqMtK/K3cZhxowTEJ1yrp51PsvWPmi6KTFHjLrq7+/2JzvifI1aeftXIzgIgk2x/HAyx0LQBYNehGXhGxEOqGQgzdMl6cPrTt6dRIGX/XRUWdUsM6HTdlkAXzr5WsZMXJXKcmhNGtrlvuRrseEKsRPEoKRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=c1J8ez7as7rZcHrII8z4B+v2BDKvH7nDb9UfAY1lSb6jmwypQynI82hJ+VaA9LirEJCVuQnJSRNh4sahAD2T10qHEkChUYJ4ytrc0A8nte42eFyjR5qAlUehXtSHbA8Ih/eT+r6aY/+44ODLOQmKh8TjGLe+cMqJa8R3zX0Z5NY=
Received: by 10.35.35.17 with SMTP id n17mr15531526pyj.1179343657241;
        Wed, 16 May 2007 12:27:37 -0700 (PDT)
Received: by 10.35.58.19 with HTTP; Wed, 16 May 2007 12:27:37 -0700 (PDT)
Message-ID: <3563fa0d0705161227g721362c6tdf98283b963726e6@mail.gmail.com>
Date: Wed, 16 May 2007 15:27:37 -0400
From: "david m" <dmataxo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suspected problem in the QueryParser
In-Reply-To: <OFDD037DFF.F9AA99A5-ON882572DD.006164F0-882572DD.0062E39F@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3563fa0d0705160916w5df5d7fcs909e7521badc500a@mail.gmail.com>
	 <OFDD037DFF.F9AA99A5-ON882572DD.006164F0-882572DD.0062E39F@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Pilot error... I had a cut & paste error and was indexing "C D" as the
document I said I was indexing as "D".   Sorry about that.

Thanks, david.

On 5/16/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> > Query           Parsed As                 Matches  Matches
> > -----           ---------                 -------- -------
> > NOT B           -body:B                     2, 4   <none>
> > *:* NOT B       MatchAllDocsQuery -body:B   2, 4   2, 4, 5
> > *.* AND NOT B   +MatchAllDocsQuery -body:B  2, 4   2, 4, 5
>
> Last line should be  ":" AND NOT B
>
> >
> > Can someone explain why doc 5 is matched for both "*:* NOT B" and
> > "*.* AND NOT B"?
> >
> > Are my Expected Matches incorrect?
>
> Your expectations are correct.
> This works for me as expected in both current trunk and
> official 2.1, returning only {2,4} in both last cases, so
> I suspect it is something in your code...
>
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 23:45:20 2007
Return-Path: <java-user-return-28108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17630 invoked from network); 16 May 2007 23:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 23:45:19 -0000
Received: (qmail 89983 invoked by uid 500); 16 May 2007 23:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89948 invoked by uid 500); 16 May 2007 23:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89933 invoked by uid 99); 16 May 2007 23:45:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:45:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:45:10 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id A11844A818B
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 09:48:10 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Concept Search
Date: Thu, 17 May 2007 09:44:30 +1000
User-Agent: KMail/1.9.6
References: <648393.53019.qm@web80203.mail.mud.yahoo.com> <464B040B.3020202@syr.edu> <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
In-Reply-To: <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705170944.30616.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 16 May 2007 23:50:55 Erick Erickson wrote:
> That's interesting. I suppose you could add the "synonym" of
> WildAnimals$ whenever you encountered any of the items in your
> list, then when concept searching is called for, search on
> WildAnimals$.
>
> Highlighting might be tricky, but certainly do-able, especially with
> the capabilities of a MemoryIndex......

I'm not even convinced it would be tricky.  I'm fairly sure that if the token 
stream returns two terms over the same span, that they would have the same 
start offset and end offset and highlight identically.

What *would* be tricky is phrase queries since inserting a new term breaks the 
offsets AFAIK.

Although, I suppose you could always store the concepts in a different field 
and not modify the analyser being used for the text itself.

Daniel



-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 23:51:25 2007
Return-Path: <java-user-return-28109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19204 invoked from network); 16 May 2007 23:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 23:51:25 -0000
Received: (qmail 98206 invoked by uid 500); 16 May 2007 23:51:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98169 invoked by uid 500); 16 May 2007 23:51:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98158 invoked by uid 99); 16 May 2007 23:51:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:51:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:51:16 -0700
Received: by ug-out-1314.google.com with SMTP id k40so194504ugc
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 16:50:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z9b01ZWSQNyrjRyv+j/EanUUi9lGnqpKHmbR89f3bzy4lb5NtKiSXYg12vneCeT+8jNEYWJVPPPweKZKKYVbc2mggPtScnUd6gHkYF1VWzBkIY95P/Onp96mHSMxvtCpC8cotCqpx9oXz1hFJ142usi4+FZSOjUxcJWNLKt+O0w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qtEnSGCeeTPTMTmMR4/JR/HGoG0WRzGrs01kBQqUsJWTUbkoSwlnFhZo0veUvz+kcJFUcgGthZNMgeNXOhvpvDiLDuKe+O2drw8BgkKx1ubKsF/xaGTYljTEpJ9p066IH3EjbioGgZ+ssXkTY7rtnzujqj9N2Y1iomSw7gq10tc=
Received: by 10.82.184.2 with SMTP id h2mr5965111buf.1179359455155;
        Wed, 16 May 2007 16:50:55 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 16 May 2007 16:50:55 -0700 (PDT)
Message-ID: <359a92830705161650g4a817bbev229645b2921327bb@mail.gmail.com>
Date: Wed, 16 May 2007 19:50:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concept Search
In-Reply-To: <200705170944.30616.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14638_18602580.1179359455090"
References: <648393.53019.qm@web80203.mail.mud.yahoo.com>
	 <464B040B.3020202@syr.edu>
	 <359a92830705160650j36688fd7g5d13d5e5b8296695@mail.gmail.com>
	 <200705170944.30616.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14638_18602580.1179359455090
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<What *would* be tricky is phrase queries since inserting a new term breaks
the
offsets AFAIK.>>

I thought that that's the point in the Synonym injection
example, setting Term.setPositionIncrement(0) for the injected
token(s). That way. phrase queries work since all of the
injected tokens share the same offset....

But I've been wrong before.

Erick

On 5/16/07, Daniel Noll <daniel@nuix.com> wrote:
>
> On Wednesday 16 May 2007 23:50:55 Erick Erickson wrote:
> > That's interesting. I suppose you could add the "synonym" of
> > WildAnimals$ whenever you encountered any of the items in your
> > list, then when concept searching is called for, search on
> > WildAnimals$.
> >
> > Highlighting might be tricky, but certainly do-able, especially with
> > the capabilities of a MemoryIndex......
>
> I'm not even convinced it would be tricky.  I'm fairly sure that if the
> token
> stream returns two terms over the same span, that they would have the same
> start offset and end offset and highlight identically.
>
> What *would* be tricky is phrase queries since inserting a new term breaks
> the
> offsets AFAIK.
>
> Although, I suppose you could always store the concepts in a different
> field
> and not modify the analyser being used for the text itself.
>
> Daniel
>
>
>
> --
> Daniel Noll
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://nuix.com/                               Fax: +61 2 9212 6902
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14638_18602580.1179359455090--

From java-user-return-28110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 23:53:07 2007
Return-Path: <java-user-return-28110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19821 invoked from network); 16 May 2007 23:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 23:53:07 -0000
Received: (qmail 1055 invoked by uid 500); 16 May 2007 23:53:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1021 invoked by uid 500); 16 May 2007 23:53:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1010 invoked by uid 99); 16 May 2007 23:53:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:53:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:52:57 -0700
Received: by wr-out-0506.google.com with SMTP id 68so389163wra
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 16:52:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rNpTvhBh/qRjHaj+fG8wAe+3JosgjV/5tfn7kXPZpRkdetQhwRCEzqtmctiup5vMzLTaYn6hNxw55bZanjzOKzb3SR4l1hI0FlP3Jqm6piXHIrfZ4urSQz+vxLmjLyODOI8A1MPc/9cdo3FVQBcJsDA21djKPuZluiOFoL+ZdX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=i+sLgMbXCzkK9vdejynQXoWZBC4oiqLgRfWCyyqMtTj8YmUUDj/YaHXFwK3DCaDpreBpdcqLEzEwUFyCqekZKyNJvDZY46TwRiv8kpn30VBlfrM0Qn03XhmrSjWOAi1oL0b2GOqDPyN8gUGAGLFwtAOmE0afU7h5YZZD+ovVDFE=
Received: by 10.90.105.19 with SMTP id d19mr9177444agc.1179359555437;
        Wed, 16 May 2007 16:52:35 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id 45sm3220971wri.2007.05.16.16.52.34;
        Wed, 16 May 2007 16:52:35 -0700 (PDT)
Message-ID: <464B993D.2050407@gmail.com>
Date: Wed, 16 May 2007 19:52:29 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Concept Search
References: <648393.53019.qm@web80203.mail.mud.yahoo.com>
In-Reply-To: <648393.53019.qm@web80203.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There are quite a few ways to do this...you just read in the file to 
create a list of the words and when your query parser sees the right 
keyword either use a TokenFilter that expands to each word or just add 
each word to a BooleanQuery as a Should clause (or expand to a proper 
Lucene syntax string). This is basically just a thesaurus and you 
shouldn't find it too terribly difficult to implement.

- Mark

Charles Patridge wrote:
>   I have looked around on Lucene web site as well as some documentation 
> but have not found anything to do with Concept Search.
>    
>     My definition of Concept Search is as follows:
>   
>   1.  I would have a file (list) of various phrases / N-grams which I 
> would like to Lucene to use as a search basis without having to type in 
> all these phrases manually, and have Lucene return the results as it 
> would normally if a single search query was entered.
>    
>     2.  An example would be - find !Wild_Animals! - where the "!" would 
> indicate that this is a search that would use a file (ie 
> Wild_Animals.txt) and read in the various phrases within this file and perform the 
> search in the corpus for these phrases.
>    
>     3.  The contents of Wild_Animals.txt could look like this:
>   BUFFALO
>   BEAR
>   MOOSE
>   COYOTE
>   WOLF
>   MOUNTAIN GOAT
>   MOUNTAIN SHEEP
>   DALL SHEEP
>   DEER
>   KODIAK BEAR
>   BROWN BEAR
>   BLACK BEAR
>   etc etc etc
>    
>     4.  Is my idea of a Concept Search feasible / doable???  If so, can 
> you point me to any documentation that exists whereby this could be done 
> within Lucene
>    
>     Please send any info you have on this to me - 
> Charles_S_Patridge@prodigy.net
>   
>   Thank you in advance for your time and efforts.
>
>
>
> Charles S Patridge - PDPC, Ltd.
> 172 Monce Road - Burlington, CT 06013 USA
> Email: Charles_S_Patridge@prodigy.net
> Web: http://www.sconsig.com
> Web: http://pages.prodigy.net/charles_s_patridge
> Web: http://www.munic.state.ct.us/burlington
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 16 23:54:41 2007
Return-Path: <java-user-return-28111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20339 invoked from network); 16 May 2007 23:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 May 2007 23:54:41 -0000
Received: (qmail 3787 invoked by uid 500); 16 May 2007 23:54:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3761 invoked by uid 500); 16 May 2007 23:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3750 invoked by uid 99); 16 May 2007 23:54:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:54:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 16:54:21 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7C83F4A8175
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 09:57:24 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Concept Search
Date: Thu, 17 May 2007 09:53:44 +1000
User-Agent: KMail/1.9.6
References: <648393.53019.qm@web80203.mail.mud.yahoo.com> <200705170944.30616.daniel@nuix.com> <359a92830705161650g4a817bbev229645b2921327bb@mail.gmail.com>
In-Reply-To: <359a92830705161650g4a817bbev229645b2921327bb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705170953.44325.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 17 May 2007 09:50:55 Erick Erickson wrote:
> I thought that that's the point in the Synonym injection
> example, setting Term.setPositionIncrement(0) for the injected
> token(s). That way. phrase queries work since all of the
> injected tokens share the same offset....
>
> But I've been wrong before.

Ah, I see.  A feature I haven't toyed with just yet.

That's rather nice. :-)

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 05:39:48 2007
Return-Path: <java-user-return-28112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4827 invoked from network); 17 May 2007 05:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 05:39:46 -0000
Received: (qmail 11976 invoked by uid 500); 17 May 2007 05:39:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11513 invoked by uid 500); 17 May 2007 05:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11499 invoked by uid 99); 17 May 2007 05:39:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 22:39:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aleung2@shaw.ca designates 24.71.223.10 as permitted sender)
Received: from [24.71.223.10] (HELO pd3mo1so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 22:39:38 -0700
Received: from pd3mr1so.prod.shaw.ca
 (pd3mr1so-qfe3.prod.shaw.ca [10.0.141.177]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JI6002737OKIT90@l-daemon> for java-user@lucene.apache.org;
 Wed, 16 May 2007 23:38:44 -0600 (MDT)
Received: from pn2ml9so.prod.shaw.ca ([10.0.121.7])
 by pd3mr1so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JI600MCE7OK2601@pd3mr1so.prod.shaw.ca> for
 java-user@lucene.apache.org; Wed, 16 May 2007 23:38:44 -0600 (MDT)
Received: from [10.1.242.20] ([24.85.131.123])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JI600CW67OJ6E60@l-daemon> for java-user@lucene.apache.org;
 Wed, 16 May 2007 23:38:44 -0600 (MDT)
Date: Wed, 16 May 2007 22:38:41 -0700
From: Arnold Leung <aleung2@shaw.ca>
Subject: snowball (english) and filenames
To: java-user@lucene.apache.org
Message-id: <84230FA9-25EB-4B94-AD79-FA2E7C17A451@shaw.ca>
MIME-version: 1.0 (Apple Message framework v752.2)
X-Mailer: Apple Mail (2.752.2)
Content-type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Does Snowball (English) support "filenames?"

ex. Authenicate.dll does not return a "hit" if the keyword  
"authenticate" (without ".dll") is used.

("authenticate*" or authenticate.dll works though)

Is there anyway to get around this?  How come the Snowball demo  
(http://snowball.tartarus.org/demo.php) seems to work?

ex.
I entered the following in the textbox:

authenticate.dll
authenticate
authentication

and I got back:

authenticate -> authent
dll -> dll
authenticate -> authent
authentication -> authent

Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 06:04:14 2007
Return-Path: <java-user-return-28113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8808 invoked from network); 17 May 2007 06:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 06:04:13 -0000
Received: (qmail 47106 invoked by uid 500); 17 May 2007 06:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47075 invoked by uid 500); 17 May 2007 06:04:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47064 invoked by uid 99); 17 May 2007 06:04:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:04:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:04:04 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4H63htU025942
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 06:03:43 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4H63hER4165690
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 08:03:43 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4H63gF7020437
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 08:03:42 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4H63gpK020434
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 08:03:42 +0200
In-Reply-To: <84230FA9-25EB-4B94-AD79-FA2E7C17A451@shaw.ca>
Subject: Re: snowball (english) and filenames
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFE16B5D4A.305742EC-ON882572DE.0020BA5C-882572DE.0020FADC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 16 May 2007 23:00:13 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 17/05/2007 09:03:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

If you enter a.b.c.d.e.f.g.h to that demo you'll see that
the demo simply breaks the input text on '.' - that has
nothing to do with filenames.

Arnold Leung <aleung2@shaw.ca> wrote on 16/05/2007 22:38:41:

> Does Snowball (English) support "filenames?"
>
> ex. Authenicate.dll does not return a "hit" if the keyword
> "authenticate" (without ".dll") is used.
>
> ("authenticate*" or authenticate.dll works though)
>
> Is there anyway to get around this?  How come the Snowball demo
> (http://snowball.tartarus.org/demo.php) seems to work?
>
> ex.
> I entered the following in the textbox:
>
> authenticate.dll
> authenticate
> authentication
>
> and I got back:
>
> authenticate -> authent
> dll -> dll
> authenticate -> authent
> authentication -> authent
>
> Thanks in advance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 06:10:58 2007
Return-Path: <java-user-return-28114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9819 invoked from network); 17 May 2007 06:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 06:10:58 -0000
Received: (qmail 56521 invoked by uid 500); 17 May 2007 06:10:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56484 invoked by uid 500); 17 May 2007 06:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56473 invoked by uid 99); 17 May 2007 06:10:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:10:57 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:10:50 -0700
Received: by an-out-0708.google.com with SMTP id b8so103745ana
        for <java-user@lucene.apache.org>; Wed, 16 May 2007 23:10:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=JGzwZKTdOs1yj/hmKHICl8Ug/Xq3GWKYsutvUzR4jnn0GC7+EamKhC8/tyj5u8nUjaC6U5taISX1E0uowTBnvqm85rPNzIplVbfjjyPCqzt5oi4DDAesmYEDvfnOaSK64t4aAnJdw79LOwPcAxOJrIn87rt8BC1lcHFmtQ2EA0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JCcGxh7EkFS8g+QMhCxQvy4usQNSWTj8lzWWtOQZL8zWVTT4bp/CX/+3Hn1KYx78uoiD5lcOybvENs9jY1WdKIDql9UyP2omtT0t2rTe5hpWvRTt61puXlLZahbP9RKe/9jFi7sRVqt0JchVSWlBAoP4vBGM5cboosBXw2yblbw=
Received: by 10.100.165.9 with SMTP id n9mr59430ane.1179382229513;
        Wed, 16 May 2007 23:10:29 -0700 (PDT)
Received: by 10.100.43.4 with HTTP; Wed, 16 May 2007 23:10:29 -0700 (PDT)
Message-ID: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
Date: Wed, 16 May 2007 23:10:29 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Field.Store.Compress - does it improve performance of document reads?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37291_5269706.1179382229460"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37291_5269706.1179382229460
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am currently exploring how to solve performance problems I encounter with
Lucene document reads.

We have amongst other fields one field (default) storing all searchable
fields.  This field can become of considerable size since we are  indexing
documents and  store the content for display within results.

I noticed that the read can be very expensive.  I wonder now if it would
make sense to add this field as Field.Store.Compress to the index.  Can
someone tell me if this would speed up the document read or if this is
something only interesting for saving space.

Thanks in advance,

Andreas

------=_Part_37291_5269706.1179382229460--

From java-user-return-28115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 06:19:38 2007
Return-Path: <java-user-return-28115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12199 invoked from network); 17 May 2007 06:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 06:19:37 -0000
Received: (qmail 65677 invoked by uid 500); 17 May 2007 06:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65639 invoked by uid 500); 17 May 2007 06:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65628 invoked by uid 99); 17 May 2007 06:19:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:19:37 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 May 2007 23:19:30 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l4H6J1UE019998
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 09:19:01 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m5h9idxu; 17 May 2007 09:18:00 +0300
Message-ID: <464BF396.1080603@teamware.com>
Date: Thu, 17 May 2007 09:17:58 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <464953A9.5030004@anu.edu.au> <7fa3c1080705150459s7a06d83dp44880c7708f759c0@mail.gmail.com> <200705160907.05468.daniel@nuix.com>
In-Reply-To: <200705160907.05468.daniel@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 17 May 2007 09:19:01 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> On Tuesday 15 May 2007 21:59:31 Narednra Singh Panwar wrote:
>> try using -Xmx option with your Application. and specify maximum/ minimum
>> memory for your Application.
> 
> It's funny how a lot of people instantly suggest this.  What if it isn't 
> possible?  There was a situation a while back where I said I had allocated it 
> 1.8GB, and someone *still* recommended this option. :-)

Yes, and if it is a memory leak, it only prolongs the terminal illness :)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 07:08:03 2007
Return-Path: <java-user-return-28116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19674 invoked from network); 17 May 2007 07:08:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 07:08:02 -0000
Received: (qmail 16301 invoked by uid 500); 17 May 2007 07:08:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16267 invoked by uid 500); 17 May 2007 07:08:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16256 invoked by uid 99); 17 May 2007 07:08:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 00:08:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of james@bittorrent.com designates 207.227.243.170 as permitted sender)
Received: from [207.227.243.170] (HELO mail.bittorrent.com) (207.227.243.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 00:07:54 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.bittorrent.com (Postfix) with ESMTP id EA7171758002
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 02:07:33 -0500 (CDT)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: 0.783
X-Spam-Level: 
Received: from mail.bittorrent.com ([127.0.0.1])
	by localhost (mail.bittorrent.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Z1MAT7RYpLp3 for <java-user@lucene.apache.org>;
	Thu, 17 May 2007 02:07:32 -0500 (CDT)
Received: from [192.168.0.133] (c-24-5-71-234.hsd1.ca.comcast.net [24.5.71.234])
	by mail.bittorrent.com (Postfix) with ESMTP id 028D41758001
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 02:07:31 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <B6FDF011-BC5D-401E-B2C0-75A3E0824E90@bittorrent.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: James O'Rourke <james@bittorrent.com>
Subject: date window
Date: Thu, 17 May 2007 00:07:25 -0700
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.783 tagged_above=-10 required=6.6
	tests=[AWL=-0.610, BAYES_00=-2.599, RCVD_IN_NJABL_DUL=1.946,
	RCVD_IN_SORBS_DUL=2.046]

Hi All,

I've been thinking about this problem for some time now. I'm trying  
to figure out a way to store date windows in lucene so that I can  
easily filter as follows.

A particular document can have several date windows.
Give a specific date, only return those documents where that date  
falls within at least one of those windows.

 From what I can see, the only way I can think of doing it is to  
create a special field format and create a custom filter. The filter  
isn't that useful for caching though, because every query will have   
new date (essentially NOW())

Also, note that there are multiple windows here for a single  
document, we can't just search between min start and max end.

Ideas from those more familiar with lucene would be greatly appreciated.

James


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 08:02:17 2007
Return-Path: <java-user-return-28117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44325 invoked from network); 17 May 2007 08:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 08:02:16 -0000
Received: (qmail 79492 invoked by uid 500); 17 May 2007 08:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79467 invoked by uid 500); 17 May 2007 08:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79456 invoked by uid 99); 17 May 2007 08:02:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 01:02:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 01:02:07 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id l4H81kPN073286
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 10:01:46 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
Date: Thu, 17 May 2007 10:01:45 +0200
User-Agent: KMail/1.8.2
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
In-Reply-To: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705171001.45912.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> I am currently exploring how to solve performance problems I encounter with
> Lucene document reads.
> 
> We have amongst other fields one field (default) storing all searchable
> fields.  This field can become of considerable size since we are  indexing
> documents and  store the content for display within results.
> 
> I noticed that the read can be very expensive.  I wonder now if it would
> make sense to add this field as Field.Store.Compress to the index.  Can
> someone tell me if this would speed up the document read or if this is
> something only interesting for saving space.

I have not tried the compression yet, but in my experience a good way
to reduce the costs of document reads from a disk is by reading them
in document number order whenever possible. In this way one saves
on the disk head seeks.
Compression should actually help reducing the costs of disk head seeks
even more.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 09:03:34 2007
Return-Path: <java-user-return-28118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54958 invoked from network); 17 May 2007 09:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 09:03:33 -0000
Received: (qmail 32513 invoked by uid 500); 17 May 2007 09:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31519 invoked by uid 500); 17 May 2007 09:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31508 invoked by uid 99); 17 May 2007 09:03:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 02:03:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssharma@chambal.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 02:03:25 -0700
Received: by wx-out-0506.google.com with SMTP id i29so449346wxd
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 02:03:03 -0700 (PDT)
Received: by 10.78.97.7 with SMTP id u7mr22589hub.1179392583019;
        Thu, 17 May 2007 02:03:03 -0700 (PDT)
Received: by 10.78.200.4 with HTTP; Thu, 17 May 2007 02:03:02 -0700 (PDT)
Message-ID: <90530f7c0705170203j173e6d46n871f346843225073@mail.gmail.com>
Date: Thu, 17 May 2007 14:33:02 +0530
From: "Sawan Sharma" <ssharma@chambal.com>
To: java-user@lucene.apache.org
Subject: Group the search results by a given field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21545_22719426.1179392582978"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21545_22719426.1179392582978
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I was wondering - is it possible to search and group the results by a
given field?

For example, I have an index with several million records. Most of
them are different Features of the same ID.

I'd love to be able to do.. groupby=ID or something like that
in the results, and provide the ID as a clickable link to see
all the Features of that ID.

I have used HitCollector class to accomplish this goal. In Collect method I
have used following algo...

Collect()
{
    if Searcher.Doc(doc_id).get(ID) is not exist in HashKey then
                   Add Searcher.Doc(doc_id).get(ID) as new HashKey in hash
table and assign value = 1
    else
                   increment HashKey( Searcher.Doc(doc_id).get(ID)) value
with 1
}

But, it depends on HitCount. As soon as I get more hits it takes more time
and my search performance is degrade.

How it can be done with best performance..?

Any ideas?

Sawan

------=_Part_21545_22719426.1179392582978--

From java-user-return-28119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 10:09:24 2007
Return-Path: <java-user-return-28119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75639 invoked from network); 17 May 2007 10:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 10:09:24 -0000
Received: (qmail 17821 invoked by uid 500); 17 May 2007 10:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17699 invoked by uid 500); 17 May 2007 10:09:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17645 invoked by uid 99); 17 May 2007 10:09:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 03:09:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [218.249.153.227] (HELO mail.yikey.com) (218.249.153.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 03:09:05 -0700
Subject: about to get 
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7986B.A5AB1957"
Date: Thu, 17 May 2007 18:10:28 +0800
Content-class: urn:content-classes:message
Message-ID: <28C622BA8A7A474589924466E6303BE00CC495@EXCH01.yikey.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: about to get 
Thread-Index: AceYa5gwPupZR91TSNKyRWda9V7+uQ==
From: =?gb2312?B?za/Qob78?= <tongxiaojun@yikey.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7986B.A5AB1957
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

Hi lucener:

I am want get the TermFreqVector =A1=A3but I must get docNum first.

titleVector =3D reader.getTermFreqVector(docNum, "title");

=20

but I can=A1=AFt get Docnum by lucene Document.

how can I get the docNum use Document object?=20

Like this getTermFreqVector(doc,=A1=B1title=A1=B1);

=20

xiaojun tong

=20

010-64489518-613

tongxiaojun@msn.com

www.feedsky.com

=20


------_=_NextPart_001_01C7986B.A5AB1957--

From java-user-return-28120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 11:40:53 2007
Return-Path: <java-user-return-28120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8353 invoked from network); 17 May 2007 11:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 11:40:52 -0000
Received: (qmail 58613 invoked by uid 500); 17 May 2007 11:40:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58577 invoked by uid 500); 17 May 2007 11:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58562 invoked by uid 99); 17 May 2007 11:40:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 04:40:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 04:40:43 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 9DECE109F2B
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 04:39:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200705171001.45912.paul.elschot@xs4all.nl>
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com> <200705171001.45912.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
Date: Thu, 17 May 2007 07:39:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I haven't tried compression either.  I know there was some talk a  
while ago about deprecating, but that hasn't happened.  The current  
implementation yields the highest level of compression.  You might  
find better results by compressing in your application and storing as  
a binary field, thus giving you more control over CPU used.  This is  
our current recommendation for dealing w/ compression.

If you are not actually displaying that field, you should look into  
the FieldSelector API (via IndexReader).  It allows you to lazily  
load fields or skip them all together and can yield a pretty  
significant savings when it comes to loading documents.   
FieldSelector is available in 2.1.

-Grant

On May 17, 2007, at 4:01 AM, Paul Elschot wrote:

> On Thursday 17 May 2007 08:10, Andreas Guther wrote:
>> I am currently exploring how to solve performance problems I  
>> encounter with
>> Lucene document reads.
>>
>> We have amongst other fields one field (default) storing all  
>> searchable
>> fields.  This field can become of considerable size since we are   
>> indexing
>> documents and  store the content for display within results.
>>
>> I noticed that the read can be very expensive.  I wonder now if it  
>> would
>> make sense to add this field as Field.Store.Compress to the  
>> index.  Can
>> someone tell me if this would speed up the document read or if  
>> this is
>> something only interesting for saving space.
>
> I have not tried the compression yet, but in my experience a good way
> to reduce the costs of document reads from a disk is by reading them
> in document number order whenever possible. In this way one saves
> on the disk head seeks.
> Compression should actually help reducing the costs of disk head seeks
> even more.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 11:44:11 2007
Return-Path: <java-user-return-28121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9601 invoked from network); 17 May 2007 11:44:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 11:44:10 -0000
Received: (qmail 62221 invoked by uid 500); 17 May 2007 11:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62185 invoked by uid 500); 17 May 2007 11:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62174 invoked by uid 99); 17 May 2007 11:44:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 04:44:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 04:44:01 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 26C097FA7
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 04:43:40 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <28C622BA8A7A474589924466E6303BE00CC495@EXCH01.yikey.com>
References: <28C622BA8A7A474589924466E6303BE00CC495@EXCH01.yikey.com>
Content-Type: text/plain; charset=GB2312; delsp=yes; format=flowed
Message-Id: <C841C0B2-E4D4-41FB-B477-C3B9D2A7261A@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: about to get 
Date: Thu, 17 May 2007 07:43:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You can get it from a Hits object (see the id() method) or you can =20
iterate over the docs from 0 to maxDoc -1 (skipping deleted docs)

I have some code at http://www.cnlp.org/apachecon2005/ that shows =20
various usages for Term Vector.  The Lucene in Action book has some =20
good examples as well.

-Grant

On May 17, 2007, at 6:10 AM, =CD=AF=D0=A1=BE=FC wrote:

> Hi lucener:
>
> I am want get the TermFreqVector =A1=A3but I must get docNum first.
>
> titleVector =3D reader.getTermFreqVector(docNum, "title");
>
>
>
> but I can=A1=AFt get Docnum by lucene Document.
>
> how can I get the docNum use Document object?
>
> Like this getTermFreqVector(doc,=A1=B1title=A1=B1);
>
>
>
> xiaojun tong
>
>
>
> 010-64489518-613
>
> tongxiaojun@msn.com
>
> www.feedsky.com
>
>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/=20
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 12:49:44 2007
Return-Path: <java-user-return-28122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37034 invoked from network); 17 May 2007 12:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 12:49:43 -0000
Received: (qmail 56119 invoked by uid 500); 17 May 2007 12:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56092 invoked by uid 500); 17 May 2007 12:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56081 invoked by uid 99); 17 May 2007 12:49:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 05:49:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.209.148.227] (HELO dd1618.kasserver.com) (81.209.148.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 05:49:35 -0700
Received: from [192.168.32.109] (218.102.77.83.cust.bluewin.ch [83.77.102.218])
	by dd1618.kasserver.com (Postfix) with ESMTP id 354AF98F48
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 14:49:13 +0200 (CEST)
Message-ID: <464C4F4B.1080708@rssowl.org>
Date: Thu, 17 May 2007 14:49:15 +0200
From: Benjamin Pasero <bpasero@rssowl.org>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: How to ignore scoring for a Query?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have two different use-cases for my queries. For the first,
performance is not too critical
and I want to sort the results by relevance (score). The second however,
is performance critical,
but the score for each result is not interesting. I guess, if it was
possible to disable scoring
for the query, I could improve performance (note that omitNorms on a
Field is not an option, due
to the first use case).

Is there a straightforward way to disable scoring for a query (its a
BooleanQuery btw with some
clauses, which can be any other query).

Thanks,
Ben


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 13:38:44 2007
Return-Path: <java-user-return-28123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62056 invoked from network); 17 May 2007 13:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 13:38:43 -0000
Received: (qmail 30516 invoked by uid 500); 17 May 2007 13:38:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30485 invoked by uid 500); 17 May 2007 13:38:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30474 invoked by uid 99); 17 May 2007 13:38:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:38:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:38:35 -0700
Received: by ug-out-1314.google.com with SMTP id k40so283782ugc
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 06:38:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DOyLzqtPRbTzBoQcfsXUi2VaNNCxJJxp/T6J744BoGPoP5s0mXLi/DOQdt+9rqY+Zv+prNF2YItPpWhfGZsi2rYij4Htd7ZyBKzUPI32kTd7JpxsDKpfXbL8yrFoPDKIFjcc/E6sE0uc9XC/OFGU9aQu0pWbnj/HMEjZodstkXQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NniqYF/jShrCV9QlSks2NhtjrxWmH6mK5wKB6DxzI71KKZn4mwqhcg1TUN4DhJekI4Ldi0il1i1OQ+gt5Rkp3vUCCDTKxIsuQN6sFooEe/P5qYnsiYZKKe1TeG/6bV0IqO6qwFtdFDY1ooVy71yOCwuaT4RynDhhHn4PxkapKE0=
Received: by 10.82.176.3 with SMTP id y3mr687315bue.1179409093505;
        Thu, 17 May 2007 06:38:13 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 17 May 2007 06:38:13 -0700 (PDT)
Message-ID: <359a92830705170638i4c046010ld126618909bf12d2@mail.gmail.com>
Date: Thu, 17 May 2007 09:38:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Group the search results by a given field
In-Reply-To: <90530f7c0705170203j173e6d46n871f346843225073@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18792_27819753.1179409093054"
References: <90530f7c0705170203j173e6d46n871f346843225073@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18792_27819753.1179409093054
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There has been significant discussion on this topic (way more than
I can remember clearly) on the mail thread, but as I remember it's
been referred to as "facet" or "faceted". I think you would get a lot
of info searching for these terms at...

http://www.gossamer-threads.com/lists/lucene/java-user/

Best
Erick


On 5/17/07, Sawan Sharma <ssharma@chambal.com> wrote:
>
> Hi All,
>
> I was wondering - is it possible to search and group the results by a
> given field?
>
> For example, I have an index with several million records. Most of
> them are different Features of the same ID.
>
> I'd love to be able to do.. groupby=ID or something like that
> in the results, and provide the ID as a clickable link to see
> all the Features of that ID.
>
> I have used HitCollector class to accomplish this goal. In Collect method
> I
> have used following algo...
>
> Collect()
> {
>     if Searcher.Doc(doc_id).get(ID) is not exist in HashKey then
>                    Add Searcher.Doc(doc_id).get(ID) as new HashKey in hash
> table and assign value = 1
>     else
>                    increment HashKey( Searcher.Doc(doc_id).get(ID)) value
> with 1
> }
>
> But, it depends on HitCount. As soon as I get more hits it takes more time
> and my search performance is degrade.
>
> How it can be done with best performance..?
>
> Any ideas?
>
> Sawan
>

------=_Part_18792_27819753.1179409093054--

From java-user-return-28124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 13:41:28 2007
Return-Path: <java-user-return-28124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62749 invoked from network); 17 May 2007 13:41:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 13:41:27 -0000
Received: (qmail 35092 invoked by uid 500); 17 May 2007 13:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35059 invoked by uid 500); 17 May 2007 13:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35048 invoked by uid 99); 17 May 2007 13:41:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:41:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:41:18 -0700
Received: by ug-out-1314.google.com with SMTP id k40so284234ugc
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 06:40:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z+1z5w4dI+BomkWZo/WV7EwPlQQqUHOQCSlnSipWxz8BfoAZFlqodGau16NigvqxmxqQgq/8xupbwu6ubldR/rfEPAsh1SX+KjvxKeSY1BwVw/fLc/RuvFvyLpDpUXXWl8gxTmPErMHNgLHrqxEuiQRMdAMSJT9Ha3KfR1m979w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sdGjsKtK7WsdlWUL0HFZvz7ifsQ2IzdOTy7laD4YaDy2FZl2KRRSNsvQG5TORDHrAAkMdzF2QBeKeBUYhCAQ3SDgEzkEhIJEs29D+PhLC12hAGC8h6dmIFLg9l1ftjxdJW1mFvrFjpQ8zHpm2VhUIJCcQF3Is1qtlORz8h0p3+M=
Received: by 10.82.126.5 with SMTP id y5mr607054buc.1179409256224;
        Thu, 17 May 2007 06:40:56 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 17 May 2007 06:40:56 -0700 (PDT)
Message-ID: <359a92830705170640u521f54f5ibbb88150a2314793@mail.gmail.com>
Date: Thu, 17 May 2007 09:40:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18820_21246069.1179409256171"
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
	 <200705171001.45912.paul.elschot@xs4all.nl>
	 <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18820_21246069.1179409256171
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Some time ago I posted the results in my peculiar app of using
FieldSelector, and it gave dramatic improvements in my case (a
factor of about 10). I suspect much of that was peculiar to my
index design, so your mileage may vary.

See  a thread titled...

*Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+....*


Best
Erick

On 5/17/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> I haven't tried compression either.  I know there was some talk a
> while ago about deprecating, but that hasn't happened.  The current
> implementation yields the highest level of compression.  You might
> find better results by compressing in your application and storing as
> a binary field, thus giving you more control over CPU used.  This is
> our current recommendation for dealing w/ compression.
>
> If you are not actually displaying that field, you should look into
> the FieldSelector API (via IndexReader).  It allows you to lazily
> load fields or skip them all together and can yield a pretty
> significant savings when it comes to loading documents.
> FieldSelector is available in 2.1.
>
> -Grant
>
> On May 17, 2007, at 4:01 AM, Paul Elschot wrote:
>
> > On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> >> I am currently exploring how to solve performance problems I
> >> encounter with
> >> Lucene document reads.
> >>
> >> We have amongst other fields one field (default) storing all
> >> searchable
> >> fields.  This field can become of considerable size since we are
> >> indexing
> >> documents and  store the content for display within results.
> >>
> >> I noticed that the read can be very expensive.  I wonder now if it
> >> would
> >> make sense to add this field as Field.Store.Compress to the
> >> index.  Can
> >> someone tell me if this would speed up the document read or if
> >> this is
> >> something only interesting for saving space.
> >
> > I have not tried the compression yet, but in my experience a good way
> > to reduce the costs of document reads from a disk is by reading them
> > in document number order whenever possible. In this way one saves
> > on the disk head seeks.
> > Compression should actually help reducing the costs of disk head seeks
> > even more.
> >
> > Regards,
> > Paul Elschot
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18820_21246069.1179409256171--

From java-user-return-28125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 13:44:02 2007
Return-Path: <java-user-return-28125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64000 invoked from network); 17 May 2007 13:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 13:44:01 -0000
Received: (qmail 41589 invoked by uid 500); 17 May 2007 13:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41554 invoked by uid 500); 17 May 2007 13:43:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41543 invoked by uid 99); 17 May 2007 13:43:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:43:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 06:43:52 -0700
Received: by an-out-0708.google.com with SMTP id b8so129624ana
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 06:43:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q/TrxClP+jhG3aJQiiuoOQ8WdAziJn9ERx++wTgNm5ZbLR/OqRd9EtXpubUbzLZtdcNq3pSbRUtl9BdaZcFubhD2O0wigjd4U07moSI+n1hR6fDZxFanhiWGRmbBsm21Lb+BTSHO0TXwJSUTCMmrAR68N2uhDWe7Bhz+7LPIdGI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tlUIc1/ACFFspwXG2mcwMlOUldcNR2jZjXrQHlY3Td36NE2NMSGwGVa8C9mhg7vzvDiNDAEpQojwOHJ78+XOaNuag3s+iIOAtuhuisKti3OfqodSZ3U+0rlhXTopzysv+zt2y26f2swDEVT2LDp1W3IL2kUilbvbxiBO28oTP/4=
Received: by 10.100.253.12 with SMTP id a12mr279157ani.1179409410411;
        Thu, 17 May 2007 06:43:30 -0700 (PDT)
Received: by 10.100.43.4 with HTTP; Thu, 17 May 2007 06:43:30 -0700 (PDT)
Message-ID: <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
Date: Thu, 17 May 2007 06:43:30 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42068_23504604.1179409410340"
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
	 <200705171001.45912.paul.elschot@xs4all.nl>
	 <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42068_23504604.1179409410340
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am actually using the FieldSelector and unless I did something wrong it
did not provide me any load performance improvements which was surprising to
me and disappointing at the same time.  The only difference I could see was
when I returned for all fields a NO_LOAD which from my understanding is the
same as skipping over the document.

Right now I am looking into fragmentation problems of my huge index files.
I am de-fragmenting the hard drive to see if this brings any read
performance improvements.

I am also wondering if the FieldCache as discussed in
http://www.gossamer-threads.com/lists/lucene/general/28252 would help
improve the situation.

Andreas

On 5/17/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> I haven't tried compression either.  I know there was some talk a
> while ago about deprecating, but that hasn't happened.  The current
> implementation yields the highest level of compression.  You might
> find better results by compressing in your application and storing as
> a binary field, thus giving you more control over CPU used.  This is
> our current recommendation for dealing w/ compression.
>
> If you are not actually displaying that field, you should look into
> the FieldSelector API (via IndexReader).  It allows you to lazily
> load fields or skip them all together and can yield a pretty
> significant savings when it comes to loading documents.
> FieldSelector is available in 2.1.
>
> -Grant
>
> On May 17, 2007, at 4:01 AM, Paul Elschot wrote:
>
> > On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> >> I am currently exploring how to solve performance problems I
> >> encounter with
> >> Lucene document reads.
> >>
> >> We have amongst other fields one field (default) storing all
> >> searchable
> >> fields.  This field can become of considerable size since we are
> >> indexing
> >> documents and  store the content for display within results.
> >>
> >> I noticed that the read can be very expensive.  I wonder now if it
> >> would
> >> make sense to add this field as Field.Store.Compress to the
> >> index.  Can
> >> someone tell me if this would speed up the document read or if
> >> this is
> >> something only interesting for saving space.
> >
> > I have not tried the compression yet, but in my experience a good way
> > to reduce the costs of document reads from a disk is by reading them
> > in document number order whenever possible. In this way one saves
> > on the disk head seeks.
> > Compression should actually help reducing the costs of disk head seeks
> > even more.
> >
> > Regards,
> > Paul Elschot
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42068_23504604.1179409410340--

From java-user-return-28126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 15:21:30 2007
Return-Path: <java-user-return-28126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94275 invoked from network); 17 May 2007 15:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 15:21:29 -0000
Received: (qmail 35878 invoked by uid 500); 17 May 2007 15:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35251 invoked by uid 500); 17 May 2007 15:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35240 invoked by uid 99); 17 May 2007 15:21:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 08:21:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 08:21:20 -0700
Received: from dorthy ([71.248.137.109])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JI600158YMIEIBC@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Thu, 17 May 2007 10:20:43 -0500 (CDT)
Date: Thu, 17 May 2007 10:21:08 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Indexing Open Office documents
To: <java-user@lucene.apache.org>
Message-id: <000801c79896$feea9010$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
 <200705171001.45912.paul.elschot@xs4all.nl>
 <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
 <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Anyone know how to add OpenOffice document to a Lucene index? Is there a 
parser for OpenOffice?

thanks in advance

jim s. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 17:23:39 2007
Return-Path: <java-user-return-28127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48936 invoked from network); 17 May 2007 17:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 17:23:38 -0000
Received: (qmail 16741 invoked by uid 500); 17 May 2007 17:23:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16708 invoked by uid 500); 17 May 2007 17:23:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16697 invoked by uid 99); 17 May 2007 17:23:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 10:23:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 10:23:29 -0700
Received: by mu-out-0910.google.com with SMTP id i10so347423mue
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 10:23:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XS7ZsQLiY4hLJDXDYHJcnnozkaEfxEUAQs9kwUxhl42iOoWmmenV6N3HfKZ8JvI/P9InAPwd4nUZ2IfAdFR9sZw7TBTLj8B9UPLMcT5YuV47/qnRzYpNNFpl2ndWHpySs/KIhX3N3A3aPe9A/AEXd1mkg1zi/U8k4hGtJdaG0O8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EEfQJEbRJdujulFN3XW13InK3CWWAcsdJbW6SYy+8nkBbEYGUSgbQjSZY5fgf9CvNBHSvaegPCPRIUqMDYiCCPOXABB7Cy1S+2EMcU0DJ3X0mNK6NDkG70sYEg0qyZ4s2HjgYdYnGX7DBKew67EJeSeFZrac05Bh2TfBUoDiad4=
Received: by 10.82.180.17 with SMTP id c17mr1093961buf.1179422587768;
        Thu, 17 May 2007 10:23:07 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 17 May 2007 10:23:07 -0700 (PDT)
Message-ID: <359a92830705171023y677a4302h90e974e343dfb52d@mail.gmail.com>
Date: Thu, 17 May 2007 13:23:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20897_14878494.1179422587709"
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
	 <200705171001.45912.paul.elschot@xs4all.nl>
	 <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
	 <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20897_14878494.1179422587709
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hmmmm. Now that I re-read your first mail, something else
suggests itself. You stated:

"We have amongst other fields one field (default) storing all searchable
fields".

Do you need to store this field at all? You can search fields that are
indexed but NOT stored. I've used something of the same technique
where I index lots of different fields in the same search field so my
queries aren't as complex, but return various stored fields to the
user for display purposes. Often these latter fields are stored but
NOT indexed.

It might also be useful if you'd post some of your relevant code
snippets, perhaps some innocent line is messing you up... Are you,
perhaps, calling get() in a HitCollector? Or iterating through
many documents with a Hits object? Or.....

Best
Erick

On 5/17/07, Andreas Guther <andreas.guther@gmail.com> wrote:
>
> I am actually using the FieldSelector and unless I did something wrong it
> did not provide me any load performance improvements which was surprising
> to
> me and disappointing at the same time.  The only difference I could see
> was
> when I returned for all fields a NO_LOAD which from my understanding is
> the
> same as skipping over the document.
>
> Right now I am looking into fragmentation problems of my huge index files.
> I am de-fragmenting the hard drive to see if this brings any read
> performance improvements.
>
> I am also wondering if the FieldCache as discussed in
> http://www.gossamer-threads.com/lists/lucene/general/28252 would help
> improve the situation.
>
> Andreas
>
> On 5/17/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > I haven't tried compression either.  I know there was some talk a
> > while ago about deprecating, but that hasn't happened.  The current
> > implementation yields the highest level of compression.  You might
> > find better results by compressing in your application and storing as
> > a binary field, thus giving you more control over CPU used.  This is
> > our current recommendation for dealing w/ compression.
> >
> > If you are not actually displaying that field, you should look into
> > the FieldSelector API (via IndexReader).  It allows you to lazily
> > load fields or skip them all together and can yield a pretty
> > significant savings when it comes to loading documents.
> > FieldSelector is available in 2.1.
> >
> > -Grant
> >
> > On May 17, 2007, at 4:01 AM, Paul Elschot wrote:
> >
> > > On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> > >> I am currently exploring how to solve performance problems I
> > >> encounter with
> > >> Lucene document reads.
> > >>
> > >> We have amongst other fields one field (default) storing all
> > >> searchable
> > >> fields.  This field can become of considerable size since we are
> > >> indexing
> > >> documents and  store the content for display within results.
> > >>
> > >> I noticed that the read can be very expensive.  I wonder now if it
> > >> would
> > >> make sense to add this field as Field.Store.Compress to the
> > >> index.  Can
> > >> someone tell me if this would speed up the document read or if
> > >> this is
> > >> something only interesting for saving space.
> > >
> > > I have not tried the compression yet, but in my experience a good way
> > > to reduce the costs of document reads from a disk is by reading them
> > > in document number order whenever possible. In this way one saves
> > > on the disk head seeks.
> > > Compression should actually help reducing the costs of disk head seeks
> > > even more.
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_20897_14878494.1179422587709--

From java-user-return-28128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 18:20:19 2007
Return-Path: <java-user-return-28128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15057 invoked from network); 17 May 2007 18:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 18:20:18 -0000
Received: (qmail 29977 invoked by uid 500); 17 May 2007 18:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29945 invoked by uid 500); 17 May 2007 18:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29934 invoked by uid 99); 17 May 2007 18:20:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 11:20:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of enis.soz.nutch@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 11:20:09 -0700
Received: by an-out-0708.google.com with SMTP id b8so153457ana
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 11:19:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XeBDHjGGwsnhzYWBpN9PfA0f8b+mWJOwaadcbmr2ZTAfiXwyUOJ/dTkavHvg7Ew5K9uwm1Euv5RMSKB98OG8k+0MGY4GnU1QrhAW5t5WQ8XEJe53B2hsb63COv7KQdmD7nH5zynfmYqC3XUHWvFxN87aRixCC3ks7tJj8enD/28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NqfiWkcNNn39siDWbaBtdhFem+A4G8I89LF/nLJ7BXG8mTWyahjOGMUUCdtyYR18y2Tmu7uLolidRHSkIJfYSMELNL6HEeuKDVFGU172hOobT6qebtXI6G/49Lbp7NGzPUG1D6bZO3lWPajzCFP3zgsAfdPFJOOEkT0KMLxlwjI=
Received: by 10.100.250.7 with SMTP id x7mr547301anh.1179425988251;
        Thu, 17 May 2007 11:19:48 -0700 (PDT)
Received: by 10.100.112.8 with HTTP; Thu, 17 May 2007 11:19:48 -0700 (PDT)
Message-ID: <745c30f80705171119w5a468007t96c8245106678be8@mail.gmail.com>
Date: Thu, 17 May 2007 21:19:48 +0300
From: "Enis Soztutar" <enis.soz.nutch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Open Office documents
In-Reply-To: <000801c79896$feea9010$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43637_16396994.1179425988207"
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com>
	 <200705171001.45912.paul.elschot@xs4all.nl>
	 <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org>
	 <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
	 <000801c79896$feea9010$2e01a8c0@dorthy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43637_16396994.1179425988207
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

These is a parser for open office in Nutch. It is a plugin called parse-oo.
You can find more information in the nutch mailing lists.

On 5/17/07, jim shirreffs <jpsb@verizon.net> wrote:
>
>
> Anyone know how to add OpenOffice document to a Lucene index? Is there a
> parser for OpenOffice?
>
> thanks in advance
>
> jim s.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43637_16396994.1179425988207--

From java-user-return-28129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 21:42:45 2007
Return-Path: <java-user-return-28129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67316 invoked from network); 17 May 2007 21:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 21:42:44 -0000
Received: (qmail 10494 invoked by uid 500); 17 May 2007 21:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10196 invoked by uid 500); 17 May 2007 21:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10185 invoked by uid 99); 17 May 2007 21:42:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 14:42:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 14:42:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CF1F35B776; Thu, 17 May 2007 14:42:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C715F7F403
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 14:42:14 -0700 (PDT)
Date: Thu, 17 May 2007 14:42:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: date window
In-Reply-To: <B6FDF011-BC5D-401E-B2C0-75A3E0824E90@bittorrent.com>
Message-ID: <Pine.LNX.4.58.0705171438090.12478@hal.rescomp.berkeley.edu>
References: <B6FDF011-BC5D-401E-B2C0-75A3E0824E90@bittorrent.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: A particular document can have several date windows.
: Give a specific date, only return those documents where that date
: falls within at least one of those windows.

: Also, note that there are multiple windows here for a single
: document, we can't just search between min start and max end.

This can tehoreticaly be done using a custom varient of
PhraseQuery and "parallel fields" where you have a range_start field and a
range_end field and the positions of the dates in each field "line up" so
that you can tell which start corrisponds with which end.

I mentioned this idea (which actual came from on off hand comment Doug
made about PhraseQuery at last year's ApacheCon US) in this Solr thread
when someone asked a similar question...

http://www.nabble.com/One-item%2C-multiple-fields%2C-and-range-queries-tf2969183.html#a8404600


..i have never tried implementing this in practice.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 22:03:14 2007
Return-Path: <java-user-return-28130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72204 invoked from network); 17 May 2007 22:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 22:03:13 -0000
Received: (qmail 46266 invoked by uid 500); 17 May 2007 22:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46227 invoked by uid 500); 17 May 2007 22:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46216 invoked by uid 99); 17 May 2007 22:03:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 15:03:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 15:03:04 -0700
Received: by py-out-1112.google.com with SMTP id a25so951417pyi
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 15:02:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nFbHyQTyjDUlzhCKL4WuSonp7FmB1y+M8/cW5F87xjibPyxGJ9n/QiDNG3FPkN5nBJt86H0Fno/hxB7O6+BJDrgWRktZlmPWQ2AIMCnd+yRR+Oi0OoLBNlcPyvUyBdAsI0sBH0zyGFposGKMtPIqQGqWpeZ8ax0Qd8YXhH40Ch0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=b8N3Vj9hXcW2yWCcjQQy7qDuSXmLOiY4gmlVu3DXr7B/X4p1supvRhLLhlkS13/dy081rlALpJaomMEt/pO+bL89lAqbLK2ZN04nUTRE/+lkwNG5zt81WmRVLiGHelAbsv7QWdNUfgniPdRwmv3q7K5RjQp40xj1F0JiDDTFEK8=
Received: by 10.35.101.1 with SMTP id d1mr1515941pym.1179439364167;
        Thu, 17 May 2007 15:02:44 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.84.38.75])
        by mx.google.com with ESMTP id n45sm5087734pyh.2007.05.17.15.02.43;
        Thu, 17 May 2007 15:02:43 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
References: <c38ea6f20705162310r70f5dc84ga10e781483b38cac@mail.gmail.com> <200705171001.45912.paul.elschot@xs4all.nl> <9FABF4D2-AB41-4D10-98D3-E5C02005B85E@apache.org> <c38ea6f20705170643q75ebbd18if1f9882664c82be0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E5453EC1-25BD-434F-81CD-0E7270DF92B0@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
Date: Thu, 17 May 2007 15:02:40 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 17-May-07, at 6:43 AM, Andreas Guther wrote:

> I am actually using the FieldSelector and unless I did something  
> wrong it
> did not provide me any load performance improvements which was  
> surprising to
> me and disappointing at the same time.  The only difference I could  
> see was
> when I returned for all fields a NO_LOAD which from my  
> understanding is the
> same as skipping over the document.

Note that storing the field as binary or compressed will increase the  
speed gains from lazy loading.  If the stored field is just text,  
then lucene has to scan the characters instead of .seek()ing to a  
byte position.

-MIke

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 22:47:19 2007
Return-Path: <java-user-return-28131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81106 invoked from network); 17 May 2007 22:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 22:47:18 -0000
Received: (qmail 3379 invoked by uid 500); 17 May 2007 22:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3354 invoked by uid 500); 17 May 2007 22:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3339 invoked by uid 99); 17 May 2007 22:47:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 15:47:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 15:47:11 -0700
Received: by mu-out-0910.google.com with SMTP id i10so398787mue
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 15:46:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JlC1aI5h9s4zT2IUuUeINZtexzyFjJrw8KN34RyGmUBU5QEFO11uOL3cOYyPBR+NhAJ+5/WRZDu5XtFjrGwTj5TCC00sVmN76KuUDnp8Pl972t+w9cOMsG9gpldHRTFMl47Z6SxWcv91twf6XPCCqvyzvHU1RGNclE8cvm/6ql0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=aEnbL4Pb8QFBdp4QrzUa9YcKFtmudLE/914KGGkSvcfHKHfuVWfptDB8fhRQgRznmEB+IVoC0QH92797JMGBNmyJvaPFqMZsA4687lbxNwcLAo7KAsOc2axq4w7d0HQQb/aWUYcATtkzTKHPCdAPuXYJ7Zy7JZ6OdtfKz5EJ1U0=
Received: by 10.82.177.3 with SMTP id z3mr1599488bue.1179442009488;
        Thu, 17 May 2007 15:46:49 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Thu, 17 May 2007 15:46:49 -0700 (PDT)
Message-ID: <f81fa4180705171546j43782f6dqecdae461f538cc98@mail.gmail.com>
Date: Thu, 17 May 2007 18:46:49 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Is it possible to use a custom similarity class to cause extra terms in a field to lower score?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

If I have two items in an index:
Terminator 2
Terminator 2: Judgment Day

And I score them against the query +title:(Terminator 2)
they come up with the same score (which makes sense, it just isn't
quite what I want)

Would there be some method or combination of methods in Similarity
that I could easily override to allow me to penalize the second item
because it had "unused terms"?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 17 23:34:53 2007
Return-Path: <java-user-return-28132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94768 invoked from network); 17 May 2007 23:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 May 2007 23:34:53 -0000
Received: (qmail 64702 invoked by uid 500); 17 May 2007 23:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64651 invoked by uid 500); 17 May 2007 23:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64640 invoked by uid 99); 17 May 2007 23:34:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 16:34:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 16:34:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BFA835B778; Thu, 17 May 2007 16:34:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B8CBC7F403
	for <java-user@lucene.apache.org>; Thu, 17 May 2007 16:34:24 -0700 (PDT)
Date: Thu, 17 May 2007 16:34:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Is it possible to use a custom similarity class to cause extra
 terms in a field to lower score?
In-Reply-To: <f81fa4180705171546j43782f6dqecdae461f538cc98@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705171631500.20135@hal.rescomp.berkeley.edu>
References: <f81fa4180705171546j43782f6dqecdae461f538cc98@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Terminator 2
: Terminator 2: Judgment Day
:
: And I score them against the query +title:(Terminator 2)

: Would there be some method or combination of methods in Similarity
: that I could easily override to allow me to penalize the second item
: because it had "unused terms"?

that's what the DefaultSimilarity does, it uses the (length)norm
information stored when the documents are indexed to know which one is a
better match (because it matches on a shorter field)

I you aren'tseeing that behavior then perhaps you turned omitNorms for
that field, or perhaps the byte encoding is making the distinction between
your various terms too small -- overriding the lengthNorm function and
reindexing might help.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 00:54:33 2007
Return-Path: <java-user-return-28133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14816 invoked from network); 18 May 2007 00:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 00:54:33 -0000
Received: (qmail 57351 invoked by uid 500); 18 May 2007 00:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57071 invoked by uid 500); 18 May 2007 00:54:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57060 invoked by uid 99); 18 May 2007 00:54:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 17:54:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 17:54:23 -0700
Received: by ik-out-1112.google.com with SMTP id b32so420354ika
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 17:54:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KgcKERwSohpJbGZ628vbPearPy+3PHiaLsVU1KWp3BU3otSsj3Mvf9N2fXZTe6Y4EgJFtF4FWGdLJSlqw8Asio+WyaPO7e3DRIM4MsiLlq8ANG/9OVDatmx6xuhAI13hkWgTxMAN7tx9uhXvNqGvojuvWoXSZCsTWC1R55zBuVg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MpbzSnHnKqUBxB3BUsUBU2mEAfW4AT+dVbqvTydh+dewsJ/+LXoptee8N0Y0r6vkxMSRuio0Fu8TVIgVUe0gUpRuEsfSNRq1EWJRackpHxABcot/JR775b/GmpqETa4HjuLHYguYtHd48y4hb8XKf71ghGNqlJVcluvKHDFwb5g=
Received: by 10.82.191.3 with SMTP id o3mr1747250buf.1179449642405;
        Thu, 17 May 2007 17:54:02 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Thu, 17 May 2007 17:54:02 -0700 (PDT)
Message-ID: <f81fa4180705171754q3ded8418t5055b91654585a9@mail.gmail.com>
Date: Thu, 17 May 2007 20:54:02 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is it possible to use a custom similarity class to cause extra terms in a field to lower score?
In-Reply-To: <Pine.LNX.4.58.0705171631500.20135@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180705171546j43782f6dqecdae461f538cc98@mail.gmail.com>
	 <Pine.LNX.4.58.0705171631500.20135@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Oops.  I do indeed have omitNorms turned on.  I will re-read the
documentation on it and look at turning it off.

Sorry for the bother. :/

On 5/17/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Terminator 2
> : Terminator 2: Judgment Day
> :
> : And I score them against the query +title:(Terminator 2)
>
> : Would there be some method or combination of methods in Similarity
> : that I could easily override to allow me to penalize the second item
> : because it had "unused terms"?
>
> that's what the DefaultSimilarity does, it uses the (length)norm
> information stored when the documents are indexed to know which one is a
> better match (because it matches on a shorter field)
>
> I you aren'tseeing that behavior then perhaps you turned omitNorms for
> that field, or perhaps the byte encoding is making the distinction between
> your various terms too small -- overriding the lengthNorm function and
> reindexing might help.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 02:46:21 2007
Return-Path: <java-user-return-28134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55339 invoked from network); 18 May 2007 02:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 02:46:20 -0000
Received: (qmail 74543 invoked by uid 500); 18 May 2007 02:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74386 invoked by uid 500); 18 May 2007 02:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74374 invoked by uid 99); 18 May 2007 02:46:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 19:46:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 May 2007 19:46:10 -0700
Received: (qmail 33996 invoked by uid 60001); 18 May 2007 02:45:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=wlFBi1e2BxFrNx4ajQHQCgjRiH67Kf+kqpCabSS5TPb2MqxUFtXO/e5SHVO63bHPJJUbdGfUcT/RZ4OIprIZ2aaQQh8W5+wqEiB17y4TM4aEP8jCuLvpzDDbAqwpf2oU90hPniNmnIrKRDC9pbbtGiZHHpkXmdnkxFr55Dxfl4o=;
X-YMail-OSG: 5fooSQsVM1lUYfxPDBXJQJWRYGogRDqEvdIf7MRJ7xS7p5Qmbmgr4wHiQLcQ18ozI0EXOoqawuUfk7v7kfKJimorfJwtSYNiVF22EXO7vE3.vyH0o.Y-
Received: from [66.108.160.145] by web50301.mail.re2.yahoo.com via HTTP; Thu, 17 May 2007 19:45:48 PDT
X-Mailer: YahooMailRC/651.23 YahooMailWebService/0.7.41.10
Date: Thu, 17 May 2007 19:45:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to ignore scoring for a Query?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <336648.32694.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Scoring cannot be turned off, currently.  I once thought it is possible to skip scoring with the patch in LUCENE-584 JIRA issue, but I was wrong.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Benjamin Pasero <bpasero@rssowl.org>
To: java-user@lucene.apache.org
Sent: Thursday, May 17, 2007 8:49:15 AM
Subject: How to ignore scoring for a Query?

Hi,

I have two different use-cases for my queries. For the first,
performance is not too critical
and I want to sort the results by relevance (score). The second however,
is performance critical,
but the score for each result is not interesting. I guess, if it was
possible to disable scoring
for the query, I could improve performance (note that omitNorms on a
Field is not an option, due
to the first use case).

Is there a straightforward way to disable scoring for a query (its a
BooleanQuery btw with some
clauses, which can be any other query).

Thanks,
Ben


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 03:04:09 2007
Return-Path: <java-user-return-28135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58688 invoked from network); 18 May 2007 03:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 03:04:08 -0000
Received: (qmail 95638 invoked by uid 500); 18 May 2007 03:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95345 invoked by uid 500); 18 May 2007 03:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95189 invoked by uid 99); 18 May 2007 03:04:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 20:04:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 May 2007 20:03:59 -0700
Received: (qmail 40294 invoked by uid 60001); 18 May 2007 03:03:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XtO70dZ5b1Cdpt6U3d2zZkmQf7D0WYP9vXlY7hZKKukVMTRB2CpUL4rGlWt+SkrVZwZ17X12kLswH2SCx5kB9uiikfJy3f8CB3dN1sSzzK7Ktni/S1wuej/oEvJjbke/oCzy2q2AH/VlLC16dUpHC8j3gRHSCKrWVVZ/YnME5hA=;
X-YMail-OSG: TmO853QVM1m7S2aKyRBxMx3SB4IUG7nRPqSKXBULchGmLXIy8adbwLr7cOHQgfqAff__ssImbg--
Received: from [66.108.160.145] by web50308.mail.re2.yahoo.com via HTTP; Thu, 17 May 2007 20:03:36 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.10
Date: Thu, 17 May 2007 20:03:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <752080.39971.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message ----
From: Paul Elschot <paul.elschot@xs4all.nl>

On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> I am currently exploring how to solve performance problems I encounter with
> Lucene document reads.
> 
> We have amongst other fields one field (default) storing all searchable
> fields.  This field can become of considerable size since we are  indexing
> documents and  store the content for display within results.
> 
> I noticed that the read can be very expensive.  I wonder now if it would
> make sense to add this field as Field.Store.Compress to the index.  Can
> someone tell me if this would speed up the document read or if this is
> something only interesting for saving space.

I have not tried the compression yet, but in my experience a good way
to reduce the costs of document reads from a disk is by reading them
in document number order whenever possible. In this way one saves
on the disk head seeks.
Compression should actually help reducing the costs of disk head seeks
even more.

OG: Does this really help in a multi-user environment where there are multiple parallel queries hitting the index and reading data from all over the index and the disk?  They will all share the same disk head, so the head will still have to jump around to service all these requests, even if each request is being careful to read documents in docId order, no?

Otis





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 03:51:51 2007
Return-Path: <java-user-return-28136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78735 invoked from network); 18 May 2007 03:51:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 03:51:49 -0000
Received: (qmail 61824 invoked by uid 500); 18 May 2007 03:51:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61785 invoked by uid 500); 18 May 2007 03:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61770 invoked by uid 99); 18 May 2007 03:51:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 20:51:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 May 2007 20:51:40 -0700
Received: (qmail 7846 invoked by uid 60001); 18 May 2007 03:51:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ZwYG0CX6yPKPN9xINUHWg94/b0KbyOEDX6XSOJCXGTKnrXRf5sMXLOGZ2QG7Q/2chO051lcnMQfOQMQumyuZFPWhFDCtIW9Ws5dT+N+xtE+guSqw6qBgvGULkqt3Ds6rOH+a4ipJg3YZKGaPDfqFSOgbOUEdCV2r2Eqjr6lb660=;
X-YMail-OSG: 5w6chfcVM1koRnbUUpckFcf1ca29Ct1sjWGW5UXHXsX1xhQfEM8GgJaN64f5ojvWcgj4KkfofrLdevkghS0e7Ut3Zz3pHZTy7IkBCOmFCiacuXPl2ao-
Received: from [66.108.160.145] by web50306.mail.re2.yahoo.com via HTTP; Thu, 17 May 2007 20:51:18 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 17 May 2007 20:51:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Memory leak (JVM 1.6 only)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <714866.7123.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,

You said the OOM happens only when you are indexing.  You don't need LuceneIndexAccess for that, so get rid of that to avoid one suspect that is not part of Lucene core.  What is your maxBufferedDocs set to?  And since you are using JVM 1.6, check out jmap, jconsole & friends, they'll provide insight into where your OOM is coming from.  I see your app is a webapp.  How do you know it's Lucene and its indexing that are the source of OOM and not something else, such as a bug in Tomcat?

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Stephen Gray <Stephen.Gray@anu.edu.au>
To: java-user@lucene.apache.org
Sent: Tuesday, May 15, 2007 2:31:05 AM
Subject: Memory leak (JVM 1.6 only)

Hi everyone,

I have an application that indexes/searches xml documents using Lucene. 
I'm having a problem with what looks like a memory leak, which occurs 
when indexing a large number of documents, but only when the application 
is running under JVM 1.6. Under JVM 1.5 there is no problem. What 
happens is that the memory allocated consistently rises during indexing 
until the JVM crashes with an OutOfMemory exception.

I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess 
API, which hands out references to cached IndexWriter/Reader/Searchers 
to objects that need to use them, and handles closing and re-opening 
IndexSearchers after documents are added to the index. The application 
is running under Tomcat 6.

I'm a bit out of my depth determining the source of the leak - I've 
tried using Netbeans profiler, which shows a large number of HashMap 
instances that survive a long time, but these are created by many 
different classes so it's difficult to pinpoint one source.

Has anyone found similar problems with Lucene indexing operations 
running under JVM 1.6? Does anyone have any suggestions re how to deal 
with this?

Any help much appreciated.

Thanks,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 04:24:26 2007
Return-Path: <java-user-return-28137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84402 invoked from network); 18 May 2007 04:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 04:24:24 -0000
Received: (qmail 91842 invoked by uid 500); 18 May 2007 04:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91808 invoked by uid 500); 18 May 2007 04:24:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91785 invoked by uid 99); 18 May 2007 04:24:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 21:24:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.238.89.128] (HELO bioscene.co.jp) (202.238.89.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 May 2007 21:24:06 -0700
Received: (qmail 6651 invoked from network); 18 May 2007 04:25:14 -0000
Received: from unknown (HELO eth0.sonoda) (192.168.2.5)
  by bioscene.co.jp with SMTP; 18 May 2007 04:25:14 -0000
Subject: Re: How can I limit the number of hits in my query?
From: David Leangen <apache@leangen.net>
Reply-To: apache@leangen.net
To: Erick Erickson <erickerickson@gmail.com>
Cc: java-user@lucene.apache.org
In-Reply-To: <359a92830705150946l7b2451cah55257f4b65bf30b4@mail.gmail.com>
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
	 <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com>
	 <1179194857.1593.26.camel@sonoda.bioscene.co.jp>
	 <359a92830705150946l7b2451cah55257f4b65bf30b4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Date: Fri, 18 May 2007 13:18:20 +0900
Message-Id: <1179461900.7813.17.camel@sonoda.bioscene.co.jp>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you, Erick, this is very useful!

Have you ever taken a look at Google Suggest[1]? It's very fast, and the
results are impressive. I think your suggestion will go a long way to
fixing my problem, but there's probably still quite a gap between this
approach and the kind of results that Google Suggest provides.

I wonder how it could be possible to do the same with Lucene...

Anyway, thanks a lot for the help!


[1] http://www.google.com/webhp?complete=1&hl=en


On Tue, 2007-05-15 at 12:46 -0400, Erick Erickson wrote:
> OK, I'm going to go on the assumption that all you're interested in
> is auto completion, so don't try to generalized this to queries......
> 
> Don't use queries, PrefixQuery or otherwise. Use one of the 
> TermEnums, probably WildcardTermEnum. What that will do is 
> allow you to find all the terms, in lexical order, that match 
> your fragment without using queries at all. This has several 
> advantages.... 
> 
> 1> it's fast. It doesn't require you to do anything but march down
>      some index list.
> 2> it doesn't expand the terms prior to processing. No such thing
>     as "TooManyClauses". Perhaps OutOfMemory if you try to 
>     return 100,000,000 terms <G>....
> 3> you can stop whenever you've accumulated "enough" terms,
>      where "enough" is up to you.
> 
> NOTE: there's also a RegexTermEnum in the 
> contrib section (last I knew, it may be in core in 2.1) that 
> allows arbitrary regex enumerations, but it's significantly
> slower than WildcardTermEnum, which is hardly surprising
> since it has to do more work.......
> 
> It's reasonable to ask how much use auto-completion is when the
> poor user has, say, 10,000 terms to choose from, so I think it's
> entirely reasonable to get the first, say, 100 terms and quit. You 
> should be able to do something like this quite easily with the Enums.
> 
> I think your original solution of using queries would not be
> satisfactory for the user anyway, *assuming* that the user is
> as impatient as I am and wants some auto-complete options 
> RIGHT NOW <G>, even if you solved the TooManyClauses
> issue.
> 
> Along the same lines, another question is whether you should
> try to auto-complete when the user has typed less than, say,
> 3 characters, but that's your design decision..... 
> 
> Really, try the WildcardTermEnum. It's pretty neat.
> 
> Hope this helps
> Erick
> 
> On 5/14/07, David Leangen <apache@leangen.net> wrote:
>         
>         Thank you very much for this. Some more questions inline... 
>         
>         
>         >
>         >         - How can I limit the number of hits? I don't know
>         in
>         >            advance what the data will be, so it's not
>         feasible for
>         >            me to use RangeQuery.
>         >
>         >
>         > You can use a TopDocs or a HitCollector object which allows
>         you
>         > to process each object as it's hit. But I doubt you need to
>         do this.
>         
>         > No.  I expect you're using a wildcard, and wildcard handling
>         is 
>         > complicated.
>         
>         
>         Ok, you're right. It's not the limiting of the results that's
>         the
>         problem, it's the way the search is expanded.
>         
>         Since this is an autocomplete, when the user types, for
>         example "a" or a 
>         Japanese character "", I am using PrefixFilter for this, so
>         I guess
>         the search turns into "a*" and "*" respectively.
>         
>         In the archive, the related posts I read either refer to a
>         DateRange 
>         (where it is possible to search first by year, then month...
>         etc.), or
>         they suggest to increase the max count.
>         
>         Neither of these solutions work in my case... It's not a date,
>         and I
>         have no idea of the results in advance and it would not be
>         practical or 
>         elegant to speculate on the results (for example first try
>         aa*~ab* and
>         see what that gives, etc.).
>         
>         I can get access to the "weight" values of the terms (a data
>         field
>         determined by their frequency of use), so I'll try something
>         related to 
>         that. For people with more experience, would that be a good
>         path to
>         take?
>         
>         Otherwise, would a reasonable solution be to override or
>         re-implement
>         PrefixFilter?
>         
>         
>         Thank you so much!
>         David
>         
>         
>         
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 04:36:22 2007
Return-Path: <java-user-return-28138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87657 invoked from network); 18 May 2007 04:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 04:36:21 -0000
Received: (qmail 12458 invoked by uid 500); 18 May 2007 04:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11511 invoked by uid 500); 18 May 2007 04:36:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11500 invoked by uid 99); 18 May 2007 04:36:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 21:36:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 21:36:14 -0700
Received: by an-out-0708.google.com with SMTP id b8so189767ana
        for <java-user@lucene.apache.org>; Thu, 17 May 2007 21:35:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e1eqzU4QBwXeub9JOcFB0nATYeuqjLJIN8gPY1X76bOZHEzIROqfmL/1Mor2s26lBdkAr5uS5oaPMq+OLGglC6tIS09IPVdrqth/XBllznNafGSjrPFt+xGerV4l/rIkj2XEt+540d9OChFDQer901Lt2HrI7zGW+w22Yj58Kj0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FVgURXrf/nKDngqB3USe6mqd5o87JU/yVYP8ks7XIYEmzd3bqkxrYfOCjEGiBPelpn7E/HTQ+EDqLerxHMy6TH4ULZIabGZc9PTPSAxwjsXVXKz51naPLaDom13uRJTaRVrJyQFjl4Dtr54c4NI4/Slp1MwqY4hk0JE7ICxx0oU=
Received: by 10.100.190.8 with SMTP id n8mr833616anf.1179462953258;
        Thu, 17 May 2007 21:35:53 -0700 (PDT)
Received: by 10.100.43.4 with HTTP; Thu, 17 May 2007 21:35:53 -0700 (PDT)
Message-ID: <c38ea6f20705172135g9720415qde044c04f29a31c7@mail.gmail.com>
Date: Thu, 17 May 2007 21:35:53 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <752080.39971.qm@web50308.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54563_11174400.1179462953192"
References: <752080.39971.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54563_11174400.1179462953192
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I found a similar recommendation about the disc access and reading in order
in the following message and implemented this in my code:
http://www.gossamer-threads.com/lists/lucene/general/28268#28268

Since I am dealing with multiple index directories I sorted the document
references by index number and then by doc id.  This actually improved the
read access and reduced the read time to 50% and less.

I think this is a very interesting performance improvement tip that should
have its place in the FAQ.

Thanks for the input.

Andreas


On 5/17/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> ----- Original Message ----
> From: Paul Elschot <paul.elschot@xs4all.nl>
>
> On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> > I am currently exploring how to solve performance problems I encounter
> with
> > Lucene document reads.
> >
> > We have amongst other fields one field (default) storing all searchable
> > fields.  This field can become of considerable size since we
> are  indexing
> > documents and  store the content for display within results.
> >
> > I noticed that the read can be very expensive.  I wonder now if it would
> > make sense to add this field as Field.Store.Compress to the index.  Can
> > someone tell me if this would speed up the document read or if this is
> > something only interesting for saving space.
>
> I have not tried the compression yet, but in my experience a good way
> to reduce the costs of document reads from a disk is by reading them
> in document number order whenever possible. In this way one saves
> on the disk head seeks.
> Compression should actually help reducing the costs of disk head seeks
> even more.
>
> OG: Does this really help in a multi-user environment where there are
> multiple parallel queries hitting the index and reading data from all over
> the index and the disk?  They will all share the same disk head, so the head
> will still have to jump around to service all these requests, even if each
> request is being careful to read documents in docId order, no?
>
> Otis
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54563_11174400.1179462953192--

From java-user-return-28139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 05:29:42 2007
Return-Path: <java-user-return-28139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97866 invoked from network); 18 May 2007 05:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 05:29:41 -0000
Received: (qmail 77673 invoked by uid 500); 18 May 2007 05:29:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77635 invoked by uid 500); 18 May 2007 05:29:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77624 invoked by uid 99); 18 May 2007 05:29:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 22:29:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aleung2@shaw.ca designates 24.71.223.10 as permitted sender)
Received: from [24.71.223.10] (HELO pd3mo2so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 22:29:32 -0700
Received: from pd3mr1so.prod.shaw.ca
 (pd3mr1so-qfe3.prod.shaw.ca [10.0.141.177]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JI8006E51WOJ310@l-daemon> for java-user@lucene.apache.org;
 Thu, 17 May 2007 23:29:12 -0600 (MDT)
Received: from pn2ml9so.prod.shaw.ca ([10.0.121.7])
 by pd3mr1so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JI800D281WN5E90@pd3mr1so.prod.shaw.ca> for
 java-user@lucene.apache.org; Thu, 17 May 2007 23:29:11 -0600 (MDT)
Received: from [10.1.242.20] ([24.85.131.123])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JI80010Z1WMZID0@l-daemon> for java-user@lucene.apache.org;
 Thu, 17 May 2007 23:29:10 -0600 (MDT)
Date: Thu, 17 May 2007 22:29:08 -0700
From: Arnold Leung <aleung2@shaw.ca>
Subject: Re: snowball (english) and filenames
In-reply-to:
 <OFE16B5D4A.305742EC-ON882572DE.0020BA5C-882572DE.0020FADC@il.ibm.com>
To: java-user@lucene.apache.org
Message-id: <B35E14B8-B0F1-47F2-AA48-9F406573FE04@shaw.ca>
MIME-version: 1.0 (Apple Message framework v752.2)
X-Mailer: Apple Mail (2.752.2)
Content-type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Content-transfer-encoding: 7bit
References:
 <OFE16B5D4A.305742EC-ON882572DE.0020BA5C-882572DE.0020FADC@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


On 16-May-07, at 11:00 PM, Doron Cohen wrote:

> If you enter a.b.c.d.e.f.g.h to that demo you'll see that
> the demo simply breaks the input text on '.' - that has
> nothing to do with filenames.

That is not what I am seeing from my testing:

a.b.c.d.e.f.g.h is not broken apart like how the snowball demo  
indicates it should do.

At http://snowball.tartarus.org/demo.php

"a.b.c.d.e.f.g.h" shows:

a -> a
b -> b
c -> c
d -> d
e -> e
f -> f
g -> g
h -> h

For my lucene testing, I indexed one text file with one   
"a.b.c.d.e.f.g.h" string in it and opened the index up using Luke.   
It only indexed the string a.b.c.d.e.f.g.h (and didn't parse the  
string based on the periods).


As a real world example, Logon.dll is being converted to "Logon.dl"  
rather than "Logon" and "dll" as indicated by the snowball demo.

Also:

Demo:
some-msp.msp

somemsp -> somemsp
msp -> msp

Lucene:
some-msp.msp

some
msp.msp


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 05:40:37 2007
Return-Path: <java-user-return-28140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99521 invoked from network); 18 May 2007 05:40:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 05:40:36 -0000
Received: (qmail 88434 invoked by uid 500); 18 May 2007 05:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88387 invoked by uid 500); 18 May 2007 05:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88374 invoked by uid 99); 18 May 2007 05:40:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 22:40:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.134] (HELO anumail8.anu.edu.au) (130.56.64.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 22:40:27 -0700
Received: from smtphost.anu.edu.au (ds2.anu.edu.au [130.56.64.54])
	by anumail8.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4I5e5tK028206
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 15:40:05 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4I5e5mO022056
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 15:40:05 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4I5e4pU025586
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 15:40:04 +1000 (EST)
Message-ID: <464D3C31.1000504@anu.edu.au>
Date: Fri, 18 May 2007 15:40:01 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <714866.7123.qm@web50306.mail.re2.yahoo.com>
In-Reply-To: <714866.7123.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.17.222035 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Thanks very much for your reply.

I've removed the LuceneIndexAccessor code, and still have the same 
problem, so that at least rules out LuceneIndexAccessor as the source. 
maxBufferedDocs is just set to the default, which I believe is 10.

I've tried jconsole, + jmap/jhat for looking at the contents of the 
heap. One interesting thing is that although the memory allocated as 
reported by the processes tab of Windows Task Manager goes up and up, 
and the JVM eventually crashes with an OutOfMemory error, the total size 
of heap + non-heap as reported by jconsole is constant and much lower 
than the Windows-reported allocated memory. I've also tried Netbeans 
profiler, which suggests that the variables in the heap that are 
continually surviving garbage collection do not all originate from one 
class.

I can't definitely rule out Tomcat. Clearly something is interacting 
with a change in JVM 1.6 and causing the problem. The fact that it only 
occurs during indexing not searching suggested that it might be related 
to the indexing code rather than Tomcat. It's much more likely that it's 
my code than Lucene, but I can't see anything in my code though I'm 
definitely no expert on memory leaks. All the variables created during 
indexing except IndexReader and Searcher instances are local to my 
addDocument function so should be garbage collected after each document 
is added. I did wonder if it might be related to SnowballAnalyzer as 
quite a few long lived variables in the heap were created by this - but 
then the heap is not increasing.

Regards,
Steve

Otis Gospodnetic wrote:
> Hi Steve,
>
> You said the OOM happens only when you are indexing.  You don't need LuceneIndexAccess for that, so get rid of that to avoid one suspect that is not part of Lucene core.  What is your maxBufferedDocs set to?  And since you are using JVM 1.6, check out jmap, jconsole & friends, they'll provide insight into where your OOM is coming from.  I see your app is a webapp.  How do you know it's Lucene and its indexing that are the source of OOM and not something else, such as a bug in Tomcat?
>
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Stephen Gray <Stephen.Gray@anu.edu.au>
> To: java-user@lucene.apache.org
> Sent: Tuesday, May 15, 2007 2:31:05 AM
> Subject: Memory leak (JVM 1.6 only)
>
> Hi everyone,
>
> I have an application that indexes/searches xml documents using Lucene. 
> I'm having a problem with what looks like a memory leak, which occurs 
> when indexing a large number of documents, but only when the application 
> is running under JVM 1.6. Under JVM 1.5 there is no problem. What 
> happens is that the memory allocated consistently rises during indexing 
> until the JVM crashes with an OutOfMemory exception.
>
> I'm using Lucene 2.1, and am using Maik Schreiber's LuceneIndexAccess 
> API, which hands out references to cached IndexWriter/Reader/Searchers 
> to objects that need to use them, and handles closing and re-opening 
> IndexSearchers after documents are added to the index. The application 
> is running under Tomcat 6.
>
> I'm a bit out of my depth determining the source of the leak - I've 
> tried using Netbeans profiler, which shows a large number of HashMap 
> instances that survive a long time, but these are created by many 
> different classes so it's difficult to pinpoint one source.
>
> Has anyone found similar problems with Lucene indexing operations 
> running under JVM 1.6? Does anyone have any suggestions re how to deal 
> with this?
>
> Any help much appreciated.
>
> Thanks,
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Stephen Gray
Archive IT Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 06:19:40 2007
Return-Path: <java-user-return-28141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11794 invoked from network); 18 May 2007 06:19:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 06:19:39 -0000
Received: (qmail 50087 invoked by uid 500); 18 May 2007 06:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50054 invoked by uid 500); 18 May 2007 06:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50043 invoked by uid 99); 18 May 2007 06:19:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:19:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:19:31 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4I6J9br414746
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 06:19:09 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4I6J9MQ2396252
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:19:09 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4I6J9eh031482
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:19:09 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4I6J9sa031477
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:19:09 +0200
In-Reply-To: <464D3C31.1000504@anu.edu.au>
Subject: Re: Memory leak (JVM 1.6 only)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF7CC092E.3CE5883C-ON882572DF.0021A691-882572DF.00229CA7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 17 May 2007 23:18:03 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 18/05/2007 09:19:08
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Stephen Gray <Stephen.Gray@anu.edu.au> wrote on 17/05/2007 22:40:01:

> One interesting thing is that although the memory allocated as
> reported by the processes tab of Windows Task Manager goes up and up,
> and the JVM eventually crashes with an OutOfMemory error, the total size
> of heap + non-heap as reported by jconsole is constant and much lower
> than the Windows-reported allocated memory. I've also tried Netbeans
> profiler, which suggests that the variables in the heap that are
> continually surviving garbage collection do not all originate from one
> class.

Smells like native memory leak? Can jconsole/jmap/jhat monitor native mem?
I once spent some time on what finally was a GZipOutputStream native mem
usage/leak. Moving from Java 1.5 to 1.6 could expose such problem...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 06:48:51 2007
Return-Path: <java-user-return-28142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16608 invoked from network); 18 May 2007 06:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 06:48:50 -0000
Received: (qmail 80459 invoked by uid 500); 18 May 2007 06:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80340 invoked by uid 500); 18 May 2007 06:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80327 invoked by uid 99); 18 May 2007 06:48:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:48:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.135] (HELO anumail9.anu.edu.au) (130.56.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:48:41 -0700
Received: from smtphost.anu.edu.au (ds2.anu.edu.au [130.56.64.54])
	by anumail9.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4I6mIpB019348
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 16:48:19 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4I6mI4g004887
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 16:48:18 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4I6mHWm006725
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 16:48:18 +1000 (EST)
Message-ID: <464D4C2D.9030009@anu.edu.au>
Date: Fri, 18 May 2007 16:48:13 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <OFF7CC092E.3CE5883C-ON882572DF.0021A691-882572DF.00229CA7@il.ibm.com>
In-Reply-To: <OFF7CC092E.3CE5883C-ON882572DF.0021A691-882572DF.00229CA7@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.17.232933 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. If the extra memory allocated is native memory I don't think 
jconsole includes it in "non-heap" as it doesn't show this as 
increasing, and jmap/jhat just dump/analyse the heap. Do you know of an 
application that can report native memory usage?

Thanks,
Steve

Doron Cohen wrote:
> Stephen Gray <Stephen.Gray@anu.edu.au> wrote on 17/05/2007 22:40:01:
>
>   
>> One interesting thing is that although the memory allocated as
>> reported by the processes tab of Windows Task Manager goes up and up,
>> and the JVM eventually crashes with an OutOfMemory error, the total size
>> of heap + non-heap as reported by jconsole is constant and much lower
>> than the Windows-reported allocated memory. I've also tried Netbeans
>> profiler, which suggests that the variables in the heap that are
>> continually surviving garbage collection do not all originate from one
>> class.
>>     
>
> Smells like native memory leak? Can jconsole/jmap/jhat monitor native mem?
> I once spent some time on what finally was a GZipOutputStream native mem
> usage/leak. Moving from Java 1.5 to 1.6 could expose such problem...
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Stephen Gray
Archive IT Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 06:49:57 2007
Return-Path: <java-user-return-28143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16755 invoked from network); 18 May 2007 06:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 06:49:56 -0000
Received: (qmail 82499 invoked by uid 500); 18 May 2007 06:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82310 invoked by uid 500); 18 May 2007 06:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82299 invoked by uid 99); 18 May 2007 06:49:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:49:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 May 2007 23:49:48 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4I6nQdN033890
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 06:49:26 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4I6nQi14108304
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:49:26 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4I6nQak024022
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:49:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4I6nQIc024017
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 08:49:26 +0200
In-Reply-To: <B35E14B8-B0F1-47F2-AA48-9F406573FE04@shaw.ca>
Subject: Re: snowball (english) and filenames
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF9B0315A0.9A3148DD-ON882572DF.001EE8DE-882572DF.00253EB9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 17 May 2007 23:46:48 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 18/05/2007 09:49:25
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> a.b.c.d.e.f.g.h is not broken apart like how the snowball demo
> indicates it should do.

I am not sure about the "should" here - the way I see it, this
is just how the demo works: Snowball stemmers operate on words,
so the demo first breaks the input text into words and only
then applies stemming.

> For my lucene testing, I indexed one text file with one
> "a.b.c.d.e.f.g.h" string in it and opened the index up using Luke.
> It only indexed the string a.b.c.d.e.f.g.h (and didn't parse the
> string based on the periods).

In Lucene the way text is "broken" into words is up to
application - and depends on the analyzer being used.
WhitespaceAnalyzer would break on white space. StandardAnalyzer
would do more sophisticated work. Analyzers are extendable,
so you could modify their behavior. The wiki page
"AnalysisParalysis" has some relevant info.

Using Lucene's SimpleAnalyzer btw would break "a.b.c" into
"a b c" which seems to be what you are looking for?

HTH,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 07:11:53 2007
Return-Path: <java-user-return-28144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23891 invoked from network); 18 May 2007 07:11:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 07:11:53 -0000
Received: (qmail 12313 invoked by uid 500); 18 May 2007 07:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12289 invoked by uid 500); 18 May 2007 07:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12278 invoked by uid 99); 18 May 2007 07:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 00:11:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 00:11:45 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D34CE30EFC19; Fri, 18 May 2007 01:11:24 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.42.4.214] (vpn-user-1-22.itc.Virginia.EDU [128.143.1.22])
	by ehatchersolutions.com (Postfix) with ESMTP id 1632330EFC18
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 01:11:22 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1179461900.7813.17.camel@sonoda.bioscene.co.jp>
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp> <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com> <1179194857.1593.26.camel@sonoda.bioscene.co.jp> <359a92830705150946l7b2451cah55257f4b65bf30b4@mail.gmail.com> <1179461900.7813.17.camel@sonoda.bioscene.co.jp>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EDDB53C7-E11C-44E6-9E9D-40B24DC340C1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How can I limit the number of hits in my query?
Date: Thu, 17 May 2007 23:32:46 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On May 17, 2007, at 9:18 PM, David Leangen wrote:
> Have you ever taken a look at Google Suggest[1]? It's very fast,  
> and the
> results are impressive. I think your suggestion will go a long way to
> fixing my problem, but there's probably still quite a gap between this
> approach and the kind of results that Google Suggest provides.
>
> I wonder how it could be possible to do the same with Lucene...


I built a suggest interface into Collex here:

	<http://www.nines.org/collex/browse>

You can type either into the "phrase" box, or in the "name" box.    
The "name" box gives back role information as well (try "ros" for  
rossetti).  In both, counts are provided for how many documents  
_within the current constraints_ match the prefix typed.  Under the  
covers its using Solr.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 07:26:32 2007
Return-Path: <java-user-return-28145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32007 invoked from network); 18 May 2007 07:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 07:26:31 -0000
Received: (qmail 29234 invoked by uid 500); 18 May 2007 07:26:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29206 invoked by uid 500); 18 May 2007 07:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29195 invoked by uid 99); 18 May 2007 07:26:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 00:26:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.238.89.128] (HELO bioscene.co.jp) (202.238.89.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 May 2007 00:26:23 -0700
Received: (qmail 7427 invoked from network); 18 May 2007 07:27:31 -0000
Received: from unknown (HELO eth0.sonoda) (192.168.2.5)
  by bioscene.co.jp with SMTP; 18 May 2007 07:27:31 -0000
Subject: Re: How can I limit the number of hits in my query?
From: David Leangen <apache@leangen.net>
Reply-To: apache@leangen.net
To: java-user@lucene.apache.org
In-Reply-To: <EDDB53C7-E11C-44E6-9E9D-40B24DC340C1@ehatchersolutions.com>
References: <1179127442.1593.6.camel@sonoda.bioscene.co.jp>
	 <359a92830705140624v3db3d8c1ifbdf0c9de4311a17@mail.gmail.com>
	 <1179194857.1593.26.camel@sonoda.bioscene.co.jp>
	 <359a92830705150946l7b2451cah55257f4b65bf30b4@mail.gmail.com>
	 <1179461900.7813.17.camel@sonoda.bioscene.co.jp>
	 <EDDB53C7-E11C-44E6-9E9D-40B24DC340C1@ehatchersolutions.com>
Content-Type: text/plain
Date: Fri, 18 May 2007 16:20:35 +0900
Message-Id: <1179472835.7813.20.camel@sonoda.bioscene.co.jp>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 (2.6.0-1) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Ok, that site is very nice!

However... it was really slow for me. Any idea why? Would that be Solr's
"fault"? Or just an overloaded server?

Just curious... I'm interested in looking further into Solr.


Cheers,
Dave



On Thu, 2007-05-17 at 23:32 -0700, Erik Hatcher wrote:
> On May 17, 2007, at 9:18 PM, David Leangen wrote:
> > Have you ever taken a look at Google Suggest[1]? It's very fast,  
> > and the
> > results are impressive. I think your suggestion will go a long way to
> > fixing my problem, but there's probably still quite a gap between this
> > approach and the kind of results that Google Suggest provides.
> >
> > I wonder how it could be possible to do the same with Lucene...
> 
> 
> I built a suggest interface into Collex here:
> 
> 	<http://www.nines.org/collex/browse>
> 
> You can type either into the "phrase" box, or in the "name" box.    
> The "name" box gives back role information as well (try "ros" for  
> rossetti).  In both, counts are provided for how many documents  
> _within the current constraints_ match the prefix typed.  Under the  
> covers its using Solr.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 09:11:53 2007
Return-Path: <java-user-return-28146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82372 invoked from network); 18 May 2007 09:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 09:11:52 -0000
Received: (qmail 31668 invoked by uid 500); 18 May 2007 09:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31634 invoked by uid 500); 18 May 2007 09:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31623 invoked by uid 99); 18 May 2007 09:11:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 02:11:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 02:11:43 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id l4I9BMt7082074
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 11:11:22 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
Date: Fri, 18 May 2007 11:11:21 +0200
User-Agent: KMail/1.8.2
References: <752080.39971.qm@web50308.mail.re2.yahoo.com>
In-Reply-To: <752080.39971.qm@web50308.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705181111.21310.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Otis,

See below.

On Friday 18 May 2007 05:03, Otis Gospodnetic wrote:
> ----- Original Message ----
> From: Paul Elschot <paul.elschot@xs4all.nl>
> 
> On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> > I am currently exploring how to solve performance problems I encounter 
with
> > Lucene document reads.
> > 
> > We have amongst other fields one field (default) storing all searchable
> > fields.  This field can become of considerable size since we are  indexing
> > documents and  store the content for display within results.
> > 
> > I noticed that the read can be very expensive.  I wonder now if it would
> > make sense to add this field as Field.Store.Compress to the index.  Can
> > someone tell me if this would speed up the document read or if this is
> > something only interesting for saving space.
> 
> I have not tried the compression yet, but in my experience a good way
> to reduce the costs of document reads from a disk is by reading them
> in document number order whenever possible. In this way one saves
> on the disk head seeks.
> Compression should actually help reducing the costs of disk head seeks
> even more.
> 
> OG: Does this really help in a multi-user environment where there are 
multiple parallel queries hitting the index and reading data from all over 
the index and the disk?  They will all share the same disk head, so the head 
will still have to jump around to service all these requests, even if each 
request is being careful to read documents in docId order, no?

When the requests for reading docs come in parallel, the underlying OS
will normally favour the request for which the disk head needs to move
only very little. In those cases reading in doc id order also helps
throughput by allowing the OS to merge the requests for which the
head then needs to move even less per retrieved doc.
For example, with 3 retrieved docs per query:
10 1 5 sorts into: 1 5 10.
7 12 3 sorts into: 3 7 12.
1 5 10 and 3 7 12 merge into: 1 3 5 7 10 12, total seek distance: 11.
Unsorted these could merge into: 7 10 12 3 1 5, total seek distance: 20.

Iirc Hits does not retrieve docs in doc id order.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 10:53:12 2007
Return-Path: <java-user-return-28147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24425 invoked from network); 18 May 2007 10:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 10:53:11 -0000
Received: (qmail 73149 invoked by uid 500); 18 May 2007 10:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73115 invoked by uid 500); 18 May 2007 10:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73087 invoked by uid 99); 18 May 2007 10:53:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 03:53:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 03:53:01 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 17D8822030E;
	Fri, 18 May 2007 06:52:41 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Fri, 18 May 2007 06:52:41 -0400
X-Sasl-enc: AuMuCf1rk/uod3RCYC9HQB4a5nvL+fl88dZI4vlxELTS 1179485560
Received: from [192.168.2.36] (cpc1-leed4-0-0-cust390.leed.cable.ntl.com [81.105.105.135])
	by mail.messagingengine.com (Postfix) with ESMTP id 6DF541833A;
	Fri, 18 May 2007 06:52:40 -0400 (EDT)
Message-ID: <464D857C.4050102@fastmail.fm>
Date: Fri, 18 May 2007 11:52:44 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To:  paul_t100@fastmail.fm
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: Chris Hostetter <hossman_lucene@fucit.org>
CC: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Problem using wildcardsearch in phrase search
References: <4645F33E.50300@fastmail.fm> <46462379.207@gmail.com> <359a92830705121742n6836ad09sf9fed028f03506ac@mail.gmail.com> <46466721.7090707@gmail.com> <4646D424.7090609@fastmail.fm> <4646F823.7020203@gmail.com> <4646FB9A.1080505@fastmail.fm> <Pine.LNX.4.58.0705131044160.14957@hal.rescomp.berkeley.edu> <46477FAC.4030106@fastmail.fm> <Pine.LNX.4.58.0705141428100.23436@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0705141428100.23436@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ive proposed a simple improvement in issue  
https://issues.apache.org/jira/browse/LUCENE-884

thanks Paul

Chris Hostetter wrote:
> But as i said: if you have suggestions for clarifying the docs, please
> submit them as a patch.  just saying the docs need to be improved without
> providing a specific suggestion for how they can be improved doesn't
> really help the situation.
>
>
>
> -Hoss
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 12:12:29 2007
Return-Path: <java-user-return-28148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62291 invoked from network); 18 May 2007 12:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 12:12:28 -0000
Received: (qmail 20499 invoked by uid 500); 18 May 2007 12:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20399 invoked by uid 500); 18 May 2007 12:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20385 invoked by uid 99); 18 May 2007 12:12:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 05:12:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.199.12] (HELO huffman.isp.lu) (194.154.199.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 05:12:19 -0700
Received: from charlie ([172.18.1.203])
	by huffman.isp.lu (8.10.2+Sun/8.10.2) with ESMTP id l4ICDmZ06741
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 14:13:48 +0200 (MET DST)
Received: from [172.18.5.129] by mailfloat.saint-paul.lu
 (iPlanet Messaging Server 5.2 (built Feb 21 2002))
 with ESMTP id <0JI8006XWKK0CQ@mailfloat.saint-paul.lu> for
 java-user@lucene.apache.org; Fri, 18 May 2007 14:12:05 +0200 (MEST)
Date: Fri, 18 May 2007 14:12:00 +0200
From: Stefan Colella <stefan.colella@saint-paul.lu>
Subject: search result problem
To: java-user@lucene.apache.org
Message-id: <464D9810.2070705@saint-paul.lu>
Organization: saint-paul luxembourg s.a.
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_bMm1rzO2VrSErX/wTO0y0A)"
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_bMm1rzO2VrSErX/wTO0y0A)
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT

Hello,

My application is working with PDF files so i use lucene with PdfBox to 
create a little search engine. I am new to lucene.

All seemed to work fine but after some tests I saw that some expressions 
like "stock option" where never found (or returns the wrong documents) 
even if it exist in my PDF files. I searched in the mail archive and 
found that I have to use the "French Analyser" but that didn't work too.

I found that there is a tool named Luke to check the lucene index. I 
could see that the original text contains those words but nothing in the 
tokenizer.

Anybody who can help or can explain where I can start to look ?

thanks


--Boundary_(ID_bMm1rzO2VrSErX/wTO0y0A)--

From java-user-return-28149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 13:33:56 2007
Return-Path: <java-user-return-28149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21569 invoked from network); 18 May 2007 13:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 13:33:55 -0000
Received: (qmail 82428 invoked by uid 500); 18 May 2007 13:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82397 invoked by uid 500); 18 May 2007 13:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82386 invoked by uid 99); 18 May 2007 13:33:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 06:33:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 06:33:46 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 5257E7FAB
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 06:33:25 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <464D9810.2070705@saint-paul.lu>
References: <464D9810.2070705@saint-paul.lu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE1A620B-68FE-4718-957A-3A166371933C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: search result problem
Date: Fri, 18 May 2007 09:33:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Try using the explain() method to see why the documents that were  
returned scored the way they did.

If I am understanding correctly, you are saying that Luke shows that  
those words aren't actually in your index?  Can you elaborate on what  
your analysis process is?  Are you searching using the same Analyzer  
as you are indexing with?  I would try to isolate the problem down to  
some unit tests, if possible.

Cheers,
Grant

On May 18, 2007, at 8:12 AM, Stefan Colella wrote:

> Hello,
>
> My application is working with PDF files so i use lucene with  
> PdfBox to create a little search engine. I am new to lucene.
>
> All seemed to work fine but after some tests I saw that some  
> expressions like "stock option" where never found (or returns the  
> wrong documents) even if it exist in my PDF files. I searched in  
> the mail archive and found that I have to use the "French Analyser"  
> but that didn't work too.
>
> I found that there is a tool named Luke to check the lucene index.  
> I could see that the original text contains those words but nothing  
> in the tokenizer.
>
> Anybody who can help or can explain where I can start to look ?
>
> thanks
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 14:43:56 2007
Return-Path: <java-user-return-28150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56161 invoked from network); 18 May 2007 14:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 14:43:55 -0000
Received: (qmail 34678 invoked by uid 500); 18 May 2007 14:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34651 invoked by uid 500); 18 May 2007 14:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34633 invoked by uid 99); 18 May 2007 14:43:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 07:43:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bill.w.au@gmail.com designates 64.233.162.226 as permitted sender)
Received: from [64.233.162.226] (HELO nz-out-0506.google.com) (64.233.162.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 07:43:44 -0700
Received: by nz-out-0506.google.com with SMTP id i1so1276476nzh
        for <java-user@lucene.apache.org>; Fri, 18 May 2007 07:43:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lqgli7EgPwDOuQueK4aNFjG8CDCJ40j+C3qrIMXG7rFGBAIHpQZ8ibZhHkGuS5mm1fBoUnhEdq7D+cjBmat/vizLpLJvwio65GpQV0d2JlPVgUbyXtwZh0U2l7q7QrD1qMYDdT+MPD/YbMDg2UaR5tkqiaq0KHVnA5tKyraI/0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qB6sLT1DKCltSiGQBUVjCGBHgSF8Hl8d4Eui5PqLicRln0i1jCyVwaWcu/ey99Wd5eJadrGVL/YvBnhD+tIG9B0gEYviZR4JFaqz1802SdxsHQSNs6mZ4UcWlzHVWAEOkdBCJOu8QHLh+EQz4LFF0luHDSdOeCszcCHOpTxcOQ4=
Received: by 10.114.127.1 with SMTP id z1mr879488wac.1179499402256;
        Fri, 18 May 2007 07:43:22 -0700 (PDT)
Received: by 10.114.196.11 with HTTP; Fri, 18 May 2007 07:43:17 -0700 (PDT)
Message-ID: <3b5f72030705180743k9e62e34re8e5625f6884886b@mail.gmail.com>
Date: Fri, 18 May 2007 10:43:17 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
In-Reply-To: <464D4C2D.9030009@anu.edu.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70959_5860303.1179499397191"
References: <OFF7CC092E.3CE5883C-ON882572DF.0021A691-882572DF.00229CA7@il.ibm.com>
	 <464D4C2D.9030009@anu.edu.au>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70959_5860303.1179499397191
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I actually had to deal with a leak in non-heap native memory once.  I am
running on Linux so I just use good old "ps" to monitor native memory usage.

Bill

On 5/18/07, Stephen Gray <Stephen.Gray@anu.edu.au> wrote:
>
> Thanks. If the extra memory allocated is native memory I don't think
> jconsole includes it in "non-heap" as it doesn't show this as
> increasing, and jmap/jhat just dump/analyse the heap. Do you know of an
> application that can report native memory usage?
>
> Thanks,
> Steve
>
> Doron Cohen wrote:
> > Stephen Gray <Stephen.Gray@anu.edu.au> wrote on 17/05/2007 22:40:01:
> >
> >
> >> One interesting thing is that although the memory allocated as
> >> reported by the processes tab of Windows Task Manager goes up and up,
> >> and the JVM eventually crashes with an OutOfMemory error, the total
> size
> >> of heap + non-heap as reported by jconsole is constant and much lower
> >> than the Windows-reported allocated memory. I've also tried Netbeans
> >> profiler, which suggests that the variables in the heap that are
> >> continually surviving garbage collection do not all originate from one
> >> class.
> >>
> >
> > Smells like native memory leak? Can jconsole/jmap/jhat monitor native
> mem?
> > I once spent some time on what finally was a GZipOutputStream native mem
> > usage/leak. Moving from Java 1.5 to 1.6 could expose such problem...
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Stephen Gray
> Archive IT Officer
> Australian Social Science Data Archive
> 18 Balmain Crescent (Building #66)
> The Australian National University
> Canberra ACT 0200
>
> Phone +61 2 6125 2185
> Fax +61 2 6125 0627
> Web http://assda.anu.edu.au/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_70959_5860303.1179499397191--

From java-user-return-28151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 16:00:08 2007
Return-Path: <java-user-return-28151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88009 invoked from network); 18 May 2007 16:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 16:00:07 -0000
Received: (qmail 63672 invoked by uid 500); 18 May 2007 16:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63063 invoked by uid 500); 18 May 2007 16:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63052 invoked by uid 99); 18 May 2007 16:00:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 09:00:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 08:59:59 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4IFxb6s107436
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 15:59:37 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4IFxbP23014860
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 17:59:37 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4IFxbSH020625
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 17:59:37 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4IFxb33020622
	for <java-user@lucene.apache.org>; Fri, 18 May 2007 17:59:37 +0200
In-Reply-To: <464D4C2D.9030009@anu.edu.au>
Subject: Re: Memory leak (JVM 1.6 only)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1536F049.1267BAEB-ON882572DF.00545A98-882572DF.00578879@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 18 May 2007 08:56:05 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 18/05/2007 18:59:37
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Stephen Gray wrote:

> Thanks. If the extra memory allocated is native memory I don't think
> jconsole includes it in "non-heap" as it doesn't show this as
> increasing, and jmap/jhat just dump/analyse the heap. Do you know of an
> application that can report native memory usage?

Sorry, but I didn't profile native memory for quite a long
time... In my specific case that was not needed b/c problems
begun as I started using GZipOutputStreams very aggressively,
but with fine control over the underlying Java IO buffers.
So when I got the OOM, it was obvious that the problem was
in native mem. Another different behavior with native mem
issues is that increasing max Java heap size might actually
have a negative effect b/c less free native memory remains.

Just in case you haven't checked that yet, there's some useful info in
http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/memleaks.html
including pointers to native memory analysis tools.

Once you find the cause, it would be interesting to hear what
it was, and especially how you found it...

Regards,
Doron

>
> Thanks,
> Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 20:02:14 2007
Return-Path: <java-user-return-28152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78713 invoked from network); 18 May 2007 20:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 20:02:14 -0000
Received: (qmail 29646 invoked by uid 500); 18 May 2007 20:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29616 invoked by uid 500); 18 May 2007 20:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29605 invoked by uid 99); 18 May 2007 20:02:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 13:02:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of spambait132@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 13:02:04 -0700
Received: by mu-out-0910.google.com with SMTP id i10so561723mue
        for <java-user@lucene.apache.org>; Fri, 18 May 2007 13:01:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=aYbCK0V9Szs1DBjBdy1CtvDvKx/zzlprOEROSCHEMzD3J588m+RVrJGOoeW0BHfgB1qguwcdREv/dYANGpXfw6krI0/1RSY0WKW1145A75uWAw9virolh4AfGsjfp253xk1m0rN11S5NSgs9V4gJpAoX8hx/1SrsSQqifpwGByM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=R6Zni2Idxk1UzGKL4HD6iU7ZLv0pQLVvE97+k5Krr3oSIwv6yyGyGX5v0bEbLOkR2UFr7I+vEZFO9rCcNErZZOnrS2hcL6HmfZuSu7zQgu8yrxzMG8L0qFwE3CRpbapyxmRnRQqzskScjmLrTI+zwoaHqmGIICtg+O7a0kjKJ08=
Received: by 10.82.151.14 with SMTP id y14mr3515629bud.1179518503040;
        Fri, 18 May 2007 13:01:43 -0700 (PDT)
Received: by 10.82.167.20 with HTTP; Fri, 18 May 2007 13:01:42 -0700 (PDT)
Message-ID: <29542aae0705181301s131343by3b565190eba59f4d@mail.gmail.com>
Date: Fri, 18 May 2007 14:01:43 -0600
From: "charlie w" <spambait132@gmail.com>
To: java-user@lucene.apache.org
Subject: documents with large numbers of fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32128_33511742.1179518503002"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32128_33511742.1179518503002
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am trying to create an index where I can apply specific boost values to
documents, depending on the notion of something like a multiple tags for
documents.  Each tag would wind up having a different boost value in each
document.

My original approach was to add many fields with the same name, and the
value of each field would be the tag.  I applied a different boost to each
tag.  So something like:
tag=foo        ^2
tag=bar       ^1.2
tag=foobar   ^1.8
searching "tag:bar", for example.  Different documents might have different
boost values for "tag=bar", influencing the scoring.  A document might have
hundreds of these tags.  I might be searching for hundreds of different
values in these tag fields.

I have discovered this doesn't work, seemingly because of the way
DefaultSimilarity creates the fieldNorm.  It seems like internally Lucene is
effectively combining these into one tag field, with 3 terms and a boost
value that is the product of each of the 3 boost values.  If id did indeed
have a document with many many of these tag fields I'd wind up with a
freakishly huge boost on that document.

So now I have the idea to invert the field name and value thusly:
foo=tag     ^2
bar=tag     ^1.2
foobar=tag    ^1.8
and search "foo:tag".

Intuitively, I would expect Lucene to be optimized for searching the values
of fields, and not really the names of fields.  In a somewhat large index,
say 10 million documents, will Lucene search performance continue to be
acceptable if I load up documents with many fields like this?

Is there an upper limit on the number of fields comprising a document, and
if so what is it?

Or, is there some way to make my original approach work after all?

Regards and thanks,
Charlie

------=_Part_32128_33511742.1179518503002--

From java-user-return-28153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 18 21:40:21 2007
Return-Path: <java-user-return-28153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12544 invoked from network); 18 May 2007 21:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 May 2007 21:40:17 -0000
Received: (qmail 85134 invoked by uid 500); 18 May 2007 21:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85048 invoked by uid 500); 18 May 2007 21:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85005 invoked by uid 99); 18 May 2007 21:40:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 14:40:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 May 2007 14:40:05 -0700
Received: by py-out-1112.google.com with SMTP id a25so1248260pyi
        for <java-user@lucene.apache.org>; Fri, 18 May 2007 14:39:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Inr7BBT8g+ZGKJLBk1UDtZi3Aiknucb+/AVdmQMaQragFLTOQlzw0JLf9Cg1zWT9fviiJpLiDEdsBcrtAuZLzG/Hqy8Xs8oJlTPRGs7FLitA+YNYEiXpLtk8UcUUsvSkGjG3HuExVpqhDIj247XTR6fIQ865eMOkCD8w/3NYRtM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=cFvyZ6woLOUSiZCMgsGgdx/ojPcflwFDwyGFdKgKzp1/r10a9boYfUITgALxJ/AHK8Q6lrbcA/DIdKuUSXZwii9CAQSZpDxmiWsH2PU5Yuhdp+MKuBPB1QxawAY4Qa4eHx6c9nhkpYAEX44y2ChjtFVZuvCFo8oXJW4oaWmTh08=
Received: by 10.35.102.1 with SMTP id e1mr3442238pym.1179524384952;
        Fri, 18 May 2007 14:39:44 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.84.38.75])
        by mx.google.com with ESMTP id a79sm9703604pye.2007.05.18.14.39.42;
        Fri, 18 May 2007 14:39:43 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <29542aae0705181301s131343by3b565190eba59f4d@mail.gmail.com>
References: <29542aae0705181301s131343by3b565190eba59f4d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7859C539-C18D-418C-80FF-6F95805DE222@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: documents with large numbers of fields
Date: Fri, 18 May 2007 14:39:40 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 18-May-07, at 1:01 PM, charlie w wrote:
> So now I have the idea to invert the field name and value thusly:
> foo=tag     ^2
> bar=tag     ^1.2
> foobar=tag    ^1.8
> and search "foo:tag".
>
> Intuitively, I would expect Lucene to be optimized for searching  
> the values
> of fields, and not really the names of fields.  In a somewhat large  
> index,
> say 10 million documents, will Lucene search performance continue  
> to be
> acceptable if I load up documents with many fields like this?

Perhaps not.  Storing a field with norms occupies O(N) space,  
regardless of the number of document with non-zero norms.  There  
might be too much data for the os to cache and lucene to process  
efficiently.

> Is there an upper limit on the number of fields comprising a  
> document, and
> if so what is it?

There is not.  They are relatively costless if omitNorms=False

> Or, is there some way to make my original approach work after all?

The experimental Payloads allows an optional boost to be stored along  
with term position.  This is the intended use case.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 15:26:24 2007
Return-Path: <java-user-return-28154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10309 invoked from network); 19 May 2007 15:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 15:26:23 -0000
Received: (qmail 59343 invoked by uid 500); 19 May 2007 15:26:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59301 invoked by uid 500); 19 May 2007 15:26:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59287 invoked by uid 99); 19 May 2007 15:26:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 08:26:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 08:26:16 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JIA00401O6N55@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Sat, 19 May 2007 17:25:55 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JIA00IEFO76W1@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Sat, 19 May 2007 17:25:55 +0200 (MEST)
Date: Sat, 19 May 2007 17:27:55 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: One (large) field shared by many documents
To: java-user@lucene.apache.org
Message-id: <464F177B.3040304@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have the following problem. I'm indexing documents that belong to some 
collection (ie. the dataset is divided into collections, which are 
divided into documents). These documents become my lucene documents, 
with some relatively small string that becomes the field I want to 
search. However, I would also like to add to document d the 
concatenation of all documents in d's collection as a field (mainly as a 
smoothing technique, because documents correspond roughly to topics). 
I'm currently doing just that, adding an extra field for the entire 
concatenated collection to each document in that collection. Of course 
this increases the index size and indexing time greatly (about five-fold).

There must be a better way to do this. My idea was to create a second 
index where the collections are indexed as (lucene) documents. This 
index would have the text as a field, and a list of document id's 
referring back to the main index. I could then retrieve the term vector 
for each collection from this second index for each search result from 
the original index.

My question is if this is a smart approach. And if it is, which of 
Lucene's classes should I use for this. The best I could find was the 
FilterIndexReader. If extending the FilterIndexReader is really the best 
way to go, could I simply override the document(int, FieldSelector) 
method, or is there more to it? I doubt I'm the first person that's ever 
wanted a many to one relation between fields and documents, so I hope 
there's a simpler way about this.

Thank you,
 Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 16:23:01 2007
Return-Path: <java-user-return-28155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21603 invoked from network); 19 May 2007 16:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 16:23:00 -0000
Received: (qmail 28522 invoked by uid 500); 19 May 2007 16:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27467 invoked by uid 500); 19 May 2007 16:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27452 invoked by uid 99); 19 May 2007 16:22:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 09:22:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 09:22:52 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HpRhP-0001Lp-Fu
	for java-user@lucene.apache.org; Sat, 19 May 2007 09:22:31 -0700
Message-ID: <10698288.post@talk.nabble.com>
Date: Sat, 19 May 2007 09:22:31 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: What is the best way to split substring words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,

I want to be able to split tokens by giving a list of substring words.
So I can give a list f subwords like: "strasse", "gasse",
And the token "mainstrasse" or "maingasse"  will be split to 2 tokens "main"
and "strasse".

Thanks

-- 
View this message in context: http://www.nabble.com/What-is-the-best-way-to-split-substring-words-tf3782977.html#a10698288
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 21:50:01 2007
Return-Path: <java-user-return-28156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81317 invoked from network); 19 May 2007 21:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 21:49:59 -0000
Received: (qmail 307 invoked by uid 500); 19 May 2007 21:49:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 264 invoked by uid 500); 19 May 2007 21:49:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 252 invoked by uid 99); 19 May 2007 21:49:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 14:49:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 14:49:51 -0700
Received: by ug-out-1314.google.com with SMTP id k40so652690ugc
        for <java-user@lucene.apache.org>; Sat, 19 May 2007 14:49:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RnIfOfHAibLr41N5p3ff5U6a6Bk3CM7TIIkBw9ny0MZ66ukR1VfFt9n/lG2gSnO9LBiIGxzYWXo9bwTPpUcrAVgfBOh20dDbXMt8yTcEyL5vewpK1FOBVtujsRN7LbqNX1B1lrc0YWd6rdjeEgOPZ4uqp5tO2LZnt38Tvsnj9C8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c7RnYbGv8ftkobNfV5ABPkIoKZtGjFdzJL5SI9+aWy1ZMOXUiG9KDKhLy8sK/1R3r1cUBPJ5SPKPoO2qL64BKy5N5s/FFtaa+INuF5m6nW4slYiqkpF3wk2GX5735Of3x0UpgqlY2/j0uwPt6ybmrhQ5cFmt2V5h5AWIHoPVIFk=
Received: by 10.82.189.6 with SMTP id m6mr5806027buf.1179611370055;
        Sat, 19 May 2007 14:49:30 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 19 May 2007 14:49:30 -0700 (PDT)
Message-ID: <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
Date: Sat, 19 May 2007 17:49:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: One (large) field shared by many documents
In-Reply-To: <464F177B.3040304@peterbloem.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39010_5838920.1179611370006"
References: <464F177B.3040304@peterbloem.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39010_5838920.1179611370006
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This seems kind of kludgy, but that may just mean I don't understand
your problem very well.

What is it that you're trying to accomplish? Searching constrained
by topic or groups?

If you're trying to search by groups, search the archive for the
word "facet" or "faceted search".

Otherwise, could you describe what behavior you're after and maybe
there'd be more ideas....

Best
Erick

On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>
> Hi,
>
> I have the following problem. I'm indexing documents that belong to some
> collection (ie. the dataset is divided into collections, which are
> divided into documents). These documents become my lucene documents,
> with some relatively small string that becomes the field I want to
> search. However, I would also like to add to document d the
> concatenation of all documents in d's collection as a field (mainly as a
> smoothing technique, because documents correspond roughly to topics).
> I'm currently doing just that, adding an extra field for the entire
> concatenated collection to each document in that collection. Of course
> this increases the index size and indexing time greatly (about five-fold).
>
> There must be a better way to do this. My idea was to create a second
> index where the collections are indexed as (lucene) documents. This
> index would have the text as a field, and a list of document id's
> referring back to the main index. I could then retrieve the term vector
> for each collection from this second index for each search result from
> the original index.
>
> My question is if this is a smart approach. And if it is, which of
> Lucene's classes should I use for this. The best I could find was the
> FilterIndexReader. If extending the FilterIndexReader is really the best
> way to go, could I simply override the document(int, FieldSelector)
> method, or is there more to it? I doubt I'm the first person that's ever
> wanted a many to one relation between fields and documents, so I hope
> there's a simpler way about this.
>
> Thank you,
> Peter
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39010_5838920.1179611370006--

From java-user-return-28157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 21:51:25 2007
Return-Path: <java-user-return-28157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81622 invoked from network); 19 May 2007 21:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 21:51:24 -0000
Received: (qmail 3000 invoked by uid 500); 19 May 2007 21:51:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2604 invoked by uid 500); 19 May 2007 21:51:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2593 invoked by uid 99); 19 May 2007 21:51:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 14:51:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 14:51:16 -0700
Received: by ug-out-1314.google.com with SMTP id k40so652842ugc
        for <java-user@lucene.apache.org>; Sat, 19 May 2007 14:50:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KeSwG8Agyc1fSm9yc+6SNKuRu1yrmv4BnVu2E/zaR8sUmA/pwhNXgWqahMMoUC0TPV05+K6/rvuFDnpwbVzHqGe2OZpeaDvYfjNqLDrAXeYc+rVdcmzdjGyJJCpuRBM9hoLvCUZSzBEGCbetMCHi18NLb3R8iojQ1QPuIoMgpYw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ia0QL59rGj73sHoRYDp7+QL0g1L25i6JWUAQKxj7p0L8Cy0PAFwhPI8uhbrzTAbJMxBlGvTYrWzcZPyf+d4hOZH/gDOYQWGnJ/r9yXa5JukpZqimBtBKVGN/+Gv8sFHRTb+6hK0IDUAgQJeMK1fXZXLJrW6QGVMU4dTQPfqjMQk=
Received: by 10.82.138.6 with SMTP id l6mr5739335bud.1179611455074;
        Sat, 19 May 2007 14:50:55 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 19 May 2007 14:50:55 -0700 (PDT)
Message-ID: <359a92830705191450v5e1df4beo3edd33ab1a576b41@mail.gmail.com>
Date: Sat, 19 May 2007 17:50:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What is the best way to split substring words
In-Reply-To: <10698288.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39026_20562130.1179611455021"
References: <10698288.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39026_20562130.1179611455021
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You probably should write a custom analyzer and/or filter that breaks
your streams up into the custom tokens you want. Depending upon
what you're really trying to accomplish, you may well need to use the
same analyzer at BOTH index and search times.

Best
Erick


On 5/19/07, bhecht <bhecht@ams-sys.com> wrote:
>
>
> Hi there,
>
> I want to be able to split tokens by giving a list of substring words.
> So I can give a list f subwords like: "strasse", "gasse",
> And the token "mainstrasse" or "maingasse"  will be split to 2 tokens
> "main"
> and "strasse".
>
> Thanks
>
> --
> View this message in context:
> http://www.nabble.com/What-is-the-best-way-to-split-substring-words-tf3782977.html#a10698288
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39026_20562130.1179611455021--

From java-user-return-28158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 22:17:58 2007
Return-Path: <java-user-return-28158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86916 invoked from network); 19 May 2007 22:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 22:17:32 -0000
Received: (qmail 23838 invoked by uid 500); 19 May 2007 22:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23169 invoked by uid 500); 19 May 2007 22:17:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23158 invoked by uid 99); 19 May 2007 22:17:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 15:17:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 15:17:24 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JIB00K016SFJX@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Sun, 20 May 2007 00:17:02 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JIB00CXE78DK2@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Sun, 20 May 2007 00:17:02 +0200 (MEST)
Date: Sun, 20 May 2007 00:17:00 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: Re: One (large) field shared by many documents
In-reply-to: <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <464F775C.1020507@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
References: <464F177B.3040304@peterbloem.nl>
 <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm sorry, I should have explained the intended behavior more clearly.

The basic idea (without the collection fields) is that there are very 
simple documents in the index with one content field each. All I do with 
this index is a standard search in this text field. To improve the 
search results, I want to also add the concatenation of all documents in 
a collection as a field to every single document. I then search the 
index using both fields, and diminishing the effect of the collection 
field. This should improve the search results.

As an example, say I have the documents a:"look a cat" b:"my chimpansee 
is hairy" c:"dogs are playful" and many others. These three documents 
are grouped into one collection (of many). The term vectors for the 
documents would then be
a: {look, a, cat}
b: {my, chimpansee, is , hairy}
c: {dogs, are, playful}
If I create a term vector for the whole collection: {look, a, cat, my, 
chimpansee, is , hairy, dogs, are, playful} and add it to each of the 
documents as a separate field, the query "my hairy cat" scores well 
against document a because of the match on cat, but also because of the 
match on both cat and hairy on the collection field. Documents about the 
linux command 'cat' do not have the word "hairy" in their collection 
field (because they're part of a different collection), and so would not 
get this benefit. It's essentially a smoothing technique, since it 
allows query words that aren't in the document to still have some effect.

The problem of course is that storing these collection term vectors for 
each document greatly increases the size of the index and the indexing 
time. It would be alot faster if I could somehow use a second index to 
store the collections as documents, so I would only have to store one 
term vector per collection. (This isn't my own idea btw, I'm trying to 
replicate the results from some other research that used this method).

I hope this is more clear,
 Peter

Erick Erickson wrote:
> This seems kind of kludgy, but that may just mean I don't understand
> your problem very well.
>
> What is it that you're trying to accomplish? Searching constrained
> by topic or groups?
>
> If you're trying to search by groups, search the archive for the
> word "facet" or "faceted search".
>
> Otherwise, could you describe what behavior you're after and maybe
> there'd be more ideas....
>
> Best
> Erick
>
> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>>
>> Hi,
>>
>> I have the following problem. I'm indexing documents that belong to some
>> collection (ie. the dataset is divided into collections, which are
>> divided into documents). These documents become my lucene documents,
>> with some relatively small string that becomes the field I want to
>> search. However, I would also like to add to document d the
>> concatenation of all documents in d's collection as a field (mainly as a
>> smoothing technique, because documents correspond roughly to topics).
>> I'm currently doing just that, adding an extra field for the entire
>> concatenated collection to each document in that collection. Of course
>> this increases the index size and indexing time greatly (about 
>> five-fold).
>>
>> There must be a better way to do this. My idea was to create a second
>> index where the collections are indexed as (lucene) documents. This
>> index would have the text as a field, and a list of document id's
>> referring back to the main index. I could then retrieve the term vector
>> for each collection from this second index for each search result from
>> the original index.
>>
>> My question is if this is a smart approach. And if it is, which of
>> Lucene's classes should I use for this. The best I could find was the
>> FilterIndexReader. If extending the FilterIndexReader is really the best
>> way to go, could I simply override the document(int, FieldSelector)
>> method, or is there more to it? I doubt I'm the first person that's ever
>> wanted a many to one relation between fields and documents, so I hope
>> there's a simpler way about this.
>>
>> Thank you,
>> Peter
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 19 23:34:44 2007
Return-Path: <java-user-return-28159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3295 invoked from network); 19 May 2007 23:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 May 2007 23:34:43 -0000
Received: (qmail 86976 invoked by uid 500); 19 May 2007 23:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86871 invoked by uid 500); 19 May 2007 23:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86860 invoked by uid 99); 19 May 2007 23:34:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 16:34:41 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 16:34:34 -0700
Received: by ug-out-1314.google.com with SMTP id k40so662692ugc
        for <java-user@lucene.apache.org>; Sat, 19 May 2007 16:34:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ow/lTnyl7Z4O+s9QPu6TFePTue5jHrm8C31L2heAfyWdvTb2k+P3LFOYBcGtQinGDbQdjiWIQssxpeeEntfxMWXcg3GV2rp2pPoPhrXrQzBDRMYc77SGI5WUNIjR4z2PIEC7LHtOHeJHiKNbVUlQNDVY9yQCjurR40wFhwRrNJU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o4t6F2w9kdjzao0+4KUb3Bv+HpG/3Plfe82uY3sCRyBgMlM/wQbFD4puPkNYjhEazwuWd2eA3bx1OoZnVUXWMYgUp5ip8pUaPXzfY7OKMLW5+maFJlVyLQh9TfFRZUOowJbiiBNdg+aGDaDH3/oEMY/O/jL+Nv+BtOV4wt1/g4Q=
Received: by 10.82.180.17 with SMTP id c17mr5857267buf.1179617652302;
        Sat, 19 May 2007 16:34:12 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 19 May 2007 16:34:12 -0700 (PDT)
Message-ID: <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
Date: Sat, 19 May 2007 19:34:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: One (large) field shared by many documents
In-Reply-To: <464F775C.1020507@peterbloem.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39358_8869328.1179617652237"
References: <464F177B.3040304@peterbloem.nl>
	 <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
	 <464F775C.1020507@peterbloem.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39358_8869328.1179617652237
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're right, your index will bloat considerably. In fact, I'm surprised
it's only a factor of 5....

The only thing that comes to mind is really a variant on your approach
from your first e-mail. But I wouldn't use document ids because document
IDs can change. So using doc IDs is...er.... fraught.

So here's the variant. Go ahead and index your "collection vector",
but index it with a second field that is your "collection ID". Then, add
that collection ID to each document in your original index. So, you have
something like

a: text:{look, a, cat}  collectionID:32
b: text:{my, chimpansee, is , hairy} collectionID:32
c: text:{dogs, are, playful} collectionID:32

Your other index has
collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is , hairy,
dogs, are, playful}

Now, you essentially make two queries, one to get a set of
collection IDs from your second index (that is, querying your terms
against collectionVector) and using that set of collectionIDs in a
query against your first index.

You might be able to do some interesting things with boosts
to score either query more to your liking.

This will come close to doubling the size of your index, but your
first approach could bloat it by an arbitrary factor depending upon
how many documents were in your largest collection.....

One thing to note, however, is that there is no need to have
two separate physical indexes. Lucene does not require that
all  documents have the same fields. So this could all be in one
big happy index. As long as the fields are different in the two
sets of documents, the queries won't interfere with each other. In
that case, you'd have to name the "foreign key" field differently for
the sets of documents, say collectionID1 and collectionID2.


All that said, this approach bothers me because it's mixing
some database ideas with a Lucene index. I suppose in a controlled
situation where you won't be trying to do arbitrary joins it's probably
a misplaced unease. But I'm leery of trying to make Lucene act
like a database. But that may just be a personal problem <G>

The only other consideration is "how many collections do you have?"
The reason I ask is that in the worst case scenario, you'll have an
OR clause for every collection ID you have. Lucene can easily handle
many thousands of terms in an OR, but your search time will suffer.
And you'll have to take special action (really, just set MaxBooleanClauses)
if this is over 1024 or you'll get a TooManyClauses exception.

Best
Erick


On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>
> I'm sorry, I should have explained the intended behavior more clearly.
>
> The basic idea (without the collection fields) is that there are very
> simple documents in the index with one content field each. All I do with
> this index is a standard search in this text field. To improve the
> search results, I want to also add the concatenation of all documents in
> a collection as a field to every single document. I then search the
> index using both fields, and diminishing the effect of the collection
> field. This should improve the search results.
>
> As an example, say I have the documents a:"look a cat" b:"my chimpansee
> is hairy" c:"dogs are playful" and many others. These three documents
> are grouped into one collection (of many). The term vectors for the
> documents would then be
> a: {look, a, cat}
> b: {my, chimpansee, is , hairy}
> c: {dogs, are, playful}
> If I create a term vector for the whole collection: {look, a, cat, my,
> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
> documents as a separate field, the query "my hairy cat" scores well
> against document a because of the match on cat, but also because of the
> match on both cat and hairy on the collection field. Documents about the
> linux command 'cat' do not have the word "hairy" in their collection
> field (because they're part of a different collection), and so would not
> get this benefit. It's essentially a smoothing technique, since it
> allows query words that aren't in the document to still have some effect.
>
> The problem of course is that storing these collection term vectors for
> each document greatly increases the size of the index and the indexing
> time. It would be alot faster if I could somehow use a second index to
> store the collections as documents, so I would only have to store one
> term vector per collection. (This isn't my own idea btw, I'm trying to
> replicate the results from some other research that used this method).
>
> I hope this is more clear,
> Peter
>
> Erick Erickson wrote:
> > This seems kind of kludgy, but that may just mean I don't understand
> > your problem very well.
> >
> > What is it that you're trying to accomplish? Searching constrained
> > by topic or groups?
> >
> > If you're trying to search by groups, search the archive for the
> > word "facet" or "faceted search".
> >
> > Otherwise, could you describe what behavior you're after and maybe
> > there'd be more ideas....
> >
> > Best
> > Erick
> >
> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >>
> >> Hi,
> >>
> >> I have the following problem. I'm indexing documents that belong to
> some
> >> collection (ie. the dataset is divided into collections, which are
> >> divided into documents). These documents become my lucene documents,
> >> with some relatively small string that becomes the field I want to
> >> search. However, I would also like to add to document d the
> >> concatenation of all documents in d's collection as a field (mainly as
> a
> >> smoothing technique, because documents correspond roughly to topics).
> >> I'm currently doing just that, adding an extra field for the entire
> >> concatenated collection to each document in that collection. Of course
> >> this increases the index size and indexing time greatly (about
> >> five-fold).
> >>
> >> There must be a better way to do this. My idea was to create a second
> >> index where the collections are indexed as (lucene) documents. This
> >> index would have the text as a field, and a list of document id's
> >> referring back to the main index. I could then retrieve the term vector
> >> for each collection from this second index for each search result from
> >> the original index.
> >>
> >> My question is if this is a smart approach. And if it is, which of
> >> Lucene's classes should I use for this. The best I could find was the
> >> FilterIndexReader. If extending the FilterIndexReader is really the
> best
> >> way to go, could I simply override the document(int, FieldSelector)
> >> method, or is there more to it? I doubt I'm the first person that's
> ever
> >> wanted a many to one relation between fields and documents, so I hope
> >> there's a simpler way about this.
> >>
> >> Thank you,
> >> Peter
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39358_8869328.1179617652237--

From java-user-return-28160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 00:49:57 2007
Return-Path: <java-user-return-28160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14468 invoked from network); 20 May 2007 00:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 00:49:56 -0000
Received: (qmail 33209 invoked by uid 500); 20 May 2007 00:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33172 invoked by uid 500); 20 May 2007 00:49:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33161 invoked by uid 99); 20 May 2007 00:49:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 17:49:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 May 2007 17:49:45 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JIB00L01DXZIK@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Sun, 20 May 2007 02:49:23 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JIB00IKDEABW1@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Sun, 20 May 2007 02:49:23 +0200 (MEST)
Date: Sun, 20 May 2007 02:49:22 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: Re: One (large) field shared by many documents
In-reply-to: <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <464F9B12.5000804@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
References: <464F177B.3040304@peterbloem.nl>
 <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
 <464F775C.1020507@peterbloem.nl>
 <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, now we're getting somewhere. So I run the first query on the 
collection index, get a set of collection id's from that. But how do I 
use them in the second query on the document index? It should be easy 
enough to retrieve all documents in the returned collections (which is 
what I'm after), but then I want to rank them as if they had the 
collection's term vector as a field. Is there some way to modify a 
document just prior to processing?

I have several thousand collections, but the number of collections 
matching a query should remain quite small. The collections contain 
about as much text as a small webpage, so the chance that one query 
matches huge amounts of collections is small. If this does become a 
problem, I could still store the document id's. My data won't change, so 
there's no danger of the document id's changing. The end result of the 
project has to look like a production system, but it doesn't have to be 
one. :)

I can see why using Lucene like a database is worrying. There's already 
the problem of referential integrity (what if you update 
document/collection id's), which databases do well, and Lucene doesn't 
do at all (as there doesn't seem to be a standard mechanism for this 
sort of thing). On the other hand, I don't think this technique is very 
new. I think it's a common smoothing method in xml element retrieval 
(smoothing an element with the contents of its ancestor elements). So 
surely this sort of thing gets done a lot. I guess there are bound to be 
some limits to the inverse index that require less pretty tricks like these.

regards,
 Peter

Erick Erickson wrote:
> You're right, your index will bloat considerably. In fact, I'm surprised
> it's only a factor of 5....
>
> The only thing that comes to mind is really a variant on your approach
> from your first e-mail. But I wouldn't use document ids because document
> IDs can change. So using doc IDs is...er.... fraught.
>
> So here's the variant. Go ahead and index your "collection vector",
> but index it with a second field that is your "collection ID". Then, add
> that collection ID to each document in your original index. So, you have
> something like
>
> a: text:{look, a, cat}  collectionID:32
> b: text:{my, chimpansee, is , hairy} collectionID:32
> c: text:{dogs, are, playful} collectionID:32
>
> Your other index has
> collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is , 
> hairy,
> dogs, are, playful}
>
> Now, you essentially make two queries, one to get a set of
> collection IDs from your second index (that is, querying your terms
> against collectionVector) and using that set of collectionIDs in a
> query against your first index.
>
> You might be able to do some interesting things with boosts
> to score either query more to your liking.
>
> This will come close to doubling the size of your index, but your
> first approach could bloat it by an arbitrary factor depending upon
> how many documents were in your largest collection.....
>
> One thing to note, however, is that there is no need to have
> two separate physical indexes. Lucene does not require that
> all  documents have the same fields. So this could all be in one
> big happy index. As long as the fields are different in the two
> sets of documents, the queries won't interfere with each other. In
> that case, you'd have to name the "foreign key" field differently for
> the sets of documents, say collectionID1 and collectionID2.
>
>
> All that said, this approach bothers me because it's mixing
> some database ideas with a Lucene index. I suppose in a controlled
> situation where you won't be trying to do arbitrary joins it's probably
> a misplaced unease. But I'm leery of trying to make Lucene act
> like a database. But that may just be a personal problem <G>
>
> The only other consideration is "how many collections do you have?"
> The reason I ask is that in the worst case scenario, you'll have an
> OR clause for every collection ID you have. Lucene can easily handle
> many thousands of terms in an OR, but your search time will suffer.
> And you'll have to take special action (really, just set 
> MaxBooleanClauses)
> if this is over 1024 or you'll get a TooManyClauses exception.
>
> Best
> Erick
>
>
> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>>
>> I'm sorry, I should have explained the intended behavior more clearly.
>>
>> The basic idea (without the collection fields) is that there are very
>> simple documents in the index with one content field each. All I do with
>> this index is a standard search in this text field. To improve the
>> search results, I want to also add the concatenation of all documents in
>> a collection as a field to every single document. I then search the
>> index using both fields, and diminishing the effect of the collection
>> field. This should improve the search results.
>>
>> As an example, say I have the documents a:"look a cat" b:"my chimpansee
>> is hairy" c:"dogs are playful" and many others. These three documents
>> are grouped into one collection (of many). The term vectors for the
>> documents would then be
>> a: {look, a, cat}
>> b: {my, chimpansee, is , hairy}
>> c: {dogs, are, playful}
>> If I create a term vector for the whole collection: {look, a, cat, my,
>> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
>> documents as a separate field, the query "my hairy cat" scores well
>> against document a because of the match on cat, but also because of the
>> match on both cat and hairy on the collection field. Documents about the
>> linux command 'cat' do not have the word "hairy" in their collection
>> field (because they're part of a different collection), and so would not
>> get this benefit. It's essentially a smoothing technique, since it
>> allows query words that aren't in the document to still have some 
>> effect.
>>
>> The problem of course is that storing these collection term vectors for
>> each document greatly increases the size of the index and the indexing
>> time. It would be alot faster if I could somehow use a second index to
>> store the collections as documents, so I would only have to store one
>> term vector per collection. (This isn't my own idea btw, I'm trying to
>> replicate the results from some other research that used this method).
>>
>> I hope this is more clear,
>> Peter
>>
>> Erick Erickson wrote:
>> > This seems kind of kludgy, but that may just mean I don't understand
>> > your problem very well.
>> >
>> > What is it that you're trying to accomplish? Searching constrained
>> > by topic or groups?
>> >
>> > If you're trying to search by groups, search the archive for the
>> > word "facet" or "faceted search".
>> >
>> > Otherwise, could you describe what behavior you're after and maybe
>> > there'd be more ideas....
>> >
>> > Best
>> > Erick
>> >
>> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>> >>
>> >> Hi,
>> >>
>> >> I have the following problem. I'm indexing documents that belong to
>> some
>> >> collection (ie. the dataset is divided into collections, which are
>> >> divided into documents). These documents become my lucene documents,
>> >> with some relatively small string that becomes the field I want to
>> >> search. However, I would also like to add to document d the
>> >> concatenation of all documents in d's collection as a field 
>> (mainly as
>> a
>> >> smoothing technique, because documents correspond roughly to topics).
>> >> I'm currently doing just that, adding an extra field for the entire
>> >> concatenated collection to each document in that collection. Of 
>> course
>> >> this increases the index size and indexing time greatly (about
>> >> five-fold).
>> >>
>> >> There must be a better way to do this. My idea was to create a second
>> >> index where the collections are indexed as (lucene) documents. This
>> >> index would have the text as a field, and a list of document id's
>> >> referring back to the main index. I could then retrieve the term 
>> vector
>> >> for each collection from this second index for each search result 
>> from
>> >> the original index.
>> >>
>> >> My question is if this is a smart approach. And if it is, which of
>> >> Lucene's classes should I use for this. The best I could find was the
>> >> FilterIndexReader. If extending the FilterIndexReader is really the
>> best
>> >> way to go, could I simply override the document(int, FieldSelector)
>> >> method, or is there more to it? I doubt I'm the first person that's
>> ever
>> >> wanted a many to one relation between fields and documents, so I hope
>> >> there's a simpler way about this.
>> >>
>> >> Thank you,
>> >> Peter
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 07:03:54 2007
Return-Path: <java-user-return-28161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77665 invoked from network); 20 May 2007 07:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 07:03:53 -0000
Received: (qmail 71667 invoked by uid 500); 20 May 2007 07:03:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71632 invoked by uid 500); 20 May 2007 07:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71621 invoked by uid 99); 20 May 2007 07:03:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 00:03:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 May 2007 00:03:43 -0700
Received: (qmail invoked by alias); 20 May 2007 07:03:21 -0000
Received: from p548C784C.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.120.76]
  by mail.gmx.net (mp022) with SMTP; 20 May 2007 09:03:21 +0200
X-Authenticated: #3493418
X-Provags-ID: V01U2FsdGVkX18f7EYBrKAfGO8O48lSKZAtm0ebNVwnRZqFkP3NXu
	Cku9ww+UT4naWS
Message-ID: <464FF26C.9070806@gmx.de>
Date: Sun, 20 May 2007 09:02:04 +0200
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: What is the best way to split substring words
References: <10698288.post@talk.nabble.com>
In-Reply-To: <10698288.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

bhecht wrote:
> I want to be able to split tokens by giving a list of substring words.
> So I can give a list f subwords like: "strasse", "gasse",
> And the token "mainstrasse" or "maingasse"  will be split to 2 tokens "main"
> and "strasse".

IMBEMBA, PASQUALINO: A Splitter for German Compound Words. Free 
University of Bolzano, Bozen, 2006

http://www.gossamer-threads.com/lists/lucene/java-user/40164?do=post_view_threaded

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 09:18:58 2007
Return-Path: <java-user-return-28162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17312 invoked from network); 20 May 2007 09:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 09:18:54 -0000
Received: (qmail 82194 invoked by uid 500); 20 May 2007 09:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82166 invoked by uid 500); 20 May 2007 09:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82155 invoked by uid 99); 20 May 2007 09:18:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 02:18:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 02:18:45 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id l4K9INsK095489
	for <java-user@lucene.apache.org>; Sun, 20 May 2007 11:18:23 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: One (large) field shared by many documents
Date: Sun, 20 May 2007 11:18:22 +0200
User-Agent: KMail/1.8.2
References: <464F177B.3040304@peterbloem.nl> <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com> <464F9B12.5000804@peterbloem.nl>
In-Reply-To: <464F9B12.5000804@peterbloem.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705201118.22863.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Sunday 20 May 2007 02:49, Peter Bloem wrote:
> Ah, now we're getting somewhere. So I run the first query on the 
> collection index, get a set of collection id's from that. But how do I 
> use them in the second query on the document index? It should be easy 
> enough to retrieve all documents in the returned collections (which is 
> what I'm after), but then I want to rank them as if they had the 
> collection's term vector as a field. Is there some way to modify a 
> document just prior to processing?

One way is indeed to index the docs and collections separately.
The trick is to use FieldCaches for your collection id's.
The price is that these FieldCaches must be loaded initially.

First query the collections, using a HitCollector
to keep all their scores by your collection id using a FieldCache.
By the time your indexes get really large, you may
want to keep only a maximum number of the best scoring
collections here.

Then query the docs, and smooth their scores during the search
using the collection scores, using a FieldCache for the collection
id per doc. For this, have a look at the IndexSearcher code on how
to hook in your own smoothing HitCollector to return for example
a TopDocs.

> 
> I have several thousand collections, but the number of collections 
> matching a query should remain quite small. The collections contain 
> about as much text as a small webpage, so the chance that one query 
> matches huge amounts of collections is small. If this does become a 
> problem, I could still store the document id's. My data won't change, so 
> there's no danger of the document id's changing. The end result of the 
> project has to look like a production system, but it doesn't have to be 
> one. :)

This does not sound like something that will run out of RAM for 
a few FieldCaches.
 
> I can see why using Lucene like a database is worrying. There's already 
> the problem of referential integrity (what if you update 
> document/collection id's), which databases do well, and Lucene doesn't 
> do at all (as there doesn't seem to be a standard mechanism for this 
> sort of thing).

Relational databases also use caches for various relational keys.
With lucene you just have to explicitly choose them and program their use.

> On the other hand, I don't think this technique is very  
> new. I think it's a common smoothing method in xml element retrieval  
> (smoothing an element with the contents of its ancestor elements). So 
> surely this sort of thing gets done a lot. I guess there are bound to be 
> some limits to the inverse index that require less pretty tricks like these.

For small texts like link anchors it is easier to add them to each page as a 
"relational attribute".
A collection text looks more like a sum text than like a relational attribute, 
so treating it as a separate lucene doc (lucene "entity") feels just about 
right.

Regards,
Paul Elschot


> 
> regards,
>  Peter
> 
> Erick Erickson wrote:
> > You're right, your index will bloat considerably. In fact, I'm surprised
> > it's only a factor of 5....
> >
> > The only thing that comes to mind is really a variant on your approach
> > from your first e-mail. But I wouldn't use document ids because document
> > IDs can change. So using doc IDs is...er.... fraught.
> >
> > So here's the variant. Go ahead and index your "collection vector",
> > but index it with a second field that is your "collection ID". Then, add
> > that collection ID to each document in your original index. So, you have
> > something like
> >
> > a: text:{look, a, cat}  collectionID:32
> > b: text:{my, chimpansee, is , hairy} collectionID:32
> > c: text:{dogs, are, playful} collectionID:32
> >
> > Your other index has
> > collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is , 
> > hairy,
> > dogs, are, playful}
> >
> > Now, you essentially make two queries, one to get a set of
> > collection IDs from your second index (that is, querying your terms
> > against collectionVector) and using that set of collectionIDs in a
> > query against your first index.
> >
> > You might be able to do some interesting things with boosts
> > to score either query more to your liking.
> >
> > This will come close to doubling the size of your index, but your
> > first approach could bloat it by an arbitrary factor depending upon
> > how many documents were in your largest collection.....
> >
> > One thing to note, however, is that there is no need to have
> > two separate physical indexes. Lucene does not require that
> > all  documents have the same fields. So this could all be in one
> > big happy index. As long as the fields are different in the two
> > sets of documents, the queries won't interfere with each other. In
> > that case, you'd have to name the "foreign key" field differently for
> > the sets of documents, say collectionID1 and collectionID2.
> >
> >
> > All that said, this approach bothers me because it's mixing
> > some database ideas with a Lucene index. I suppose in a controlled
> > situation where you won't be trying to do arbitrary joins it's probably
> > a misplaced unease. But I'm leery of trying to make Lucene act
> > like a database. But that may just be a personal problem <G>
> >
> > The only other consideration is "how many collections do you have?"
> > The reason I ask is that in the worst case scenario, you'll have an
> > OR clause for every collection ID you have. Lucene can easily handle
> > many thousands of terms in an OR, but your search time will suffer.
> > And you'll have to take special action (really, just set 
> > MaxBooleanClauses)
> > if this is over 1024 or you'll get a TooManyClauses exception.
> >
> > Best
> > Erick
> >
> >
> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >>
> >> I'm sorry, I should have explained the intended behavior more clearly.
> >>
> >> The basic idea (without the collection fields) is that there are very
> >> simple documents in the index with one content field each. All I do with
> >> this index is a standard search in this text field. To improve the
> >> search results, I want to also add the concatenation of all documents in
> >> a collection as a field to every single document. I then search the
> >> index using both fields, and diminishing the effect of the collection
> >> field. This should improve the search results.
> >>
> >> As an example, say I have the documents a:"look a cat" b:"my chimpansee
> >> is hairy" c:"dogs are playful" and many others. These three documents
> >> are grouped into one collection (of many). The term vectors for the
> >> documents would then be
> >> a: {look, a, cat}
> >> b: {my, chimpansee, is , hairy}
> >> c: {dogs, are, playful}
> >> If I create a term vector for the whole collection: {look, a, cat, my,
> >> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
> >> documents as a separate field, the query "my hairy cat" scores well
> >> against document a because of the match on cat, but also because of the
> >> match on both cat and hairy on the collection field. Documents about the
> >> linux command 'cat' do not have the word "hairy" in their collection
> >> field (because they're part of a different collection), and so would not
> >> get this benefit. It's essentially a smoothing technique, since it
> >> allows query words that aren't in the document to still have some 
> >> effect.
> >>
> >> The problem of course is that storing these collection term vectors for
> >> each document greatly increases the size of the index and the indexing
> >> time. It would be alot faster if I could somehow use a second index to
> >> store the collections as documents, so I would only have to store one
> >> term vector per collection. (This isn't my own idea btw, I'm trying to
> >> replicate the results from some other research that used this method).
> >>
> >> I hope this is more clear,
> >> Peter
> >>
> >> Erick Erickson wrote:
> >> > This seems kind of kludgy, but that may just mean I don't understand
> >> > your problem very well.
> >> >
> >> > What is it that you're trying to accomplish? Searching constrained
> >> > by topic or groups?
> >> >
> >> > If you're trying to search by groups, search the archive for the
> >> > word "facet" or "faceted search".
> >> >
> >> > Otherwise, could you describe what behavior you're after and maybe
> >> > there'd be more ideas....
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >> >>
> >> >> Hi,
> >> >>
> >> >> I have the following problem. I'm indexing documents that belong to
> >> some
> >> >> collection (ie. the dataset is divided into collections, which are
> >> >> divided into documents). These documents become my lucene documents,
> >> >> with some relatively small string that becomes the field I want to
> >> >> search. However, I would also like to add to document d the
> >> >> concatenation of all documents in d's collection as a field 
> >> (mainly as
> >> a
> >> >> smoothing technique, because documents correspond roughly to topics).
> >> >> I'm currently doing just that, adding an extra field for the entire
> >> >> concatenated collection to each document in that collection. Of 
> >> course
> >> >> this increases the index size and indexing time greatly (about
> >> >> five-fold).
> >> >>
> >> >> There must be a better way to do this. My idea was to create a second
> >> >> index where the collections are indexed as (lucene) documents. This
> >> >> index would have the text as a field, and a list of document id's
> >> >> referring back to the main index. I could then retrieve the term 
> >> vector
> >> >> for each collection from this second index for each search result 
> >> from
> >> >> the original index.
> >> >>
> >> >> My question is if this is a smart approach. And if it is, which of
> >> >> Lucene's classes should I use for this. The best I could find was the
> >> >> FilterIndexReader. If extending the FilterIndexReader is really the
> >> best
> >> >> way to go, could I simply override the document(int, FieldSelector)
> >> >> method, or is there more to it? I doubt I'm the first person that's
> >> ever
> >> >> wanted a many to one relation between fields and documents, so I hope
> >> >> there's a simpler way about this.
> >> >>
> >> >> Thank you,
> >> >> Peter
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 12:08:36 2007
Return-Path: <java-user-return-28163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61304 invoked from network); 20 May 2007 12:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 12:08:35 -0000
Received: (qmail 97852 invoked by uid 500); 20 May 2007 12:08:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97030 invoked by uid 500); 20 May 2007 12:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97013 invoked by uid 99); 20 May 2007 12:08:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 05:08:33 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,MIME_BOUND_NEXTPART,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of saurabh@danicorp.com designates 63.134.207.12 as permitted sender)
Received: from [63.134.207.12] (HELO gwa3.webcontrolcenter.com) (63.134.207.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 05:08:25 -0700
Received: from maila25.webcontrolcenter.com (unverified [216.119.106.22]) 
	by gwa3.webcontrolcenter.com (SurgeMail 3.8f3) with ESMTP id 4822739-1777421 
	for multiple; Sun, 20 May 2007 05:07:38 -0700
Received: from [68.83.190.196] by maila25.webcontrolcenter.com via HTTP; Sun, 20 May 2007 05:06:56 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary=----_SmarterMail_NextPart_7660403541056347
Date: Sun, 20 May 2007 05:06:56 -0700
Subject: Command line search tool using Lucene (targeted for Site Search)
From: "Saurabh Dani" <saurabh@danicorp.com>
Reply-To: saurabh@danicorp.com
To: <java-user@lucene.apache.org>,<solr-user@lucene.apache.org>,<kinosearch@rectangular.com>,<lucene-net-user@incubator.apache.org>
CC: <saurabh@danicorp.com>
Message-ID: <98655fc130104e0e915304a57fe688bd@maila25.webcontrolcenter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------_SmarterMail_NextPart_7660403541056347
Content-Type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0D=0A=0D=0AGreetings All,=0D=0A=0D=0AWe would like to introduce our java l=
ucene based command line search tool, Minalyzer Lite.=0D=0A=0D=0AMinalyzer =
Lite ships with an indexing executable, which can index data from file syst=
em, databases,  by crawling web sites or an ARC file (output of Heritrix Cr=
awler). The end user does not need any knowledge of lucene or java.=0D=0A=
=0D=0AThe search executable takes the keywords and index collection name as=
 inputs and returns the resultset as an XML which can be parsed and displye=
d by calling programs.=0D=0A=0D=0AFor those of you who are aware of Solr, i=
t is in no way a competitive product for Solr. Our target is primarily to p=
rovide "Site Search" for those web sites, which are hosted on low cost shar=
ed servers and do not have JAVA installed (as we are shipping an embedded v=
ersion of Java and the calling program calls the search using exec / backti=
ck / system commands).=0D=0A=0D=0AThis page explains how site search works =
- http://www.minalyzer.com/documentation/minalyzerlite--how-site-search-wor=
ks=0D=0A=0D=0AWe have created some live examples to demonstrate the search =
features. Most of these are running on shared hosting accounts which cost l=
ess than 3 USD a month.=0D=0A=0D=0APhp script hosted on Linux server http:/=
/demo1.minalyzer.com/minalyzerlite/search4.php =0D=0APerl script hosted on =
Linux server http://demo1.minalyzer.com/minalyzerlite/perl/search.pl=0D=0AA=
spx .Net running on Windows server http://www.minalyzer.com/mlitedemos/aspx=
/samplesearch.aspx=0D=0A=0D=0AWe have done tests with close beta groups tha=
t we feel confident enough to announce the public availability, but we are =
still calling it beta until we upgrade to Lucene 2.1 and make the examples =
that we ship with the product more error proof and robust.=0D=0A=0D=0AThank=
s=0D=0ASaurabh

------_SmarterMail_NextPart_7660403541056347--



From java-user-return-28164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 14:10:00 2007
Return-Path: <java-user-return-28164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97940 invoked from network); 20 May 2007 14:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 14:10:00 -0000
Received: (qmail 84144 invoked by uid 500); 20 May 2007 14:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84117 invoked by uid 500); 20 May 2007 14:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84102 invoked by uid 99); 20 May 2007 14:09:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 07:09:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 07:09:50 -0700
Received: by ug-out-1314.google.com with SMTP id k40so735766ugc
        for <java-user@lucene.apache.org>; Sun, 20 May 2007 07:09:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FlTLjo/0c3ajrHq5hNeZ4yj933CiLLTzmRLnXuR8lx7gA3TswYI+wkEP4791wjJsC75ZKUpcWgvDEH8ypaCGS0xmiJvfxpPUl7ZU3gPDy7FYpLb3YbCC/fd29RNcbrGidusts6nL7kvhN8Psd+ORby0D8NyeJ5AwO3rqkiwyFCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K4/GokE5RdmOhn8WXPzO/RMQHsfyH8inhNdtBMj+o+vYcQZHR7HwFNWGV+c4AB3M7c43tbBu7DPGDpZulbmSbs8SsrgWRNtbIUIefT9FUD19cQgwE+SzcEUK/eLc3zWZu8dQ/x5zauU90EY9+HrYuYoXEnO+7BjmaE2OjYooxOc=
Received: by 10.82.118.2 with SMTP id q2mr6715948buc.1179670168432;
        Sun, 20 May 2007 07:09:28 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 20 May 2007 07:09:28 -0700 (PDT)
Message-ID: <359a92830705200709k3ed9e22ra92a083cf864d24e@mail.gmail.com>
Date: Sun, 20 May 2007 10:09:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: One (large) field shared by many documents
In-Reply-To: <464F9B12.5000804@peterbloem.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41491_32596835.1179670168380"
References: <464F177B.3040304@peterbloem.nl>
	 <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
	 <464F775C.1020507@peterbloem.nl>
	 <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
	 <464F9B12.5000804@peterbloem.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41491_32596835.1179670168380
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See Paul's e-mail, he's talking about a place I haven't been in Lucene
yet.

Other than that, see below....

On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>
> Ah, now we're getting somewhere. So I run the first query on the
> collection index, get a set of collection id's from that. But how do I
> use them in the second query on the document index? It should be easy
> enough to retrieve all documents in the returned collections (which is
> what I'm after), but then I want to rank them as if they had the
> collection's term vector as a field. Is there some way to modify a
> document just prior to processing?


You could think about boosting on the "collectionid" based on the
ranking in the first query. NOTE: I really have no idea whether this
would be satisfactory or not, so please post what you find out if
you try it.

Say your first query returned values like
collectionid     score
88                   0.80
63                   0.45
100                 0.20

You might then build up a query something like...

text:the text from the query AND
    (collectionID:88^8 OR CollectionID:63^4.5 OR CollectionID:100^2)..
(NOTE, not very good Lucene query syntax here<G>).

Which *should* help weight the results by collectionID
by how "well" the query matched the collection vector.

You'll have to delve into the scoring and boosting. For instance, if you get
your collection IDs from a HitCollector, the scores will be raw. That is,
not
between 0.0 and 1.0. Also, you may want to boost the text term in the
second query depending upon how you want to bias hits in the
actual text of the document.

 You could also do this manually. That is, you've generated a list
of collection IDs and scores anyway. Just keep it around, execute
your second query without reference to the collectionIDs
(i.e. text: text of query), and then use a HitCollector and massage the
scores as you see fit. Think about using a FieldSortedHitQueue to sort
the results. If you do this, also think about going directly to your index
via TermEnum/TermDocs to get the collection IDs associated with each
doc rather than using IndexReader.document(ID). See the warning in
HitCollector.collect().

I have several thousand collections, but the number of collections
> matching a query should remain quite small. The collections contain
> about as much text as a small webpage, so the chance that one query
> matches huge amounts of collections is small. If this does become a
> problem, I could still store the document id's. My data won't change, so
> there's no danger of the document id's changing. The end result of the
> project has to look like a production system, but it doesn't have to be
> one. :)


I don't see how storing the doc IDs makes the problem better. Building up
the OR clause would seem to be worse since there's a many-to-one
relationship between the document IDs and collection IDs. Your clause
would only get bigger.


I can see why using Lucene like a database is worrying. There's already
> the problem of referential integrity (what if you update
> document/collection id's), which databases do well, and Lucene doesn't
> do at all (as there doesn't seem to be a standard mechanism for this
> sort of thing). On the other hand, I don't think this technique is very
> new. I think it's a common smoothing method in xml element retrieval
> (smoothing an element with the contents of its ancestor elements). So
> surely this sort of thing gets done a lot. I guess there are bound to be
> some limits to the inverse index that require less pretty tricks like
> these.


Which is one of the reasons I mentioned collection IDs. Since you control
them, they don't need to change ever. You can freely update their content
as you add documents without having to regenerate the entire index.

But you're right, referential integrity is not part of Lucene. And I doubt
if it
ever will be, it's just not part of what Lucene is designed to do. There was
a very interesting thread a while ago about embedding Lucene in an Oracle
database. Since it's not relevant to my problem space, I barely skimmed it,
but
if you search the archive for posts authored by Marcelo Ochoa, you'll find
them.

Best
Erick


regards,
> Peter
>
> Erick Erickson wrote:
> > You're right, your index will bloat considerably. In fact, I'm surprised
> > it's only a factor of 5....
> >
> > The only thing that comes to mind is really a variant on your approach
> > from your first e-mail. But I wouldn't use document ids because document
> > IDs can change. So using doc IDs is...er.... fraught.
> >
> > So here's the variant. Go ahead and index your "collection vector",
> > but index it with a second field that is your "collection ID". Then, add
> > that collection ID to each document in your original index. So, you have
> > something like
> >
> > a: text:{look, a, cat}  collectionID:32
> > b: text:{my, chimpansee, is , hairy} collectionID:32
> > c: text:{dogs, are, playful} collectionID:32
> >
> > Your other index has
> > collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is ,
> > hairy,
> > dogs, are, playful}
> >
> > Now, you essentially make two queries, one to get a set of
> > collection IDs from your second index (that is, querying your terms
> > against collectionVector) and using that set of collectionIDs in a
> > query against your first index.
> >
> > You might be able to do some interesting things with boosts
> > to score either query more to your liking.
> >
> > This will come close to doubling the size of your index, but your
> > first approach could bloat it by an arbitrary factor depending upon
> > how many documents were in your largest collection.....
> >
> > One thing to note, however, is that there is no need to have
> > two separate physical indexes. Lucene does not require that
> > all  documents have the same fields. So this could all be in one
> > big happy index. As long as the fields are different in the two
> > sets of documents, the queries won't interfere with each other. In
> > that case, you'd have to name the "foreign key" field differently for
> > the sets of documents, say collectionID1 and collectionID2.
> >
> >
> > All that said, this approach bothers me because it's mixing
> > some database ideas with a Lucene index. I suppose in a controlled
> > situation where you won't be trying to do arbitrary joins it's probably
> > a misplaced unease. But I'm leery of trying to make Lucene act
> > like a database. But that may just be a personal problem <G>
> >
> > The only other consideration is "how many collections do you have?"
> > The reason I ask is that in the worst case scenario, you'll have an
> > OR clause for every collection ID you have. Lucene can easily handle
> > many thousands of terms in an OR, but your search time will suffer.
> > And you'll have to take special action (really, just set
> > MaxBooleanClauses)
> > if this is over 1024 or you'll get a TooManyClauses exception.
> >
> > Best
> > Erick
> >
> >
> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >>
> >> I'm sorry, I should have explained the intended behavior more clearly.
> >>
> >> The basic idea (without the collection fields) is that there are very
> >> simple documents in the index with one content field each. All I do
> with
> >> this index is a standard search in this text field. To improve the
> >> search results, I want to also add the concatenation of all documents
> in
> >> a collection as a field to every single document. I then search the
> >> index using both fields, and diminishing the effect of the collection
> >> field. This should improve the search results.
> >>
> >> As an example, say I have the documents a:"look a cat" b:"my chimpansee
> >> is hairy" c:"dogs are playful" and many others. These three documents
> >> are grouped into one collection (of many). The term vectors for the
> >> documents would then be
> >> a: {look, a, cat}
> >> b: {my, chimpansee, is , hairy}
> >> c: {dogs, are, playful}
> >> If I create a term vector for the whole collection: {look, a, cat, my,
> >> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
> >> documents as a separate field, the query "my hairy cat" scores well
> >> against document a because of the match on cat, but also because of the
> >> match on both cat and hairy on the collection field. Documents about
> the
> >> linux command 'cat' do not have the word "hairy" in their collection
> >> field (because they're part of a different collection), and so would
> not
> >> get this benefit. It's essentially a smoothing technique, since it
> >> allows query words that aren't in the document to still have some
> >> effect.
> >>
> >> The problem of course is that storing these collection term vectors for
> >> each document greatly increases the size of the index and the indexing
> >> time. It would be alot faster if I could somehow use a second index to
> >> store the collections as documents, so I would only have to store one
> >> term vector per collection. (This isn't my own idea btw, I'm trying to
> >> replicate the results from some other research that used this method).
> >>
> >> I hope this is more clear,
> >> Peter
> >>
> >> Erick Erickson wrote:
> >> > This seems kind of kludgy, but that may just mean I don't understand
> >> > your problem very well.
> >> >
> >> > What is it that you're trying to accomplish? Searching constrained
> >> > by topic or groups?
> >> >
> >> > If you're trying to search by groups, search the archive for the
> >> > word "facet" or "faceted search".
> >> >
> >> > Otherwise, could you describe what behavior you're after and maybe
> >> > there'd be more ideas....
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >> >>
> >> >> Hi,
> >> >>
> >> >> I have the following problem. I'm indexing documents that belong to
> >> some
> >> >> collection (ie. the dataset is divided into collections, which are
> >> >> divided into documents). These documents become my lucene documents,
> >> >> with some relatively small string that becomes the field I want to
> >> >> search. However, I would also like to add to document d the
> >> >> concatenation of all documents in d's collection as a field
> >> (mainly as
> >> a
> >> >> smoothing technique, because documents correspond roughly to
> topics).
> >> >> I'm currently doing just that, adding an extra field for the entire
> >> >> concatenated collection to each document in that collection. Of
> >> course
> >> >> this increases the index size and indexing time greatly (about
> >> >> five-fold).
> >> >>
> >> >> There must be a better way to do this. My idea was to create a
> second
> >> >> index where the collections are indexed as (lucene) documents. This
> >> >> index would have the text as a field, and a list of document id's
> >> >> referring back to the main index. I could then retrieve the term
> >> vector
> >> >> for each collection from this second index for each search result
> >> from
> >> >> the original index.
> >> >>
> >> >> My question is if this is a smart approach. And if it is, which of
> >> >> Lucene's classes should I use for this. The best I could find was
> the
> >> >> FilterIndexReader. If extending the FilterIndexReader is really the
> >> best
> >> >> way to go, could I simply override the document(int, FieldSelector)
> >> >> method, or is there more to it? I doubt I'm the first person that's
> >> ever
> >> >> wanted a many to one relation between fields and documents, so I
> hope
> >> >> there's a simpler way about this.
> >> >>
> >> >> Thank you,
> >> >> Peter
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41491_32596835.1179670168380--

From java-user-return-28165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 17:36:31 2007
Return-Path: <java-user-return-28165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37060 invoked from network); 20 May 2007 17:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 17:36:30 -0000
Received: (qmail 89199 invoked by uid 500); 20 May 2007 17:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89173 invoked by uid 500); 20 May 2007 17:36:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89162 invoked by uid 99); 20 May 2007 17:36:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 10:36:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 10:36:22 -0700
Received: by an-out-0708.google.com with SMTP id b8so330134ana
        for <java-user@lucene.apache.org>; Sun, 20 May 2007 10:36:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QJ8P4o7LSiNqH4dFtapQhHA8XWPXLPRQBdCKa8g4f2z4e4c+yLAX4cckhGCoFUGuBgfuSQxsdfPT6B64MjNRwZuf9/ZRZkgDt4AyfYmMPaX1Cw/CQw2/8dsCqZwtzJT9iJzkgwQAHo7n/F7His8jPkGO3QN6DMJnJzvzdWcwuKs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=g4XhqYpxw7H4+KCRVykIet6RqgO3zGq4VqXB1zOdL829WD8u0oQjYI/SggOUQeHi9slGzfoMnaODImmdN7Yp8s938f15JJBfsOjSGiHRMahRgeL5HqD+irO/+7vnZTPhp9MXen9pZX65XYiMAM44yDkyVFq+9luOvYA5rk0+QQo=
Received: by 10.100.9.19 with SMTP id 19mr2477688ani.1179682560888;
        Sun, 20 May 2007 10:36:00 -0700 (PDT)
Received: by 10.100.57.3 with HTTP; Sun, 20 May 2007 10:36:00 -0700 (PDT)
Message-ID: <c38ea6f20705201036w49aa73c9n59fe13177f4b3e1a@mail.gmail.com>
Date: Sun, 20 May 2007 10:36:00 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <200705181111.21310.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86107_18015296.1179682560822"
References: <752080.39971.qm@web50308.mail.re2.yahoo.com>
	 <200705181111.21310.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86107_18015296.1179682560822
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you for the clarification.

I assume that hits usually return in ranking order which makes sense in
terms how one usually wants to display the result.  In terms of access speed
this is the non wanted order.  Though it is not a big deal sorting the array
it might be interesting thinking about providing search calls with a
parameter defining the hits order allowing to have Lucene returning the
result in document id order if needed.

Andreas


On 5/18/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Otis,
>
> See below.
>
> On Friday 18 May 2007 05:03, Otis Gospodnetic wrote:
> > ----- Original Message ----
> > From: Paul Elschot <paul.elschot@xs4all.nl>
> >
> > On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> > > I am currently exploring how to solve performance problems I encounter
> with
> > > Lucene document reads.
> > >
> > > We have amongst other fields one field (default) storing all
> searchable
> > > fields.  This field can become of considerable size since we
> are  indexing
> > > documents and  store the content for display within results.
> > >
> > > I noticed that the read can be very expensive.  I wonder now if it
> would
> > > make sense to add this field as Field.Store.Compress to the
> index.  Can
> > > someone tell me if this would speed up the document read or if this is
> > > something only interesting for saving space.
> >
> > I have not tried the compression yet, but in my experience a good way
> > to reduce the costs of document reads from a disk is by reading them
> > in document number order whenever possible. In this way one saves
> > on the disk head seeks.
> > Compression should actually help reducing the costs of disk head seeks
> > even more.
> >
> > OG: Does this really help in a multi-user environment where there are
> multiple parallel queries hitting the index and reading data from all over
> the index and the disk?  They will all share the same disk head, so the
> head
> will still have to jump around to service all these requests, even if each
> request is being careful to read documents in docId order, no?
>
> When the requests for reading docs come in parallel, the underlying OS
> will normally favour the request for which the disk head needs to move
> only very little. In those cases reading in doc id order also helps
> throughput by allowing the OS to merge the requests for which the
> head then needs to move even less per retrieved doc.
> For example, with 3 retrieved docs per query:
> 10 1 5 sorts into: 1 5 10.
> 7 12 3 sorts into: 3 7 12.
> 1 5 10 and 3 7 12 merge into: 1 3 5 7 10 12, total seek distance: 11.
> Unsorted these could merge into: 7 10 12 3 1 5, total seek distance: 20.
>
> Iirc Hits does not retrieve docs in doc id order.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86107_18015296.1179682560822--

From java-user-return-28166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 17:53:33 2007
Return-Path: <java-user-return-28166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40000 invoked from network); 20 May 2007 17:53:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 17:53:32 -0000
Received: (qmail 6741 invoked by uid 500); 20 May 2007 17:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6550 invoked by uid 500); 20 May 2007 17:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6539 invoked by uid 99); 20 May 2007 17:53:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 10:53:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 10:53:23 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JIC00E01PGP76@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Sun, 20 May 2007 19:53:01 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JIC00561POCJ2@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Sun, 20 May 2007 19:53:01 +0200 (MEST)
Date: Sun, 20 May 2007 19:52:59 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: Re: One (large) field shared by many documents
In-reply-to: <200705201118.22863.paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Message-id: <46508AFB.9080603@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
References: <464F177B.3040304@peterbloem.nl>
 <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
 <464F9B12.5000804@peterbloem.nl> <200705201118.22863.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your reply. This is getting me much deeper into the uncharted 
territories of Lucene, especially the area of FieldCaches, but it's also 
piqued my curiosity. Most of what I've been able to find are discussions 
by people that are already using FieldCache, rather than explanations of 
what they actually are. From what I understand a FieldCache caches 
certain values, and has methods that retrieve the information from the 
cache, or from a provided IndexReader if the cache doesn't have the 
requested value. My main question is where to get a fieldcache, and how 
to add things to it. The only publically available one in the API seems 
to be FieldCache.DEFAULT, but you speak of multiple fieldcaches. I could 
of course borrow FieldCacheImpl by copying the file to my own package, 
but that would probably affect the license of my code (not that I care 
much about that, but it does feel like another can of worms).

Do the scores for the collection id's get stored in FieldCache.DEFAULT 
by the searcher or should I see to that myself? And what exactly does 
the String field parameter in the getters do? Is this a lucene field, or 
simply a key with which to retrieve the cached values?

I'm sorry to be asking this many questions. Normally I would dig into 
the source code and try to figure this out myself, but I have a deadline 
that is approaching at a rather frightening speed. And in any case, it 
doesn't hurt to have these issues explained somewhere on the internet, 
in case somebody finds himself in the same situation.

All this business about fieldcaches, has led me to think that I might be 
better off caching the collection scores for each query myself. The 
process would then look like this:
* query the collection index with the user query, and calculate the 
scores per collection (possibly using only the top n collections, if I 
get too many)
* store the collection scores in a (weak) HashMap<String, Float> (or 
maybe a treemap) mapping collection id's (which are strings) to the 
collection scores (which are floats)
* retrieve all documents in all collections (and perhaps any documents 
that fit the query by themselves, if I ignored any collections)
* during the scoring process, score the document normally, retrieve the 
collection id from the document, retrieve the collection score from the 
hashmap and add it to the original score (possibly multiplying it by a 
scalar 0<s<1, to diminish the effect of the collection. As far as I can 
tell, this returns the same score as it would when the collection is 
just another field in the document (boosted by s).

If I understand you correctly, the FieldCache would take the place of 
the HashMap. Does this approach have any significant problems compared 
to using a FieldCache?

Another point I'm unclear about is where exactly to implement the last 
step. IndexSearcher seems to call Scorer.score(HitCollector) for the 
whole set of documents, which looks like it has a score() method for a 
single document/query collection. I guess I could extend Scorer to wrap 
around the regular scorer used, but this would also require me to extend 
Weight. I'm hoping there's an easier way to accomplish all this.

The two performance penalties here that I can see are retrieving all 
documents from all returned collections (as pointed out by Erick), since 
it requires a whole bunch of OR clauses (for collection id) and 
populating the hash map with the collection id's. The effect of both 
depends on the number of collections. Unfortunately, a closer look at 
the data tells me that the amount of collections is around a hundred 
thousand.On the other hand, any reasonable query should return only as 
much collections as it would from a set of medium sized documents. I 
guess the only way to find out how bad the performance will be, is to 
implement it.

regards,
 Peter

Paul Elschot wrote:
> On Sunday 20 May 2007 02:49, Peter Bloem wrote:
>   
>> Ah, now we're getting somewhere. So I run the first query on the 
>> collection index, get a set of collection id's from that. But how do I 
>> use them in the second query on the document index? It should be easy 
>> enough to retrieve all documents in the returned collections (which is 
>> what I'm after), but then I want to rank them as if they had the 
>> collection's term vector as a field. Is there some way to modify a 
>> document just prior to processing?
>>     
>
> One way is indeed to index the docs and collections separately.
> The trick is to use FieldCaches for your collection id's.
> The price is that these FieldCaches must be loaded initially.
>
> First query the collections, using a HitCollector
> to keep all their scores by your collection id using a FieldCache.
> By the time your indexes get really large, you may
> want to keep only a maximum number of the best scoring
> collections here.
>
> Then query the docs, and smooth their scores during the search
> using the collection scores, using a FieldCache for the collection
> id per doc. For this, have a look at the IndexSearcher code on how
> to hook in your own smoothing HitCollector to return for example
> a TopDocs.
>   
>> I have several thousand collections, but the number of collections 
>> matching a query should remain quite small. The collections contain 
>> about as much text as a small webpage, so the chance that one query 
>> matches huge amounts of collections is small. If this does become a 
>> problem, I could still store the document id's. My data won't change, so 
>> there's no danger of the document id's changing. The end result of the 
>> project has to look like a production system, but it doesn't have to be 
>> one. :)
>>     
>
> This does not sound like something that will run out of RAM for 
> a few FieldCaches.
>  
>   
>> I can see why using Lucene like a database is worrying. There's already 
>> the problem of referential integrity (what if you update 
>> document/collection id's), which databases do well, and Lucene doesn't 
>> do at all (as there doesn't seem to be a standard mechanism for this 
>> sort of thing).
>>     
>
> Relational databases also use caches for various relational keys.
> With lucene you just have to explicitly choose them and program their use.
>
>   
>> On the other hand, I don't think this technique is very  
>> new. I think it's a common smoothing method in xml element retrieval  
>> (smoothing an element with the contents of its ancestor elements). So 
>> surely this sort of thing gets done a lot. I guess there are bound to be 
>> some limits to the inverse index that require less pretty tricks like these.
>>     
>
> For small texts like link anchors it is easier to add them to each page as a 
> "relational attribute".
> A collection text looks more like a sum text than like a relational attribute, 
> so treating it as a separate lucene doc (lucene "entity") feels just about 
> right.
>
> Regards,
> Paul Elschot
>
>
>   
>> regards,
>>  Peter
>>
>> Erick Erickson wrote:
>>     
>>> You're right, your index will bloat considerably. In fact, I'm surprised
>>> it's only a factor of 5....
>>>
>>> The only thing that comes to mind is really a variant on your approach
>>> from your first e-mail. But I wouldn't use document ids because document
>>> IDs can change. So using doc IDs is...er.... fraught.
>>>
>>> So here's the variant. Go ahead and index your "collection vector",
>>> but index it with a second field that is your "collection ID". Then, add
>>> that collection ID to each document in your original index. So, you have
>>> something like
>>>
>>> a: text:{look, a, cat}  collectionID:32
>>> b: text:{my, chimpansee, is , hairy} collectionID:32
>>> c: text:{dogs, are, playful} collectionID:32
>>>
>>> Your other index has
>>> collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is , 
>>> hairy,
>>> dogs, are, playful}
>>>
>>> Now, you essentially make two queries, one to get a set of
>>> collection IDs from your second index (that is, querying your terms
>>> against collectionVector) and using that set of collectionIDs in a
>>> query against your first index.
>>>
>>> You might be able to do some interesting things with boosts
>>> to score either query more to your liking.
>>>
>>> This will come close to doubling the size of your index, but your
>>> first approach could bloat it by an arbitrary factor depending upon
>>> how many documents were in your largest collection.....
>>>
>>> One thing to note, however, is that there is no need to have
>>> two separate physical indexes. Lucene does not require that
>>> all  documents have the same fields. So this could all be in one
>>> big happy index. As long as the fields are different in the two
>>> sets of documents, the queries won't interfere with each other. In
>>> that case, you'd have to name the "foreign key" field differently for
>>> the sets of documents, say collectionID1 and collectionID2.
>>>
>>>
>>> All that said, this approach bothers me because it's mixing
>>> some database ideas with a Lucene index. I suppose in a controlled
>>> situation where you won't be trying to do arbitrary joins it's probably
>>> a misplaced unease. But I'm leery of trying to make Lucene act
>>> like a database. But that may just be a personal problem <G>
>>>
>>> The only other consideration is "how many collections do you have?"
>>> The reason I ask is that in the worst case scenario, you'll have an
>>> OR clause for every collection ID you have. Lucene can easily handle
>>> many thousands of terms in an OR, but your search time will suffer.
>>> And you'll have to take special action (really, just set 
>>> MaxBooleanClauses)
>>> if this is over 1024 or you'll get a TooManyClauses exception.
>>>
>>> Best
>>> Erick
>>>
>>>
>>> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>>>       
>>>> I'm sorry, I should have explained the intended behavior more clearly.
>>>>
>>>> The basic idea (without the collection fields) is that there are very
>>>> simple documents in the index with one content field each. All I do with
>>>> this index is a standard search in this text field. To improve the
>>>> search results, I want to also add the concatenation of all documents in
>>>> a collection as a field to every single document. I then search the
>>>> index using both fields, and diminishing the effect of the collection
>>>> field. This should improve the search results.
>>>>
>>>> As an example, say I have the documents a:"look a cat" b:"my chimpansee
>>>> is hairy" c:"dogs are playful" and many others. These three documents
>>>> are grouped into one collection (of many). The term vectors for the
>>>> documents would then be
>>>> a: {look, a, cat}
>>>> b: {my, chimpansee, is , hairy}
>>>> c: {dogs, are, playful}
>>>> If I create a term vector for the whole collection: {look, a, cat, my,
>>>> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
>>>> documents as a separate field, the query "my hairy cat" scores well
>>>> against document a because of the match on cat, but also because of the
>>>> match on both cat and hairy on the collection field. Documents about the
>>>> linux command 'cat' do not have the word "hairy" in their collection
>>>> field (because they're part of a different collection), and so would not
>>>> get this benefit. It's essentially a smoothing technique, since it
>>>> allows query words that aren't in the document to still have some 
>>>> effect.
>>>>
>>>> The problem of course is that storing these collection term vectors for
>>>> each document greatly increases the size of the index and the indexing
>>>> time. It would be alot faster if I could somehow use a second index to
>>>> store the collections as documents, so I would only have to store one
>>>> term vector per collection. (This isn't my own idea btw, I'm trying to
>>>> replicate the results from some other research that used this method).
>>>>
>>>> I hope this is more clear,
>>>> Peter
>>>>
>>>> Erick Erickson wrote:
>>>>         
>>>>> This seems kind of kludgy, but that may just mean I don't understand
>>>>> your problem very well.
>>>>>
>>>>> What is it that you're trying to accomplish? Searching constrained
>>>>> by topic or groups?
>>>>>
>>>>> If you're trying to search by groups, search the archive for the
>>>>> word "facet" or "faceted search".
>>>>>
>>>>> Otherwise, could you describe what behavior you're after and maybe
>>>>> there'd be more ideas....
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>>>>>           
>>>>>> Hi,
>>>>>>
>>>>>> I have the following problem. I'm indexing documents that belong to
>>>>>>             
>>>> some
>>>>         
>>>>>> collection (ie. the dataset is divided into collections, which are
>>>>>> divided into documents). These documents become my lucene documents,
>>>>>> with some relatively small string that becomes the field I want to
>>>>>> search. However, I would also like to add to document d the
>>>>>> concatenation of all documents in d's collection as a field 
>>>>>>             
>>>> (mainly as
>>>> a
>>>>         
>>>>>> smoothing technique, because documents correspond roughly to topics).
>>>>>> I'm currently doing just that, adding an extra field for the entire
>>>>>> concatenated collection to each document in that collection. Of 
>>>>>>             
>>>> course
>>>>         
>>>>>> this increases the index size and indexing time greatly (about
>>>>>> five-fold).
>>>>>>
>>>>>> There must be a better way to do this. My idea was to create a second
>>>>>> index where the collections are indexed as (lucene) documents. This
>>>>>> index would have the text as a field, and a list of document id's
>>>>>> referring back to the main index. I could then retrieve the term 
>>>>>>             
>>>> vector
>>>>         
>>>>>> for each collection from this second index for each search result 
>>>>>>             
>>>> from
>>>>         
>>>>>> the original index.
>>>>>>
>>>>>> My question is if this is a smart approach. And if it is, which of
>>>>>> Lucene's classes should I use for this. The best I could find was the
>>>>>> FilterIndexReader. If extending the FilterIndexReader is really the
>>>>>>             
>>>> best
>>>>         
>>>>>> way to go, could I simply override the document(int, FieldSelector)
>>>>>> method, or is there more to it? I doubt I'm the first person that's
>>>>>>             
>>>> ever
>>>>         
>>>>>> wanted a many to one relation between fields and documents, so I hope
>>>>>> there's a simpler way about this.
>>>>>>
>>>>>> Thank you,
>>>>>> Peter
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>             
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 18:11:19 2007
Return-Path: <java-user-return-28167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42928 invoked from network); 20 May 2007 18:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 18:11:17 -0000
Received: (qmail 27084 invoked by uid 500); 20 May 2007 18:11:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26763 invoked by uid 500); 20 May 2007 18:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26750 invoked by uid 99); 20 May 2007 18:11:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 11:11:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 11:11:09 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JIC00E01Q67MJ@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Sun, 20 May 2007 20:10:48 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JIC0051KQHZJ2@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Sun, 20 May 2007 20:10:48 +0200 (MEST)
Date: Sun, 20 May 2007 20:10:47 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: Re: One (large) field shared by many documents
In-reply-to: <359a92830705200709k3ed9e22ra92a083cf864d24e@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <46508F27.9090500@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
References: <464F177B.3040304@peterbloem.nl>
 <359a92830705191449n15061a1asecf10c23521ecf60@mail.gmail.com>
 <464F775C.1020507@peterbloem.nl>
 <359a92830705191634s6ffbe833w9d7eb0cc5bc70228@mail.gmail.com>
 <464F9B12.5000804@peterbloem.nl>
 <359a92830705200709k3ed9e22ra92a083cf864d24e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

My comments on storing document id's are perhaps based on a misguided 
view of lucene, but it's worth investigating. I figured since there's 
only one document per id in the document index, instead of executing one 
query with n OR clauses, you could execute n queries with a single docId 
to get all the documents. These are my own document id's by the way, not 
lucene's. I suppose that if you use those, you could simply retrieve 
them with IndexReader.document(i). I don't know how stable those 
integers are though.

It seems I will have to create a mapping of collection ID's to scores 
for each query, and use that in scoring the final douments. I've figured 
out that the sum of the document score and the collection score is the 
same as the score would be if the collection were a field in the 
document (at least if I've interpeted the formula in the Similiarity 
docs correctly).

thank you for your comments so far,
 Peter

Erick Erickson wrote:
> See Paul's e-mail, he's talking about a place I haven't been in Lucene
> yet.
>
> Other than that, see below....
>
> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>>
>> Ah, now we're getting somewhere. So I run the first query on the
>> collection index, get a set of collection id's from that. But how do I
>> use them in the second query on the document index? It should be easy
>> enough to retrieve all documents in the returned collections (which is
>> what I'm after), but then I want to rank them as if they had the
>> collection's term vector as a field. Is there some way to modify a
>> document just prior to processing?
>
>
> You could think about boosting on the "collectionid" based on the
> ranking in the first query. NOTE: I really have no idea whether this
> would be satisfactory or not, so please post what you find out if
> you try it.
>
> Say your first query returned values like
> collectionid     score
> 88                   0.80
> 63                   0.45
> 100                 0.20
>
> You might then build up a query something like...
>
> text:the text from the query AND
>    (collectionID:88^8 OR CollectionID:63^4.5 OR CollectionID:100^2)..
> (NOTE, not very good Lucene query syntax here<G>).
>
> Which *should* help weight the results by collectionID
> by how "well" the query matched the collection vector.
>
> You'll have to delve into the scoring and boosting. For instance, if 
> you get
> your collection IDs from a HitCollector, the scores will be raw. That is,
> not
> between 0.0 and 1.0. Also, you may want to boost the text term in the
> second query depending upon how you want to bias hits in the
> actual text of the document.
>
> You could also do this manually. That is, you've generated a list
> of collection IDs and scores anyway. Just keep it around, execute
> your second query without reference to the collectionIDs
> (i.e. text: text of query), and then use a HitCollector and massage the
> scores as you see fit. Think about using a FieldSortedHitQueue to sort
> the results. If you do this, also think about going directly to your 
> index
> via TermEnum/TermDocs to get the collection IDs associated with each
> doc rather than using IndexReader.document(ID). See the warning in
> HitCollector.collect().
>
> I have several thousand collections, but the number of collections
>> matching a query should remain quite small. The collections contain
>> about as much text as a small webpage, so the chance that one query
>> matches huge amounts of collections is small. If this does become a
>> problem, I could still store the document id's. My data won't change, so
>> there's no danger of the document id's changing. The end result of the
>> project has to look like a production system, but it doesn't have to be
>> one. :)
>
>
> I don't see how storing the doc IDs makes the problem better. Building up
> the OR clause would seem to be worse since there's a many-to-one
> relationship between the document IDs and collection IDs. Your clause
> would only get bigger.
>
>
> I can see why using Lucene like a database is worrying. There's already
>> the problem of referential integrity (what if you update
>> document/collection id's), which databases do well, and Lucene doesn't
>> do at all (as there doesn't seem to be a standard mechanism for this
>> sort of thing). On the other hand, I don't think this technique is very
>> new. I think it's a common smoothing method in xml element retrieval
>> (smoothing an element with the contents of its ancestor elements). So
>> surely this sort of thing gets done a lot. I guess there are bound to be
>> some limits to the inverse index that require less pretty tricks like
>> these.
>
>
> Which is one of the reasons I mentioned collection IDs. Since you control
> them, they don't need to change ever. You can freely update their content
> as you add documents without having to regenerate the entire index.
>
> But you're right, referential integrity is not part of Lucene. And I 
> doubt
> if it
> ever will be, it's just not part of what Lucene is designed to do. 
> There was
> a very interesting thread a while ago about embedding Lucene in an Oracle
> database. Since it's not relevant to my problem space, I barely 
> skimmed it,
> but
> if you search the archive for posts authored by Marcelo Ochoa, you'll 
> find
> them.
>
> Best
> Erick
>
>
> regards,
>> Peter
>>
>> Erick Erickson wrote:
>> > You're right, your index will bloat considerably. In fact, I'm 
>> surprised
>> > it's only a factor of 5....
>> >
>> > The only thing that comes to mind is really a variant on your approach
>> > from your first e-mail. But I wouldn't use document ids because 
>> document
>> > IDs can change. So using doc IDs is...er.... fraught.
>> >
>> > So here's the variant. Go ahead and index your "collection vector",
>> > but index it with a second field that is your "collection ID". 
>> Then, add
>> > that collection ID to each document in your original index. So, you 
>> have
>> > something like
>> >
>> > a: text:{look, a, cat}  collectionID:32
>> > b: text:{my, chimpansee, is , hairy} collectionID:32
>> > c: text:{dogs, are, playful} collectionID:32
>> >
>> > Your other index has
>> > collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is ,
>> > hairy,
>> > dogs, are, playful}
>> >
>> > Now, you essentially make two queries, one to get a set of
>> > collection IDs from your second index (that is, querying your terms
>> > against collectionVector) and using that set of collectionIDs in a
>> > query against your first index.
>> >
>> > You might be able to do some interesting things with boosts
>> > to score either query more to your liking.
>> >
>> > This will come close to doubling the size of your index, but your
>> > first approach could bloat it by an arbitrary factor depending upon
>> > how many documents were in your largest collection.....
>> >
>> > One thing to note, however, is that there is no need to have
>> > two separate physical indexes. Lucene does not require that
>> > all  documents have the same fields. So this could all be in one
>> > big happy index. As long as the fields are different in the two
>> > sets of documents, the queries won't interfere with each other. In
>> > that case, you'd have to name the "foreign key" field differently for
>> > the sets of documents, say collectionID1 and collectionID2.
>> >
>> >
>> > All that said, this approach bothers me because it's mixing
>> > some database ideas with a Lucene index. I suppose in a controlled
>> > situation where you won't be trying to do arbitrary joins it's 
>> probably
>> > a misplaced unease. But I'm leery of trying to make Lucene act
>> > like a database. But that may just be a personal problem <G>
>> >
>> > The only other consideration is "how many collections do you have?"
>> > The reason I ask is that in the worst case scenario, you'll have an
>> > OR clause for every collection ID you have. Lucene can easily handle
>> > many thousands of terms in an OR, but your search time will suffer.
>> > And you'll have to take special action (really, just set
>> > MaxBooleanClauses)
>> > if this is over 1024 or you'll get a TooManyClauses exception.
>> >
>> > Best
>> > Erick
>> >
>> >
>> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>> >>
>> >> I'm sorry, I should have explained the intended behavior more 
>> clearly.
>> >>
>> >> The basic idea (without the collection fields) is that there are very
>> >> simple documents in the index with one content field each. All I do
>> with
>> >> this index is a standard search in this text field. To improve the
>> >> search results, I want to also add the concatenation of all documents
>> in
>> >> a collection as a field to every single document. I then search the
>> >> index using both fields, and diminishing the effect of the collection
>> >> field. This should improve the search results.
>> >>
>> >> As an example, say I have the documents a:"look a cat" b:"my 
>> chimpansee
>> >> is hairy" c:"dogs are playful" and many others. These three documents
>> >> are grouped into one collection (of many). The term vectors for the
>> >> documents would then be
>> >> a: {look, a, cat}
>> >> b: {my, chimpansee, is , hairy}
>> >> c: {dogs, are, playful}
>> >> If I create a term vector for the whole collection: {look, a, cat, 
>> my,
>> >> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
>> >> documents as a separate field, the query "my hairy cat" scores well
>> >> against document a because of the match on cat, but also because 
>> of the
>> >> match on both cat and hairy on the collection field. Documents about
>> the
>> >> linux command 'cat' do not have the word "hairy" in their collection
>> >> field (because they're part of a different collection), and so would
>> not
>> >> get this benefit. It's essentially a smoothing technique, since it
>> >> allows query words that aren't in the document to still have some
>> >> effect.
>> >>
>> >> The problem of course is that storing these collection term 
>> vectors for
>> >> each document greatly increases the size of the index and the 
>> indexing
>> >> time. It would be alot faster if I could somehow use a second 
>> index to
>> >> store the collections as documents, so I would only have to store one
>> >> term vector per collection. (This isn't my own idea btw, I'm 
>> trying to
>> >> replicate the results from some other research that used this 
>> method).
>> >>
>> >> I hope this is more clear,
>> >> Peter
>> >>
>> >> Erick Erickson wrote:
>> >> > This seems kind of kludgy, but that may just mean I don't 
>> understand
>> >> > your problem very well.
>> >> >
>> >> > What is it that you're trying to accomplish? Searching constrained
>> >> > by topic or groups?
>> >> >
>> >> > If you're trying to search by groups, search the archive for the
>> >> > word "facet" or "faceted search".
>> >> >
>> >> > Otherwise, could you describe what behavior you're after and maybe
>> >> > there'd be more ideas....
>> >> >
>> >> > Best
>> >> > Erick
>> >> >
>> >> > On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
>> >> >>
>> >> >> Hi,
>> >> >>
>> >> >> I have the following problem. I'm indexing documents that 
>> belong to
>> >> some
>> >> >> collection (ie. the dataset is divided into collections, which are
>> >> >> divided into documents). These documents become my lucene 
>> documents,
>> >> >> with some relatively small string that becomes the field I want to
>> >> >> search. However, I would also like to add to document d the
>> >> >> concatenation of all documents in d's collection as a field
>> >> (mainly as
>> >> a
>> >> >> smoothing technique, because documents correspond roughly to
>> topics).
>> >> >> I'm currently doing just that, adding an extra field for the 
>> entire
>> >> >> concatenated collection to each document in that collection. Of
>> >> course
>> >> >> this increases the index size and indexing time greatly (about
>> >> >> five-fold).
>> >> >>
>> >> >> There must be a better way to do this. My idea was to create a
>> second
>> >> >> index where the collections are indexed as (lucene) documents. 
>> This
>> >> >> index would have the text as a field, and a list of document id's
>> >> >> referring back to the main index. I could then retrieve the term
>> >> vector
>> >> >> for each collection from this second index for each search result
>> >> from
>> >> >> the original index.
>> >> >>
>> >> >> My question is if this is a smart approach. And if it is, which of
>> >> >> Lucene's classes should I use for this. The best I could find was
>> the
>> >> >> FilterIndexReader. If extending the FilterIndexReader is really 
>> the
>> >> best
>> >> >> way to go, could I simply override the document(int, 
>> FieldSelector)
>> >> >> method, or is there more to it? I doubt I'm the first person 
>> that's
>> >> ever
>> >> >> wanted a many to one relation between fields and documents, so I
>> hope
>> >> >> there's a simpler way about this.
>> >> >>
>> >> >> Thank you,
>> >> >> Peter
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 20 19:28:41 2007
Return-Path: <java-user-return-28168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73748 invoked from network); 20 May 2007 19:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 May 2007 19:28:40 -0000
Received: (qmail 98870 invoked by uid 500); 20 May 2007 19:28:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98830 invoked by uid 500); 20 May 2007 19:28:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98819 invoked by uid 99); 20 May 2007 19:28:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 12:28:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 12:28:29 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id l4KJS7ip003089
	for <java-user@lucene.apache.org>; Sun, 20 May 2007 21:28:07 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: One (large) field shared by many documents
Date: Sun, 20 May 2007 21:28:06 +0200
User-Agent: KMail/1.8.2
References: <464F177B.3040304@peterbloem.nl> <200705201118.22863.paul.elschot@xs4all.nl> <46508AFB.9080603@peterbloem.nl>
In-Reply-To: <46508AFB.9080603@peterbloem.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705202128.06429.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Sunday 20 May 2007 19:52, Peter Bloem wrote:
> Thanks for your reply. This is getting me much deeper into the uncharted 
> territories of Lucene, especially the area of FieldCaches, but it's also 
> piqued my curiosity. Most of what I've been able to find are discussions 
> by people that are already using FieldCache, rather than explanations of 
> what they actually are. From what I understand a FieldCache caches 
> certain values, and has methods that retrieve the information from the 
> cache, or from a provided IndexReader if the cache doesn't have the 
> requested value. My main question is where to get a fieldcache, and how 
> to add things to it. The only publically available one in the API seems 
> to be FieldCache.DEFAULT, but you speak of multiple fieldcaches.

You can use that. I was not very precise, I meant using the IndexReaders
of the two indexes with this single cache implementation.

> I could  
> of course borrow FieldCacheImpl by copying the file to my own package, 
> but that would probably affect the license of my code (not that I care 
> much about that, but it does feel like another can of worms).

I would not expect you to need to borrow from FieldCachImpl.
 
> Do the scores for the collection id's get stored in FieldCache.DEFAULT 
> by the searcher or should I see to that myself?

You'll have to create another map to store score values.
You may want to use that map only for a single query.

> And what exactly does  
> the String field parameter in the getters do? Is this a lucene field, or 
> simply a key with which to retrieve the cached values?

It is the name of the lucene Field.
 
> I'm sorry to be asking this many questions.

> Normally I would dig into  
> the source code and try to figure this out myself, but I have a deadline 
> that is approaching at a rather frightening speed. And in any case, it 
> doesn't hurt to have these issues explained somewhere on the internet, 
> in case somebody finds himself in the same situation.

<less_serious text="But it's weekend and I thought deadlines only happen in 
other timeframes."/>
 
> All this business about fieldcaches, has led me to think that I might be 
> better off caching the collection scores for each query myself. The 
> process would then look like this:
> * query the collection index with the user query, and calculate the 
> scores per collection (possibly using only the top n collections, if I 
> get too many)
> * store the collection scores in a (weak) HashMap<String, Float> (or 
> maybe a treemap) mapping collection id's (which are strings) to the 
> collection scores (which are floats)

So far so good.

> * retrieve all documents in all collections (and perhaps any documents 
> that fit the query by themselves, if I ignored any collections)

Ouch. Why retrieve all docs when you only need the highest scoring ones?
See also below.

> * during the scoring process, score the document normally, retrieve the 
> collection id from the document, retrieve the collection score from the 
> hashmap and add it to the original score (possibly multiplying it by a 
> scalar 0<s<1, to diminish the effect of the collection. As far as I can 
> tell, this returns the same score as it would when the collection is 
> just another field in the document (boosted by s).

Sounds correct, but if you have many matching docs, you may
prefer using a TopDocs, and for that you will have to hook your 
adding/multiplication into the IndexSearcher method that returns
a TopDocs. I've never done that myself, so if there is no API,
have a look at the code.
 
> If I understand you correctly, the FieldCache would take the place of 
> the HashMap. Does this approach have any significant problems compared 
> to using a FieldCache?

No idea. I don't know how the internals of FieldCacheImpl.
 
> Another point I'm unclear about is where exactly to implement the last 
> step. IndexSearcher seems to call Scorer.score(HitCollector) for the 
> whole set of documents, which looks like it has a score() method for a 
> single document/query collection. I guess I could extend Scorer to wrap 
> around the regular scorer used, but this would also require me to extend 
> Weight. I'm hoping there's an easier way to accomplish all this.

Have a look at the IndexSearcher code, as I suggested above.
 
> The two performance penalties here that I can see are retrieving all 
> documents from all returned collections (as pointed out by Erick), since 
> it requires a whole bunch of OR clauses (for collection id) and 
> populating the hash map with the collection id's. The effect of both 
> depends on the number of collections. Unfortunately, a closer look at 
> the data tells me that the amount of collections is around a hundred 
> thousand.On the other hand, any reasonable query should return only as 
> much collections as it would from a set of medium sized documents. I 
> guess the only way to find out how bad the performance will be, is to 
> implement it.

A FieldCache will retrieve the necessary field values only once, and therefore
you can avoid retrieving many documents yourself.

Regards,
Paul Elschot.

> 
> regards,
>  Peter
> 
> Paul Elschot wrote:
> > On Sunday 20 May 2007 02:49, Peter Bloem wrote:
> >   
> >> Ah, now we're getting somewhere. So I run the first query on the 
> >> collection index, get a set of collection id's from that. But how do I 
> >> use them in the second query on the document index? It should be easy 
> >> enough to retrieve all documents in the returned collections (which is 
> >> what I'm after), but then I want to rank them as if they had the 
> >> collection's term vector as a field. Is there some way to modify a 
> >> document just prior to processing?
> >>     
> >
> > One way is indeed to index the docs and collections separately.
> > The trick is to use FieldCaches for your collection id's.
> > The price is that these FieldCaches must be loaded initially.
> >
> > First query the collections, using a HitCollector
> > to keep all their scores by your collection id using a FieldCache.
> > By the time your indexes get really large, you may
> > want to keep only a maximum number of the best scoring
> > collections here.
> >
> > Then query the docs, and smooth their scores during the search
> > using the collection scores, using a FieldCache for the collection
> > id per doc. For this, have a look at the IndexSearcher code on how
> > to hook in your own smoothing HitCollector to return for example
> > a TopDocs.
> >   
> >> I have several thousand collections, but the number of collections 
> >> matching a query should remain quite small. The collections contain 
> >> about as much text as a small webpage, so the chance that one query 
> >> matches huge amounts of collections is small. If this does become a 
> >> problem, I could still store the document id's. My data won't change, so 
> >> there's no danger of the document id's changing. The end result of the 
> >> project has to look like a production system, but it doesn't have to be 
> >> one. :)
> >>     
> >
> > This does not sound like something that will run out of RAM for 
> > a few FieldCaches.
> >  
> >   
> >> I can see why using Lucene like a database is worrying. There's already 
> >> the problem of referential integrity (what if you update 
> >> document/collection id's), which databases do well, and Lucene doesn't 
> >> do at all (as there doesn't seem to be a standard mechanism for this 
> >> sort of thing).
> >>     
> >
> > Relational databases also use caches for various relational keys.
> > With lucene you just have to explicitly choose them and program their use.
> >
> >   
> >> On the other hand, I don't think this technique is very  
> >> new. I think it's a common smoothing method in xml element retrieval  
> >> (smoothing an element with the contents of its ancestor elements). So 
> >> surely this sort of thing gets done a lot. I guess there are bound to be 
> >> some limits to the inverse index that require less pretty tricks like 
these.
> >>     
> >
> > For small texts like link anchors it is easier to add them to each page as 
a 
> > "relational attribute".
> > A collection text looks more like a sum text than like a relational 
attribute, 
> > so treating it as a separate lucene doc (lucene "entity") feels just about 
> > right.
> >
> > Regards,
> > Paul Elschot
> >
> >
> >   
> >> regards,
> >>  Peter
> >>
> >> Erick Erickson wrote:
> >>     
> >>> You're right, your index will bloat considerably. In fact, I'm surprised
> >>> it's only a factor of 5....
> >>>
> >>> The only thing that comes to mind is really a variant on your approach
> >>> from your first e-mail. But I wouldn't use document ids because document
> >>> IDs can change. So using doc IDs is...er.... fraught.
> >>>
> >>> So here's the variant. Go ahead and index your "collection vector",
> >>> but index it with a second field that is your "collection ID". Then, add
> >>> that collection ID to each document in your original index. So, you have
> >>> something like
> >>>
> >>> a: text:{look, a, cat}  collectionID:32
> >>> b: text:{my, chimpansee, is , hairy} collectionID:32
> >>> c: text:{dogs, are, playful} collectionID:32
> >>>
> >>> Your other index has
> >>> collectionID:32 collectionVector:{look, a, cat, my, chimpansee, is , 
> >>> hairy,
> >>> dogs, are, playful}
> >>>
> >>> Now, you essentially make two queries, one to get a set of
> >>> collection IDs from your second index (that is, querying your terms
> >>> against collectionVector) and using that set of collectionIDs in a
> >>> query against your first index.
> >>>
> >>> You might be able to do some interesting things with boosts
> >>> to score either query more to your liking.
> >>>
> >>> This will come close to doubling the size of your index, but your
> >>> first approach could bloat it by an arbitrary factor depending upon
> >>> how many documents were in your largest collection.....
> >>>
> >>> One thing to note, however, is that there is no need to have
> >>> two separate physical indexes. Lucene does not require that
> >>> all  documents have the same fields. So this could all be in one
> >>> big happy index. As long as the fields are different in the two
> >>> sets of documents, the queries won't interfere with each other. In
> >>> that case, you'd have to name the "foreign key" field differently for
> >>> the sets of documents, say collectionID1 and collectionID2.
> >>>
> >>>
> >>> All that said, this approach bothers me because it's mixing
> >>> some database ideas with a Lucene index. I suppose in a controlled
> >>> situation where you won't be trying to do arbitrary joins it's probably
> >>> a misplaced unease. But I'm leery of trying to make Lucene act
> >>> like a database. But that may just be a personal problem <G>
> >>>
> >>> The only other consideration is "how many collections do you have?"
> >>> The reason I ask is that in the worst case scenario, you'll have an
> >>> OR clause for every collection ID you have. Lucene can easily handle
> >>> many thousands of terms in an OR, but your search time will suffer.
> >>> And you'll have to take special action (really, just set 
> >>> MaxBooleanClauses)
> >>> if this is over 1024 or you'll get a TooManyClauses exception.
> >>>
> >>> Best
> >>> Erick
> >>>
> >>>
> >>> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >>>       
> >>>> I'm sorry, I should have explained the intended behavior more clearly.
> >>>>
> >>>> The basic idea (without the collection fields) is that there are very
> >>>> simple documents in the index with one content field each. All I do 
with
> >>>> this index is a standard search in this text field. To improve the
> >>>> search results, I want to also add the concatenation of all documents 
in
> >>>> a collection as a field to every single document. I then search the
> >>>> index using both fields, and diminishing the effect of the collection
> >>>> field. This should improve the search results.
> >>>>
> >>>> As an example, say I have the documents a:"look a cat" b:"my chimpansee
> >>>> is hairy" c:"dogs are playful" and many others. These three documents
> >>>> are grouped into one collection (of many). The term vectors for the
> >>>> documents would then be
> >>>> a: {look, a, cat}
> >>>> b: {my, chimpansee, is , hairy}
> >>>> c: {dogs, are, playful}
> >>>> If I create a term vector for the whole collection: {look, a, cat, my,
> >>>> chimpansee, is , hairy, dogs, are, playful} and add it to each of the
> >>>> documents as a separate field, the query "my hairy cat" scores well
> >>>> against document a because of the match on cat, but also because of the
> >>>> match on both cat and hairy on the collection field. Documents about 
the
> >>>> linux command 'cat' do not have the word "hairy" in their collection
> >>>> field (because they're part of a different collection), and so would 
not
> >>>> get this benefit. It's essentially a smoothing technique, since it
> >>>> allows query words that aren't in the document to still have some 
> >>>> effect.
> >>>>
> >>>> The problem of course is that storing these collection term vectors for
> >>>> each document greatly increases the size of the index and the indexing
> >>>> time. It would be alot faster if I could somehow use a second index to
> >>>> store the collections as documents, so I would only have to store one
> >>>> term vector per collection. (This isn't my own idea btw, I'm trying to
> >>>> replicate the results from some other research that used this method).
> >>>>
> >>>> I hope this is more clear,
> >>>> Peter
> >>>>
> >>>> Erick Erickson wrote:
> >>>>         
> >>>>> This seems kind of kludgy, but that may just mean I don't understand
> >>>>> your problem very well.
> >>>>>
> >>>>> What is it that you're trying to accomplish? Searching constrained
> >>>>> by topic or groups?
> >>>>>
> >>>>> If you're trying to search by groups, search the archive for the
> >>>>> word "facet" or "faceted search".
> >>>>>
> >>>>> Otherwise, could you describe what behavior you're after and maybe
> >>>>> there'd be more ideas....
> >>>>>
> >>>>> Best
> >>>>> Erick
> >>>>>
> >>>>> On 5/19/07, Peter Bloem <p@peterbloem.nl> wrote:
> >>>>>           
> >>>>>> Hi,
> >>>>>>
> >>>>>> I have the following problem. I'm indexing documents that belong to
> >>>>>>             
> >>>> some
> >>>>         
> >>>>>> collection (ie. the dataset is divided into collections, which are
> >>>>>> divided into documents). These documents become my lucene documents,
> >>>>>> with some relatively small string that becomes the field I want to
> >>>>>> search. However, I would also like to add to document d the
> >>>>>> concatenation of all documents in d's collection as a field 
> >>>>>>             
> >>>> (mainly as
> >>>> a
> >>>>         
> >>>>>> smoothing technique, because documents correspond roughly to topics).
> >>>>>> I'm currently doing just that, adding an extra field for the entire
> >>>>>> concatenated collection to each document in that collection. Of 
> >>>>>>             
> >>>> course
> >>>>         
> >>>>>> this increases the index size and indexing time greatly (about
> >>>>>> five-fold).
> >>>>>>
> >>>>>> There must be a better way to do this. My idea was to create a second
> >>>>>> index where the collections are indexed as (lucene) documents. This
> >>>>>> index would have the text as a field, and a list of document id's
> >>>>>> referring back to the main index. I could then retrieve the term 
> >>>>>>             
> >>>> vector
> >>>>         
> >>>>>> for each collection from this second index for each search result 
> >>>>>>             
> >>>> from
> >>>>         
> >>>>>> the original index.
> >>>>>>
> >>>>>> My question is if this is a smart approach. And if it is, which of
> >>>>>> Lucene's classes should I use for this. The best I could find was the
> >>>>>> FilterIndexReader. If extending the FilterIndexReader is really the
> >>>>>>             
> >>>> best
> >>>>         
> >>>>>> way to go, could I simply override the document(int, FieldSelector)
> >>>>>> method, or is there more to it? I doubt I'm the first person that's
> >>>>>>             
> >>>> ever
> >>>>         
> >>>>>> wanted a many to one relation between fields and documents, so I hope
> >>>>>> there's a simpler way about this.
> >>>>>>
> >>>>>> Thank you,
> >>>>>> Peter
> >>>>>>
> >>>>>> ---------------------------------------------------------------------
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>>>             
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>         
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>     
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 00:23:39 2007
Return-Path: <java-user-return-28169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49603 invoked from network); 21 May 2007 00:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 00:23:38 -0000
Received: (qmail 63636 invoked by uid 500); 21 May 2007 00:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63596 invoked by uid 500); 21 May 2007 00:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63585 invoked by uid 99); 21 May 2007 00:23:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:23:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.135] (HELO anumail9.anu.edu.au) (130.56.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:23:30 -0700
Received: from smtphost.anu.edu.au (ds1.anu.edu.au [130.56.64.53])
	by anumail9.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4L0N3fC027026
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 10:23:07 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4L0N2a7022311
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 10:23:03 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4L0N1vD007098
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 10:23:02 +1000 (EST)
Message-ID: <4650E663.1050102@anu.edu.au>
Date: Mon, 21 May 2007 10:22:59 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Memory leak (JVM 1.6 only)
References: <OF1536F049.1267BAEB-ON882572DF.00545A98-882572DF.00578879@il.ibm.com>
In-Reply-To: <OF1536F049.1267BAEB-ON882572DF.00545A98-882572DF.00578879@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.20.170143 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, the link was helpful. I'll let you know if I find anything.

Thanks for all the replies to this.

Steve

Doron Cohen wrote:
> Stephen Gray wrote:
>
>   
>> Thanks. If the extra memory allocated is native memory I don't think
>> jconsole includes it in "non-heap" as it doesn't show this as
>> increasing, and jmap/jhat just dump/analyse the heap. Do you know of an
>> application that can report native memory usage?
>>     
>
> Sorry, but I didn't profile native memory for quite a long
> time... In my specific case that was not needed b/c problems
> begun as I started using GZipOutputStreams very aggressively,
> but with fine control over the underlying Java IO buffers.
> So when I got the OOM, it was obvious that the problem was
> in native mem. Another different behavior with native mem
> issues is that increasing max Java heap size might actually
> have a negative effect b/c less free native memory remains.
>
> Just in case you haven't checked that yet, there's some useful info in
> http://java.sun.com/javase/6/webnotes/trouble/TSG-VM/html/memleaks.html
> including pointers to native memory analysis tools.
>
> Once you find the cause, it would be interesting to hear what
> it was, and especially how you found it...
>
> Regards,
> Doron
>
>   
>> Thanks,
>> Steve
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Stephen Gray
Archive IT Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 00:38:25 2007
Return-Path: <java-user-return-28170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51732 invoked from network); 21 May 2007 00:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 00:38:24 -0000
Received: (qmail 77014 invoked by uid 500); 21 May 2007 00:38:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76673 invoked by uid 500); 21 May 2007 00:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76662 invoked by uid 99); 21 May 2007 00:38:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:38:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [146.50.96.22] (HELO pieck.student.uva.nl) (146.50.96.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:38:14 -0700
Received: from conversion-daemon.pieck.student.uva.nl by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 id <0JID00G0187UNT@pieck.student.uva.nl> (original mail from p@peterbloem.nl)
 for java-user@lucene.apache.org; Mon, 21 May 2007 02:37:52 +0200 (MEST)
Received: from [192.168.1.1] (84-245-41-63.dsl.cambrium.nl [84.245.41.63])
 by pieck.student.uva.nl
 (iPlanet Messaging Server 5.2 HotFix 2.12 (built May 22 2006))
 with ESMTPSA id <0JID005PZ8F3J2@pieck.student.uva.nl> for
 java-user@lucene.apache.org; Mon, 21 May 2007 02:37:52 +0200 (MEST)
Date: Mon, 21 May 2007 02:37:51 +0200
From: Peter Bloem <p@peterbloem.nl>
Subject: Optional terms in BooleanQuery
To: java-user@lucene.apache.org
Message-id: <4650E9DF.4080906@peterbloem.nl>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm constructing a search with some required terms and some optional 
terms in in the query. According to some earlier posts that looks like 
"+(A B) C D E" in query syntax for required terms A and B and optional 
terms C D and E. In other words, Lucene considers all documents that 
have both A and B, and ranks them higher if they also have C D or E.

I'm wondering how this translates to a BooleanQuery. I know I should use 
BooleanClause.Occur.MUST for A and B, and I guess I should use 
BooleanQuery.Occur.SHOULD for C, D and E. However the javadocs for 
BooleanClause.Occur.SHOULD states:

"Use this operator for clauses that /should/ appear in the matching 
documents. For a BooleanQuery with two |SHOULD| subqueries, at least one 
of the clauses must appear in the matching documents."

Does this last sentence actually mean that a query with _just_ two 
SHOULD clauses (ie. only SHOULD clauses) must contain one of the 
clauses, or will the BooleanQuery described above actually constrain the 
search results to (A AND B) AND (B OR C OR D)? If so, what should I use 
instead?

thank you,
 Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 00:49:01 2007
Return-Path: <java-user-return-28171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52752 invoked from network); 21 May 2007 00:49:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 00:49:00 -0000
Received: (qmail 87570 invoked by uid 500); 21 May 2007 00:49:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87205 invoked by uid 500); 21 May 2007 00:48:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87194 invoked by uid 99); 21 May 2007 00:48:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:48:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:48:53 -0700
Received: by wx-out-0506.google.com with SMTP id i29so1419177wxd
        for <java-user@lucene.apache.org>; Sun, 20 May 2007 17:48:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=L/WmGP8C+BB+IRMrrjlp4EhqixMQBttLG/drE+bpwhZ2T3tC4FOgNfNochRqHCipOxa2M+0Qa3RrfYXPR4+vnedpnBVFSBs9k5XeKZSHFdc4Om6gYd6LVQb/4dbvbj3y+r92bAu01fniAnyzDn7Y0uS3PdvMhSVyNq+iJnHLWFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hLvrBEaE1REjjVQvGTLYs0bgktFm2B3X4pj5wnTh4a3R3xyqpcsV/24R5KxI+z7rIHMKRqVSfWZIqQjDPd4Ld1E4yWrrUTqN29N7gVDAyzX3ScPiNXZ9AuWTkeehEgDEsjHlVdnXntro+xOi/xx+Kyex+GdOsN2YOOBUv1JJx/M=
Received: by 10.70.37.12 with SMTP id k12mr6171057wxk.1179708502403;
        Sun, 20 May 2007 17:48:22 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id m6sm11365336wrm.2007.05.20.17.48.21;
        Sun, 20 May 2007 17:48:21 -0700 (PDT)
Message-ID: <4650EC77.5050206@gmail.com>
Date: Sun, 20 May 2007 20:48:55 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
References: <4650E9DF.4080906@peterbloem.nl>
In-Reply-To: <4650E9DF.4080906@peterbloem.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I like to think of it like this:

Each doc is going to get a score -- if the score is positive the doc 
will be a hit, if the score is 0 the doc will not be a hit.

If a boolean clause is Occur.Must and it is not found, the score will be 
dropped to 0 no matter what (if found, the score is obviously 
increased). If a boolean clause is Occur.Must_Not and is found then the 
score will be dropped to 0 no matter what.
If the boolean query is Occur.Should and it is found a positive number 
is added to the score...if it is not found, nothing is added to the score.

Now you see why it says: "Use this operator for clauses that /should/ 
appear in the matching documents. For a BooleanQuery with two |SHOULD| 
subqueries, at least one of the clauses must appear in the matching 
documents."

To get a positive score and make a hit, one of the Occur.Should clauses 
needs to be found to increase the score above 0.

- Mark

Peter Bloem wrote:
> I'm constructing a search with some required terms and some optional 
> terms in in the query. According to some earlier posts that looks like 
> "+(A B) C D E" in query syntax for required terms A and B and optional 
> terms C D and E. In other words, Lucene considers all documents that 
> have both A and B, and ranks them higher if they also have C D or E.
>
> I'm wondering how this translates to a BooleanQuery. I know I should 
> use BooleanClause.Occur.MUST for A and B, and I guess I should use 
> BooleanQuery.Occur.SHOULD for C, D and E. However the javadocs for 
> BooleanClause.Occur.SHOULD states:
>
> "Use this operator for clauses that /should/ appear in the matching 
> documents. For a BooleanQuery with two |SHOULD| subqueries, at least 
> one of the clauses must appear in the matching documents."
>
> Does this last sentence actually mean that a query with _just_ two 
> SHOULD clauses (ie. only SHOULD clauses) must contain one of the 
> clauses, or will the BooleanQuery described above actually constrain 
> the search results to (A AND B) AND (B OR C OR D)? If so, what should 
> I use instead?
>
> thank you,
> Peter
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 00:50:36 2007
Return-Path: <java-user-return-28172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53277 invoked from network); 21 May 2007 00:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 00:50:35 -0000
Received: (qmail 91620 invoked by uid 500); 21 May 2007 00:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91592 invoked by uid 500); 21 May 2007 00:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91576 invoked by uid 99); 21 May 2007 00:50:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:50:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 17:50:27 -0700
Received: by mu-out-0910.google.com with SMTP id i10so836994mue
        for <java-user@lucene.apache.org>; Sun, 20 May 2007 17:50:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=avavq5v5KJthKjuuLXF80tuKFSu4YISXcxwisUBI56BQEao2pEH/fQX0OJ1IOD0b12canr+UcQSJNUWUMBOGIDqd4Y7DXsmlWl2OMMuKWS4Y/Ym2mK4Tm5pKeYxKeAYtXLWhhMd3cm0Uo5WIijHg76aoEbiWqbdSMxkd6RBgacg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V3MtfTK12vfTGd4/DhpV0hOAURqsrhr0wpVI0n+1HxmaHPFm5UZSAV50dKDqAlyn8qHpKtkPKflsyiwH5dlN1DwPwqCqvNnOrM0ILlRcE+Bk1ZEAriMSQN3M+E6y3wC+Xt1LgysJGN+fCmz8DqB8vjykm3An96WwFdWha2bU1vU=
Received: by 10.82.177.3 with SMTP id z3mr7522890bue.1179708605290;
        Sun, 20 May 2007 17:50:05 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 20 May 2007 17:50:05 -0700 (PDT)
Message-ID: <359a92830705201750h470ffa79l926f28840c793b45@mail.gmail.com>
Date: Sun, 20 May 2007 20:50:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.Store.Compress - does it improve performance of document reads?
In-Reply-To: <c38ea6f20705201036w49aa73c9n59fe13177f4b3e1a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44563_18440510.1179708605167"
References: <752080.39971.qm@web50308.mail.re2.yahoo.com>
	 <200705181111.21310.paul.elschot@xs4all.nl>
	 <c38ea6f20705201036w49aa73c9n59fe13177f4b3e1a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44563_18440510.1179708605167
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you tried the static Sort.INDEXORDER sort object in Lucene 2.1?

Erick

On 5/20/07, Andreas Guther <andreas.guther@gmail.com> wrote:
>
> Thank you for the clarification.
>
> I assume that hits usually return in ranking order which makes sense in
> terms how one usually wants to display the result.  In terms of access
> speed
> this is the non wanted order.  Though it is not a big deal sorting the
> array
> it might be interesting thinking about providing search calls with a
> parameter defining the hits order allowing to have Lucene returning the
> result in document id order if needed.
>
> Andreas
>
>
> On 5/18/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > Otis,
> >
> > See below.
> >
> > On Friday 18 May 2007 05:03, Otis Gospodnetic wrote:
> > > ----- Original Message ----
> > > From: Paul Elschot <paul.elschot@xs4all.nl>
> > >
> > > On Thursday 17 May 2007 08:10, Andreas Guther wrote:
> > > > I am currently exploring how to solve performance problems I
> encounter
> > with
> > > > Lucene document reads.
> > > >
> > > > We have amongst other fields one field (default) storing all
> > searchable
> > > > fields.  This field can become of considerable size since we
> > are  indexing
> > > > documents and  store the content for display within results.
> > > >
> > > > I noticed that the read can be very expensive.  I wonder now if it
> > would
> > > > make sense to add this field as Field.Store.Compress to the
> > index.  Can
> > > > someone tell me if this would speed up the document read or if this
> is
> > > > something only interesting for saving space.
> > >
> > > I have not tried the compression yet, but in my experience a good way
> > > to reduce the costs of document reads from a disk is by reading them
> > > in document number order whenever possible. In this way one saves
> > > on the disk head seeks.
> > > Compression should actually help reducing the costs of disk head seeks
> > > even more.
> > >
> > > OG: Does this really help in a multi-user environment where there are
> > multiple parallel queries hitting the index and reading data from all
> over
> > the index and the disk?  They will all share the same disk head, so the
> > head
> > will still have to jump around to service all these requests, even if
> each
> > request is being careful to read documents in docId order, no?
> >
> > When the requests for reading docs come in parallel, the underlying OS
> > will normally favour the request for which the disk head needs to move
> > only very little. In those cases reading in doc id order also helps
> > throughput by allowing the OS to merge the requests for which the
> > head then needs to move even less per retrieved doc.
> > For example, with 3 retrieved docs per query:
> > 10 1 5 sorts into: 1 5 10.
> > 7 12 3 sorts into: 3 7 12.
> > 1 5 10 and 3 7 12 merge into: 1 3 5 7 10 12, total seek distance: 11.
> > Unsorted these could merge into: 7 10 12 3 1 5, total seek distance: 20.
> >
> > Iirc Hits does not retrieve docs in doc id order.
> >
> > Regards,
> > Paul Elschot
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_44563_18440510.1179708605167--

From java-user-return-28173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 01:20:48 2007
Return-Path: <java-user-return-28173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64444 invoked from network); 21 May 2007 01:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 01:20:46 -0000
Received: (qmail 15507 invoked by uid 500); 21 May 2007 01:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15466 invoked by uid 500); 21 May 2007 01:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15455 invoked by uid 99); 21 May 2007 01:20:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 18:20:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of liuping.james@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 May 2007 18:20:38 -0700
Received: by an-out-0708.google.com with SMTP id b8so354257ana
        for <java-user@lucene.apache.org>; Sun, 20 May 2007 18:20:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GW5QBZxeAPnWHgZNiGCn/OhGGdVk29FwJjhlSgc99pEoq1QYJtl6kR705l/aHvVbMXqpBviVVKJ1YIkW3TBPONOFApzekaVDREugNtkbu3sEZ+C+eNei/8Ww7p263xGufaRQ/D4wtjG94oPz2H+6i/jZrshbC5IOSPwrAPjttM8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m4aM1K5MV4wRAo2TQLMXKoPzMoxZp4h+1tj68cYFBcolOEXPo4lDMhDpKrX2OJuS0Ev7T4rVPcf+MAT1BpaPSV/bGK9tM8NjHL1zEWq5bIP56QqG6y3wx8iGRP4fIyi7xKhDc3JzyaEhbk6utElBpPW7V9Ucm7xTd6pioeUuy0c=
Received: by 10.100.197.15 with SMTP id u15mr2648477anf.1179710416755;
        Sun, 20 May 2007 18:20:16 -0700 (PDT)
Received: by 10.101.66.18 with HTTP; Sun, 20 May 2007 18:20:16 -0700 (PDT)
Message-ID: <5d5204510705201820u76358be3t55b952924c092dbf@mail.gmail.com>
Date: Mon, 21 May 2007 09:20:16 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org, saurabh@danicorp.com
Subject: Re: Command line search tool using Lucene (targeted for Site Search)
In-Reply-To: <98655fc130104e0e915304a57fe688bd@maila25.webcontrolcenter.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86917_16409079.1179710416587"
References: <98655fc130104e0e915304a57fe688bd@maila25.webcontrolcenter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86917_16409079.1179710416587
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

it seems not quick.



http://demo1.minalyzer.com/minalyzerlite/search4.php?q=test&offset=0
Results 1 - 15 of 16 for test.(1.586 seconds)



2007/5/20, Saurabh Dani <saurabh@danicorp.com>:
>
>
>
> Greetings All,
>
> We would like to introduce our java lucene based command line search tool,
> Minalyzer Lite.
>
> Minalyzer Lite ships with an indexing executable, which can index data
> from file system, databases,  by crawling web sites or an ARC file (output
> of Heritrix Crawler). The end user does not need any knowledge of lucene or
> java.
>
> The search executable takes the keywords and index collection name as
> inputs and returns the resultset as an XML which can be parsed and displyed
> by calling programs.
>
> For those of you who are aware of Solr, it is in no way a competitive
> product for Solr. Our target is primarily to provide "Site Search" for those
> web sites, which are hosted on low cost shared servers and do not have JAVA
> installed (as we are shipping an embedded version of Java and the calling
> program calls the search using exec / backtick / system commands).
>
> This page explains how site search works -
> http://www.minalyzer.com/documentation/minalyzerlite--how-site-search-works
>
> We have created some live examples to demonstrate the search features.
> Most of these are running on shared hosting accounts which cost less than 3
> USD a month.
>
> Php script hosted on Linux server
> http://demo1.minalyzer.com/minalyzerlite/search4.php
> Perl script hosted on Linux server
> http://demo1.minalyzer.com/minalyzerlite/perl/search.pl
> Aspx .Net running on Windows server
> http://www.minalyzer.com/mlitedemos/aspx/samplesearch.aspx
>
> We have done tests with close beta groups that we feel confident enough to
> announce the public availability, but we are still calling it beta until we
> upgrade to Lucene 2.1 and make the examples that we ship with the product
> more error proof and robust.
>
> Thanks
> Saurabh
>



-- 
regards
jl

------=_Part_86917_16409079.1179710416587--

From java-user-return-28174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 08:46:21 2007
Return-Path: <java-user-return-28174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76668 invoked from network); 21 May 2007 08:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 08:46:20 -0000
Received: (qmail 81712 invoked by uid 500); 21 May 2007 08:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81660 invoked by uid 500); 21 May 2007 08:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81649 invoked by uid 99); 21 May 2007 08:46:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 01:46:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 May 2007 01:46:12 -0700
Received: (qmail invoked by alias); 21 May 2007 08:45:50 -0000
Received: from p548c5947.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.89.71]
  by mail.gmx.net (mp017) with SMTP; 21 May 2007 10:45:50 +0200
X-Authenticated: #3493418
X-Provags-ID: V01U2FsdGVkX1+N0D8LteeNKL9d/Wtqt6nPrddvBwj2jWbFY/8oMz
	FjNIoTDyaN+k2U
Message-ID: <46515BFF.3030301@gmx.de>
Date: Mon, 21 May 2007 10:44:47 +0200
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
References: <4650E9DF.4080906@peterbloem.nl>
In-Reply-To: <4650E9DF.4080906@peterbloem.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Peter Bloem wrote:
[...]
> "+(A B) C D E"
[...]
> In other words, Lucene considers all documents that 
> have both A and B, and ranks them higher if they also have C D or E.

Hello Peter,

for my understanding "+(A B) C D E" means at least one of the terms "A" 
or "B" must be contained and the terms "C", "D", and "E" are optional. 
The following documents d are hits:
d(A, B)
d(A)
d(B)
d(A, C)
...
Documents without "A" and "B" are not a hit.

To have both terms "A" and "B" in a document the query should be: "(+A 
+B) C D E" or "+A +B C D E".

Sren



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 09:25:29 2007
Return-Path: <java-user-return-28175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89825 invoked from network); 21 May 2007 09:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 09:25:28 -0000
Received: (qmail 54597 invoked by uid 500); 21 May 2007 09:25:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54561 invoked by uid 500); 21 May 2007 09:25:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54549 invoked by uid 99); 21 May 2007 09:25:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 02:25:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.199.12] (HELO huffman.isp.lu) (194.154.199.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 02:25:19 -0700
Received: from charlie (charlie_ce0 [172.18.1.213])
	by huffman.isp.lu (8.10.2+Sun/8.10.2) with ESMTP id l4L9Qnr05108
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 11:26:50 +0200 (MET DST)
Received: from [172.18.5.129] by mailfloat.saint-paul.lu
 (iPlanet Messaging Server 5.2 (built Feb 21 2002))
 with ESMTP id <0JID00KUEWTXYC@mailfloat.saint-paul.lu> for
 java-user@lucene.apache.org; Mon, 21 May 2007 11:25:09 +0200 (MEST)
Date: Mon, 21 May 2007 11:25:07 +0200
From: Stefan Colella <stefan.colella@saint-paul.lu>
Subject: Re: search result problem
In-reply-to: <BE1A620B-68FE-4718-957A-3A166371933C@apache.org>
To: java-user@lucene.apache.org
Message-id: <46516573.3090209@saint-paul.lu>
Organization: saint-paul luxembourg s.a.
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
References: <464D9810.2070705@saint-paul.lu>
 <BE1A620B-68FE-4718-957A-3A166371933C@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

hello,
thx for u reply, i used the explain method and i understand now why some 
documents are returned.

I am using the same Analyzer for indexing and searching.

I tried to only add the content of the page where that expression can be 
found (instead of the whole document) and then  the search works.

Do i have to split my pdf text into more field? Or what could be the 
problem?


Grant Ingersoll wrote:
> Try using the explain() method to see why the documents that were 
> returned scored the way they did.
>
> If I am understanding correctly, you are saying that Luke shows that 
> those words aren't actually in your index?  Can you elaborate on what 
> your analysis process is?  Are you searching using the same Analyzer 
> as you are indexing with?  I would try to isolate the problem down to 
> some unit tests, if possible.
>
> Cheers,
> Grant
>
> On May 18, 2007, at 8:12 AM, Stefan Colella wrote:
>
>> Hello,
>>
>> My application is working with PDF files so i use lucene with PdfBox 
>> to create a little search engine. I am new to lucene.
>>
>> All seemed to work fine but after some tests I saw that some 
>> expressions like "stock option" where never found (or returns the 
>> wrong documents) even if it exist in my PDF files. I searched in the 
>> mail archive and found that I have to use the "French Analyser" but 
>> that didn't work too.
>>
>> I found that there is a tool named Luke to check the lucene index. I 
>> could see that the original text contains those words but nothing in 
>> the tokenizer.
>>
>> Anybody who can help or can explain where I can start to look ?
>>
>> thanks
>>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at 
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 09:30:34 2007
Return-Path: <java-user-return-28176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92570 invoked from network); 21 May 2007 09:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 09:30:34 -0000
Received: (qmail 66910 invoked by uid 500); 21 May 2007 09:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66873 invoked by uid 500); 21 May 2007 09:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66862 invoked by uid 99); 21 May 2007 09:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 02:30:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 02:30:26 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hq4DN-0002f6-Ph
	for java-user@lucene.apache.org; Mon, 21 May 2007 02:30:05 -0700
Message-ID: <10715673.post@talk.nabble.com>
Date: Mon, 21 May 2007 02:30:05 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
search results on strings in uppercase. (example : VEHICLE)
When I search the string (in lower case), I get no result. I get results if
I use "vehicle*" or "vehiclE", or "vehicLe" etc.

What is odd is that it affects only some of the strings, not all of them.
Anyone who has ever experienced this problem?

Thanks,
Florian 
-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 13:18:43 2007
Return-Path: <java-user-return-28177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93679 invoked from network); 21 May 2007 13:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 13:18:41 -0000
Received: (qmail 99863 invoked by uid 500); 21 May 2007 13:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99447 invoked by uid 500); 21 May 2007 13:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99436 invoked by uid 99); 21 May 2007 13:18:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:18:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.108.190.10] (HELO vwsrv01.end2endwirefree.com) (193.108.190.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:18:32 -0700
Received: from aaliitnt02.pre-tel.dk ([10.2.30.17]unverified) by 
	vwsrv01.end2endwirefree.com with InterScan Message Security Suite; Mon, 21 
	May 2007 15:08:23 +0200
Received: from 10.2.30.136 ([10.2.30.136]) by aaliitnt02.pre-tel.dk 
	([10.2.30.17]) with Microsoft Exchange Server HTTP-DAV ;Mon, 21 May 2007 
	13:18:05 +0000
Received: from dolphine by AALIITNT02; 21 May 2007 13:18:04 +0000
Subject: Upgrade 2.0 -> 2.1
From: Svend Ole Nielsen <svendole.nielsen@end2endmobile.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative;
	boundary="=-rabguZ1sPSafWfNA3G86"
Date: Mon, 21 May 2007 15:17:25 +0200
Message-Id: <1179753445.31015.2.camel@dolphine>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
X-imss-version: 2.047
X-imss-result: Passed
X-imss-approveListMatch: *@end2endmobile.com
X-Virus-Checked: Checked by ClamAV on apache.org

--=-rabguZ1sPSafWfNA3G86
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi
I have tried to upgrade from 2.0 -> 2.1 to overcome some NFS-issues. It
compiles just fine, but when I run the application and try to add a
document if throws an exception stating NoSuchMethod. This happens when
I try to add an object of type Field to a newly created empty Document.

I have erased all dependencies in my project aswell on the server. So it
should be as clean as a whistle, but no luck. I'm running it on a Bea
8.1 SP6 with the old 1.4 Java

Anyone knows where to look ??

Best regards,
Svend Ole

--=-rabguZ1sPSafWfNA3G86--


From java-user-return-28178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 13:27:59 2007
Return-Path: <java-user-return-28178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3504 invoked from network); 21 May 2007 13:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 13:27:58 -0000
Received: (qmail 20759 invoked by uid 500); 21 May 2007 13:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20731 invoked by uid 500); 21 May 2007 13:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20720 invoked by uid 99); 21 May 2007 13:27:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:27:55 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:27:49 -0700
Received: by ug-out-1314.google.com with SMTP id k40so947097ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 06:27:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C60rq4g60Q0ApEd5HsVVyn8o/9mOfBeb9i+6lVuOmnRlJTR5Kio5cpzLxTDE5CV7+ktHVzisxsCyYn5eAVahJHUQsGaWKAVX59cYOrCVkNA7wFNKamEISzIXL/AaOovzrIT/mB72XCchgmkZ2d5/MKY8ezcIEKhj5n9g4rjCI+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jzcvwCaJ/T9xtuSajFA0xjaItJjGp7aTmu72P77iYRzwsN+NpprdTlBHjWI3c/9fAmnCLKOvx/vCkjDK6hFKxC6w9XdwwrEJb7qTIWcOsdfrbLh+OhBqVW3AdIA19hyEmd8IqAxvHysxZKyBNdKpJr3eNVyRoSPYVewrdU8siog=
Received: by 10.82.145.7 with SMTP id s7mr8681565bud.1179754047825;
        Mon, 21 May 2007 06:27:27 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 21 May 2007 06:27:27 -0700 (PDT)
Message-ID: <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com>
Date: Mon, 21 May 2007 09:27:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital letters
In-Reply-To: <10715673.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49345_29910360.1179754047786"
References: <10715673.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49345_29910360.1179754047786
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First have you gotten a copy of Luke to examine your index to see
what's actually indexed?

The default behavior is usually to lowercase everything, but I'm not
entirely sure if the French analyzer does this. But I suspect so.

Searches are case sensitive. To get caseless searching, you need
to put everything in the same case. This is usually done for you with
any of the standard analyzers, but check specifically.

Are you using the same analyzer at index AND search time?

Best
Erick

On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>
>
> Hello,
>
> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
> search results on strings in uppercase. (example : VEHICLE)
> When I search the string (in lower case), I get no result. I get results
> if
> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>
> What is odd is that it affects only some of the strings, not all of them.
> Anyone who has ever experienced this problem?
>
> Thanks,
> Florian
> --
> View this message in context:
> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49345_29910360.1179754047786--

From java-user-return-28179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 13:30:32 2007
Return-Path: <java-user-return-28179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4886 invoked from network); 21 May 2007 13:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 13:30:31 -0000
Received: (qmail 27789 invoked by uid 500); 21 May 2007 13:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27760 invoked by uid 500); 21 May 2007 13:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27749 invoked by uid 99); 21 May 2007 13:30:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:30:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ian.lea@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:30:23 -0700
Received: by ug-out-1314.google.com with SMTP id k40so947791ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 06:30:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=riz7o4cteQaZmk286BMGS0f/7b8CYGt52oT3Jhu9bTC0YeBfsDrFPAQxSlJdgm90/nuX5TpkMdmkE8Hxpp8jvQSbuFIGKx27ytonU1RiBeT7RtCI5/sJDH/1PJkbboghHtOz5cnu/8rbVfqkEeCeSK/AZaj4E2DZH3TcaY7tFjo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ky1ipYJcOo+VvPf94pkSgOtFRz/6BX4/5tprylrYZjMZVljq7PK1bE4+VOLAcUIxqZTPnVQTahgHqkgy37EbT1v9AEJIn0bvfGXVf6VRemk5R1AIXsFx14wnMCBVZB0vmXScgiEqlVQ2l+8nLTGjy95rltGwRKMmsEqGoGO883k=
Received: by 10.66.221.19 with SMTP id t19mr3434518ugg.1179754200098;
        Mon, 21 May 2007 06:30:00 -0700 (PDT)
Received: by 10.67.34.17 with HTTP; Mon, 21 May 2007 06:30:00 -0700 (PDT)
Message-ID: <8c4e68610705210630x4b89c886gb4ae964e26b567ce@mail.gmail.com>
Date: Mon, 21 May 2007 14:30:00 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Upgrade 2.0 -> 2.1
In-Reply-To: <1179753445.31015.2.camel@dolphine>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1179753445.31015.2.camel@dolphine>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


I saw this or something similar going from 2.0 to 2.1 when hadn't
recompiled all my lucene related code.  It went away when everything
was recompiled, so I'd guess you've got an old class file lurking
somewhere.


--
Ian.


On 5/21/07, Svend Ole Nielsen <svendole.nielsen@end2endmobile.com> wrote:
> Hi
> I have tried to upgrade from 2.0 -> 2.1 to overcome some NFS-issues. It
> compiles just fine, but when I run the application and try to add a
> document if throws an exception stating NoSuchMethod. This happens when
> I try to add an object of type Field to a newly created empty Document.
>
> I have erased all dependencies in my project aswell on the server. So it
> should be as clean as a whistle, but no luck. I'm running it on a Bea
> 8.1 SP6 with the old 1.4 Java
>
> Anyone knows where to look ??
>
> Best regards,
> Svend Ole
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 13:43:03 2007
Return-Path: <java-user-return-28180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9695 invoked from network); 21 May 2007 13:43:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 13:43:01 -0000
Received: (qmail 71882 invoked by uid 500); 21 May 2007 13:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71846 invoked by uid 500); 21 May 2007 13:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71835 invoked by uid 99); 21 May 2007 13:42:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:42:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 06:42:51 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163AC5C5@mailer.syr.edu>; Mon, 21 May 2007 9:42:31 -0400
Message-ID: <4651A192.20807@syr.edu>
Date: Mon, 21 May 2007 09:41:38 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: documents with large numbers of fields
References: <29542aae0705181301s131343by3b565190eba59f4d@mail.gmail.com> <7859C539-C18D-418C-80FF-6F95805DE222@gmail.com>
In-Reply-To: <7859C539-C18D-418C-80FF-6F95805DE222@gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike Klaas wrote:
> On 18-May-07, at 1:01 PM, charlie w wrote:
>> Is there an upper limit on the number of fields comprising a document,
>> and if so what is it?
> 
> There is not.  They are relatively costless if omitNorms=False

Mike, I think you meant "relatively costless if omitNorms=True".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 14:01:02 2007
Return-Path: <java-user-return-28181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17279 invoked from network); 21 May 2007 14:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 14:00:55 -0000
Received: (qmail 30089 invoked by uid 500); 21 May 2007 14:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30062 invoked by uid 500); 21 May 2007 14:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30051 invoked by uid 99); 21 May 2007 14:00:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 07:00:53 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 07:00:47 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hq8R0-0000sE-FQ
	for java-user@lucene.apache.org; Mon, 21 May 2007 07:00:26 -0700
Message-ID: <10719413.post@talk.nabble.com>
Date: Mon, 21 May 2007 07:00:26 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
Thank you for your quick answer.
I use Luke to examine the index, but since I switched to FrenchAnalyzer, it
says 'Not a Lucene index'.
If I open the index files in a text viewer, the strings are in UPPER case.
I do use the same analyzer to index and search.
So, do I have to specify the FrenchAnalyzer not to be case sensitive? How to
do that?
Thanks a lot
Florian


Erick Erickson wrote:
> 
> First have you gotten a copy of Luke to examine your index to see
> what's actually indexed?
> 
> The default behavior is usually to lowercase everything, but I'm not
> entirely sure if the French analyzer does this. But I suspect so.
> 
> Searches are case sensitive. To get caseless searching, you need
> to put everything in the same case. This is usually done for you with
> any of the standard analyzers, but check specifically.
> 
> Are you using the same analyzer at index AND search time?
> 
> Best
> Erick
> 
> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>
>>
>> Hello,
>>
>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
>> search results on strings in uppercase. (example : VEHICLE)
>> When I search the string (in lower case), I get no result. I get results
>> if
>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>
>> What is odd is that it affects only some of the strings, not all of them.
>> Anyone who has ever experienced this problem?
>>
>> Thanks,
>> Florian
>> --
>> View this message in context:
>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10719413
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 14:48:30 2007
Return-Path: <java-user-return-28182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35845 invoked from network); 21 May 2007 14:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 14:48:28 -0000
Received: (qmail 58004 invoked by uid 500); 21 May 2007 14:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57969 invoked by uid 500); 21 May 2007 14:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57958 invoked by uid 99); 21 May 2007 14:48:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 07:48:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.108.190.10] (HELO vwsrv01.end2endwirefree.com) (193.108.190.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 07:48:18 -0700
Received: from aaliitnt02.pre-tel.dk ([10.2.30.17]unverified) by 
	vwsrv01.end2endwirefree.com with InterScan Message Security Suite; Mon, 21 
	May 2007 16:38:10 +0200
Received: from 10.2.30.136 ([10.2.30.136]) by aaliitnt02.pre-tel.dk 
	([10.2.30.17]) with Microsoft Exchange Server HTTP-DAV ;Mon, 21 May 2007 
	14:47:53 +0000
Received: from dolphine by AALIITNT02; 21 May 2007 16:47:51 +0200
Subject: Re: Upgrade 2.0 -> 2.1
From: Svend Ole Nielsen <svendole.nielsen@end2endmobile.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610705210630x4b89c886gb4ae964e26b567ce@mail.gmail.com>
References: <1179753445.31015.2.camel@dolphine> 
	<8c4e68610705210630x4b89c886gb4ae964e26b567ce@mail.gmail.com>
Content-Type: multipart/alternative;
	boundary="=-i90WGfE72M3+VBLYfu3l"
Date: Mon, 21 May 2007 16:47:51 +0200
Message-Id: <1179758871.32596.2.camel@dolphine>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
X-imss-version: 2.047
X-imss-result: Passed
X-imss-approveListMatch: *@end2endmobile.com
X-Virus-Checked: Checked by ClamAV on apache.org

--=-i90WGfE72M3+VBLYfu3l
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi Ian

Well it worked. Thanks :)

Wasn't aware of that could have fixed it, but after your suggestion it
seemed like the most logical solution.

/Svend

man, 21 05 2007 kl. 14:30 +0100, skrev Ian Lea:

> Hi
> 
> 
> I saw this or something similar going from 2.0 to 2.1 when hadn't
> recompiled all my lucene related code.  It went away when everything
> was recompiled, so I'd guess you've got an old class file lurking
> somewhere.
> 
> 
> --
> Ian.
> 
> 
> On 5/21/07, Svend Ole Nielsen <svendole.nielsen@end2endmobile.com> wrote:
> > Hi
> > I have tried to upgrade from 2.0 -> 2.1 to overcome some NFS-issues. It
> > compiles just fine, but when I run the application and try to add a
> > document if throws an exception stating NoSuchMethod. This happens when
> > I try to add an object of type Field to a newly created empty Document.
> >
> > I have erased all dependencies in my project aswell on the server. So it
> > should be as clean as a whistle, but no luck. I'm running it on a Bea
> > 8.1 SP6 with the old 1.4 Java
> >
> > Anyone knows where to look ??
> >
> > Best regards,
> > Svend Ole
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=-i90WGfE72M3+VBLYfu3l--


From java-user-return-28183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 18:56:03 2007
Return-Path: <java-user-return-28183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39367 invoked from network); 21 May 2007 18:56:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 18:56:02 -0000
Received: (qmail 5226 invoked by uid 500); 21 May 2007 18:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5190 invoked by uid 500); 21 May 2007 18:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5179 invoked by uid 99); 21 May 2007 18:56:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 11:56:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 11:55:52 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqD2Z-0000rF-MS
	for java-user@lucene.apache.org; Mon, 21 May 2007 11:55:31 -0700
Message-ID: <10724708.post@talk.nabble.com>
Date: Mon, 21 May 2007 11:55:31 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: How to Update the Index once it is created
In-Reply-To: <359a92830705140649uea63ef9vd8081a299975606f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com> <359a92830705140649uea63ef9vd8081a299975606f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If you are using Orcale and Lucene, check out 
http://www.hibernate.org/410.html "Hibernate Search"  , this will
automaticly update your lucene index, on any change to your database table

Erick Erickson wrote:
> 
> You have to delete the old document and add it a new one.
> 
> See IndexModifier class.
> 
> There is no ability to modify a document in place.
> 
> Best
> Erick
> 
> On 5/14/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
>>
>> Hi All,
>>
>>
>>
>> Thanks for your response. I have one more doubt. How can I update a
>> index once created from Oracle, instead of recreating the whole.
>> Whenever there is a change in the oracle table
>> (insertion/updation/deletion of a row) my application should update the
>> index.
>>
>>
>>
>> Thanks in advance.
>>
>>
>>
>>
>>
>> Krishna Prasad M
>>
>>
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-Update-the-Index-once-it-is-created-tf3752208.html#a10724708
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 18:59:52 2007
Return-Path: <java-user-return-28184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40547 invoked from network); 21 May 2007 18:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 18:59:49 -0000
Received: (qmail 15091 invoked by uid 500); 21 May 2007 18:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15045 invoked by uid 500); 21 May 2007 18:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15034 invoked by uid 99); 21 May 2007 18:59:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 11:59:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 11:59:36 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqD6A-0000x2-9Z
	for java-user@lucene.apache.org; Mon, 21 May 2007 11:59:14 -0700
Message-ID: <10724827.post@talk.nabble.com>
Date: Mon, 21 May 2007 11:59:14 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Implement a tokenizer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,

I was interested in changing the StandardTokenzier so it will not remove the
"+" (plus) sign from my stream.
Looking in the code and documentation, it reads: 

"If this tokenizer does not suit your application, please consider copying
this source code
directory to your project and maintaining your own grammar-based tokenizer."

I can't understand from this code where I should jump in, and do my change.
Can someone point me out to where I should look at in order perform my
change?

Thanks in advanced
-- 
View this message in context: http://www.nabble.com/Implement-a-tokenizer-tf3792172.html#a10724827
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 20:05:34 2007
Return-Path: <java-user-return-28185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68248 invoked from network); 21 May 2007 20:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 20:05:33 -0000
Received: (qmail 34706 invoked by uid 500); 21 May 2007 20:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34675 invoked by uid 500); 21 May 2007 20:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34664 invoked by uid 99); 21 May 2007 20:05:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:05:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:05:23 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqE7q-0002tL-Ic
	for java-user@lucene.apache.org; Mon, 21 May 2007 13:05:02 -0700
Message-ID: <10725950.post@talk.nabble.com>
Date: Mon, 21 May 2007 13:05:02 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: stop words, synonyms... what's in it for me?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,

I have started using Lucene not long ago, with plans to replace my current
sql queries in my application with it.
As I wasn't aware of Lucene before, I have implemented some similar tools
(filters) as Lucene includes.

For example I have implemented a "stop word" tool.
In my case I have much more configuration options than Lucene, having the
option to remove sub strings in addition to complete tokens.
I can configure the wanted location of the sub string within the token,
or even the location of the token within the phrase.

I have implemented a synonym mechanism (substitution mechanism) that can
also be configured according to location within a phrase. It can also be
configured to find synonyms taking into account spelling mistakes. Although
it doesn't expand but only transforms to one certain replacement.It can find
replacements for sub strings as well. So I can use it to separate words. For
example in German I have "strasse"=> " strasse" (with a space in the front),
so words like "mainstrasse" will be split to "main" and "strasse".

I am wondering if I can use my "standardization" tools before calling the
lucene indexing, without implementing any custom analyzers and achieve more
or less the same results?

What do I "loose" if I go this way? The stemming filters are really one
thing I didn't have and I will use.
Is there any point for me to start creating custom analyzers with filter for
stop words, synonyms, and implementing my own "sub string" filter, for
separating tokens into "sub words" (like "mainstrasse"=> "main", "strasse")
?

Thanks in advance

-- 
View this message in context: http://www.nabble.com/stop-words%2C-synonyms...-what%27s-in-it-for-me--tf3792510.html#a10725950
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 20:41:23 2007
Return-Path: <java-user-return-28186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84517 invoked from network); 21 May 2007 20:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 20:41:22 -0000
Received: (qmail 18309 invoked by uid 500); 21 May 2007 20:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18276 invoked by uid 500); 21 May 2007 20:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18265 invoked by uid 99); 21 May 2007 20:41:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:41:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:41:10 -0700
Received: (qmail 15570 invoked from network); 21 May 2007 20:40:47 -0000
Received: from unknown (HELO p54bfdf57.dip.t-dialin.net) ([pbs]695637@[84.191.223.87])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 May 2007 20:40:47 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
Date: Mon, 21 May 2007 22:41:03 +0200
User-Agent: KMail/1.8.2
References: <10725950.post@talk.nabble.com>
In-Reply-To: <10725950.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705212241.03686@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 21 May 2007 22:05, bhecht wrote:

> Is there any point for me to start creating custom analyzers with filter
> for stop words, synonyms, and implementing my own "sub string" filter,
> for separating tokens into "sub words" (like "mainstrasse"=> "main",
> "strasse")

Yes: I assume your document should be found both with "strasse" and with 
"mainstrasse". You will then need to put main, strasse, and mainstrasse at 
the same position (setPositionIncrement(0)). If you don't do that, phrase 
queries will not work anymore as expected. Thus you need an analyzer, 
modifying the string before they are put in Lucene is not enough.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 20:54:06 2007
Return-Path: <java-user-return-28187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89204 invoked from network); 21 May 2007 20:54:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 20:54:05 -0000
Received: (qmail 40810 invoked by uid 500); 21 May 2007 20:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40781 invoked by uid 500); 21 May 2007 20:54:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40769 invoked by uid 99); 21 May 2007 20:54:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:54:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 13:53:56 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqEsp-00045w-MV
	for java-user@lucene.apache.org; Mon, 21 May 2007 13:53:35 -0700
Message-ID: <10726812.post@talk.nabble.com>
Date: Mon, 21 May 2007 13:53:35 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
In-Reply-To: <200705212241.03686@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bhecht@ams-sys.com
References: <10725950.post@talk.nabble.com> <200705212241.03686@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Daniel,

But when searching, I will run my "standardization" tools again before
querying Lucene, so what you mentioned will not be a problem.
If someone searches for mainstrasse, my tools will split it again to main
and strasse, and then lucene will be able to find it.


Daniel Naber-5 wrote:
> 
> On Monday 21 May 2007 22:05, bhecht wrote:
> 
>> Is there any point for me to start creating custom analyzers with filter
>> for stop words, synonyms, and implementing my own "sub string" filter,
>> for separating tokens into "sub words" (like "mainstrasse"=> "main",
>> "strasse")
> 
> Yes: I assume your document should be found both with "strasse" and with 
> "mainstrasse". You will then need to put main, strasse, and mainstrasse at 
> the same position (setPositionIncrement(0)). If you don't do that, phrase 
> queries will not work anymore as expected. Thus you need an analyzer, 
> modifying the string before they are put in Lucene is not enough.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/stop-words%2C-synonyms...-what%27s-in-it-for-me--tf3792510.html#a10726812
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:04:34 2007
Return-Path: <java-user-return-28188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93449 invoked from network); 21 May 2007 21:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:04:33 -0000
Received: (qmail 57229 invoked by uid 500); 21 May 2007 21:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57181 invoked by uid 500); 21 May 2007 21:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57170 invoked by uid 99); 21 May 2007 21:04:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:04:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:04:23 -0700
Received: (qmail 9377 invoked from network); 21 May 2007 21:04:00 -0000
Received: from unknown (HELO p54bfdf57.dip.t-dialin.net) ([pbs]695637@[84.191.223.87])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 May 2007 21:04:00 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
Date: Mon, 21 May 2007 23:04:16 +0200
User-Agent: KMail/1.8.2
References: <10725950.post@talk.nabble.com> <200705212241.03686@danielnaber.de> <10726812.post@talk.nabble.com>
In-Reply-To: <10726812.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200705212304.16800@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 21 May 2007 22:53, bhecht wrote:

> If someone searches for mainstrasse, my tools will split it again to
> main and strasse, and then lucene will be able to find it.

"strasse" will match "mainstrasse" but the phrase query "sch=C3=B6ne strass=
e"=20
will not match "sch=C3=B6ne mainstrasse". However, this could be considered=
 a=20
feature. Aynway, it will be difficult to use features that rely on the=20
term list, e.g. the spellchecker. It will not be able to suggest=20
"mainstrasse", as that's not in the index.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:10:20 2007
Return-Path: <java-user-return-28189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96222 invoked from network); 21 May 2007 21:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:10:20 -0000
Received: (qmail 71307 invoked by uid 500); 21 May 2007 21:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71092 invoked by uid 500); 21 May 2007 21:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71081 invoked by uid 99); 21 May 2007 21:10:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:10:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:10:08 -0700
Received: by ug-out-1314.google.com with SMTP id k40so51092ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 14:09:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dQu0XC9/l3x2LwEno+uGFineMbzNvWDi+4gkytQJ4UuMyhRBZulIylUULroOYDKGWbKeP5lZGARgFX5o1oCpaDz1J8IDMSSkZtNyqEfzuwRwzBFJm3ivc0fRImm50PPgI/XsZNWt0xrMr5otYO4ivgxn8MNOOoQJ9PBpe5KqpvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RZ7ERXkTdDjSvgnVsUtHgSpM0TF1coJkL7huRrIYxkBUrJ7p0KP9oQ9SkI+xpGW+ZRAxse4a0aKI4Gd072iP2OOsPtGf8JMiLbENPm7pzrhxJRqxqSX4zK2e6wGsDLxVYIfhKI8K36zNCqRmKF/4o2mk76Gvqeixts5vraVOJpE=
Received: by 10.67.27.15 with SMTP id e15mr50447ugj.1179781780838;
        Mon, 21 May 2007 14:09:40 -0700 (PDT)
Received: by 10.67.64.16 with HTTP; Mon, 21 May 2007 14:09:40 -0700 (PDT)
Message-ID: <6e3ae6310705211409h606ad9e8u6d41aae0de64dd50@mail.gmail.com>
Date: Mon, 21 May 2007 14:09:40 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to Update the Index once it is created
In-Reply-To: <10724708.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com>
	 <359a92830705140649uea63ef9vd8081a299975606f@mail.gmail.com>
	 <10724708.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Does it mandate you to pass data through Hibernate? This seems very
similar to Compass' approach.

I believe a more generic approach is to compare what's already indexed
with what's changed or deleted, so you can use any framework to work
with Lucene. And simply selecting the data and creating the index can
avoid some specific framework limitation and easier to scale.  Also,
re-indexing will also be easier.

DBSight tracks changes through simple SQLs, hard-deleted or
soft-deleted content, and do it very efficiently even for large number
of documents.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 5/21/07, bhecht <bhecht@ams-sys.com> wrote:
>
> If you are using Orcale and Lucene, check out
> http://www.hibernate.org/410.html "Hibernate Search"  , this will
> automaticly update your lucene index, on any change to your database table
>
> Erick Erickson wrote:
> >
> > You have to delete the old document and add it a new one.
> >
> > See IndexModifier class.
> >
> > There is no ability to modify a document in place.
> >
> > Best
> > Erick
> >
> > On 5/14/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
> >>
> >> Hi All,
> >>
> >>
> >>
> >> Thanks for your response. I have one more doubt. How can I update a
> >> index once created from Oracle, instead of recreating the whole.
> >> Whenever there is a change in the oracle table
> >> (insertion/updation/deletion of a row) my application should update the
> >> index.
> >>
> >>
> >>
> >> Thanks in advance.
> >>
> >>
> >>
> >>
> >>
> >> Krishna Prasad M
> >>
> >>
> >>
> >>
> >
> >
>
> --
> View this message in context: http://www.nabble.com/How-to-Update-the-Index-once-it-is-created-tf3752208.html#a10724708
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:14:41 2007
Return-Path: <java-user-return-28190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98881 invoked from network); 21 May 2007 21:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:14:41 -0000
Received: (qmail 81017 invoked by uid 500); 21 May 2007 21:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80734 invoked by uid 500); 21 May 2007 21:14:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80723 invoked by uid 99); 21 May 2007 21:14:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:14:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:14:30 -0700
Received: from emss02g01.ems.lmco.com (relay2.ems.lmco.com [166.29.2.54])by mailgw1a.lmco.com  (LM-6) with ESMTP id l4LLBb1N023451for <java-user@lucene.apache.org>; Mon, 21 May 2007 15:14:07 -0600 (MDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JIE00E01TJK8U@lmco.com> for java-user@lucene.apache.org; Mon, 21 May 2007 15:11:44 -0600 (MDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JIE00BTATJD9N@lmco.com> for java-user@lucene.apache.org; Mon, 21 May 2007 15:11:39 -0600 (MDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 21 May 2007 17:11:39 -0400
Date: Mon, 21 May 2007 17:11:38 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Implement a tokenizer
In-reply-to: <10724827.post@talk.nabble.com>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B2@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Implement a tokenizer
Thread-Index: Aceb2sNxZRZV0W7XRyaDocP+MilefgAEXE0w
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <10724827.post@talk.nabble.com>
X-OriginalArrivalTime: 21 May 2007 21:11:39.0066 (UTC) FILETIME=[9F4E89A0:01C79BEC]
X-Virus-Checked: Checked by ClamAV on apache.org

What you need to do is to create your own tokenizer. Just copy the code
from the StandardTokenizer to your XYZTokenizer and make your changes.
Then you need to create your own Analyzer class (again copy the code
from the StandardAnalyzer) and user your XYZTokenizer in the new
XYZAnalyzer you created.

HTH

Aviran
http://www.aviransplace.com
http://shaveh.co.il 

-----Original Message-----
From: bhecht [mailto:bhecht@ams-sys.com] 
Sent: Monday, May 21, 2007 2:59 PM
To: java-user@lucene.apache.org
Subject: Implement a tokenizer


Hi there,

I was interested in changing the StandardTokenzier so it will not remove
the "+" (plus) sign from my stream.
Looking in the code and documentation, it reads: 

"If this tokenizer does not suit your application, please consider
copying this source code directory to your project and maintaining your
own grammar-based tokenizer."

I can't understand from this code where I should jump in, and do my
change.
Can someone point me out to where I should look at in order perform my
change?

Thanks in advanced
--
View this message in context:
http://www.nabble.com/Implement-a-tokenizer-tf3792172.html#a10724827
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:15:11 2007
Return-Path: <java-user-return-28191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99198 invoked from network); 21 May 2007 21:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:15:10 -0000
Received: (qmail 82899 invoked by uid 500); 21 May 2007 21:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82857 invoked by uid 500); 21 May 2007 21:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82846 invoked by uid 99); 21 May 2007 21:15:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:15:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:15:00 -0700
Received: by ug-out-1314.google.com with SMTP id k40so52393ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 14:14:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oVyOfu5LWcVtCvOveSnyxWcSboL9vsseF20sCNRZDZaMcMxrHoJyyjFWnXm61FCm3V2SSkerjcnrCxYXKKtteugXra/KrmK2tvPaWoC08RTJUKZcCEBZI5xpz80DthhXj9d6AXW7dNTF+yo+7CYv+f3yhhrGHda0RRGjpsdIVx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=N089QbcTXZLSySKMD/JkYfj6VKZ8ewL63TaD3mdagPKz0Bl6Mvcxx7zWzOCuCYm+dGhPJ6vDQJqYmRsDmQALO9/gCEWcBkQSIehwYx7n7792fM+aDkmlDonH24Y1myVyC8lEb6EGGf4tsIxdvQkKA+Fnlqto38shdvhI3YA/IcU=
Received: by 10.67.93.2 with SMTP id v2mr36495ugl.1179782076730;
        Mon, 21 May 2007 14:14:36 -0700 (PDT)
Received: by 10.67.64.16 with HTTP; Mon, 21 May 2007 14:14:36 -0700 (PDT)
Message-ID: <6e3ae6310705211414x2140cd5bq7e0a517fc42c6035@mail.gmail.com>
Date: Mon, 21 May 2007 14:14:36 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Implement a tokenizer
In-Reply-To: <10724827.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <10724827.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Actually before you jump in, be warned that the "+" plus sign is also
part of query parser.
You can not really/easily pass the query with the "+" sign through
query parser in order to get a match.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 5/21/07, bhecht <bhecht@ams-sys.com> wrote:
>
> Hi there,
>
> I was interested in changing the StandardTokenzier so it will not remove the
> "+" (plus) sign from my stream.
> Looking in the code and documentation, it reads:
>
> "If this tokenizer does not suit your application, please consider copying
> this source code
> directory to your project and maintaining your own grammar-based tokenizer."
>
> I can't understand from this code where I should jump in, and do my change.
> Can someone point me out to where I should look at in order perform my
> change?
>
> Thanks in advanced
> --
> View this message in context: http://www.nabble.com/Implement-a-tokenizer-tf3792172.html#a10724827
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:16:16 2007
Return-Path: <java-user-return-28192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99546 invoked from network); 21 May 2007 21:16:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:16:16 -0000
Received: (qmail 87676 invoked by uid 500); 21 May 2007 21:16:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87651 invoked by uid 500); 21 May 2007 21:16:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87640 invoked by uid 99); 21 May 2007 21:16:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:16:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:16:06 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqFEH-0004pK-Re
	for java-user@lucene.apache.org; Mon, 21 May 2007 14:15:45 -0700
Message-ID: <10727213.post@talk.nabble.com>
Date: Mon, 21 May 2007 14:15:45 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
In-Reply-To: <200705212304.16800@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: bhecht@ams-sys.com
References: <10725950.post@talk.nabble.com> <200705212241.03686@danielnaber.de> <10726812.post@talk.nabble.com> <200705212304.16800@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


I will never have "mainstrasse" in my lucene index, since strasse is always
replaced with " strasse" causing "mainstrasse" to be split to "main
strasse".
So the example you gave:
"sch=C3=B6ne strasse" will match "sch=C3=B6ne mainstrasse", since in the lu=
cene index
I have "sch=C3=B6ne main strasse".


Daniel Naber-5 wrote:
>=20
> On Monday 21 May 2007 22:53, bhecht wrote:
>=20
>> If someone searches for mainstrasse, my tools will split it again to
>> main and strasse, and then lucene will be able to find it.
>=20
> "strasse" will match "mainstrasse" but the phrase query "sch=C3=B6ne stra=
sse"=20
> will not match "sch=C3=B6ne mainstrasse". However, this could be consider=
ed a=20
> feature. Aynway, it will be difficult to use features that rely on the=20
> term list, e.g. the spellchecker. It will not be able to suggest=20
> "mainstrasse", as that's not in the index.
>=20
> Regards
>  Daniel
>=20
> --=20
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/stop-words%2C-synonyms.=
..-what%27s-in-it-for-me--tf3792510.html#a10727213
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:25:26 2007
Return-Path: <java-user-return-28193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5249 invoked from network); 21 May 2007 21:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:25:25 -0000
Received: (qmail 16604 invoked by uid 500); 21 May 2007 21:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16572 invoked by uid 500); 21 May 2007 21:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16470 invoked by uid 99); 21 May 2007 21:25:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:25:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:25:04 -0700
Received: by ug-out-1314.google.com with SMTP id k40so54636ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 14:24:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EqZpGiIldYUWLXkc7pynmbnQOM4HObiQAtGT0nVb90fbm1b29IQHuCCUK6SrMrvWzOG18DG5i3CyRdJnQlm5Q4+kRR1zYPQExLlhWtn+PncBlkxN9SheBnyMxn1G9I3+9pqlKOP9pYoU6CXdxVcjuOXJIQCmvP1BaQemRmhNw4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i0suC0uJvV8Zj5U7qqZgRBhvd53k1LIb3uBTGsx8fZDjUgi/AkGjXdyHkLIO5NpRYzn7FRFYQoa389cr036Q4RU5gszmBBlML6pxT2BenagcrnebOEges3kzO93HRJGIM7vpMRIrewJdL3MF1/HBgWXVFGpfSjfUuJ2aGUCQAPs=
Received: by 10.82.147.6 with SMTP id u6mr9508529bud.1179782679009;
        Mon, 21 May 2007 14:24:39 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 21 May 2007 14:24:38 -0700 (PDT)
Message-ID: <359a92830705211424j248664b6nc20d82f54d4211b@mail.gmail.com>
Date: Mon, 21 May 2007 17:24:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
In-Reply-To: <10727213.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55105_3771836.1179782678956"
References: <10725950.post@talk.nabble.com> <200705212241.03686@danielnaber.de>
	 <10726812.post@talk.nabble.com> <200705212304.16800@danielnaber.de>
	 <10727213.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55105_3771836.1179782678956
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

No, a phrase search it will NOT match. Phrase semantics
requires that split tokens be adjacent (slop of 0). So, since
"mainstrasse" was split into two tokens at index time, the test for
"is sch=F6ne right next to strasse" will fail because of the intervening
(introduced) term "main". Whether this is desired behavior or not is
another question.

You're right that asking for a non-phrase search *will* work
though.

Best
Erick

On 5/21/07, bhecht <bhecht@ams-sys.com> wrote:
>
>
> I will never have "mainstrasse" in my lucene index, since strasse is
> always
> replaced with " strasse" causing "mainstrasse" to be split to "main
> strasse".
> So the example you gave:
> "sch=F6ne strasse" will match "sch=F6ne mainstrasse", since in the lucene
> index
> I have "sch=F6ne main strasse".
>
>
> Daniel Naber-5 wrote:
> >
> > On Monday 21 May 2007 22:53, bhecht wrote:
> >
> >> If someone searches for mainstrasse, my tools will split it again to
> >> main and strasse, and then lucene will be able to find it.
> >
> > "strasse" will match "mainstrasse" but the phrase query "sch=F6ne stras=
se"
> > will not match "sch=F6ne mainstrasse". However, this could be considere=
d a
> > feature. Aynway, it will be difficult to use features that rely on the
> > term list, e.g. the spellchecker. It will not be able to suggest
> > "mainstrasse", as that's not in the index.
> >
> > Regards
> >  Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/stop-words%2C-synonyms...-what%27s-in-it-for-me--tf=
3792510.html#a10727213
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55105_3771836.1179782678956--

From java-user-return-28194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:25:34 2007
Return-Path: <java-user-return-28194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5396 invoked from network); 21 May 2007 21:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:25:33 -0000
Received: (qmail 18809 invoked by uid 500); 21 May 2007 21:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18780 invoked by uid 500); 21 May 2007 21:25:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18765 invoked by uid 99); 21 May 2007 21:25:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:25:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:25:14 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4LLOrOi249000
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 21:24:53 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4LLOqdl4067404
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 23:24:52 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4LLOq9r011407
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 23:24:52 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4LLOqou011402
	for <java-user@lucene.apache.org>; Mon, 21 May 2007 23:24:52 +0200
In-Reply-To: <46516573.3090209@saint-paul.lu>
Subject: Re: search result problem
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFCE5FB18F.460E4A93-ON882572E2.0075318E-882572E2.0075839C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 21 May 2007 14:23:34 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 22/05/2007 00:24:52
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Stefan Colella wrote:

> I tried to only add the content of the page where that expression can be
> found (instead of the whole document) and then  the search works.
>
> Do i have to split my pdf text into more field? Or what could be the
> problem?

Perhaps indexWriter's setMaxFieldLength() is relevant here.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:30:15 2007
Return-Path: <java-user-return-28195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7730 invoked from network); 21 May 2007 21:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:30:13 -0000
Received: (qmail 29071 invoked by uid 500); 21 May 2007 21:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29027 invoked by uid 500); 21 May 2007 21:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29016 invoked by uid 99); 21 May 2007 21:30:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:30:12 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.73.236.60] (HELO mail.plesk-win6.test-area.it) (217.73.236.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:30:03 -0700
Received: from [1.120.142.139] ([81.208.36.90]) by plesk-win6.tol.it with MailEnable ESMTP; Mon, 21 May 2007 23:29:37 +0200
Message-ID: <46520FA0.2030201@ecomware.it>
Date: Mon, 21 May 2007 23:31:12 +0200
From: Walter Ferrara <walter.ferrara@ecomware.it>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: getTermFreqVector atomicity
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm interested in getting the term vector of a lucene doc. The point is,
it seems I have to give to the IndexReader.getTermFreqVector a doc ID,
while I would know if there is a way to get the termvector by a doc
identifier (not lucene doc id, but a my own field). I know how to get
the lucene docid for the doc I'm interested, but my concern is about the
non-atomicity of getting a id and pass it to another function.
This because I reload index time by time, and I'm worried about a loss
of consistency if the new indexreader remap docids (after deletion for
example), and I end up accessing a different doc, just because between
"get the id" and "get the termvector for that id", the reader could have
been reloaded (and doc-ids changed).

Best,
Walter



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:39:43 2007
Return-Path: <java-user-return-28196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13560 invoked from network); 21 May 2007 21:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:39:42 -0000
Received: (qmail 53388 invoked by uid 500); 21 May 2007 21:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53356 invoked by uid 500); 21 May 2007 21:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53345 invoked by uid 99); 21 May 2007 21:39:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:39:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 May 2007 14:39:31 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 31
          for <java-user@lucene.apache.org>;
          Mon, 21 May 2007 14:38:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: "Peter W." <peter@marketingbrokers.com>
Subject: In memory MultiSearcher
Date: Mon, 21 May 2007 14:38:48 -0700
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have been using a large, in memory MultiSearcher that
is reaching the limits of my hardware RAM with this code:

       try
          {
          IndexSearcher[] searcher_a=
             {
             new IndexSearcher(new RAMDirectory(index_one_path)),
             new IndexSearcher(new RAMDirectory(index_two_path)),
             new IndexSearcher(new RAMDirectory(index_thee_path)),
             new IndexSearcher(new RAMDirectory(index_four_path)),
             new IndexSearcher(new RAMDirectory(index_n_path))
             };

	 MultiSearcher searcher_ms=new MultiSearcher(searcher_a);
	...
          }
       catch(Exception e)
          {
          System.out.println(e);
          }

For example, one of several indexes is 768MB. Is there possibly a  
better way to do this?

Regards,

Peter W.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:42:07 2007
Return-Path: <java-user-return-28197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14387 invoked from network); 21 May 2007 21:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:42:05 -0000
Received: (qmail 60803 invoked by uid 500); 21 May 2007 21:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60772 invoked by uid 500); 21 May 2007 21:42:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60761 invoked by uid 99); 21 May 2007 21:42:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:42:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:41:55 -0700
Received: by ug-out-1314.google.com with SMTP id k40so58353ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 14:41:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dqVczpa14ECSUiB47WuTAJlj1VWtF/CYvgeMrgYk10ZaUqc8vveto9VHtKi37OnuUfIyqJqvMarjq7VYKtCTUIwFej7ZqsLR3ih23QW8f8JyFQWbwMbPpMpf5U+LoyBg8OZiiweCtuy+NjytHvCaxPNE8yJsqFFeneWg+YWItt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DeYcDhWlHCdtQDrxK7HVrw3TqGKg4fkGgrtjjjvDbGggIP2hvQfghjOkAOvKzyV47zVdi5JyrHCWFqwpLugtXHz5yiWp0fQDmabZlRi+554MJyiO+8CHPcJTb5uSF1QgQOkYRykoLQ9rJPXYUcQtbF9AEqNdT54SxNDVQBJWfBk=
Received: by 10.82.156.12 with SMTP id d12mr9546655bue.1179783690370;
        Mon, 21 May 2007 14:41:30 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 21 May 2007 14:41:30 -0700 (PDT)
Message-ID: <359a92830705211441n285e319ehb87c60fe5d8ea516@mail.gmail.com>
Date: Mon, 21 May 2007 17:41:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getTermFreqVector atomicity
In-Reply-To: <46520FA0.2030201@ecomware.it>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55297_620067.1179783690047"
References: <46520FA0.2030201@ecomware.it>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55297_620067.1179783690047
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

An IndexReader doesn't see changes in the index unless you close
and reopen it, but if there is significant time between the time you
fetch your docid and read it's vector, that could be a problem.

You can always use TermEnum/TermDocs to find the doc ID
associated with a particular field you have, but I suspect that
suffers from the same problem. In fact, *anything* you do
between fetching the doc ID and getting its termvector
has this problem, and there's no way I know of to get
termvectors by your own ID.

What might work is a "sanity check" sort of algorithm. That is,
fetch the doc ID, then fetch it's term vector, then look at your
custom field for that doc ID and see if it matches the
original. If not, do it all over again.

But that all seems too complicated to me. Why not just insure
that you use the *same* IndexReader both when you get the
original doc ID and when you get its termverctor? Even a temporary
reference should hold things open long enough to insure that
atomicity.

Best
Erick

On 5/21/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>
> I'm interested in getting the term vector of a lucene doc. The point is,
> it seems I have to give to the IndexReader.getTermFreqVector a doc ID,
> while I would know if there is a way to get the termvector by a doc
> identifier (not lucene doc id, but a my own field). I know how to get
> the lucene docid for the doc I'm interested, but my concern is about the
> non-atomicity of getting a id and pass it to another function.
> This because I reload index time by time, and I'm worried about a loss
> of consistency if the new indexreader remap docids (after deletion for
> example), and I end up accessing a different doc, just because between
> "get the id" and "get the termvector for that id", the reader could have
> been reloaded (and doc-ids changed).
>
> Best,
> Walter
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55297_620067.1179783690047--

From java-user-return-28198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 21 21:47:20 2007
Return-Path: <java-user-return-28198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15659 invoked from network); 21 May 2007 21:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 May 2007 21:47:20 -0000
Received: (qmail 66196 invoked by uid 500); 21 May 2007 21:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66169 invoked by uid 500); 21 May 2007 21:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66158 invoked by uid 99); 21 May 2007 21:47:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:47:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 14:47:10 -0700
Received: by ug-out-1314.google.com with SMTP id k40so59501ugc
        for <java-user@lucene.apache.org>; Mon, 21 May 2007 14:46:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W0V48IIrsyb1rVgeOPf97kAS3o/tTYh5iNg4kLUu80EDGYGUivebhxIdH/f1hgr/63gXtBt7EKeBgD70EHIDcPhHVznlEzHiauI8cXqceFyM8ouynsZUgoABBkYiRc/23J46jzWWFEvlXB+Ewj3yQknqCY2ZAyBweL24i7aOJIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LXO2Hv56mxKrWrRdiKhCgfuq1N7Gpyl11YdtxSRpCIKhmNdQRQRPYnno5VKhw5kUy1CsdAaOERkoL8QLsavZ6WTO2sAZGqjFHg7UIWv/7BqkpQQE0NIOXtlQ5XcTz8ueVVnrN8w0bEe7XW2ui+JdruUv+ELv4ymM93HBPOGsZyM=
Received: by 10.82.138.6 with SMTP id l6mr9552580bud.1179784004312;
        Mon, 21 May 2007 14:46:44 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Mon, 21 May 2007 14:46:44 -0700 (PDT)
Message-ID: <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
Date: Mon, 21 May 2007 17:46:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: In memory MultiSearcher
In-Reply-To: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55341_22761120.1179784004243"
References: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55341_22761120.1179784004243
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why are you doing this in the first place? Do you actually have
evidence that the default Lucene behavior (caching, etc) is inadequate
for your needs?

I'd *strongly* recommend, if you haven't, just using the regular
FSDirectories rather than RAMDirectories and only getting
complex if that's too slow...

I ask because I am searching FS-based indexes that are 4G with
no problem. The index *was* 8G and had only a 10% performance hit.

Best
Erick

On 5/21/07, Peter W. <peter@marketingbrokers.com> wrote:
>
> Hello,
>
> I have been using a large, in memory MultiSearcher that
> is reaching the limits of my hardware RAM with this code:
>
>        try
>           {
>           IndexSearcher[] searcher_a=
>              {
>              new IndexSearcher(new RAMDirectory(index_one_path)),
>              new IndexSearcher(new RAMDirectory(index_two_path)),
>              new IndexSearcher(new RAMDirectory(index_thee_path)),
>              new IndexSearcher(new RAMDirectory(index_four_path)),
>              new IndexSearcher(new RAMDirectory(index_n_path))
>              };
>
>          MultiSearcher searcher_ms=new MultiSearcher(searcher_a);
>         ...
>           }
>        catch(Exception e)
>           {
>           System.out.println(e);
>           }
>
> For example, one of several indexes is 768MB. Is there possibly a
> better way to do this?
>
> Regards,
>
> Peter W.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55341_22761120.1179784004243--

From java-user-return-28199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 05:41:42 2007
Return-Path: <java-user-return-28199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96183 invoked from network); 22 May 2007 05:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 05:41:40 -0000
Received: (qmail 16069 invoked by uid 500); 22 May 2007 05:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15834 invoked by uid 500); 22 May 2007 05:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15822 invoked by uid 99); 22 May 2007 05:41:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 22:41:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 May 2007 22:41:31 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HqN7P-0006BK-0g
	for java-user@lucene.apache.org; Mon, 21 May 2007 22:41:11 -0700
Message-ID: <10731811.post@talk.nabble.com>
Date: Mon, 21 May 2007 22:41:10 -0700 (PDT)
From: bhecht <bhecht@ams-sys.com>
To: java-user@lucene.apache.org
Subject: Re: stop words, synonyms... what's in it for me?
In-Reply-To: <359a92830705211424j248664b6nc20d82f54d4211b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: bhecht@ams-sys.com
References: <10725950.post@talk.nabble.com> <200705212241.03686@danielnaber.de> <10726812.post@talk.nabble.com> <200705212304.16800@danielnaber.de> <10727213.post@talk.nabble.com> <359a92830705211424j248664b6nc20d82f54d4211b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erik, thats what I thought.
In my case no phrase queries are done, so it seems I am good to go.
Any additional thoughts on the issue are welcomed.
Thanks



Erick Erickson wrote:
>=20
> No, a phrase search it will NOT match. Phrase semantics
> requires that split tokens be adjacent (slop of 0). So, since
> "mainstrasse" was split into two tokens at index time, the test for
> "is sch=C3=B6ne right next to strasse" will fail because of the interveni=
ng
> (introduced) term "main". Whether this is desired behavior or not is
> another question.
>=20
> You're right that asking for a non-phrase search *will* work
> though.
>=20
> Best
> Erick
>=20
> On 5/21/07, bhecht <bhecht@ams-sys.com> wrote:
>>
>>
>> I will never have "mainstrasse" in my lucene index, since strasse is
>> always
>> replaced with " strasse" causing "mainstrasse" to be split to "main
>> strasse".
>> So the example you gave:
>> "sch=C3=B6ne strasse" will match "sch=C3=B6ne mainstrasse", since in the=
 lucene
>> index
>> I have "sch=C3=B6ne main strasse".
>>
>>
>> Daniel Naber-5 wrote:
>> >
>> > On Monday 21 May 2007 22:53, bhecht wrote:
>> >
>> >> If someone searches for mainstrasse, my tools will split it again to
>> >> main and strasse, and then lucene will be able to find it.
>> >
>> > "strasse" will match "mainstrasse" but the phrase query "sch=C3=B6ne
>> strasse"
>> > will not match "sch=C3=B6ne mainstrasse". However, this could be consi=
dered
>> a
>> > feature. Aynway, it will be difficult to use features that rely on the
>> > term list, e.g. the spellchecker. It will not be able to suggest
>> > "mainstrasse", as that's not in the index.
>> >
>> > Regards
>> >  Daniel
>> >
>> > --
>> > http://www.danielnaber.de
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/stop-words%2C-synonyms...-what%27s-in-it-for-me--t=
f3792510.html#a10727213
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://www.nabble.com/stop-words%2C-synonyms.=
..-what%27s-in-it-for-me--tf3792510.html#a10731811
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 07:40:53 2007
Return-Path: <java-user-return-28200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35615 invoked from network); 22 May 2007 07:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 07:40:52 -0000
Received: (qmail 83717 invoked by uid 500); 22 May 2007 07:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83658 invoked by uid 500); 22 May 2007 07:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83646 invoked by uid 99); 22 May 2007 07:40:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 00:40:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 00:40:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 735815B772; Tue, 22 May 2007 00:40:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 34C7A7F403
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 00:40:18 -0700 (PDT)
Date: Tue, 22 May 2007 00:40:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
In-Reply-To: <4650EC77.5050206@gmail.com>
Message-ID: <Pine.LNX.4.58.0705220035260.6539@hal.rescomp.berkeley.edu>
References: <4650E9DF.4080906@peterbloem.nl> <4650EC77.5050206@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Each doc is going to get a score -- if the score is positive the doc
: will be a hit, if the score is 0 the doc will not be a hit.

that's actually a fairly missleading statement ... the guts of Lucene
doesn't prevent documents from "matching" with a negative score
(specificly: a HitCollector can be asked to collect a match with a
negative score)

(dropping matches with negative scores only happens in the Hits
class/collector as i recall)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 07:52:14 2007
Return-Path: <java-user-return-28201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38350 invoked from network); 22 May 2007 07:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 07:52:13 -0000
Received: (qmail 95891 invoked by uid 500); 22 May 2007 07:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95858 invoked by uid 500); 22 May 2007 07:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95847 invoked by uid 99); 22 May 2007 07:52:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 00:52:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 00:52:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8F9C75B766; Tue, 22 May 2007 00:51:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 832DC7F403
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 00:51:43 -0700 (PDT)
Date: Tue, 22 May 2007 00:51:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
In-Reply-To: <4650E9DF.4080906@peterbloem.nl>
Message-ID: <Pine.LNX.4.58.0705220040220.6539@hal.rescomp.berkeley.edu>
References: <4650E9DF.4080906@peterbloem.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: BooleanQuery.Occur.SHOULD for C, D and E. However the javadocs for
: BooleanClause.Occur.SHOULD states:
:
: "Use this operator for clauses that /should/ appear in the matching
: documents. For a BooleanQuery with two |SHOULD| subqueries, at least one
: of the clauses must appear in the matching documents."

Yeah, that's missleading... i've commited an updte that reads...

    /** Use this operator for clauses that <i>should</i> appear in the
     * matching documents. For a BooleanQuery with no <code>MUST</code>
     * clauses one or more <code>SHOULD</code> clauses must match a document
     * for the BooleanQuery to match.
     * @see BooleanQuery#setMinimumNumberShouldMatch
     */
    public static final Occur SHOULD = new Occur("SHOULD");

...does that make more sense?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 08:11:29 2007
Return-Path: <java-user-return-28202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42128 invoked from network); 22 May 2007 08:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 08:11:28 -0000
Received: (qmail 24714 invoked by uid 500); 22 May 2007 08:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24682 invoked by uid 500); 22 May 2007 08:11:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24671 invoked by uid 99); 22 May 2007 08:11:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 01:11:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 01:11:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 00F0F5B766; Tue, 22 May 2007 01:10:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EAE9C7F403
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 01:10:57 -0700 (PDT)
Date: Tue, 22 May 2007 01:10:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: In memory MultiSearcher
In-Reply-To: <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705220109320.6539@hal.rescomp.berkeley.edu>
References: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com>
 <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'd *strongly* recommend, if you haven't, just using the regular
: FSDirectories rather than RAMDirectories and only getting
: complex if that's too slow...

...and if you are "Multi Searching" over a bunch of local directories
anyway, then use a single INdexSearcher on a MultiReader instead ...
that should be much faster then youre MultiSearcher.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 09:05:29 2007
Return-Path: <java-user-return-28203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91972 invoked from network); 22 May 2007 09:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 09:05:29 -0000
Received: (qmail 13391 invoked by uid 500); 22 May 2007 09:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13358 invoked by uid 500); 22 May 2007 09:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13347 invoked by uid 99); 22 May 2007 09:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 02:05:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 02:05:17 -0700
Received: by an-out-0708.google.com with SMTP id b8so458528ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 02:04:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QAC3KludJpyHz0KO9g0MAhqe1djf8TfYGoSyqT53mM0G+uV9AEH/twX7Yx1pikKPsqXNqhVZPdvgXa2tHLzQVrSjfdvax9WnCQcgTNIFql6oscF/HaobkU81uGxY6Lwlyfr7zeLZqaT91LARQnEMcO++0E+bTYnGzBOag+vYxpk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=f6hqiSX5Ou9hgkstYh4afyam3YPyvFc0TU98ykM30MwEGteQ5ohjsR4pZ8SZloH9xTLfqF8HaX48w8cGasYitV7+3aFxPMy/PMmwpSeP543EX5yci2lSG8CUQCMedLveF9/czg6G9fKIU+NH84sXhyHuXxfRIZXADn9u5ceGdzI=
Received: by 10.100.124.5 with SMTP id w5mr3665546anc.1179824696043;
        Tue, 22 May 2007 02:04:56 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.42])
        by mx.google.com with ESMTP id c20sm15424900ana.2007.05.22.02.04.54;
        Tue, 22 May 2007 02:04:55 -0700 (PDT)
Message-ID: <4652B222.6010107@gmail.com>
Date: Tue, 22 May 2007 05:04:34 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
References: <4650E9DF.4080906@peterbloem.nl> <4650EC77.5050206@gmail.com> <Pine.LNX.4.58.0705220035260.6539@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0705220035260.6539@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, didn't mean to imply that that whole spiel was a technical 
explanation...just a "how I like to think of it" to get my head around 
the BooleanQuery system. If your reading that, think high level overview 
more than technically accurate. I'll be more specific in the future -- 
as always, the javadocs are the best place to get down to the nitty gritty.

HitCollector:
  /** Called once for every non-zero scoring document, with the document 
number
   * and its score.

TopDocCollector (used by Hits and returned by a Searcher) does ensure 
scores are greater than 0. If you roll your own HitCollector, you 
shouldn't need my thoughts on how I think of BooleanQuery's.

- Mark

Chris Hostetter wrote:
> : Each doc is going to get a score -- if the score is positive the doc
> : will be a hit, if the score is 0 the doc will not be a hit.
>
> that's actually a fairly missleading statement ... the guts of Lucene
> doesn't prevent documents from "matching" with a negative score
> (specificly: a HitCollector can be asked to collect a match with a
> negative score)
>
> (dropping matches with negative scores only happens in the Hits
> class/collector as i recall)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 09:29:53 2007
Return-Path: <java-user-return-28204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 294 invoked from network); 22 May 2007 09:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 09:29:53 -0000
Received: (qmail 60520 invoked by uid 500); 22 May 2007 09:29:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60494 invoked by uid 500); 22 May 2007 09:29:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60471 invoked by uid 99); 22 May 2007 09:29:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 02:29:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 02:29:38 -0700
Received: by an-out-0708.google.com with SMTP id b8so459749ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 02:29:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=PUW7dA/jVL13KX5lEwn6LhX923PccLIhVldiheImjl3K6zBq+7nMWJ79JBUz0ADsqB9KWWhO/rQtFI81bChVxYoNhIoGF+elAyygC0W+cnm+F+0ZOw/KbeOnERUIvEnYpab5TAMOaylmFLt32/NLVc3BK4mkLNP2GRnUyG8NNB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=sG+4X3iCB4XjUvon1sxegAbVaMNlxuLdMf5sxYr079hN4tZ+lRR/+b693/aO2lqqm1Fw0pc9ObI3uQZmAFSPoWvzLiQAQqYDrcfIeL9e2DPyofxSpBE9HY4zHeJQQ3oz967Dq5W/cjzNj8gjIYDgZE0OhysipaN+cfFWAsTrtu4=
Received: by 10.100.95.19 with SMTP id s19mr3625865anb.1179826157091;
        Tue, 22 May 2007 02:29:17 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Tue, 22 May 2007 02:29:17 -0700 (PDT)
Message-ID: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
Date: Tue, 22 May 2007 12:59:17 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: regaridng Reader.terms()
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101102_26144863.1179826157011"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101102_26144863.1179826157011
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all

consider following index

field1           field2                              field3
text1           text1 text2                      text3 text4
text4           text2                              text2 text3 text5

I want to get all terms in filed3
if I use Reader.terms() it will returns: (however i have to put an if
statement to filter result of the field3 only)
text3
text4
text2
text5

but I need following result:
"text3 text4"
"text2 text3 text5"


is this possible? if yes, how? and if no, is there any tricky way to get
this result?

thank you so much.

-- 
Regards,
Mohammad Norouzi
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_101102_26144863.1179826157011--

From java-user-return-28205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 10:07:08 2007
Return-Path: <java-user-return-28205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15526 invoked from network); 22 May 2007 10:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 10:07:08 -0000
Received: (qmail 27350 invoked by uid 500); 22 May 2007 10:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27286 invoked by uid 500); 22 May 2007 10:07:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27275 invoked by uid 99); 22 May 2007 10:07:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:07:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.73.236.60] (HELO mail.plesk-win6.test-area.it) (217.73.236.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:06:51 -0700
Received: from [131.175.141.59] ([131.175.141.59]) by plesk-win6.tol.it with MailEnable ESMTP; Tue, 22 May 2007 12:06:24 +0200
Message-ID: <4652C100.6090906@ecomware.it>
Date: Tue, 22 May 2007 12:08:00 +0200
From: Walter Ferrara <walter.ferrara@ecomware.it>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Queries on small subset in a very large index 
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I need to execute a query on a subset of documents (I know their ids)
and it has to be very fast. I've made a Filter that set the bitset only
for needed docids. The point is, the subset is very small versus a index
which is very big (subset size is always below the 0.05% of the total
numbers of ids). Which is the faster way to do this? A booleanquery with
many should clause (one per item in subset, the index has a field that
allow me to do this) plus the query itself, or a filter (like
TermsFilter, or the one I've made)?

There are any other approach?

Best,
Walter




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 10:11:52 2007
Return-Path: <java-user-return-28206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17136 invoked from network); 22 May 2007 10:11:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 10:11:51 -0000
Received: (qmail 36940 invoked by uid 500); 22 May 2007 10:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36881 invoked by uid 500); 22 May 2007 10:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36856 invoked by uid 99); 22 May 2007 10:11:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:11:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.73.236.60] (HELO mail.plesk-win6.test-area.it) (217.73.236.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:11:38 -0700
Received: from [131.175.141.59] ([131.175.141.59]) by plesk-win6.tol.it with MailEnable ESMTP; Tue, 22 May 2007 12:11:13 +0200
Message-ID: <4652C220.7090505@ecomware.it>
Date: Tue, 22 May 2007 12:12:48 +0200
From: Walter Ferrara <walter.ferrara@ecomware.it>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
In-Reply-To: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If Reader.terms() gives you:
text3
text4
while you expect
text3 text4

you should change, I presume, the Analyzer, maybe writing your own one.

Mohammad Norouzi wrote:
> Hi all
>
> consider following index
>
> field1           field2                              field3
> text1           text1 text2                      text3 text4
> text4           text2                              text2 text3 text5
>
> I want to get all terms in filed3
> if I use Reader.terms() it will returns: (however i have to put an if
> statement to filter result of the field3 only)
> text3
> text4
> text2
> text5
>
> but I need following result:
> "text3 text4"
> "text2 text3 text5"
>
>
> is this possible? if yes, how? and if no, is there any tricky way to get
> this result?
>
> thank you so much.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 10:18:39 2007
Return-Path: <java-user-return-28207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21944 invoked from network); 22 May 2007 10:18:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 10:18:38 -0000
Received: (qmail 51547 invoked by uid 500); 22 May 2007 10:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51514 invoked by uid 500); 22 May 2007 10:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51494 invoked by uid 99); 22 May 2007 10:18:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:18:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:18:27 -0700
Received: by an-out-0708.google.com with SMTP id b8so462077ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 03:18:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PL5RTJLOVN+7o+RDY0rrw9tOW4Ep2F8faR2AygFYQJ6eVBubyd+d+XRH79+4YtrXA86ORiL6Ie9A8NakbbwuAJNAvgUpa27A77CtN/3R7gxD0F7jQy1Teb2Fbh5wtc8vjrEsxxsiVEtpIyM4TchqdQUyJ47wqnU8l1RAR/SrDX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LuQa1k9mpN0dpayj2cVrj4cRljyhiHqDiG4+ihVAFtwACeOePKlBA29kHpP18+EoIciUhfZf6w7JKBuvNu50d5TMCj/wIOvSydH4NFXpiUZPe7eDEoHR3vEMBQbvTqhSIrDURERzd6obnVo1IfZqIoWQ/TuKp3hY8utz+4Y6gs0=
Received: by 10.100.191.5 with SMTP id o5mr3689139anf.1179829085964;
        Tue, 22 May 2007 03:18:05 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Tue, 22 May 2007 03:18:05 -0700 (PDT)
Message-ID: <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
Date: Tue, 22 May 2007 13:48:05 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <4652C220.7090505@ecomware.it>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101626_9712225.1179829085815"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101626_9712225.1179829085815
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Walter,
Yes I am using a customized WhiteSpaceAnalyzer while indexing.
I said customized because I realized that standard WhiteSpaceAnalyzer dont
accept unicode terms in my language so I make some change to support that.

but for reading no Analyzer is used

if I want to get that result, which analyzer should I use?

in my case, I dont need any boost factor or any other feature of lucene, I
need just searching through the index.


On 5/22/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>
> If Reader.terms() gives you:
> text3
> text4
> while you expect
> text3 text4
>
> you should change, I presume, the Analyzer, maybe writing your own one.
>
> Mohammad Norouzi wrote:
> > Hi all
> >
> > consider following index
> >
> > field1           field2                              field3
> > text1           text1 text2                      text3 text4
> > text4           text2                              text2 text3 text5
> >
> > I want to get all terms in filed3
> > if I use Reader.terms() it will returns: (however i have to put an if
> > statement to filter result of the field3 only)
> > text3
> > text4
> > text2
> > text5
> >
> > but I need following result:
> > "text3 text4"
> > "text2 text3 text5"
> >
> >
> > is this possible? if yes, how? and if no, is there any tricky way to get
> > this result?
> >
> > thank you so much.
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_101626_9712225.1179829085815--

From java-user-return-28208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 10:50:46 2007
Return-Path: <java-user-return-28208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34380 invoked from network); 22 May 2007 10:50:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 10:50:45 -0000
Received: (qmail 12633 invoked by uid 500); 22 May 2007 10:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12599 invoked by uid 500); 22 May 2007 10:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12588 invoked by uid 99); 22 May 2007 10:50:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:50:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.73.236.60] (HELO mail.plesk-win6.test-area.it) (217.73.236.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 03:50:33 -0700
Received: from [131.175.141.59] ([131.175.141.59]) by plesk-win6.tol.it with MailEnable ESMTP; Tue, 22 May 2007 12:50:07 +0200
Message-ID: <4652CB3E.2050304@ecomware.it>
Date: Tue, 22 May 2007 12:51:42 +0200
From: Walter Ferrara <walter.ferrara@ecomware.it>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>	 <4652C220.7090505@ecomware.it> <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
In-Reply-To: <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Let's suppose you modify your WhitespaceAnalyzer not to use a
WhitespaceTokenizer, but a modified version of the Tokenizer which
token-ize not by space but by something else, like '/'. (this is just an
example of course).
So suppose your real txt document contain :
/text2 text3/text4 text5/text6
When you add this document to the index using the tokenizer I explained,
terms returned by indexreader.terms should be:
text2 text3
text4 text5
text6


Mohammad Norouzi wrote:
> Walter,
> Yes I am using a customized WhiteSpaceAnalyzer while indexing.
> I said customized because I realized that standard WhiteSpaceAnalyzer
> dont
> accept unicode terms in my language so I make some change to support
> that.
>
> but for reading no Analyzer is used
>
> if I want to get that result, which analyzer should I use?
>
> in my case, I dont need any boost factor or any other feature of
> lucene, I
> need just searching through the index.
>
>
> On 5/22/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>>
>> If Reader.terms() gives you:
>> text3
>> text4
>> while you expect
>> text3 text4
>>
>> you should change, I presume, the Analyzer, maybe writing your own one=
=2E
>>
>> Mohammad Norouzi wrote:
>> > Hi all
>> >
>> > consider following index
>> >
>> > field1           field2                              field3
>> > text1           text1 text2                      text3 text4
>> > text4           text2                              text2 text3 text5=

>> >
>> > I want to get all terms in filed3
>> > if I use Reader.terms() it will returns: (however i have to put an i=
f
>> > statement to filter result of the field3 only)
>> > text3
>> > text4
>> > text2
>> > text5
>> >
>> > but I need following result:
>> > "text3 text4"
>> > "text2 text3 text5"
>> >
>> >
>> > is this possible? if yes, how? and if no, is there any tricky way
>> to get
>> > this result?
>> >
>> > thank you so much.
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 11:06:34 2007
Return-Path: <java-user-return-28209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43351 invoked from network); 22 May 2007 11:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 11:06:33 -0000
Received: (qmail 34807 invoked by uid 500); 22 May 2007 11:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34766 invoked by uid 500); 22 May 2007 11:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34754 invoked by uid 99); 22 May 2007 11:06:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 04:06:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 04:06:21 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id D9CF85B52F
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 04:05:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: regaridng Reader.terms()
Date: Tue, 22 May 2007 07:05:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I would use a term vector to get this.  See  
IndexReader.getTermFreqVector.  You can get the term vector for just  
field 3.

-Grant

On May 22, 2007, at 5:29 AM, Mohammad Norouzi wrote:

> Hi all
>
> consider following index
>
> field1           field2                              field3
> text1           text1 text2                      text3 text4
> text4           text2                              text2 text3 text5
>
> I want to get all terms in filed3
> if I use Reader.terms() it will returns: (however i have to put an if
> statement to filter result of the field3 only)
> text3
> text4
> text2
> text5
>
> but I need following result:
> "text3 text4"
> "text2 text3 text5"
>
>
> is this possible? if yes, how? and if no, is there any tricky way  
> to get
> this result?
>
> thank you so much.
>
> -- 
> Regards,
> Mohammad Norouzi
> --------------------------
> see my blog: http://brainable.blogspot.com/

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 12:09:38 2007
Return-Path: <java-user-return-28210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64207 invoked from network); 22 May 2007 12:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 12:09:37 -0000
Received: (qmail 53711 invoked by uid 500); 22 May 2007 12:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53235 invoked by uid 500); 22 May 2007 12:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53224 invoked by uid 99); 22 May 2007 12:09:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 05:09:35 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 05:09:27 -0700
Received: by an-out-0708.google.com with SMTP id b8so468349ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 05:09:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mTGWtnKo4lXlA+ZNyqZ0NXYZ1ZpPj5/Dov2Qfmx1546rlGV92WAycgl7mVtV4gVIDFzUI51C0lA8m0lnWleXFVcWVNTbHIP9kVUwRcWa2nvrS0IdlN5U39ygZJYOqUcTeUyX8/ptDQ4vdrJYFh3ttHGFHUWxwzfBkybGb4E4l5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=re4M12FWSoCwjc6XLcWU9wqUg/0vKk2wwflHX/SWkqgLKDZn1nXdM1FwkkM4BwEgqLPnrelqjifl2WwE3jwaObyRN4w8CErTOd7hmA1vjtZAnhJXd3r8OV/8i4bazwHH5vzUUaABEHpVtq1O5Rls/3QQDU9WPivb9KhMuGzNBAA=
Received: by 10.100.126.2 with SMTP id y2mr3731303anc.1179835746285;
        Tue, 22 May 2007 05:09:06 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Tue, 22 May 2007 05:09:06 -0700 (PDT)
Message-ID: <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
Date: Tue, 22 May 2007 15:39:06 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102936_22688594.1179835746230"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102936_22688594.1179835746230
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>I would use a term vector to get this.  See
>IndexReader.getTermFreqVector.  You can get the term vector for just
>field 3.


Grant, thanks, in my case, getTermFreqVector returns null, I dont know why
it accepts a docnumber as parameter, what is it? is that the same doc id?
if yes it restrict the result for just one document, am I right?


>Let's suppose you modify your WhitespaceAnalyzer not to use a
>WhitespaceTokenizer, but a modified version of the Tokenizer which
>token-ize not by space but by something else, like '/'. (this is just an
>example of course).
>So suppose your real txt document contain :
>/text2 text3/text4 text5/text6
>When you add this document to the index using the tokenizer I explained,
>terms returned by indexreader.terms should be:
>text2 text3
>text4 text5
>text6

Walter, thank you so much, may I ask you a question:
if I am using an analyzer, say, XYAnalyzer while indexing, is it affect on
how to search?
another thing that buffled me is that by using IndexReader.terms() no
Analyzer specified so how it possible to do that?

thank you again



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_102936_22688594.1179835746230--

From java-user-return-28211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 13:25:54 2007
Return-Path: <java-user-return-28211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16537 invoked from network); 22 May 2007 13:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 13:25:52 -0000
Received: (qmail 56242 invoked by uid 500); 22 May 2007 13:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56214 invoked by uid 500); 22 May 2007 13:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56203 invoked by uid 99); 22 May 2007 13:25:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 06:25:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 06:25:40 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 7119B87B60
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 06:25:18 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com> <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org> <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FA9E1364-5458-4B59-97BA-F6205C9C8285@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: regaridng Reader.terms()
Date: Tue, 22 May 2007 09:25:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You have to turn on term vectors when indexing.  Take a look at the  
Field constructor that passes in TermVector.

-Grant

On May 22, 2007, at 8:09 AM, Mohammad Norouzi wrote:

>> I would use a term vector to get this.  See
>> IndexReader.getTermFreqVector.  You can get the term vector for just
>> field 3.
>
>
> Grant, thanks, in my case, getTermFreqVector returns null, I dont  
> know why
> it accepts a docnumber as parameter, what is it? is that the same  
> doc id?
> if yes it restrict the result for just one document, am I right?
>
>
>> Let's suppose you modify your WhitespaceAnalyzer not to use a
>> WhitespaceTokenizer, but a modified version of the Tokenizer which
>> token-ize not by space but by something else, like '/'. (this is  
>> just an
>> example of course).
>> So suppose your real txt document contain :
>> /text2 text3/text4 text5/text6
>> When you add this document to the index using the tokenizer I  
>> explained,
>> terms returned by indexreader.terms should be:
>> text2 text3
>> text4 text5
>> text6
>
> Walter, thank you so much, may I ask you a question:
> if I am using an analyzer, say, XYAnalyzer while indexing, is it  
> affect on
> how to search?
> another thing that buffled me is that by using IndexReader.terms() no
> Analyzer specified so how it possible to do that?
>
> thank you again
>
>
>
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 14:54:47 2007
Return-Path: <java-user-return-28212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59794 invoked from network); 22 May 2007 14:54:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 14:54:46 -0000
Received: (qmail 94803 invoked by uid 500); 22 May 2007 14:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94764 invoked by uid 500); 22 May 2007 14:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94753 invoked by uid 99); 22 May 2007 14:54:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 07:54:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 07:54:33 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163B5B5F@mailer.syr.edu>; Tue, 22 May 2007 10:54:12 -0400
Message-ID: <465303E2.6020802@syr.edu>
Date: Tue, 22 May 2007 10:53:22 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>	 <4652C220.7090505@ecomware.it> <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
In-Reply-To: <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mohammad,

May I ask what your language is?  And what kind of changes to
WhitespaceAnalyzer were required to make it work with your language?

If you have made modifications to WhitespaceAnalyzer that are generally
useful, please consider contributing your changes back to the Lucene
project.  There is some info here on how to get started:

   http://wiki.apache.org/jakarta-lucene/HowToContribute

Thanks,
Steve

Mohammad Norouzi wrote:
> Walter,
> Yes I am using a customized WhiteSpaceAnalyzer while indexing.
> I said customized because I realized that standard WhiteSpaceAnalyzer dont
> accept unicode terms in my language so I make some change to support that.
> 
> but for reading no Analyzer is used
> 
> if I want to get that result, which analyzer should I use?
> 
> in my case, I dont need any boost factor or any other feature of lucene, I
> need just searching through the index.
> 
> 
> On 5/22/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>>
>> If Reader.terms() gives you:
>> text3
>> text4
>> while you expect
>> text3 text4
>>
>> you should change, I presume, the Analyzer, maybe writing your own one.
>>
>> Mohammad Norouzi wrote:
>> > Hi all
>> >
>> > consider following index
>> >
>> > field1           field2                              field3
>> > text1           text1 text2                      text3 text4
>> > text4           text2                              text2 text3 text5
>> >
>> > I want to get all terms in filed3
>> > if I use Reader.terms() it will returns: (however i have to put an if
>> > statement to filter result of the field3 only)
>> > text3
>> > text4
>> > text2
>> > text5
>> >
>> > but I need following result:
>> > "text3 text4"
>> > "text2 text3 text5"
>> >
>> >
>> > is this possible? if yes, how? and if no, is there any tricky way to
>> get
>> > this result?
>> >
>> > thank you so much.
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 16:00:16 2007
Return-Path: <java-user-return-28213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97809 invoked from network); 22 May 2007 16:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 16:00:15 -0000
Received: (qmail 70637 invoked by uid 500); 22 May 2007 16:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70605 invoked by uid 500); 22 May 2007 16:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70594 invoked by uid 99); 22 May 2007 16:00:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 09:00:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 09:00:03 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id l4MFxfId045531
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 17:59:42 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Optional terms in BooleanQuery
Date: Tue, 22 May 2007 17:59:41 +0200
User-Agent: KMail/1.8.2
References: <4650E9DF.4080906@peterbloem.nl> <Pine.LNX.4.58.0705220035260.6539@hal.rescomp.berkeley.edu> <4652B222.6010107@gmail.com>
In-Reply-To: <4652B222.6010107@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705221759.41283.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

This is actually more for java-dev, but anyway.

On Tuesday 22 May 2007 11:04, Mark Miller wrote:
> Sorry, didn't mean to imply that that whole spiel was a technical 
> explanation...just a "how I like to think of it" to get my head around 
> the BooleanQuery system. If your reading that, think high level overview 
> more than technically accurate. I'll be more specific in the future -- 
> as always, the javadocs are the best place to get down to the nitty gritty.
> 
> HitCollector:
>   /** Called once for every non-zero scoring document, with the document 
> number
>    * and its score.
> 
> TopDocCollector (used by Hits and returned by a Searcher) does ensure 
> scores are greater than 0. If you roll your own HitCollector, you 
> shouldn't need my thoughts on how I think of BooleanQuery's.

Among others, this javadoc is corrected by the patch here:
http://issues.apache.org/jira/browse/LUCENE-584
It introduces Matcher as a superclass of Scorer.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 18:10:30 2007
Return-Path: <java-user-return-28214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57992 invoked from network); 22 May 2007 18:10:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 18:10:28 -0000
Received: (qmail 49855 invoked by uid 500); 22 May 2007 18:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49831 invoked by uid 500); 22 May 2007 18:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49820 invoked by uid 99); 22 May 2007 18:10:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 11:10:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 11:10:15 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l4MI9shW012809
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 14:09:54 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4MI9so2525524
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 14:09:54 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4MI9saE005375
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 14:09:54 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4MI9svY005371
	for <java-user@lucene.apache.org>; Tue, 22 May 2007 14:09:54 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: MoreLikeThis?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF145BE7D4.3EAD7B1F-ON852572E3.00636C4E-852572E3.0063C850@us.ibm.com>
Date: Tue, 22 May 2007 14:09:55 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 05/22/2007 14:09:56,
	Serialize complete at 05/22/2007 14:09:56
Content-Type: multipart/alternative; boundary="=_alternative 0063C77E852572E3_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0063C77E852572E3_=
Content-Type: text/plain; charset="US-ASCII"

Hello,
I'm sorry if this is a naive question, but I have implemented my own 
"MoreLikeThis" functionality, and 
in re-reading the FAQ saw that it looks like something like this is 
already built, so I wanted to try it out and see 
if it would simplify my code:

How do I find similar documents?
See the org.apache.lucene.search.similar package from the contrib area. It 
is part of Lucene starting with Lucene 1.9. 

I'm using Lucene 2.1 so I'm definitely at that level, but in the contrib 
area in my Lucene distribution, I couldn't figure out what I need to 
include.
What do I need to do to try this package out?
thanks in advance--


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0063C77E852572E3_=--

From java-user-return-28215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 21:34:19 2007
Return-Path: <java-user-return-28215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87630 invoked from network); 22 May 2007 21:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 21:34:18 -0000
Received: (qmail 9087 invoked by uid 500); 22 May 2007 21:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9051 invoked by uid 500); 22 May 2007 21:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9040 invoked by uid 99); 22 May 2007 21:34:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 14:34:15 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 May 2007 14:34:06 -0700
Received: (qmail 79055 invoked by uid 60001); 22 May 2007 21:33:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=sPo2cilp4MOYpevcp18fEmxm4InwBQotgrHWo1I3Wa0K44y1y/xW0CA96Ul7yAHHzmQT6TNe6/Y0BqoVmQ9ClDApu5tk4HqvELeYQwllNzrnOz00kF/0g1mgNRxT0cvo5/NfN1lSCYiBZ0EhkARXOXF9gJiP6pFKyP0W6+dDYq4=;
X-YMail-OSG: G0aCbYQVM1mOBVg0nU7D4T9XEWZbJi9iEuyTC_n98iB8HJs7YOJ0gaoTztoLomfec7hgYpEMapz6TkgddirpDV1CfNX6.oU.bQ4gCd3elRDZx6_Vq_Y-
Received: from [208.66.64.47] by web50309.mail.re2.yahoo.com via HTTP; Tue, 22 May 2007 14:33:44 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Tue, 22 May 2007 14:33:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: MoreLikeThis?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <899445.78387.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Donna, this is what you need to do to get the jar, and after that you just use MLT according to its API.

$ cd lucene-trunk
otis:~/dev/workspace/lucene-trunk otis$ cd contrib/queries/
otis:~/dev/workspace/lucene-trunk/contrib/queries otis$ ff MoreLikeThis.java
./src/java/org/apache/lucene/search/similar/MoreLikeThis.java
otis:~/dev/workspace/lucene-trunk/contrib/queries otis$ ant jar
Buildfile: build.xml
     [echo] Building queries...

javacc-uptodate-check:

javacc-notice:

common.init:

build-lucene:

init:

clover.setup:

clover.info:
     [echo] 
     [echo]       Clover not found. Code coverage reports disabled.
     [echo]   

clover:

compile-core:
    [mkdir] Created dir: /Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/classes/java
    [javac] Compiling 8 source files to /Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/classes/java

jar-core:
      [jar] Building jar: /Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/lucene-queries-2.2-dev.jar

jar:

BUILD SUCCESSFUL
Total time: 8 seconds

 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Donna L Gresh <gresh@us.ibm.com>
To: java-user@lucene.apache.org
Sent: Tuesday, May 22, 2007 2:09:55 PM
Subject: MoreLikeThis?

Hello,
I'm sorry if this is a naive question, but I have implemented my own 
"MoreLikeThis" functionality, and 
in re-reading the FAQ saw that it looks like something like this is 
already built, so I wanted to try it out and see 
if it would simplify my code:

How do I find similar documents?
See the org.apache.lucene.search.similar package from the contrib area. It 
is part of Lucene starting with Lucene 1.9. 

I'm using Lucene 2.1 so I'm definitely at that level, but in the contrib 
area in my Lucene distribution, I couldn't figure out what I need to 
include.
What do I need to do to try this package out?
thanks in advance--


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 21:46:57 2007
Return-Path: <java-user-return-28216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95361 invoked from network); 22 May 2007 21:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 21:46:56 -0000
Received: (qmail 36636 invoked by uid 500); 22 May 2007 21:46:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36606 invoked by uid 500); 22 May 2007 21:46:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36595 invoked by uid 99); 22 May 2007 21:46:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 14:46:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 May 2007 14:46:45 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 29
          for <java-user@lucene.apache.org>;
          Tue, 22 May 2007 14:46:04 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
References: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com> <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <555A4F8E-96E8-4DD1-9BDD-346B8660BB81@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: In memory MultiSearcher
Date: Tue, 22 May 2007 14:46:03 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Thanks for the reply, this is a web application.

If you want to serve image files in a scalable fashion
on the Internet you make Apache serve them from
memory, not the filesystem.

For databases, some sites use a distributed object
memory caching system such as memcached.

I was hoping the idea translates to Lucene and
was trying to overcome reading multiple indexes
from attached disks into main memory on one
machine first, then across a balanced farm.

I think what you are saying is use FSDirectories and
the regular built-in Lucene caching provided instead.

Let's give that a try in the servlet init() method!

Regards,

Peter W.


On May 21, 2007, at 2:46 PM, Erick Erickson wrote:

> Why are you doing this in the first place? Do you actually have
> evidence that the default Lucene behavior (caching, etc) is inadequate
> for your needs?
>
> I'd *strongly* recommend, if you haven't, just using the regular
> FSDirectories rather than RAMDirectories and only getting
> complex if that's too slow...
>
> I ask because I am searching FS-based indexes that are 4G with
> no problem. The index *was* 8G and had only a 10% performance hit.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 21:53:12 2007
Return-Path: <java-user-return-28217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97881 invoked from network); 22 May 2007 21:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 21:53:11 -0000
Received: (qmail 44651 invoked by uid 500); 22 May 2007 21:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44617 invoked by uid 500); 22 May 2007 21:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44605 invoked by uid 99); 22 May 2007 21:53:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 14:53:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 May 2007 14:53:00 -0700
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 257
          for <java-user@lucene.apache.org>;
          Tue, 22 May 2007 14:52:19 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0705220109320.6539@hal.rescomp.berkeley.edu>
References: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com> <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com> <Pine.LNX.4.58.0705220109320.6539@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <221E052A-BAD2-4816-910E-C6536C1D0BDE@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: In memory MultiSearcher
Date: Tue, 22 May 2007 14:52:18 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hoss,

My Lucene scaling strategy involves creating
numerous indexes, so I was looking for a way
to read them in together for quickness.

For those interested, your suggestion of using a
single IndexSearcher on a MultiReader works well
by itself.

Or, you can still place in memory like this:

IndexReader[] indexr_a=
            {
            IndexReader.open(new RAMDirectory(index_one_path)),
            IndexReader.open(new RAMDirectory(index_two_path)),
            IndexReader.open(new RAMDirectory(index_three_path)),
            IndexReader.open(new RAMDirectory(index_n_path))
            };

          MultiReader mr=new MultiReader(indexr_a);
          IndexSearcher is=new IndexSearcher(mr);

Regards,

Peter W.



On May 22, 2007, at 1:10 AM, Chris Hostetter wrote:

> ...and if you are "Multi Searching" over a bunch of local directories
> anyway, then use a single INdexSearcher on a MultiReader instead ...
> that should be much faster then youre MultiSearcher.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 22 23:34:57 2007
Return-Path: <java-user-return-28218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48854 invoked from network); 22 May 2007 23:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 May 2007 23:34:55 -0000
Received: (qmail 12723 invoked by uid 500); 22 May 2007 23:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12689 invoked by uid 500); 22 May 2007 23:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12678 invoked by uid 99); 22 May 2007 23:34:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 16:34:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 16:34:46 -0700
Received: by ug-out-1314.google.com with SMTP id k40so383390ugc
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 16:34:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qEuY/FvNMEpOm+D2QjoDOAThYPK4u0RH/sHdMydkzo6852e5ejQVmk0xyXO3lusOUFrDGbLGFWJaZlTvR0KKbpsOfjgi81RxqPPIC0ukwhiDyoa0lm8LMTg9mKWwF0csSf/0pjJtvuEFLjH1isrpiQi9se51PWYTUbELJtQaZYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q7K222n1PvzavDEP88sXtpOajRcWgF6KMv3Cnnuaz9Wzi5Y/plf3a/D230buy/6R9cuYceHCOh4sTa6ueyBYkGaqxR7PA0CCsixk5b9ysU61Lp8lFnezuFVokP71dhaZMis03vIHrn/v8ye1ewNavT+qP8SuOiiY9uJjFVo4ti4=
Received: by 10.82.156.12 with SMTP id d12mr17727bue.1179876861956;
        Tue, 22 May 2007 16:34:21 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Tue, 22 May 2007 16:34:21 -0700 (PDT)
Message-ID: <359a92830705221634m49373a7ewcb5a97b109c1c8c7@mail.gmail.com>
Date: Tue, 22 May 2007 19:34:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: In memory MultiSearcher
In-Reply-To: <555A4F8E-96E8-4DD1-9BDD-346B8660BB81@marketingbrokers.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68017_8028362.1179876861909"
References: <F7E4074F-AFF7-4B8E-B8C6-2FEF4C2FA9DB@marketingbrokers.com>
	 <359a92830705211446u8d53ab9u900bfc851cfd9f78@mail.gmail.com>
	 <555A4F8E-96E8-4DD1-9BDD-346B8660BB81@marketingbrokers.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68017_8028362.1179876861909
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're right, I am suggesting that you use the Lucene
caching and see if it is adequate.

Mind you, I have no clue whether your application will be well
served by this or not, I've just seen too many examples of folks
(includeing me) jumping into a solution to a problem that doesn't
exist to be able to refrain from asking "Do you *know* you need
to get fancy?" <G>...

FWIW, a couple of things to watch out for. The searchers need to
process a few queries before the caches are built up, so if you
are doing load testing, be aware that the first few queries aren't
representative.

Second, you'll probably need to build at least a simple load tester
(actually, I'm probably sure some exist off the shelf, but we've
been doing things in-house so far) to fire off a bunch of threads
that make requests and measure response. I'd hate for my off-the-cuff
advice to cause your app to tip over the first time you opened it up
to the public <G>....

Best
Erick

On 5/22/07, Peter W. <peter@marketingbrokers.com> wrote:
>
> Erick,
>
> Thanks for the reply, this is a web application.
>
> If you want to serve image files in a scalable fashion
> on the Internet you make Apache serve them from
> memory, not the filesystem.
>
> For databases, some sites use a distributed object
> memory caching system such as memcached.
>
> I was hoping the idea translates to Lucene and
> was trying to overcome reading multiple indexes
> from attached disks into main memory on one
> machine first, then across a balanced farm.
>
> I think what you are saying is use FSDirectories and
> the regular built-in Lucene caching provided instead.
>
> Let's give that a try in the servlet init() method!
>
> Regards,
>
> Peter W.
>
>
> On May 21, 2007, at 2:46 PM, Erick Erickson wrote:
>
> > Why are you doing this in the first place? Do you actually have
> > evidence that the default Lucene behavior (caching, etc) is inadequate
> > for your needs?
> >
> > I'd *strongly* recommend, if you haven't, just using the regular
> > FSDirectories rather than RAMDirectories and only getting
> > complex if that's too slow...
> >
> > I ask because I am searching FS-based indexes that are 4G with
> > no problem. The index *was* 8G and had only a 10% performance hit.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68017_8028362.1179876861909--

From java-user-return-28219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 04:17:44 2007
Return-Path: <java-user-return-28219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30003 invoked from network); 23 May 2007 04:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 04:17:42 -0000
Received: (qmail 25152 invoked by uid 500); 23 May 2007 04:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25124 invoked by uid 500); 23 May 2007 04:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25113 invoked by uid 99); 23 May 2007 04:17:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 21:17:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.89.17.206] (HELO outbound-mail-06.bluehost.com) (69.89.17.206)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 May 2007 21:17:34 -0700
Received: (qmail 17085 invoked by uid 0); 23 May 2007 04:17:11 -0000
Received: from unknown (HELO box108.bluehost.com) (69.89.22.108)
  by mailproxy1.bluehost.com with SMTP; 23 May 2007 04:17:11 -0000
Received: from c-71-56-60-78.hsd1.ga.comcast.net ([71.56.60.78] helo=[192.168.1.100])
	by box108.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.63)
	(envelope-from <emmanuel@hibernate.org>)
	id 1HqiHf-0001jD-K3
	for java-user@lucene.apache.org; Tue, 22 May 2007 22:17:11 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310705211409h606ad9e8u6d41aae0de64dd50@mail.gmail.com>
References: <0EBBD6FA3D0E7F4385D69764942C752E1824FBA6@HS-MAILSVR.Virtusa.com> <359a92830705140649uea63ef9vd8081a299975606f@mail.gmail.com> <10724708.post@talk.nabble.com> <6e3ae6310705211409h606ad9e8u6d41aae0de64dd50@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EE2B32C4-3CAA-47D9-9ED4-FB3B817B274E@hibernate.org>
Content-Transfer-Encoding: 7bit
From: Emmanuel Bernard <emmanuel@hibernate.org>
Subject: Re: How to Update the Index once it is created
Date: Wed, 23 May 2007 00:17:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Identified-User: {1307:box108.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 71.56.60.78 authed with emmanuel+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

The indexation part of Hibernate Search relies on Java Persistence  
API to triggers the index update transparently. Otherwise you can  
trigger it manually to follow the crawling approach (not transparent).
Event driven vs crawling driven index update have both use cases, I  
would not say that one is really more generic than the other.

Anyway, Krishna, if you use Lucene 2.1, I like the new  
IndexWriter.updateDocument APIs, it's really neat when you have one  
of the term representing your unique id (in your case that would be  
table name + id). I don't fit into those requirements but it would  
have saved me a lot of time if I did :D

Emmanuel

On 21 mai 07, at 17:09, Chris Lu wrote:

> Does it mandate you to pass data through Hibernate? This seems very
> similar to Compass' approach.
>
> I believe a more generic approach is to compare what's already indexed
> with what's changed or deleted, so you can use any framework to work
> with Lucene. And simply selecting the data and creating the index can
> avoid some specific framework limitation and easier to scale.  Also,
> re-indexing will also be easier.
>
> DBSight tracks changes through simple SQLs, hard-deleted or
> soft-deleted content, and do it very efficiently even for large number
> of documents.
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php? 
> title=Create_Lucene_Database_Search_in_3_minutes
>
> On 5/21/07, bhecht <bhecht@ams-sys.com> wrote:
>>
>> If you are using Orcale and Lucene, check out
>> http://www.hibernate.org/410.html "Hibernate Search"  , this will
>> automaticly update your lucene index, on any change to your  
>> database table
>>
>> Erick Erickson wrote:
>> >
>> > You have to delete the old document and add it a new one.
>> >
>> > See IndexModifier class.
>> >
>> > There is no ability to modify a document in place.
>> >
>> > Best
>> > Erick
>> >
>> > On 5/14/07, Krishna Prasad Mekala <krishnapm@virtusa.com> wrote:
>> >>
>> >> Hi All,
>> >>
>> >>
>> >>
>> >> Thanks for your response. I have one more doubt. How can I  
>> update a
>> >> index once created from Oracle, instead of recreating the whole.
>> >> Whenever there is a change in the oracle table
>> >> (insertion/updation/deletion of a row) my application should  
>> update the
>> >> index.
>> >>
>> >>
>> >>
>> >> Thanks in advance.
>> >>
>> >>
>> >>
>> >>
>> >>
>> >> Krishna Prasad M
>> >>
>> >>
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context: http://www.nabble.com/How-to-Update- 
>> the-Index-once-it-is-created-tf3752208.html#a10724708
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 05:38:30 2007
Return-Path: <java-user-return-28220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46815 invoked from network); 23 May 2007 05:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 05:38:29 -0000
Received: (qmail 24542 invoked by uid 500); 23 May 2007 05:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24513 invoked by uid 500); 23 May 2007 05:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24502 invoked by uid 99); 23 May 2007 05:38:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 22:38:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 22:38:21 -0700
Received: by an-out-0708.google.com with SMTP id b20so15433ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 22:38:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AHxDEfZ8+FbxqY4DWS/2Pz6JbRzYHpA/6fQc7/MFbfcNqyb1g9E00DEW21YATpe6KfeKIzJq+z+A1uHa9EuLLYI96nGRcmiue8UR4bGyQdUEPtTw4Rz6Xx9qBddonw+0Zj+8qyPeda+VY+5ZxkQElE+bCLWB5IoBlzc++QqB1TI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QitGR5fJKRR/kYn9U28PWF3uk34j2cKGl6tLm97hkxoHsriJXGhaE/H3qHDHHiAkywFiJn7VIQGkVtYKVc80rga74oW0KMt6qmmpMJ0HR8VqJnbk1EPQzWQgD67/wMlLzLt17ChyhRg7PiA8K+sGBOiGTpCnwH17wkXgnB7wGoM=
Received: by 10.100.95.19 with SMTP id s19mr117548anb.1179898681155;
        Tue, 22 May 2007 22:38:01 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Tue, 22 May 2007 22:38:01 -0700 (PDT)
Message-ID: <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
Date: Wed, 23 May 2007 10:08:01 +0430
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <465303E2.6020802@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118314_26539331.1179898681081"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <465303E2.6020802@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118314_26539331.1179898681081
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Steve,
No I didn't make any change on WhiteSpaceAnalyzer I just extends my classes
from the original classes and then override my new changes. so I dont think
I should to contribute my classes.

and my language is Persian, and only change I've made is not to ignoring
unicode characters in Persian and arabic language, because with original
WhitespaceAnalyzer it didnt work fine whether it ignore or something else, I
dont know but I extends my classes and now I am using my analyzer to index.

On 5/22/07, Steven Rowe <sarowe@syr.edu> wrote:
>
> Hi Mohammad,
>
> May I ask what your language is?  And what kind of changes to
> WhitespaceAnalyzer were required to make it work with your language?
>
> If you have made modifications to WhitespaceAnalyzer that are generally
> useful, please consider contributing your changes back to the Lucene
> project.  There is some info here on how to get started:
>
>    http://wiki.apache.org/jakarta-lucene/HowToContribute
>
> Thanks,
> Steve
>
> Mohammad Norouzi wrote:
> > Walter,
> > Yes I am using a customized WhiteSpaceAnalyzer while indexing.
> > I said customized because I realized that standard WhiteSpaceAnalyzer
> dont
> > accept unicode terms in my language so I make some change to support
> that.
> >
> > but for reading no Analyzer is used
> >
> > if I want to get that result, which analyzer should I use?
> >
> > in my case, I dont need any boost factor or any other feature of lucene,
> I
> > need just searching through the index.
> >
> >
> > On 5/22/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
> >>
> >> If Reader.terms() gives you:
> >> text3
> >> text4
> >> while you expect
> >> text3 text4
> >>
> >> you should change, I presume, the Analyzer, maybe writing your own one.
> >>
> >> Mohammad Norouzi wrote:
> >> > Hi all
> >> >
> >> > consider following index
> >> >
> >> > field1           field2                              field3
> >> > text1           text1 text2                      text3 text4
> >> > text4           text2                              text2 text3 text5
> >> >
> >> > I want to get all terms in filed3
> >> > if I use Reader.terms() it will returns: (however i have to put an if
> >> > statement to filter result of the field3 only)
> >> > text3
> >> > text4
> >> > text2
> >> > text5
> >> >
> >> > but I need following result:
> >> > "text3 text4"
> >> > "text2 text3 text5"
> >> >
> >> >
> >> > is this possible? if yes, how? and if no, is there any tricky way to
> >> get
> >> > this result?
> >> >
> >> > thank you so much.
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_118314_26539331.1179898681081--

From java-user-return-28221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 06:05:55 2007
Return-Path: <java-user-return-28221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55541 invoked from network); 23 May 2007 06:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 06:05:54 -0000
Received: (qmail 55521 invoked by uid 500); 23 May 2007 06:05:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55473 invoked by uid 500); 23 May 2007 06:05:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55462 invoked by uid 99); 23 May 2007 06:05:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 23:05:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 23:05:47 -0700
Received: by an-out-0708.google.com with SMTP id b20so16515ana
        for <java-user@lucene.apache.org>; Tue, 22 May 2007 23:05:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tnZoYa4gQ+7K506yo+CRPqCtzuYmEKTKjuISlOh83yR7iFAKbrKwCFMRhbvTmahRBXEEQZhaSphohHgXwvqA2P47pIX+3w+v3bnPWpiwSbAbxaOJ7iCmv3rh8IQ8xKQ70s41fxFqFFhVEcLfyIXr9oXOt84PljuktMP2nOs28wM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FqtoXZ9veJUIl+iCh12S493SXJGEh/l1Y6skbUkJrjG0cohPWdtpcsWo5+zKfHb77MtHMqs92EaNc0TiDjkRPCiAOwIspX5LlZlutW3wn+hhoIgPwQSL+W2hifTznPy4WtOLnbtNxElYRiNaG1wuL2pWdOaO83kYWELp5FlKtBU=
Received: by 10.100.33.14 with SMTP id g14mr167080ang.1179900326596;
        Tue, 22 May 2007 23:05:26 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Tue, 22 May 2007 23:05:26 -0700 (PDT)
Message-ID: <34b8543c0705222305h312e55deqbcbe1759121bd85@mail.gmail.com>
Date: Wed, 23 May 2007 09:35:26 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <4652CB3E.2050304@ecomware.it>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118598_25056088.1179900326375"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <4652CB3E.2050304@ecomware.it>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118598_25056088.1179900326375
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Walter,
let me explain my problem in detail
I have a web page let user to create his own query simple
for example a user want to locate a service with specific value. so he/she
doesnt know exactly the name of the service so I have to provide a list of
services available (say in a combo box) and after selecting the service now
the user can enter the value for that service so I will build the
appropriate query and send it to the lucene.
but my problem is how to display all services? how can I extract the
services from the index?

I was thinking of IndexReader.terms() but I think because of using
WhitespaceAnalyzer it returns word by word terms, but I need terms per
document,
if we consider a SQL , select distinct service_name from table_name

is there a way to tackle this problem?


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_118598_25056088.1179900326375--

From java-user-return-28222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 06:19:14 2007
Return-Path: <java-user-return-28222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59588 invoked from network); 23 May 2007 06:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 06:19:12 -0000
Received: (qmail 77813 invoked by uid 500); 23 May 2007 06:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77209 invoked by uid 500); 23 May 2007 06:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77198 invoked by uid 99); 23 May 2007 06:19:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 23:19:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.199.12] (HELO huffman.isp.lu) (194.154.199.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 May 2007 23:19:03 -0700
Received: from charlie (charlie_ce0 [172.18.1.213])
	by huffman.isp.lu (8.10.2+Sun/8.10.2) with ESMTP id l4N6Kgr12773
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 08:20:42 +0200 (MET DST)
Received: from [172.18.5.129] by mailfloat.saint-paul.lu
 (iPlanet Messaging Server 5.2 (built Feb 21 2002))
 with ESMTP id <0JIH0016PDJQFV@mailfloat.saint-paul.lu> for
 java-user@lucene.apache.org; Wed, 23 May 2007 08:19:02 +0200 (MEST)
Date: Wed, 23 May 2007 08:19:02 +0200
From: Stefan Colella <stefan.colella@saint-paul.lu>
Subject: Re: search result problem
In-reply-to: 
 <OFCE5FB18F.460E4A93-ON882572E2.0075318E-882572E2.0075839C@il.ibm.com>
To: java-user@lucene.apache.org
Message-id: <4653DCD6.80408@saint-paul.lu>
Organization: saint-paul luxembourg s.a.
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_F19UJoYaAy/gGmA9KYs/RQ)"
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
References: 
 <OFCE5FB18F.460E4A93-ON882572E2.0075318E-882572E2.0075839C@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_F19UJoYaAy/gGmA9KYs/RQ)
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT

Hello,
I used the setMaxFieldLength() and it works now thx all.


Doron Cohen wrote:
> Stefan Colella wrote:
>
>   
>> I tried to only add the content of the page where that expression can be
>> found (instead of the whole document) and then  the search works.
>>
>> Do i have to split my pdf text into more field? Or what could be the
>> problem?
>>     
>
> Perhaps indexWriter's setMaxFieldLength() is relevant here.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

--Boundary_(ID_F19UJoYaAy/gGmA9KYs/RQ)--

From java-user-return-28223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 12:21:44 2007
Return-Path: <java-user-return-28223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10614 invoked from network); 23 May 2007 12:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 12:21:44 -0000
Received: (qmail 23827 invoked by uid 500); 23 May 2007 12:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23798 invoked by uid 500); 23 May 2007 12:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23787 invoked by uid 99); 23 May 2007 12:21:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 05:21:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.40 as permitted sender)
Received: from [206.46.252.40] (HELO vms040pub.verizon.net) (206.46.252.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 05:21:35 -0700
Received: from dorthy ([72.73.129.10])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JIH00IR2UBAGLE5@vms040.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 23 May 2007 07:21:10 -0500 (CDT)
Date: Wed, 23 May 2007 07:21:48 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: CAD  files, Images
To: <java-user@lucene.apache.org>
Message-id: <012f01c79d34$ef88d210$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
 <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
 <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
 <FA9E1364-5458-4B59-97BA-F6205C9C8285@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Is it possibe to index CAD formats such as AutoCad or CGM? I know some 
commecail products (excalaber) claim to be able to do that? If so what about 
TIFF?


thanks
jim s


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 13:20:18 2007
Return-Path: <java-user-return-28224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40263 invoked from network); 23 May 2007 13:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 13:19:44 -0000
Received: (qmail 82522 invoked by uid 500); 23 May 2007 13:19:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82491 invoked by uid 500); 23 May 2007 13:19:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82480 invoked by uid 99); 23 May 2007 13:19:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:19:40 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:19:32 -0700
Received: by ug-out-1314.google.com with SMTP id m2so107345uge
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 06:19:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GCfIFWN/rb0xlHfvabynEawLIi3niEqUUCjwjbDwy4tyUc/93P7Xk45iM0dgVnVI3ZPu8XJlB8VMKOEhPObZrpheqqs+Gzy3wa2HINnAl3VnoIdNOu7a98+hqXGVRtlzbAjco6nzZlolnWi8ZSSvHKAjgr4pQr0yrUT4c7p3BU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W6B+eboYkl38v3pC6npEx2k6AuYUa2Wl48VmZx+1cYFKGLab5/5Bwn1Ws/V4IwrRj7zhZ/20gFaH/W/BUpZuqy7XpEBfiGR+/QBln0hBOVW/A0NHS9d54q1+/oRpr+eOfO6MquX8sQzF9VjfWj/6kAFfjWUHUqMP19Sad/Jt7Cg=
Received: by 10.82.163.13 with SMTP id l13mr1071287bue.1179926346449;
        Wed, 23 May 2007 06:19:06 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 23 May 2007 06:19:06 -0700 (PDT)
Message-ID: <359a92830705230619v4a22131ia924932af56577cb@mail.gmail.com>
Date: Wed, 23 May 2007 09:19:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <34b8543c0705222305h312e55deqbcbe1759121bd85@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73808_22428336.1179926346412"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <4652CB3E.2050304@ecomware.it>
	 <34b8543c0705222305h312e55deqbcbe1759121bd85@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73808_22428336.1179926346412
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You may have to index things twice, once for searching and once
UN_TOKENIZED for display. Say you have a bunch of service names
you want to display
service one
service two
service three

If you use WhitespaceAnalyzer, TOKENIZED you index the tokens
service  (note, there are three of these)
one
two
three

and re-assembling them is a pain. If you used UN_TOKENIZED, you'd
add
service one
service two
service three

as exactly three terms.
Now, simply using TermEnum on that field will return your list. And you
won't
get duplicates even if you indexed "service one" twice.

Another possibility is to index a special document. Remember that not
all documents need to have the same fields. So, say you have a list of all
services. You could index a document with "extra_special_meta_field" that
contained a comma-delimited list of services, and just get *that* document
to
generate your list. A variant of this is to index the *same* field in your
extra-special doc, like
Document doc = new Document();
doc.add("special", "service one"...UN_TOKENIZED);
doc.add("special", "service two"... UN_TOKENIZED);


Now, once you have the document (perhaps do this at startup time), the
call Document.getValues("special") will return a list like
"service one"
"service two".

At least I'm pretty sure....

All this may be in left field, but I thought I'd mention it.

Best
Erick


On 5/23/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi Walter,
> let me explain my problem in detail
> I have a web page let user to create his own query simple
> for example a user want to locate a service with specific value. so he/she
> doesnt know exactly the name of the service so I have to provide a list of
> services available (say in a combo box) and after selecting the service
> now
> the user can enter the value for that service so I will build the
> appropriate query and send it to the lucene.
> but my problem is how to display all services? how can I extract the
> services from the index?
>
> I was thinking of IndexReader.terms() but I think because of using
> WhitespaceAnalyzer it returns word by word terms, but I need terms per
> document,
> if we consider a SQL , select distinct service_name from table_name
>
> is there a way to tackle this problem?
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
>

------=_Part_73808_22428336.1179926346412--

From java-user-return-28225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 13:22:00 2007
Return-Path: <java-user-return-28225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48341 invoked from network); 23 May 2007 13:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 13:21:59 -0000
Received: (qmail 94957 invoked by uid 500); 23 May 2007 13:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94926 invoked by uid 500); 23 May 2007 13:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94911 invoked by uid 99); 23 May 2007 13:21:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:21:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:21:50 -0700
Received: by ug-out-1314.google.com with SMTP id m2so108198uge
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 06:21:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=N84Q+Tak05dccIWU6mI/vYLpgsfo1pfSEmnGN8FtWITW/6iKw7S1fEV2CQ0veedzPsVfng2wx27TeNxvkn1NsLMy4U8AYQ6gX5qB477hfRweHbZgFf/4TSoPPUmy+JjWi00ITKimpdxAf4Zzrjdu6nPs1dgxUMwbUvPAzYaCmZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mUeM2dFu1bHUR7cvGD5WgMCyNn0Gdb5qvLLLuQ0NP7krH81NRma8NOYm4bHqoVeK5n+Q5oIMRJuhFMb4UZRjHoIlBoXAoNDQxhDF0TMZU9s3X/pD4de/3rMCXL/6QNrgljNBsoBRXeAsXVXvEBUTPlMdnoj2DfzkmdaBDJrmp1c=
Received: by 10.82.176.3 with SMTP id y3mr1095942bue.1179926485715;
        Wed, 23 May 2007 06:21:25 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 23 May 2007 06:21:25 -0700 (PDT)
Message-ID: <359a92830705230621h79dca00dxc2888910be368134@mail.gmail.com>
Date: Wed, 23 May 2007 09:21:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CAD files, Images
In-Reply-To: <012f01c79d34$ef88d210$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73852_20997769.1179926485656"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
	 <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
	 <FA9E1364-5458-4B59-97BA-F6205C9C8285@apache.org>
	 <012f01c79d34$ef88d210$2e01a8c0@dorthy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73852_20997769.1179926485656
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, you can only index text. It's the same thing as indexing HTML
documents or XML documents. You index "important stuff" from
the guts of the doc.

So, if you can get some text out of these docs, you can index *that*,
possibly along with page information that allows you to, say, display
the relevant page in the original CAD app.

But there's nothing in core Lucene that just takes a CAD doc and
"does magic" to index it that I know of.

Erick

On 5/23/07, jim shirreffs <jpsb@verizon.net> wrote:
>
> Is it possibe to index CAD formats such as AutoCad or CGM? I know some
> commecail products (excalaber) claim to be able to do that? If so what
> about
> TIFF?
>
>
> thanks
> jim s
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_73852_20997769.1179926485656--

From java-user-return-28226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 13:27:33 2007
Return-Path: <java-user-return-28226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54763 invoked from network); 23 May 2007 13:27:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 13:27:32 -0000
Received: (qmail 15679 invoked by uid 500); 23 May 2007 13:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15652 invoked by uid 500); 23 May 2007 13:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15641 invoked by uid 99); 23 May 2007 13:27:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:27:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 06:27:24 -0700
Received: by an-out-0708.google.com with SMTP id b20so45449ana
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 06:27:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nc8itSmCeb7ZKc5NxqLFXJzlM2Bb84jm6IKfzNCG1B09sRrLs4P4WpTNUXMAqLgURnUo2t023C++TqHnIPKZyuBrgEpYiYtI/ebbeutZ1c2C63c6PYFLmqBh39w9ueTlEqSmS/YfYB309zamTWvKyLaz3hKA02TnuYJLEbMA+r8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eMJwcLkP9NLe5WIrNg/L8UUy+trtsgAaRRxFc8BPjG7ewCk4KzucFcfHRrZarO+1/UQcNckl15FEMx7B/2SV3KSQqRfjVsZ6ObrjOE6uNhQpWN33l7JC/Ay2N2KkmFTi3JQR5mQeZCZoT1hiQMHFJESF7y0DjolsEivCQBuieko=
Received: by 10.100.210.10 with SMTP id i10mr359218ang.1179926822725;
        Wed, 23 May 2007 06:27:02 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Wed, 23 May 2007 06:27:02 -0700 (PDT)
Message-ID: <34b8543c0705230627j6d20c851uc6962652a09b5f3c@mail.gmail.com>
Date: Wed, 23 May 2007 16:57:02 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regaridng Reader.terms()
In-Reply-To: <359a92830705230619v4a22131ia924932af56577cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122998_16616350.1179926822649"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <4652CB3E.2050304@ecomware.it>
	 <34b8543c0705222305h312e55deqbcbe1759121bd85@mail.gmail.com>
	 <359a92830705230619v4a22131ia924932af56577cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122998_16616350.1179926822649
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Wow, very nice comments
Thank you so much Erick. You really showed me the way


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_122998_16616350.1179926822649--

From java-user-return-28227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 14:35:57 2007
Return-Path: <java-user-return-28227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98724 invoked from network); 23 May 2007 14:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 14:35:56 -0000
Received: (qmail 97365 invoked by uid 500); 23 May 2007 14:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97331 invoked by uid 500); 23 May 2007 14:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97320 invoked by uid 99); 23 May 2007 14:35:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 07:35:53 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 07:35:46 -0700
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l4NEZP4r026469
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 10:35:25 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4NEZNsx551338
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 10:35:25 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4NEZNBM023898
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 10:35:23 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4NEZNmQ023895
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 10:35:23 -0400
In-Reply-To: <899445.78387.qm@web50309.mail.re2.yahoo.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: MoreLikeThis?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF56BC81ED.2183E261-ON852572E4.00501A31-852572E4.0050244D@us.ibm.com>
Date: Wed, 23 May 2007 10:35:24 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 05/23/2007 10:35:26,
	Serialize complete at 05/23/2007 10:35:26
Content-Type: multipart/alternative; boundary="=_alternative 005023C6852572E4_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005023C6852572E4_=
Content-Type: text/plain; charset="US-ASCII"

Thank you--

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com




Otis Gospodnetic <otis_gospodnetic@yahoo.com> 
05/22/2007 05:33 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: MoreLikeThis?






Donna, this is what you need to do to get the jar, and after that you just 
use MLT according to its API.

$ cd lucene-trunk
otis:~/dev/workspace/lucene-trunk otis$ cd contrib/queries/
otis:~/dev/workspace/lucene-trunk/contrib/queries otis$ ff 
MoreLikeThis.java
./src/java/org/apache/lucene/search/similar/MoreLikeThis.java
otis:~/dev/workspace/lucene-trunk/contrib/queries otis$ ant jar
Buildfile: build.xml
     [echo] Building queries...

javacc-uptodate-check:

javacc-notice:

common.init:

build-lucene:

init:

clover.setup:

clover.info:
     [echo] 
     [echo]       Clover not found. Code coverage reports disabled.
     [echo] 

clover:

compile-core:
    [mkdir] Created dir: 
/Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/classes/java
    [javac] Compiling 8 source files to 
/Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/classes/java

jar-core:
      [jar] Building jar: 
/Users/otis/dev/workspace/lucene-trunk-REAL/build/contrib/queries/lucene-queries-2.2-dev.jar

jar:

BUILD SUCCESSFUL
Total time: 8 seconds

 
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Donna L Gresh <gresh@us.ibm.com>
To: java-user@lucene.apache.org
Sent: Tuesday, May 22, 2007 2:09:55 PM
Subject: MoreLikeThis?

Hello,
I'm sorry if this is a naive question, but I have implemented my own 
"MoreLikeThis" functionality, and 
in re-reading the FAQ saw that it looks like something like this is 
already built, so I wanted to try it out and see 
if it would simplify my code:

How do I find similar documents?
See the org.apache.lucene.search.similar package from the contrib area. It 

is part of Lucene starting with Lucene 1.9. 

I'm using Lucene 2.1 so I'm definitely at that level, but in the contrib 
area in my Lucene distribution, I couldn't figure out what I need to 
include.
What do I need to do to try this package out?
thanks in advance--


Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--=_alternative 005023C6852572E4_=--

From java-user-return-28228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 14:44:01 2007
Return-Path: <java-user-return-28228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3815 invoked from network); 23 May 2007 14:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 14:44:01 -0000
Received: (qmail 19568 invoked by uid 500); 23 May 2007 14:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19542 invoked by uid 500); 23 May 2007 14:43:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19531 invoked by uid 99); 23 May 2007 14:43:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 07:43:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.48 as permitted sender)
Received: from [206.46.252.48] (HELO vms048pub.verizon.net) (206.46.252.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 07:43:51 -0700
Received: from dorthy ([72.73.129.10])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JII00GM70WA8VA2@vms048.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 23 May 2007 09:43:23 -0500 (CDT)
Date: Wed, 23 May 2007 09:44:00 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: CAD files, Images
To: <java-user@lucene.apache.org>
Message-id: <014901c79d48$cd6e6a00$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
 <307863C0-E6CD-46D1-83F6-5BEE9E57FAA2@apache.org>
 <34b8543c0705220509m38921b59x5a1334070b2f1059@mail.gmail.com>
 <FA9E1364-5458-4B59-97BA-F6205C9C8285@apache.org>
 <012f01c79d34$ef88d210$2e01a8c0@dorthy>
 <359a92830705230621h79dca00dxc2888910be368134@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

thank you for the reply, I knew the answer but was compelled to ask anyway.
CAD files like AutoCad/ProE/CaTia do contain some useful text and it is 
possible to get at that and
index it. But mostly it's vectors and there is not much a text engine can do 
with a vectors.


thanks again.

jim s

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, May 23, 2007 8:21 AM
Subject: Re: CAD files, Images


> No, you can only index text. It's the same thing as indexing HTML
> documents or XML documents. You index "important stuff" from
> the guts of the doc.
>
> So, if you can get some text out of these docs, you can index *that*,
> possibly along with page information that allows you to, say, display
> the relevant page in the original CAD app.
>
> But there's nothing in core Lucene that just takes a CAD doc and
> "does magic" to index it that I know of.
>
> Erick
>
> On 5/23/07, jim shirreffs <jpsb@verizon.net> wrote:
>>
>> Is it possibe to index CAD formats such as AutoCad or CGM? I know some
>> commecail products (excalaber) claim to be able to do that? If so what
>> about
>> TIFF?
>>
>>
>> thanks
>> jim s
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 16:46:43 2007
Return-Path: <java-user-return-28229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79232 invoked from network); 23 May 2007 16:46:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 16:46:42 -0000
Received: (qmail 34930 invoked by uid 500); 23 May 2007 16:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34892 invoked by uid 500); 23 May 2007 16:46:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34881 invoked by uid 99); 23 May 2007 16:46:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 09:46:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.187] (HELO exprod6og53.obsmtp.com) (64.18.1.187)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 23 May 2007 09:46:34 -0700
Received: from source ([139.56.8.7]) by exprod6ob53.postini.com ([64.18.5.12]) with SMTP;
	Wed, 23 May 2007 09:46:11 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id l4NGkcM22727
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 09:46:38 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id JAA21317
	for <java-user@lucene.apache.org>; Wed, 23 May 2007 09:49:11 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <2R84AXQP>; Wed, 23 May 2007 09:46:10 -0700
Message-ID: <F1C79CDF8799D944A3156C403517317418046A@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: java-user@lucene.apache.org
Subject: How to avoid score calculation completely?
Date: Wed, 23 May 2007 09:46:06 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have been using lucene for years and it serves us well.

Sometimes when we issue a query, we only what to know
how many hits it leads, not want any docs back. Is it possible
to completely avoid score calculation to get total count back?

I understand score calculation needs a loop for all matched 
docs, can we avoid the loop, surely this is for performance. We
want to achieve getting total count at O(1), independent of the
number of Docs?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 16:54:03 2007
Return-Path: <java-user-return-28230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81873 invoked from network); 23 May 2007 16:54:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 16:54:02 -0000
Received: (qmail 52379 invoked by uid 500); 23 May 2007 16:54:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52078 invoked by uid 500); 23 May 2007 16:53:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52067 invoked by uid 99); 23 May 2007 16:53:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 09:53:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 09:53:53 -0700
Received: by py-out-1112.google.com with SMTP id u52so356417pyb
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 09:53:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Ka9BP2NAMr7avId+8xhgaCDW8DHgmjks6dRc9yIHZy7D8YDJMAaBhxz+rbQfVGX/3xq/n9Edv03r4wmFedPGflXRxgzUramut0xr03VencRdq1rp5UlsO7jiIB02NO/DD2kt0kfXdbW3YIQTXIEBJ4HMryHHNGyA74BVyn+9mus=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=D9aL7YL0rd+E2HFrndbILYn/Row92NC4D5AYF453nBfFVccODjaz/twsI3P7/FJbJ9z6br7tftDNXAPZr0u6RF8ZTAMFpj5AN5mWQy8P1zltjVbL5TdOSJvE4nwQKep/e7VRW780IzSeC4fuLxQU2MpBjdd+8PvjTql3bUqHJh8=
Received: by 10.35.8.1 with SMTP id l1mr1458168pyi.1179939212340;
        Wed, 23 May 2007 09:53:32 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Wed, 23 May 2007 09:53:32 -0700 (PDT)
Message-ID: <c68e39170705230953w96f47e6l5ca0a8e059b34959@mail.gmail.com>
Date: Wed, 23 May 2007 12:53:32 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to avoid score calculation completely?
In-Reply-To: <F1C79CDF8799D944A3156C403517317418046A@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F1C79CDF8799D944A3156C403517317418046A@rw-msg-02.broadvision.com>
X-Google-Sender-Auth: b12db1d79123982c
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/23/07, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> We have been using lucene for years and it serves us well.
>
> Sometimes when we issue a query, we only what to know
> how many hits it leads, not want any docs back. Is it possible
> to completely avoid score calculation to get total count back?
>
> I understand score calculation needs a loop for all matched
> docs, can we avoid the loop, surely this is for performance. We
> want to achieve getting total count at O(1), independent of the
> number of Docs?

Calculating scores adds a low, fixed amount of overhead to the matching logic.
The savings would most likely not be that large.

For simple queries, it might be quickest to use TermDocs() to iterate
over the docs matching terms yourself.

Also, see Matcher in http://issues.apache.org/jira/browse/LUCENE-584

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 17:07:47 2007
Return-Path: <java-user-return-28231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88967 invoked from network); 23 May 2007 17:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 17:07:46 -0000
Received: (qmail 89203 invoked by uid 500); 23 May 2007 17:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88979 invoked by uid 500); 23 May 2007 17:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88949 invoked by uid 99); 23 May 2007 17:07:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 10:07:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 10:07:36 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163BEFC1@mailer.syr.edu>; Wed, 23 May 2007 13:07:15 -0400
Message-ID: <4654747C.80005@syr.edu>
Date: Wed, 23 May 2007 13:06:04 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>	 <4652C220.7090505@ecomware.it>	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>	 <465303E2.6020802@syr.edu> <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
In-Reply-To: <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mohammad,

WhitespaceAnalyzer uses Java's Character.isWhitespace(char) method to
determine whether or not a character should be part of a token.  As far
as I know, this method is problematic only for characters outside of the
Basic Multilingual Plane (BMP).  I think Lucene should switch to using
the int-based character methods, to support characters outside of the BMP.

Arabic characters are all in the BMP[1][2][3][4], so this method should
work properly.  The only Arabic or Persian characters I can find outside
of the BMP are in the Old Persian block[5], [ U+103A0 - U+103DF ], but
this is ancient cuneiform - are you really dealing with digital
cuneiform documents?

I suspect that you are using WhitespaceAnalyzer as the basis for a more
sophisticated tokenizer - if this is true, you may want to check out the
tokenizer in the AraMorph project[6][7].  (The AraMorph stemmer probably
will not serve your needs, though, since Persian and Arabic have
different lexicons and grammars.)

Hope it helps,
Steve

[1] Arabic: http://www.unicode.org/charts/PDF/U0600.pdf
[2] Arabic Supplement: http://www.unicode.org/charts/PDF/U0750.pdf
[3] Arabic Presentation Forms A: http://www.unicode.org/charts/PDF/UFB50.pdf
[4] Arabic Presentation Forms B: http://www.unicode.org/charts/PDF/UFE70.pdf
[5] Old Persian: http://www.unicode.org/charts/PDF/U103A0.pdf
[6] AraMorph: http://www.nongnu.org/aramorph/
[7] ArabicTokenizer for Lucene:
http://www.nongnu.org/aramorph/javadoc/gpl/pierrick/brihaye/aramorph/lucene/ArabicTokenizer.html


Mohammad Norouzi wrote:
> Hi Steve,
> No I didn't make any change on WhiteSpaceAnalyzer I just extends my classes
> from the original classes and then override my new changes. so I dont think
> I should to contribute my classes.
> 
> and my language is Persian, and only change I've made is not to ignoring
> unicode characters in Persian and arabic language, because with original
> WhitespaceAnalyzer it didnt work fine whether it ignore or something
> else, I
> dont know but I extends my classes and now I am using my analyzer to index.
> 
> On 5/22/07, Steven Rowe <sarowe@syr.edu> wrote:
>>
>> Hi Mohammad,
>>
>> May I ask what your language is?  And what kind of changes to
>> WhitespaceAnalyzer were required to make it work with your language?
>>
>> If you have made modifications to WhitespaceAnalyzer that are generally
>> useful, please consider contributing your changes back to the Lucene
>> project.  There is some info here on how to get started:
>>
>>    http://wiki.apache.org/jakarta-lucene/HowToContribute
>>
>> Thanks,
>> Steve
>>
>> Mohammad Norouzi wrote:
>> > Walter,
>> > Yes I am using a customized WhiteSpaceAnalyzer while indexing.
>> > I said customized because I realized that standard WhiteSpaceAnalyzer
>> dont
>> > accept unicode terms in my language so I make some change to support
>> that.
>> >
>> > but for reading no Analyzer is used
>> >
>> > if I want to get that result, which analyzer should I use?
>> >
>> > in my case, I dont need any boost factor or any other feature of
>> lucene,
>> I
>> > need just searching through the index.
>> >
>> >
>> > On 5/22/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>> >>
>> >> If Reader.terms() gives you:
>> >> text3
>> >> text4
>> >> while you expect
>> >> text3 text4
>> >>
>> >> you should change, I presume, the Analyzer, maybe writing your own
>> one.
>> >>
>> >> Mohammad Norouzi wrote:
>> >> > Hi all
>> >> >
>> >> > consider following index
>> >> >
>> >> > field1           field2                              field3
>> >> > text1           text1 text2                      text3 text4
>> >> > text4           text2                              text2 text3 text5
>> >> >
>> >> > I want to get all terms in filed3
>> >> > if I use Reader.terms() it will returns: (however i have to put
>> an if
>> >> > statement to filter result of the field3 only)
>> >> > text3
>> >> > text4
>> >> > text2
>> >> > text5
>> >> >
>> >> > but I need following result:
>> >> > "text3 text4"
>> >> > "text2 text3 text5"
>> >> >
>> >> >
>> >> > is this possible? if yes, how? and if no, is there any tricky way to
>> >> get
>> >> > this result?
>> >> >
>> >> > thank you so much.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 18:02:55 2007
Return-Path: <java-user-return-28232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9927 invoked from network); 23 May 2007 18:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 18:02:55 -0000
Received: (qmail 42403 invoked by uid 500); 23 May 2007 18:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42372 invoked by uid 500); 23 May 2007 18:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42361 invoked by uid 99); 23 May 2007 18:02:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 11:02:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 11:02:46 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 23 May 2007 11:02:24 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: How to filter fields with hits from result set
Date: Wed, 23 May 2007 11:02:26 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to filter fields with hits from result set
Thread-Index: AcedZIVB7M0z6EJCTKiC+lOiaac3tQ==
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 May 2007 18:02:24.0348 (UTC) FILETIME=[843191C0:01C79D64]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

If a search returns a document that has multiple fields with the same
name, is there a way to filter only those fields that contain hits?


Background:

I am indexing documents and we store all content in our index for
display reasons.  We want to show only those pages containing hits.  My
first implementation was saving each page in a Lucene document.  For
performance reasons why are now looking into indexing the complete
indexed document as a single Lucene document.

Every page is added to a field in the Lucene document named
page-content.  That means I am ending with as many fields named
page-content as the document has pages.

My search now returns me a single Lucene document in contrary to my
first approach with page per Lucene document.  My problem right now is:
how can I limit the returned page-contents fields for pages to those
field entries that contain hits.  If I have hits on pages five pages
from a document with 10 pages I would like to have only the pages with
the hits, not all.

Is there anything in Lucene that limits the returned fields to fields
with hits only?

Thanks in advance,

Andreas



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 19:00:15 2007
Return-Path: <java-user-return-28233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27280 invoked from network); 23 May 2007 19:00:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 19:00:13 -0000
Received: (qmail 69228 invoked by uid 500); 23 May 2007 19:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69194 invoked by uid 500); 23 May 2007 19:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69175 invoked by uid 99); 23 May 2007 19:00:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 12:00:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 11:59:58 -0700
Received: by ug-out-1314.google.com with SMTP id m2so250394uge
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 11:59:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NlSP74h+kzBBuN2pFnO2eAlXa8CueDyVwlrYsDWNcYIt9gaZGdp8dOvCtBXx7xcZ8gFSo5gb4cu2bTIqWUc1dvzkWQZ3PV6D8aYF2FY9Flup+VKYD49fqV1shALGSdzoXZZjOfQ3yOr9gQhfvs5O3KXu4nLXkaqRcbP82VP+aa0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hd2uZyJqS8ArMzGFRxUDv0SSw8oW8OEp7fxBp7rwRadL3uKelmNUnUVxqb3jiOH7+MEd9klGnP6Os+Kl8l/zB+2OkduHfsFzDIXfQNI62AUT9ux85C72gAEm3dQ5YpVeEILzTsNMeylwPqWVaeiFPVmeBxQhoxN/RPIUe8CysbI=
Received: by 10.82.191.3 with SMTP id o3mr1711246buf.1179946775826;
        Wed, 23 May 2007 11:59:35 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 23 May 2007 11:59:35 -0700 (PDT)
Message-ID: <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
Date: Wed, 23 May 2007 14:59:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77392_16335931.1179946775781"
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77392_16335931.1179946775781
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As luck would have it, I've done something very similar. What I had
to do is index a special token at the end of each page. Then I could
get the term offsets for each page....

Then I used one of the SpanQuery.getSpans to get all of the
offsets of the hits throughout all of the pages.

now I have a list of all the offsets of the *last* term on each
page and a list of the offsets of the hits. From these two
lists I can know which pages have hits.


Best
Erick

On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Hi,
>
> If a search returns a document that has multiple fields with the same
> name, is there a way to filter only those fields that contain hits?
>
>
> Background:
>
> I am indexing documents and we store all content in our index for
> display reasons.  We want to show only those pages containing hits.  My
> first implementation was saving each page in a Lucene document.  For
> performance reasons why are now looking into indexing the complete
> indexed document as a single Lucene document.
>
> Every page is added to a field in the Lucene document named
> page-content.  That means I am ending with as many fields named
> page-content as the document has pages.
>
> My search now returns me a single Lucene document in contrary to my
> first approach with page per Lucene document.  My problem right now is:
> how can I limit the returned page-contents fields for pages to those
> field entries that contain hits.  If I have hits on pages five pages
> from a document with 10 pages I would like to have only the pages with
> the hits, not all.
>
> Is there anything in Lucene that limits the returned fields to fields
> with hits only?
>
> Thanks in advance,
>
> Andreas
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77392_16335931.1179946775781--

From java-user-return-28234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 19:53:21 2007
Return-Path: <java-user-return-28234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51800 invoked from network); 23 May 2007 19:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 19:53:20 -0000
Received: (qmail 83361 invoked by uid 500); 23 May 2007 19:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82999 invoked by uid 500); 23 May 2007 19:53:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82987 invoked by uid 99); 23 May 2007 19:53:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 12:53:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.56.150.16] (HELO mail.globaldesigns.ca) (64.56.150.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 12:53:08 -0700
Received: from 192.168.0.100 [72.29.233.189] by mail.globaldesigns.ca with ESMTP
  (SMTPD-8.22) id AB8F0298; Wed, 23 May 2007 13:52:47 -0600
Subject: Who has sample code of remote multiple servers multiple indexes
	searching?
From: "Su.Cheng" <su.cheng@playstarmusic.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Wed, 23 May 2007 13:52:47 -0600
Message-Id: <1179949967.26630.6.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.2 (2.0.2-8) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I studied "5.6 Searching across multiple Lucene indexes 178" in <<Lucene
in action>>.

I have 2 remote serarch computers(SearchServer) work as index servers
and search requests from a search client(SearchClient,the 3rd
computer). 

An error message, "Exception in thread "main"
java.rmi.UnmarshalException", was thrown out.

Does someone can explain with sample code about multiple-index servers
and multiple indexes in single server?

Thanks.

Below are the source code:
////////////////SearchServer.java/////////////////////
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.ParallelMultiSearcher;
import org.apache.lucene.search.RemoteSearchable;
import org.apache.lucene.search.Searchable;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.MultiSearcher;

import java.io.File;
import java.io.IOException;
import java.rmi.Naming;
import java.rmi.registry.LocateRegistry;

public class SearchServer {
  private static final String m_disk1="/usr/local/eBingBong/"; //English
  private static final String m_disk2="/backup/eBingBong/"; //other
languages
  private static Searchable []m_searchables;

  public static void main(String[] args) throws Exception {
    if (args.length != 1) {
      System.err.println("Usage: SearchServer <IP>");
      System.err.println("java -Xms1000m -Xmx2000m SearchServer 161");
      System.exit(-1);
    }

    FindIndex();
    
    LocateRegistry.createRegistry(1099);

    Searcher multiSearcher = new MultiSearcher(m_searchables);
    RemoteSearchable multiImpl = new RemoteSearchable(multiSearcher);
    //Naming.rebind("//192.168.10.175/LIA_Multi", multiImpl);
    Naming.rebind("//192.168.10." +args[0] + "/LIA_Multi", multiImpl);

    Searcher parallelSearcher = new ParallelMultiSearcher
(m_searchables);
    RemoteSearchable parallelImpl = new RemoteSearchable
(parallelSearcher);
    //Naming.rebind("//192.168.10.175/LIA_Parallel", parallelImpl);
    Naming.rebind("//192.168.10." + args[0] + "/LIA_Parallel",
parallelImpl);

    System.out.println("Server started");
  }
  private static void FindIndex()
    {
    File   []file=new File[10];
    File tmpFile;
    int i=0;

    tmpFile=new File(m_disk1,"english");  if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"chinese");  if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"japanese"); if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"korean");   if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"czech");    if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"german");   if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"greek");    if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"french");   if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"dutch");    if(tmpFile.exists()) file[i+
+]=tmpFile;
    tmpFile=new File(m_disk2,"russian");  if(tmpFile.exists()) file[i+
+]=tmpFile;
    
    m_searchables = new Searchable[i];
    for (int j = 0; j < i; j++) 
      {
      try
      {
      m_searchables[j] = new IndexSearcher(file[j].getAbsolutePath());
      }
      catch(IOException e) {}
      System.out.println(file[j].getAbsolutePath());
      }

    }
  }
/////////////////////////SearchClient.java///////////////////////
import org.apache.lucene.document.Document;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.MultiSearcher;
import org.apache.lucene.search.ParallelMultiSearcher;
import org.apache.lucene.search.Searchable;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.search.Query;
import org.apache.lucene.queryParser.QueryParser;

import java.rmi.Naming;
import java.util.Date;
import java.util.HashMap;

public class SearchClient {
  private static HashMap searcherCache = new HashMap();
  private static String[] m_args;

  public static void main(String[] args) throws Exception {
    m_args=args;
    if (args.length < 2) {
      System.err.println("Usage: SearchClient <query> <IP1> <IP2>
<...>");
      System.err.println("java -Xms1000m -Xmx2000m SearchClient oil 161
163");
      System.exit(-1);
    }

    String word = args[0];

    // warm up the VM with several of each search
    for (int i=0; i < 5; i++) {
      search("LIA_Multi", word);
      search("LIA_Parallel", word);
    }
  }

  private static void search(String name, String word)
      throws Exception {
    //TermQuery query = new TermQuery(new Term("contents",
word));//content //contents
    QueryParser parser=new QueryParser("content",new StandardAnalyzer
());
    //parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
    parser.setDefaultOperator(QueryParser.AND_OPERATOR);
    Query  query = parser.parse(word);
    System.out.println(query.toString());        

    //MultiSearcher searcher =   (MultiSearcher) searcherCache.get
(name);
    ParallelMultiSearcher searcher =   (ParallelMultiSearcher)
searcherCache.get(name);

    if (searcher == null) 
    {
    int serverSum=m_args.length-1;
    Searchable []remoteSearch=new Searchable[serverSum];
    //remoteSearch[0]=lookupRemote("//192.168.10.156/",name);
    //remoteSearch[1]=lookupRemote("//192.168.10.175/",name);
    for(int suc=0; suc<serverSum; suc++) remoteSearch[suc]=lookupRemote
("//192.168.10."+m_args[suc+1]+"/",name);

    //searcher = new MultiSearcher(remoteSearch);
    searcher = new ParallelMultiSearcher(remoteSearch);
    searcherCache.put(name, searcher);
    }    

    long begin = new Date().getTime();
    Hits hits = searcher.search(query);
    long end = new Date().getTime();

    System.out.println("Searched " + name +
        " for '" + word + "' (" + (end - begin) + " ms): ");

    if (hits.length() == 0) {
      System.out.print("<NONE FOUND>");
      return;
    }
    else System.out.println("hit="+hits.length());

    //for (int i = 0; i < hits.length(); i++) {
    for (int i = 0; i < 3; i++) {
      Document doc = hits.doc(i); //java.io.InvalidClassException:
org.apache.lucene.document.Document;
      
	//String[] values = doc.getValues("syn");
      //for (int j = 0; j < values.length; j++) {
        //System.out.print(values[j] + " ");
	
	System.out.println(doc.get("url")+"\n");	
      
    }
    System.out.println(hits.length());
    //System.out.println();

    // DO NOT CLOSE searcher!
  }

  private static Searchable lookupRemote(String IP, String name)
      throws Exception {
    return (Searchable) Naming.lookup(IP + name);
  }
}

-- 
Su.Cheng <su.cheng@playstarmusic.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 20:30:07 2007
Return-Path: <java-user-return-28235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69989 invoked from network); 23 May 2007 20:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 20:30:06 -0000
Received: (qmail 91763 invoked by uid 500); 23 May 2007 20:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91724 invoked by uid 500); 23 May 2007 20:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91711 invoked by uid 99); 23 May 2007 20:30:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 13:30:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 13:29:56 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 23 May 2007 13:29:35 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to filter fields with hits from result set
Date: Wed, 23 May 2007 13:29:37 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com>
In-Reply-To: <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to filter fields with hits from result set
Thread-Index: AcedbJdEK2z0N273TEOXeE93UPJ7VAACi2rg
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com> <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 May 2007 20:29:35.0253 (UTC) FILETIME=[13D2BC50:01C79D79]
X-Virus-Checked: Checked by ClamAV on apache.org

Eric,

Thank you very much for your response.  That sounds very interesting.
Let me do some experimenting to see if I fully understood your solution.
Otherwise I have to come back to you with more questions.

Andreas


=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, May 23, 2007 12:00 PM
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set

As luck would have it, I've done something very similar. What I had
to do is index a special token at the end of each page. Then I could
get the term offsets for each page....

Then I used one of the SpanQuery.getSpans to get all of the
offsets of the hits throughout all of the pages.

now I have a list of all the offsets of the *last* term on each
page and a list of the offsets of the hits. From these two
lists I can know which pages have hits.


Best
Erick

On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Hi,
>
> If a search returns a document that has multiple fields with the same
> name, is there a way to filter only those fields that contain hits?
>
>
> Background:
>
> I am indexing documents and we store all content in our index for
> display reasons.  We want to show only those pages containing hits.
My
> first implementation was saving each page in a Lucene document.  For
> performance reasons why are now looking into indexing the complete
> indexed document as a single Lucene document.
>
> Every page is added to a field in the Lucene document named
> page-content.  That means I am ending with as many fields named
> page-content as the document has pages.
>
> My search now returns me a single Lucene document in contrary to my
> first approach with page per Lucene document.  My problem right now
is:
> how can I limit the returned page-contents fields for pages to those
> field entries that contain hits.  If I have hits on pages five pages
> from a document with 10 pages I would like to have only the pages with
> the hits, not all.
>
> Is there anything in Lucene that limits the returned fields to fields
> with hits only?
>
> Thanks in advance,
>
> Andreas
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 23 21:05:23 2007
Return-Path: <java-user-return-28236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85579 invoked from network); 23 May 2007 21:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 May 2007 21:05:22 -0000
Received: (qmail 51275 invoked by uid 500); 23 May 2007 21:05:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50986 invoked by uid 500); 23 May 2007 21:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50975 invoked by uid 99); 23 May 2007 21:05:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 14:05:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 14:05:13 -0700
Received: by mu-out-0910.google.com with SMTP id i10so250444mue
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 14:04:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kPu7ltzJAh+6lFxQOD2l3/AJfgrvrbTJXqVCPaxhdivNYpI4es9wsHm9i5tSdjMGmZFW26TFJ/Zvf32WlYB0Ewp/PcjB0bGmUxu+qK2de46QQGQMT5ntHztSoTXCdjIaWMSzf0oqecCQuO+qh1itWqN4YUCdrGz91BWz9NneYyo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pz1FHB3EhH3NioKWZ4e2m4iduAuTf+o1cPwvvnVVzihU8y7Fz/twF6onpeFAD/j0yfVvNyi4nBirQc7ST+/rC6bLHaHPNaXkbJY4Jr6QQjAXUDP5DF+atL2zsPvs6R3CfiPh2QWYnfa8WYGZ4zEP6bDF0+XdugXJHEEzZbCmnI0=
Received: by 10.82.136.4 with SMTP id j4mr1861000bud.1179954291352;
        Wed, 23 May 2007 14:04:51 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Wed, 23 May 2007 14:04:51 -0700 (PDT)
Message-ID: <359a92830705231404r25c65202lf0339e25333847c5@mail.gmail.com>
Date: Wed, 23 May 2007 17:04:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78297_15729705.1179954291074"
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
	 <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78297_15729705.1179954291074
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Two things to watch...

1> Think about indexing the special page-end token with an
increment gap of 0 (see SynonymAnalyzer in Lucene In
Action). That preserves the sense of phrases across
page breaks.

2> Assembling the span query is tricky. Search the mail archive
for SpanQuery to see an exchange I had with the originator of
this concept. Suffice it to say that converting an ad-hoc query
into a set of SpanQueries is not trivial, but it certainly is do-able.
But you'd have a much easier time of it if you were able to
control the queries and dis-allow ad-hoc queries. It all depends
upon the requirements of the application. Any time you can
avoid supporting arbitrary boolean logic for the user input, your
job is easier <G>....

But you should be able to run up a demo with simple queries that
you control to prove out the methodology in any case.....

Best
Erick


On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Eric,
>
> Thank you very much for your response.  That sounds very interesting.
> Let me do some experimenting to see if I fully understood your solution.
> Otherwise I have to come back to you with more questions.
>
> Andreas
>
>
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, May 23, 2007 12:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to filter fields with hits from result set
>
> As luck would have it, I've done something very similar. What I had
> to do is index a special token at the end of each page. Then I could
> get the term offsets for each page....
>
> Then I used one of the SpanQuery.getSpans to get all of the
> offsets of the hits throughout all of the pages.
>
> now I have a list of all the offsets of the *last* term on each
> page and a list of the offsets of the hits. From these two
> lists I can know which pages have hits.
>
>
> Best
> Erick
>
> On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> >
> > Hi,
> >
> > If a search returns a document that has multiple fields with the same
> > name, is there a way to filter only those fields that contain hits?
> >
> >
> > Background:
> >
> > I am indexing documents and we store all content in our index for
> > display reasons.  We want to show only those pages containing hits.
> My
> > first implementation was saving each page in a Lucene document.  For
> > performance reasons why are now looking into indexing the complete
> > indexed document as a single Lucene document.
> >
> > Every page is added to a field in the Lucene document named
> > page-content.  That means I am ending with as many fields named
> > page-content as the document has pages.
> >
> > My search now returns me a single Lucene document in contrary to my
> > first approach with page per Lucene document.  My problem right now
> is:
> > how can I limit the returned page-contents fields for pages to those
> > field entries that contain hits.  If I have hits on pages five pages
> > from a document with 10 pages I would like to have only the pages with
> > the hits, not all.
> >
> > Is there anything in Lucene that limits the returned fields to fields
> > with hits only?
> >
> > Thanks in advance,
> >
> > Andreas
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78297_15729705.1179954291074--

From java-user-return-28237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 01:59:46 2007
Return-Path: <java-user-return-28237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5323 invoked from network); 24 May 2007 01:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 01:59:44 -0000
Received: (qmail 75796 invoked by uid 500); 24 May 2007 01:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75747 invoked by uid 500); 24 May 2007 01:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75736 invoked by uid 99); 24 May 2007 01:59:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 18:59:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mitiaguin@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 18:59:35 -0700
Received: by nz-out-0506.google.com with SMTP id i1so382190nzh
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 18:59:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FbuwXDT76QWbqVkasuwWTfegpxAfSfLJUbfdwHOU1WT4jiRZOeU1+IhLTfPPG5ETeMufdDdi3bWspgmileT8VYJXnhwy9oNQQM6oXdOx0kmew4xPD8tAOF4OxudajsaGzmH586k2Dr3hO82Ps+82lNM30OtW0362Ete1KutahkA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=h7/q23Sqvr24YmMSAuGxw1RbvFEtlAkmEUEJ7GesXRnF3jQhJdyI84UAQ66BUtLb5AIaQGoSxKFTuTI77PSe0XhLlKWN8zw3665MoECpcmPMcpFDtxEdubGDAn9Vhww+jXNyC1KJI05hizYKlMQQxCRPtPPefp1+86u/th6ujm8=
Received: by 10.65.133.8 with SMTP id k8mr2446043qbn.1179971954637;
        Wed, 23 May 2007 18:59:14 -0700 (PDT)
Received: by 10.64.199.7 with HTTP; Wed, 23 May 2007 18:59:14 -0700 (PDT)
Message-ID: <cc7a2340705231859x7a55063ax39c23236bad7a3c5@mail.gmail.com>
Date: Thu, 24 May 2007 11:59:14 +1000
From: "Michael Mitiaguin" <mitiaguin@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighting fast and highlighting all text
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I browsed this list and contributions and have a difficulty to
determine whether there is anything which may be used
straightforwardly to highlight all hits ( no fragmenting ) for large
chunk of text. Probably my query should be sent as 3 separate ones :

1. The fastest possible  fragment highlighting ( let's say if we
indexed memo  fields from database ) and   100 records in a hitlist ,
we want to show hilite fragments for each record in a table ( grid ,
html table ).
2. Upon selecting a row with a fragment we show a full text with all
highlights somewhere else.

For 1. and 2.  for phrase searches separate words are excluded from
highlighting.

Does contribution exist which I may use to achieve all my requirements
?  My project in .Net so I have to port a contribution first which is
why I am asking for the most suitable contribution for my needs before
embarking on porting.

TIA
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 03:31:08 2007
Return-Path: <java-user-return-28238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24444 invoked from network); 24 May 2007 03:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 03:31:06 -0000
Received: (qmail 69932 invoked by uid 500); 24 May 2007 03:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69665 invoked by uid 500); 24 May 2007 03:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69654 invoked by uid 99); 24 May 2007 03:31:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 20:31:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 20:31:00 -0700
Received: by wr-out-0506.google.com with SMTP id 36so142033wra
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 20:30:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=AiVfvQN18DiUqdVWsJ56zrSWNgM9XWXAyJtKc0xjtfIKDjwuAx+bgOzw4h7HsN3GIqfmONk8m3lfaG48DyiHuUvkAOFj/51HEQyZIF7A5c5tCM2OQqQHUSoHPczD9n3tbZv+59hqe6k30dVprihjMUumSRG+228afzGyK3gGldk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=CZOkICjVX7jslqkvcPTijxOufs4Fw2crPzeS6saUuNdBiSCfRHa9sD9f2YNQcnBN5H6gjzxhCL8Bw6GMAqZhou4pxq/msoF9zTeaIOIAlDO+IHqxXkG3QDRVZIaK7qcSV/EYAxnnG+aeO08AMceuE0Q1ZDMx1/RRmwdmh/eLwCA=
Received: by 10.114.205.1 with SMTP id c1mr637032wag.1179977438608;
        Wed, 23 May 2007 20:30:38 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Wed, 23 May 2007 20:30:38 -0700 (PDT)
Message-ID: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
Date: Thu, 24 May 2007 00:30:38 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: HitCollector or Hits
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_136246_25712316.1179977438567"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_136246_25712316.1179977438567
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

I need to collect some global information from my first 1000 search results
in order to build up some search refining components containing only
relevant values (those which correspond to at least one of the first 1000
hits). For example, the results are products and there is a store filter
component that shows only the stores that sells a product between the first
1000 hits. So even if the user sees just the first 20, I would have to
inspect the first 1000. I've read that Hits mantains a cache of about 100 or
200 hits. Is this configurable? If I could set this cache to 1000 I would
then use Hits to browse the search results. Another way, I should use
HitCollector. What's your advice?

TIA
Cheers,
Carlos

------=_Part_136246_25712316.1179977438567--

From java-user-return-28239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 04:03:51 2007
Return-Path: <java-user-return-28239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30990 invoked from network); 24 May 2007 04:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 04:03:49 -0000
Received: (qmail 7546 invoked by uid 500); 24 May 2007 04:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7514 invoked by uid 500); 24 May 2007 04:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7503 invoked by uid 99); 24 May 2007 04:03:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 21:03:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mitiaguin@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 21:03:40 -0700
Received: by nz-out-0506.google.com with SMTP id i1so403067nzh
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 21:03:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=urBJjPuYQE3O8RcKucrcg1fZWbozc6InLacrS0ux4bDvYN40bBfsuvPikIcjls1d+Z6tdbSaUoO50+rVL2weLZdUraDT7aLDyPUqYqffO+H0vgn2F8vzGumITPBom/vTHneqRmH3tngAol78JTkzzLHdSlBbh5VDVrKJp0r5BB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=pCFdHO+COk8GIFchYrk8M0ty6/vWMOp/pPOqXTKRDuAsLHNLDBoBDg+0JzEPt+ITqbgt6W9xtsnLa3i09DPQRbRxpZv86h47uyhaG7U51qYz4ULVpMOQ3W0zlw8ji5QBCJUZN4xSOG0umzArRYhcJajP+y0n52NzUmBB4p3MXG8=
Received: by 10.64.250.7 with SMTP id x7mr2542139qbh.1179979400163;
        Wed, 23 May 2007 21:03:20 -0700 (PDT)
Received: by 10.64.199.7 with HTTP; Wed, 23 May 2007 21:03:20 -0700 (PDT)
Message-ID: <cc7a2340705232103u4ef4e5b0k114448a1fb60ae54@mail.gmail.com>
Date: Thu, 24 May 2007 14:03:20 +1000
From: "Michael Mitiaguin" <mitiaguin@gmail.com>
To: java-user@lucene.apache.org
Subject: WITH_POSITIONS_OFFSETS versus WITH_OFFSETS
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

What practical of using  WITH_POSITIONS_OFFSETS ? Aren't  WITH_OFFSETS
sufficient and if iterate getStartOffset effectively gives the value
from array element of  getTermPositions ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 05:31:33 2007
Return-Path: <java-user-return-28240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51028 invoked from network); 24 May 2007 05:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 05:31:32 -0000
Received: (qmail 24480 invoked by uid 500); 24 May 2007 05:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24080 invoked by uid 500); 24 May 2007 05:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24069 invoked by uid 99); 24 May 2007 05:31:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:31:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of huajing_ave@hotmail.com designates 65.54.246.222 as permitted sender)
Received: from [65.54.246.222] (HELO bay0-omc3-s22.bay0.hotmail.com) (65.54.246.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:31:22 -0700
Received: from hotmail.com ([64.4.17.92]) by bay0-omc3-s22.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 23 May 2007 22:31:02 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 23 May 2007 22:31:02 -0700
Message-ID: <BAY111-DAV20E97769AD893F94D5A48D94340@phx.gbl>
Received: from 207.46.92.19 by BAY111-DAV20.phx.gbl with DAV;
	Thu, 24 May 2007 05:30:59 +0000
X-Originating-IP: [207.46.92.19]
X-Originating-Email: [huajing_ave@hotmail.com]
X-Sender: huajing_ave@hotmail.com
From: "Huajing Li" <Huajing_Ave@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Integrate Lucene search facilities with existing databases
Date: Thu, 24 May 2007 13:31:00 +0800
Message-ID: <000c01c79dc4$b6ab9f00$2402dd00$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000D_01C79E07.C4CEDF00"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcedxLZMKxlMc2F4T3OKa4434PZ3wg==
Content-Language: en-us
X-OriginalArrivalTime: 24 May 2007 05:31:02.0222 (UTC) FILETIME=[B790CEE0:01C79DC4]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000D_01C79E07.C4CEDF00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

 

I am working on an application that must deal with ranking on highly dynamic
metadata. For example, suppose I want to provide ranking based on the number
of downloads of hit documents. A user may log-in to the system and send a
query, which will be answered by Lucene in a traditional way. The relevant
documents will be scored and ranked, based on default Lucene scoring
functions. In addition, the system wants to support users with the
"popularity" ranking facility. The number of downloads for a document may
continue to increase, even during a query. It will incur much overhead if we
put the "popularity" as a field in the Lucene index (delete and insert the
document when an update happens). Instead, we choose to store such
information in a database, with document identifiers linking database
records back to the index.

 

This setting, however, creates a ranking problem. It is not efficient to
send each hit document identifier to the database as a SQL query to obtain
the download popularity information. It will be good to have the mechanism
to link database records directly with Lucene indices, for which a query can
retrieve corresponding records from the database at the querying time. We
are very interested to know if there is some open source toolkits or
libraries to do the dirty-works. Of course, we also want to know other
alternative solutions to meet our ends.

 

 

Best Regards,

 

Joaquin


------=_NextPart_000_000D_01C79E07.C4CEDF00--


From java-user-return-28241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 05:33:14 2007
Return-Path: <java-user-return-28241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52189 invoked from network); 24 May 2007 05:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 05:33:13 -0000
Received: (qmail 29546 invoked by uid 500); 24 May 2007 05:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29511 invoked by uid 500); 24 May 2007 05:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29500 invoked by uid 99); 24 May 2007 05:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:33:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:33:05 -0700
Received: by an-out-0708.google.com with SMTP id b20so3810ana
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 22:32:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HWf/nmNv/6RGJ9lWVQB/cpNTOyR0H2EFZO+XJYQ5nSR2Fne8Uvo6i3X55Th+AS8gSkgE9GOv5vvMDoUpQSsGebtZ88NipoDnM4M2qld1zA4g5MMc1nrTPgKAVSDsnvJsNMbOXAKtMbnZIAvrN7cHPMxplFuVMcRSckbzmHXifhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=niIdbp6Ykp6JjZJnyJbGNtYrodDC/TinpMqN1hT8ysYxFjBGfNRgpuAyRI2F2MPuDtASkkULsYFy1KlNJioHcgWHtjM7oRB5Ew/DMpSRzoFMQkVHXKgBkbYtApB4nPvdGbERju1xVHsVdJKULiG1P9DvXOFzQsspEuAflpagYz8=
Received: by 10.100.40.17 with SMTP id n17mr1274449ann.1179984763648;
        Wed, 23 May 2007 22:32:43 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Wed, 23 May 2007 22:32:43 -0700 (PDT)
Message-ID: <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
Date: Thu, 24 May 2007 09:02:43 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
In-Reply-To: <4654747C.80005@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_136982_3965034.1179984763619"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <465303E2.6020802@syr.edu>
	 <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
	 <4654747C.80005@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_136982_3965034.1179984763619
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Steven
Thank you so much for your thorough comments about Analyzer

I write that class a couple of months ago, now I take a look at my
customized Analyzer

the only change I've made as follows:

the original class has this method:
protected boolean isTokenChar(char c) {
    return !Character.isWhitespace(c);
}

And my class override that method as this:

protected boolean isTokenChar(char c) {
    return !((int)c==32);
}


I think the Character.isWhitespace consider the unicodes as space :))
so everything will mess up.

what do you think?

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_136982_3965034.1179984763619--

From java-user-return-28242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 05:35:13 2007
Return-Path: <java-user-return-28242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54003 invoked from network); 24 May 2007 05:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 05:35:12 -0000
Received: (qmail 37979 invoked by uid 500); 24 May 2007 05:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37943 invoked by uid 500); 24 May 2007 05:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37932 invoked by uid 99); 24 May 2007 05:35:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:35:10 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 22:35:04 -0700
Received: by an-out-0708.google.com with SMTP id b20so3882ana
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 22:34:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qjjq9macOn9qVAYfncOsat8l9e/4CRNHFLQCyWlOvpZVHI0buBy7XiZOjUNuZGwop1HVQy1ry+Pe8Z1ClULaeAJMSKjW64oIk4waek9X+ontJFMa/nhowxdUOugVwjeP/mvKXnvviKVStf6XIrbXYWp6iwFpP1QO3rRjTvY09xE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E0Zpk80dkIm2kNU3/CI3UQsy6Bg7xdrd6vZ7HwKAvGMQhs0MXRA25QGAQGl8vu6N2IKRk3YGOp08S/iz8iOxf6lqyfE3EPRrp6afwuT50w7pZCtguFOhNSstlvVoJpMf5u5f8ZQvLrnYncQTfdHVge9/rb1F5oSXo+74lBsgWbk=
Received: by 10.100.197.15 with SMTP id u15mr1274555anf.1179984883471;
        Wed, 23 May 2007 22:34:43 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Wed, 23 May 2007 22:34:43 -0700 (PDT)
Message-ID: <34b8543c0705232234w1f54d71fl71ddfb3edb38a66b@mail.gmail.com>
Date: Thu, 24 May 2007 09:04:43 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
In-Reply-To: <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_136998_7204080.1179984883427"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <465303E2.6020802@syr.edu>
	 <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
	 <4654747C.80005@syr.edu>
	 <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_136998_7204080.1179984883427
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry Steven
that change is in WhitespaceTokenizer not WhiteSpaceAnalyzer but in Analyzer
I had to call the tokenizer



On 5/24/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi Steven
> Thank you so much for your thorough comments about Analyzer
>
> I write that class a couple of months ago, now I take a look at my
> customized Analyzer
>
> the only change I've made as follows:
>
> the original class has this method:
> protected boolean isTokenChar(char c) {
>     return !Character.isWhitespace(c);
> }
>
> And my class override that method as this:
>
> protected boolean isTokenChar(char c) {
>     return !((int)c==32);
> }
>
>
> I think the Character.isWhitespace consider the unicodes as space :))
> so everything will mess up.
>
> what do you think?
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/




-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_136998_7204080.1179984883427--

From java-user-return-28243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 06:21:05 2007
Return-Path: <java-user-return-28243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67447 invoked from network); 24 May 2007 06:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 06:20:53 -0000
Received: (qmail 97225 invoked by uid 500); 24 May 2007 06:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96881 invoked by uid 500); 24 May 2007 06:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96865 invoked by uid 99); 24 May 2007 06:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:20:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:20:44 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4O6KM6Y170982
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 06:20:22 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4O6KMK13498120
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 08:20:22 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4O6KMP8004404
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 08:20:22 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4O6KM83004396
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 08:20:22 +0200
In-Reply-To: <000c01c79dc4$b6ab9f00$2402dd00$@com>
Subject: Re: Integrate Lucene search facilities with existing databases
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF15357746.23D92CC4-ON882572E5.0021127F-882572E5.0022A48B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 23 May 2007 23:18:23 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/05/2007 09:20:21
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Huajing Li wrote:

> I am working on an application that must deal with ranking on highly
dynamic
> metadata. For example, suppose I want to provide ranking based on the
number
> of downloads of hit documents. A user may log-in to the system and send a
> query, which will be answered by Lucene in a traditional way. The
relevant
> documents will be scored and ranked, based on default Lucene scoring
> functions. In addition, the system wants to support users with the
> "popularity" ranking facility. The number of downloads for a document may
> continue to increase, even during a query. It will incur much overhead if
we
> put the "popularity" as a field in the Lucene index (delete and insert
the
> document when an update happens). Instead, we choose to store such
> information in a database, with document identifiers linking database
> records back to the index.
>
>
>
> This setting, however, creates a ranking problem. It is not efficient to
> send each hit document identifier to the database as a SQL query to
obtain
> the download popularity information. It will be good to have the
mechanism
> to link database records directly with Lucene indices, for which a query
can
> retrieve corresponding records from the database at the querying time. We
> are very interested to know if there is some open source toolkits or
> libraries to do the dirty-works. Of course, we also want to know other
> alternative solutions to meet our ends.

The problem seems to map to "function query" - Lucene-446.
With that patch, you could create a ValueSourceQuery, based on these
external
values, and then combine it into the score of another (any) query using
CustomScoreQuery. You can override the customScore() method to combine the
scores as fits your needs.

There is one catch though - that approach assumes that values obtained from
the ValueSource match Lucene's internal docids. I think this aspect is
going
to be an issue in any solution that combines external values into the
scoring
process. If your system does not delete documents (or if you are using the
patch from LUCENE-879 (which I didn't try yet)), and, you maintain the
order
by which docs are added, this may work for you.

HTH,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 06:36:24 2007
Return-Path: <java-user-return-28244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75287 invoked from network); 24 May 2007 06:36:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 06:36:23 -0000
Received: (qmail 24181 invoked by uid 500); 24 May 2007 06:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23928 invoked by uid 500); 24 May 2007 06:36:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23917 invoked by uid 99); 24 May 2007 06:36:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:36:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:36:14 -0700
Received: by nz-out-0506.google.com with SMTP id i1so428552nzh
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 23:35:53 -0700 (PDT)
Received: by 10.114.39.16 with SMTP id m16mr732284wam.1179988553120;
        Wed, 23 May 2007 23:35:53 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 23 May 2007 23:35:53 -0700 (PDT)
Message-ID: <1324e4e20705232335uec88b1ch4bb596e8ea3eae6f@mail.gmail.com>
Date: Thu, 24 May 2007 12:05:53 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Lock obtain timed exception
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101716_31992364.1179988553062"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101716_31992364.1179988553062
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

I am getting Lock obtain timed exception while Searching in Index.

My Steps: I have created a Lucene Index at first week of may 2007, after
that I have nothing changed in index folder. Just I am searching. Searcher
code have only MultiSearcher. BUT now I am getting "Lock obtain timed out
exception", I saw in temp folder there was one lock file exists "
lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<exists@MinalyzerLite.MDS\lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
"

Is MultiSearcher created lock file? or any other issue ?

Please suggest me..

I am using Lucene 2.0.

-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_101716_31992364.1179988553062--

From java-user-return-28245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 06:38:44 2007
Return-Path: <java-user-return-28245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75771 invoked from network); 24 May 2007 06:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 06:38:42 -0000
Received: (qmail 27893 invoked by uid 500); 24 May 2007 06:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27834 invoked by uid 500); 24 May 2007 06:38:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27818 invoked by uid 99); 24 May 2007 06:38:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:38:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 May 2007 23:38:20 -0700
Received: by nz-out-0506.google.com with SMTP id i1so428947nzh
        for <java-user@lucene.apache.org>; Wed, 23 May 2007 23:37:59 -0700 (PDT)
Received: by 10.114.37.1 with SMTP id k1mr750894wak.1179988678921;
        Wed, 23 May 2007 23:37:58 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 23 May 2007 23:37:58 -0700 (PDT)
Message-ID: <1324e4e20705232337oe8b9d14k12f241f777f08075@mail.gmail.com>
Date: Thu, 24 May 2007 12:07:58 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Re: Lock obtain timed exception
In-Reply-To: <1324e4e20705232335uec88b1ch4bb596e8ea3eae6f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101744_31801929.1179988678643"
References: <1324e4e20705232335uec88b1ch4bb596e8ea3eae6f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101744_31801929.1179988678643
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lock obtain timed out: java.io.IOException: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\<Lock@C:%5CWINDOWS%5CTEMP%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<exists@MinalyzerLite.MDS%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock><Lock@C:%5CWINDOWS%5CTEMP%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>


On 5/24/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> Hello everyone,
>
> I am getting Lock obtain timed exception while Searching in Index.
>
> My Steps: I have created a Lucene Index at first week of may 2007, after
> that I have nothing changed in index folder. Just I am searching. Searcher
> code have only MultiSearcher. BUT now I am getting "Lock obtain timed out
> exception", I saw in temp folder there was one lock file exists "
> lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<exists@MinalyzerLite.MDS%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
> "
>
> Is MultiSearcher created lock file? or any other issue ?
>
> Please suggest me..
>
> I am using Lucene 2.0.
>
> --
> Thanks,
> Laxmilal menaria
>
> http://www.minalyzer.com/
> http://www.chambal.com/
>



-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_101744_31801929.1179988678643--

From java-user-return-28246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 07:39:17 2007
Return-Path: <java-user-return-28246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4581 invoked from network); 24 May 2007 07:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 07:39:16 -0000
Received: (qmail 44383 invoked by uid 500); 24 May 2007 07:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44352 invoked by uid 500); 24 May 2007 07:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44341 invoked by uid 99); 24 May 2007 07:39:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 00:39:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 00:39:07 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l4O7cic7047853
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:38:44 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200705240738.l4O7cic7047853@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: How to avoid score calculation completely?
Date: Thu, 24 May 2007 09:38:39 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <c68e39170705230953w96f47e6l5ca0a8e059b34959@mail.gmail.com>
x-mimeole: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcedWvljK6eRjdbuQUywn2WsYC8XUgAeutcw
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

But I also see importance of ignoring score calculation.

If you put it aside performance gain, is there any possibility to completely
ignore scoring calculation?

Jelda
> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf 
> Of Yonik Seeley
> Sent: Wednesday, May 23, 2007 6:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to avoid score calculation completely?
> 
> On 5/23/07, Zhang, Lisheng <Lisheng.Zhang@broadvision.com> wrote:
> > We have been using lucene for years and it serves us well.
> >
> > Sometimes when we issue a query, we only what to know how 
> many hits it 
> > leads, not want any docs back. Is it possible to completely avoid 
> > score calculation to get total count back?
> >
> > I understand score calculation needs a loop for all matched 
> docs, can 
> > we avoid the loop, surely this is for performance. We want 
> to achieve 
> > getting total count at O(1), independent of the number of Docs?
> 
> Calculating scores adds a low, fixed amount of overhead to 
> the matching logic.
> The savings would most likely not be that large.
> 
> For simple queries, it might be quickest to use TermDocs() to 
> iterate over the docs matching terms yourself.
> 
> Also, see Matcher in http://issues.apache.org/jira/browse/LUCENE-584
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 07:46:01 2007
Return-Path: <java-user-return-28247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7744 invoked from network); 24 May 2007 07:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 07:45:59 -0000
Received: (qmail 60025 invoked by uid 500); 24 May 2007 07:45:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59989 invoked by uid 500); 24 May 2007 07:45:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59978 invoked by uid 99); 24 May 2007 07:45:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 00:45:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 00:45:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 78E405B772; Thu, 24 May 2007 00:45:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6D6F17F403
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 00:45:31 -0700 (PDT)
Date: Thu, 24 May 2007 00:45:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
In-Reply-To: <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705240037000.11755@hal.rescomp.berkeley.edu>
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com> 
 <4652C220.7090505@ecomware.it>  <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
  <465303E2.6020802@syr.edu>  <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
  <4654747C.80005@syr.edu> <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:     return !Character.isWhitespace(c);

: And my class override that method as this:

:     return !((int)c==32);

in my opinion that's a pretty naive change ... it won't split on tab
characters or newlines ... even for trivial ASCII text that's probably not
what you want.

: I think the Character.isWhitespace consider the unicodes as space :))
: so everything will mess up.

every character in java is a unicode character, so your comment doesn't
really make sense to me ... the javadocs are very clear about the
definition of "whitesace" in java...

    * It is a Unicode space character (SPACE_SEPARATOR, LINE_SEPARATOR, or
      PARAGRAPH_SEPARATOR) but is not also a non-breaking space ('\u00A0',
      '\u2007', '\u202F').
    * It is '\u0009', HORIZONTAL TABULATION.
    * It is '\u000A', LINE FEED.
    * It is '\u000B', VERTICAL TABULATION.
    * It is '\u000C', FORM FEED.
    * It is '\u000D', CARRIAGE RETURN.
    * It is '\u001C', FILE SEPARATOR.
    * It is '\u001D', GROUP SEPARATOR.
    * It is '\u001E', RECORD SEPARATOR.
    * It is '\u001F', UNIT SEPARATOR.

...are there Persian characters with a category type of SPACE_SEPARATOR,
LINE_SEPARATOR, or PARAGRAPH_SEPARATOR ?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 09:06:37 2007
Return-Path: <java-user-return-28248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28255 invoked from network); 24 May 2007 09:06:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 09:06:35 -0000
Received: (qmail 83418 invoked by uid 500); 24 May 2007 09:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83292 invoked by uid 500); 24 May 2007 09:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83243 invoked by uid 99); 24 May 2007 09:06:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 02:06:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 02:06:17 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 2D68D221C80
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 05:05:56 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 24 May 2007 05:05:56 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 0E7871A2E1; Thu, 24 May 2007 05:05:56 -0400 (EDT)
Message-Id: <1179997556.18009.1191498961@webmail.messagingengine.com>
X-Sasl-Enc: VteJkUBj/MaFmKvVZLnb8LNF8L39gheqRW0RyK5y3WT3 1179997556
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <1324e4e20705232335uec88b1ch4bb596e8ea3eae6f@mail.gmail.com>
   <1324e4e20705232337oe8b9d14k12f241f777f08075@mail.gmail.com>
Subject: Re: Lock obtain timed exception
In-Reply-To: <1324e4e20705232337oe8b9d14k12f241f777f08075@mail.gmail.com>
Date: Thu, 24 May 2007 05:05:56 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Laxmilal Menaria" <lmenaria@chambal.com> wrote:

> > I am getting Lock obtain timed exception while Searching in Index.
> >
> > My Steps: I have created a Lucene Index at first week of may 2007, after
> > that I have nothing changed in index folder. Just I am searching. Searcher
> > code have only MultiSearcher. BUT now I am getting "Lock obtain timed out
> > exception", I saw in temp folder there was one lock file exists "
> > lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<exists@MinalyzerLite.MDS%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
> > "
> >
> > Is MultiSearcher created lock file? or any other issue ?
> >
> > Please suggest me..
> >
> > I am using Lucene 2.0.

Indeed, searchers do create the "commit" lock, but normally the commit
lock lifetime is very brief.  Most likely this leftover lock file
means that the JVM crashed or maybe there was an exception while a
searcher was initializing itself.  Is there any evidence that one of
these happened?

You should just remove that lock file an re-run things.  If it keeps
getting stuck then it would be good to get to the root cause.

Note that as of 2.1, Lucene no longer uses a commit lock at all.  This
makes searchers entirely read-only and prevents your issue from
occurring.  The write lock (created by IndexWriter) still remains but
is now stored by default in the index dir instead of the system's temp
dir.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 09:22:37 2007
Return-Path: <java-user-return-28249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33612 invoked from network); 24 May 2007 09:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 09:22:35 -0000
Received: (qmail 13008 invoked by uid 500); 24 May 2007 09:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12986 invoked by uid 500); 24 May 2007 09:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12975 invoked by uid 99); 24 May 2007 09:22:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 02:22:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 02:22:27 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1Hr9WH-0008U3-Os
	for java-user@lucene.apache.org; Thu, 24 May 2007 10:22:05 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l4O9M5RV032614
	for java-user@lucene.apache.org; Thu, 24 May 2007 10:22:05 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Thu, 24 May 2007 10:22:05 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Searching on a Rapidly changing Index
Message-ID: <20070524092205.GH5135@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

I've built a Lucene system that gets rapidly updated - documents are 
supposed to be searchable immeidately after they've been indexed.

As such I have a Writer that puts new index, update and delete tasks 
into a queue and then has a thread which consumes them and applies them 
to the index using one instance of an IndexModifier. So far so good.

However every new Search opens up a new IndexSearcher in order to make 
sure that it gets new documents. The docs indicate is a big 
performance penalty. 

Are there any tips or tricks I can use to mitigate this?

thanks,

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 11:07:27 2007
Return-Path: <java-user-return-28250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72187 invoked from network); 24 May 2007 11:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 11:07:26 -0000
Received: (qmail 36510 invoked by uid 500); 24 May 2007 11:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36395 invoked by uid 500); 24 May 2007 11:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36350 invoked by uid 99); 24 May 2007 11:07:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 04:07:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 04:07:11 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 500BC20F1A
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 04:06:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <cc7a2340705232103u4ef4e5b0k114448a1fb60ae54@mail.gmail.com>
References: <cc7a2340705232103u4ef4e5b0k114448a1fb60ae54@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8F166426-E9E6-4E08-A4A3-6BE74713069E@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: WITH_POSITIONS_OFFSETS versus WITH_OFFSETS
Date: Thu, 24 May 2007 07:05:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

WITH_OFFSETS gives the equivalent of Token.startOffset and  
Token.endOffset information which is the actual offset in the String  
(although it can be manipulated), while WITH_POSITIONS gives the  
position information (which can also be manipulated).  Position info  
tells where the token occurs relative to the other tokens, i.e. what  
order they occur in.

Using WITH_POSITIONS is in line with getTermPositions().

The practical use of using WITH_P_O is when you need both positions  
and offsets, I guess.  Maybe in highlighting or some advanced  
analysis cases.

HTH
-Grant

On May 24, 2007, at 12:03 AM, Michael Mitiaguin wrote:

> What practical of using  WITH_POSITIONS_OFFSETS ? Aren't  WITH_OFFSETS
> sufficient and if iterate getStartOffset effectively gives the value
> from array element of  getTermPositions ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 12:16:05 2007
Return-Path: <java-user-return-28251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98593 invoked from network); 24 May 2007 12:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 12:16:04 -0000
Received: (qmail 63772 invoked by uid 500); 24 May 2007 12:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63741 invoked by uid 500); 24 May 2007 12:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63730 invoked by uid 99); 24 May 2007 12:16:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 05:16:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 05:15:55 -0700
Received: by an-out-0708.google.com with SMTP id b20so27551ana
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 05:15:34 -0700 (PDT)
Received: by 10.114.174.2 with SMTP id w2mr854819wae.1180008933964;
        Thu, 24 May 2007 05:15:33 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Thu, 24 May 2007 05:15:33 -0700 (PDT)
Message-ID: <1324e4e20705240515l430f483ax63d2496a6e93f63f@mail.gmail.com>
Date: Thu, 24 May 2007 17:45:33 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Lock obtain timed exception
In-Reply-To: <1179997556.18009.1191498961@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104988_23703568.1180008933925"
References: <1324e4e20705232335uec88b1ch4bb596e8ea3eae6f@mail.gmail.com>
	 <1324e4e20705232337oe8b9d14k12f241f777f08075@mail.gmail.com>
	 <1179997556.18009.1191498961@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104988_23703568.1180008933925
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, I am getting the JVM crash exception in logs.

#
# An unexpected error has been detected by Java Runtime Environment:
#
# java.lang.OutOfMemoryError: requested 32756 bytes for ChunkPool::allocate.
Out of swap space?
#
#  Internal Error (414C4C4F434154494F4E0E4350500065), pid=25596, tid=90152
#
# Java VM: Java HotSpot(TM) Client VM (1.6.0_01-b06 mixed mode, sharing)
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#


On 5/24/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> "Laxmilal Menaria" <lmenaria@chambal.com> wrote:
>
> > > I am getting Lock obtain timed exception while Searching in Index.
> > >
> > > My Steps: I have created a Lucene Index at first week of may 2007,
> after
> > > that I have nothing changed in index folder. Just I am searching.
> Searcher
> > > code have only MultiSearcher. BUT now I am getting "Lock obtain timed
> out
> > > exception", I saw in temp folder there was one lock file exists "
> > > lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<
> exists@MinalyzerLite.MDS%5Clucene-
> 22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
> > > "
> > >
> > > Is MultiSearcher created lock file? or any other issue ?
> > >
> > > Please suggest me..
> > >
> > > I am using Lucene 2.0.
>
> Indeed, searchers do create the "commit" lock, but normally the commit
> lock lifetime is very brief.  Most likely this leftover lock file
> means that the JVM crashed or maybe there was an exception while a
> searcher was initializing itself.  Is there any evidence that one of
> these happened?
>
> You should just remove that lock file an re-run things.  If it keeps
> getting stuck then it would be good to get to the root cause.
>
> Note that as of 2.1, Lucene no longer uses a commit lock at all.  This
> makes searchers entirely read-only and prevents your issue from
> occurring.  The write lock (created by IndexWriter) still remains but
> is now stored by default in the index dir instead of the system's temp
> dir.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_104988_23703568.1180008933925--

From java-user-return-28252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 12:35:33 2007
Return-Path: <java-user-return-28252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8588 invoked from network); 24 May 2007 12:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 12:35:30 -0000
Received: (qmail 2075 invoked by uid 500); 24 May 2007 12:35:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2038 invoked by uid 500); 24 May 2007 12:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2027 invoked by uid 99); 24 May 2007 12:35:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 05:35:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.102.68] (HELO smtp105.plus.mail.re1.yahoo.com) (69.147.102.68)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 05:35:20 -0700
Received: (qmail 9251 invoked from network); 24 May 2007 12:34:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding;
  b=Pk7XrZTWcwlqF/01hAjSEYyjUjKibwt2Vn6KQL1E9B5ITCZUExoLwpVbDpi8UkSmB3NQeQ1nmmf8g4ASapn47VFmVi8wct4WV9cAAqy+a9F2B3Gm96VFKIlNdazOUu6bSlGtHVsMCXGv47QCH3UAIkOtTf+UeFr0kUNP5fpqwzQ=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp105.plus.mail.re1.yahoo.com with SMTP; 24 May 2007 12:34:58 -0000
X-YMail-OSG: I_v1aKsVM1mAbHERlpRP1hwDaMRJMQwEJ3Ku10_nG7CVREMV
Message-ID: <46558671.7020705@yahoo.de>
Date: Thu, 24 May 2007 14:34:57 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene code injection?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I indexed emails. And now i want to restrict the search functionality for
users so they only can search for emails to/from him.

i know the email address of the user so my plan is to do it in the following
way:
The user enters some search parameters, they are combined in a query.
This is a mix of TermQueries and WildcardQueries combined with 
BooleanQueries.

This query i will combine with a TermQuery which include only hits with 
the email
address of the user. (parameter-query) AND (emailaddress-query)

Is this good practice?
And is this save?
Or can a user do some kind of code injection to get other emails?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:04:26 2007
Return-Path: <java-user-return-28253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30109 invoked from network); 24 May 2007 13:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:04:25 -0000
Received: (qmail 75902 invoked by uid 500); 24 May 2007 13:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75871 invoked by uid 500); 24 May 2007 13:04:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75853 invoked by uid 99); 24 May 2007 13:04:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:04:23 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:04:14 -0700
Received: from emss02g01.ems.lmco.com (relay2.ems.lmco.com [166.29.2.54])by mailgw1a.lmco.com  (LM-6) with ESMTP id l4OD3cg5002046for <java-user@lucene.apache.org>; Thu, 24 May 2007 07:03:52 -0600 (MDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JIJ00501QXYPG@lmco.com> for java-user@lucene.apache.org; Thu, 24 May 2007 07:03:46 -0600 (MDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JIJ004MDQY58X@lmco.com> for java-user@lucene.apache.org; Thu, 24 May 2007 07:03:41 -0600 (MDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 24 May 2007 09:03:41 -0400
Date: Thu, 24 May 2007 09:03:41 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Lucene code injection?
In-reply-to: <46558671.7020705@yahoo.de>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B3@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Lucene code injection?
Thread-Index: AceeAAjbyCX3FohYQV+0ozXffoEcMAAA6rDw
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <46558671.7020705@yahoo.de>
X-OriginalArrivalTime: 24 May 2007 13:03:41.0344 (UTC) FILETIME=[F3A9F200:01C79E03]
X-Virus-Checked: Checked by ClamAV on apache.org

This sounds good. As for the code injection it is up to you to sanitize
the request before it goes to lucene, probably by filling the email
field yourself and not rely on the user input for the email address.

HTH

Aviran
http://www.aviransplace.com
http://shaveh.co.il 

-----Original Message-----
From: Joe [mailto:fischauto333@yahoo.de] 
Sent: Thursday, May 24, 2007 8:35 AM
To: java-user@lucene.apache.org
Subject: Lucene code injection?

Hi,

I indexed emails. And now i want to restrict the search functionality
for users so they only can search for emails to/from him.

i know the email address of the user so my plan is to do it in the
following
way:
The user enters some search parameters, they are combined in a query.
This is a mix of TermQueries and WildcardQueries combined with
BooleanQueries.

This query i will combine with a TermQuery which include only hits with
the email address of the user. (parameter-query) AND
(emailaddress-query)

Is this good practice?
And is this save?
Or can a user do some kind of code injection to get other emails?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:09:05 2007
Return-Path: <java-user-return-28254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34014 invoked from network); 24 May 2007 13:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:09:04 -0000
Received: (qmail 86540 invoked by uid 500); 24 May 2007 13:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86514 invoked by uid 500); 24 May 2007 13:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86503 invoked by uid 99); 24 May 2007 13:09:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:09:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:08:53 -0700
Received: from emss09g01.ems.lmco.com (relay6.ems.lmco.com [166.17.13.59])by mailgw3a.lmco.com  (LM-6) with ESMTP id l4OD8Vh1016855for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:08:32 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JIJ00501R68WP@lmco.com> for java-user@lucene.apache.org; Thu, 24 May 2007 09:08:32 -0400 (EDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JIJ004IIR5YEI@lmco.com> for java-user@lucene.apache.org; Thu, 24 May 2007 09:08:22 -0400 (EDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 24 May 2007 09:08:22 -0400
Date: Thu, 24 May 2007 09:08:22 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Searching on a Rapidly changing Index
In-reply-to: <20070524092205.GH5135@thegestalt.org>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B4@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Searching on a Rapidly changing Index
Thread-Index: Aced5RaoHJIboEwwS+OwdTcTUE94RQAHyy4g
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <20070524092205.GH5135@thegestalt.org>
X-OriginalArrivalTime: 24 May 2007 13:08:22.0811 (UTC) FILETIME=[9B6E66B0:01C79E04]
X-Virus-Checked: Checked by ClamAV on apache.org

You can create two indexes. One will be for new documents, let say the
last 24 hours and another one for older documents. This way you will
only update a small portion of your index while the large index will
remain relatively constant so you don't have to get a new searcher for
it.

HTH

Aviran
http://www.aviransplace.com
http://shaveh.co.il 

-----Original Message-----
From: Simon Wistow [mailto:simon@thegestalt.org] 
Sent: Thursday, May 24, 2007 5:22 AM
To: Lucene
Subject: Searching on a Rapidly changing Index

I've built a Lucene system that gets rapidly updated - documents are
supposed to be searchable immeidately after they've been indexed.

As such I have a Writer that puts new index, update and delete tasks
into a queue and then has a thread which consumes them and applies them
to the index using one instance of an IndexModifier. So far so good.

However every new Search opens up a new IndexSearcher in order to make
sure that it gets new documents. The docs indicate is a big performance
penalty. 

Are there any tips or tricks I can use to mitigate this?

thanks,

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:14:44 2007
Return-Path: <java-user-return-28255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35866 invoked from network); 24 May 2007 13:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:14:43 -0000
Received: (qmail 98515 invoked by uid 500); 24 May 2007 13:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98479 invoked by uid 500); 24 May 2007 13:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98467 invoked by uid 99); 24 May 2007 13:14:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:14:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.102.78] (HELO smtp115.plus.mail.re1.yahoo.com) (69.147.102.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 06:14:33 -0700
Received: (qmail 74603 invoked from network); 24 May 2007 13:14:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=tPJBT67xsaM/Ak+7jpca5l6umO/udPtgBiQvfbRyIR0lGkT9rBvTvtFd3MDvTw6TSJ/kiNPy9IBfVEVdUJjOCXV8ZSyDNGjOrTooVNRb3KWb3GHcdAqveH3VWwKQcP2mrV5In3HVSbbIITH5X48oSAZxn5fsoyr6vQaxrZkydT4=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp115.plus.mail.re1.yahoo.com with SMTP; 24 May 2007 13:14:11 -0000
X-YMail-OSG: qMM.DU0VM1m8FcIDky.aIhpnFWHe6UITxM2aZS.7C8JOwscV
Message-ID: <46558FA1.2050200@yahoo.de>
Date: Thu, 24 May 2007 15:14:09 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene code injection?
References: <46558671.7020705@yahoo.de> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B3@emss10m02.us.lmco.com>
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B3@emss10m02.us.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
> This sounds good. As for the code injection it is up to you to sanitize
> the request before it goes to lucene, probably by filling the email
> field yourself and not rely on the user input for the email address

I hoped i havent to sanitize the user input cause the email address 
query is ANDed by the
application, after the user finished his input.

(user_query) AND (email_query)

So is it possible to produce a user_query which will ignore the ANDed 
(email_query)?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:20:24 2007
Return-Path: <java-user-return-28256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37722 invoked from network); 24 May 2007 13:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:20:22 -0000
Received: (qmail 17008 invoked by uid 500); 24 May 2007 13:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16979 invoked by uid 500); 24 May 2007 13:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16968 invoked by uid 99); 24 May 2007 13:20:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:20:20 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 06:20:12 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene code injection?
Date: Thu, 24 May 2007 15:19:35 +0200
Message-ID: <50CA25BD6EEA954FA592C097399942E31915AA4B@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene code injection?
Thread-Index: AceeBXV0fATCfrCSRXCEwj6fPbn/bQAAD6OQ
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Joe,

It might be possible when you append the restriction before parsing the
user query with the QueryParser, but I'm not sure. I recommend first
parsing the query, and then constructing a BooleanQuery with the parsed
user query and the e-mail term both as must. Another approach would be
to use a QueryFilter. Using a QueryFilter might be the best solution
here because the filter is cached, and hence applies very fast on
subsequent searches.

Kind regards,
Daan

-----Original Message-----
From: Joe [mailto:fischauto333@yahoo.de]=20
Sent: Thursday, May 24, 2007 15:14
To: java-user@lucene.apache.org
Subject: Re: Lucene code injection?

Hi,
> This sounds good. As for the code injection it is up to you to
sanitize
> the request before it goes to lucene, probably by filling the email
> field yourself and not rely on the user input for the email address

I hoped i havent to sanitize the user input cause the email address=20
query is ANDed by the
application, after the user finished his input.

(user_query) AND (email_query)

So is it possible to produce a user_query which will ignore the ANDed=20
(email_query)?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:20:37 2007
Return-Path: <java-user-return-28257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37847 invoked from network); 24 May 2007 13:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:20:36 -0000
Received: (qmail 18616 invoked by uid 500); 24 May 2007 13:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18583 invoked by uid 500); 24 May 2007 13:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18572 invoked by uid 99); 24 May 2007 13:20:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:20:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:20:26 -0700
Received: by ug-out-1314.google.com with SMTP id m2so536767uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 06:20:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K0TuZc/s8TrOhs08fE7B//Y+WLUn/lOBWAx2CwxSq+z14O8pO4IQ5ZyaN2ffIrAOvZbBryJPZFYm1y9rZYutfpmjsD2CPSIvXmYnaRHcKDIWArVgJ1I4Spi3QnfAgrZVXSpMxxhAWgUMN0Yzo6jn1QX5CALMy1Lb3ql9ixcqXYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m6HW8+15gwzB854/18YcRb/I6su0o3kPvQYpoyBzr2KSBgqKgHq4AoWQwytDry95RdblUJrnE4sqd9700MN7qXtxfrslH9AgSkcS8aC/0bnBX19wb2XbNB2Q4xN5H/alnePMiPXU6VfZnUxbbYrixcnToCMnmrFQMlI2AKZ3ul4=
Received: by 10.82.184.2 with SMTP id h2mr3202622buf.1180012804494;
        Thu, 24 May 2007 06:20:04 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 06:20:04 -0700 (PDT)
Message-ID: <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com>
Date: Thu, 24 May 2007 09:20:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector or Hits
In-Reply-To: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83862_30388017.1180012804458"
References: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83862_30388017.1180012804458
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I know of no way to alter the Hits behavior, I recommend using
a TopDocs/TopDocCollector.

But be aware that if you load the document for each one, you may incur
a significant penalty, although the lazy-loading helped me a lot, see
FieldSelector.....

On 5/23/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> Hi folks,
>
> I need to collect some global information from my first 1000 search
> results
> in order to build up some search refining components containing only
> relevant values (those which correspond to at least one of the first 1000
> hits). For example, the results are products and there is a store filter
> component that shows only the stores that sells a product between the
> first
> 1000 hits. So even if the user sees just the first 20, I would have to
> inspect the first 1000. I've read that Hits mantains a cache of about 100
> or
> 200 hits. Is this configurable? If I could set this cache to 1000 I would
> then use Hits to browse the search results. Another way, I should use
> HitCollector. What's your advice?
>
> TIA
> Cheers,
> Carlos
>

------=_Part_83862_30388017.1180012804458--

From java-user-return-28258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:23:26 2007
Return-Path: <java-user-return-28258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44568 invoked from network); 24 May 2007 13:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:23:24 -0000
Received: (qmail 24406 invoked by uid 500); 24 May 2007 13:23:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24382 invoked by uid 500); 24 May 2007 13:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24371 invoked by uid 99); 24 May 2007 13:23:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:23:23 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:23:14 -0700
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with smtp (Exim 4.50)
	id 1HrDF4-0006E6-70
	for java-user@lucene.apache.org; Thu, 24 May 2007 14:20:39 +0100
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
Date: Thu, 24 May 2007 14:22:46 +0100
Message-ID: <HLEDJLDBDPPOFKGFCAABMECGCCAA.damien.mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <46558FA1.2050200@yahoo.de>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: Lucene code injection?
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi Joe,

It would probably be cleaner to use a QueryFilter rather than doing the AND.
Take a look at
http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/QueryFilter
.html

Also I'm not sure that using the sent to field will work - people may
receive email from a list, such as this, where their own email does not
appear in that field. They could also have email auto forwarded from another
address.

Anyway hope this helps ....

Damien

-----Original Message-----
From: Joe [mailto:fischauto333@yahoo.de]
Sent: 24 May 2007 14:14
To: java-user@lucene.apache.org
Subject: Re: Lucene code injection?


Hi,
> This sounds good. As for the code injection it is up to you to sanitize
> the request before it goes to lucene, probably by filling the email
> field yourself and not rely on the user input for the email address

I hoped i havent to sanitize the user input cause the email address
query is ANDed by the
application, after the user finished his input.

(user_query) AND (email_query)

So is it possible to produce a user_query which will ignore the ANDed
(email_query)?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:29:04 2007
Return-Path: <java-user-return-28259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46341 invoked from network); 24 May 2007 13:29:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:29:03 -0000
Received: (qmail 40094 invoked by uid 500); 24 May 2007 13:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39726 invoked by uid 500); 24 May 2007 13:29:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39715 invoked by uid 99); 24 May 2007 13:29:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:29:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:28:53 -0700
Received: by mu-out-0910.google.com with SMTP id g7so465344muf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 06:28:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TpLbkfeUxsbZLyBVZolQXg4xA2Y/6T0jKTG4O2HGHpSSuYbiJKhpoIblzbe0J9QdRa+34eoDQ+7sara13hcgjairb2WXRwfJRCmxkSr4rclPqteYoNaQIeEL/UGRpKOqbD7IKagRjB627Vvh22VRcxBiBKxf7y+QCXOuBKTeUbg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nbiTMov8hnJHKCelGfM6HkahVQj4BcJKPYFY/C9UpQKWdjqr53UQkAhYYISVFbqlZ6iQmetZPAFJfdi+aY/TEEvL0JniWrbUSOyb2dT6K5CIDdNW+65lJSRD9RoMKoWKjb7FmJhZF3Q/WOGur0Dn7VvJoh5AsovmAaJ0SU+zvfo=
Received: by 10.82.169.4 with SMTP id r4mr3242732bue.1180013310953;
        Thu, 24 May 2007 06:28:30 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 06:28:30 -0700 (PDT)
Message-ID: <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
Date: Thu, 24 May 2007 09:28:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching on a Rapidly changing Index
In-Reply-To: <20070524092205.GH5135@thegestalt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83970_26999198.1180013310910"
References: <20070524092205.GH5135@thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83970_26999198.1180013310910
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another option would be to only re-open your searcher when actually
needed, that is after the index has changed. This only does you some
good when you have some hope that there are sizable gaps in
your modifications....

Another possibility is to relax the "immediately" constraint. Would
a maximum of 10 minutes really be unacceptable? That would
allow you to open up a new Reader every 10 minutes, warm it up
in the background and then switch.

This works if you can say something to your product manager like
"give me a 10 minute delay and people will get significantly faster
results".

If that's unacceptable, you can *still* open up a new reader in the
background and warm it up before using it. "immediately" then
becomes 5-10 seconds or so.

Best
Erick

On 5/24/07, Simon Wistow <simon@thegestalt.org> wrote:
>
> I've built a Lucene system that gets rapidly updated - documents are
> supposed to be searchable immeidately after they've been indexed.
>
> As such I have a Writer that puts new index, update and delete tasks
> into a queue and then has a thread which consumes them and applies them
> to the index using one instance of an IndexModifier. So far so good.
>
> However every new Search opens up a new IndexSearcher in order to make
> sure that it gets new documents. The docs indicate is a big
> performance penalty.
>
> Are there any tips or tricks I can use to mitigate this?
>
> thanks,
>
> Simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83970_26999198.1180013310910--

From java-user-return-28260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:36:00 2007
Return-Path: <java-user-return-28260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50419 invoked from network); 24 May 2007 13:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:35:59 -0000
Received: (qmail 56710 invoked by uid 500); 24 May 2007 13:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56660 invoked by uid 500); 24 May 2007 13:35:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56648 invoked by uid 99); 24 May 2007 13:35:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:35:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.53.35] (HELO smtp110.plus.mail.re2.yahoo.com) (206.190.53.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 06:35:47 -0700
Received: (qmail 75635 invoked from network); 24 May 2007 13:35:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=oJ/SQiF323AQPuqKkz9y4j5cqzYXFYVM6ePNrWxzz5QjYq04dic33HWaElH4YRjqPuxG8seR0npG3xYdyvtI8G87NBLkuWR77SgjnL7lr66gTc3pZ1SCdgdUjTsA1whN4iIRygxdkpp4fj36QBIo6+ZboOZdWi2XqFVrkBc6ee0=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp110.plus.mail.re2.yahoo.com with SMTP; 24 May 2007 13:35:25 -0000
X-YMail-OSG: SR_MwqoVM1lddH5EJFV87kvQa3VX.rUNHYWclxBxOpfFmQqo2tJg09M.WchnDxwJNFnDhQaB.9yxnTbwfNbDOdw1ry_eUM6bzQkFKO2eV7VSwTlDK.Q5.g--
Message-ID: <4655949C.1090105@yahoo.de>
Date: Thu, 24 May 2007 15:35:24 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene code injection?
References: <HLEDJLDBDPPOFKGFCAABMECGCCAA.damien.mccarthy@propylon.com>
In-Reply-To: <HLEDJLDBDPPOFKGFCAABMECGCCAA.damien.mccarthy@propylon.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Damien McCarthy schrieb:
> Hi Joe,
>
> It would probably be cleaner to use a QueryFilter rather than doing the AND.
> Take a look at
> http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/QueryFilter
> .html
>   
ok if its not to slow i go this way.

> Also I'm not sure that using the sent to field will work - people may
> receive email from a list, such as this, where their own email does not
> appear in that field. They could also have email auto forwarded from another
> address.
>   
yes not a perfect solution but currently its ok.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:38:15 2007
Return-Path: <java-user-return-28261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51294 invoked from network); 24 May 2007 13:38:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:38:14 -0000
Received: (qmail 63866 invoked by uid 500); 24 May 2007 13:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63838 invoked by uid 500); 24 May 2007 13:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63827 invoked by uid 99); 24 May 2007 13:38:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:38:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.53.29] (HELO smtp104.plus.mail.re2.yahoo.com) (206.190.53.29)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 06:38:06 -0700
Received: (qmail 75816 invoked from network); 24 May 2007 13:37:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=PzBDrUrpaqOX5ygEozhej19xz7q8tYfo6I9yzRJ2EmmHQKLwkjpgCa8eKSfT/Ucvw050Va3N9uDLj1I4HbnyHeUjZFc3kdGnXGV2NZxZL20548lvj0BJ/r6SkVw24FDad3LOlPACRODJTnlKtxMpjy2xxjgDHYbMauhELJdBY1M=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp104.plus.mail.re2.yahoo.com with SMTP; 24 May 2007 13:37:45 -0000
X-YMail-OSG: NJD1mdcVM1m0jTKlX3XLZQjgjf5JD8_Au7_erexi8kusuJ.Dg2K3I9QOOO8Lbsz7byWgbMjn2HWm4SG3lIa7LNhGJpRD7UHMivFsbSkcTSJVdGithBXPBw--
Message-ID: <46559527.6070706@yahoo.de>
Date: Thu, 24 May 2007 15:37:43 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene code injection?
References: <50CA25BD6EEA954FA592C097399942E31915AA4B@CM1.wis.local>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E31915AA4B@CM1.wis.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
> Hi Joe,
>
> It might be possible when you append the restriction before parsing the
> user query with the QueryParser, but I'm not sure. I recommend first
> parsing the query, and then constructing a BooleanQuery with the parsed
> user query and the e-mail term both as must.
yes thats the idea.

>  Another approach would be
> to use a QueryFilter. Using a QueryFilter might be the best solution
> here because the filter is cached, and hence applies very fast on
> subsequent searches.
>   
Ok, i will try it out with Queryfilter.

Thx everybody.






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 13:49:30 2007
Return-Path: <java-user-return-28262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55155 invoked from network); 24 May 2007 13:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 13:49:29 -0000
Received: (qmail 89446 invoked by uid 500); 24 May 2007 13:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89403 invoked by uid 500); 24 May 2007 13:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89392 invoked by uid 99); 24 May 2007 13:49:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:49:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 06:49:20 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1HrDgZ-000GlG-3H
	for java-user@lucene.apache.org; Thu, 24 May 2007 14:48:59 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l4ODmwoZ064433
	for java-user@lucene.apache.org; Thu, 24 May 2007 14:48:58 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Thu, 24 May 2007 14:48:58 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Searching on a Rapidly changing Index
Message-ID: <20070524134858.GL5135@thegestalt.org>
References: <20070524092205.GH5135@thegestalt.org> <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, May 24, 2007 at 09:28:30AM -0400, Erick Erickson said:
> If that's unacceptable, you can *still* open up a new reader in the
> background and warm it up before using it. "immediately" then
> becomes 5-10 seconds or so.

This is currently what I'm doing using a list of previous performed 
queries in combination with something similar to Aviran's suggestion of 
partitioning by date and only opening when the index changes.

At the moment search is sufficently speedy that this works but in the 
future I think the definition of 'immediate' may well get relaxed. 

Thanks for all the suggestions - it's nice to know I wasn't completely 
off track and/or missing something obvious.

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 14:34:16 2007
Return-Path: <java-user-return-28263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85646 invoked from network); 24 May 2007 14:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 14:34:11 -0000
Received: (qmail 22067 invoked by uid 500); 24 May 2007 14:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21989 invoked by uid 500); 24 May 2007 14:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21946 invoked by uid 99); 24 May 2007 14:33:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:33:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:33:44 -0700
Received: by ug-out-1314.google.com with SMTP id m2so554231uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 07:33:22 -0700 (PDT)
Received: by 10.67.28.9 with SMTP id f9mr2176744ugj.1180017201946;
        Thu, 24 May 2007 07:33:21 -0700 (PDT)
Received: by 10.67.123.15 with HTTP; Thu, 24 May 2007 07:33:21 -0700 (PDT)
Message-ID: <f8203010705240733o27db8e73o27e8ddc86bdcd206@mail.gmail.com>
Date: Thu, 24 May 2007 10:33:21 -0400
From: "Joe Shaw" <joe@joeshaw.org>
To: java-user@lucene.apache.org
Subject: Re: Searching on a Rapidly changing Index
In-Reply-To: <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070524092205.GH5135@thegestalt.org>
	 <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> If that's unacceptable, you can *still* open up a new reader in the
> background and warm it up before using it. "immediately" then
> becomes 5-10 seconds or so.

I've seen the term "warming" used a few times on the various lists.
What constitutes warming up a searcher, simply running a dummy query?

Joe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 14:40:06 2007
Return-Path: <java-user-return-28264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90736 invoked from network); 24 May 2007 14:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 14:39:59 -0000
Received: (qmail 47991 invoked by uid 500); 24 May 2007 14:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47950 invoked by uid 500); 24 May 2007 14:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47939 invoked by uid 99); 24 May 2007 14:39:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:39:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:39:49 -0700
Received: by mu-out-0910.google.com with SMTP id g7so482093muf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 07:39:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hU0UD8ef4aUvXLlmmGCudFCSSUe0y/RG+Vj6hETfZaVLW7IDmwx7dT0OcyPlEx7vXLVzrGLWEL+d6Dh9Gf2Ih/MU8b5ChsP9ekCWSzRglV0hEAKtLcyFkRjK0JgYg5y/1oSFkfn+gueoTtDky7Uc5CnFB2B9nRXUFcINNRKKURk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uXsdmUpY0L/qRkOxO+/IC2RrjltctVAhDT/ab7V546CtNWw3Td9vJ70/CNz/wjdotNvHlabu+zXIqKV0mHnoLY1atOVkTbh7uNoUTqjHaTtZeOZwaAIC4ugwwX6got4m5NyEHIydNXJdWfsGt6j6/rYV9ZeAwYyVuUBuFNG2GgI=
Received: by 10.82.184.2 with SMTP id h2mr3341199buf.1180017567158;
        Thu, 24 May 2007 07:39:27 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 07:39:27 -0700 (PDT)
Message-ID: <359a92830705240739p59ff179dr5cf5cc0558dc4c83@mail.gmail.com>
Date: Thu, 24 May 2007 10:39:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching on a Rapidly changing Index
In-Reply-To: <f8203010705240733o27db8e73o27e8ddc86bdcd206@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84738_12902795.1180017567119"
References: <20070524092205.GH5135@thegestalt.org>
	 <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
	 <f8203010705240733o27db8e73o27e8ddc86bdcd206@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84738_12902795.1180017567119
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yep. You probably want to do some sorting by other than relevancy
too in order to fill the sort caches.....

Erick

On 5/24/07, Joe Shaw <joe@joeshaw.org> wrote:
>
> Hi,
>
> On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > If that's unacceptable, you can *still* open up a new reader in the
> > background and warm it up before using it. "immediately" then
> > becomes 5-10 seconds or so.
>
> I've seen the term "warming" used a few times on the various lists.
> What constitutes warming up a searcher, simply running a dummy query?
>
> Joe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_84738_12902795.1180017567119--

From java-user-return-28265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 14:52:05 2007
Return-Path: <java-user-return-28265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3561 invoked from network); 24 May 2007 14:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 14:52:04 -0000
Received: (qmail 90287 invoked by uid 500); 24 May 2007 14:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90240 invoked by uid 500); 24 May 2007 14:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90200 invoked by uid 99); 24 May 2007 14:51:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:51:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 07:51:32 -0700
Received: by an-out-0708.google.com with SMTP id b20so57109ana
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 07:51:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W+0cofdtka3B6d4UpLH36aCj9P1utbv2Sh3fRBWKpoako34Z9CxCWL0rihQXNblbxvxQH13pfLrXplf+egyS/NMW8Y59XkQfu5ZIz5nySXzxRQM7682B9AxJ7YSs4rsKeq31RJ4yOSx8cTpPLlzz8PqOZmup2wOJAKVxX/a9ovw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PDVXNjAtdlC4Dr1B4fVURf5f8Yb6Ntec8XzAawR4jFfMQVgbgeVNbdjOggUsf/JQhfEzRoUyFGYy9Pp7vY3bndLyw6zAVVaHWIus/2VfnTW7FIQxZHwpKMWTUHlerfof9Ar4vcbHeHHIZfo/vU4CceYkQAGmlH9V4KBy/9bhQus=
Received: by 10.114.184.16 with SMTP id h16mr933892waf.1180018265684;
        Thu, 24 May 2007 07:51:05 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 07:51:05 -0700 (PDT)
Message-ID: <7798eaa0705240751j372ffb0bpdd77b830d289e6cf@mail.gmail.com>
Date: Thu, 24 May 2007 11:51:05 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector or Hits
In-Reply-To: <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_143310_19290337.1180018265645"
References: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
	 <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_143310_19290337.1180018265645
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

thank you for your prompt answer. What do you mean by loading the document?
Accessing one of the stored fields? In that case I'm afraid I would need to
do it. For example, in the aforementioned case of a result of products, I
have to look at any product store_id, which is stored along the document. Is
this a performance killer? Maybe I should keep some tables in memory, for
example an array mapping from id to store_id in O(1). I will do some
benchmarking before anyway.

Cheers,
Carlos

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I know of no way to alter the Hits behavior, I recommend using
> a TopDocs/TopDocCollector.
>
> But be aware that if you load the document for each one, you may incur
> a significant penalty, although the lazy-loading helped me a lot, see
> FieldSelector.....
>
> On 5/23/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> >
> > Hi folks,
> >
> > I need to collect some global information from my first 1000 search
> > results
> > in order to build up some search refining components containing only
> > relevant values (those which correspond to at least one of the first
> 1000
> > hits). For example, the results are products and there is a store filter
> > component that shows only the stores that sells a product between the
> > first
> > 1000 hits. So even if the user sees just the first 20, I would have to
> > inspect the first 1000. I've read that Hits mantains a cache of about
> 100
> > or
> > 200 hits. Is this configurable? If I could set this cache to 1000 I
> would
> > then use Hits to browse the search results. Another way, I should use
> > HitCollector. What's your advice?
> >
> > TIA
> > Cheers,
> > Carlos
> >
>

------=_Part_143310_19290337.1180018265645--

From java-user-return-28266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 15:15:19 2007
Return-Path: <java-user-return-28266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23425 invoked from network); 24 May 2007 15:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 15:15:18 -0000
Received: (qmail 89482 invoked by uid 500); 24 May 2007 15:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89433 invoked by uid 500); 24 May 2007 15:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89418 invoked by uid 99); 24 May 2007 15:15:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:15:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.207.128] (HELO web32114.mail.mud.yahoo.com) (68.142.207.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 08:15:06 -0700
Received: (qmail 528 invoked by uid 60001); 24 May 2007 15:14:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=SckzQgYnIGDA0NQ8FRLzkz52C/DpL9ip9rymHKyvGx7yhlJAhsecx0Fg52Ff9TfKGMJ6UotTo5j75gqL3R5VxZUm97hu2kzkbKM15i6TzmRPkdkDM8PGmkC4zCykrmVPUgueQB/liBwNKw+c+QtELPQu89b6TCGoeKuA4cxwhg8=;
X-YMail-OSG: A8oQexsVM1m3NP9hWe1U01fyKEPx0W6fAcgyKaeQIBm8icNTMxenimTT1_.GbHeoTEcKHHzyr6P1JEAwJGYRKC78n04LdbavBZ5sC_yl5loo0nTE5gk-
Received: from [209.191.118.121] by web32114.mail.mud.yahoo.com via HTTP; Thu, 24 May 2007 08:14:39 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 08:14:38 -0700 (PDT)
From: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
Subject: How to search more than one word?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-924280728-1180019678=:96352"
Message-ID: <44692.96352.qm@web32114.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-924280728-1180019678=:96352
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all!=0A=0AI implemented a searcher with Lucene and i=B4m trying to searc=
h two words, the both into the same text file, but...i can=B4t!=0A=0AWhen I=
 search the first word and the second separated, everithing happens ok, but=
 when together, with or wtithout "AND" or "+"...nothing is found! :(=0A=0AC=
an somebody help me?=0A=0A=0A=0A___________________________________________=
_______=0AFale com seus amigos  de gra=E7a com o novo Yahoo! Messenger =0Ah=
ttp://br.messenger.yahoo.com/ 
--0-924280728-1180019678=:96352--

From java-user-return-28267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 15:19:07 2007
Return-Path: <java-user-return-28267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27287 invoked from network); 24 May 2007 15:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 15:19:06 -0000
Received: (qmail 692 invoked by uid 500); 24 May 2007 15:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 654 invoked by uid 500); 24 May 2007 15:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 618 invoked by uid 99); 24 May 2007 15:19:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:19:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:18:54 -0700
Received: by py-out-1112.google.com with SMTP id a25so193475pyi
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 08:18:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=LCnsl7Q3YMAmO2oDwFqSjNYqm1tYh45BOlTaWLQCrgFVHg2Vmf3ak5Pq2TUspHW21rJsGvsptsp6pGluBzSfx5aNd7le+VZj4mDyR0hLOhDVhiQst/WofHTyGtOm37wt4rO3Kt05sdK5r3MMJW4pu7sLUjGaqY+qRjtMuXixC2I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=nG6guyQ4g2moTp72J7TjuL8NnLPBuVdM6M8Cg2COK+4fjQQfes2zao84YmxUJPAC7XTlrJsUbMJI5SApjFnq7LMq/qjx4thhog6ysEPzXYjh1saTC/WTmAuL+iaOdU1s8wSPIEHRtDpeyT2JPjg+jBtHTdMG9G3nMzbVwVRluSw=
Received: by 10.35.8.1 with SMTP id l1mr3354803pyi.1180019913629;
        Thu, 24 May 2007 08:18:33 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 24 May 2007 08:18:33 -0700 (PDT)
Message-ID: <c68e39170705240818v25ebde98sdfc0fe700b893c47@mail.gmail.com>
Date: Thu, 24 May 2007 11:18:33 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to avoid score calculation completely?
In-Reply-To: <200705240738.l4O7cic7047853@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170705230953w96f47e6l5ca0a8e059b34959@mail.gmail.com>
	 <200705240738.l4O7cic7047853@pigeon.ciao.com>
X-Google-Sender-Auth: 5cf41f4413482056
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/24/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> But I also see importance of ignoring score calculation.
>
> If you put it aside performance gain, is there any possibility to completely
> ignore scoring calculation?

Yes, for unsorted results use a hit collector and no sorting will be
done by score (or anything else).

You can also ignore the score by simply sorting on other fields.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 15:22:58 2007
Return-Path: <java-user-return-28268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29434 invoked from network); 24 May 2007 15:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 15:22:58 -0000
Received: (qmail 12161 invoked by uid 500); 24 May 2007 15:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12124 invoked by uid 500); 24 May 2007 15:22:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12113 invoked by uid 99); 24 May 2007 15:22:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:22:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:22:46 -0700
Received: by nz-out-0506.google.com with SMTP id i1so522214nzh
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 08:22:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OEihRUmIRfTQpiNAy1xyzs0ZLSziZ6uI/o83bWuNEfg49TpzqoCfgHVbq52Zmdr2Jkm0UiKEb/UBpizNVsw62zE6tTP22yvdwQE0uDW3h/8yjSxjhAddCNiEUlUnfg4tJSlbt6gBpIyQhjmliNPQFivdFVZPvdRpSU1dqFw4nzg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WBv/jjXT/P0hd/WVyKjY/2vaUniYqwinn2NboEEFf6bUc/hVS7inNU0X1Kz3aAO2V8dEbqmZC2ssV855uhbAIDwhR6ZKCwaf5/3g6Z5wvc8B1WWYMgk8EbI/vzHlSgqQ7l9YcN/WvDneNwFSoHdLKko3RP/ONOsAxvbVwygoRYo=
Received: by 10.114.177.1 with SMTP id z1mr911411wae.1180020145149;
        Thu, 24 May 2007 08:22:25 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Thu, 24 May 2007 08:22:24 -0700 (PDT)
Message-ID: <ae6f38f60705240822gbacf95cv2e4611d82616d10b@mail.gmail.com>
Date: Thu, 24 May 2007 11:22:24 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

  I'm trying to figure what I need to do with Lucene to score a
document higher when it has a larger number of unique search terms
that are hit, rather than term frequency counts.

  A quick example.

  If I'm searching for "BIRD CAT DOG" (all should clauses), then I want

   ...a document with BIRD, CAT, and DOG terms, each only  appearing
once, in it to score higher than

   ...a document with BIRD, CAT, CAT, CAT, CAT, CAT, CAT, CAT.

  The rationale behind this is that if something "fits" my query
better by hitting more terms, I don't want it to be drowned out by a
document that simply mentions a subset of keywords a lot of times.

  And, the tricky part: ideally I'd like to be able to switch between
the two schemes, so the user can get documents scored wither way.


  So are I've been reading the 'score and frequency' thread at
http://www.gossamer-threads.com/lists/lucene/java-user/8916, where
Niraj seems to have a similar problem.  He tries things overriding
term frequencies, tf(), and setting the default similarity.

  Unfortunately, it isn't long before the reply chain is 18 layers
deep (I counted), and it never becomes clear if a solution was
resolved, so I wasn't certain if I was on the right research path or
not.  It started to appear that some of the scoring might be done at
index time, but that didn't make sense to me, since weights and such
can be done at query time.

  Is there any way to have Lucene score based on the discrete number
of unique terms found, rather than how often a given term appears in a
document?

Thanks,
-wls
ps.  When replying to this, it'd be great if not pertinent content to
the reply were trimmed in the response.  I don't want to cause a
similar message snowball to roll down the hill, picking up angle
brackets along the way.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 15:38:51 2007
Return-Path: <java-user-return-28269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40240 invoked from network); 24 May 2007 15:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 15:38:49 -0000
Received: (qmail 64967 invoked by uid 500); 24 May 2007 15:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64939 invoked by uid 500); 24 May 2007 15:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64927 invoked by uid 99); 24 May 2007 15:38:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:38:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 08:38:38 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 7E57F2220D4
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 11:38:17 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 24 May 2007 11:38:17 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5F37F1A8CC; Thu, 24 May 2007 11:38:17 -0400 (EDT)
Message-Id: <1180021097.23925.1191621299@webmail.messagingengine.com>
X-Sasl-Enc: v/w9NAySONpr71ZHowvef8w1C7k+XZZhPYtmfHyvfrwN 1180021097
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <c68e39170705230953w96f47e6l5ca0a8e059b34959@mail.gmail.com>
   <200705240738.l4O7cic7047853@pigeon.ciao.com>
   <c68e39170705240818v25ebde98sdfc0fe700b893c47@mail.gmail.com>
Subject: Re: How to avoid score calculation completely?
In-Reply-To: <c68e39170705240818v25ebde98sdfc0fe700b893c47@mail.gmail.com>
Date: Thu, 24 May 2007 11:38:17 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Yonik Seeley" <yonik@apache.org> wrote:
> On 5/24/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > But I also see importance of ignoring score calculation.
> >
> > If you put it aside performance gain, is there any possibility to completely
> > ignore scoring calculation?
> 
> Yes, for unsorted results use a hit collector and no sorting will be
> done by score (or anything else).
> 
> You can also ignore the score by simply sorting on other fields.

I *think* something close to this would allow you to count the number
of docs matching a query without scoring:

  Scorer s = query.weight(searcher).scorer(reader);
  int count = 0;
  while(s.next()) {
    count++;
  }

I'm not certain that avoids all scoring work but at least for some of
the scorers it should save some CPU time; I'm not sure how much.  Also
note that the TopDocCollector (used by default if you don't provide
your own collector) does not count docs that have score <= 0.0, so the
above code fragment would overcount in such cases.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 15:39:59 2007
Return-Path: <java-user-return-28270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41060 invoked from network); 24 May 2007 15:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 15:39:56 -0000
Received: (qmail 70653 invoked by uid 500); 24 May 2007 15:39:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70620 invoked by uid 500); 24 May 2007 15:39:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 49694 invoked by uid 99); 24 May 2007 15:35:40 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sprasanna199@gmail.com designates 209.85.132.247 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=mZDAiirh9NSykI0hLXs7T30yIZiPOlpKOzGACFY+qdFTerrMCPOWdnTUntJRIhjGq/oIQiDkIJdPDz4f43mv1tI3fdLfhwSFgvxos5egjqb+3929E0Yfjcj9dny2/DHwrzz9dqYlqdJhL0bvogPxvyXdMdofaVfRlwwAgCeGkr4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hPePNF8wge4cy7iY/Z3QA5v3RTiVFz88goRoqPJxEJcL2zxrE2QUZR7QeHYYnanwqNrQ/u14JvDVAJ6Ca4rtGDik+Lqj/J57u6cSUf4wWvXfwR7W5CJZmzhbMTQir9h6Hj7hH2UuR6oadrhbA8wk/Hgh7BN6LAX+tYYmcia0Sm4=
Message-ID: <3e475f5b0705240835w63a0e85i5eba03329900dc33@mail.gmail.com>
Date: Thu, 24 May 2007 21:05:08 +0530
From: "Prasanna Seshadri" <sprasanna199@gmail.com>
To: java-user@lucene.apache.org
Subject: Shortest snippet in Search results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_182212_16506443.1180020908338"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_182212_16506443.1180020908338
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello users,

I am right now developing an algorithm to calculate the shortest  snippet
from the search results for a given keyword of length n  (from user query).
>From the lucene source I found that there is a  method getBestFragments
which would do the same. However its very  hard to interpret the algorithm
you used for that purpose.  Therefore it would be great if you can share any
pointers to an  pseudo algorithm which would calculate the shortest snippet
from  search results so that it will be useful for me (I am planning to
implement the algorithm in scripting languages like python).

Thanks,
S.Prasanna

-- 
S.Prasanna (ME Comp Science and Engg)
http://www.pythonprasanna.com
http://blogs.sun.com/prasanna
http://www.livejournal.com/~sprasanna199

------=_Part_182212_16506443.1180020908338--

From java-user-return-28271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:26:12 2007
Return-Path: <java-user-return-28271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75384 invoked from network); 24 May 2007 16:26:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:26:12 -0000
Received: (qmail 3008 invoked by uid 500); 24 May 2007 16:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2765 invoked by uid 500); 24 May 2007 16:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2750 invoked by uid 99); 24 May 2007 16:26:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:26:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.183] (HELO exprod6og51.obsmtp.com) (64.18.1.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 09:26:03 -0700
Received: from source ([139.56.8.7]) by exprod6ob51.postini.com ([64.18.5.12]) with SMTP;
	Thu, 24 May 2007 09:25:39 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id l4OGQ5M04401
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:26:05 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id JAA28880
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:28:37 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <2R84AYZ9>; Thu, 24 May 2007 09:25:37 -0700
Message-ID: <F1C79CDF8799D944A3156C4035173174180474@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: How to avoid score calculation completely?
Date: Thu, 24 May 2007 09:25:27 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Thanks for helps!

Yes, along the line you mentioned we can reduce the amount
of calculation, but we still need to loop through to count
all docs, so time may still be O(n), I am wondering if we
can avoid the loop to get count directly?

Best regards, Lisheng

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: Thursday, May 24, 2007 7:38 AM
To: java-user@lucene.apache.org
Subject: Re: How to avoid score calculation completely?



"Yonik Seeley" <yonik@apache.org> wrote:
> On 5/24/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > But I also see importance of ignoring score calculation.
> >
> > If you put it aside performance gain, is there any possibility to completely
> > ignore scoring calculation?
> 
> Yes, for unsorted results use a hit collector and no sorting will be
> done by score (or anything else).
> 
> You can also ignore the score by simply sorting on other fields.

I *think* something close to this would allow you to count the number
of docs matching a query without scoring:

  Scorer s = query.weight(searcher).scorer(reader);
  int count = 0;
  while(s.next()) {
    count++;
  }

I'm not certain that avoids all scoring work but at least for some of
the scorers it should save some CPU time; I'm not sure how much.  Also
note that the TopDocCollector (used by default if you don't provide
your own collector) does not count docs that have score <= 0.0, so the
above code fragment would overcount in such cases.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:35:48 2007
Return-Path: <java-user-return-28272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85205 invoked from network); 24 May 2007 16:35:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:35:44 -0000
Received: (qmail 35124 invoked by uid 500); 24 May 2007 16:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35096 invoked by uid 500); 24 May 2007 16:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35085 invoked by uid 99); 24 May 2007 16:35:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:35:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:35:35 -0700
Received: by mu-out-0910.google.com with SMTP id g7so509399muf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:35:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iLe8j9BnxADaaMXBSxwHPp02kv5uU3lTOQnNG6/mESkGXNkXyoAOrlhVCxP+1zS/3N2nnecTaABAbkrxdW2ekZ1j4YMEToz6so2I7it70tSlNnGSYIUysq/D0ihA351FidiB8R8xD+eynq98I42rJZCLsng5liaIYrCjlkcxehg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VC+b+dFWzFfxdbz3jU0yI6DrxpTH1+c6u9uMZvOt1DZHs0ZVB02+LGlREC9jHyIv6AoE8spwNRnkNLWi/9M5/5GTcNtFkRRX/BGS0OYNMjWuoWdsef5IScEatGQQXcy3tdTIH0iDUPVgp9AALNe+99obBowKYnBWr1PA0hXYgTw=
Received: by 10.82.156.12 with SMTP id d12mr3606322bue.1180024513641;
        Thu, 24 May 2007 09:35:13 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 09:35:13 -0700 (PDT)
Message-ID: <359a92830705240935h62a2ef81q6392779bbf3026ca@mail.gmail.com>
Date: Thu, 24 May 2007 12:35:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector or Hits
In-Reply-To: <7798eaa0705240751j372ffb0bpdd77b830d289e6cf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85873_9049802.1180024513602"
References: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
	 <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com>
	 <7798eaa0705240751j372ffb0bpdd77b830d289e6cf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85873_9049802.1180024513602
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're on the right track. But that said, access to anything that's
indexed (stored or not) should be pretty quick. Things
stored, but not indexed, are costlier. This might drive your
decision on what to index .vs. store.....

Loading the document is anything like IndexReader.document(), or
Hits.doc().

Part of the difference is that if you load the document, you get
all the fields, whether you need them or not.

Also, you can use your own TermEnum/TermDocs lookup for
this kind of thing if the terms you're interested in are indexed...

I wrote a mail some time ago that detailed my experience, in my
situation with my peculiar data set that you may want to read,
see...

Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+,


As I mentioned in that message, I suspect that my improvement was
*highly* dependent upon how the index is structured.....

All that said, your notion of benchmarking is a very good one. It lead
me to using FieldSelector in the first place...

Best
Erick

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> Hi Erick,
>
> thank you for your prompt answer. What do you mean by loading the
> document?
> Accessing one of the stored fields? In that case I'm afraid I would need
> to
> do it. For example, in the aforementioned case of a result of products, I
> have to look at any product store_id, which is stored along the document.
> Is
> this a performance killer? Maybe I should keep some tables in memory, for
> example an array mapping from id to store_id in O(1). I will do some
> benchmarking before anyway.
>
> Cheers,
> Carlos
>
> On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > I know of no way to alter the Hits behavior, I recommend using
> > a TopDocs/TopDocCollector.
> >
> > But be aware that if you load the document for each one, you may incur
> > a significant penalty, although the lazy-loading helped me a lot, see
> > FieldSelector.....
> >
> > On 5/23/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> > >
> > > Hi folks,
> > >
> > > I need to collect some global information from my first 1000 search
> > > results
> > > in order to build up some search refining components containing only
> > > relevant values (those which correspond to at least one of the first
> > 1000
> > > hits). For example, the results are products and there is a store
> filter
> > > component that shows only the stores that sells a product between the
> > > first
> > > 1000 hits. So even if the user sees just the first 20, I would have to
> > > inspect the first 1000. I've read that Hits mantains a cache of about
> > 100
> > > or
> > > 200 hits. Is this configurable? If I could set this cache to 1000 I
> > would
> > > then use Hits to browse the search results. Another way, I should use
> > > HitCollector. What's your advice?
> > >
> > > TIA
> > > Cheers,
> > > Carlos
> > >
> >
>

------=_Part_85873_9049802.1180024513602--

From java-user-return-28273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:37:00 2007
Return-Path: <java-user-return-28273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86338 invoked from network); 24 May 2007 16:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:36:42 -0000
Received: (qmail 39077 invoked by uid 500); 24 May 2007 16:36:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39046 invoked by uid 500); 24 May 2007 16:36:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39035 invoked by uid 99); 24 May 2007 16:36:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:36:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:36:34 -0700
Received: by ug-out-1314.google.com with SMTP id m2so581903uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:36:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dPZ4ZKKPOXMwQV0ob0Ixe7RGCHi7WMHOx6ETYICjmLd29erRot305S2/3mQukUS0u4gGAiXhIP1IEhzOZSX5qcbBW06l59/BRoMcRkVgCH+E6lat+kl6rquhGuz6kt3X37m7giGMzrKaWU+3Y0ZYQ++z/VYkBQvyrsJ9vzKY88c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ldq99t9IL40i+5r+1OkJ+32Q1mq8KUehrA/J+Spnt5R59QrdIuOoKOTWAP0JsbgaDDUmbqzhr3/+dTOqOGcJoML46O3ZpGJ1mVFhXpIS6qAMgnrTe6g4Rb7I6oaXnnLgekc1L0eC1JppdgX2M5YB/E6yiAV5lPVbPLfSGdvxRcs=
Received: by 10.82.158.12 with SMTP id g12mr3612676bue.1180024572894;
        Thu, 24 May 2007 09:36:12 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 09:36:12 -0700 (PDT)
Message-ID: <359a92830705240936j5393aa84l8454b9c49020127c@mail.gmail.com>
Date: Thu, 24 May 2007 12:36:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search more than one word?
In-Reply-To: <44692.96352.qm@web32114.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85897_24979526.1180024572865"
References: <44692.96352.qm@web32114.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85897_24979526.1180024572865
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Not until you give us more information <G>.

In particular, what analyzers you use at index and search time.
What the string was originally and how you indexed it.
What query.toString() shows you.

Best
Erick

On 5/24/07, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> wrote:
>
> Hi all!
>
> I implemented a searcher with Lucene and i=B4m trying to search two words=
,
> the both into the same text file, but...i can=B4t!
>
> When I search the first word and the second separated, everithing happens
> ok, but when together, with or wtithout "AND" or "+"...nothing is found! =
:(
>
> Can somebody help me?
>
>
>
> __________________________________________________
> Fale com seus amigos  de gra=E7a com o novo Yahoo! Messenger
> http://br.messenger.yahoo.com/

------=_Part_85897_24979526.1180024572865--

From java-user-return-28274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:41:28 2007
Return-Path: <java-user-return-28274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90279 invoked from network); 24 May 2007 16:41:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:41:27 -0000
Received: (qmail 52528 invoked by uid 500); 24 May 2007 16:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52496 invoked by uid 500); 24 May 2007 16:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52485 invoked by uid 99); 24 May 2007 16:41:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:41:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:41:19 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 4003D222600
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 12:40:58 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 24 May 2007 12:40:58 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 1ED251A953; Thu, 24 May 2007 12:40:58 -0400 (EDT)
Message-Id: <1180024858.30897.1191633377@webmail.messagingengine.com>
X-Sasl-Enc: gTvtvs9KB3CyjVXTOyA/3wcuUHisev18so9k7ujn9kWA 1180024858
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <F1C79CDF8799D944A3156C4035173174180474@rw-msg-02.broadvision.com>
Subject: RE: How to avoid score calculation completely?
In-Reply-To: <F1C79CDF8799D944A3156C4035173174180474@rw-msg-02.broadvision.com>
Date: Thu, 24 May 2007 12:40:58 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Zhang, Lisheng" <Lisheng.Zhang@broadvision.com> wrote:
> Hi, Thanks for helps!
> 
> Yes, along the line you mentioned we can reduce the amount
> of calculation, but we still need to loop through to count
> all docs, so time may still be O(n), I am wondering if we
> can avoid the loop to get count directly?

I don't think you can get less than O(n) unless the query
is a single term.  If it is a single term you can just call
IndexReader.docFreq(...) to get the number of docs that
have that term, but, this call will not take into account
deleted documents.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:41:53 2007
Return-Path: <java-user-return-28275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90508 invoked from network); 24 May 2007 16:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:41:52 -0000
Received: (qmail 54866 invoked by uid 500); 24 May 2007 16:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54833 invoked by uid 500); 24 May 2007 16:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54822 invoked by uid 99); 24 May 2007 16:41:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:41:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:41:32 -0700
Received: by wr-out-0506.google.com with SMTP id 36so254448wra
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:41:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=QghkmHOBvDu7TbWiUaL5J9jfdA8jzaods9Z7Cldc/6ndmunuLljxRTc5/RCOv3v965z55rgZ66w7KMebBcjGFTlknkVXHHBnAMeQitTEMxZovQ47l6DP9OtladzZSuMUD3tPA91kBpmVtJRwSYnDi9LpCNdHB34qM3Zxz70Zulk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f0TlJe0D56PctYYrpYs9B3EVCzGQ22KLc+inRX4CIXpA17GdI+klnSxkv50NU8riPlHWZk0zO8w/N5MxdWsmxUBpbNwY0YFbiptPh9+5dAJygGWIc/M04fxe07kc58N2Ma2HCdPPxEdb+j5dSXyFchbRO1+9yhr5VksGc0In6RQ=
Received: by 10.114.88.1 with SMTP id l1mr989867wab.1180024871685;
        Thu, 24 May 2007 09:41:11 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 09:41:11 -0700 (PDT)
Message-ID: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
Date: Thu, 24 May 2007 13:41:11 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: maxDoc and arrays
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_144898_8883524.1180024871467"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_144898_8883524.1180024871467
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Is there any guaranty that the maxDoc returned by a reader will be about the
total number of indexed documents?

The motivation of this question is that I want to associate some info to
each document in the index, and in order to access this additional data in
O(1) I would like to do this through an array indexing. But the array size
shouldn't be a lot greater than the total number of documents. I see that
something similar is done in the example of section 6.1 of Lucene in Action,
but for sorting purposes, which is not my case.

Related to this: how can update my array of extra data when documents are
added/removed to/from the index? Is there any feedback mechanism by means of
callbacks or event handlers?

Thank you in advance.
Regards,
Carlos

------=_Part_144898_8883524.1180024871467--

From java-user-return-28276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 16:50:40 2007
Return-Path: <java-user-return-28276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 185 invoked from network); 24 May 2007 16:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 16:50:39 -0000
Received: (qmail 82828 invoked by uid 500); 24 May 2007 16:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82796 invoked by uid 500); 24 May 2007 16:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82783 invoked by uid 99); 24 May 2007 16:50:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:50:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 09:50:30 -0700
Received: by an-out-0708.google.com with SMTP id b20so82635ana
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 09:50:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mOavqtcJGz8RXpNHMM0U9z3JsSIJK1Ty1DvepsOrDYCkZ4JSnFf9eSJHoj7KLMDh1WnnV/FD7OcLcQI8qodno57BMtbO8hXLgBIGHLqLjJdX4esVjMLMLmyQ0rusB16o5q88mJ92D+KuKJNs4ZkNnBuzirrs+COmDcZRMah5sn0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UlrhMOgN62vMTzqOxpONDgxUbBPbw9CMaqBxupomT7HVOMX35y1ojOY1CLl8IfENDaCJqBNcQZNhzXisyy0ptkXQZHuJhq1zfit6Nw4ehVuEUqI4Eu8fe4G788aGB4OAVrwUX33w5IqsvH/5dZrVljxFvdbt1+Yq9/M67E7pIvo=
Received: by 10.114.177.1 with SMTP id z1mr1015803wae.1180025404859;
        Thu, 24 May 2007 09:50:04 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 09:50:04 -0700 (PDT)
Message-ID: <7798eaa0705240950t4f82c79r1e479dfa31307b87@mail.gmail.com>
Date: Thu, 24 May 2007 13:50:04 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector or Hits
In-Reply-To: <359a92830705240935h62a2ef81q6392779bbf3026ca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145047_7154062.1180025404815"
References: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com>
	 <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com>
	 <7798eaa0705240751j372ffb0bpdd77b830d289e6cf@mail.gmail.com>
	 <359a92830705240935h62a2ef81q6392779bbf3026ca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145047_7154062.1180025404815
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

I don't think that FieldSelector would be that valuable in my case because I
just need to access a few fields, and those are all fields that are in fact
stored (and indexed too). I was thinking of keeping this extra information
in memory, precisely into an array mapping doc ids to the data structure. I
see that this is done for ScoreDocComparator in a Lucene in Action example.
I'm still not sure how to achieve something similar with a HitCollector. I
mean, I could instantiate a maxDoc() size array and index it by the document
ids that are passed to the collector. But that said, I don't know how to
keep this array synchronized with the index. I've opened a new thread for
this subject, "maxDoc and arrays".

Thank you again.
Cheers,
Carlos

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> You're on the right track. But that said, access to anything that's
> indexed (stored or not) should be pretty quick. Things
> stored, but not indexed, are costlier. This might drive your
> decision on what to index .vs. store.....
>
> Loading the document is anything like IndexReader.document(), or
> Hits.doc().
>
> Part of the difference is that if you load the document, you get
> all the fields, whether you need them or not.
>
> Also, you can use your own TermEnum/TermDocs lookup for
> this kind of thing if the terms you're interested in are indexed...
>
> I wrote a mail some time ago that detailed my experience, in my
> situation with my peculiar data set that you may want to read,
> see...
>
> Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+,
>
>
> As I mentioned in that message, I suspect that my improvement was
> *highly* dependent upon how the index is structured.....
>
> All that said, your notion of benchmarking is a very good one. It lead
> me to using FieldSelector in the first place...
>
> Best
> Erick
>
> On 5/24/07, Carlos Pita <carlosjosepita@gmail.com > wrote:
> >
> > Hi Erick,
> >
> > thank you for your prompt answer. What do you mean by loading the
> > document?
> > Accessing one of the stored fields? In that case I'm afraid I would need
>
> > to
> > do it. For example, in the aforementioned case of a result of products,
> I
> > have to look at any product store_id, which is stored along the
> document.
> > Is
> > this a performance killer? Maybe I should keep some tables in memory,
> for
> > example an array mapping from id to store_id in O(1). I will do some
> > benchmarking before anyway.
> >
> > Cheers,
> > Carlos
> >
> > On 5/24/07, Erick Erickson < erickerickson@gmail.com> wrote:
> > >
> > > I know of no way to alter the Hits behavior, I recommend using
> > > a TopDocs/TopDocCollector.
> > >
> > > But be aware that if you load the document for each one, you may incur
>
> > > a significant penalty, although the lazy-loading helped me a lot, see
> > > FieldSelector.....
> > >
> > > On 5/23/07, Carlos Pita <carlosjosepita@gmail.com > wrote:
> > > >
> > > > Hi folks,
> > > >
> > > > I need to collect some global information from my first 1000 search
> > > > results
> > > > in order to build up some search refining components containing only
>
> > > > relevant values (those which correspond to at least one of the first
> > > 1000
> > > > hits). For example, the results are products and there is a store
> > filter
> > > > component that shows only the stores that sells a product between
> the
> > > > first
> > > > 1000 hits. So even if the user sees just the first 20, I would have
> to
> > > > inspect the first 1000. I've read that Hits mantains a cache of
> about
> > > 100
> > > > or
> > > > 200 hits. Is this configurable? If I could set this cache to 1000 I
> > > would
> > > > then use Hits to browse the search results. Another way, I should
> use
> > > > HitCollector. What's your advice?
> > > >
> > > > TIA
> > > > Cheers,
> > > > Carlos
> > > >
> > >
> >
>

------=_Part_145047_7154062.1180025404815--

From java-user-return-28277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 17:05:10 2007
Return-Path: <java-user-return-28277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9615 invoked from network); 24 May 2007 17:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 17:05:06 -0000
Received: (qmail 18414 invoked by uid 500); 24 May 2007 17:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18351 invoked by uid 500); 24 May 2007 17:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18328 invoked by uid 99); 24 May 2007 17:04:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:04:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.56.150.16] (HELO mail.globaldesigns.ca) (64.56.150.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:04:46 -0700
Received: from 192.168.0.100 [72.29.233.189] by mail.globaldesigns.ca with ESMTP
  (SMTPD-8.22) id A59801F8; Thu, 24 May 2007 11:04:24 -0600
Subject: Re: Who has sample code of remote multiple servers multiple
	indexes searching?
From: "Su.Cheng" <su.cheng@playstarmusic.com>
To: java-user@lucene.apache.org
In-Reply-To: <1179949967.26630.6.camel@localhost.localdomain>
References: <1179949967.26630.6.camel@localhost.localdomain>
Content-Type: text/plain
Date: Thu, 24 May 2007 11:04:24 -0600
Message-Id: <1180026264.26630.12.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.2 (2.0.2-8) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I found the problem. The version of Lucene on server is 2.1 while on
client is 1.9.

Thanks
 

On Wed, 2007-05-23 at 13:52 -0600, Su.Cheng wrote:
> Hi,
> I studied "5.6 Searching across multiple Lucene indexes 178" in <<Lucene
> in action>>.
> 
> I have 2 remote serarch computers(SearchServer) work as index servers
> and search requests from a search client(SearchClient,the 3rd
> computer). 
> 
> An error message, "Exception in thread "main"
> java.rmi.UnmarshalException", was thrown out.
> 
> Does someone can explain with sample code about multiple-index servers
> and multiple indexes in single server?
> 
> Thanks.
> 
> Below are the source code:
> ////////////////SearchServer.java/////////////////////
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.ParallelMultiSearcher;
> import org.apache.lucene.search.RemoteSearchable;
> import org.apache.lucene.search.Searchable;
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.search.MultiSearcher;
> 
> import java.io.File;
> import java.io.IOException;
> import java.rmi.Naming;
> import java.rmi.registry.LocateRegistry;
> 
> public class SearchServer {
>   private static final String m_disk1="/usr/local/eBingBong/"; //English
>   private static final String m_disk2="/backup/eBingBong/"; //other
> languages
>   private static Searchable []m_searchables;
> 
>   public static void main(String[] args) throws Exception {
>     if (args.length != 1) {
>       System.err.println("Usage: SearchServer <IP>");
>       System.err.println("java -Xms1000m -Xmx2000m SearchServer 161");
>       System.exit(-1);
>     }
> 
>     FindIndex();
>     
>     LocateRegistry.createRegistry(1099);
> 
>     Searcher multiSearcher = new MultiSearcher(m_searchables);
>     RemoteSearchable multiImpl = new RemoteSearchable(multiSearcher);
>     //Naming.rebind("//192.168.10.175/LIA_Multi", multiImpl);
>     Naming.rebind("//192.168.10." +args[0] + "/LIA_Multi", multiImpl);
> 
>     Searcher parallelSearcher = new ParallelMultiSearcher
> (m_searchables);
>     RemoteSearchable parallelImpl = new RemoteSearchable
> (parallelSearcher);
>     //Naming.rebind("//192.168.10.175/LIA_Parallel", parallelImpl);
>     Naming.rebind("//192.168.10." + args[0] + "/LIA_Parallel",
> parallelImpl);
> 
>     System.out.println("Server started");
>   }
>   private static void FindIndex()
>     {
>     File   []file=new File[10];
>     File tmpFile;
>     int i=0;
> 
>     tmpFile=new File(m_disk1,"english");  if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"chinese");  if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"japanese"); if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"korean");   if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"czech");    if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"german");   if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"greek");    if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"french");   if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"dutch");    if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     tmpFile=new File(m_disk2,"russian");  if(tmpFile.exists()) file[i+
> +]=tmpFile;
>     
>     m_searchables = new Searchable[i];
>     for (int j = 0; j < i; j++) 
>       {
>       try
>       {
>       m_searchables[j] = new IndexSearcher(file[j].getAbsolutePath());
>       }
>       catch(IOException e) {}
>       System.out.println(file[j].getAbsolutePath());
>       }
> 
>     }
>   }
> /////////////////////////SearchClient.java///////////////////////
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.MultiSearcher;
> import org.apache.lucene.search.ParallelMultiSearcher;
> import org.apache.lucene.search.Searchable;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.queryParser.QueryParser;
> 
> import java.rmi.Naming;
> import java.util.Date;
> import java.util.HashMap;
> 
> public class SearchClient {
>   private static HashMap searcherCache = new HashMap();
>   private static String[] m_args;
> 
>   public static void main(String[] args) throws Exception {
>     m_args=args;
>     if (args.length < 2) {
>       System.err.println("Usage: SearchClient <query> <IP1> <IP2>
> <...>");
>       System.err.println("java -Xms1000m -Xmx2000m SearchClient oil 161
> 163");
>       System.exit(-1);
>     }
> 
>     String word = args[0];
> 
>     // warm up the VM with several of each search
>     for (int i=0; i < 5; i++) {
>       search("LIA_Multi", word);
>       search("LIA_Parallel", word);
>     }
>   }
> 
>   private static void search(String name, String word)
>       throws Exception {
>     //TermQuery query = new TermQuery(new Term("contents",
> word));//content //contents
>     QueryParser parser=new QueryParser("content",new StandardAnalyzer
> ());
>     //parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>     parser.setDefaultOperator(QueryParser.AND_OPERATOR);
>     Query  query = parser.parse(word);
>     System.out.println(query.toString());        
> 
>     //MultiSearcher searcher =   (MultiSearcher) searcherCache.get
> (name);
>     ParallelMultiSearcher searcher =   (ParallelMultiSearcher)
> searcherCache.get(name);
> 
>     if (searcher == null) 
>     {
>     int serverSum=m_args.length-1;
>     Searchable []remoteSearch=new Searchable[serverSum];
>     //remoteSearch[0]=lookupRemote("//192.168.10.156/",name);
>     //remoteSearch[1]=lookupRemote("//192.168.10.175/",name);
>     for(int suc=0; suc<serverSum; suc++) remoteSearch[suc]=lookupRemote
> ("//192.168.10."+m_args[suc+1]+"/",name);
> 
>     //searcher = new MultiSearcher(remoteSearch);
>     searcher = new ParallelMultiSearcher(remoteSearch);
>     searcherCache.put(name, searcher);
>     }    
> 
>     long begin = new Date().getTime();
>     Hits hits = searcher.search(query);
>     long end = new Date().getTime();
> 
>     System.out.println("Searched " + name +
>         " for '" + word + "' (" + (end - begin) + " ms): ");
> 
>     if (hits.length() == 0) {
>       System.out.print("<NONE FOUND>");
>       return;
>     }
>     else System.out.println("hit="+hits.length());
> 
>     //for (int i = 0; i < hits.length(); i++) {
>     for (int i = 0; i < 3; i++) {
>       Document doc = hits.doc(i); //java.io.InvalidClassException:
> org.apache.lucene.document.Document;
>       
> 	//String[] values = doc.getValues("syn");
>       //for (int j = 0; j < values.length; j++) {
>         //System.out.print(values[j] + " ");
> 	
> 	System.out.println(doc.get("url")+"\n");	
>       
>     }
>     System.out.println(hits.length());
>     //System.out.println();
> 
>     // DO NOT CLOSE searcher!
>   }
> 
>   private static Searchable lookupRemote(String IP, String name)
>       throws Exception {
>     return (Searchable) Naming.lookup(IP + name);
>   }
> }
> 
-- 
Su.Cheng <su.cheng@playstarmusic.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 17:20:42 2007
Return-Path: <java-user-return-28278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23188 invoked from network); 24 May 2007 17:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 17:20:40 -0000
Received: (qmail 68294 invoked by uid 500); 24 May 2007 17:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68229 invoked by uid 500); 24 May 2007 17:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68164 invoked by uid 99); 24 May 2007 17:20:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:20:37 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:20:31 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HrGyx-0003CE-6s
	for java-user@lucene.apache.org; Thu, 24 May 2007 10:20:11 -0700
Message-ID: <10788664.post@talk.nabble.com>
Date: Thu, 24 May 2007 10:20:11 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I have an ID field which I index using the KeywordAnalyzer. Since this
analyzer tokenizes the entire stream as a single token, would you say the
end result is the same as using any analyzer and specifying this ID field as
untokenized? The latter approach does not use the analyzer so would that be
more "performant" than the KeywordAnalyzer since there is no call into the
analyzer's tokenization method? Is either approach acceptable or is there
one "proper" way of indexing fields where the entire field value requires an
exact match, i.e. untokenized? Thanks!

-Terry
-- 
View this message in context: http://www.nabble.com/KeywordAnalyzer-vs.-Field.Index.UN_TOKENIZED-tf3811563.html#a10788664
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 17:25:56 2007
Return-Path: <java-user-return-28279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26411 invoked from network); 24 May 2007 17:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 17:25:55 -0000
Received: (qmail 83630 invoked by uid 500); 24 May 2007 17:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83422 invoked by uid 500); 24 May 2007 17:25:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83411 invoked by uid 99); 24 May 2007 17:25:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:25:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:25:47 -0700
Received: by ug-out-1314.google.com with SMTP id m2so592296uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 10:25:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EV/vxdxTG0zGN42vt6ZA5bGRjH6c+HwMRbtVGnkeb9t29hN/oBjJsfMdmJpPYaoNwMNYiwfG0yb5b4068cz607JwFtlfA/lZTvayG9+bzgEK8NMLxG2UDWyLdRLO0tUt9J9cFwMger/MNorRKvyusl3hv4jHTxhu155FB0YEXnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PpSv7gtxMWbAzPqXrNoHTni2L1EO3lDoAxNKX9/+ZiFKYMAaLA9y3TCgNISBTI1mE/DuXTyq9TPgauER+Qm5uiq2z99SkZQfg4ADVIMLTvdTWmT9QjJKGsx1VkRFQUJ7P4VqnuOGPkbIdavDS6QQ8VlduqR3ORBB/V2FgMLAtI4=
Received: by 10.82.177.3 with SMTP id z3mr3654283bue.1180027525059;
        Thu, 24 May 2007 10:25:25 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 10:25:24 -0700 (PDT)
Message-ID: <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
Date: Thu, 24 May 2007 13:25:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86305_10192269.1180027524837"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86305_10192269.1180027524837
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> Hi all,
>
> Is there any guaranty that the maxDoc returned by a reader will be about
> the
> total number of indexed documents?



No. It will always be at least as large as the total documents. But that
will also count deleted documents.

Why wouldn't numdocs serve?

Best
Erick


The motivation of this question is that I want to associate some info to
> each document in the index, and in order to access this additional data in
> O(1) I would like to do this through an array indexing. But the array size
> shouldn't be a lot greater than the total number of documents. I see that
> something similar is done in the example of section 6.1 of Lucene in
> Action,
> but for sorting purposes, which is not my case.
>
> Related to this: how can update my array of extra data when documents are
> added/removed to/from the index? Is there any feedback mechanism by means
> of
> callbacks or event handlers?
>
> Thank you in advance.
> Regards,
> Carlos
>

------=_Part_86305_10192269.1180027524837--

From java-user-return-28280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 17:32:20 2007
Return-Path: <java-user-return-28280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29694 invoked from network); 24 May 2007 17:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 17:32:19 -0000
Received: (qmail 97978 invoked by uid 500); 24 May 2007 17:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96943 invoked by uid 500); 24 May 2007 17:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96932 invoked by uid 99); 24 May 2007 17:32:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:32:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.11 as permitted sender)
Received: from [216.34.207.11] (HELO smtp2.corp.valueclick.com) (216.34.207.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 10:32:10 -0700
X-IronPort-AV: E=Sophos;i="4.14,574,1170662400"; 
   d="scan'208,217";a="148489040"
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp2.corp.valueclick.com with ESMTP; 24 May 2007 10:31:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C79E29.697D581F"
Subject: Improving Search Performance on Large Indexes
Date: Thu, 24 May 2007 10:31:49 -0700
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC8015278D7@LA-EXCLUST01.corp.valueclick.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Improving Search Performance on Large Indexes
Thread-Index: AceeKWjwv3+qSC5sTPqz6ViyhV/5SA==
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C79E29.697D581F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,=20

=20

Currently we are attempting to optimize the search time against an index
that is 26 GB in size (~35 million docs) and I was wondering what
experiences others have had in similar attempts.  Simple searches
against the index are still fast even at 26GB, but the problem is our
application allows the user a lot of options in searching, which can
generate complicated queries.  Based on previous posts we decided to try
splitting our index into multiple indexes and use ParallelMultiSearcher.
When we split our single index into 6 separate ones we recorded a 25%
decrease in response time on minimal load.  We haven't done any stress
testing on it yet, has anyone noticed problems with increased load when
using ParallelMultiSearcher?  What about using machines with more
processors in combination with the ParallelMultiSearcher, does this
result in much response time improvement?  Or is the slow down primarily
with disk access?

=20

Any recommendations are welcome.=20

=20

Thanks in advance,=20

Scott

=20


------_=_NextPart_001_01C79E29.697D581F--

From java-user-return-28281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:01:22 2007
Return-Path: <java-user-return-28281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44381 invoked from network); 24 May 2007 18:01:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:01:21 -0000
Received: (qmail 62904 invoked by uid 500); 24 May 2007 18:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62871 invoked by uid 500); 24 May 2007 18:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62860 invoked by uid 99); 24 May 2007 18:01:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:01:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.207.121] (HELO web32107.mail.mud.yahoo.com) (68.142.207.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 11:01:12 -0700
Received: (qmail 6943 invoked by uid 60001); 24 May 2007 18:00:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=lEAQthYh5I1nfflvDFOXLO8lOLJu3qVphtlX/4fsatovcwPkiDn/Q4hvtqlSh49bV3JrfACCPDpn3pKKBYQkqX+dKgPq8yJ1Jjw75jFqaoAUYB4w52YWQDsyGxrVyjeriYbaJyNGm9onIjhYhr/A+X8YWdybl8eXwhU5gZ4LM3s=;
X-YMail-OSG: LbrVLG0VM1m4H5bbJhIr2lWBPCBCbAtIuFcJf2RhUBnlc4_FxxWkn3Vxvu_hBnhv5ICltLcnzJ8H.TjSzVCROjdrt2lx4mwulQ8n_Cyp8NY8
Received: from [209.191.118.120] by web32107.mail.mud.yahoo.com via HTTP; Thu, 24 May 2007 11:00:49 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 11:00:49 -0700 (PDT)
From: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
Subject: Res: How to search more than one word?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1990992549-1180029649=:5894"
Message-ID: <923311.5894.qm@web32107.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1990992549-1180029649=:5894
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I will try to resume the code:=0A=0AINDEX TIME=0A- IndexWriter writer =3D n=
ew IndexWriter(indexDir, new StandardAnalyzer(), true);=0A- writer.setUseCo=
mpoundFile(false);=0A- while has files into the given dir...=0A- Document d=
oc =3D new Document();=0A- doc.add(new Field("content", new FileReader(file=
)));=0A- doc.add(new Field("filename", file.getPath(), Field.Store.YES, Fie=
ld.Index.UN_TOKENIZED));=0A- writer.addDocument(doc);=0A- end while.=0A- wr=
iter.optimize();=0A- writer.close();=0ASEARCH TIME=0A- Directory directory =
=3D FSDirectory.getDirectory(indexDir, false);=0A- IndexSearcher reader =3D=
 new IndexSearcher(directory);=0A- Hits hits =3D reader.search(new TermQuer=
y(new Term ("content",keyWordToSearch)));=0A- Iterator<Hit> i =3D hits.iter=
ator();=0A- while (i.hasNext()){=0A- Hit hit =3D i.next();=0A- Document d =
=3D(Document) hit.getDocument();=0A- d.get("filename")=0A=0AAnd so, I take =
the name of the file where the word was found into to do what need to do...=
=0AI can do when I use only one key word, but more than that, or, if I use =
some word than I know than is found with the operator "+", I can=B4t find t=
hat! :(=0A =0ASo, for the Erick questions:=0A1- In particular, what analyze=
rs you use at index and search time.=0A    Answer: Standard, only at index =
time! That=B4s wrong?!=0A2- What the string was originally and how you inde=
xed it.=0A    Answer: I use html, htm and txt files! How I index, is above!=
=0A3- What query.toString() shows you.=0A    Answer: I used no query! Only =
the reader.search()...=0A=0AIf I write some thing wrong, I=B4m sorry... :P=
=0A=0AThanks in advance! ;)=0A=0A=0A----- Mensagem original ----=0ADe: Eric=
k Erickson <erickerickson@gmail.com>=0APara: java-user@lucene.apache.org=0A=
Enviadas: Quinta-feira, 24 de Maio de 2007 13:36:12=0AAssunto: Re: How to s=
earch more than one word?=0A=0ANot until you give us more information <G>.=
=0A=0AIn particular, what analyzers you use at index and search time.=0AWha=
t the string was originally and how you indexed it.=0AWhat query.toString()=
 shows you.=0A=0ABest=0AErick=0A=0AOn 5/24/07, Rodrigo F Valverde <rodrigof=
valverde@yahoo.com.br> wrote:=0A>=0A> Hi all!=0A>=0A> I implemented a searc=
her with Lucene and i=B4m trying to search two words,=0A> the both into the=
 same text file, but...i can=B4t!=0A>=0A> When I search the first word and =
the second separated, everithing happens=0A> ok, but when together, with or=
 wtithout "AND" or "+"...nothing is found! :(=0A>=0A> Can somebody help me?=
=0A>=0A>=0A>=0A> __________________________________________________=0A> Fal=
e com seus amigos  de gra=E7a com o novo Yahoo! Messenger=0A> http://br.mes=
senger.yahoo.com/=0A=0A=0A=0A=0A=0A=0A_____________________________________=
_____________=0AFale com seus amigos  de gra=E7a com o novo Yahoo! Messenge=
r =0Ahttp://br.messenger.yahoo.com/ 
--0-1990992549-1180029649=:5894--

From java-user-return-28282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:05:54 2007
Return-Path: <java-user-return-28282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48197 invoked from network); 24 May 2007 18:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:05:53 -0000
Received: (qmail 74196 invoked by uid 500); 24 May 2007 18:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74170 invoked by uid 500); 24 May 2007 18:05:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74034 invoked by uid 99); 24 May 2007 18:05:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:05:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:05:31 -0700
Received: by an-out-0708.google.com with SMTP id b20so96636ana
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 11:04:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UjVxA6q8RQQDVlfQyHcDlBhahM2HxCFJbZqdpgkBzVujN7Ub3Z+t/vSdQxfpy1w0Uo5OrO3T09Rj0k1JmbXZj4xOBdPTWZWVY4JHhsglBo0n31hAx2H+up6yXWw5lMcNbHflKa6gzLw/nCnRpQr7r4+Y+Xkx6PA5FJ9fVQaeaus=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UipHfiw0J+7GkvBWvdGRAUKLYH1faTgoAm+ztwUQhaoglvt6NDEmDOHzNceVSSmlOFX5iOk32NN5TLEdqG71AyTYquERM3qVGXigeQHjmbPmwhrVpg9zaomjxnDAMIw9qBweSzTaxeEXiEqb+pkeEO90BxAsE4dMVmxnpQLp/5o=
Received: by 10.114.171.1 with SMTP id t1mr1035492wae.1180029888179;
        Thu, 24 May 2007 11:04:48 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 11:04:48 -0700 (PDT)
Message-ID: <7798eaa0705241104h1f2c1984kb21f85802ac67477@mail.gmail.com>
Date: Thu, 24 May 2007 15:04:48 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_146283_13240037.1180029888128"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_146283_13240037.1180029888128
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Why wouldn't numdocs serve?


Because the document id (which is the array index) would be in the range 0
... maxDoc and not 0 ... numDocs, wouldn't it?

Cheers,
Carlos

Best
> Erick
>
>
> The motivation of this question is that I want to associate some info to
> > each document in the index, and in order to access this additional data
> in
> > O(1) I would like to do this through an array indexing. But the array
> size
> > shouldn't be a lot greater than the total number of documents. I see
> that
> > something similar is done in the example of section 6.1 of Lucene in
> > Action,
> > but for sorting purposes, which is not my case.
> >
> > Related to this: how can update my array of extra data when documents
> are
> > added/removed to/from the index? Is there any feedback mechanism by
> means
> > of
> > callbacks or event handlers?
> >
> > Thank you in advance.
> > Regards,
> > Carlos
> >
>

------=_Part_146283_13240037.1180029888128--

From java-user-return-28283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:25:06 2007
Return-Path: <java-user-return-28283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65498 invoked from network); 24 May 2007 18:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:25:05 -0000
Received: (qmail 16292 invoked by uid 500); 24 May 2007 18:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16214 invoked by uid 500); 24 May 2007 18:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16203 invoked by uid 99); 24 May 2007 18:25:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:25:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:24:57 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 3750F5C371
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 11:24:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ae6f38f60705240822gbacf95cv2e4611d82616d10b@mail.gmail.com>
References: <ae6f38f60705240822gbacf95cv2e4611d82616d10b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <378CE895-B64A-4933-9593-09C2A7016685@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
Date: Thu, 24 May 2007 14:24:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the DisjunctionMaxQuery, I think it might help,  
although I am not sure it will fully cover your case.

-Grant

On May 24, 2007, at 11:22 AM, Walt Stoneburner wrote:

> Hi,
>
>  I'm trying to figure what I need to do with Lucene to score a
> document higher when it has a larger number of unique search terms
> that are hit, rather than term frequency counts.
>
>  A quick example.
>
>  If I'm searching for "BIRD CAT DOG" (all should clauses), then I want
>
>   ...a document with BIRD, CAT, and DOG terms, each only  appearing
> once, in it to score higher than
>
>   ...a document with BIRD, CAT, CAT, CAT, CAT, CAT, CAT, CAT.
>
>  The rationale behind this is that if something "fits" my query
> better by hitting more terms, I don't want it to be drowned out by a
> document that simply mentions a subset of keywords a lot of times.
>
>  And, the tricky part: ideally I'd like to be able to switch between
> the two schemes, so the user can get documents scored wither way.
>
>
>  So are I've been reading the 'score and frequency' thread at
> http://www.gossamer-threads.com/lists/lucene/java-user/8916, where
> Niraj seems to have a similar problem.  He tries things overriding
> term frequencies, tf(), and setting the default similarity.
>
>  Unfortunately, it isn't long before the reply chain is 18 layers
> deep (I counted), and it never becomes clear if a solution was
> resolved, so I wasn't certain if I was on the right research path or
> not.  It started to appear that some of the scoring might be done at
> index time, but that didn't make sense to me, since weights and such
> can be done at query time.
>
>  Is there any way to have Lucene score based on the discrete number
> of unique terms found, rather than how often a given term appears in a
> document?
>
> Thanks,
> -wls
> ps.  When replying to this, it'd be great if not pertinent content to
> the reply were trimmed in the response.  I don't want to cause a
> similar message snowball to roll down the hill, picking up angle
> brackets along the way.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:31:30 2007
Return-Path: <java-user-return-28284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69322 invoked from network); 24 May 2007 18:31:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:31:28 -0000
Received: (qmail 32454 invoked by uid 500); 24 May 2007 18:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32415 invoked by uid 500); 24 May 2007 18:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32403 invoked by uid 99); 24 May 2007 18:31:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:31:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:31:21 -0700
Received: by nz-out-0506.google.com with SMTP id i1so557397nzh
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 11:31:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MlsTnonsaCuVu4b/Rci45+o71odnOFaUy25sz62yU7sHL6D5bj4FFT9ob7qZVUykiS1IWeh5ktOZNrrcehUzWy+kmHXeyJ3Y3cXmP7aSqldnmLXBh2xA1kvBRdiM4wEvKO054v6bmKc/rw61dGxJLKhsVlmYn9g3xjXteoKxB/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mFiNnXuU8PKYD8ezk5hQt3MzjULy9TxpJ1r2NzfOX+p1GPYfR7L2nty4+cbC0V8OE42qmK/gCLHCr1dLvoIUVhKSEZIcKT2paNe1QGTBDO9GCzyl4FmpxIgXp+NoE124ZbwOL9n06H7WVrEkuoMTdX/6LUx4B4BsOuIAfZSHFXM=
Received: by 10.115.54.1 with SMTP id g1mr1046627wak.1180031459202;
        Thu, 24 May 2007 11:30:59 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 11:30:59 -0700 (PDT)
Message-ID: <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
Date: Thu, 24 May 2007 15:30:59 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_147024_32263607.1180031459169"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_147024_32263607.1180031459169
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
>
> No. It will always be at least as large as the total documents. But that
> will also count deleted documents.



Do you mean that deleted document ids won't be reutilized, so the index
maxDoc will grow more and more with time? Isn't there any way to compress
the range? It seems strange to me, considering that an example in the book
suggests to use the document id as an array index for an array of maxDoc
elements.

Cheers,
Carlos

Why wouldn't numdocs serve?
>
> Best
> Erick
>
>
> The motivation of this question is that I want to associate some info to
> > each document in the index, and in order to access this additional data
> in
> > O(1) I would like to do this through an array indexing. But the array
> size
> > shouldn't be a lot greater than the total number of documents. I see
> that
> > something similar is done in the example of section 6.1 of Lucene in
> > Action,
> > but for sorting purposes, which is not my case.
> >
> > Related to this: how can update my array of extra data when documents
> are
> > added/removed to/from the index? Is there any feedback mechanism by
> means
> > of
> > callbacks or event handlers?
> >
> > Thank you in advance.
> > Regards,
> > Carlos
> >
>

------=_Part_147024_32263607.1180031459169--

From java-user-return-28285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:38:58 2007
Return-Path: <java-user-return-28285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73939 invoked from network); 24 May 2007 18:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:38:57 -0000
Received: (qmail 55242 invoked by uid 500); 24 May 2007 18:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55208 invoked by uid 500); 24 May 2007 18:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55193 invoked by uid 99); 24 May 2007 18:38:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:38:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:38:48 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 24 May 2007 11:38:26 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to filter fields with hits from result set
Date: Thu, 24 May 2007 11:38:16 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278013B1C9F@WDCCPMAIL01.markettools.com>
In-Reply-To: <359a92830705231404r25c65202lf0339e25333847c5@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to filter fields with hits from result set
Thread-Index: AcedfhKxB4xYcDaqQrOwvDztRlUfzgAs8zcw
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com> <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com> <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com> <359a92830705231404r25c65202lf0339e25333847c5@mail.gmail.com>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 May 2007 18:38:26.0224 (UTC) FILETIME=[B72F6B00:01C79E32]
X-Virus-Checked: Checked by ClamAV on apache.org

Eric,

I was pursuing a different direction yesterday which is not fast enough.
Basically I was using the highlighter to figure out if a page has a hit
or not.  But that is too expensive.  I end up with 15 ms per page and
that sums up.

I have to allow ad-hoc queries, so it sounds like the solution will not
be trivial from what I understand from your reply.

Just one question before I start using the SpanQuery approach:  Do you
have anything you can say about performance regarding your solution?
How many pages per document in average you have to deal with? How
performant or expensive is the approach?

As usual, many thanks in advance for your input.

Andreas



-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, May 23, 2007 2:05 PM
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set

Two things to watch...

1> Think about indexing the special page-end token with an
increment gap of 0 (see SynonymAnalyzer in Lucene In
Action). That preserves the sense of phrases across
page breaks.

2> Assembling the span query is tricky. Search the mail archive
for SpanQuery to see an exchange I had with the originator of
this concept. Suffice it to say that converting an ad-hoc query
into a set of SpanQueries is not trivial, but it certainly is do-able.
But you'd have a much easier time of it if you were able to
control the queries and dis-allow ad-hoc queries. It all depends
upon the requirements of the application. Any time you can
avoid supporting arbitrary boolean logic for the user input, your
job is easier <G>....

But you should be able to run up a demo with simple queries that
you control to prove out the methodology in any case.....

Best
Erick


On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Eric,
>
> Thank you very much for your response.  That sounds very interesting.
> Let me do some experimenting to see if I fully understood your
solution.
> Otherwise I have to come back to you with more questions.
>
> Andreas
>
>
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, May 23, 2007 12:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to filter fields with hits from result set
>
> As luck would have it, I've done something very similar. What I had
> to do is index a special token at the end of each page. Then I could
> get the term offsets for each page....
>
> Then I used one of the SpanQuery.getSpans to get all of the
> offsets of the hits throughout all of the pages.
>
> now I have a list of all the offsets of the *last* term on each
> page and a list of the offsets of the hits. From these two
> lists I can know which pages have hits.
>
>
> Best
> Erick
>
> On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> >
> > Hi,
> >
> > If a search returns a document that has multiple fields with the
same
> > name, is there a way to filter only those fields that contain hits?
> >
> >
> > Background:
> >
> > I am indexing documents and we store all content in our index for
> > display reasons.  We want to show only those pages containing hits.
> My
> > first implementation was saving each page in a Lucene document.  For
> > performance reasons why are now looking into indexing the complete
> > indexed document as a single Lucene document.
> >
> > Every page is added to a field in the Lucene document named
> > page-content.  That means I am ending with as many fields named
> > page-content as the document has pages.
> >
> > My search now returns me a single Lucene document in contrary to my
> > first approach with page per Lucene document.  My problem right now
> is:
> > how can I limit the returned page-contents fields for pages to those
> > field entries that contain hits.  If I have hits on pages five pages
> > from a document with 10 pages I would like to have only the pages
with
> > the hits, not all.
> >
> > Is there anything in Lucene that limits the returned fields to
fields
> > with hits only?
> >
> > Thanks in advance,
> >
> > Andreas
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:39:11 2007
Return-Path: <java-user-return-28286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74056 invoked from network); 24 May 2007 18:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:39:09 -0000
Received: (qmail 56898 invoked by uid 500); 24 May 2007 18:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56854 invoked by uid 500); 24 May 2007 18:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56841 invoked by uid 99); 24 May 2007 18:39:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:39:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 11:38:59 -0700
Received: (qmail 39760 invoked by uid 60001); 24 May 2007 18:38:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=S01K5bVFWp5/Wyd7oeXOrBR3C1wZhoAcamIwcf+kXwBvSo3dttXEw+6cf/ciHCuqOkobbMABSFB3D9HMSK+TiVS8uZVoUrxcy/zdjZHxfOQsCRrza74TcN5N/GuodyLhC4vM6Mr4L52rx1QvBsa18AKrbhdihyiIjvHurX6M3R4=;
X-YMail-OSG: mMwFgMcVM1liNP75OTP6fKb1hsT1JpV4yXeJgk9LA83.krie7Z6YF1K7DmCBXv7QPlPSgLQlOraq1eQfIvS8MuZGXQjIF.IsyPCkKsbG6D3idc2tio5btAmRdqfF5zCHxaoaPJCkdCtvCQ0-
Received: from [208.66.64.47] by web50306.mail.re2.yahoo.com via HTTP; Thu, 24 May 2007 11:38:38 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 11:38:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Improving Search Performance on Large Indexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <7162.39295.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Scott,

Yes, take your big index and split it into multiple smaller shards.  Put those shards in different servers and then query them remotely (using the provided RMI thing in Lucene or using something custom), take top N results from each searcher, merge those, and take top N from the merged result set.

You could also experiment with a memory mapped Directory implementation.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Scott Sellman <ssellman@valueclick.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 24, 2007 1:31:49 PM
Subject: Improving Search Performance on Large Indexes

Hello, 

 

Currently we are attempting to optimize the search time against an index
that is 26 GB in size (~35 million docs) and I was wondering what
experiences others have had in similar attempts.  Simple searches
against the index are still fast even at 26GB, but the problem is our
application allows the user a lot of options in searching, which can
generate complicated queries.  Based on previous posts we decided to try
splitting our index into multiple indexes and use ParallelMultiSearcher.
When we split our single index into 6 separate ones we recorded a 25%
decrease in response time on minimal load.  We haven't done any stress
testing on it yet, has anyone noticed problems with increased load when
using ParallelMultiSearcher?  What about using machines with more
processors in combination with the ParallelMultiSearcher, does this
result in much response time improvement?  Or is the slow down primarily
with disk access?

 

Any recommendations are welcome. 

 

Thanks in advance, 

Scott

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:40:13 2007
Return-Path: <java-user-return-28287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74719 invoked from network); 24 May 2007 18:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:40:12 -0000
Received: (qmail 64808 invoked by uid 500); 24 May 2007 18:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64772 invoked by uid 500); 24 May 2007 18:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64757 invoked by uid 99); 24 May 2007 18:40:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:40:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 11:40:04 -0700
Received: (qmail 26126 invoked by uid 60001); 24 May 2007 18:39:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=rfe+WPelhqQmom+T29eDXtdCRMICUpqb8xR6vXs3fBS1PEKGga0NajI/yZziXeDh3yK2Eyq7ufvCbbdXR6WRJRxn4Yt1mDGbZWnx6gQByGRvt2BdYAr+o4D2YFcOQM0sAZ5R/TN9mxfsjDLGFS6sihSLoNvip7Xt8GXJDPOZzrI=;
X-YMail-OSG: MvEqjzcVM1n8Y1enTGdmxwU9oRjJDBLoTYAxe73ISPXYmvYXNA8aeBYil6UzyPx96ZwXwP.AY1UupNbbAkuPnPPeVjSw9I5MsRtLGBqkB.xBVhV35DvjTqCcXV1Up9GMDRfkqKVxRn1lccA-
Received: from [208.66.64.47] by web50305.mail.re2.yahoo.com via HTTP; Thu, 24 May 2007 11:39:43 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 11:39:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <504970.25325.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Terry,
I think you are right.  Just use UN_TOKENIZED, that will do what you need.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 24, 2007 1:20:11 PM
Subject: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED


Hi all,

I have an ID field which I index using the KeywordAnalyzer. Since this
analyzer tokenizes the entire stream as a single token, would you say the
end result is the same as using any analyzer and specifying this ID field as
untokenized? The latter approach does not use the analyzer so would that be
more "performant" than the KeywordAnalyzer since there is no call into the
analyzer's tokenization method? Is either approach acceptable or is there
one "proper" way of indexing fields where the entire field value requires an
exact match, i.e. untokenized? Thanks!

-Terry
-- 
View this message in context: http://www.nabble.com/KeywordAnalyzer-vs.-Field.Index.UN_TOKENIZED-tf3811563.html#a10788664
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:41:59 2007
Return-Path: <java-user-return-28288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75790 invoked from network); 24 May 2007 18:41:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:41:58 -0000
Received: (qmail 69553 invoked by uid 500); 24 May 2007 18:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69508 invoked by uid 500); 24 May 2007 18:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69497 invoked by uid 99); 24 May 2007 18:41:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:41:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 11:41:50 -0700
Received: (qmail 41107 invoked by uid 60001); 24 May 2007 18:41:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=xDUHQ+76FMhQU7wziPEQFKB/aFL/0lmcM5VbfTZwfKUvzlcp7k6tgBgsdESX1FwcesQS2pW1/S8YhH0lXeUrppSZ4a074uC9IAfwEHmSiiS9fNKQCI3EYNedwEdcv+tpMxNvZUJ8PVSQarzYWWZ+WmjCHo/GSvcPyUm6/fNWTtw=;
X-YMail-OSG: i4hb8rUVM1mkct2Nw4.0rijT98VsrwnFb47e4I9Ii6ep5BlFhjk18TbUfkDy8hvKkg--
Received: from [208.66.64.47] by web50306.mail.re2.yahoo.com via HTTP; Thu, 24 May 2007 11:41:29 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 11:41:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: HitCollector or Hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <855216.40955.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Carlos,
It sounds like you'll have to build logic that knows when the index has been reopened and repopulates your cache.  Take a look at Solr, it does this type of stuff.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Carlos Pita <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 24, 2007 12:50:04 PM
Subject: Re: HitCollector or Hits

Hi Erick,

I don't think that FieldSelector would be that valuable in my case because I
just need to access a few fields, and those are all fields that are in fact
stored (and indexed too). I was thinking of keeping this extra information
in memory, precisely into an array mapping doc ids to the data structure. I
see that this is done for ScoreDocComparator in a Lucene in Action example.
I'm still not sure how to achieve something similar with a HitCollector. I
mean, I could instantiate a maxDoc() size array and index it by the document
ids that are passed to the collector. But that said, I don't know how to
keep this array synchronized with the index. I've opened a new thread for
this subject, "maxDoc and arrays".

Thank you again.
Cheers,
Carlos

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> You're on the right track. But that said, access to anything that's
> indexed (stored or not) should be pretty quick. Things
> stored, but not indexed, are costlier. This might drive your
> decision on what to index .vs. store.....
>
> Loading the document is anything like IndexReader.document(), or
> Hits.doc().
>
> Part of the difference is that if you load the document, you get
> all the fields, whether you need them or not.
>
> Also, you can use your own TermEnum/TermDocs lookup for
> this kind of thing if the terms you're interested in are indexed...
>
> I wrote a mail some time ago that detailed my experience, in my
> situation with my peculiar data set that you may want to read,
> see...
>
> Lucene 2.1, using FieldSelector speeds up my app by a factor of 10+,
>
>
> As I mentioned in that message, I suspect that my improvement was
> *highly* dependent upon how the index is structured.....
>
> All that said, your notion of benchmarking is a very good one. It lead
> me to using FieldSelector in the first place...
>
> Best
> Erick
>
> On 5/24/07, Carlos Pita <carlosjosepita@gmail.com > wrote:
> >
> > Hi Erick,
> >
> > thank you for your prompt answer. What do you mean by loading the
> > document?
> > Accessing one of the stored fields? In that case I'm afraid I would need
>
> > to
> > do it. For example, in the aforementioned case of a result of products,
> I
> > have to look at any product store_id, which is stored along the
> document.
> > Is
> > this a performance killer? Maybe I should keep some tables in memory,
> for
> > example an array mapping from id to store_id in O(1). I will do some
> > benchmarking before anyway.
> >
> > Cheers,
> > Carlos
> >
> > On 5/24/07, Erick Erickson < erickerickson@gmail.com> wrote:
> > >
> > > I know of no way to alter the Hits behavior, I recommend using
> > > a TopDocs/TopDocCollector.
> > >
> > > But be aware that if you load the document for each one, you may incur
>
> > > a significant penalty, although the lazy-loading helped me a lot, see
> > > FieldSelector.....
> > >
> > > On 5/23/07, Carlos Pita <carlosjosepita@gmail.com > wrote:
> > > >
> > > > Hi folks,
> > > >
> > > > I need to collect some global information from my first 1000 search
> > > > results
> > > > in order to build up some search refining components containing only
>
> > > > relevant values (those which correspond to at least one of the first
> > > 1000
> > > > hits). For example, the results are products and there is a store
> > filter
> > > > component that shows only the stores that sells a product between
> the
> > > > first
> > > > 1000 hits. So even if the user sees just the first 20, I would have
> to
> > > > inspect the first 1000. I've read that Hits mantains a cache of
> about
> > > 100
> > > > or
> > > > 200 hits. Is this configurable? If I could set this cache to 1000 I
> > > would
> > > > then use Hits to browse the search results. Another way, I should
> use
> > > > HitCollector. What's your advice?
> > > >
> > > > TIA
> > > > Cheers,
> > > > Carlos
> > > >
> > >
> >
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:43:25 2007
Return-Path: <java-user-return-28289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76402 invoked from network); 24 May 2007 18:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:43:24 -0000
Received: (qmail 72829 invoked by uid 500); 24 May 2007 18:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72786 invoked by uid 500); 24 May 2007 18:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72775 invoked by uid 99); 24 May 2007 18:43:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:43:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 11:43:16 -0700
Received: (qmail 46626 invoked by uid 60001); 24 May 2007 18:42:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=OjFhqnqRn6ye4562ZH1SDQkf1Z03IvcE76FeLtWNlSVB7Z8BzyzTa1KSqdQ9yqNqCfLOkKW81iEe4DlJPqFM4ee6KtHE5FJF/18HIYgjZwIN262fQ+vS8pJU9/6eXRgqRW1nYZgkZ+bdK64hA4VVM9Xj5M5IexUKGsm0Bv5V/bY=;
X-YMail-OSG: iJZ.kGEVM1mccnkusmzUqv7RWlPzKaaHDueJMDdIlmlGnJjvAh83LCt2e7IEjVw5J5ZzfmN4KlWfuKc5SkBlzsy7Y4HR26kJmuXviyik2WVgOs8uUTM-
Received: from [208.66.64.47] by web50310.mail.re2.yahoo.com via HTTP; Thu, 24 May 2007 11:42:55 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 11:42:55 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: maxDoc and arrays
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <492655.46064.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Carlos:
Answer to your last question: No, but if you look in JIRA, Karl Wettin has written something that does have a notification mechanism that you are describing.

Otis 

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Carlos Pita <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, May 24, 2007 12:41:11 PM
Subject: maxDoc and arrays

Hi all,

Is there any guaranty that the maxDoc returned by a reader will be about the
total number of indexed documents?

The motivation of this question is that I want to associate some info to
each document in the index, and in order to access this additional data in
O(1) I would like to do this through an array indexing. But the array size
shouldn't be a lot greater than the total number of documents. I see that
something similar is done in the example of section 6.1 of Lucene in Action,
but for sorting purposes, which is not my case.

Related to this: how can update my array of extra data when documents are
added/removed to/from the index? Is there any feedback mechanism by means of
callbacks or event handlers?

Thank you in advance.
Regards,
Carlos




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 18:48:06 2007
Return-Path: <java-user-return-28290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79375 invoked from network); 24 May 2007 18:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 18:48:05 -0000
Received: (qmail 91244 invoked by uid 500); 24 May 2007 18:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91169 invoked by uid 500); 24 May 2007 18:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91141 invoked by uid 99); 24 May 2007 18:47:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:47:56 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 11:47:49 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HrILR-0005WL-4J
	for java-user@lucene.apache.org; Thu, 24 May 2007 11:47:29 -0700
Message-ID: <10790214.post@talk.nabble.com>
Date: Thu, 24 May 2007 11:47:29 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
In-Reply-To: <504970.25325.qm@web50305.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
References: <10788664.post@talk.nabble.com> <504970.25325.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Otis,

I tried both ways, did some queries, and results are the same, so I guess
it's a matter of preference???

-Terry


Otis Gospodnetic wrote:
> 
> Terry,
> I think you are right.  Just use UN_TOKENIZED, that will do what you need.
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: dontspamterry <dontspamterry@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, May 24, 2007 1:20:11 PM
> Subject: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
> 
> 
> Hi all,
> 
> I have an ID field which I index using the KeywordAnalyzer. Since this
> analyzer tokenizes the entire stream as a single token, would you say the
> end result is the same as using any analyzer and specifying this ID field
> as
> untokenized? The latter approach does not use the analyzer so would that
> be
> more "performant" than the KeywordAnalyzer since there is no call into the
> analyzer's tokenization method? Is either approach acceptable or is there
> one "proper" way of indexing fields where the entire field value requires
> an
> exact match, i.e. untokenized? Thanks!
> 
> -Terry
> -- 
> View this message in context:
> http://www.nabble.com/KeywordAnalyzer-vs.-Field.Index.UN_TOKENIZED-tf3811563.html#a10788664
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/KeywordAnalyzer-vs.-Field.Index.UN_TOKENIZED-tf3811563.html#a10790214
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 19:05:13 2007
Return-Path: <java-user-return-28291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87930 invoked from network); 24 May 2007 19:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 19:05:12 -0000
Received: (qmail 19289 invoked by uid 500); 24 May 2007 19:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19250 invoked by uid 500); 24 May 2007 19:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19239 invoked by uid 99); 24 May 2007 19:05:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 12:05:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.207.124] (HELO web32110.mail.mud.yahoo.com) (68.142.207.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 12:05:03 -0700
Received: (qmail 59503 invoked by uid 60001); 24 May 2007 19:04:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qnIGm3tRgwjteiLuwOVJDqDcd4+fxuhLynTwkVo5ttVNgVB8Ghk8BV1VscuP/eC6o7ruveOXW2q2M9/Tja+t/pnL+YrumsG6mFfhFo7i7QeCgzmortZNdm5NXmq3DNc/Isu4JEMGZ0iAbRfDxUqtxP/94v+v7onL82MBk/zagAo=;
X-YMail-OSG: o16KcQkVM1lRcVM1ySZV5xOcWCUfi4Mjn58M7zlSaeKeG1hWakPkq_ENqrvTZiCnQg--
Received: from [209.191.119.123] by web32110.mail.mud.yahoo.com via HTTP; Thu, 24 May 2007 12:04:37 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 12:04:36 -0700 (PDT)
From: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
Subject: Res: Res: How to search more than one word?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1040002815-1180033476=:58948"
Message-ID: <296017.58948.qm@web32110.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1040002815-1180033476=:58948
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi again!=0A=0AThat=B4s all diferent now!=0A=0AI=B4m no more using the "rea=
der.search()"...now, i=B4m using the QueryParser:=0A- QueryParser qp =3D ne=
w QueryParser("content", new StandardAnalyzer());=0A- query =3D qp.parse(ke=
yWordToSearch);=0Anow, it works fine! :D=0A=0ABut now I need to know the di=
ference between them! :)=0A=0AThanks! :D=0A=0A----- Mensagem original ----=
=0ADe: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>=0APara: java-user=
@lucene.apache.org=0AEnviadas: Quinta-feira, 24 de Maio de 2007 15:00:49=0A=
Assunto: Res: How to search more than one word?=0A=0AI will try to resume t=
he code:=0A=0AINDEX TIME=0A- IndexWriter writer =3D new IndexWriter(indexDi=
r, new StandardAnalyzer(), true);=0A- writer.setUseCompoundFile(false);=0A-=
 while has files into the given dir...=0A- Document doc =3D new Document();=
=0A- doc.add(new Field("content", new FileReader(file)));=0A- doc.add(new F=
ield("filename", file.getPath(), Field.Store.YES, Field.Index.UN_TOKENIZED)=
);=0A- writer.addDocument(doc);=0A- end while.=0A- writer.optimize();=0A- w=
riter.close();=0ASEARCH TIME=0A- Directory directory =3D FSDirectory.getDir=
ectory(indexDir, false);=0A- IndexSearcher reader =3D new IndexSearcher(dir=
ectory);=0A- Hits hits =3D reader.search(new TermQuery(new Term ("content",=
keyWordToSearch)));=0A- Iterator<Hit> i =3D hits.iterator();=0A- while (i.h=
asNext()){=0A- Hit hit =3D i.next();=0A- Document d =3D(Document) hit.getDo=
cument();=0A- d.get("filename")=0A=0AAnd so, I take the name of the file wh=
ere the word was found into to do what need to do...=0AI can do when I use =
only one key word, but more than that, or, if I use some word than I know t=
han is found with the operator "+", I can=B4t find that! :(=0A =0ASo, for t=
he Erick questions:=0A1- In particular, what analyzers you use at index and=
 search time.=0A    Answer: Standard, only at index time! That=B4s wrong?!=
=0A2- What the string was originally and how you indexed it.=0A    Answer: =
I use html, htm and txt files! How I index, is above!=0A3- What query.toStr=
ing() shows you.=0A    Answer: I used no query! Only the reader.search()...=
=0A=0AIf I write some thing wrong, I=B4m sorry... :P=0A=0AThanks in advance=
! ;)=0A=0A=0A----- Mensagem original ----=0ADe: Erick Erickson <erickericks=
on@gmail.com>=0APara: java-user@lucene.apache.org=0AEnviadas: Quinta-feira,=
 24 de Maio de 2007 13:36:12=0AAssunto: Re: How to search more than one wor=
d?=0A=0ANot until you give us more information <G>.=0A=0AIn particular, wha=
t analyzers you use at index and search time.=0AWhat the string was origina=
lly and how you indexed it.=0AWhat query.toString() shows you.=0A=0ABest=0A=
Erick=0A=0AOn 5/24/07, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> w=
rote:=0A>=0A> Hi all!=0A>=0A> I implemented a searcher with Lucene and i=B4=
m trying to search two words,=0A> the both into the same text file, but...i=
 can=B4t!=0A>=0A> When I search the first word and the second separated, ev=
erithing happens=0A> ok, but when together, with or wtithout "AND" or "+"..=
.nothing is found! :(=0A>=0A> Can somebody help me?=0A>=0A>=0A>=0A> _______=
___________________________________________=0A> Fale com seus amigos  de gr=
a=E7a com o novo Yahoo! Messenger=0A> http://br.messenger.yahoo.com/=0A=0A=
=0A=0A=0A=0A=0A__________________________________________________=0AFale co=
m seus amigos  de gra=E7a com o novo Yahoo! Messenger =0Ahttp://br.messenge=
r.yahoo.com/ =0A=0A=0A=0A=0A=0A____________________________________________=
______=0AFale com seus amigos  de gra=E7a com o novo Yahoo! Messenger =0Aht=
tp://br.messenger.yahoo.com/ 
--0-1040002815-1180033476=:58948--

From java-user-return-28292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 19:26:29 2007
Return-Path: <java-user-return-28292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8200 invoked from network); 24 May 2007 19:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 19:26:28 -0000
Received: (qmail 60386 invoked by uid 500); 24 May 2007 19:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60351 invoked by uid 500); 24 May 2007 19:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60340 invoked by uid 99); 24 May 2007 19:26:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 12:26:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 12:26:19 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163C79A0@mailer.syr.edu>; Thu, 24 May 2007 15:25:58 -0400
Message-ID: <4655E69C.9090100@syr.edu>
Date: Thu, 24 May 2007 15:25:16 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
References: <10788664.post@talk.nabble.com> <504970.25325.qm@web50305.mail.re2.yahoo.com> <10790214.post@talk.nabble.com>
In-Reply-To: <10790214.post@talk.nabble.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Terry,

The one place I know where KeywordAnalyzer is definitely useful is when
it is used in conjunction with PerFieldAnalyzerWrapper.

Steve

dontspamterry wrote:
> Hi Otis,
> 
> I tried both ways, did some queries, and results are the same, so I guess
> it's a matter of preference???
> 
> -Terry
> 
> 
> Otis Gospodnetic wrote:
>> Terry,
>> I think you are right.  Just use UN_TOKENIZED, that will do what you need.
>>
>> Otis
>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: dontspamterry <dontspamterry@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, May 24, 2007 1:20:11 PM
>> Subject: KeywordAnalyzer vs. Field.Index.UN_TOKENIZED
>>
>>
>> Hi all,
>>
>> I have an ID field which I index using the KeywordAnalyzer. Since this
>> analyzer tokenizes the entire stream as a single token, would you say the
>> end result is the same as using any analyzer and specifying this ID field
>> as
>> untokenized? The latter approach does not use the analyzer so would that
>> be
>> more "performant" than the KeywordAnalyzer since there is no call into the
>> analyzer's tokenization method? Is either approach acceptable or is there
>> one "proper" way of indexing fields where the entire field value requires
>> an
>> exact match, i.e. untokenized? Thanks!
>>
>> -Terry
>> -- 
>> View this message in context:
>> http://www.nabble.com/KeywordAnalyzer-vs.-Field.Index.UN_TOKENIZED-tf3811563.html#a10788664
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 19:29:40 2007
Return-Path: <java-user-return-28293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10476 invoked from network); 24 May 2007 19:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 19:29:38 -0000
Received: (qmail 67869 invoked by uid 500); 24 May 2007 19:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67649 invoked by uid 500); 24 May 2007 19:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67633 invoked by uid 99); 24 May 2007 19:29:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 12:29:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 12:29:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6F7175B76C; Thu, 24 May 2007 12:29:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 57AA17F403
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 12:29:10 -0700 (PDT)
Date: Thu, 24 May 2007 12:29:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: HitCollector or Hits
In-Reply-To: <7798eaa0705240950t4f82c79r1e479dfa31307b87@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705241227060.21753@hal.rescomp.berkeley.edu>
References: <7798eaa0705232030l25d3c4f0ja56efff2994a0a12@mail.gmail.com> 
 <359a92830705240620n648fe900yeba4ff40ae54ee91@mail.gmail.com> 
 <7798eaa0705240751j372ffb0bpdd77b830d289e6cf@mail.gmail.com> 
 <359a92830705240935h62a2ef81q6392779bbf3026ca@mail.gmail.com>
 <7798eaa0705240950t4f82c79r1e479dfa31307b87@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: just need to access a few fields, and those are all fields that are in fact
: stored (and indexed too). I was thinking of keeping this extra information
: in memory, precisely into an array mapping doc ids to the data structure. I

if the fields you need are indexed and single valued (and untokenized) the
FieldCache will do this for you.

It is also what is used for sorting, so using it instead of your own hand
rollwed cache will save you some space, not to mention simplifing the work
you have to do...

: ids that are passed to the collector. But that said, I don't know how to
: keep this array synchronized with the index. I've opened a new thread for
: this subject, "maxDoc and arrays".



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:03:14 2007
Return-Path: <java-user-return-28294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33793 invoked from network); 24 May 2007 20:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:03:11 -0000
Received: (qmail 82732 invoked by uid 500); 24 May 2007 20:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82635 invoked by uid 500); 24 May 2007 20:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82624 invoked by uid 99); 24 May 2007 20:03:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:03:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:03:02 -0700
Received: by ug-out-1314.google.com with SMTP id m2so623640uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:02:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lLUa5nK7SssLxmW5wB9r2W5A/kanYg5nm3IHTpFhPeZU4PnVEwfK5zeI//hZd1jZpBM9iFjBLm8R1qGXkMtXfMrmpM3YnuSQ90ZXUCXWkXOXX6wlRcwsrEq0qQjFGz4rcVo9MpwNlJVvr3/bXrXDnhvUC52mnm44SLAOmbXkCaI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VWZK83jgpBU58o87o51t3oam3yFW7gwc+QbLv9ypy9/clGL6qEFrTwiS3YGi2HmB5hr4j2CU9RY8DvvXY9TDbQCBxxm3KyhJi3WAw1EZbXF7JgOCyG+cykQNItdXNkTSzhoUGwYqd0uO5NDo7Zek/f8MKoq6ZzHjQwEaiLHPvEU=
Received: by 10.82.173.19 with SMTP id v19mr3896701bue.1180036960049;
        Thu, 24 May 2007 13:02:40 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 13:02:39 -0700 (PDT)
Message-ID: <359a92830705241302q302669a5n2a648daf910cc78d@mail.gmail.com>
Date: Thu, 24 May 2007 16:02:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set
In-Reply-To: <3FB08D6A21B3EC4D8749EF6D9E626278013B1C9F@WDCCPMAIL01.markettools.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87561_1735130.1180036959997"
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
	 <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com>
	 <359a92830705231404r25c65202lf0339e25333847c5@mail.gmail.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013B1C9F@WDCCPMAIL01.markettools.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87561_1735130.1180036959997
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, my data may not be too helpful. But some of the books I'm
counting hits for are a thousand-plus pages. We haven't had
performance issues, but that's only saying "no customer has
complained yet".

The old solution we used did something similar to what you're
talking about, basically streaming the highlighted text back
and counting the highlight tags (non-lucene). This is much faster.
That said, it's apples and oranges since they are two different
search engines.

One other possibility worth mentioning is MemoryIndex, which is
designed for rapid, in-memory manipulation of a single document. It
*might* work faster than what you're trying to do.

The non-trivial part is turning your ad-hoc query into a SpanQuery.
I'm not able to post that much of our company's code, so you're
on your own. But search the mail archive for a long exchange
between Mark Miller and a bunch of others under the unlikely
subject "multiword highlighting" for Marks cut at the code and
other helpful comments.....

I can't really give you performance numbers since we didn't
collect them. It's "fast enough" that the customers aren't
complaining, and the servers aren't breathing hard, so we didn't
pursue it.

Good luck!
Erick

On 5/24/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
>
> Eric,
>
> I was pursuing a different direction yesterday which is not fast enough.
> Basically I was using the highlighter to figure out if a page has a hit
> or not.  But that is too expensive.  I end up with 15 ms per page and
> that sums up.
>
> I have to allow ad-hoc queries, so it sounds like the solution will not
> be trivial from what I understand from your reply.
>
> Just one question before I start using the SpanQuery approach:  Do you
> have anything you can say about performance regarding your solution?
> How many pages per document in average you have to deal with? How
> performant or expensive is the approach?
>
> As usual, many thanks in advance for your input.
>
> Andreas
>
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Wednesday, May 23, 2007 2:05 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to filter fields with hits from result set
>
> Two things to watch...
>
> 1> Think about indexing the special page-end token with an
> increment gap of 0 (see SynonymAnalyzer in Lucene In
> Action). That preserves the sense of phrases across
> page breaks.
>
> 2> Assembling the span query is tricky. Search the mail archive
> for SpanQuery to see an exchange I had with the originator of
> this concept. Suffice it to say that converting an ad-hoc query
> into a set of SpanQueries is not trivial, but it certainly is do-able.
> But you'd have a much easier time of it if you were able to
> control the queries and dis-allow ad-hoc queries. It all depends
> upon the requirements of the application. Any time you can
> avoid supporting arbitrary boolean logic for the user input, your
> job is easier <G>....
>
> But you should be able to run up a demo with simple queries that
> you control to prove out the methodology in any case.....
>
> Best
> Erick
>
>
> On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> >
> > Eric,
> >
> > Thank you very much for your response.  That sounds very interesting.
> > Let me do some experimenting to see if I fully understood your
> solution.
> > Otherwise I have to come back to you with more questions.
> >
> > Andreas
> >
> >
> >
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Wednesday, May 23, 2007 12:00 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: How to filter fields with hits from result set
> >
> > As luck would have it, I've done something very similar. What I had
> > to do is index a special token at the end of each page. Then I could
> > get the term offsets for each page....
> >
> > Then I used one of the SpanQuery.getSpans to get all of the
> > offsets of the hits throughout all of the pages.
> >
> > now I have a list of all the offsets of the *last* term on each
> > page and a list of the offsets of the hits. From these two
> > lists I can know which pages have hits.
> >
> >
> > Best
> > Erick
> >
> > On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> > >
> > > Hi,
> > >
> > > If a search returns a document that has multiple fields with the
> same
> > > name, is there a way to filter only those fields that contain hits?
> > >
> > >
> > > Background:
> > >
> > > I am indexing documents and we store all content in our index for
> > > display reasons.  We want to show only those pages containing hits.
> > My
> > > first implementation was saving each page in a Lucene document.  For
> > > performance reasons why are now looking into indexing the complete
> > > indexed document as a single Lucene document.
> > >
> > > Every page is added to a field in the Lucene document named
> > > page-content.  That means I am ending with as many fields named
> > > page-content as the document has pages.
> > >
> > > My search now returns me a single Lucene document in contrary to my
> > > first approach with page per Lucene document.  My problem right now
> > is:
> > > how can I limit the returned page-contents fields for pages to those
> > > field entries that contain hits.  If I have hits on pages five pages
> > > from a document with 10 pages I would like to have only the pages
> with
> > > the hits, not all.
> > >
> > > Is there anything in Lucene that limits the returned fields to
> fields
> > > with hits only?
> > >
> > > Thanks in advance,
> > >
> > > Andreas
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_87561_1735130.1180036959997--

From java-user-return-28295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:06:20 2007
Return-Path: <java-user-return-28295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35111 invoked from network); 24 May 2007 20:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:06:18 -0000
Received: (qmail 87798 invoked by uid 500); 24 May 2007 20:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87748 invoked by uid 500); 24 May 2007 20:06:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87728 invoked by uid 99); 24 May 2007 20:06:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:06:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:06:10 -0700
Received: by mu-out-0910.google.com with SMTP id g7so553456muf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:05:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ma6epZ/pxf9QpwQaOswF4/ViBgfU9hw/AfSDdzrq1DMoukETPZxs/lCP9nqYVcdhvqT3lD9TLmTg24VC1Q0Z92p+9Wpw4Xk7Q5VSmp4/hF/CGNL3iIUqw700Gyzj73V2t0lfP4WQjWf2xycGZVgBnEVTY8mCUAll9Mtbp9HjvjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FqY+BR9NS4hqBBIks/GI6eTjwQkZtJkR5N7OnbWSUksXBp4fTY1fH45t+YztV7wN7kwzZ4vU0hUtKXxNTwRyKWst0jFQanFTupLefYi3ykC/0UO6F42UIC7sTrBvsDk1u953jwM6+6pR9wQRitJMzSJc+cdjVZyIv+zdlUc9wNk=
Received: by 10.82.191.3 with SMTP id o3mr4003179buf.1180037148335;
        Thu, 24 May 2007 13:05:48 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 13:05:48 -0700 (PDT)
Message-ID: <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
Date: Thu, 24 May 2007 16:05:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87585_21143010.1180037148306"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87585_21143010.1180037148306
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Document IDs will be re-utilized, after, say, optimization.
One consequence of this is that optimization will change the IDs
of *existing* documents.

You're right, that numdocs may well be shorter than maxdocs.
That's what I get for reading quickly...

Best
Erick

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> >
> >
> > No. It will always be at least as large as the total documents. But that
> > will also count deleted documents.
>
>
>
> Do you mean that deleted document ids won't be reutilized, so the index
> maxDoc will grow more and more with time? Isn't there any way to compress
> the range? It seems strange to me, considering that an example in the book
> suggests to use the document id as an array index for an array of maxDoc
> elements.
>
> Cheers,
> Carlos
>
> Why wouldn't numdocs serve?
> >
> > Best
> > Erick
> >
> >
> > The motivation of this question is that I want to associate some info to
> > > each document in the index, and in order to access this additional
> data
> > in
> > > O(1) I would like to do this through an array indexing. But the array
> > size
> > > shouldn't be a lot greater than the total number of documents. I see
> > that
> > > something similar is done in the example of section 6.1 of Lucene in
> > > Action,
> > > but for sorting purposes, which is not my case.
> > >
> > > Related to this: how can update my array of extra data when documents
> > are
> > > added/removed to/from the index? Is there any feedback mechanism by
> > means
> > > of
> > > callbacks or event handlers?
> > >
> > > Thank you in advance.
> > > Regards,
> > > Carlos
> > >
> >
>

------=_Part_87585_21143010.1180037148306--

From java-user-return-28296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:09:15 2007
Return-Path: <java-user-return-28296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36732 invoked from network); 24 May 2007 20:09:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:09:13 -0000
Received: (qmail 97593 invoked by uid 500); 24 May 2007 20:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97559 invoked by uid 500); 24 May 2007 20:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97548 invoked by uid 99); 24 May 2007 20:09:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:09:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.56.150.16] (HELO mail.globaldesigns.ca) (64.56.150.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:09:04 -0700
Received: from 192.168.0.100 [72.29.233.189] by mail.globaldesigns.ca with ESMTP
  (SMTPD-8.22) id A0CC0380; Thu, 24 May 2007 14:08:44 -0600
Subject: Re: Improving Search Performance on Large Indexes
From: "Su.Cheng" <su.cheng@playstarmusic.com>
To: java-user@lucene.apache.org
In-Reply-To: <7162.39295.qm@web50306.mail.re2.yahoo.com>
References: <7162.39295.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain
Date: Thu, 24 May 2007 14:08:43 -0600
Message-Id: <1180037323.26630.21.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.2 (2.0.2-8) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Scott,

I met the same situation as you(index 100M documents). If the computer
has only one CPU and one disk, ParallelMultiSearcher is slower than 
MultiSearcher.

I wrote an email "Who has sample code of remote multiple servers
multiple indexes searching" yesterday. If you have any suggestion,
please let me know.

Best regards.

On Thu, 2007-05-24 at 11:38 -0700, Otis Gospodnetic wrote:
> Scott,
> 
> Yes, take your big index and split it into multiple smaller shards.  Put those shards in different servers and then query them remotely (using the provided RMI thing in Lucene or using something custom), take top N results from each searcher, merge those, and take top N from the merged result set.
> 
> You could also experiment with a memory mapped Directory implementation.
> 
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> 
> ----- Original Message ----
> From: Scott Sellman <ssellman@valueclick.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, May 24, 2007 1:31:49 PM
> Subject: Improving Search Performance on Large Indexes
> 
> Hello, 
> 
>  
> 
> Currently we are attempting to optimize the search time against an index
> that is 26 GB in size (~35 million docs) and I was wondering what
> experiences others have had in similar attempts.  Simple searches
> against the index are still fast even at 26GB, but the problem is our
> application allows the user a lot of options in searching, which can
> generate complicated queries.  Based on previous posts we decided to try
> splitting our index into multiple indexes and use ParallelMultiSearcher.
> When we split our single index into 6 separate ones we recorded a 25%
> decrease in response time on minimal load.  We haven't done any stress
> testing on it yet, has anyone noticed problems with increased load when
> using ParallelMultiSearcher?  What about using machines with more
> processors in combination with the ParallelMultiSearcher, does this
> result in much response time improvement?  Or is the slow down primarily
> with disk access?
> 
>  
> 
> Any recommendations are welcome. 
> 
>  
> 
> Thanks in advance, 
> 
> Scott
> 
>  
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
-- 
Su.Cheng <su.cheng@playstarmusic.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:14:59 2007
Return-Path: <java-user-return-28297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41144 invoked from network); 24 May 2007 20:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:14:57 -0000
Received: (qmail 15602 invoked by uid 500); 24 May 2007 20:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15567 invoked by uid 500); 24 May 2007 20:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15556 invoked by uid 99); 24 May 2007 20:14:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:14:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:14:48 -0700
Received: by wa-out-1112.google.com with SMTP id k17so221033waf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:14:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OWc8lYDZaFRgekeh9vLN7Z5J25QBlRR2nA+EFA9v+3zAQnZ9u1GH+t9qNY5r8RaFsx6tX8a/kWFwBhRama/fICWJ7xT2RyrgRHUYQFYgdIXorb+3tesqpUFglsd31uFER25ZmsA4GNwUyI7/l1hpoI0FsYMhsMuDtjSPgsJHywE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZU8oXoSg/nUp9LkcSnrnkAFX42z5u6U/pHE1WHRIy75xgZycW1Fa7n0KKbyHsdP98tuic99fsyigBPN7pC/QnKIFdgnSF+Z0twMN6NVGskprOCoIOfhyFREkyLn3wAn62J8xOoj5j7l5noXrtlZXtf+EzRcZLcxaccGBOweUS+g=
Received: by 10.114.178.1 with SMTP id a1mr1100901waf.1180037668267;
        Thu, 24 May 2007 13:14:28 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 13:14:28 -0700 (PDT)
Message-ID: <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
Date: Thu, 24 May 2007 17:14:28 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_149049_27735892.1180037668202"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_149049_27735892.1180037668202
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's no problem, I can regenerate my entire extra data structure upon
periodic index optimization. That way the array size will be about  the size
of the index. What I find more difficult is to know the id of the last
added/removed document. I need it to update the in-mem structure upon more
fine-grained index changes.  Any ideas?

TIA.
Cheers,
Carlos

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Document IDs will be re-utilized, after, say, optimization.
> One consequence of this is that optimization will change the IDs
> of *existing* documents.
>
> You're right, that numdocs may well be shorter than maxdocs.
> That's what I get for reading quickly...
>
> Best
> Erick
>
> On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> >
> > >
> > >
> > > No. It will always be at least as large as the total documents. But
> that
> > > will also count deleted documents.
> >
> >
> >
> > Do you mean that deleted document ids won't be reutilized, so the index
> > maxDoc will grow more and more with time? Isn't there any way to
> compress
> > the range? It seems strange to me, considering that an example in the
> book
> > suggests to use the document id as an array index for an array of maxDoc
> > elements.
> >
> > Cheers,
> > Carlos
> >
> > Why wouldn't numdocs serve?
> > >
> > > Best
> > > Erick
> > >
> > >
> > > The motivation of this question is that I want to associate some info
> to
> > > > each document in the index, and in order to access this additional
> > data
> > > in
> > > > O(1) I would like to do this through an array indexing. But the
> array
> > > size
> > > > shouldn't be a lot greater than the total number of documents. I see
> > > that
> > > > something similar is done in the example of section 6.1 of Lucene in
> > > > Action,
> > > > but for sorting purposes, which is not my case.
> > > >
> > > > Related to this: how can update my array of extra data when
> documents
> > > are
> > > > added/removed to/from the index? Is there any feedback mechanism by
> > > means
> > > > of
> > > > callbacks or event handlers?
> > > >
> > > > Thank you in advance.
> > > > Regards,
> > > > Carlos
> > > >
> > >
> >
>

------=_Part_149049_27735892.1180037668202--

From java-user-return-28298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:19:11 2007
Return-Path: <java-user-return-28298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44628 invoked from network); 24 May 2007 20:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:19:10 -0000
Received: (qmail 37504 invoked by uid 500); 24 May 2007 20:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37469 invoked by uid 500); 24 May 2007 20:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37458 invoked by uid 99); 24 May 2007 20:19:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:19:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:19:00 -0700
Received: by ug-out-1314.google.com with SMTP id m2so626779uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:18:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IIq2dMjRnoc8A00jcHxjIPchIO3F1mJVorL/F6xS9gI1+weT3i5L/mU7KqZm3JvnxZPoICXPTRvh/rDeFdS2Q/SAcsMXvP18qE+YlAGWmP06KLAkF+FoIvW3/RSgutESg15S5SG8v0arWlvmtxQfx7aY+qPIkTzOb66oXkO5t+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R4EpJfI87mwoNJmjZGKKQaTOd9JfTPuqUko7V7HZkoPrzOOEsYU08KkED+SUQJf7G6S6FbVg4LJNNmRS7KtppZJ9bDk6SaXjqvQfG1iEwGOmcjZRnQZYJe2QAVsDRueG0J1IC4ehzuKYXesYPbGRWo1YFHoHNAlheCs7L2DSv84=
Received: by 10.82.113.6 with SMTP id l6mr3969894buc.1180037918394;
        Thu, 24 May 2007 13:18:38 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 13:18:38 -0700 (PDT)
Message-ID: <359a92830705241318i7f4b2499m431d351462dcba2d@mail.gmail.com>
Date: Thu, 24 May 2007 16:18:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Res: How to search more than one word?
In-Reply-To: <296017.58948.qm@web32110.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87717_6736551.1180037918345"
References: <296017.58948.qm@web32110.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87717_6736551.1180037918345
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

If you haven't, I *strongly* recommend you get a copy of luke.
google lucene and luke to find it. It allows you to examine your
index and also to see how queries parse. It's invaluable.

I can't say exactly what the difference is, but there are
several possibilities. Note that in general it's best to use
the same analyzer during both index and query time.

One of the things an analyzer does is break up
the input stream into tokens that get passed
on. So, say you're using a WhitespaceAnalyzer and
indexing "this is a (silly) example". Your tokens would
be
this
is
a
(silly)
example

But StandardAnalyzer might (I'm not completely
sure about this, but this is the general idea)

this
is
a
silly
example

Note that the parens () were removed.

Now, if you construct your TermQuery with
"silly", it would match the StandardAnalyzer
at query time, but NOT the terms indexed with
WhitespaceAnalyzer. You'd get opposite matches
if your termquery were constructed with "(silly)"

So that's why I recommend you get a copy of Luke. I'm guessing
that when you indexed things with StandardAnalyzer your
stream was broken up differently than you expect. And when you
constructed your TermQuery, your term had some characters
that the StandardAnalyzer stripped form your original input
stream.

But that's just a guess. Luke will tell you for sure.

Best
Erick

On 5/24/07, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> wrote:
>
> Hi again!
>
> That=B4s all diferent now!
>
> I=B4m no more using the "reader.search()"...now, i=B4m using the QueryPar=
ser:
> - QueryParser qp =3D new QueryParser("content", new StandardAnalyzer());
> - query =3D qp.parse(keyWordToSearch);
> now, it works fine! :D
>
> But now I need to know the diference between them! :)
>
> Thanks! :D
>
> ----- Mensagem original ----
> De: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
> Para: java-user@lucene.apache.org
> Enviadas: Quinta-feira, 24 de Maio de 2007 15:00:49
> Assunto: Res: How to search more than one word?
>
> I will try to resume the code:
>
> INDEX TIME
> - IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer()=
,
> true);
> - writer.setUseCompoundFile(false);
> - while has files into the given dir...
> - Document doc =3D new Document();
> - doc.add(new Field("content", new FileReader(file)));
> - doc.add(new Field("filename", file.getPath(), Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> - writer.addDocument(doc);
> - end while.
> - writer.optimize();
> - writer.close();
> SEARCH TIME
> - Directory directory =3D FSDirectory.getDirectory(indexDir, false);
> - IndexSearcher reader =3D new IndexSearcher(directory);
> - Hits hits =3D reader.search(new TermQuery(new Term
> ("content",keyWordToSearch)));
> - Iterator<Hit> i =3D hits.iterator();
> - while (i.hasNext()){
> - Hit hit =3D i.next();
> - Document d =3D(Document) hit.getDocument();
> - d.get("filename")
>
> And so, I take the name of the file where the word was found into to do
> what need to do...
> I can do when I use only one key word, but more than that, or, if I use
> some word than I know than is found with the operator "+", I can=B4t find
> that! :(
>
> So, for the Erick questions:
> 1- In particular, what analyzers you use at index and search time.
>     Answer: Standard, only at index time! That=B4s wrong?!
> 2- What the string was originally and how you indexed it.
>     Answer: I use html, htm and txt files! How I index, is above!
> 3- What query.toString() shows you.
>     Answer: I used no query! Only the reader.search()...
>
> If I write some thing wrong, I=B4m sorry... :P
>
> Thanks in advance! ;)
>
>
> ----- Mensagem original ----
> De: Erick Erickson <erickerickson@gmail.com>
> Para: java-user@lucene.apache.org
> Enviadas: Quinta-feira, 24 de Maio de 2007 13:36:12
> Assunto: Re: How to search more than one word?
>
> Not until you give us more information <G>.
>
> In particular, what analyzers you use at index and search time.
> What the string was originally and how you indexed it.
> What query.toString() shows you.
>
> Best
> Erick
>
> On 5/24/07, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> wrote:
> >
> > Hi all!
> >
> > I implemented a searcher with Lucene and i=B4m trying to search two wor=
ds,
> > the both into the same text file, but...i can=B4t!
> >
> > When I search the first word and the second separated, everithing
> happens
> > ok, but when together, with or wtithout "AND" or "+"...nothing is found=
!
> :(
> >
> > Can somebody help me?
> >
> >
> >
> > __________________________________________________
> > Fale com seus amigos  de gra=E7a com o novo Yahoo! Messenger
> > http://br.messenger.yahoo.com/
>
>
>
>
>
>
> __________________________________________________
> Fale com seus amigos  de gra=E7a com o novo Yahoo! Messenger
> http://br.messenger.yahoo.com/
>
>
>
>
>
> __________________________________________________
> Fale com seus amigos  de gra=E7a com o novo Yahoo! Messenger
> http://br.messenger.yahoo.com/

------=_Part_87717_6736551.1180037918345--

From java-user-return-28299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:22:55 2007
Return-Path: <java-user-return-28299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46190 invoked from network); 24 May 2007 20:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:22:54 -0000
Received: (qmail 47004 invoked by uid 500); 24 May 2007 20:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46973 invoked by uid 500); 24 May 2007 20:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46962 invoked by uid 99); 24 May 2007 20:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:22:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:22:47 -0700
Received: by ug-out-1314.google.com with SMTP id m2so627519uge
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:22:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jaqY/3CfHtqPGNFmS98B4vO7XKECXoqP/FM2AWwRtdKFZ9jayqVy9qHH/QQIk2asOO9iNsKUZFD5YlSF04HWQFABXNsgNKFxiN2HbL7vD7e/sMbrmY+4+wRndC9aE5OUxMXCKqRQyov5dcAT9QCrhkKReB3c8Ln01L3PC8J0G+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o3r754QuiMAQeU8D+YWklZyQt6trlbFXpDV4nihOKADaVtbFTX9GgdAlVgjV+hd76mwLQXOVoEcvrFSSAY7n6QXrKJvrCKldYdn0kXNxHsHVPsq6B3p5cdog5ORzFUY4CiMkNqwbVIMRWEm5/cES4fCi5B+QdraimY5i11z4UZk=
Received: by 10.82.118.2 with SMTP id q2mr3998327buc.1180038145431;
        Thu, 24 May 2007 13:22:25 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Thu, 24 May 2007 13:22:25 -0700 (PDT)
Message-ID: <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
Date: Thu, 24 May 2007 16:22:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87729_11631827.1180038145399"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87729_11631827.1180038145399
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the Javadoc for IndexReader.....

Returns one greater than the largest possible document number. This may be
used to, e.g., determine how big to allocate an array which will have an
element for every document number in an index.

Isn't that what you're wondering about?

Erick

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> That's no problem, I can regenerate my entire extra data structure upon
> periodic index optimization. That way the array size will be about  the
> size
> of the index. What I find more difficult is to know the id of the last
> added/removed document. I need it to update the in-mem structure upon more
> fine-grained index changes.  Any ideas?
>
> TIA.
> Cheers,
> Carlos
>
> On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Document IDs will be re-utilized, after, say, optimization.
> > One consequence of this is that optimization will change the IDs
> > of *existing* documents.
> >
> > You're right, that numdocs may well be shorter than maxdocs.
> > That's what I get for reading quickly...
> >
> > Best
> > Erick
> >
> > On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> > >
> > > >
> > > >
> > > > No. It will always be at least as large as the total documents. But
> > that
> > > > will also count deleted documents.
> > >
> > >
> > >
> > > Do you mean that deleted document ids won't be reutilized, so the
> index
> > > maxDoc will grow more and more with time? Isn't there any way to
> > compress
> > > the range? It seems strange to me, considering that an example in the
> > book
> > > suggests to use the document id as an array index for an array of
> maxDoc
> > > elements.
> > >
> > > Cheers,
> > > Carlos
> > >
> > > Why wouldn't numdocs serve?
> > > >
> > > > Best
> > > > Erick
> > > >
> > > >
> > > > The motivation of this question is that I want to associate some
> info
> > to
> > > > > each document in the index, and in order to access this additional
> > > data
> > > > in
> > > > > O(1) I would like to do this through an array indexing. But the
> > array
> > > > size
> > > > > shouldn't be a lot greater than the total number of documents. I
> see
> > > > that
> > > > > something similar is done in the example of section 6.1 of Lucene
> in
> > > > > Action,
> > > > > but for sorting purposes, which is not my case.
> > > > >
> > > > > Related to this: how can update my array of extra data when
> > documents
> > > > are
> > > > > added/removed to/from the index? Is there any feedback mechanism
> by
> > > > means
> > > > > of
> > > > > callbacks or event handlers?
> > > > >
> > > > > Thank you in advance.
> > > > > Regards,
> > > > > Carlos
> > > > >
> > > >
> > >
> >
>

------=_Part_87729_11631827.1180038145399--

From java-user-return-28300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:26:02 2007
Return-Path: <java-user-return-28300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47513 invoked from network); 24 May 2007 20:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:26:01 -0000
Received: (qmail 56079 invoked by uid 500); 24 May 2007 20:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56047 invoked by uid 500); 24 May 2007 20:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56036 invoked by uid 99); 24 May 2007 20:25:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:25:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:25:51 -0700
Received: by py-out-1112.google.com with SMTP id a25so374509pyi
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:25:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=f8OIW8F0k9qd8dKHBeswOsmVc4FNeev9pZyX62qZQyHWK6KCfx7ERashxNYdYyaCgFWgX1+8/0DTlgnPfdZz9IWQ/wb0/HcBfxn0HNOkUFjJYlMoZwqKMYd43Yve2tCRwAc4wN04guyPbxgZNDyYk2dfyTqO5J3+lXYt7kJl3uQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=JcQXsgqVRGIoJWadoTTZmVJLGtmcPvy+pH9s+tL2aAY3PAfP5h5nhkTxUuRaka2g+X7FNWHNtR20YUkqXuxJukiu3puVSOwkaLpUoX8qoEfYC4o/IgqC3cvu9BG4tXV2IsZzTAk5icabYVbBCi+Ecugv35YBuu0BmFeNctdyOVU=
Received: by 10.35.19.6 with SMTP id w6mr892684pyi.1180038330917;
        Thu, 24 May 2007 13:25:30 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 24 May 2007 13:25:30 -0700 (PDT)
Message-ID: <c68e39170705241325x62aa9363w79f49052e9f51733@mail.gmail.com>
Date: Thu, 24 May 2007 16:25:30 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
X-Google-Sender-Auth: 3380d673d2c44b1d
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> I need it to update the in-mem structure upon more
> fine-grained index changes.  Any ideas?

Currently, a deleted doc is removed when the segment containing it is
involved in a segment  merge.  A merge could be triggered on any
addDocument(), making it difficult to incrementally update anything.

If you set mergeFactor to a very high number, you could control when
merging occured at least (at the expense of generating many segments).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:28:33 2007
Return-Path: <java-user-return-28301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48453 invoked from network); 24 May 2007 20:28:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:28:22 -0000
Received: (qmail 64224 invoked by uid 500); 24 May 2007 20:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64171 invoked by uid 500); 24 May 2007 20:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64151 invoked by uid 99); 24 May 2007 20:28:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:28:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:28:11 -0700
Received: by wr-out-0506.google.com with SMTP id 36so294723wra
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:27:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RStJ5OjTvNYX1Tr04E/Hb6BeJywzhtpX+D4uH5YQbjsqm9XBlV1VGkoeubj08cAOlVkC7CwBCRh/KKW4z0iEpGnbTSKDG3gkTzmGz+SgFw38KwUqDDLj7PmqS9nw0lTRYrLUWgj7p4eNVNLM+lGDvD/6rot5xTgP53W+x+TSqWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FTI2iOkQlGspl8mqObzlsX+BvGit/4hsiwtlYrqOx/BFvUkd5FBtQHU6F2rhXnDw4fzWP7tPZiJSPkHFvnXeCsIEvUJydTwR/Ufr2glJpkCdnAGcr3Y34hHrIN6EK+qnxOXHKOY3QqetVuIQS6xTwIeCmzU2PfyORG5z86txCEo=
Received: by 10.115.14.1 with SMTP id r1mr1136995wai.1180038469736;
        Thu, 24 May 2007 13:27:49 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 13:27:49 -0700 (PDT)
Message-ID: <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
Date: Thu, 24 May 2007 17:27:49 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_149221_14956513.1180038469681"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_149221_14956513.1180038469681
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes Erick, that's fine. But the fact is that I'm not sure whether the next
added document will have an id equal to maxDocs. If this is guaranteed, then
I will update the maxDocs slot of my extra data structure upon document
addition and get rid of the hits.id(0) slot upon document deletion. Then,
when the index is optimized, I will recreate the entire structure from
scratch. Do you think I could rely on this?

Cheers,
Carlos

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> From the Javadoc for IndexReader.....
>
> Returns one greater than the largest possible document number. This may be
> used to, e.g., determine how big to allocate an array which will have an
> element for every document number in an index.
>
> Isn't that what you're wondering about?
>
> Erick
>
> On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> >
> > That's no problem, I can regenerate my entire extra data structure upon
> > periodic index optimization. That way the array size will be about  the
> > size
> > of the index. What I find more difficult is to know the id of the last
> > added/removed document. I need it to update the in-mem structure upon
> more
> > fine-grained index changes.  Any ideas?
> >
> > TIA.
> > Cheers,
> > Carlos
> >
> > On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Document IDs will be re-utilized, after, say, optimization.
> > > One consequence of this is that optimization will change the IDs
> > > of *existing* documents.
> > >
> > > You're right, that numdocs may well be shorter than maxdocs.
> > > That's what I get for reading quickly...
> > >
> > > Best
> > > Erick
> > >
> > > On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> > > >
> > > > >
> > > > >
> > > > > No. It will always be at least as large as the total documents.
> But
> > > that
> > > > > will also count deleted documents.
> > > >
> > > >
> > > >
> > > > Do you mean that deleted document ids won't be reutilized, so the
> > index
> > > > maxDoc will grow more and more with time? Isn't there any way to
> > > compress
> > > > the range? It seems strange to me, considering that an example in
> the
> > > book
> > > > suggests to use the document id as an array index for an array of
> > maxDoc
> > > > elements.
> > > >
> > > > Cheers,
> > > > Carlos
> > > >
> > > > Why wouldn't numdocs serve?
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > >
> > > > > The motivation of this question is that I want to associate some
> > info
> > > to
> > > > > > each document in the index, and in order to access this
> additional
> > > > data
> > > > > in
> > > > > > O(1) I would like to do this through an array indexing. But the
> > > array
> > > > > size
> > > > > > shouldn't be a lot greater than the total number of documents. I
> > see
> > > > > that
> > > > > > something similar is done in the example of section 6.1 of
> Lucene
> > in
> > > > > > Action,
> > > > > > but for sorting purposes, which is not my case.
> > > > > >
> > > > > > Related to this: how can update my array of extra data when
> > > documents
> > > > > are
> > > > > > added/removed to/from the index? Is there any feedback mechanism
> > by
> > > > > means
> > > > > > of
> > > > > > callbacks or event handlers?
> > > > > >
> > > > > > Thank you in advance.
> > > > > > Regards,
> > > > > > Carlos
> > > > > >
> > > > >
> > > >
> > >
> >
>

------=_Part_149221_14956513.1180038469681--

From java-user-return-28302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:36:58 2007
Return-Path: <java-user-return-28302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53703 invoked from network); 24 May 2007 20:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:36:57 -0000
Received: (qmail 90522 invoked by uid 500); 24 May 2007 20:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90489 invoked by uid 500); 24 May 2007 20:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90478 invoked by uid 99); 24 May 2007 20:36:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:36:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:36:48 -0700
Received: by py-out-1112.google.com with SMTP id a25so380769pyi
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:36:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=JnHN97OkrBjGqCN1YqzCJRRIZJ9ffhsXAbJa85HXQ6HtuxkZztliVB/hJKZ1yCWRGV0uRmWAJXlnZlHE0VSmhuW22uo/MtmBNR8ABjxw3GyckrDdLoPjLCgQyaJiYfyry9mv6jgnf2XvKQG9eipy16WIFF/PLdka5Rvuo91+uNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=sNUwcCwiIVhN8jHV3Cxn4nPiJljrYUQ/tjkb0TCxSxplXlUYlN4CMBDse6x0SWGvxC74dytmo/fVThCUGc84K3C859rgsoAR0P9hd0vIiuruEKhGpn8Fyste86tmOY+QTElk6jFmw+ccI1LNgqeyQ5g7wDv/v+hKPbpD76nvDXw=
Received: by 10.35.110.13 with SMTP id n13mr1032827pym.1180038988185;
        Thu, 24 May 2007 13:36:28 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 24 May 2007 13:36:28 -0700 (PDT)
Message-ID: <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
Date: Thu, 24 May 2007 16:36:28 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
	 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
X-Google-Sender-Auth: 41740c06f61af383
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> Yes Erick, that's fine. But the fact is that I'm not sure whether the next
> added document will have an id equal to maxDocs.

Yes.  The highest docId will always be the last document added, and
docIds are never re-arranged with respect to each other.

So if you do an addDocument(), it will have an id of maxDoc()-1
*But* beware of renumbering caused by squeezing out of deleted docs on
segment merges, as I mentioned in the last message.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:48:57 2007
Return-Path: <java-user-return-28303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61695 invoked from network); 24 May 2007 20:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:48:56 -0000
Received: (qmail 23345 invoked by uid 500); 24 May 2007 20:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23309 invoked by uid 500); 24 May 2007 20:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23298 invoked by uid 99); 24 May 2007 20:48:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:48:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.207.119] (HELO web32105.mail.mud.yahoo.com) (68.142.207.119)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 May 2007 13:48:44 -0700
Received: (qmail 36470 invoked by uid 60001); 24 May 2007 20:48:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=b+9xEwEi5ggUIYzf4eT1bHL6XuLS07O+/xMXLLD/XqXBFPhm/Q0o4BGHtXxZmxywhXoEH5AZo6uuMlrZxd56S7pRlW6+H+QKgf36tzDXn3X3lw00QwNG8UKjnag86aRkDNACTUMs1JvNsOtCqdJ14D4bc5VU699vKOml1G9WlSI=;
X-YMail-OSG: UYYjYDEVM1nzmXQEiveU.GAU27lL8w28h7rmUCo5kFaPzAg5J5DE1p5H4EbaHWFTrFHVKrHoSiGata31U82A.OpI9E3QnSzLX1eZO3uzcV7ilVqONV0-
Received: from [209.191.106.127] by web32105.mail.mud.yahoo.com via HTTP; Thu, 24 May 2007 13:48:22 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 24 May 2007 13:48:21 -0700 (PDT)
From: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
Subject: Res: Res: How to search more than one word?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-792802803-1180039701=:35884"
Message-ID: <50284.35884.qm@web32105.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-792802803-1180039701=:35884
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Yes guy, i have luke yet! :)=0A=0AThe words i used were: "maria" and "amand=
a".=0AThe first word, is in one text file and the second is in the same one=
 and another (so, two files).=0A=0AChanging the "IndexSearcher.search()" by=
 "QueryParser.parse()" and keep everything equal, all works fine.=0A=0ABy l=
uke and by testing, i saw i could find the both words separatedly, but not =
them together! Now, I can!=0A=0ASo, in this case, the problem was not the a=
nalyser, but that=B4s really a very good reminder! ;)=0A=0AI found some thi=
ng I think speaks about the both. So, when I really find the difference, I =
show you! :D=0A=0AThanks again! :D=0A=0A----- Mensagem original ----=0ADe: =
Erick Erickson <erickerickson@gmail.com>=0APara: java-user@lucene.apache.or=
g=0AEnviadas: Quinta-feira, 24 de Maio de 2007 17:18:38=0AAssunto: Re: Res:=
 How to search more than one word?=0A=0AIf you haven't, I *strongly* recomm=
end you get a copy of luke.=0Agoogle lucene and luke to find it. It allows =
you to examine your=0Aindex and also to see how queries parse. It's invalua=
ble.=0A=0AI can't say exactly what the difference is, but there are=0Asever=
al possibilities. Note that in general it's best to use=0Athe same analyzer=
 during both index and query time.=0A=0AOne of the things an analyzer does =
is break up=0Athe input stream into tokens that get passed=0Aon. So, say yo=
u're using a WhitespaceAnalyzer and=0Aindexing "this is a (silly) example".=
 Your tokens would=0Abe=0Athis=0Ais=0Aa=0A(silly)=0Aexample=0A=0ABut Standa=
rdAnalyzer might (I'm not completely=0Asure about this, but this is the gen=
eral idea)=0A=0Athis=0Ais=0Aa=0Asilly=0Aexample=0A=0ANote that the parens (=
) were removed.=0A=0ANow, if you construct your TermQuery with=0A"silly", i=
t would match the StandardAnalyzer=0Aat query time, but NOT the terms index=
ed with=0AWhitespaceAnalyzer. You'd get opposite matches=0Aif your termquer=
y were constructed with "(silly)"=0A=0ASo that's why I recommend you get a =
copy of Luke. I'm guessing=0Athat when you indexed things with StandardAnal=
yzer your=0Astream was broken up differently than you expect. And when you=
=0Aconstructed your TermQuery, your term had some characters=0Athat the Sta=
ndardAnalyzer stripped form your original input=0Astream.=0A=0ABut that's j=
ust a guess. Luke will tell you for sure.=0A=0ABest=0AErick=0A=0AOn 5/24/07=
, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> wrote:=0A>=0A> Hi agai=
n!=0A>=0A> That=B4s all diferent now!=0A>=0A> I=B4m no more using the "read=
er.search()"...now, i=B4m using the QueryParser:=0A> - QueryParser qp =3D n=
ew QueryParser("content", new StandardAnalyzer());=0A> - query =3D qp.parse=
(keyWordToSearch);=0A> now, it works fine! :D=0A>=0A> But now I need to kno=
w the diference between them! :)=0A>=0A> Thanks! :D=0A>=0A> ----- Mensagem =
original ----=0A> De: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>=0A=
> Para: java-user@lucene.apache.org=0A> Enviadas: Quinta-feira, 24 de Maio =
de 2007 15:00:49=0A> Assunto: Res: How to search more than one word?=0A>=0A=
> I will try to resume the code:=0A>=0A> INDEX TIME=0A> - IndexWriter write=
r =3D new IndexWriter(indexDir, new StandardAnalyzer(),=0A> true);=0A> - wr=
iter.setUseCompoundFile(false);=0A> - while has files into the given dir...=
=0A> - Document doc =3D new Document();=0A> - doc.add(new Field("content", =
new FileReader(file)));=0A> - doc.add(new Field("filename", file.getPath(),=
 Field.Store.YES,=0A> Field.Index.UN_TOKENIZED));=0A> - writer.addDocument(=
doc);=0A> - end while.=0A> - writer.optimize();=0A> - writer.close();=0A> S=
EARCH TIME=0A> - Directory directory =3D FSDirectory.getDirectory(indexDir,=
 false);=0A> - IndexSearcher reader =3D new IndexSearcher(directory);=0A> -=
 Hits hits =3D reader.search(new TermQuery(new Term=0A> ("content",keyWordT=
oSearch)));=0A> - Iterator<Hit> i =3D hits.iterator();=0A> - while (i.hasNe=
xt()){=0A> - Hit hit =3D i.next();=0A> - Document d =3D(Document) hit.getDo=
cument();=0A> - d.get("filename")=0A>=0A> And so, I take the name of the fi=
le where the word was found into to do=0A> what need to do...=0A> I can do =
when I use only one key word, but more than that, or, if I use=0A> some wor=
d than I know than is found with the operator "+", I can=B4t find=0A> that!=
 :(=0A>=0A> So, for the Erick questions:=0A> 1- In particular, what analyze=
rs you use at index and search time.=0A>     Answer: Standard, only at inde=
x time! That=B4s wrong?!=0A> 2- What the string was originally and how you =
indexed it.=0A>     Answer: I use html, htm and txt files! How I index, is =
above!=0A> 3- What query.toString() shows you.=0A>     Answer: I used no qu=
ery! Only the reader.search()...=0A>=0A> If I write some thing wrong, I=B4m=
 sorry... :P=0A>=0A> Thanks in advance! ;)=0A>=0A>=0A> ----- Mensagem origi=
nal ----=0A> De: Erick Erickson <erickerickson@gmail.com>=0A> Para: java-us=
er@lucene.apache.org=0A> Enviadas: Quinta-feira, 24 de Maio de 2007 13:36:1=
2=0A> Assunto: Re: How to search more than one word?=0A>=0A> Not until you =
give us more information <G>.=0A>=0A> In particular, what analyzers you use=
 at index and search time.=0A> What the string was originally and how you i=
ndexed it.=0A> What query.toString() shows you.=0A>=0A> Best=0A> Erick=0A>=
=0A> On 5/24/07, Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br> wrote:=
=0A> >=0A> > Hi all!=0A> >=0A> > I implemented a searcher with Lucene and i=
=B4m trying to search two words,=0A> > the both into the same text file, bu=
t...i can=B4t!=0A> >=0A> > When I search the first word and the second sepa=
rated, everithing=0A> happens=0A> > ok, but when together, with or wtithout=
 "AND" or "+"...nothing is found!=0A> :(=0A> >=0A> > Can somebody help me?=
=0A> >=0A> >=0A> >=0A> > __________________________________________________=
=0A> > Fale com seus amigos  de gra=E7a com o novo Yahoo! Messenger=0A> > h=
ttp://br.messenger.yahoo.com/=0A>=0A>=0A>=0A>=0A>=0A>=0A> _________________=
_________________________________=0A> Fale com seus amigos  de gra=E7a com =
o novo Yahoo! Messenger=0A> http://br.messenger.yahoo.com/=0A>=0A>=0A>=0A>=
=0A>=0A> __________________________________________________=0A> Fale com se=
us amigos  de gra=E7a com o novo Yahoo! Messenger=0A> http://br.messenger.y=
ahoo.com/=0A=0A=0A=0A=0A=0A=0A_____________________________________________=
_____=0AFale com seus amigos  de gra=E7a com o novo Yahoo! Messenger =0Ahtt=
p://br.messenger.yahoo.com/ 
--0-792802803-1180039701=:35884--

From java-user-return-28304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 20:51:07 2007
Return-Path: <java-user-return-28304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62819 invoked from network); 24 May 2007 20:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 20:51:06 -0000
Received: (qmail 26899 invoked by uid 500); 24 May 2007 20:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26856 invoked by uid 500); 24 May 2007 20:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26845 invoked by uid 99); 24 May 2007 20:51:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:51:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 13:50:57 -0700
Received: by wa-out-1112.google.com with SMTP id k17so224836waf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 13:50:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GK+uPCgfhOF9FtnX9ze1K2/XdNSAQ1oFSClugDEr0skQ5S2vmtwoaoNcHQhGr5jzV/SHlzmyzFtAQzp9h1E28DR6Rx7q/s3yVv9o+IilPw6idm1caPCEUhYz3VqsZQq+r0EsNvqmEMQIX8C6oePp8pX1S6rRztmOxEsEgDLe1h8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=morkkyIcXq5h26nkQUWRiLmy5jrWKwInH+GRPTpNjk5MF1Ol4OztFkoFYhVDyflEfTWY3rj5836qkcLS/tR7bWw7XBmpkLxIJ2GLJ+FPVkXzYZx8be6duwQKXhFqDc+8FTjc2BQKYUXtF6lO8zjGqSdtOT+2YPqP3m6+u6X8L90=
Received: by 10.114.209.1 with SMTP id h1mr1151875wag.1180039837029;
        Thu, 24 May 2007 13:50:37 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 13:50:36 -0700 (PDT)
Message-ID: <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>
Date: Thu, 24 May 2007 17:50:36 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_149533_1834203.1180039836968"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
	 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
	 <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_149533_1834203.1180039836968
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have done some benchmarks. Keeping things in an array makes the entire
search, including postprocessing from first to last id for a big result set,
extremely fast. So I would really like to implement this approach. But I'm
concerned about what Yonik remarked. I could use a large mergeFactor but
anyway, just to be sure, is there a way to make the index inform my
application of merging events?

Cheers,
Carlos

On 5/24/07, Yonik Seeley <yonik@apache.org> wrote:
>
> On 5/24/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
> > Yes Erick, that's fine. But the fact is that I'm not sure whether the
> next
> > added document will have an id equal to maxDocs.
>
> Yes.  The highest docId will always be the last document added, and
> docIds are never re-arranged with respect to each other.
>
> So if you do an addDocument(), it will have an id of maxDoc()-1
> *But* beware of renumbering caused by squeezing out of deleted docs on
> segment merges, as I mentioned in the last message.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_149533_1834203.1180039836968--

From java-user-return-28305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 21:15:42 2007
Return-Path: <java-user-return-28305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73829 invoked from network); 24 May 2007 21:15:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 21:15:41 -0000
Received: (qmail 71722 invoked by uid 500); 24 May 2007 21:15:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71690 invoked by uid 500); 24 May 2007 21:15:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71679 invoked by uid 99); 24 May 2007 21:15:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:15:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:15:32 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6D3305B76C; Thu, 24 May 2007 14:15:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 68FDD7F403
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 14:15:12 -0700 (PDT)
Date: Thu, 24 May 2007 14:15:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu>
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com> 
 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com> 
 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com> 
 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com> 
 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com> 
 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com> 
 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com> 
 <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
 <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: extremely fast. So I would really like to implement this approach. But I'm
: concerned about what Yonik remarked. I could use a large mergeFactor but
: anyway, just to be sure, is there a way to make the index inform my
: application of merging events?

this entire thread seems to be a discussion about reimplementingthe
FiledCache ... please review that API, it should solve all of your
problems.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 21:39:43 2007
Return-Path: <java-user-return-28306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89143 invoked from network); 24 May 2007 21:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 21:39:42 -0000
Received: (qmail 23233 invoked by uid 500); 24 May 2007 21:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23201 invoked by uid 500); 24 May 2007 21:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23190 invoked by uid 99); 24 May 2007 21:39:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:39:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:39:34 -0700
Received: by nz-out-0506.google.com with SMTP id i1so590548nzh
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 14:39:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ppKlOsftFKd+/JhwGwHq3uIcdHItvLLTPqJXCsQAKLUWqhlbEmQbLzc0blhDgt/qnbG84HWE31cypBAM/RPLHLpAteZunuBIf/VPI5ujR1vBlpS2YEBypCUQViIwlfSN2mWerrMqIRW1HGrrKgC5QpLj++gs9RMr/wVQw9M88ik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R5XNX8mo6ziDYBMmZrxEGaq2OqN3mD+2axLYn5Hgv7oUPsvBm9uT4DZUN+YH/pqL+84k2+m8HYWjsYmVfyzylaWb2bNVr73YdJEv+u6AqpyHcBXzhZ5o0Q5IaLFq3JXOJ8OyW+dS2sOXRp/SNisTfuislyAQXZjwyUWVdrarWww=
Received: by 10.115.18.1 with SMTP id v1mr1175830wai.1180042752591;
        Thu, 24 May 2007 14:39:12 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 14:39:12 -0700 (PDT)
Message-ID: <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com>
Date: Thu, 24 May 2007 18:39:12 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_150137_33237027.1180042752292"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
	 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
	 <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
	 <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>
	 <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_150137_33237027.1180042752292
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mh, some of my fields are in fact multivaluated. But anyway, I could store
them as a single string and split after retrieval.
Will FieldCache work for the first search with some query or just for the
successive ones, for which the fields are already cached?

Cheers,
Carlos

On 5/24/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : extremely fast. So I would really like to implement this approach. But
> I'm
> : concerned about what Yonik remarked. I could use a large mergeFactor but
> : anyway, just to be sure, is there a way to make the index inform my
> : application of merging events?
>
> this entire thread seems to be a discussion about reimplementingthe
> FiledCache ... please review that API, it should solve all of your
> problems.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_150137_33237027.1180042752292--

From java-user-return-28307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 21:59:16 2007
Return-Path: <java-user-return-28307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95660 invoked from network); 24 May 2007 21:59:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 21:59:15 -0000
Received: (qmail 70782 invoked by uid 500); 24 May 2007 21:59:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70748 invoked by uid 500); 24 May 2007 21:59:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70733 invoked by uid 99); 24 May 2007 21:59:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:59:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 14:58:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 229855B776; Thu, 24 May 2007 14:57:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 199617F403
	for <java-user@lucene.apache.org>; Thu, 24 May 2007 14:57:44 -0700 (PDT)
Date: Thu, 24 May 2007 14:57:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705241453500.1470@hal.rescomp.berkeley.edu>
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com> 
 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com> 
 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com> 
 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com> 
 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com> 
 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com> 
 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com> 
 <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com> 
 <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com> 
 <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu>
 <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Mh, some of my fields are in fact multivaluated. But anyway, I could store
: them as a single string and split after retrieval.
: Will FieldCache work for the first search with some query or just for the
: successive ones, for which the fields are already cached?

The first time you access the cache, it will populate it for every
document. ... it makes the first hit slow, but you can always force the
first hit arbitrarily prior to using the IndexReader for "real" queries



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 22:17:35 2007
Return-Path: <java-user-return-28308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2549 invoked from network); 24 May 2007 22:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 22:17:33 -0000
Received: (qmail 10705 invoked by uid 500); 24 May 2007 22:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10664 invoked by uid 500); 24 May 2007 22:17:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10653 invoked by uid 99); 24 May 2007 22:17:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 15:17:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssellman@valueclick.com designates 216.34.207.11 as permitted sender)
Received: from [216.34.207.11] (HELO smtp1.corp.valueclick.com) (216.34.207.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 15:17:24 -0700
X-IronPort-AV: E=Sophos;i="4.14,575,1170662400"; 
   d="scan'208";a="267735386"
Received: from unknown (HELO LA-EXCLUST01.corp.valueclick.com) ([192.168.250.7])
  by smtp1.corp.valueclick.com with ESMTP; 24 May 2007 14:56:29 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Improving Search Performance on Large Indexes
Date: Thu, 24 May 2007 14:56:13 -0700
Message-ID: <F7CE0FFA3A30084B9AD03275B9F4CFC801527990@LA-EXCLUST01.corp.valueclick.com>
In-Reply-To: <1180037323.26630.21.camel@localhost.localdomain>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Improving Search Performance on Large Indexes
Thread-Index: AceeP2ZpMHSvM2pWRtiNWK037JI+0QACDjzQ
References: <7162.39295.qm@web50306.mail.re2.yahoo.com> <1180037323.26630.21.camel@localhost.localdomain>
From: "Scott Sellman" <ssellman@valueclick.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Su,=20

I came across some discussion of ParallelMultiSearcher and RMI in
chapter 5 of the book Lucene in Action.  There are a couple of examples
in there, so might be a good place to start.=20

-Scott

-----Original Message-----
From: Su.Cheng [mailto:su.cheng@playstarmusic.com]=20
Sent: Thursday, May 24, 2007 1:09 PM
To: java-user@lucene.apache.org
Subject: Re: Improving Search Performance on Large Indexes

Hi Scott,

I met the same situation as you(index 100M documents). If the computer
has only one CPU and one disk, ParallelMultiSearcher is slower than=20
MultiSearcher.

I wrote an email "Who has sample code of remote multiple servers
multiple indexes searching" yesterday. If you have any suggestion,
please let me know.

Best regards.

On Thu, 2007-05-24 at 11:38 -0700, Otis Gospodnetic wrote:
> Scott,
>=20
> Yes, take your big index and split it into multiple smaller shards.
Put those shards in different servers and then query them remotely
(using the provided RMI thing in Lucene or using something custom), take
top N results from each searcher, merge those, and take top N from the
merged result set.
>=20
> You could also experiment with a memory mapped Directory
implementation.
>=20
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>=20
> ----- Original Message ----
> From: Scott Sellman <ssellman@valueclick.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, May 24, 2007 1:31:49 PM
> Subject: Improving Search Performance on Large Indexes
>=20
> Hello,=20
>=20
> =20
>=20
> Currently we are attempting to optimize the search time against an
index
> that is 26 GB in size (~35 million docs) and I was wondering what
> experiences others have had in similar attempts.  Simple searches
> against the index are still fast even at 26GB, but the problem is our
> application allows the user a lot of options in searching, which can
> generate complicated queries.  Based on previous posts we decided to
try
> splitting our index into multiple indexes and use
ParallelMultiSearcher.
> When we split our single index into 6 separate ones we recorded a 25%
> decrease in response time on minimal load.  We haven't done any stress
> testing on it yet, has anyone noticed problems with increased load
when
> using ParallelMultiSearcher?  What about using machines with more
> processors in combination with the ParallelMultiSearcher, does this
> result in much response time improvement?  Or is the slow down
primarily
> with disk access?
>=20
> =20
>=20
> Any recommendations are welcome.=20
>=20
> =20
>=20
> Thanks in advance,=20
>=20
> Scott
>=20
> =20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
--=20
Su.Cheng <su.cheng@playstarmusic.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 24 22:59:37 2007
Return-Path: <java-user-return-28309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14866 invoked from network); 24 May 2007 22:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 May 2007 22:59:35 -0000
Received: (qmail 64760 invoked by uid 500); 24 May 2007 22:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64719 invoked by uid 500); 24 May 2007 22:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64708 invoked by uid 99); 24 May 2007 22:59:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 15:59:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 15:59:26 -0700
Received: by nz-out-0506.google.com with SMTP id i1so604288nzh
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 15:59:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B0FAeMmWmLnhXRhhgnc89EzxnRXgyiOuj+dQ7cGJxppvpHfmLp3sFh0k6aBI4aXskAJYSn7el6bnsp6nQyzoilPaZr3QqxlwaJz99Uz1ic65UmfPkbbOusJosBCd+L4a0vJOpnvRxVufjIwFc2cCdnkENVw5Jjizt9SGvinHkOY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=reRLWtKGsmUDNaZtDeJg9gCvvDFfbik9HCEM5ySc55zoRTHhKbXy1QMOq+zHXSMGjpqIc5KbszkzzhMQ7d6rexgkxiVXV0kLWccaJhOHc5oZPwV+YFapJQDNC5UnQk/c7ZjyRIM+hENy7HGhJIVnRlSgCQHcNwxr94glbbtOYA0=
Received: by 10.114.194.1 with SMTP id r1mr1194737waf.1180047544177;
        Thu, 24 May 2007 15:59:04 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 15:59:04 -0700 (PDT)
Message-ID: <7798eaa0705241559o67839d2ej77929a99c609ced2@mail.gmail.com>
Date: Thu, 24 May 2007 19:59:04 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <Pine.LNX.4.58.0705241453500.1470@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_151177_24157737.1180047544131"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>
	 <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>
	 <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>
	 <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>
	 <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu>
	 <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com>
	 <Pine.LNX.4.58.0705241453500.1470@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_151177_24157737.1180047544131
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nice, I will write the ids into a byte array with a DataOutputStream and
then marshal that array into a String with a UTF8 encoding. This way there
is no need for parsing or splitting, and the encoding is space efficient.
This marshaled String will be cached with a FieldCache. Thank you for your
suggestions! I will tell you how well this worked as soon as I've
implemented it.
Cheers,
Carlos

On 5/24/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Mh, some of my fields are in fact multivaluated. But anyway, I could
> store
> : them as a single string and split after retrieval.
> : Will FieldCache work for the first search with some query or just for
> the
> : successive ones, for which the fields are already cached?
>
> The first time you access the cache, it will populate it for every
> document. ... it makes the first hit slow, but you can always force the
> first hit arbitrarily prior to using the IndexReader for "real" queries
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_151177_24157737.1180047544131--

From java-user-return-28310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 05:28:34 2007
Return-Path: <java-user-return-28310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62181 invoked from network); 25 May 2007 05:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 05:28:33 -0000
Received: (qmail 40733 invoked by uid 500); 25 May 2007 05:28:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40279 invoked by uid 500); 25 May 2007 05:28:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40266 invoked by uid 99); 25 May 2007 05:28:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 22:28:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sharadbdc@aol.com designates 205.188.157.130 as permitted sender)
Received: from [205.188.157.130] (HELO postman7.mx.aol.com) (205.188.157.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 22:28:24 -0700
Received: from [10.146.144.85] (owslbfa1-dtc-sip32.net.aol.com [205.188.182.32])
	by postman7.mx.aol.com (8.13.1/8.13.1) with ESMTP id l4P5S2pu000840
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 01:28:03 -0400
Message-ID: <465673E0.4010309@aol.com>
Date: Fri, 25 May 2007 10:58:00 +0530
From: Sharad Agarwal <sharadbdc@aol.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Improving Search Performance on Large Indexes
References: <7162.39295.qm@web50306.mail.re2.yahoo.com> <1180037323.26630.21.camel@localhost.localdomain>
In-Reply-To: <1180037323.26630.21.camel@localhost.localdomain>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Su.Cheng wrote:
> Hi Scott,
>
> I met the same situation as you(index 100M documents). If the computer
> has only one CPU and one disk, ParallelMultiSearcher is slower than 
> MultiSearcher.
>
> I wrote an email "Who has sample code of remote multiple servers
> multiple indexes searching" yesterday. If you have any suggestion,
> please let me know.
>   
We have been exposing individual index searchers as mbeans as it reduces 
the amount of remoting code a lot (also getting client side proxies is 
very easy)

On each index partition, run the mbean server, expose the following 
mbean as follows:-
    public interface RemoteSearchableMBean extends Searchable{
        //add any extra methods you want to expose remotely
    }

    class RemoteSearchable extends IndexSearcher implements 
RemoteSearchableMBean {
          //initialize the super using appropriate constructors
    }

    Register the above mbean instance in the mbean server.

 From the client side (server doing the merging across partitions), get 
the proxy handles of all RemoteSearchableMBean from all your remote servers.
- Use (RemoteSearchableMBean) 
MBeanServerInvocationHandler.newProxyInstance method

Create a MutliSearcher/ParallelMultiSearcher with all the handles of 
RemSearchableMBean proxy handle :
- MutliSearcher(Searchable[] arg0)

The above approach is working pretty handy for us. And running in 
production for a while now.

- sharad

> Best regards.
>
> On Thu, 2007-05-24 at 11:38 -0700, Otis Gospodnetic wrote:
>   
>> Scott,
>>
>> Yes, take your big index and split it into multiple smaller shards.  Put those shards in different servers and then query them remotely (using the provided RMI thing in Lucene or using something custom), take top N results from each searcher, merge those, and take top N from the merged result set.
>>
>> You could also experiment with a memory mapped Directory implementation.
>>
>> Otis
>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>
>> ----- Original Message ----
>> From: Scott Sellman <ssellman@valueclick.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, May 24, 2007 1:31:49 PM
>> Subject: Improving Search Performance on Large Indexes
>>
>> Hello, 
>>
>>  
>>
>> Currently we are attempting to optimize the search time against an index
>> that is 26 GB in size (~35 million docs) and I was wondering what
>> experiences others have had in similar attempts.  Simple searches
>> against the index are still fast even at 26GB, but the problem is our
>> application allows the user a lot of options in searching, which can
>> generate complicated queries.  Based on previous posts we decided to try
>> splitting our index into multiple indexes and use ParallelMultiSearcher.
>> When we split our single index into 6 separate ones we recorded a 25%
>> decrease in response time on minimal load.  We haven't done any stress
>> testing on it yet, has anyone noticed problems with increased load when
>> using ParallelMultiSearcher?  What about using machines with more
>> processors in combination with the ParallelMultiSearcher, does this
>> result in much response time improvement?  Or is the slow down primarily
>> with disk access?
>>
>>  
>>
>> Any recommendations are welcome. 
>>
>>  
>>
>> Thanks in advance, 
>>
>> Scott
>>
>>  
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 05:55:32 2007
Return-Path: <java-user-return-28311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70290 invoked from network); 25 May 2007 05:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 05:55:31 -0000
Received: (qmail 79723 invoked by uid 500); 25 May 2007 05:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79684 invoked by uid 500); 25 May 2007 05:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79673 invoked by uid 99); 25 May 2007 05:55:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 22:55:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [218.249.153.227] (HELO mail.yikey.com) (218.249.153.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 22:55:24 -0700
x-cr-puzzleid: {353DCC2B-95C4-4103-A3A1-FAC9B65C7166}
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Subject: How Can I let my many application can Know the Index change,but Not need re-open Index.
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 25 May 2007 13:57:03 +0800
x-cr-hashedpuzzle: AhJs BoOT ByQR C5Qz Dike E4lU FL2D FeQ8 Fngf Gm8b HDXt Hedw Hm+W IviW J1wC K4KD;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{353DCC2B-95C4-4103-A3A1-FAC9B65C7166};dABvAG4AZwB4AGkAYQBvAGoAdQBuAEAAeQBpAGsAZQB5AC4AYwBvAG0A;Fri, 25 May 2007 05:57:04 GMT;SABvAHcAIABDAGEAbgAgAEkAIABsAGUAdAAgAG0AeQAgAG0AYQBuAHkAIABhAHAAcABsAGkAYwBhAHQAaQBvAG4AIABjAGEAbgAgAEsAbgBvAHcAIAB0AGgAZQAgAEkAbgBkAGUAeAAgAGMAaABhAG4AZwBlACwAYgB1AHQAIABOAG8AdAAgAG4AZQBlAGQAIAByAGUALQBvAHAAZQBuACAASQBuAGQAZQB4AC4A
Message-ID: <28C622BA8A7A474589924466E6303BE00CC5D9@EXCH01.yikey.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How Can I let my many application can Know the Index change,but Not need re-open Index.
Thread-Index: AceeTxXo9xijmwihR8GqSIYE+eFJeQAQIsBQ
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>  <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>  <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>  <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>  <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>  <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>  <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>  <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>  <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>  <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu> <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com> <Pine.LNX.4.58.0705241453500.1470@hal.rescomp.berkeley.edu>
From: =?gb2312?B?za/Qob78?= <tongxiaojun@yikey.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

	I have some application will indexing new data to one Index Directory. =
And other some application will read the index and Data Mining.
But my Mining Application must re-open the index Directory. The Index =
file have 5G . and must real time mining .
How Can I do it at many computer at one network ?=20
	If I must do it ,my mining application must Automatic reopen index ? I =
want let all application share use one IndexReader or Directory =
instance. Can I use RMI or ICE ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 06:08:45 2007
Return-Path: <java-user-return-28312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75567 invoked from network); 25 May 2007 06:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 06:08:45 -0000
Received: (qmail 93910 invoked by uid 500); 25 May 2007 06:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93883 invoked by uid 500); 25 May 2007 06:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93872 invoked by uid 99); 25 May 2007 06:08:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:08:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.56.64.133] (HELO anumail7.anu.edu.au) (130.56.64.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:08:36 -0700
Received: from smtphost.anu.edu.au (ds1.anu.edu.au [130.56.64.53])
	by anumail7.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4P68DJc017449
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 16:08:13 +1000 (EST)
	(envelope-from Stephen.Gray@anu.edu.au)
Received: from cairo.anu.edu.au (cairo.anu.edu.au [150.203.224.11])
	by smtphost.anu.edu.au (8.13.8/8.13.8) with ESMTP id l4P68C69011611
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 16:08:13 +1000 (EST)
Received: from [150.203.11.220] (assda220.anu.edu.au [150.203.11.220])
	by cairo.anu.edu.au (8.13.6/8.13.6) with ESMTP id l4P68BmT014271
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 16:08:12 +1000 (EST)
Message-ID: <46567D47.1040305@anu.edu.au>
Date: Fri, 25 May 2007 16:08:07 +1000
From: Stephen Gray <Stephen.Gray@anu.edu.au>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How Can I let my many application can Know the Index change,but
 Not need re-open Index.
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>  <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>  <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>  <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>  <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>  <359a92830705241322j252da92fn5379926cd6c93792@mail.gmail.com>  <7798eaa0705241327k739e5919id5e51783b6dc903@mail.gmail.com>  <c68e39170705241336l5d7a2836i83fa184bf68f67cd@mail.gmail.com>  <7798eaa0705241350h66ec67cew6c30388d962e4880@mail.gmail.com>  <Pine.LNX.4.58.0705241414190.28283@hal.rescomp.berkeley.edu> <7798eaa0705241439w1e262f41ve5c7338a0d6a7276@mail.gmail.com> <Pine.LNX.4.58.0705241453500.1470@hal.rescomp.berkeley.edu> <28C622BA8A7A474589924466E6303BE00CC5D9@EXCH01.yikey.com>
In-Reply-To: <28C622BA8A7A474589924466E6303BE00CC5D9@EXCH01.yikey.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.3.1.294258, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.5.24.225033 internal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

My understanding is that once you have added documents to your index you
need to close and reopen your IndexReader and Searcher, otherwise the
documents added will not be available to these.

You might want to try LuceneIndexAccessor
(http://www.blizzy.de/lucene/lucene-indexaccess-0.1.0.zip) which is very
good - this caches a single copy of IndexWriter, IndexReader and
Searcher, and hands out references to your application. Once the index
is changed with IndexWriter, and the reference to IndexWriter is
released, it automatically closes and re-opens the IndexReader and
Searcher for you.

Regards,
Steve

 wrote:
> 	I have some application will indexing new data to one Index Directory. And other some application will read the index and Data Mining.
> But my Mining Application must re-open the index Directory. The Index file have 5G . and must real time mining .
> How Can I do it at many computer at one network ? 
> 	If I must do it ,my mining application must Automatic reopen index ? I want let all application share use one IndexReader or Directory instance. Can I use RMI or ICE ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


-- 
Stephen Gray
Archive IT Officer
Australian Social Science Data Archive
18 Balmain Crescent (Building #66)
The Australian National University
Canberra ACT 0200

Phone +61 2 6125 2185
Fax +61 2 6125 0627
Web http://assda.anu.edu.au/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 06:34:38 2007
Return-Path: <java-user-return-28313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85743 invoked from network); 25 May 2007 06:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 06:34:36 -0000
Received: (qmail 38739 invoked by uid 500); 25 May 2007 06:34:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38706 invoked by uid 500); 25 May 2007 06:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38691 invoked by uid 99); 25 May 2007 06:34:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:34:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:34:28 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l4P6XwIe011452
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 09:33:59 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m5p9y2mk; 25 May 2007 09:34:00 +0300
Message-ID: <46568325.6030001@teamware.com>
Date: Fri, 25 May 2007 09:33:09 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
In-Reply-To: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 25 May 2007 09:33:59 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Carlos Pita wrote:
> Hi all,
> 
> Is there any guaranty that the maxDoc returned by a reader will be about 
> the
> total number of indexed documents?

It struck me in this thread was that there may be a misunderstanding of the 
relationship between numDocs/maxDoc and an IndexReader.

When an IndexReader is opened its maxDoc and numDocs will never change 
regardless of the additions or deletions to the index.  At least I've not been 
able to make them change in my test cases.

So, when adding a new document after a reader has been opened, this new document 
is not yet visible via the original reader, so if you are caching that array, 
you would not update that array as it relates to the reader on the index at the 
time the reader was opened.

When you open a new reader, the numDocs and maxDoc will reflect that addition. 
Same applies to deletions.  After opening the reader, you would need to 
regenerate you array cache.

As Hoss has said, this is pretty much what FieldCache does and it holds the 
caches keyed by the IndexReader.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 06:59:48 2007
Return-Path: <java-user-return-28314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94436 invoked from network); 25 May 2007 06:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 06:59:47 -0000
Received: (qmail 80000 invoked by uid 500); 25 May 2007 06:59:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79333 invoked by uid 500); 25 May 2007 06:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79322 invoked by uid 99); 25 May 2007 06:59:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:59:43 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 May 2007 23:59:37 -0700
Received: by wa-out-1112.google.com with SMTP id k17so284391waf
        for <java-user@lucene.apache.org>; Thu, 24 May 2007 23:59:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=U7mZAKqrrXZ4HofXmMfwdz8Pq9IZs7fUpdL8qCXmGsbnD+LpCUAmlSKsjW5nDGdYQ5atxfQT31RY5yepMqCSTN893FS7CVj+RMRGbBfhoERQITFKvsbvDnT+2XdzIqBDQIrfyqKCrVzRWrI6tPbXVIqSjAX4qsyoZVcmQoFrDnI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QJm2JZ/zV8/9xJmcktpcQshTiXLY7UpMBf1rlP4igwgmfDa1wEoc20fKx8qWRce6A/bd0+eBmjGepJ+0NGTI8QJKuT2l9tg+vhhhx6kFlqDXDUDcjDY1VLKEYiHrFM6rt8T9OxVdTrJNvqm6t99E+Y2K7SB2XTHd4jATVDApl0Q=
Received: by 10.114.38.2 with SMTP id l2mr1355480wal.1180076357362;
        Thu, 24 May 2007 23:59:17 -0700 (PDT)
Received: by 10.114.14.6 with HTTP; Thu, 24 May 2007 23:59:17 -0700 (PDT)
Message-ID: <7798eaa0705242359s59f0fe8dudc184e0bede6f2b7@mail.gmail.com>
Date: Fri, 25 May 2007 03:59:17 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <46568325.6030001@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_154358_18908681.1180076357282"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <46568325.6030001@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_154358_18908681.1180076357282
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I see. Anyway I would update the array when adding a document, so my reader
would be closed then, and just a writer would be accessing the index.
Supposing that no merging is triggered (for this I'm choosing a big
mergeFactor and forcing optimization when a number of documents has been
added) the numeration will be kept.

OTOH, I do some tests with FieldCache too. As I have to keep a number of ids
(an array of shorts) for each document, I tried marshaling them into a
String so they can be retrieved from the cache later. The performance is far
better than that for directly retrieving documents but still notably behind
the array approach. Maybe this is due to the unmarshaling step, I'm still
unsure.

I will try an hybrid approach where the FieldCache stores just an int which
is itself the index to the array with the effective ids. This way I won't
have to deal with index renumbering and at the same time will keep most of
the data in memory in its definitive format.

Thank you for your answer.
Cheers,
Carlos

On 5/25/07, Antony Bowesman <adb@teamware.com> wrote:
>
> Carlos Pita wrote:
> > Hi all,
> >
> > Is there any guaranty that the maxDoc returned by a reader will be about
> > the
> > total number of indexed documents?
>
> It struck me in this thread was that there may be a misunderstanding of
> the
> relationship between numDocs/maxDoc and an IndexReader.
>
> When an IndexReader is opened its maxDoc and numDocs will never change
> regardless of the additions or deletions to the index.  At least I've not
> been
> able to make them change in my test cases.
>
> So, when adding a new document after a reader has been opened, this new
> document
> is not yet visible via the original reader, so if you are caching that
> array,
> you would not update that array as it relates to the reader on the index
> at the
> time the reader was opened.
>
> When you open a new reader, the numDocs and maxDoc will reflect that
> addition.
> Same applies to deletions.  After opening the reader, you would need to
> regenerate you array cache.
>
> As Hoss has said, this is pretty much what FieldCache does and it holds
> the
> caches keyed by the IndexReader.
>
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_154358_18908681.1180076357282--

From java-user-return-28315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 07:33:19 2007
Return-Path: <java-user-return-28315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11749 invoked from network); 25 May 2007 07:33:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 07:33:18 -0000
Received: (qmail 28251 invoked by uid 500); 25 May 2007 07:33:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28212 invoked by uid 500); 25 May 2007 07:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28201 invoked by uid 99); 25 May 2007 07:33:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:33:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of paulo.silveira@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:33:11 -0700
Received: by an-out-0708.google.com with SMTP id b20so179832ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 00:32:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=LaIFl/+eXbNWWgfgcxO9OGSMMCbf6GhhBFYr9gojDN2U7PjI4Nu1jpyHAdf4xiXKUXHUwx9Zi7HMh86ACDGuvQcsjuHqwWbPl2K/4KSgAORBdJMwD0uCzI539gakG4wiTBstPNSVL6sgE+uw+CG7JIPoC7exhoL6Dq2Iheg7Xoo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=jIt+x0ICuXDtNCq9ndungFr4g6jLRt9TMVlZ71UQfjYtskJnDfqiySjMui0r2WrxpIRm5HHSebtZhrToK5aKghDPNxnutmtMkblT3lKV4LPV6X9Ve1oevbV419w8utZ7QL+eA/3tZX/CD6pf+j6VTVohLQYKGYhluwhncvyS7Os=
Received: by 10.100.227.5 with SMTP id z5mr2536469ang.1180078359533;
        Fri, 25 May 2007 00:32:39 -0700 (PDT)
Received: by 10.100.139.15 with HTTP; Fri, 25 May 2007 00:32:39 -0700 (PDT)
Message-ID: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com>
Date: Fri, 25 May 2007 04:32:39 -0300
From: "Paulo Silveira" <paulo.silveira@caelum.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: Writing a document using two different Analyzers
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: e69f00f653f1b739
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I have a Document with tow fields: one I would like to write with
SimpleAnalyzer, the other I want to use StandardAnalyzer, is there a
simple way to do it?

thanks

--=20
Paulo E. A. Silveira
Caelum Ensino e Solu=E7=F5es em Java
http://www.caelum.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 07:52:04 2007
Return-Path: <java-user-return-28316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18201 invoked from network); 25 May 2007 07:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 07:52:02 -0000
Received: (qmail 60513 invoked by uid 500); 25 May 2007 07:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60045 invoked by uid 500); 25 May 2007 07:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60034 invoked by uid 99); 25 May 2007 07:52:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:52:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:51:53 -0700
Received: by ug-out-1314.google.com with SMTP id m2so744637uge
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 00:51:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Oss9WhxY63zqTmuz3OR1iU5KtPqvMWR5Yl33AXNLtK+rWM55P0unsv5DDFr94O5dwHmpWvT+YvZccCJy31eu2x4VkYXRe8mDoMzO/t3NAU/9RETH+QjOdRxMvDSjfaVcDbwX803Ip7t210mxDMloXVDCPo4XB/YSMci5nm4XQuM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=kponXnhygOpe0yZ+94J8cQ/VXV+TR6CRJh1Ynn1Y94ShqxMMftEMmFzuHJ2yKnQq6xdZ+byfdv7gKCIRyJMHZ1FS01p8RV+AuxWaASDgEbYUZPJVyMG2Cj1IYyhKR7yV/Ltufz/+t0SHEHu6QiZzVHLJliV6ctAWXfk3g8VFR9A=
Received: by 10.66.220.17 with SMTP id s17mr2744264ugg.1180079492670;
        Fri, 25 May 2007 00:51:32 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.114.76])
        by mx.google.com with ESMTP id m1sm6030486uge.2007.05.25.00.51.31;
        Fri, 25 May 2007 00:51:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com>
References: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Writing a document using two different Analyzers
Date: Fri, 25 May 2007 09:49:55 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


25 maj 2007 kl. 09.32 skrev Paulo Silveira:

>
> I have a Document with tow fields: one I would like to write with
> SimpleAnalyzer, the other I want to use StandardAnalyzer, is there a
> simple way to do it?

PerFieldAnalyzerWrapper

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/ 
org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 07:54:19 2007
Return-Path: <java-user-return-28317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19071 invoked from network); 25 May 2007 07:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 07:54:18 -0000
Received: (qmail 66166 invoked by uid 500); 25 May 2007 07:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66135 invoked by uid 500); 25 May 2007 07:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66120 invoked by uid 99); 25 May 2007 07:54:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:54:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of anybridge@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:54:09 -0700
Received: by wx-out-0506.google.com with SMTP id t8so270076wxc
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 00:53:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VP0UYxqj7WwdMv2rqQYAxMmcE/GXh77CVH/Y5VawO1cGcS8zjN5dFWX/yFcbYgS2NrA89fKAycW0ZYmIMnWGFbOlNnMkZnrVPxht5/oL2XfV2ZEWkKt7Oo2rUvaHMs7ax9WzsruhS2qEevddFINklO0ANgebnQUPtCMSHGdFunA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=My6PFTKjXSeui5pH60UuhaBWb1zeVeDrgpEQM1RozewBTq24nyJPr1GZ2gieXw6+qvliy9Fu2w5ZjTABuikKiQnN23UrfAXkb2NVSc7fmJv4ioh2Z6YqH+3LEi5ow6+hWVrOYvSKEFDCqGPGENnH9B1kmQrsZQe9BCf5YkdRn6k=
Received: by 10.70.59.20 with SMTP id h20mr3632067wxa.1180079628681;
        Fri, 25 May 2007 00:53:48 -0700 (PDT)
Received: by 10.70.75.10 with HTTP; Fri, 25 May 2007 00:53:48 -0700 (PDT)
Message-ID: <41255c260705250053p6eda0931vdc997fa173224ca3@mail.gmail.com>
Date: Fri, 25 May 2007 15:53:48 +0800
From: "Anny Bridge" <anybridge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: number of times the keyword match
In-Reply-To: <DAD719AC-2788-471C-9398-5DC099F5A935@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24194_1941067.1180079628631"
References: <41255c260705150005s68914523h3b9e98cdafac34b@mail.gmail.com>
	 <DAD719AC-2788-471C-9398-5DC099F5A935@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24194_1941067.1180079628631
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,

Is there any code example for this case?

Thanks,
Anny

On 5/15/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Yes, have a look at the SpanQuery functionality.
>
> -Grant
>
> On May 15, 2007, at 3:05 AM, Anny Bridge wrote:
>
> > Hi all,
> >
> > When do search with lucene,can i get the number of times the
> > keyword match
> > with a specific document?
> >
> > Thanks in advance.
> >
> > Best Regards,
> > Anny.
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24194_1941067.1180079628631--

From java-user-return-28318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 07:55:40 2007
Return-Path: <java-user-return-28318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19504 invoked from network); 25 May 2007 07:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 07:55:38 -0000
Received: (qmail 69320 invoked by uid 500); 25 May 2007 07:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69101 invoked by uid 500); 25 May 2007 07:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69090 invoked by uid 99); 25 May 2007 07:55:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:55:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of paulo.silveira@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 00:55:28 -0700
Received: by an-out-0708.google.com with SMTP id b20so181690ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 00:55:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=qswmxTaevZMgkqWsWw796nn/alpBkf5ysYC+MzplQ8Hzz3GrJABX3P3yCGeErHMieWUgdnFkOi6vOAgKn9wLnD66yf0rM6IcBiqP5Gdu8shA9wtER21aYJiMUQ5ZYuCyblx/k/Aiw0QL2trzwd9x/HxP0Qllj0AXCFQkcpXZbNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=JyODkht+Q19wN7LcP9/eM7bA78qr9FuEJ91t1wspHz0tCgnZuVe7jvV51E2t7acKGHU4rEP41x9xoPbvSvQ+H2ho5VORtKG2WtcNHGQRTtjvcfeKGIoyjGc35RUIwY8xhsZU/Sw54U4jvBqARMzbrvm1IJ4Je0SXieJozqFoQz4=
Received: by 10.100.142.12 with SMTP id p12mr2512778and.1180079707036;
        Fri, 25 May 2007 00:55:07 -0700 (PDT)
Received: by 10.100.139.15 with HTTP; Fri, 25 May 2007 00:55:06 -0700 (PDT)
Message-ID: <6026e8b0705250055p145dcd35t4cbc9469d6688111@mail.gmail.com>
Date: Fri, 25 May 2007 04:55:06 -0300
From: "Paulo Silveira" <paulo.silveira@caelum.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Writing a document using two different Analyzers
In-Reply-To: <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com>
	 <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com>
X-Google-Sender-Auth: 7a8e4c90de4704e3
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/25/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> PerFieldAnalyzerWrapper
>

that was fast! thanks!


> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
> org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Paulo E. A. Silveira
Caelum Ensino e Solu=E7=F5es em Java
http://www.caelum.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 12:36:47 2007
Return-Path: <java-user-return-28319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37169 invoked from network); 25 May 2007 12:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 12:36:46 -0000
Received: (qmail 25298 invoked by uid 500); 25 May 2007 12:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25233 invoked by uid 500); 25 May 2007 12:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25198 invoked by uid 99); 25 May 2007 12:36:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 05:36:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 05:36:42 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 16030772 for java-user@lucene.apache.org; Fri, 25 May 2007 14:36:17 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Setting the maximum number of documents in a lucene segment
Date: Fri, 25 May 2007 14:36:17 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E22@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Setting the maximum number of documents in a lucene segment
Thread-Index: AceetSigyQ5Lc+HVT8K1PHrQRQlZUA==
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am trying to change the maximum number of documents in a lucene =
segment. By default it seems to be 10. When I have a mergeFactor of say =
10, then on average, after every 100 added documents lucene is merging =
segments.

I want each segment to contain more then the default 10 documents, =
because I need to minimize merging.

Is there a way to achieve this? writer.setMaxBufferedDocs(largeValue) =
does not do the trick (I think because in my case because the writer is =
flushed and closed after an few updates)

Does anyone know wether it is possible to make the default number of =
documents a segment can contain larger?

Thanks in advance,=20

Ard Schrijvers


--=20

Hippo
Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
a.schrijvers@hippo.nl / http://www.hippo.nl
--------------------------------------------------------------=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 12:40:58 2007
Return-Path: <java-user-return-28320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38853 invoked from network); 25 May 2007 12:40:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 12:40:57 -0000
Received: (qmail 35141 invoked by uid 500); 25 May 2007 12:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35099 invoked by uid 500); 25 May 2007 12:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35088 invoked by uid 99); 25 May 2007 12:40:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 05:40:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 05:40:48 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 16030996 for java-user@lucene.apache.org; Fri, 25 May 2007 14:40:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Setting the maximum number of documents in a lucene segment
Date: Fri, 25 May 2007 14:40:26 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E23@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Setting the maximum number of documents in a lucene segment
Thread-Index: AceetSigyQ5Lc+HVT8K1PHrQRQlZUAAFIjaQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


>=20
> Hello,
>=20
> I am trying to change the maximum number of documents in a=20
> lucene segment. By default it seems to be 10.

Correction: 10 for the smallest (just created) segments of course, =
because obviously merged segments are likely to contain many more =
documents

> When I have a=20
> mergeFactor of say 10, then on average, after every 100 added=20
> documents lucene is merging segments.
>=20
> I want each segment to contain more then the default 10=20
> documents, because I need to minimize merging.
>=20
> Is there a way to achieve this?=20
> writer.setMaxBufferedDocs(largeValue) does not do the trick=20
> (I think because in my case because the writer is flushed and=20
> closed after an few updates)
>=20
> Does anyone know wether it is possible to make the default=20
> number of documents a segment can contain larger?
>=20
> Thanks in advance,=20
>=20
> Ard Schrijvers
>=20
>=20
> --=20
>=20
> Hippo
> Oosteinde 11
> 1017WT Amsterdam
> The Netherlands
> Tel  +31 (0)20 5224466
> -------------------------------------------------------------
> a.schrijvers@hippo.nl / http://www.hippo.nl
> --------------------------------------------------------------=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 13:50:40 2007
Return-Path: <java-user-return-28321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83318 invoked from network); 25 May 2007 13:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 13:50:38 -0000
Received: (qmail 95013 invoked by uid 500); 25 May 2007 13:50:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94976 invoked by uid 500); 25 May 2007 13:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94955 invoked by uid 99); 25 May 2007 13:50:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 06:50:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 06:50:20 -0700
Received: by an-out-0708.google.com with SMTP id b20so218739ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 06:49:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=liMCWfrSAdo3u63Xfu8VDWIkrThKj8qfJxp9dZ2CxNNYqH0hRx5r1WeIoUhLwRppdVnJ0xGzOrt6C6ljoAdTF2Om1v76jdsgZHwdUOyMm3zfGBjj9uud5C/k/g/XhcadnHm1pgMZpow2T1LDEERrmLj8oItox0szqFVjktNYRS0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Q2SfbvTKVDuNJGsu8hMrfPi4hwnUwn2CUXreo8159j7qPJFU1P4aXpjspBEAtJnpo+NMP1F4JFwjxy6S8bpgBKewZbSIivwwY0IP9Kv555GCH/P8x35ISfq3jGdbWPoGGaQuZP9OMIjSrqfYlsE1XVckcEsXTgHS+aOFlOTiqrQ=
Received: by 10.114.174.2 with SMTP id w2mr1500472wae.1180100993808;
        Fri, 25 May 2007 06:49:53 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Fri, 25 May 2007 06:49:53 -0700 (PDT)
Message-ID: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
Date: Fri, 25 May 2007 09:49:53 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Grant writes:
> Have a look at the DisjunctionMaxQuery, I think it might help,
> although I am not sure it will fully cover your case.

The definition for DisjunctionMaxQuery is provided at this URL:
http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.DisjunctionMaxQuery.html,

Grossly doing editorial cuts of the synopsis text, we end up with this
simplified description:
'This is useful when searching for a word in multiple fields ... if
the query is "albino elephant" this ensures that "albino" matching one
field and "elephant" matching another gets a higher score than
"albino" matching both fields'

First off, thanks Grant -- I hadn't even considered the possibility of
what happens if multiple fields in the _same_ document matched.
That's an intriguing case, indeed.

However, for my particular dataset, I only have the one field
containing the contents of the document, so unless I've missed an
alternate way of using it, I'm not how I should apply it to my
specific case.


For clarification, what I'm trying to do is make sure that if a
document uses a single term many times, that it doesn't drown out a
document that uses more search terms, though less frequently, when the
scores are returned.

Take a document that says: "Albino. Albino. Albino. Albino. Albino.
Albino. Albino!"  Right there, that's seven hits on albino, so this
must _really_ be a document about albino.

Take a document that says "Albino elephant." and nothing more.  This
only has two keyword hits.

What I want to do is make sure the returns results don't go "Oh, 7 is
more than 2, let's return the Albino document first."

Instead, I'm looking for "This document matched 2 of the things he was
looking for, albino and also elephant, while the other document only
matched 1 of the things he was looking for -- 2 is more than 1, so
give the 'Albino elephant.' the best score."

Thanks,
-wls

ps.  I wasn't even aware DisjunctionMaxQuery existed; is there a
resource that describes the purpose of BooleanQuery,
DisjunctionMaxQuery, and others in simple reference?

For instance, if I go to the BooleanQuery page,
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/BooleanQuery.html,
It doesn't even say "sum of the field scores" -- maybe I'm looking in
the wrong place, but for someone new to the API, it's very hard to
figure out what class you want when it's unclear what specific affect
it has on scoring.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 14:00:51 2007
Return-Path: <java-user-return-28322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88121 invoked from network); 25 May 2007 14:00:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 14:00:48 -0000
Received: (qmail 41667 invoked by uid 500); 25 May 2007 14:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41625 invoked by uid 500); 25 May 2007 14:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41507 invoked by uid 99); 25 May 2007 14:00:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:00:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:00:24 -0700
Received: by wa-out-1112.google.com with SMTP id k17so331704waf
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 07:00:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Lkob987p1+YjFcBPCYZwHc+0EIqp46zQeqZnU/Qy5rn7oACZzO/FOAAOmKVyqOZIXcV/BVz/vrJIsYOaEMXruZ0yRCJc5uFEJB/THrOGC4m343KZO9BcqrGqPejQoBfU7rfXJ7kQGewN5muolGdagyw+txJZelrKcEc0pibu9sQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cEoZ4KZlaeK0hwSyDpRzFZYk/r3br6zxpyBGq9rjIDnjdJbYgkHbWwIMG/G0jsKwwblyvzwL67TP/fM7g6wTMrQEPU9QM+vphFmVXDl7sfu6CF9yh1W/dZAwpFRo4Jm+fjkqTDBHTLLkBeo8jfiUZTLnYDgILCPBFsJxBQZZwlg=
Received: by 10.114.121.1 with SMTP id t1mr1526872wac.1180101603540;
        Fri, 25 May 2007 07:00:03 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Fri, 25 May 2007 07:00:03 -0700 (PDT)
Message-ID: <ae6f38f60705250700j7ac17abau3c3aa5bc029bef54@mail.gmail.com>
Date: Fri, 25 May 2007 10:00:03 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
In-Reply-To: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In reading the math for scoring at the bottom of:
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/Similarity.html

It appears that if I can make tf() and idf(), term frequency and
inverse document frequency respectively, both return 1, then coord(),
which is now the primary factor of the product, is what I'm looking
for.

Would anyone have enough knowledge to confirm / deny?

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 14:44:30 2007
Return-Path: <java-user-return-28323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17886 invoked from network); 25 May 2007 14:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 14:44:30 -0000
Received: (qmail 49772 invoked by uid 500); 25 May 2007 14:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49458 invoked by uid 500); 25 May 2007 14:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49443 invoked by uid 99); 25 May 2007 14:44:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:44:26 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: 69.50.210.250 is neither permitted nor denied by domain of enis.soz.nutch@gmail.com)
Received: from [69.50.210.250] (HELO server.handydns.com) (69.50.210.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:44:19 -0700
Received: from [212.174.130.110] (helo=[192.168.15.18])
	by server.handydns.com with esmtpa (Exim 4.63)
	(envelope-from <enis.soz.nutch@gmail.com>)
	id 1Hrb1J-0006dQ-Tf
	for java-user@lucene.apache.org; Fri, 25 May 2007 07:43:58 -0700
Message-ID: <4656F62A.3060005@gmail.com>
Date: Fri, 25 May 2007 17:43:54 +0300
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.10 (X11/20070306)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: multiple tokens at the same position
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - server.handydns.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

In nutch we have a use case in which we need to store tokens with their 
original text plus their stemmed form plus their canonical form(through 
some asciifization). From my understanding of lucene, it makes sense to 
write a tokenstream which generates several tokens for each "word", but 
place all the tokens for the "word" at the same position with 
Token#setPositionIncrement(0).
This way we could be able to search over this field using any 
form(stemmed, canonical, original) of the "word". Actually i have two 
questions here. First is that is there any way to avoid matching stemmed 
or canonical forms to a phrase query. Moreover it seems that adding 
multiple forms of the "word"s alters statistical calculations for 
scoring, especially for tf and idf, because the frequency of the root 
form of the word is incremented at each word with that root form. Is 
there any way that we could avoid it?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 14:52:14 2007
Return-Path: <java-user-return-28324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20516 invoked from network); 25 May 2007 14:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 14:52:13 -0000
Received: (qmail 59726 invoked by uid 500); 25 May 2007 14:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59681 invoked by uid 500); 25 May 2007 14:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59670 invoked by uid 99); 25 May 2007 14:52:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:52:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 07:52:03 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163CDE94@mailer.syr.edu>; Fri, 25 May 2007 10:51:42 -0400
Message-ID: <4656F7C6.1080008@syr.edu>
Date: Fri, 25 May 2007 10:50:46 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
References: <4656F62A.3060005@gmail.com>
In-Reply-To: <4656F62A.3060005@gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Enis,

Enis Soztutar wrote:
> In nutch we have a use case in which we need to store tokens with their
> original text plus their stemmed form plus their canonical form(through
> some asciifization). From my understanding of lucene, it makes sense to
> write a tokenstream which generates several tokens for each "word", but
> place all the tokens for the "word" at the same position with
> Token#setPositionIncrement(0).
> This way we could be able to search over this field using any
> form(stemmed, canonical, original) of the "word". Actually i have two
> questions here. First is that is there any way to avoid matching stemmed
> or canonical forms to a phrase query. Moreover it seems that adding
> multiple forms of the "word"s alters statistical calculations for
> scoring, especially for tf and idf, because the frequency of the root
> form of the word is incremented at each word with that root form. Is
> there any way that we could avoid it?

Answering both questions: Couldn't you just use a different field for
each form?

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 15:04:23 2007
Return-Path: <java-user-return-28325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26723 invoked from network); 25 May 2007 15:04:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 15:04:22 -0000
Received: (qmail 81732 invoked by uid 500); 25 May 2007 15:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81127 invoked by uid 500); 25 May 2007 15:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81116 invoked by uid 99); 25 May 2007 15:04:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 08:04:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of enis.soz.nutch@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 08:04:12 -0700
Received: by an-out-0708.google.com with SMTP id b20so232831ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 08:03:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UjA7R7mxo+4pZ6OGcLeQQR1K2Qmal8OUdhYItilCUYmwhh83tHr1cyXo7JMCAMyU7nw78gCLFgvuWIP+e+RYGhFpiNvQoHs7KtEsIsHzakKw3PYX6cHEkF9TKIEyrh4JzWuIz8p+0AGyPNLbriDdyiHzCW0IWbaP79j85q0AuT0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ag7pjR2azim1vy7Yt78bJV2lkjon61fY4AUFQPMYBYzCmogJ4pgjnprO7L3vcp+EX0iba/ulz6QD+hnssuVlkAD68nvB7Ob6wiAUROTwEZh2Yd1n3MH8nJoyoqmlIqXPcOXdj6xtRuWfc/HddpzHx1Q1k0bFtcE0/+WtgAh34mg=
Received: by 10.100.226.15 with SMTP id y15mr2794763ang.1180105401340;
        Fri, 25 May 2007 08:03:21 -0700 (PDT)
Received: by 10.100.112.8 with HTTP; Fri, 25 May 2007 08:03:21 -0700 (PDT)
Message-ID: <745c30f80705250803v2d2d4e34i88cf0da6732d393f@mail.gmail.com>
Date: Fri, 25 May 2007 18:03:21 +0300
From: "Enis Soztutar" <enis.soz.nutch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
In-Reply-To: <4656F7C6.1080008@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_156665_33529613.1180105401305"
References: <4656F62A.3060005@gmail.com> <4656F7C6.1080008@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_156665_33529613.1180105401305
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, indeed we could but it brings other problems, for example increasing
the index size, and extending the query to search for multiple fields, etc.

On 5/25/07, Steven Rowe <sarowe@syr.edu> wrote:
>
> Hi Enis,
>
> Enis Soztutar wrote:
> > In nutch we have a use case in which we need to store tokens with their
> > original text plus their stemmed form plus their canonical form(through
> > some asciifization). From my understanding of lucene, it makes sense to
> > write a tokenstream which generates several tokens for each "word", but
> > place all the tokens for the "word" at the same position with
> > Token#setPositionIncrement(0).
> > This way we could be able to search over this field using any
> > form(stemmed, canonical, original) of the "word". Actually i have two
> > questions here. First is that is there any way to avoid matching stemmed
> > or canonical forms to a phrase query. Moreover it seems that adding
> > multiple forms of the "word"s alters statistical calculations for
> > scoring, especially for tf and idf, because the frequency of the root
> > form of the word is incremented at each word with that root form. Is
> > there any way that we could avoid it?
>
> Answering both questions: Couldn't you just use a different field for
> each form?
>
> --
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_156665_33529613.1180105401305--

From java-user-return-28326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 15:23:07 2007
Return-Path: <java-user-return-28326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38599 invoked from network); 25 May 2007 15:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 15:23:07 -0000
Received: (qmail 29333 invoked by uid 500); 25 May 2007 15:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29306 invoked by uid 500); 25 May 2007 15:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29290 invoked by uid 99); 25 May 2007 15:23:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 08:23:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 08:22:59 -0700
Received: by py-out-1112.google.com with SMTP id a25so912724pyi
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 08:22:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=qThqEYuxxeZ89dArBRzND0EmIpCr+LTf1IwVeSO3balqvzB/PRPcgkVPvvHOi2c3owLcJZNVQlrqC3wJLB68bGN+jjSGirghm5uHqz2PZJigEAG+AXtFeHIc6FZEGa++VdXY38qYkV8z9sApg3jbhlKEotPSm8SuuctmQAfm1BI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=InUISKrq/u4MW8pjjRFa13D/qZsWsmfIJXSTWxOOuozb7/WlH+OLUpEMMrhKSbeRQogd5juPw/5BMWWlvgSb1cBJ2UzFNAmsLrufd3MosUfmhz1krp9fajm/7Kr1Wy/Yay09MqBKQmALoiiMi48f07bdDEpGVg29ejkXC30TW+E=
Received: by 10.35.85.16 with SMTP id n16mr5413372pyl.1180106558329;
        Fri, 25 May 2007 08:22:38 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Fri, 25 May 2007 08:22:38 -0700 (PDT)
Message-ID: <c68e39170705250822x67f5732ia3a101f0eb6696f4@mail.gmail.com>
Date: Fri, 25 May 2007 11:22:38 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
In-Reply-To: <ae6f38f60705250700j7ac17abau3c3aa5bc029bef54@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
	 <ae6f38f60705250700j7ac17abau3c3aa5bc029bef54@mail.gmail.com>
X-Google-Sender-Auth: 090f6d6c7e775d1b
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/25/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
> In reading the math for scoring at the bottom of:
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/Similarity.html
>
> It appears that if I can make tf() and idf(), term frequency and
> inverse document frequency respectively, both return 1, then coord(),
> which is now the primary factor of the product, is what I'm looking
> for.

Pretty close, I think.  There is still the length normalization factor
that biases short fields over long.  That's calculated at index time,
and stored in the "norm" along with the boost (they are multiplied
together).

You can change the similarity during indexing, or you can completely
knock out norms via Field.setOmitNorms(true)

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 15:43:37 2007
Return-Path: <java-user-return-28327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44576 invoked from network); 25 May 2007 15:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 15:43:37 -0000
Received: (qmail 69350 invoked by uid 500); 25 May 2007 15:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69317 invoked by uid 500); 25 May 2007 15:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69306 invoked by uid 99); 25 May 2007 15:43:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 08:43:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 May 2007 08:43:29 -0700
Received: (qmail 61620 invoked by uid 60001); 25 May 2007 15:43:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=IXmmuoh5dNuj17aQY9pIc1XFoRPJyJD9TuEjRq7hqTpOrfLzM51QdYEx6oIMflK+rhRDNlTAg6TK2H/sBffD2VGHRBqCXXHvCwLb5tJF8e2Dt8T00++AX7zJcWmzd1NF9kgH8aqMGy68XhgN+PW5s+Qfi5RNveOCviYmElUEQK8=  ;
Message-ID: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
X-YMail-OSG: _5VzJ.gVM1l8Rut06Y9xfVH1RxXKoGfhYRK1j3lwn1nGB98eO6vHLbl_vpnNRktS.w--
Received: from [63.192.54.237] by web50312.mail.re2.yahoo.com via HTTP; Fri, 25 May 2007 08:43:07 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Fri, 25 May 2007 08:43:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Setting the maximum number of documents in a lucene segment
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Ard,

What you are after is a higher mergeFactor and probably also a higher maxBufferedDocs.  Is indexing performance the concern?
Don't go crazy with setting a super high (e.g. 100+) mergeFactor, unless you really have the number of open files on your server(s) set to a solid/high number. maxBufferedDocs can be set to a much higher number, typically, depending on the size of the documents you are trying to index and the amount of heap the JVM has to work with.  There is also a new API for explicit flushes of in-memory documents while indexing to control memory consumption.

Otis
--
Lucene Consulting -- http://lucene-consulting.com/


----- Original Message ----
From: Ard Schrijvers <a.schrijvers@hippo.nl>
To: java-user@lucene.apache.org
Sent: Friday, May 25, 2007 8:40:26 AM
Subject: RE: Setting the maximum number of documents in a lucene segment


> 
> Hello,
> 
> I am trying to change the maximum number of documents in a 
> lucene segment. By default it seems to be 10.

Correction: 10 for the smallest (just created) segments of course, because obviously merged segments are likely to contain many more documents

> When I have a 
> mergeFactor of say 10, then on average, after every 100 added 
> documents lucene is merging segments.
> 
> I want each segment to contain more then the default 10 
> documents, because I need to minimize merging.
> 
> Is there a way to achieve this? 
> writer.setMaxBufferedDocs(largeValue) does not do the trick 
> (I think because in my case because the writer is flushed and 
> closed after an few updates)
> 
> Does anyone know wether it is possible to make the default 
> number of documents a segment can contain larger?
> 
> Thanks in advance, 
> 
> Ard Schrijvers
> 
> 
> -- 
> 
> Hippo
> Oosteinde 11
> 1017WT Amsterdam
> The Netherlands
> Tel  +31 (0)20 5224466
> -------------------------------------------------------------
> a.schrijvers@hippo.nl / http://www.hippo.nl
> -------------------------------------------------------------- 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 17:08:05 2007
Return-Path: <java-user-return-28328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82341 invoked from network); 25 May 2007 17:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 17:08:03 -0000
Received: (qmail 52644 invoked by uid 500); 25 May 2007 17:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52596 invoked by uid 500); 25 May 2007 17:08:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52584 invoked by uid 99); 25 May 2007 17:08:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 10:08:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 10:07:54 -0700
Received: by mu-out-0910.google.com with SMTP id g7so812251muf
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 10:07:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jvrprjx3XontWdo6WoUG1dNCOC0kg5wlhnNiiNykgfylUYcQH0NTABwdrJdnwL/eAiCYzllpBeP2D/Bj+Qu06UBqIka/flFeE2WlUV19AU9/wn0r/Y/LNYFIU78Jb3l7Ae1msphW7v05EhiTW69OfjujsLKfPvRNIwji5LmiytI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dDcLNRVayMvMyAHouvTLWTEIRDrbFS9CWMrz5vMTFr8qbcdv55K2r5Su8Z7N0fg6Q4kzz6F91S3dsveafvYlGXg9xb3VfSjC4X3m1QWQGHUESxj7VY4bKh0OwCL6qLx9jKCZZCNuV2x7UtSJHgEjcncY6cClv+xJP9wwFTLxoTA=
Received: by 10.82.113.6 with SMTP id l6mr5856977buc.1180112852730;
        Fri, 25 May 2007 10:07:32 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Fri, 25 May 2007 10:07:32 -0700 (PDT)
Message-ID: <359a92830705251007s19bcfd29j99fbb6cc8fa10af@mail.gmail.com>
Date: Fri, 25 May 2007 13:07:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
In-Reply-To: <4656F62A.3060005@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96491_28373578.1180112852691"
References: <4656F62A.3060005@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96491_28373578.1180112852691
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can only speak to the " avoid matching stemmed
or canonical forms" part...

Yes, but you've got to do some fancy dancing when you index,
something like adding a special signifier to, say, the original token.
I'll ignore the canonical part of your question for the sake of
brevity.


Consider indexing "running"
You'd index "run" and "running$".

Now, whenever you care about the original token, you append
the '$' to the term and search for that.

This has one other advantage. Say you index the term "run" with
the above. If you don't do something like adding the $ to the
original, you can't distinguish between getting a hit on the
stem or not. That is, you can't distinguish between getting a hit
where the original word was "run" and one where the original
was "running". This may be important for "exact match".

Best
Erick

On 5/25/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>
> Hi,
>
> In nutch we have a use case in which we need to store tokens with their
> original text plus their stemmed form plus their canonical form(through
> some asciifization). From my understanding of lucene, it makes sense to
> write a tokenstream which generates several tokens for each "word", but
> place all the tokens for the "word" at the same position with
> Token#setPositionIncrement(0).
> This way we could be able to search over this field using any
> form(stemmed, canonical, original) of the "word". Actually i have two
> questions here. First is that is there any way to avoid matching stemmed
> or canonical forms to a phrase query. Moreover it seems that adding
> multiple forms of the "word"s alters statistical calculations for
> scoring, especially for tf and idf, because the frequency of the root
> form of the word is incremented at each word with that root form. Is
> there any way that we could avoid it?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_96491_28373578.1180112852691--

From java-user-return-28329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 17:13:01 2007
Return-Path: <java-user-return-28329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83449 invoked from network); 25 May 2007 17:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 17:12:59 -0000
Received: (qmail 58574 invoked by uid 500); 25 May 2007 17:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58546 invoked by uid 500); 25 May 2007 17:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58535 invoked by uid 99); 25 May 2007 17:12:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 10:12:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.42 as permitted sender)
Received: from [206.46.252.42] (HELO vms042pub.verizon.net) (206.46.252.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 10:12:51 -0700
Received: from dorthy ([72.73.130.11])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JIL00FNBX4HZ9Z2@vms042.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 25 May 2007 12:12:18 -0500 (CDT)
Date: Fri, 25 May 2007 12:12:58 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Indexing help needed
To: <java-user@lucene.apache.org>
Message-id: <01c301c79eef$f156abf0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've been working on this for a while, I am trying to get the demo code that 
comes with Lucene to index OpenOffice documentss. I've looked at LIUS code 
and at Nutch code. But can't find an easy way. So I am digging into the 
code.



I wrote a KcmiDocument class that returns a Document. In it I do a doc.add() 
where I the specify "contents" and a FileReader

/*

* Add the contents of the file to a field named "contents". Specify a 
Reader,

* so that the text of the file is tokenized and indexed, but not stored.

* Note that FileReader expects the file to be in the system's default 
encoding.

* If that's not the case searching for special characters will fail.

* FileReader is the key, need to add the correct reader for none text 
formats.

*/

doc.add(new Field("contents", new FileReader(f)));





Now if I could just add a file reader for OpenOffice say OOFileReader() that 
unzip and did all the dom stuff hen everything would work and the code 
changes would be minimal, right? My question is, am I correct in my 
thinking? And if so does any one know of an OOFileReader? If I am not 
correct what am I missing here. It is kind of important that I learn how to 
add different files types like OO or AutoCad, so we can make a build (with 
Lucene) or buy call.

Thanks to all that try to help me out

Jim S

P.S. If I get it working I will be happy to email post the code.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 18:11:24 2007
Return-Path: <java-user-return-28330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8065 invoked from network); 25 May 2007 18:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 18:11:23 -0000
Received: (qmail 92358 invoked by uid 500); 25 May 2007 18:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92327 invoked by uid 500); 25 May 2007 18:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92316 invoked by uid 99); 25 May 2007 18:11:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 11:11:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 11:11:14 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l4PIB5m24647
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 13:11:05 -0500
Message-ID: <465726A3.3090004@getopt.org>
Date: Fri, 25 May 2007 20:10:43 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing help needed
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com> <01c301c79eef$f156abf0$2e01a8c0@dorthy>
In-Reply-To: <01c301c79eef$f156abf0$2e01a8c0@dorthy>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jim shirreffs wrote:

> Thanks to all that try to help me out
> 
> Jim S
> 
> P.S. If I get it working I will be happy to email post the code.

If you looked at the code in Nutch, you can take most of the parse-oo 
plugin verbatim, because all this plugin does is it extracts the text 
content and metadata from OO files.



-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 18:26:21 2007
Return-Path: <java-user-return-28331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15065 invoked from network); 25 May 2007 18:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 18:26:19 -0000
Received: (qmail 13963 invoked by uid 500); 25 May 2007 18:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13533 invoked by uid 500); 25 May 2007 18:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13522 invoked by uid 99); 25 May 2007 18:26:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 11:26:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 11:26:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7D0245B764; Fri, 25 May 2007 11:25:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 534D77F403
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 11:25:51 -0700 (PDT)
Date: Fri, 25 May 2007 11:25:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
In-Reply-To: <745c30f80705250803v2d2d4e34i88cf0da6732d393f@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705251115580.14972@hal.rescomp.berkeley.edu>
References: <4656F62A.3060005@gmail.com> <4656F7C6.1080008@syr.edu>
 <745c30f80705250803v2d2d4e34i88cf0da6732d393f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Yes, indeed we could but it brings other problems, for example increasing
: the index size, and extending the query to search for multiple fields, etc.

1) if you index both teh raw and stemmed forms your index is going to grow
to roughly the same size regardless of wether the stem and the arw are in
teh same field or differnet fields.

2) For a particular user action, if you only want to search for one form
(either raw or stemmed) then your query doesn't have to search over
multiple fields -- it just has to search on which ever field you care
about for the particular user action.  if you want to search for *both*
the stemmed and raw forms n a single query, then the compelxity of hte
query is the same regardless of wether the two clauses are on the same
field or differnet fields.

: > > or canonical forms to a phrase query. Moreover it seems that adding
: > > multiple forms of the "word"s alters statistical calculations for
: > > scoring, especially for tf and idf, because the frequency of the root
: > > form of the word is incremented at each word with that root form. Is

it's a matter of opinion wether this is "right" or not ... if you are
storing both the raw and stemmed forms then in theory your tf/idf numbers
now both represent "twice" what they normally would and it balances out..
"dog" is not only a raw word, but also it's own stem, so a tf(docA,dog)=2
for one real instance of "dog" is just as correct as a doc that contains
"dogs" and gets tf(docB,dog)=1 and tf(docB,dogs)=1.

If you disagree with this line of thinking, asimple way to fix the problem
is to use a TokenFilter that removes any tokens at the same position which
contain the same text...

http://lucene.apache.org/solr/api/org/apache/solr/analysis/RemoveDuplicatesTokenFilter.html



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 19:14:15 2007
Return-Path: <java-user-return-28332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33578 invoked from network); 25 May 2007 19:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 19:14:14 -0000
Received: (qmail 10634 invoked by uid 500); 25 May 2007 19:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10602 invoked by uid 500); 25 May 2007 19:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10591 invoked by uid 99); 25 May 2007 19:14:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:14:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of enis.soz.nutch@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:14:04 -0700
Received: by an-out-0708.google.com with SMTP id b20so274754ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 12:13:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pP+V8tTbwBMaPv+uhMxqGb01RcRQfWnJmae18n8e9s5kZToMvG/s9XxJyRMWiVkHUbLCDjRcPrWx2XkujnJpZ6ZvHd9y3ToietD79o4+sadqeeisxhYWA1Yf5rfHSoPTV2cCmSRcF/SUS94wtpjoVO6mNIb6A4QyQ+N75VpIKws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n4cfmBNmzU6zcUsiPfPL0xDEdrRcJrbLH6KAt8bejMJJcHeQEjIeo3LO13Kqo4Ramqq75+l9df2XulgZOs/RHFAmnEkjq2V1gHuqgIjPaOMTRGul0+Y6rTwZFyXP733FE3y93fdSS+1kv7U61kLpxxOlR/ttaQNB/fMRzfONOZs=
Received: by 10.100.111.16 with SMTP id j16mr2971635anc.1180120418578;
        Fri, 25 May 2007 12:13:38 -0700 (PDT)
Received: by 10.100.112.8 with HTTP; Fri, 25 May 2007 12:13:38 -0700 (PDT)
Message-ID: <745c30f80705251213j2f455c3fr92b1783ef5942bd6@mail.gmail.com>
Date: Fri, 25 May 2007 22:13:38 +0300
From: "Enis Soztutar" <enis.soz.nutch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
In-Reply-To: <Pine.LNX.4.58.0705251115580.14972@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_160476_1957562.1180120418536"
References: <4656F62A.3060005@gmail.com> <4656F7C6.1080008@syr.edu>
	 <745c30f80705250803v2d2d4e34i88cf0da6732d393f@mail.gmail.com>
	 <Pine.LNX.4.58.0705251115580.14972@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_160476_1957562.1180120418536
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 5/25/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Yes, indeed we could but it brings other problems, for example
> increasing
> : the index size, and extending the query to search for multiple fields,
> etc.
>
> 1) if you index both teh raw and stemmed forms your index is going to grow
> to roughly the same size regardless of wether the stem and the arw are in
> teh same field or differnet fields.


Well using a single field i think we do not need to store stemmed form of
the word if it is indeed the same with the original, so that the index will
not grow two times the size. However then one can say that using more than
one field, it is also possible to not index the root forms twice (but i am
not sure how to query them).


2) For a particular user action, if you only want to search for one form
> (either raw or stemmed) then your query doesn't have to search over
> multiple fields -- it just has to search on which ever field you care
> about for the particular user action.  if you want to search for *both*
> the stemmed and raw forms n a single query, then the compelxity of hte
> query is the same regardless of wether the two clauses are on the same
> field or differnet fields.


If we also stem the query from the user, then infact we need to only search
for the stemmed form. But it is then necessary to determine the language of
the query(if possible) in order to stem it.

: > > or canonical forms to a phrase query. Moreover it seems that adding
> : > > multiple forms of the "word"s alters statistical calculations for
> : > > scoring, especially for tf and idf, because the frequency of the
> root
> : > > form of the word is incremented at each word with that root form. Is
>
> it's a matter of opinion wether this is "right" or not ... if you are
> storing both the raw and stemmed forms then in theory your tf/idf numbers
> now both represent "twice" what they normally would and it balances out..
> "dog" is not only a raw word, but also it's own stem, so a tf(docA,dog)=2
> for one real instance of "dog" is just as correct as a doc that contains
> "dogs" and gets tf(docB,dog)=1 and tf(docB,dogs)=1.


You are right about in that calculation, but i was wondering about the tf
and idf in cases where we do not store the root forms twice. In that case i
think tf of the root forms increases, however the derived forms
decreases(since total number of terms nearly doubles).

If you disagree with this line of thinking, asimple way to fix the problem
> is to use a TokenFilter that removes any tokens at the same position which
> contain the same text...
>
>
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/RemoveDuplicatesTokenFilter.html


thanks for the pointer

-Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
I think Erick's way of indexing solves both problems 1 and 2. However it is
effectively not different than storing the forms in seperate fields. How
would the query performance differ the case that we index all the forms in
one field(w/o storing root forms twice), and query only this field, from the
case which we index the forms in seperate fields and run the query in all of
them?

------=_Part_160476_1957562.1180120418536--

From java-user-return-28333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 19:30:36 2007
Return-Path: <java-user-return-28333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46090 invoked from network); 25 May 2007 19:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 19:30:34 -0000
Received: (qmail 35387 invoked by uid 500); 25 May 2007 19:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35357 invoked by uid 500); 25 May 2007 19:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35346 invoked by uid 99); 25 May 2007 19:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:30:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.42 as permitted sender)
Received: from [206.46.252.42] (HELO vms042pub.verizon.net) (206.46.252.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:30:24 -0700
Received: from dorthy ([72.73.130.11])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JIM00DDJ3HKNXX0@vms042.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 25 May 2007 14:29:44 -0500 (CDT)
Date: Fri, 25 May 2007 14:30:24 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing help needed
To: <java-user@lucene.apache.org>
Message-id: <01cf01c79f03$248d5970$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=UTF-8; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
 <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the advice, I just don't see where in the Lucene code I should 
plug OOParcer into Lucene.

I've walked the code in LIUS and Nutch (moving on to Solr) trying to find 
common objects. If I can find common objects in Lucene and Nutch I'll know 
where to plug in.


Lucene Objects looks like this

IndexWriter
                        Analyzer
                            StandardAnalyzer
                        Document
                            Reader
                                FileReader
                                StringReader
                        DocumentWriter


But when I search thru the Nutch or LIUS code I can not find these objects. 
LIUS uses reflection so I'm not going to find anything in the code, but 
unforturnately the liusConfig.xml is incomplete and I can not find the class 
names for the OpenOffice stuff in it.

This is all very frustrating since it should be a realatively easy to add 
support for unsupported formats. The Lucene code is very nice, lius code 
less so. Seems Lucene is setup to drop in new file formats I just do not 
know where to drop it in or what kind of objects need to be dropped in.

Oh well guess I will code up a Reader the just spites out "Here I am" a few 
hundred times and see what happens. LOL.


thank you for the reply and advice.

jim s



----- Original Message ----- 
From: "Andrzej Bialecki" <ab@getopt.org>
To: <java-user@lucene.apache.org>
Sent: Friday, May 25, 2007 1:10 PM
Subject: Re: Indexing help needed


> jim shirreffs wrote:
>
>> Thanks to all that try to help me out
>>
>> Jim S
>>
>> P.S. If I get it working I will be happy to email post the code.
>
> If you looked at the code in Nutch, you can take most of the parse-oo 
> plugin verbatim, because all this plugin does is it extracts the text 
> content and metadata from OO files.
>
>
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 19:57:36 2007
Return-Path: <java-user-return-28334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55993 invoked from network); 25 May 2007 19:57:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 19:57:26 -0000
Received: (qmail 81284 invoked by uid 500); 25 May 2007 19:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81249 invoked by uid 500); 25 May 2007 19:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81235 invoked by uid 99); 25 May 2007 19:57:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:57:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 12:57:18 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id BB09D20F19
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 12:56:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
References: <ae6f38f60705250649q323a3c88va0871da879dee2c3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0201D26C-38A3-4FA1-9BC0-356BDDCD8F06@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Scoring on Number of Unique Terms Hit, Not Term Frequency Counts
Date: Fri, 25 May 2007 15:56:53 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I know you have a solution already that I agree with, but I do think  
the DisjunctionMaxQuery could serve as the start for writing your own  
Query that did what you want.  Why would you want to?  Well, maybe  
you have other ways you want to search as well and don't want to mess  
with custom Similarity, omit norms, etc. or having to duplicate your  
fields to support both.  Just a thought.

Also, see below...

On May 25, 2007, at 9:49 AM, Walt Stoneburner wrote:
> ps.  I wasn't even aware DisjunctionMaxQuery existed; is there a
> resource that describes the purpose of BooleanQuery,
> DisjunctionMaxQuery, and others in simple reference?
>

http://lucene.apache.org/java/docs/scoring.html has some links to the  
search javadocs which contains info on the queries.

> For instance, if I go to the BooleanQuery page,
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
> javadoc/org/apache/lucene/search/BooleanQuery.html,
> It doesn't even say "sum of the field scores" -- maybe I'm looking in
> the wrong place, but for someone new to the API, it's very hard to
> figure out what class you want when it's unclear what specific affect
> it has on scoring.

Good point.  I am _hoping_ to focus on documentation this year, but I  
have been saying that for a while now and it is already almost June!   
I guess, at a minimum, you should write up a bug on how to improve  
it, even better is a patch!

Lucene in Action has good docs on the query type, but, of course,  
that requires a purchase, so it is less than satisfactory even as  
good as the book is.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 20:12:03 2007
Return-Path: <java-user-return-28335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61013 invoked from network); 25 May 2007 20:12:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 20:12:01 -0000
Received: (qmail 4405 invoked by uid 500); 25 May 2007 20:11:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4361 invoked by uid 500); 25 May 2007 20:11:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4350 invoked by uid 99); 25 May 2007 20:11:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 13:11:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 13:11:52 -0700
Received: by an-out-0708.google.com with SMTP id b20so282368ana
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 13:11:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e+nsESDGV3KPmBqzVoKlxeynUvgKhJbKoHk+CrRqgjN+h1xt3SjUaCiIE1w8biaVGAkkIKcU3z+kQzkDuU8DqOAAx21ZX5niv3378oMCRe6ZaHZBCqT5cbn/vcMy4+ZqFmthXoi2hK9ZYAJOivYKiE3Q4QOzgvzpUVv6I9kWw+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ip3+WNijMi+whiZx8GrfXm4u6jXxvpmVMp1yOD4NrcZOcd2n0GrGXiPWV1Wd8EbgdL6+m22GLsjgEaF9TB7/pU5WRG3pVbYEP+aFoYexNhg2BQ3W0jY4kmr878Q2E9JxrcU2r+Qd04emoCugAjqIzqbKZ/hoL7RjNjCMmKMbBTo=
Received: by 10.100.130.8 with SMTP id c8mr3013184and.1180123887446;
        Fri, 25 May 2007 13:11:27 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Fri, 25 May 2007 13:11:27 -0700 (PDT)
Message-ID: <ab0709bf0705251311i247a4864o8367edb2ec44211e@mail.gmail.com>
Date: Fri, 25 May 2007 16:11:27 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple tokens at the same position
In-Reply-To: <745c30f80705251213j2f455c3fr92b1783ef5942bd6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_172344_23754146.1180123887258"
References: <4656F62A.3060005@gmail.com> <4656F7C6.1080008@syr.edu>
	 <745c30f80705250803v2d2d4e34i88cf0da6732d393f@mail.gmail.com>
	 <Pine.LNX.4.58.0705251115580.14972@hal.rescomp.berkeley.edu>
	 <745c30f80705251213j2f455c3fr92b1783ef5942bd6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_172344_23754146.1180123887258
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another (obvious) option is to use two indexes and direct the query to the
appropriate index depending on the search specification. Of course you
double your space requirements, but your basically going to do that anyway
if you use two fields. I chose this for the slight benefit of fewer fields
on the index of interest (I need my norms and have *plenty* of fields).

My first approach was to just put the stemmed form at the same position as
the unstemmed form, but I did not like the options involved in choosing to
search just stemmed or just unstemmed. In the end I decided the space
savings where just not worth the hassle.

- Mark

On 5/25/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>
> On 5/25/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : Yes, indeed we could but it brings other problems, for example
> > increasing
> > : the index size, and extending the query to search for multiple fields,
> > etc.
> >
> > 1) if you index both teh raw and stemmed forms your index is going to
> grow
> > to roughly the same size regardless of wether the stem and the arw are
> in
> > teh same field or differnet fields.
>
>
> Well using a single field i think we do not need to store stemmed form of
> the word if it is indeed the same with the original, so that the index
> will
> not grow two times the size. However then one can say that using more than
> one field, it is also possible to not index the root forms twice (but i am
> not sure how to query them).
>
>
> 2) For a particular user action, if you only want to search for one form
> > (either raw or stemmed) then your query doesn't have to search over
> > multiple fields -- it just has to search on which ever field you care
> > about for the particular user action.  if you want to search for *both*
> > the stemmed and raw forms n a single query, then the compelxity of hte
> > query is the same regardless of wether the two clauses are on the same
> > field or differnet fields.
>
>
> If we also stem the query from the user, then infact we need to only
> search
> for the stemmed form. But it is then necessary to determine the language
> of
> the query(if possible) in order to stem it.
>
> : > > or canonical forms to a phrase query. Moreover it seems that adding
> > : > > multiple forms of the "word"s alters statistical calculations for
> > : > > scoring, especially for tf and idf, because the frequency of the
> > root
> > : > > form of the word is incremented at each word with that root form.
> Is
> >
> > it's a matter of opinion wether this is "right" or not ... if you are
> > storing both the raw and stemmed forms then in theory your tf/idf
> numbers
> > now both represent "twice" what they normally would and it balances
> out..
> > "dog" is not only a raw word, but also it's own stem, so a
> tf(docA,dog)=2
> > for one real instance of "dog" is just as correct as a doc that contains
> > "dogs" and gets tf(docB,dog)=1 and tf(docB,dogs)=1.
>
>
> You are right about in that calculation, but i was wondering about the tf
> and idf in cases where we do not store the root forms twice. In that case
> i
> think tf of the root forms increases, however the derived forms
> decreases(since total number of terms nearly doubles).
>
> If you disagree with this line of thinking, asimple way to fix the problem
> > is to use a TokenFilter that removes any tokens at the same position
> which
> > contain the same text...
> >
> >
> >
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/RemoveDuplicatesTokenFilter.html
>
>
> thanks for the pointer
>
> -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> I think Erick's way of indexing solves both problems 1 and 2. However it
> is
> effectively not different than storing the forms in seperate fields. How
> would the query performance differ the case that we index all the forms in
> one field(w/o storing root forms twice), and query only this field, from
> the
> case which we index the forms in seperate fields and run the query in all
> of
> them?
>

------=_Part_172344_23754146.1180123887258--

From java-user-return-28336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri May 25 20:42:43 2007
Return-Path: <java-user-return-28336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72236 invoked from network); 25 May 2007 20:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 May 2007 20:42:42 -0000
Received: (qmail 56261 invoked by uid 500); 25 May 2007 20:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56225 invoked by uid 500); 25 May 2007 20:42:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56213 invoked by uid 99); 25 May 2007 20:42:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 13:42:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 13:42:34 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l4PKgSY19679
	for <java-user@lucene.apache.org>; Fri, 25 May 2007 15:42:28 -0500
Message-ID: <46574A20.3050701@getopt.org>
Date: Fri, 25 May 2007 22:42:08 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing help needed
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com> <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org> <01cf01c79f03$248d5970$2e01a8c0@dorthy>
In-Reply-To: <01cf01c79f03$248d5970$2e01a8c0@dorthy>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

jim shirreffs wrote:
> Thanks for the advice, I just don't see where in the Lucene code I 
> should plug OOParcer into Lucene.
> 
> I've walked the code in LIUS and Nutch (moving on to Solr) trying to 
> find common objects. If I can find common objects in Lucene and Nutch 
> I'll know where to plug in.

You seem to be somewhat confused about what Lucene really is. It's just 
a library, and not an application. It's up to you to provide the logic 
and glue, or to extend any existing demo application to accomodate your 
needs. It's also a _plain_ _text_ search library. So if you want to 
index anything else you need to first convert it to a plain text format.

That's essentially what OOParser does in Nutch. It extracts data from OO 
documents and converts it to plain text. Disregard other stuff in that 
plugin - it has to do with how Nutch passes this data to storage (and 
indexing takes place in a completely different step, so you won't find 
it here). Just use the parts that extract plain text data - and then use 
this plain text data to add fields to Lucene documents.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 01:28:44 2007
Return-Path: <java-user-return-28337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60167 invoked from network); 26 May 2007 01:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 01:28:43 -0000
Received: (qmail 75774 invoked by uid 500); 26 May 2007 01:28:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75159 invoked by uid 500); 26 May 2007 01:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75145 invoked by uid 99); 26 May 2007 01:28:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 18:28:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rampeters@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 May 2007 18:28:34 -0700
Received: by wa-out-1112.google.com with SMTP id k17so402139waf
        for <java-user@lucene.apache.org>; Fri, 25 May 2007 18:28:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=HB9kdbk6ivVdMBv0ks6zzLMcIwjLi3HesNvNqJmuXIZvBXwxd9rUGHYp5ZeF2mxyWGbTIc1GoqstwiPkILq8LlgTK9RzBwnVzoFE/NBgH9moyPKpdNvvkQHp7gzP/S+E8YHZG8a66ZlqTwnyRFvmf7gZsFk4LWPxTQvIsQMKSuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OyUapnm5w3B135IP+4PHMGl/fP38q+4nKe3YJ4Lv7BIWI7oE/zsK/VRxZCVKr+ui82mTYctTW7FRL7jUCEI4SRrFP6PKIU10RuKpF+JnhLrSccWeLNbIf6Lkg4ex96lWdadKycGnZCDCwUG6RSABhNSCi9nN7On5qMvmUEkWgx4=
Received: by 10.115.76.1 with SMTP id d1mr1764932wal.1180142894033;
        Fri, 25 May 2007 18:28:14 -0700 (PDT)
Received: by 10.115.94.9 with HTTP; Fri, 25 May 2007 18:28:14 -0700 (PDT)
Message-ID: <81b45360705251828g5de03947w1a847ba63425aa73@mail.gmail.com>
Date: Fri, 25 May 2007 21:28:14 -0400
From: "Ram Peters" <rampeters@gmail.com>
To: java-user@lucene.apache.org
Subject: Search Query AND OR for Title and Description Fields
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have title field and description field indexed.  Now I want to
search for "object oriented programming" either in title "and or"
description using Lucene search query.

How do I do this?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 07:34:11 2007
Return-Path: <java-user-return-28338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40099 invoked from network); 26 May 2007 07:34:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 07:34:10 -0000
Received: (qmail 69271 invoked by uid 500); 26 May 2007 07:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69220 invoked by uid 500); 26 May 2007 07:34:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69205 invoked by uid 99); 26 May 2007 07:34:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 00:34:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.73.236.60] (HELO mail.plesk-win6.test-area.it) (217.73.236.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 00:34:00 -0700
Received: from [1.120.142.138] ([81.208.36.90]) by plesk-win6.tol.it with MailEnable ESMTP; Sat, 26 May 2007 09:33:34 +0200
Message-ID: <4657E32F.5090504@ecomware.it>
Date: Sat, 26 May 2007 09:35:11 +0200
From: Walter Ferrara <walter.ferrara@ecomware.it>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: RAMDirectory issue
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index on the disk. I'm using RAMDirectory( String ) to load
index in RAM.
I need from time to time to reload the index (when it is not current
anymore), but I keep getting Out Of memory exception. Making the jvm
heap bigger  helps, but only allow more reloading, eventually it will
throw the exception.

I just make a IndexSearcher. I've noticed that when I use that searcher
I get the exception, instead while I do not search on the searcher I get
no exception.
The exception in throw while istancing the RAMDirectory. I do not make
any sort. I do close the searcher. I do even close
searcher.getIndexReader().directory().close(). It is like that, when
indexserver is used, some references still survive and ram directory is
not freed.

How should I use the RAMDirectory? It is something related to the
SingleInstanceLockFactory
<../../../../org/apache/lucene/store/SingleInstanceLockFactory.html>?
Can I have 2 ramdirectory, or try to use the same one by putting in it,
with copy maybe, the index I have on disk?

thanks,
-- Walter



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 08:26:24 2007
Return-Path: <java-user-return-28339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51874 invoked from network); 26 May 2007 08:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 08:26:24 -0000
Received: (qmail 8460 invoked by uid 500); 26 May 2007 08:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8427 invoked by uid 500); 26 May 2007 08:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8416 invoked by uid 99); 26 May 2007 08:26:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 01:26:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jafarim@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 01:26:15 -0700
Received: by wx-out-0506.google.com with SMTP id t8so488128wxc
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 01:25:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=OuoLTrWitF+8QdwWGs7UFWab2iXjDho5pr3SsLsZifNTB6CPNHNnL+kPjzupzV1ldZImgrdKjU1pSYKECBO5C98dzwWTPpOlQ9w8twu2DzxeHPM/y5X5nqoggQW3kVHc6UCewgKmqRi9DNzZ2JbXrYlv/GrkkZqwgBfJukrFMj8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TIpe+LHvXd24J+qkVotkWr671mo5TyyXESHjnzja06ks4SFQGatpXc5hwStDDb34ECoBreTV/6DGgLX76teQMDTOKTRuTN1X8EFwsysWJwWRtwLGBV6ZZCB60gw3EzvYzVeBK25FwsKime81ozHJby/X2zpfVdfHFIkA9IqXon0=
Received: by 10.70.117.1 with SMTP id p1mr5263949wxc.1180167954926;
        Sat, 26 May 2007 01:25:54 -0700 (PDT)
Received: by 10.70.72.9 with HTTP; Sat, 26 May 2007 01:25:54 -0700 (PDT)
Message-ID: <bddd3c950705260125s65c77d74x30edd95aa1abe5a3@mail.gmail.com>
Date: Sat, 26 May 2007 11:55:54 +0330
From: jafarim <jafarim@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting direction
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106658_31422057.1180167954870"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106658_31422057.1180167954870
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

- I am wondering whether there is any mechanism to specify the sorting
direction (i.e. ascending/descending) without being obliged to make a custom
Sorter. I add a "timeOfIndexing" field in order that I can retrive results
based ob recentness later. But the sorter sorts in an ascending manner and
hence, old results are top results.

- Can I count on Sorter.INDEX_ORDER instead of "timeOfIndexing" field for
this purpose?

regards,
--jaf

------=_Part_106658_31422057.1180167954870--

From java-user-return-28340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 10:35:48 2007
Return-Path: <java-user-return-28340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55359 invoked from network); 26 May 2007 10:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 10:35:47 -0000
Received: (qmail 11420 invoked by uid 500); 26 May 2007 10:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11374 invoked by uid 500); 26 May 2007 10:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11363 invoked by uid 99); 26 May 2007 10:35:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 03:35:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 03:35:39 -0700
Received: by an-out-0708.google.com with SMTP id b20so319259ana
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 03:35:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=AS+M4JR/Py+T9k4/wrjETg6MZnw/1rMiKr0RBlBeDPjEmPdbE/ncCwXnIM3YWEty0LDp7V8SnyBsvYa6qsGsVDFS6Hv3UaVWyqjL4QU5tKGnvpzzJzZZEAH9HBMMzHiePp4WTiqXB1QuK+kKE6YbzbKrydjzuZz6kTLT/j+s3JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ltqcYBa84+aMaNpe/sUiwlBC0OyQmP+wHW1Vc1spDEZs67c20ZyDauvgfEpbdDVi+FgoGhZYP4iUae6E7JpJdzl8AL4ULNbPeUswYayAyLM689y8gt0aoR3egRvJ34PmDZbZcZeblBd4mWJGtNsuVn/eOZHlUcSWRwmr9PQ3F+s=
Received: by 10.100.12.18 with SMTP id 18mr3359283anl.1180175718795;
        Sat, 26 May 2007 03:35:18 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Sat, 26 May 2007 03:35:18 -0700 (PDT)
Message-ID: <34b8543c0705260335k252cc9aj28202e2fd9c7d9b@mail.gmail.com>
Date: Sat, 26 May 2007 14:05:18 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: exception while indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_167924_23327991.1180175718757"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_167924_23327991.1180175718757
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I am using Lucene 2.0.0
I get following exception while indexing...
is there anyone has faced this exception?
thanks




java.io.IOException: Cannot rename E:\index-lab\segments.new to
E:\index-lab\segments
        at org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java
:294)
        at org.apache.lucene.index.SegmentInfos.write(SegmentInfos.java:95)
        at org.apache.lucene.index.IndexWriter$4.doBody(IndexWriter.java
:726)
        at org.apache.lucene.store.Lock$With.run(Lock.java:99)
        at org.apache.lucene.index.IndexWriter.mergeSegments(
IndexWriter.java:724)
        at org.apache.lucene.index.IndexWriter.mergeSegments(
IndexWriter.java:686)
        at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
IndexWriter.java:674)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
:479)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
:462)
        at com.payvand.lucene.SingleIndexer.addDocument(SingleIndexer.java
:70)
        at com.payvand.lucene.MainIndexing.indexinPatientLabView(
MainIndexing.java:183)
        at com.payvand.lucene.MainIndexing.main(MainIndexing.java:56)
Caused by: java.io.FileNotFoundException: E:\index-lab\segments (Access is
denied)
        at java.io.FileOutputStream.open(Native Method)
        at java.io.FileOutputStream.<init>(Unknown Source)
        at java.io.FileOutputStream.<init>(Unknown Source)
        at org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java
:278)
        ... 11 more


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_167924_23327991.1180175718757--

From java-user-return-28341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 12:08:42 2007
Return-Path: <java-user-return-28341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26996 invoked from network); 26 May 2007 12:08:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 12:08:40 -0000
Received: (qmail 90178 invoked by uid 500); 26 May 2007 12:08:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89134 invoked by uid 500); 26 May 2007 12:08:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89122 invoked by uid 99); 26 May 2007 12:08:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:08:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:08:31 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1005104uge
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 05:08:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ARhtTmqKV/IJcocF/Z6DFk6hWOD1j7sXPgISUUD2us8AIP2qU1RacfDmUk/gsuX5HrQsGJ0SmJ19qsCU9VUhTRpa7ER/l5ZSAaG3iF5uuNAHCt5n4Q+AAwU0zGYAKsxDaoGUC2DucykJXyw37ZXjjRJbmrIG6OwdbzA9j9mrmYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kt1LQgGdMMaGBeJu4n9VUGrpvjWpByT0e/Ogu2eT1sV6pn0bJgpHZvphzoHFrIvdSvKyoQDyJrrrCl8Q6bLu1JBUh0O6zgQUfsL/lyqDMEvNGCKh+f/07qm2ucEfjAjCikWegqk05CFo28wxsnL+j+Twwyqufr+G7iv+SFdQ6oI=
Received: by 10.82.185.12 with SMTP id i12mr7387089buf.1180181290015;
        Sat, 26 May 2007 05:08:10 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 26 May 2007 05:08:09 -0700 (PDT)
Message-ID: <359a92830705260508w24a4e3e1i693dc7567e6e0761@mail.gmail.com>
Date: Sat, 26 May 2007 08:08:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Query AND OR for Title and Description Fields
In-Reply-To: <81b45360705251828g5de03947w1a847ba63425aa73@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101044_29052479.1180181289983"
References: <81b45360705251828g5de03947w1a847ba63425aa73@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101044_29052479.1180181289983
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This makes little sense. Could you give an example of how
you'd like to see things operate?

And have you looked at the FAQ for Lucene query syntax?

Erick

On 5/25/07, Ram Peters <rampeters@gmail.com> wrote:
>
> I have title field and description field indexed.  Now I want to
> search for "object oriented programming" either in title "and or"
> description using Lucene search query.
>
> How do I do this?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101044_29052479.1180181289983--

From java-user-return-28342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 12:15:08 2007
Return-Path: <java-user-return-28342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27696 invoked from network); 26 May 2007 12:15:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 12:15:07 -0000
Received: (qmail 95649 invoked by uid 500); 26 May 2007 12:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95611 invoked by uid 500); 26 May 2007 12:15:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95600 invoked by uid 99); 26 May 2007 12:15:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:15:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:15:00 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1005920uge
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 05:14:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k9wX/lISGtMNm0XpkpZ4s2BBqFiZhN8Qr0pHl4aqtu/ne1ktvxGCOnbPHECBMJRHGO75OqXpnRcFl0A+arxK7ViuecVwk/CdR/WOo9i+wFU83+S0VbykGXucZ4ICqZlJwHJulxiDSMRa0CS4uI3qpnqAnJjlYzuQtM7+CWepzCU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UD//T2habPg3XyRumwLSS4NXBk7yI4n2JPEv9Y+ja4pBLWOEKQQJCRQ8BsdL+DtlE3Hvsu6YTzrMBZNDMFuR9huB7cCycuF34SaK4I4c4VSeLNIBFqSb5hDnFihGhMagAzZi01nxECbKJHI0tSTTCqnEqcxNZRG+scfGlB3u2FU=
Received: by 10.82.118.2 with SMTP id q2mr7411502buc.1180181675387;
        Sat, 26 May 2007 05:14:35 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 26 May 2007 05:14:35 -0700 (PDT)
Message-ID: <359a92830705260514y212ec8fbvbbed06ebffe27bde@mail.gmail.com>
Date: Sat, 26 May 2007 08:14:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory issue
In-Reply-To: <4657E32F.5090504@ecomware.it>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101096_19448566.1180181675357"
References: <4657E32F.5090504@ecomware.it>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101096_19448566.1180181675357
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Unless you have hard evidence that FSDirectories are too slow,
you shouldn't IMO. The only place I've found RAMDirectories
useful (so far) is in unit tests where I'm creating a very small
in-memory index, running a few tests, and throwing it away.

My first question for this is "why are you using a RAMDirectory in
the first place?" Lucene does it's own caching etc, so it tries to
use RAM efficiently for you. Do you have any evidence that using
the normal FSDirectory is inadequate? If not, I recommend that
you simply go back to FSDirectory and worry about refinements
if and only if the performance is demonstrably inadequate.

Do be aware, when getting performance numbers, that the first
few queries of an FS-based index will take extra time to
build up the cache. Particularly the first few sorts you do.

If you have hard evidence, perhaps you could post some data
that would give us a clue what the size of your problem is. How big
is your index? How is it structured? What performance numbers
are you seeing? For what kind of queries?

Best
Erick

On 5/26/07, Walter Ferrara <walter.ferrara@ecomware.it> wrote:
>
> I have an index on the disk. I'm using RAMDirectory( String ) to load
> index in RAM.
> I need from time to time to reload the index (when it is not current
> anymore), but I keep getting Out Of memory exception. Making the jvm
> heap bigger  helps, but only allow more reloading, eventually it will
> throw the exception.
>
> I just make a IndexSearcher. I've noticed that when I use that searcher
> I get the exception, instead while I do not search on the searcher I get
> no exception.
> The exception in throw while istancing the RAMDirectory. I do not make
> any sort. I do close the searcher. I do even close
> searcher.getIndexReader().directory().close(). It is like that, when
> indexserver is used, some references still survive and ram directory is
> not freed.
>
> How should I use the RAMDirectory? It is something related to the
> SingleInstanceLockFactory
> <../../../../org/apache/lucene/store/SingleInstanceLockFactory.html>?
> Can I have 2 ramdirectory, or try to use the same one by putting in it,
> with copy maybe, the index I have on disk?
>
> thanks,
> -- Walter
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101096_19448566.1180181675357--

From java-user-return-28343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 12:32:09 2007
Return-Path: <java-user-return-28343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29939 invoked from network); 26 May 2007 12:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 12:32:08 -0000
Received: (qmail 13732 invoked by uid 500); 26 May 2007 12:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13699 invoked by uid 500); 26 May 2007 12:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13688 invoked by uid 99); 26 May 2007 12:32:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:32:07 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:32:00 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 7FE6B222DD6
	for <java-user@lucene.apache.org>; Sat, 26 May 2007 08:31:39 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Sat, 26 May 2007 08:31:39 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 621F05615; Sat, 26 May 2007 08:31:39 -0400 (EDT)
Message-Id: <1180182699.9404.1191921269@webmail.messagingengine.com>
X-Sasl-Enc: oUKy+Ny9pmEKK18VFDxLfF2mf6rOD50EZVOC2PmD1gps 1180182699
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <34b8543c0705260335k252cc9aj28202e2fd9c7d9b@mail.gmail.com>
Subject: Re: exception while indexing
In-Reply-To: <34b8543c0705260335k252cc9aj28202e2fd9c7d9b@mail.gmail.com>
Date: Sat, 26 May 2007 08:31:39 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


This looks like one of the issues that was fixed in 2.1.  Is it possible to test 2.1
to see if it still happens?

Mike

"Mohammad Norouzi" <mnrz57@gmail.com> wrote:
> Hi
> I am using Lucene 2.0.0
> I get following exception while indexing...
> is there anyone has faced this exception?
> thanks
> 
> 
> 
> 
> java.io.IOException: Cannot rename E:\index-lab\segments.new to
> E:\index-lab\segments
>         at
>         org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java
> :294)
>         at
>         org.apache.lucene.index.SegmentInfos.write(SegmentInfos.java:95)
>         at org.apache.lucene.index.IndexWriter$4.doBody(IndexWriter.java
> :726)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:99)
>         at org.apache.lucene.index.IndexWriter.mergeSegments(
> IndexWriter.java:724)
>         at org.apache.lucene.index.IndexWriter.mergeSegments(
> IndexWriter.java:686)
>         at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
> IndexWriter.java:674)
>         at
>         org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
> :479)
>         at
>         org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
> :462)
>         at
>         com.payvand.lucene.SingleIndexer.addDocument(SingleIndexer.java
> :70)
>         at com.payvand.lucene.MainIndexing.indexinPatientLabView(
> MainIndexing.java:183)
>         at com.payvand.lucene.MainIndexing.main(MainIndexing.java:56)
> Caused by: java.io.FileNotFoundException: E:\index-lab\segments (Access
> is
> denied)
>         at java.io.FileOutputStream.open(Native Method)
>         at java.io.FileOutputStream.<init>(Unknown Source)
>         at java.io.FileOutputStream.<init>(Unknown Source)
>         at
>         org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java
> :278)
>         ... 11 more
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 12:58:41 2007
Return-Path: <java-user-return-28344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32582 invoked from network); 26 May 2007 12:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 12:58:39 -0000
Received: (qmail 38991 invoked by uid 500); 26 May 2007 12:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38940 invoked by uid 500); 26 May 2007 12:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38929 invoked by uid 99); 26 May 2007 12:58:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:58:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 05:58:31 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1011803uge
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 05:58:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pNveFe1RHr40zcCzgjDEzuusPKX921WhkLU+ZUTv1V9hldG8CCFrV+yWuIRAs/ju4Tq+Obe2OwjVH0Uuejunyrl0CcEU5jCAHRljycTuuvedHltndJhz/J6028XLYUT7XNFWXQNV9fvIG29S/gYtJk/JqdCgYM309lZIRpjb9qI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f0PSS+fd3DOqm2Z5zf5LhFC5ZQN6vL3T8tqU7BPnVSgqcAEO1IhNjP4DkiYeS0udVddrqOtO+dx+gYuSv0hLpKPLDBTNkeShv2KgyFVy5JSFh4ayJLmBVoHLH6cyImdPfwhJ6anLIH+1Lfht/SxFoZ6Rvdz9vV1Z1XHyyTTlGvQ=
Received: by 10.82.169.4 with SMTP id r4mr7484171bue.1180184289720;
        Sat, 26 May 2007 05:58:09 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 26 May 2007 05:58:09 -0700 (PDT)
Message-ID: <359a92830705260558x3e3b1647j17da473b5a84103f@mail.gmail.com>
Date: Sat, 26 May 2007 08:58:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting direction
In-Reply-To: <bddd3c950705260125s65c77d74x30edd95aa1abe5a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101244_25203549.1180184289692"
References: <bddd3c950705260125s65c77d74x30edd95aa1abe5a3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101244_25203549.1180184289692
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would specifying "reverse" work, like


*Sort<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html#Sort%28java.lang.String,%20boolean%29>
*(String <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> field,
boolean reverse)


where the field is your timeOfIndexing field?

You are guaranteed that document ID order is invariant, even though
the IDs may change. That is, for any two documents if doc1 was
indexed before doc2, docID1 < docID2.

Although I don't see any way to specify a sort object that
reverses the INDEX_ORDER... hmmmm...

Erick

On 5/26/07, jafarim <jafarim@gmail.com> wrote:
>
> Hi folks,
>
> - I am wondering whether there is any mechanism to specify the sorting
> direction (i.e. ascending/descending) without being obliged to make a
> custom
> Sorter. I add a "timeOfIndexing" field in order that I can retrive results
> based ob recentness later. But the sorter sorts in an ascending manner and
> hence, old results are top results.
>
> - Can I count on Sorter.INDEX_ORDER instead of "timeOfIndexing" field for
> this purpose?
>
> regards,
> --jaf
>

------=_Part_101244_25203549.1180184289692--

From java-user-return-28345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 14:20:54 2007
Return-Path: <java-user-return-28345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53642 invoked from network); 26 May 2007 14:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 14:20:53 -0000
Received: (qmail 4689 invoked by uid 500); 26 May 2007 14:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3655 invoked by uid 500); 26 May 2007 14:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3644 invoked by uid 99); 26 May 2007 14:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:20:51 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:20:46 -0700
Received: by an-out-0708.google.com with SMTP id b20so327255ana
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 07:20:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=byv8aW0WHDlVq95sLw2I/l2mGWXWOjHUz21EZk8yL0PEJWHTSMLpVhsigaBlKJVHC79zZ4RQA/VTb2n+W98/VD+xg5AUsrUUdM83C/jcBW7YQ63LQtYxdxwqNDSwE+S7lKIwl5nlNM0XRmeNqCN9+yHlKw9vt2qXiTqTi+pMiKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Y57LC/dbeaJ29pleAjEzvqkro83TEUV5UDFWuJVvK8oXkCshJTMTo7YQ3wvJVOBxkoqeb01dmsuXeYyVSkK/JLqTlY7ScG54e9M7q66vuvvoFnk8//ASFVfxiuwTT8jcmZBMOx2uB1lXEhvOdrkNW7+95meesQmw3liZ+BBLvZU=
Received: by 10.100.202.13 with SMTP id z13mr3480867anf.1180189225136;
        Sat, 26 May 2007 07:20:25 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Sat, 26 May 2007 07:20:25 -0700 (PDT)
Message-ID: <34b8543c0705260720j133e7071n6cb23048cc4d5525@mail.gmail.com>
Date: Sat, 26 May 2007 17:50:25 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: how to exact search?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_169308_19698673.1180189225086"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_169308_19698673.1180189225086
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All
I want to search an exact phrase, for example field1:"This is a Text"
or by this query: field1:"Test"  returns the result that only contain the
word "Test" and not "Test one" or "Test two"

I have a page that build a query and finally send that query to a
MultiFieldQueryParser
I have a class extends from MultiFieldQueryParser and override getRangeQuery
to managing my range queries but there is something I cant understand when
the query is field1:Test  getFieldQuery() method will be called but when the
query is field1:"Test" (with double quotes) neither of methods will be
called!!!

what happen when I use ( " ) in the query? and how can I catch it to use a
PhraseQuery to exact search?


Thank you very much


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_169308_19698673.1180189225086--

From java-user-return-28346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 14:40:43 2007
Return-Path: <java-user-return-28346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56315 invoked from network); 26 May 2007 14:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 14:40:42 -0000
Received: (qmail 22133 invoked by uid 500); 26 May 2007 14:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22106 invoked by uid 500); 26 May 2007 14:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22095 invoked by uid 99); 26 May 2007 14:40:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:40:39 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:40:33 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1027084uge
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 07:40:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=roT7f02J5oEtdimjzDsCYmbk1iFeDeCM+WUevpCf+Cys4droO7PzbJ40qB9JIONyzyauR2brcDz8Yj0uA1HwnhsRCQNEYad80o8GGp4cZhFHPWpKgL7yXPBd/0FcIsDnmLBe20cODulmvkudtL9YRtXB7Jb6aoWDtcv+p5L+TXo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GVIKmaUroXW0YumJ+TkudzDSocqzbUT6ZSVv1w7eohCun8EFkjjF9YIw4xQsfdh7nxc3VhKOhm3cFNTnTMIt7Y2KqSxrEz3Jpoblxm6VtzlZ260o0KDavfKMkZmJGf0am8Fc2oEbuvPW9iUpm0FWscqBOK2Ol9oEhZU72FSkbCI=
Received: by 10.82.176.3 with SMTP id y3mr7690632bue.1180190411096;
        Sat, 26 May 2007 07:40:11 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 26 May 2007 07:40:11 -0700 (PDT)
Message-ID: <359a92830705260740t1bc54647qb2a730bf5b69dae@mail.gmail.com>
Date: Sat, 26 May 2007 10:40:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to exact search?
In-Reply-To: <34b8543c0705260720j133e7071n6cb23048cc4d5525@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101804_27811862.1180190411060"
References: <34b8543c0705260720j133e7071n6cb23048cc4d5525@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101804_27811862.1180190411060
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It becomes a phrase query.

Erick

On 5/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hi All
> I want to search an exact phrase, for example field1:"This is a Text"
> or by this query: field1:"Test"  returns the result that only contain the
> word "Test" and not "Test one" or "Test two"
>
> I have a page that build a query and finally send that query to a
> MultiFieldQueryParser
> I have a class extends from MultiFieldQueryParser and override
> getRangeQuery
> to managing my range queries but there is something I cant understand when
> the query is field1:Test  getFieldQuery() method will be called but when
> the
> query is field1:"Test" (with double quotes) neither of methods will be
> called!!!
>
> what happen when I use ( " ) in the query? and how can I catch it to use a
> PhraseQuery to exact search?
>
>
> Thank you very much
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
>

------=_Part_101804_27811862.1180190411060--

From java-user-return-28347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 14:43:54 2007
Return-Path: <java-user-return-28347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56679 invoked from network); 26 May 2007 14:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 14:43:53 -0000
Received: (qmail 27095 invoked by uid 500); 26 May 2007 14:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27055 invoked by uid 500); 26 May 2007 14:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27044 invoked by uid 99); 26 May 2007 14:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:43:51 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:43:45 -0700
Received: by an-out-0708.google.com with SMTP id b20so328287ana
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 07:43:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CdalAEdPDmidnPXXvQfBHNAFhn0jeJLcvHHI1qDA9qMemi+h6zyUjDsVQK7yFZK7m+biKW8JjbcQ4R5NntmCt3hdJeEPfkCN15MqUeReZwk40zuv86X5Bky8lgjfDyAty1wRWd1Av8iDvxxzh1OEJMl39Eo42V//1kfs5G25SQI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r0o6GAllbCTTTuM/I7LJDIkMKKYFP9BMHkKyRI0UocesBxzarBoD3PpNoo1od12PAG2FW36P6Kw0XT3wBhfkN+kOyiX9uDyedIQOkjCP4/ryKj9bm2cUj4T+C6nLTdvPhWz/7be7eWjTnBCZh7WqXhWNY11+F5RNZqZhKZRKi/8=
Received: by 10.100.166.14 with SMTP id o14mr3466222ane.1180190604391;
        Sat, 26 May 2007 07:43:24 -0700 (PDT)
Received: by 10.100.11.19 with HTTP; Sat, 26 May 2007 07:43:24 -0700 (PDT)
Message-ID: <34b8543c0705260743s511d0c1dwd74564b4845c9114@mail.gmail.com>
Date: Sat, 26 May 2007 18:13:24 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to exact search?
In-Reply-To: <359a92830705260740t1bc54647qb2a730bf5b69dae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_169476_26194490.1180190604322"
References: <34b8543c0705260720j133e7071n6cb23048cc4d5525@mail.gmail.com>
	 <359a92830705260740t1bc54647qb2a730bf5b69dae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_169476_26194490.1180190604322
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So why the field1:"Test" returns results with
"Test one"
"Test two"

how can I tell lucene to return only "Test"

On 5/26/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> It becomes a phrase query.
>
> Erick
>
> On 5/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > Hi All
> > I want to search an exact phrase, for example field1:"This is a Text"
> > or by this query: field1:"Test"  returns the result that only contain
> the
> > word "Test" and not "Test one" or "Test two"
> >
> > I have a page that build a query and finally send that query to a
> > MultiFieldQueryParser
> > I have a class extends from MultiFieldQueryParser and override
> > getRangeQuery
> > to managing my range queries but there is something I cant understand
> when
> > the query is field1:Test  getFieldQuery() method will be called but when
> > the
> > query is field1:"Test" (with double quotes) neither of methods will be
> > called!!!
> >
> > what happen when I use ( " ) in the query? and how can I catch it to use
> a
> > PhraseQuery to exact search?
> >
> >
> > Thank you very much
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> >
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_169476_26194490.1180190604322--

From java-user-return-28348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 14:53:10 2007
Return-Path: <java-user-return-28348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58446 invoked from network); 26 May 2007 14:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 14:53:09 -0000
Received: (qmail 39333 invoked by uid 500); 26 May 2007 14:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38883 invoked by uid 500); 26 May 2007 14:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38872 invoked by uid 99); 26 May 2007 14:53:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:53:07 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 07:53:02 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1029112uge
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 07:52:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fMX0UqWcxfnPuEnrGi+AnPCzgZv5ASf9ithIPkKtbgCEhFDnLu0wHmv3ZewYhbLo1QtMuddj5y3dYdIxkpWb15JDdAgFAKrN0s6ex97TIZ5sA5wTuzqP8lbE3oVKZO3RCM4uXmwoHZLQFWQkYDIQgyWwidkxjfaty54OFNUB1fE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r3sXpqXCl+2e9XU+tj1t6ij+f8J1//57C0XorcAAJd9FlttFMSyq7g3zl7tSD/DZxiIVpnl9Y2+SMd5jU4C0/Ww5zd91QVow4W0yu5zIMTdmTWpnyYjh2fBCtid4FJq2y8+8Jkt7ZKM29V/CXuUH5Bg1ls9tiAYsceDU+vAE9pI=
Received: by 10.82.189.6 with SMTP id m6mr7739680buf.1180191159592;
        Sat, 26 May 2007 07:52:39 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sat, 26 May 2007 07:52:39 -0700 (PDT)
Message-ID: <359a92830705260752r51970cb0ia6c725e7f7048074@mail.gmail.com>
Date: Sat, 26 May 2007 10:52:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to exact search?
In-Reply-To: <34b8543c0705260743s511d0c1dwd74564b4845c9114@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101832_6632302.1180191159427"
References: <34b8543c0705260720j133e7071n6cb23048cc4d5525@mail.gmail.com>
	 <359a92830705260740t1bc54647qb2a730bf5b69dae@mail.gmail.com>
	 <34b8543c0705260743s511d0c1dwd74564b4845c9114@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101832_6632302.1180191159427
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Because "Test" is a phrase of exactly one word, so it matches both.
Assuming you indexed it with StandardAnalyzer, you indexed
tokens test, one, two. test got indexed for both docs. To the phrase
"test" matches both documents.

Your question is ambiguous. If you're asking how to return only
exact matches on the entire field, you'll have to index things
UN_TOKENIZED, then I'd use phrase queries to search. But you
won't then be able to get partial matches.

Best
Erick

On 5/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> So why the field1:"Test" returns results with
> "Test one"
> "Test two"
>
> how can I tell lucene to return only "Test"
>
> On 5/26/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > It becomes a phrase query.
> >
> > Erick
> >
> > On 5/26/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > Hi All
> > > I want to search an exact phrase, for example field1:"This is a Text"
> > > or by this query: field1:"Test"  returns the result that only contain
> > the
> > > word "Test" and not "Test one" or "Test two"
> > >
> > > I have a page that build a query and finally send that query to a
> > > MultiFieldQueryParser
> > > I have a class extends from MultiFieldQueryParser and override
> > > getRangeQuery
> > > to managing my range queries but there is something I cant understand
> > when
> > > the query is field1:Test  getFieldQuery() method will be called but
> when
> > > the
> > > query is field1:"Test" (with double quotes) neither of methods will be
> > > called!!!
> > >
> > > what happen when I use ( " ) in the query? and how can I catch it to
> use
> > a
> > > PhraseQuery to exact search?
> > >
> > >
> > > Thank you very much
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
>

------=_Part_101832_6632302.1180191159427--

From java-user-return-28349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 16:15:54 2007
Return-Path: <java-user-return-28349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9911 invoked from network); 26 May 2007 16:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 16:15:53 -0000
Received: (qmail 28581 invoked by uid 500); 26 May 2007 16:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28281 invoked by uid 500); 26 May 2007 16:15:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28270 invoked by uid 99); 26 May 2007 16:15:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 09:15:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 09:15:44 -0700
Received: by py-out-1112.google.com with SMTP id a25so1616687pyi
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 09:15:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=SpRmAK0dQqowTxOiPu7TzdljcC+f9hcpvzz8GMtjsRTBLrtM76DJp+MibPMbksXQ8GrpbMxdNGfTl973HUms1ZQAE/v9dE700fELsgcxRweUdqHDCD4aGS3vUyLISw6ErTa+QsZaIv+Lci18Ipvxizmfs566RpFGvyr4Hf0cmwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ltu69RB2tdcGl5Nl9LAsrZRpG5iv2SRUhU+X/M1z30em1gOwh41I0QOEQiaTQEQ/8w4tbrkdV+Y3WMuwtMSuUe5nT8jZSKa1G8+GKQCGs16aEU/ienKrDi4q2LLX1wtcsrrSxalVXfCGMa8eX8jE4N0EumBjZtPrbXAu7JDrL0U=
Received: by 10.35.109.2 with SMTP id l2mr4646365pym.1180196123769;
        Sat, 26 May 2007 09:15:23 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Sat, 26 May 2007 09:15:23 -0700 (PDT)
Message-ID: <c68e39170705260915q12a4f6bif25dd74af9406aa5@mail.gmail.com>
Date: Sat, 26 May 2007 12:15:23 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Searching on a Rapidly changing Index
In-Reply-To: <f8203010705240733o27db8e73o27e8ddc86bdcd206@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070524092205.GH5135@thegestalt.org>
	 <359a92830705240628r5902dd41rcb5c7bceade2014b@mail.gmail.com>
	 <f8203010705240733o27db8e73o27e8ddc86bdcd206@mail.gmail.com>
X-Google-Sender-Auth: 9c2ceced6d7c10f5
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/24/07, Joe Shaw <joe@joeshaw.org> wrote:
> On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > If that's unacceptable, you can *still* open up a new reader in the
> > background and warm it up before using it. "immediately" then
> > becomes 5-10 seconds or so.
>
> I've seen the term "warming" used a few times on the various lists.
> What constitutes warming up a searcher, simply running a dummy query?

Yes, but not too dumb ;-)  Most important is to sort on commonly used
sort fields to populate the field caches.

Solr takes this further, allowing statically configured queries, but
also pre-populating query and filter caches based on the
most-recently-used entries in the existing searcher.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 16:50:51 2007
Return-Path: <java-user-return-28350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18874 invoked from network); 26 May 2007 16:50:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 16:50:50 -0000
Received: (qmail 66463 invoked by uid 500); 26 May 2007 16:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66376 invoked by uid 500); 26 May 2007 16:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66351 invoked by uid 99); 26 May 2007 16:50:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 09:50:46 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.207.126] (HELO web32112.mail.mud.yahoo.com) (68.142.207.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 May 2007 09:50:40 -0700
Received: (qmail 9661 invoked by uid 60001); 26 May 2007 16:50:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=vAhio7MKLP+uSr3Rjh5eoqeRB+Ttxt4dwuTiBBHfo2PrGrRK8jRk8AcgcnRU4+rWTw3shMMdwJ6S4jS8LjBFRB6MJuFuTNsxKYHPHrA27DRDrrl0a0HfSII1bC/wChKIdbTvqZal1Xj1T5sjZeFM2hKMrUG9bGH5rC3wElzKwq0=;
X-YMail-OSG: YS0I._sVM1l6_VQ4w3tXT3aG1rcSH7z_CGnfgonH_m.o_9wrTkL6p19qwmgHxzZ5CAsPThUN5OTDJVtwXIdOXMP4rOE1USi3IMCsPGzG.BZOKGYLQno-
Received: from [68.142.201.144] by web32112.mail.mud.yahoo.com via HTTP; Sat, 26 May 2007 09:50:18 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Sat, 26 May 2007 09:50:18 -0700 (PDT)
From: Rodrigo F Valverde <rodrigofvalverde@yahoo.com.br>
Subject: Res: exception while indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1144481706-1180198218=:8709"
Message-ID: <425387.8709.qm@web32112.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1144481706-1180198218=:8709
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hey guy...I use the 2.1 version and I get the same problem...but if the "Lu=
ke" (http://www.getopt.org/luke/) is open!!! =0A=0AIf you were using luke o=
r any other at the opening index moment, close that and try again! =0A=0A=
=0A=0A----- Mensagem original ----=0ADe: Michael McCandless <lucene@mikemcc=
andless.com>=0APara: java-user@lucene.apache.org=0AEnviadas: S=E1bado, 26 d=
e Maio de 2007 9:31:39=0AAssunto: Re: exception while indexing=0A=0A=0AThis=
 looks like one of the issues that was fixed in 2.1.  Is it possible to tes=
t 2.1=0Ato see if it still happens?=0A=0AMike=0A=0A"Mohammad Norouzi" <mnrz=
57@gmail.com> wrote:=0A> Hi=0A> I am using Lucene 2.0.0=0A> I get following=
 exception while indexing...=0A> is there anyone has faced this exception?=
=0A> thanks=0A> =0A> =0A> =0A> =0A> java.io.IOException: Cannot rename E:\i=
ndex-lab\segments.new to=0A> E:\index-lab\segments=0A>         at=0A>      =
   org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java=0A> :294=
)=0A>         at=0A>         org.apache.lucene.index.SegmentInfos.write(Seg=
mentInfos.java:95)=0A>         at org.apache.lucene.index.IndexWriter$4.doB=
ody(IndexWriter.java=0A> :726)=0A>         at org.apache.lucene.store.Lock$=
With.run(Lock.java:99)=0A>         at org.apache.lucene.index.IndexWriter.m=
ergeSegments(=0A> IndexWriter.java:724)=0A>         at org.apache.lucene.in=
dex.IndexWriter.mergeSegments(=0A> IndexWriter.java:686)=0A>         at org=
.apache.lucene.index.IndexWriter.maybeMergeSegments(=0A> IndexWriter.java:6=
74)=0A>         at=0A>         org.apache.lucene.index.IndexWriter.addDocum=
ent(IndexWriter.java=0A> :479)=0A>         at=0A>         org.apache.lucene=
.index.IndexWriter.addDocument(IndexWriter.java=0A> :462)=0A>         at=0A=
>         com.payvand.lucene.SingleIndexer.addDocument(SingleIndexer.java=
=0A> :70)=0A>         at com.payvand.lucene.MainIndexing.indexinPatientLabV=
iew(=0A> MainIndexing.java:183)=0A>         at com.payvand.lucene.MainIndex=
ing.main(MainIndexing.java:56)=0A> Caused by: java.io.FileNotFoundException=
: E:\index-lab\segments (Access=0A> is=0A> denied)=0A>         at java.io.F=
ileOutputStream.open(Native Method)=0A>         at java.io.FileOutputStream=
.<init>(Unknown Source)=0A>         at java.io.FileOutputStream.<init>(Unkn=
own Source)=0A>         at=0A>         org.apache.lucene.store.FSDirectory.=
renameFile(FSDirectory.java=0A> :278)=0A>         ... 11 more=0A> =0A> =0A>=
 -- =0A> Regards,=0A> Mohammad=0A> --------------------------=0A> see my bl=
og: http://brainable.blogspot.com/=0A=0A-----------------------------------=
----------------------------------=0ATo unsubscribe, e-mail: java-user-unsu=
bscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help=
@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=0A_________________________________=
_________________=0AFale com seus amigos  de gra=E7a com o novo Yahoo! Mess=
enger =0Ahttp://br.messenger.yahoo.com/ 
--0-1144481706-1180198218=:8709--

From java-user-return-28351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 17:24:20 2007
Return-Path: <java-user-return-28351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26078 invoked from network); 26 May 2007 17:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 17:24:19 -0000
Received: (qmail 89502 invoked by uid 500); 26 May 2007 17:24:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89469 invoked by uid 500); 26 May 2007 17:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89458 invoked by uid 99); 26 May 2007 17:24:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 10:24:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 10:24:11 -0700
Received: by an-out-0708.google.com with SMTP id b20so334971ana
        for <java-user@lucene.apache.org>; Sat, 26 May 2007 10:23:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E8rGmP8MaNPvMCfziqAbFBJuU+t5WsMT/GIjXGbscRrtZeQp9yf/Bf6/aVqLiralscHAaDylPD+JFiK+XNgyFSq0U13TuLIiQ9AGaLyE7c9xynX9Yq7/0AA4I53T2b3YqUwcneAySiaN7VXQaiApMAbKxAQxfYUcLFbHSvOuidc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tpc0akOgbcEl6Y/bFhTpOXR+6jUj5mxHbarWwja2HReiZv3or2a6/omNm4mLlHmCcYv3+B0Izi+lr0eJP5pOkGo3VKMyIxAIEuMyMYBF3Z9GdQiyzlqcjelSnsDLVPhVyZ7jHLPC/EZcqT2NrxbJX6WWpfJ36zQr/b3fOJDpXhc=
Received: by 10.100.86.8 with SMTP id j8mr3532270anb.1180200230141;
        Sat, 26 May 2007 10:23:50 -0700 (PDT)
Received: by 10.100.57.3 with HTTP; Sat, 26 May 2007 10:23:50 -0700 (PDT)
Message-ID: <c38ea6f20705261023qe0b1389yaedd83e4a8185b1d@mail.gmail.com>
Date: Sat, 26 May 2007 10:23:50 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to filter fields with hits from result set
In-Reply-To: <359a92830705241302q302669a5n2a648daf910cc78d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_188543_1090969.1180200230092"
References: <3FB08D6A21B3EC4D8749EF6D9E626278013B199D@WDCCPMAIL01.markettools.com>
	 <359a92830705231159j5cba1258ncfa116a9ce15492a@mail.gmail.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013B1A45@WDCCPMAIL01.markettools.com>
	 <359a92830705231404r25c65202lf0339e25333847c5@mail.gmail.com>
	 <3FB08D6A21B3EC4D8749EF6D9E626278013B1C9F@WDCCPMAIL01.markettools.com>
	 <359a92830705241302q302669a5n2a648daf910cc78d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_188543_1090969.1180200230092
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erick,

I think I found an inexpensive solution for the problem (I still need to
make performance tests against our production copy but so far so good):

I am using the rewritten Query, extract all terms, collect the search words
and then search in the field for a match against the extracted words until I
find a match.  Since I only need to find one match and then can stop the
string.contains() calls, and because we are limiting the number of listed
pages, this seems to be an acceptable and easy to implement approach.

What makes it really easy is the fact that the set of terms provided by the
rewritten Query contains all possilbe variations for wild card and fuzzy
searches.

Thanks again for your input. I am deeply impressed by the number of answers
you provide to this forum.

Andreas

On 5/24/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, my data may not be too helpful. But some of the books I'm
> counting hits for are a thousand-plus pages. We haven't had
> performance issues, but that's only saying "no customer has
> complained yet".
>
> The old solution we used did something similar to what you're
> talking about, basically streaming the highlighted text back
> and counting the highlight tags (non-lucene). This is much faster.
> That said, it's apples and oranges since they are two different
> search engines.
>
> One other possibility worth mentioning is MemoryIndex, which is
> designed for rapid, in-memory manipulation of a single document. It
> *might* work faster than what you're trying to do.
>
> The non-trivial part is turning your ad-hoc query into a SpanQuery.
> I'm not able to post that much of our company's code, so you're
> on your own. But search the mail archive for a long exchange
> between Mark Miller and a bunch of others under the unlikely
> subject "multiword highlighting" for Marks cut at the code and
> other helpful comments.....
>
> I can't really give you performance numbers since we didn't
> collect them. It's "fast enough" that the customers aren't
> complaining, and the servers aren't breathing hard, so we didn't
> pursue it.
>
> Good luck!
> Erick
>
> On 5/24/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> >
> > Eric,
> >
> > I was pursuing a different direction yesterday which is not fast enough.
> > Basically I was using the highlighter to figure out if a page has a hit
> > or not.  But that is too expensive.  I end up with 15 ms per page and
> > that sums up.
> >
> > I have to allow ad-hoc queries, so it sounds like the solution will not
> > be trivial from what I understand from your reply.
> >
> > Just one question before I start using the SpanQuery approach:  Do you
> > have anything you can say about performance regarding your solution?
> > How many pages per document in average you have to deal with? How
> > performant or expensive is the approach?
> >
> > As usual, many thanks in advance for your input.
> >
> > Andreas
> >
> >
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Wednesday, May 23, 2007 2:05 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: How to filter fields with hits from result set
> >
> > Two things to watch...
> >
> > 1> Think about indexing the special page-end token with an
> > increment gap of 0 (see SynonymAnalyzer in Lucene In
> > Action). That preserves the sense of phrases across
> > page breaks.
> >
> > 2> Assembling the span query is tricky. Search the mail archive
> > for SpanQuery to see an exchange I had with the originator of
> > this concept. Suffice it to say that converting an ad-hoc query
> > into a set of SpanQueries is not trivial, but it certainly is do-able.
> > But you'd have a much easier time of it if you were able to
> > control the queries and dis-allow ad-hoc queries. It all depends
> > upon the requirements of the application. Any time you can
> > avoid supporting arbitrary boolean logic for the user input, your
> > job is easier <G>....
> >
> > But you should be able to run up a demo with simple queries that
> > you control to prove out the methodology in any case.....
> >
> > Best
> > Erick
> >
> >
> > On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> > >
> > > Eric,
> > >
> > > Thank you very much for your response.  That sounds very interesting.
> > > Let me do some experimenting to see if I fully understood your
> > solution.
> > > Otherwise I have to come back to you with more questions.
> > >
> > > Andreas
> > >
> > >
> > >
> > >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: Wednesday, May 23, 2007 12:00 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: How to filter fields with hits from result set
> > >
> > > As luck would have it, I've done something very similar. What I had
> > > to do is index a special token at the end of each page. Then I could
> > > get the term offsets for each page....
> > >
> > > Then I used one of the SpanQuery.getSpans to get all of the
> > > offsets of the hits throughout all of the pages.
> > >
> > > now I have a list of all the offsets of the *last* term on each
> > > page and a list of the offsets of the hits. From these two
> > > lists I can know which pages have hits.
> > >
> > >
> > > Best
> > > Erick
> > >
> > > On 5/23/07, Andreas Guther <Andreas.Guther@markettools.com> wrote:
> > > >
> > > > Hi,
> > > >
> > > > If a search returns a document that has multiple fields with the
> > same
> > > > name, is there a way to filter only those fields that contain hits?
> > > >
> > > >
> > > > Background:
> > > >
> > > > I am indexing documents and we store all content in our index for
> > > > display reasons.  We want to show only those pages containing hits.
> > > My
> > > > first implementation was saving each page in a Lucene document.  For
> > > > performance reasons why are now looking into indexing the complete
> > > > indexed document as a single Lucene document.
> > > >
> > > > Every page is added to a field in the Lucene document named
> > > > page-content.  That means I am ending with as many fields named
> > > > page-content as the document has pages.
> > > >
> > > > My search now returns me a single Lucene document in contrary to my
> > > > first approach with page per Lucene document.  My problem right now
> > > is:
> > > > how can I limit the returned page-contents fields for pages to those
> > > > field entries that contain hits.  If I have hits on pages five pages
> > > > from a document with 10 pages I would like to have only the pages
> > with
> > > > the hits, not all.
> > > >
> > > > Is there anything in Lucene that limits the returned fields to
> > fields
> > > > with hits only?
> > > >
> > > > Thanks in advance,
> > > >
> > > > Andreas
> > > >
> > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_188543_1090969.1180200230092--

From java-user-return-28352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat May 26 20:50:14 2007
Return-Path: <java-user-return-28352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66538 invoked from network); 26 May 2007 20:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 May 2007 20:50:12 -0000
Received: (qmail 62853 invoked by uid 500); 26 May 2007 20:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61777 invoked by uid 500); 26 May 2007 20:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61766 invoked by uid 99); 26 May 2007 20:50:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 13:50:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 13:50:03 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 16112371 for java-user@lucene.apache.org; Sat, 26 May 2007 22:49:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Setting the maximum number of documents in a lucene segment
Date: Sat, 26 May 2007 22:49:39 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E28@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Setting the maximum number of documents in a lucene segment
Thread-Index: Acee43VtMiVokqDvTvuvy9fuVdNLmgA8g5zQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Otis,
>=20
> Hello Ard,
>=20
> What you are after is a higher mergeFactor and probably also=20
> a higher maxBufferedDocs.  Is indexing performance the concern?

No, this is not what I am after, and the mergeFactor isn't really =
solving my issue. My issue is very similar to (I read this thread later) =
the thread "maxDocs and Arrays" , =
http://www.gossamer-threads.com/lists/lucene/java-user/49285.=20

I also want to keep some sort of derived data of lucene in memory =
arrays, to enable faceted authorized navigation in  a jackrabbit (jcr) =
repository. I have tested for millions of "derived data documents" in a =
array and can very efficiently compute faceted auth nav. But, of course, =
as the lucene index changes, i need to update my derived data. For =
adding a document to lucene, i can normally just append an item to my =
derived data array, unless:

1) lucene did a merge, and
2) after the merge writer.docCount() !=3D writerDoccountBeforeUpdate + 1 =
(this means the merge involved merging a segment where at least one =
deleted doc was present, reducing docCount)

if 1 and 2 are true, then i need to recreate my derived data array, =
because the array locations do not coincide with those from lucene =
anymore. Therefore, i want to minimize merges (recreating the array is =
expensive), which of course can be done as you say by setting a large =
mergeFactor (and for example use compoundFile is true to reduce the =
number of files again) and a large maxBufferedDocs. But, increasing the =
default number of documents in the "smallest" segments from 10 to, say =
100, would also help me.=20

Then again, I am not sure wether i am doing something which can be =
achieved more effectively/simply,

thanks in advance for any pointers,

Regards Ard Schrijvers


> Don't go crazy with setting a super high (e.g. 100+)=20
> mergeFactor, unless you really have the number of open files=20
> on your server(s) set to a solid/high number. maxBufferedDocs=20
> can be set to a much higher number, typically, depending on=20
> the size of the documents you are trying to index and the=20
> amount of heap the JVM has to work with.  There is also a new=20
> API for explicit flushes of in-memory documents while=20
> indexing to control memory consumption.
>=20
> Otis
> --
> Lucene Consulting -- http://lucene-consulting.com/
>=20
>=20
> ----- Original Message ----
> From: Ard Schrijvers <a.schrijvers@hippo.nl>
> To: java-user@lucene.apache.org
> Sent: Friday, May 25, 2007 8:40:26 AM
> Subject: RE: Setting the maximum number of documents in a=20
> lucene segment
>=20
>=20
> >=20
> > Hello,
> >=20
> > I am trying to change the maximum number of documents in a=20
> > lucene segment. By default it seems to be 10.
>=20
> Correction: 10 for the smallest (just created) segments of=20
> course, because obviously merged segments are likely to=20
> contain many more documents
>=20
> > When I have a=20
> > mergeFactor of say 10, then on average, after every 100 added=20
> > documents lucene is merging segments.
> >=20
> > I want each segment to contain more then the default 10=20
> > documents, because I need to minimize merging.
> >=20
> > Is there a way to achieve this?=20
> > writer.setMaxBufferedDocs(largeValue) does not do the trick=20
> > (I think because in my case because the writer is flushed and=20
> > closed after an few updates)
> >=20
> > Does anyone know wether it is possible to make the default=20
> > number of documents a segment can contain larger?
> >=20
> > Thanks in advance,=20
> >=20
> > Ard Schrijvers
> >=20
> >=20
> > --=20
> >=20
> > Hippo
> > Oosteinde 11
> > 1017WT Amsterdam
> > The Netherlands
> > Tel  +31 (0)20 5224466
> > -------------------------------------------------------------
> > a.schrijvers@hippo.nl / http://www.hippo.nl
> > --------------------------------------------------------------=20
> >=20
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 02:09:05 2007
Return-Path: <java-user-return-28353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34908 invoked from network); 27 May 2007 02:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 02:09:03 -0000
Received: (qmail 88965 invoked by uid 500); 27 May 2007 02:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88212 invoked by uid 500); 27 May 2007 02:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88200 invoked by uid 99); 27 May 2007 02:09:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 May 2007 19:09:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.169] (HELO web27308.mail.ukl.yahoo.com) (217.146.177.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 May 2007 19:08:53 -0700
Received: (qmail 90511 invoked by uid 60001); 27 May 2007 02:08:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.gr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3mQK/j0AMp5UiSeM5U1yzydjJYv94MJ32DSNSQyZ+C1GG/AsX/R69kD+rUIFsi+Sq/LEAKExD++Kh+AN5IF9c5KuslYFzV+Ls/z/pV2as0cVyHoz0tDq0inJaeUY2oARzYuvcwHaxJabUm+8Ua4965SNrKno+dGn3obYxfALs68=;
X-YMail-OSG: ssDFRWEVM1mJpTqHS.1gK2zoUxEqr1ui8oeYTiIJv1JXNi7mU5rONL4Wh.BeCrCqgXKLN42ZrZ0Fhq5pZXusNL9JVl_fNTN8GOZUrTGb2NmotS_qGLzvVZdSsuY-
Received: from [83.77.55.67] by web27308.mail.ukl.yahoo.com via HTTP; Sun, 27 May 2007 03:08:31 BST
Date: Sun, 27 May 2007 03:08:31 +0100 (BST)
From: STEFANOS STEFANOS <stefanos888888@yahoo.gr>
Subject: problem with the label
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1224523486-1180231711=:73440"
Content-Transfer-Encoding: 8bit
Message-ID: <629279.73440.qm@web27308.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1224523486-1180231711=:73440
Content-Type: text/plain; charset=iso-8859-7
Content-Transfer-Encoding: 8bit

Hello,
   
      When i tried to index a sense with name Sense:(the sense) with label contents: (contents:Sense:sense) i had a problem in the searching.For example when i had as a query the Sense:sense lucene didn't return anything and when contents:Sense:sense returned many documents that they didn't contain the sense that i had in the query.
      Is it normal this?Did i do any mistake or does lucene have a problem?I used the edition of the book in the case that is a problem of edition.
   
   
  cheers,
   
  Stefanos

 	      
---------------------------------
  Yahoo!
      (spam);  Yahoo! Mail          
 http://login.yahoo.com/config/mail?.intl=gr 
--0-1224523486-1180231711=:73440--

From java-user-return-28354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 08:38:30 2007
Return-Path: <java-user-return-28354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91763 invoked from network); 27 May 2007 08:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 08:38:29 -0000
Received: (qmail 33731 invoked by uid 500); 27 May 2007 08:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33634 invoked by uid 500); 27 May 2007 08:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33594 invoked by uid 99); 27 May 2007 08:38:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [204.127.225.93] (HELO alnrmhc13.comcast.net) (204.127.225.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 01:38:20 -0700
Received: from jma3 (c-71-234-179-126.hsd1.ct.comcast.net[71.234.179.126])
          by comcast.net (alnrmhc13) with SMTP
          id <20070527083754b13000cgqre>; Sun, 27 May 2007 08:37:54 +0000
Reply-To: <mrjama@comcast.net>
From: "Joe MarkAnthony" <mrjama@comcast.net>
To: <java-user@lucene.apache.org>
Subject: Number of documents in an index with filter
Date: Sun, 27 May 2007 04:38:04 -0400
Message-ID: <004601c7a03a$57bd0060$0401a8c0@JMA3>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings,

I would like to add the number of possible hits in my queries, for example,
"found 18 hits out of a possible 245,000 documents".  I am assuming that
IndexReader.numDocs() is the best way to get this value.

However, I would like to use a filter as part of the query.  What is the
most efficient way to get the total number of documents given a filter on a
query?

Thanks,
J


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 10:31:52 2007
Return-Path: <java-user-return-28355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10958 invoked from network); 27 May 2007 10:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 10:31:51 -0000
Received: (qmail 10139 invoked by uid 500); 27 May 2007 10:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10102 invoked by uid 500); 27 May 2007 10:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10090 invoked by uid 99); 27 May 2007 10:31:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 03:31:47 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 16134510; Sun, 27 May 2007 12:31:17 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Number of documents in an index with filter
Date: Sun, 27 May 2007 12:31:17 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E2A@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Number of documents in an index with filter
Thread-Index: AcegOmYYdxK8bJybQoe08JLSOZbLggAD2gFA
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>,
	<mrjama@comcast.net>
X-Virus-Checked: Checked by ClamAV on apache.org


>=20
>=20
> Greetings,
>=20
> I would like to add the number of possible hits in my=20
> queries, for example,
> "found 18 hits out of a possible 245,000 documents".  I am=20
> assuming that
> IndexReader.numDocs() is the best way to get this value.
>=20
> However, I would like to use a filter as part of the query. =20
> What is the
> most efficient way to get the total number of documents given=20
> a filter on a
> query?

can't you use yourFilter.bits(reader).cardinality() to get the number of =
items in the index after the filter?

Regards Ard=20

>=20
> Thanks,
> J
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 13:06:37 2007
Return-Path: <java-user-return-28356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44235 invoked from network); 27 May 2007 13:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 13:06:36 -0000
Received: (qmail 29340 invoked by uid 500); 27 May 2007 13:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29303 invoked by uid 500); 27 May 2007 13:06:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29292 invoked by uid 99); 27 May 2007 13:06:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 06:06:34 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 06:06:27 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1342707muf
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 06:06:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UyK397ZKq0R+InNvvAJeL5zAK1FCNIpyQVEmYXrzUZZSsPbdjf4uo1luGXZBGFmTdHs5p0X7zh0bCDd1L1t8Qz6npKouJ2SNpGcCJtnfSiEDuhvpMEK7f6IOHIa5qeTGu7tPvss73sD1OK3p1+9Ct3RiqSRY8s86S8TV/6AGzUY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WVtyq4DvblgmjLHeFaOAZZ9taLgLihyIcYLUO2cUG3EAAqmePwV7KoYAl4eDsrpZ3dM5arfYyOmdq+kGmemRJipHH+JyTPTyapNF2ZXnLQMO360Hd/XXkwoWSfGown34zV5fM4jvZ3IhKHFZEq55CEbhcjqYLQ+Bg56EDnIe9bc=
Received: by 10.82.162.14 with SMTP id k14mr8928373bue.1180271166061;
        Sun, 27 May 2007 06:06:06 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 27 May 2007 06:06:06 -0700 (PDT)
Message-ID: <359a92830705270606j3e446f07m8baf7d196c034104@mail.gmail.com>
Date: Sun, 27 May 2007 09:06:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem with the label
In-Reply-To: <629279.73440.qm@web27308.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105763_16668421.1180271166031"
References: <629279.73440.qm@web27308.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_105763_16668421.1180271166031
Content-Type: text/plain; charset=ISO-8859-7; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

Rmlyc3QsIGlmIHlvdSBoYXZlbid0IGFscmVhZHksIGdldCBhIGNvcHkgb2YgTHVrZSBhbmQgdXNl
IGl0IHRvIGV4YW1pbmUKeW91ciBpbmRleCBhbmQgc2VlIGhvdyB5b3VyIHF1ZXJ5IHBhcnNlZC4g
VGhlIGNvbG9uJ3MgIjoiIGFyZSBwYXJ0Cm9mIHRoZSBMdWNlbmUgcXVlcnkgc3ludGF4LCBzbyBJ
IGhhdmUgbm8gaWRlYSB3aGF0IG5vdwpjb250ZW50czpTZW5zZTpzZW5zZSBwYXJzZXMuCgpTZWNv
bmQsIHdoYXQgYW5hbHl6ZXJzIHdlcmUgeW91IHVzaW5nIGJvdGggYXQgaW5kZXggYW5kIHF1ZXJ5
IHRpbWU/ClN0YW5kYXJkIGFuYWx5emVyLCBmb3IgaW5zdGFuY2UsIGxvd2VyY2FzZXMgdGhlIHRl
cm1zLgoKVGhpcmQsIHRha2UgdGhlIHRpbWUgdG8gcmVhZCBvdmVyIHRoZSBGQVEgYXQKaHR0cDov
L3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9MdWNlbmVGQVEKCkZvdXJ0aDogaGF2ZSB5b3Ug
dHJpZWQgcXVlcnkudG9TdHJpbmcoKSB0byBzZWUgd2hhdAp0aGUgcmVzdWx0cyBvZiB0aGUgcGFy
c2UgYXJlPyBJZiBzbywgcGxlYXNlIHBvc3QgaXQuCgpCZXN0CkVyaWNrCgpPbiA1LzI2LzA3LCBT
VEVGQU5PUyBTVEVGQU5PUyA8c3RlZmFub3M4ODg4ODhAeWFob28uZ3I+IHdyb3RlOgo+Cj4gSGVs
bG8sCj4KPiAgICAgICBXaGVuIGkgdHJpZWQgdG8gaW5kZXggYSBzZW5zZSB3aXRoIG5hbWUgU2Vu
c2U6KHRoZSBzZW5zZSkgd2l0aCBsYWJlbAo+IGNvbnRlbnRzOiAoY29udGVudHM6U2Vuc2U6c2Vu
c2UpIGkgaGFkIGEgcHJvYmxlbSBpbiB0aGUgc2VhcmNoaW5nLkZvcmV4YW1wbGUgd2hlbiBpIGhh
ZCBhcyBhIHF1ZXJ5IHRoZSBTZW5zZTpzZW5zZSBsdWNlbmUgZGlkbid0IHJldHVybiBhbnl0aGlu
Zwo+IGFuZCB3aGVuIGNvbnRlbnRzOlNlbnNlOnNlbnNlIHJldHVybmVkIG1hbnkgZG9jdW1lbnRz
IHRoYXQgdGhleSBkaWRuJ3QKPiBjb250YWluIHRoZSBzZW5zZSB0aGF0IGkgaGFkIGluIHRoZSBx
dWVyeS4KPiAgICAgICBJcyBpdCBub3JtYWwgdGhpcz9EaWQgaSBkbyBhbnkgbWlzdGFrZSBvciBk
b2VzIGx1Y2VuZSBoYXZlIGEKPiBwcm9ibGVtP0kgdXNlZCB0aGUgZWRpdGlvbiBvZiB0aGUgYm9v
ayBpbiB0aGUgY2FzZSB0aGF0IGlzIGEgcHJvYmxlbSBvZgo+IGVkaXRpb24uCj4KPgo+ICAgY2hl
ZXJzLAo+Cj4gICBTdGVmYW5vcwo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPiDX8efz6ezv8O/p5d/05SBZYWhvbyEKPiDC4fHl6N7q4fTlIPThIOXt7/fr5/Tp6twg7Oft
/SDs4fThIChzcGFtKTsg1O8gWWFob28hIE1haWwg5Onh6N305ekg9OftCj4g6uHr/fTl8ecg5PXt
4fTeIPDx7/P04fPf4SDq4fTcIPT57SDl7e/36+f06er+7SDs5+317Nz0+e0KPiBodHRwOi8vbG9n
aW4ueWFob28uY29tL2NvbmZpZy9tYWlsPy5pbnRsPWdyCg==
------=_Part_105763_16668421.1180271166031--

From java-user-return-28357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 13:53:22 2007
Return-Path: <java-user-return-28357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63309 invoked from network); 27 May 2007 13:53:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 13:53:21 -0000
Received: (qmail 88320 invoked by uid 500); 27 May 2007 13:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88276 invoked by uid 500); 27 May 2007 13:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88265 invoked by uid 99); 27 May 2007 13:53:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 06:53:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.173] (HELO web27312.mail.ukl.yahoo.com) (217.146.177.173)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 May 2007 06:53:11 -0700
Received: (qmail 22951 invoked by uid 60001); 27 May 2007 13:52:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.gr;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Jw3KPOIee83k9xFPf8uFpkJFvxny0xJ+hlDF7VX1n46Vg1JVdh50tQW8muUc6b8UObpVIOA4dpfEjxJsc7MJs2QTkZH2izolP9aGXjDJmv1KwRPFWrryKBX/ExOq0483NQIo0xXDv6cu6L8DlLVwZjC9SHJqtofVRCqhMpRxPeY=  ;
Message-ID: <20070527135248.22949.qmail@web27312.mail.ukl.yahoo.com>
X-YMail-OSG: XWmg0PIVM1n.wmo5e1weI6FZZyqGSZvbvERSD1T0ZTplbU_NFtL6ClJ38uxDp3d.OaA5BgDKbjAW0UBrcrQpkIh2h7GVI6eXJs7yMOmMV9UI14li6E2xyS_bodQ-
Received: from [83.77.55.67] by web27312.mail.ukl.yahoo.com via HTTP; Sun, 27 May 2007 14:52:47 BST
Date: Sun, 27 May 2007 14:52:47 +0100 (BST)
From: STEFANOS STEFANOS <stefanos888888@yahoo.gr>
Subject: =?iso-8859-7?q?=C8=DD=EC=E1:=20Re:=20problem=20with=20the=20label?=
To: java-user@lucene.apache.org
In-Reply-To: <359a92830705270606j3e446f07m8baf7d196c034104@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1467350392-1180273967=:22693"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1467350392-1180273967=:22693
Content-Type: text/plain; charset=iso-8859-7
Content-Transfer-Encoding: 8bit

    Yes i am checking the query .toSring().The problem is that with query such as contents:Sense:03404903  (is the number of the sense and that what i want to find is the "Sense:03404903")is that lucene returns many results that don't contain Sense:03404903". 
      I tried also to delete the sumbol ":"(and i did the indexing from the beginning) because it used by lucene for the notation of the field label and i had as a query the contents:Sense03404903.The same problem again.I think that may be it checks only the first that is the sense and not all with the number.
     Finally when i tried to do it with the number only didn't return anything.So you know the reason?
     I am using the Simple Anamyzer in both indexing and searching.
   
  cheers,
   
  Stefanos

Erick Erickson <erickerickson@gmail.com> :
  First, if you haven't already, get a copy of Luke and use it to examine
your index and see how your query parsed. The colon's ":" are part
of the Lucene query syntax, so I have no idea what now
contents:Sense:sense parses.

Second, what analyzers were you using both at index and query time?
Standard analyzer, for instance, lowercases the terms.

Third, take the time to read over the FAQ at
http://wiki.apache.org/lucene-java/LuceneFAQ

Fourth: have you tried query.toString() to see what
the results of the parse are? If so, please post it.

Best
Erick

On 5/26/07, STEFANOS STEFANOS wrote:
>
> Hello,
>
> When i tried to index a sense with name Sense:(the sense) with label
> contents: (contents:Sense:sense) i had a problem in the searching.Forexample when i had as a query the Sense:sense lucene didn't return anything
> and when contents:Sense:sense returned many documents that they didn't
> contain the sense that i had in the query.
> Is it normal this?Did i do any mistake or does lucene have a
> problem?I used the edition of the book in the case that is a problem of
> edition.
>
>
> cheers,
>
> Stefanos
>
>
> ---------------------------------
>  Yahoo!
>      (spam);  Yahoo! Mail  
>       
> http://login.yahoo.com/config/mail?.intl=gr


       
---------------------------------
  Yahoo!
      (spam);  Yahoo! Mail          
 http://login.yahoo.com/config/mail?.intl=gr 
--0-1467350392-1180273967=:22693--

From java-user-return-28358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun May 27 20:43:06 2007
Return-Path: <java-user-return-28358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63469 invoked from network); 27 May 2007 20:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 May 2007 20:43:05 -0000
Received: (qmail 57686 invoked by uid 500); 27 May 2007 20:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57645 invoked by uid 500); 27 May 2007 20:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57634 invoked by uid 99); 27 May 2007 20:43:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 13:43:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rampeters@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 13:42:56 -0700
Received: by wa-out-1112.google.com with SMTP id k17so645329waf
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 13:42:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KuoJKTsXFtaz0G/gBufKcL5l3kk/vHuaZSB4AQUbS9HPqQpUOILLHg2fvWCcEEoUfXq9w/LZguFsigyJkDgn8iSP8Yb2elO/17Fp0pBFZSe8CdTH3NCCBJGqNd3JX+YBANSMDUkrBiN6lgF6WcSDBmS3H066NWRKwUryH/Rrprk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=F0M47VCURLziWTnWUzbD1bAf5h2F4YY/adUfG85Ylq4NeOaJ5BFGfqRSqRseO5ZOdV9yovUxYaadXD2AdqSgyFZzqH6y6LzA5UAZWgxLwX4PKgOmbE+6oCXxPUFz5VnQLbOkg0+JxKPT9q2jXG89UYjquldNEtqbLmrYLHuDUwM=
Received: by 10.114.120.1 with SMTP id s1mr2562132wac.1180298553230;
        Sun, 27 May 2007 13:42:33 -0700 (PDT)
Received: by 10.115.94.10 with HTTP; Sun, 27 May 2007 13:42:33 -0700 (PDT)
Message-ID: <81b45360705271342p62cbd855h5506ce15f6e58d37@mail.gmail.com>
Date: Sun, 27 May 2007 16:42:33 -0400
From: "Ram Peters" <rampeters@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Query AND OR for Title and Description Fields
In-Reply-To: <359a92830705260508w24a4e3e1i693dc7567e6e0761@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <81b45360705251828g5de03947w1a847ba63425aa73@mail.gmail.com>
	 <359a92830705260508w24a4e3e1i693dc7567e6e0761@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What I like to do is search over multiple fields.  Multiple fields:
title and description.  I don't want to concatenate the title and
description field into one and search on that field, because title and
description have different boosting.

When I search over multiple fields for "object oriented programming",
it could appear both in title and description or on one of the fields
(either title or description).

http://wiki.apache.org/lucene-java/LuceneFAQ#head-300f0756fdaa71f522c96a868351f716573f2d77

On 26/05/07, Erick Erickson <erickerickson@gmail.com> wrote:
> This makes little sense. Could you give an example of how
> you'd like to see things operate?
>
> And have you looked at the FAQ for Lucene query syntax?
>
> Erick
>
> On 5/25/07, Ram Peters <rampeters@gmail.com> wrote:
> >
> > I have title field and description field indexed.  Now I want to
> > search for "object oriented programming" either in title "and or"
> > description using Lucene search query.
> >
> > How do I do this?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 01:19:40 2007
Return-Path: <java-user-return-28359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18498 invoked from network); 28 May 2007 01:19:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 01:19:40 -0000
Received: (qmail 48827 invoked by uid 500); 28 May 2007 01:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48787 invoked by uid 500); 28 May 2007 01:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48776 invoked by uid 99); 28 May 2007 01:19:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 18:19:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 18:19:32 -0700
Subject: synchronize hits variable?
Date: Sun, 27 May 2007 20:17:59 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B2949762C@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7A0C6.1D4121C8"
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: synchronize hits variable?
Content-class: urn:content-classes:message
Thread-Index: Acegxgd+BxFCTDLGRbOk9xfXULbVsw==
X-MimeOLE: Produced By Microsoft Exchange V6.5
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7A0C6.1D4121C8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

In a j2ee webapp we have a search object that stores a user's search
preferences (items/page, detail level, etc).  it has a search() that
calls a static method getSearcher() that returns a static IndexSearcher
that all these user search objects use.....searching with that gives us
a Hits object that this user object iterates through to find out what
categories are used, which ones to display, etc.    this hits object is
huge.   Its fluffing up each user session by 20M in some cases.    This
is unacceptable of course.    I am sure many have run into this issue,
and I was curious what you did to solve it.     If I use a local
variable to that search method, null it after I'm done and call gc(), it
still is bad.    I can't put the hits variable into a static object or
attribute cause of course there are multiple of these user search
objects using it at any time.     Even if I isolated the user search
part to a singleton, others may use it at the same time as well.      I
imagine some sort of synchronization of that static variable is in order
but am not quite sure.   does someone have an example of this?  I would
image everyone has had to deal with this problem.   20M is just to big.
When we use a profiler we find that it's a char[] that seems to be
holding a lot of the data..like 16M of it.    For different indexes in
different servers, this size is different, but for the most part its way
to big everywhere.

=20

Thoughts?  I appreciate any help on this.

=20

Thanks

=20


------_=_NextPart_001_01C7A0C6.1D4121C8--

From java-user-return-28360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 02:31:08 2007
Return-Path: <java-user-return-28360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51838 invoked from network); 28 May 2007 02:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 02:31:07 -0000
Received: (qmail 6827 invoked by uid 500); 28 May 2007 02:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6797 invoked by uid 500); 28 May 2007 02:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6786 invoked by uid 99); 28 May 2007 02:31:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 19:31:05 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of anybridge@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 19:30:59 -0700
Received: by wx-out-0506.google.com with SMTP id t8so755033wxc
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 19:30:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=G5m5QjLh3GqpOzSPBG3/ZVIAZhQOHFtYVtsoymFlDCbKO/A6sELrOMyZB7nAxez7X2QGWZr0uTphyaqp4qoE4twZoSc5tQ36zVpFsQJ6p0B9PD0chv8BGQclPCBYRY9bROnPFxUvqAh104laZKW6VOthEDq2cNNDLsApaYuar3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ihYjdnVQYm0/tCTADAJxGkAqt+MW+pkVIDkcXkZt/zWfIWnjM3EYYlDo8hButyFfAj3IFFMCC0SE3rOsGsL+UI6kuaeCgczBEDl3jLNdyAkfqg14aDXMeM7cTf5ojUDn1H4KhGXM8yLqA8DeUeS5nqS3vX0J9gvnnXCUx6Qb13A=
Received: by 10.70.131.19 with SMTP id e19mr7605973wxd.1180319438289;
        Sun, 27 May 2007 19:30:38 -0700 (PDT)
Received: by 10.70.75.10 with HTTP; Sun, 27 May 2007 19:30:38 -0700 (PDT)
Message-ID: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
Date: Mon, 28 May 2007 10:30:38 +0800
From: "Anny Bridge" <anybridge@gmail.com>
To: java-user@lucene.apache.org
Subject: times of match in a document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41628_19069043.1180319438248"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41628_19069043.1180319438248
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I use lucene in my project and it works well.

Now I hope that the search result presenting to the user include the times
of the keyword match in a document.

Is there someone do this before,Or is there any code example for this...

Thanks in Advance.
Anny

------=_Part_41628_19069043.1180319438248--

From java-user-return-28361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 02:48:41 2007
Return-Path: <java-user-return-28361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56270 invoked from network); 28 May 2007 02:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 02:48:39 -0000
Received: (qmail 23870 invoked by uid 500); 28 May 2007 02:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23828 invoked by uid 500); 28 May 2007 02:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23817 invoked by uid 99); 28 May 2007 02:48:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 19:48:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 19:48:30 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1509750muf
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 19:48:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L0wVJz8X2d3IGY49wgJr3aixDJnm5w78coepmutTdW6DVkvWI/mt649GiJ6JeTnQf8tAn4l6+iKeIDVKC5c41frJrmjjSZrHKNjZ/G3F/pUMV+uznkyJhraU9zUAUYCVx+RHVzVy//2Q/kudeThJi7A5T/6IzWYkFo2Lga9p5do=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ex/tZoCD8eeJ8eG0rg51EmopWZ4p7/sNBzQ6ALaWTjVFnZaiFNZvj6JQcQGjZgwXHMqD4jbGvNBG8uKuULoPhio4sqmOdBeI1WpYASl27Yemr9dsmlff4hy/UVkSOm7GPzD1DCvpNQkAVtAJtoYtLGziVzU5OVIOfgtDCm4vvS8=
Received: by 10.82.169.4 with SMTP id r4mr9824546bue.1180320489068;
        Sun, 27 May 2007 19:48:09 -0700 (PDT)
Received: by 10.82.190.7 with HTTP; Sun, 27 May 2007 19:48:09 -0700 (PDT)
Message-ID: <359a92830705271948lfdbee16pa75db5a022fe937a@mail.gmail.com>
Date: Sun, 27 May 2007 22:48:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Query AND OR for Title and Description Fields
In-Reply-To: <81b45360705271342p62cbd855h5506ce15f6e58d37@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109274_14905518.1180320489040"
References: <81b45360705251828g5de03947w1a847ba63425aa73@mail.gmail.com>
	 <359a92830705260508w24a4e3e1i693dc7567e6e0761@mail.gmail.com>
	 <81b45360705271342p62cbd855h5506ce15f6e58d37@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109274_14905518.1180320489040
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Then I think what you want is something like just assembling a
BooleanQuery like:
(+title:object +title:oriented +title:programming)
(+description:object +description:oriented +description:programming).

Best
Erick

On 5/27/07, Ram Peters <rampeters@gmail.com> wrote:
>
> What I like to do is search over multiple fields.  Multiple fields:
> title and description.  I don't want to concatenate the title and
> description field into one and search on that field, because title and
> description have different boosting.
>
> When I search over multiple fields for "object oriented programming",
> it could appear both in title and description or on one of the fields
> (either title or description).
>
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-300f0756fdaa71f522c96a868351f716573f2d77
>
> On 26/05/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > This makes little sense. Could you give an example of how
> > you'd like to see things operate?
> >
> > And have you looked at the FAQ for Lucene query syntax?
> >
> > Erick
> >
> > On 5/25/07, Ram Peters <rampeters@gmail.com> wrote:
> > >
> > > I have title field and description field indexed.  Now I want to
> > > search for "object oriented programming" either in title "and or"
> > > description using Lucene search query.
> > >
> > > How do I do this?
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_109274_14905518.1180320489040--

From java-user-return-28362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 03:26:43 2007
Return-Path: <java-user-return-28362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68441 invoked from network); 28 May 2007 03:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 03:26:41 -0000
Received: (qmail 59004 invoked by uid 500); 28 May 2007 03:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58959 invoked by uid 500); 28 May 2007 03:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58946 invoked by uid 99); 28 May 2007 03:26:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 20:26:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 May 2007 20:26:33 -0700
Received: (qmail 94101 invoked by uid 60001); 28 May 2007 03:26:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ar+MIo+PwnLqOSuYscYvxdlM5qWaVjPdmXDII++cMDx7oq9gQY0L/m4pPUrr3YQZ5j6IwJJOV5WveUJTweotLGaiGlNfcAqDm4iajrndF6rnxL5vxDmh/hctws3qCKdOL3HbgkRVRSZYeLjhayqT27nwIq9MYM3zIdD7kzw4h+c=;
X-YMail-OSG: D45FFisVM1nh1fnHNNooCIQ1qpaSrpdNZ96Rx9OchcGQ9iKmTJCblZ4BSQildUeNagUplMLDrm5JuG3G6rm_hSYNknODodn9pQ6N.38YtjCGIZ3TZKiFZuIfZscTaVlHaduU_ggH2XNTHlU-
Received: from [74.64.53.68] by web50301.mail.re2.yahoo.com via HTTP; Sun, 27 May 2007 20:26:12 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Sun, 27 May 2007 20:26:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: synchronize hits variable?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <685348.93495.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John,

20M sounds suspicious.  Without seeing the code, it's hard to tell.  My guess is the problem lies elsewhere or some piece of Lucene is being incorrectly used.  Or maybe your Lucene Documents are just very large.  Are they?  You could go modify Hits source and change the number of hits that Hits instance loads.  I think it caches either 100 or 200 (haven't looked at it in a while).  There is no API for changing it, so you could change it in the sources, recompile, redeploy, and see if that helps you.

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: John Powers <jpowers@configureone.com>
To: java-user@lucene.apache.org
Sent: Sunday, May 27, 2007 9:17:59 PM
Subject: synchronize hits variable?

In a j2ee webapp we have a search object that stores a user's search
preferences (items/page, detail level, etc).  it has a search() that
calls a static method getSearcher() that returns a static IndexSearcher
that all these user search objects use.....searching with that gives us
a Hits object that this user object iterates through to find out what
categories are used, which ones to display, etc.    this hits object is
huge.   Its fluffing up each user session by 20M in some cases.    This
is unacceptable of course.    I am sure many have run into this issue,
and I was curious what you did to solve it.     If I use a local
variable to that search method, null it after I'm done and call gc(), it
still is bad.    I can't put the hits variable into a static object or
attribute cause of course there are multiple of these user search
objects using it at any time.     Even if I isolated the user search
part to a singleton, others may use it at the same time as well.      I
imagine some sort of synchronization of that static variable is in order
but am not quite sure.   does someone have an example of this?  I would
image everyone has had to deal with this problem.   20M is just to big.
When we use a profiler we find that it's a char[] that seems to be
holding a lot of the data..like 16M of it.    For different indexes in
different servers, this size is different, but for the most part its way
to big everywhere.

 

Thoughts?  I appreciate any help on this.

 

Thanks

 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 06:39:39 2007
Return-Path: <java-user-return-28363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31023 invoked from network); 28 May 2007 06:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 06:39:38 -0000
Received: (qmail 50133 invoked by uid 500); 28 May 2007 06:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49386 invoked by uid 500); 28 May 2007 06:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49375 invoked by uid 99); 28 May 2007 06:39:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:39:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of liuping.james@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:39:27 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1282899uge
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 23:39:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WS4yhdzQ5X18MbHUU6uqvKedKx+7PQHjc1zdGXkAf3fZfald1FufTxiGD4F52YhrF/rCc77f1pIPbTOQwUGl4S24xJNY0jLip7VQhYbwqmL9EqtIGyPjgMbK+4fIKlUcmjlvaai5I5Yym+UT0t0Uo7GIbpqvzUB8PbxOf5TLaR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hb3mSqlmP11v2zkttaondF3U71eShJWox9OCcAb6gnsQe5lH9Dc09XfSpeUaBLNKDSOuffQ4jheGaYCRUcmSeQr3cNOQRhAhbGSVVF37xTxrRolO6XjmddmOgiU+R4kJe1NcgbGsTSkRvIMASoT/dDM8n4Ps7KXWTBHzYU/FVd4=
Received: by 10.78.205.7 with SMTP id c7mr1554242hug.1180334346008;
        Sun, 27 May 2007 23:39:06 -0700 (PDT)
Received: by 10.78.160.17 with HTTP; Sun, 27 May 2007 23:39:05 -0700 (PDT)
Message-ID: <5d5204510705272339pef937f4t3495ddd9be7c83ae@mail.gmail.com>
Date: Mon, 28 May 2007 14:39:05 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: times of match in a document
In-Reply-To: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89214_21929289.1180334345880"
References: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89214_21929289.1180334345880
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

maybe solr facet fit for u.http://wiki.apache.org/solr/SolrFacetingOverview

2007/5/28, Anny Bridge <anybridge@gmail.com>:
>
> Hi,
>
> I use lucene in my project and it works well.
>
> Now I hope that the search result presenting to the user include the times
> of the keyword match in a document.
>
> Is there someone do this before,Or is there any code example for this...
>
> Thanks in Advance.
> Anny
>



-- 
regards
jl

------=_Part_89214_21929289.1180334345880--

From java-user-return-28364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 06:40:40 2007
Return-Path: <java-user-return-28364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31273 invoked from network); 28 May 2007 06:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 06:40:39 -0000
Received: (qmail 51903 invoked by uid 500); 28 May 2007 06:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51589 invoked by uid 500); 28 May 2007 06:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51578 invoked by uid 99); 28 May 2007 06:40:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:40:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of liuping.james@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:40:31 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1283050uge
        for <java-user@lucene.apache.org>; Sun, 27 May 2007 23:40:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JmWZj6tbHkfM2JrJtUVp0lclkWtMsTxI9TYh4Vso+dowCXIrhJvXyK4WkeY43IAOky/wORRadO3VRJI5k/Wdmr+3Q6ya2aonhTq/ALYir78Z7wB+2wV4eeCOEU4XPg7NisaG8Z9uba0feQGmgi3IZvqzxg7YgBBd08/AWVaAe4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bTBuowaiSg3agalGUcZ71M1TocILZKhh8q8hZE5jWNraseplIjAJvLTD47q5viQFdnGctfaHg7llkV/R7p75E1z6DmRi/8j1hYXzzp4oq/NK1CmRUZd0A54JI7CDXAahncmRnvd6tSUmOIiXwihGBjmHNDJfTKtyAW8T3zYdHH0=
Received: by 10.78.171.13 with SMTP id t13mr1552202hue.1180334409903;
        Sun, 27 May 2007 23:40:09 -0700 (PDT)
Received: by 10.78.160.17 with HTTP; Sun, 27 May 2007 23:40:09 -0700 (PDT)
Message-ID: <5d5204510705272340g64517d37v7dbc71a772833f22@mail.gmail.com>
Date: Mon, 28 May 2007 14:40:09 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: times of match in a document
In-Reply-To: <5d5204510705272339pef937f4t3495ddd9be7c83ae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89222_16748490.1180334409769"
References: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
	 <5d5204510705272339pef937f4t3495ddd9be7c83ae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89222_16748490.1180334409769
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

sorry,,i not see it clearly

> match in a document.
>

2007/5/28, James liu <liuping.james@gmail.com>:
>
> maybe solr facet fit for u
> .http://wiki.apache.org/solr/SolrFacetingOverview
>
> 2007/5/28, Anny Bridge <anybridge@gmail.com>:
> >
> > Hi,
> >
> > I use lucene in my project and it works well.
> >
> > Now I hope that the search result presenting to the user include the
> > times
> > of the keyword match in a document.
> >
> > Is there someone do this before,Or is there any code example for this...
> >
> >
> > Thanks in Advance.
> > Anny
> >
>
>
>
> --
> regards
> jl




-- 
regards
jl

------=_Part_89222_16748490.1180334409769--

From java-user-return-28365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 06:54:36 2007
Return-Path: <java-user-return-28365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36314 invoked from network); 28 May 2007 06:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 06:54:34 -0000
Received: (qmail 66487 invoked by uid 500); 28 May 2007 06:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65982 invoked by uid 500); 28 May 2007 06:54:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65971 invoked by uid 99); 28 May 2007 06:54:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:54:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 May 2007 23:54:26 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id BEFC8828006
	for <java-user@lucene.apache.org>; Mon, 28 May 2007 16:57:44 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: times of match in a document
Date: Mon, 28 May 2007 16:51:45 +1000
User-Agent: KMail/1.9.7
References: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
In-Reply-To: <41255c260705271930w11304f1lc536ce590a8cae5f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200705281651.45900.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 28 May 2007 12:30:38 Anny Bridge wrote:
> Hi,
>
> I use lucene in my project and it works well.
>
> Now I hope that the search result presenting to the user include the times
> of the keyword match in a document.
>
> Is there someone do this before,Or is there any code example for this...

See IndexReader#termDocs(), termDocs#seek(Term), termDocs#skipTo(int) and 
termDocs#freq().

If you need to do it for multiple documents and terms, you probably want to do 
it in order to reduce redundant creation of multiple TermDocs objects.

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 12:20:15 2007
Return-Path: <java-user-return-28366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64813 invoked from network); 28 May 2007 12:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 12:20:14 -0000
Received: (qmail 72216 invoked by uid 500); 28 May 2007 12:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72000 invoked by uid 500); 28 May 2007 12:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71989 invoked by uid 99); 28 May 2007 12:20:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 05:20:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 05:20:04 -0700
Received: by nz-out-0506.google.com with SMTP id x7so538866nzc
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 05:19:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=k+GKFIgrKEKNosLajsCaHOWVuF05D+eACMvU+Z4AM0kkoQWx9FhQ3C92MPGzDYrrl6gG0pedkHxPGUA3CGbXcLErZ83iHaBMQzeO4bAx6o4gFeqHusfP402VlQf0K//xkRHCp7dAkAC3vOF3Kxk/SoHNo0G8VBKM11v88qEf4v4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f9sneVKdQ/QG7ODlgNKz84UrAJb425OzarL62WMpOD3SzH6JtZ+R/Qb4NklpDo6IGoGj3jcpUpwW7+L10uFoHQ76ZJEuNsUoB/E3Uk3/h/HXlEAjUV6rOrdF01M6LQY35SS3z9M+TT2ctgY6vB5X2A2oaqwa8JWK3vA1K7+wWoI=
Received: by 10.114.79.1 with SMTP id c1mr2891671wab.1180354781849;
        Mon, 28 May 2007 05:19:41 -0700 (PDT)
Received: by 10.114.93.18 with HTTP; Mon, 28 May 2007 05:19:41 -0700 (PDT)
Message-ID: <4628d2a90705280519t78388d7cva02b0b6f4727523e@mail.gmail.com>
Date: Mon, 28 May 2007 17:49:41 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Does Lucene search over memory too?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145465_14648558.1180354781796"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145465_14648558.1180354781796
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    Does Lucene search FSDirectory as well as buffered in-memory docs while
we are calling searcher.search(query)?
    Why I'm asking this is, I've indexed my doc with mergeFactor &
Max.Buff.Docs = 50 and I've optimized and closed it at mid-night
only.Beforeoptimization, my search gives partial matches and it does
not give matches
which is in memory.

    To get all matches (inclusive of matches in memory),what i have to do?
    Shall I use writer.flush() to resolve this?

Thanks in Advance
             RSK

------=_Part_145465_14648558.1180354781796--

From java-user-return-28367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 12:59:44 2007
Return-Path: <java-user-return-28367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78113 invoked from network); 28 May 2007 12:59:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 12:59:42 -0000
Received: (qmail 33784 invoked by uid 500); 28 May 2007 12:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33748 invoked by uid 500); 28 May 2007 12:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33737 invoked by uid 99); 28 May 2007 12:59:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 05:59:40 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 05:59:33 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hseoa-00010O-GX
	for java-user@lucene.apache.org; Mon, 28 May 2007 05:59:12 -0700
Message-ID: <10835636.post@talk.nabble.com>
Date: Mon, 28 May 2007 05:59:12 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <10719413.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Erick,
Still no idea about my problem?
Anybody here using the FrenchAnalyzer?
Thanks,
Florian


Jolinar13 wrote:
> 
> Hello,
> Thank you for your quick answer.
> I use Luke to examine the index, but since I switched to FrenchAnalyzer,
> it says 'Not a Lucene index'.
> If I open the index files in a text viewer, the strings are in UPPER case.
> I do use the same analyzer to index and search.
> So, do I have to specify the FrenchAnalyzer not to be case sensitive? How
> to do that?
> Thanks a lot
> Florian
> 
> 
> Erick Erickson wrote:
>> 
>> First have you gotten a copy of Luke to examine your index to see
>> what's actually indexed?
>> 
>> The default behavior is usually to lowercase everything, but I'm not
>> entirely sure if the French analyzer does this. But I suspect so.
>> 
>> Searches are case sensitive. To get caseless searching, you need
>> to put everything in the same case. This is usually done for you with
>> any of the standard analyzers, but check specifically.
>> 
>> Are you using the same analyzer at index AND search time?
>> 
>> Best
>> Erick
>> 
>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>
>>>
>>> Hello,
>>>
>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
>>> search results on strings in uppercase. (example : VEHICLE)
>>> When I search the string (in lower case), I get no result. I get results
>>> if
>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>
>>> What is odd is that it affects only some of the strings, not all of
>>> them.
>>> Anyone who has ever experienced this problem?
>>>
>>> Thanks,
>>> Florian
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10835636
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 13:10:18 2007
Return-Path: <java-user-return-28368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83208 invoked from network); 28 May 2007 13:10:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 13:10:17 -0000
Received: (qmail 46081 invoked by uid 500); 28 May 2007 13:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46054 invoked by uid 500); 28 May 2007 13:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46043 invoked by uid 99); 28 May 2007 13:10:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 06:10:13 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 06:10:07 -0700
Received: by wx-out-0506.google.com with SMTP id t8so852447wxc
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 06:09:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=JNrqB3djCu4q1eNStg26SCLtDWIYSSeZPIRWTa9nCQwSgfNdmUn8D4Jk9lL7DJUNZH+/lMHQqIKbNqixEbn9Vj2fulHfSO6VsMIKQaxOK1Fa4PxTNzSYUcdWg8tlTX4adLp/14cdBSG8fLKe9xdmO8mX8TTybtU9XE+QOd3HTT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=g8URO3nT9iJxTXLpMS7GByq/CdwHYwezW+ED1VPm7SyIvNjtfnBd+sDaKKbIwNJy3ajTDaQJxWkhY8vMwkNA8Wn6AyZOZp6PSXjypd9lTG2uzAAOtK1WFpUR4Fo9O6C/lgOiVjMaE8gnp4SrJZ3deQEgCHzWFess8eW7gK28Y5w=
Received: by 10.90.93.6 with SMTP id q6mr3787829agb.1180357786894;
        Mon, 28 May 2007 06:09:46 -0700 (PDT)
Received: from ?192.168.1.100? ( [67.86.221.9])
        by mx.google.com with ESMTP id 6sm5906553wrh.2007.05.28.06.09.46;
        Mon, 28 May 2007 06:09:46 -0700 (PDT)
Message-ID: <465AD47C.3080602@gmail.com>
Date: Mon, 28 May 2007 09:09:16 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com>
In-Reply-To: <10835636.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

FrenchAnalyzer does lowercase and using it would not in anyway alter 
Lukes ability to read your index.

- Mark

Jolinar13 wrote:
> Hello Erick,
> Still no idea about my problem?
> Anybody here using the FrenchAnalyzer?
> Thanks,
> Florian
>
>
> Jolinar13 wrote:
>   
>> Hello,
>> Thank you for your quick answer.
>> I use Luke to examine the index, but since I switched to FrenchAnalyzer,
>> it says 'Not a Lucene index'.
>> If I open the index files in a text viewer, the strings are in UPPER case.
>> I do use the same analyzer to index and search.
>> So, do I have to specify the FrenchAnalyzer not to be case sensitive? How
>> to do that?
>> Thanks a lot
>> Florian
>>
>>
>> Erick Erickson wrote:
>>     
>>> First have you gotten a copy of Luke to examine your index to see
>>> what's actually indexed?
>>>
>>> The default behavior is usually to lowercase everything, but I'm not
>>> entirely sure if the French analyzer does this. But I suspect so.
>>>
>>> Searches are case sensitive. To get caseless searching, you need
>>> to put everything in the same case. This is usually done for you with
>>> any of the standard analyzers, but check specifically.
>>>
>>> Are you using the same analyzer at index AND search time?
>>>
>>> Best
>>> Erick
>>>
>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>       
>>>> Hello,
>>>>
>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
>>>> search results on strings in uppercase. (example : VEHICLE)
>>>> When I search the string (in lower case), I get no result. I get results
>>>> if
>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>
>>>> What is odd is that it affects only some of the strings, not all of
>>>> them.
>>>> Anyone who has ever experienced this problem?
>>>>
>>>> Thanks,
>>>> Florian
>>>> --
>>>> View this message in context:
>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>>       
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 13:51:30 2007
Return-Path: <java-user-return-28369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99064 invoked from network); 28 May 2007 13:51:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 13:51:29 -0000
Received: (qmail 2439 invoked by uid 500); 28 May 2007 13:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2346 invoked by uid 500); 28 May 2007 13:51:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2335 invoked by uid 99); 28 May 2007 13:51:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 06:51:25 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 06:51:20 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hsfch-0002Tl-Uq
	for java-user@lucene.apache.org; Mon, 28 May 2007 06:50:59 -0700
Message-ID: <10836580.post@talk.nabble.com>
Date: Mon, 28 May 2007 06:50:59 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <465AD47C.3080602@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Mark!
Thank you a lot for your answer.
You are right for the Luke part. My Luke version was too old. My bad.
But with Luke I still observe the problem I described.
Any idea how to sort this out?
Thank you
Florian

>>>> I got strange
>>>> search results on strings in uppercase. (example : VEHICLE)
>>>> When I search the string (in lower case), I get no result. I get
>>>> results
>>>> if
>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>
>>>> What is odd is that it affects only some of the strings, not all of
>>>> them.


markrmiller wrote:
> 
> FrenchAnalyzer does lowercase and using it would not in anyway alter 
> Lukes ability to read your index.
> 
> - Mark
> 
> Jolinar13 wrote:
>> Hello Erick,
>> Still no idea about my problem?
>> Anybody here using the FrenchAnalyzer?
>> Thanks,
>> Florian
>>
>>
>> Jolinar13 wrote:
>>   
>>> Hello,
>>> Thank you for your quick answer.
>>> I use Luke to examine the index, but since I switched to FrenchAnalyzer,
>>> it says 'Not a Lucene index'.
>>> If I open the index files in a text viewer, the strings are in UPPER
>>> case.
>>> I do use the same analyzer to index and search.
>>> So, do I have to specify the FrenchAnalyzer not to be case sensitive?
>>> How
>>> to do that?
>>> Thanks a lot
>>> Florian
>>>
>>>
>>> Erick Erickson wrote:
>>>     
>>>> First have you gotten a copy of Luke to examine your index to see
>>>> what's actually indexed?
>>>>
>>>> The default behavior is usually to lowercase everything, but I'm not
>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>
>>>> Searches are case sensitive. To get caseless searching, you need
>>>> to put everything in the same case. This is usually done for you with
>>>> any of the standard analyzers, but check specifically.
>>>>
>>>> Are you using the same analyzer at index AND search time?
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>       
>>>>> Hello,
>>>>>
>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got strange
>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>> When I search the string (in lower case), I get no result. I get
>>>>> results
>>>>> if
>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>
>>>>> What is odd is that it affects only some of the strings, not all of
>>>>> them.
>>>>> Anyone who has ever experienced this problem?
>>>>>
>>>>> Thanks,
>>>>> Florian
>>>>> --
>>>>> View this message in context:
>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>         
>>>>       
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10836580
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 14:01:08 2007
Return-Path: <java-user-return-28370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1808 invoked from network); 28 May 2007 14:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 14:01:06 -0000
Received: (qmail 14068 invoked by uid 500); 28 May 2007 14:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14032 invoked by uid 500); 28 May 2007 14:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14019 invoked by uid 99); 28 May 2007 14:01:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:01:04 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:00:58 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hsfm2-0002eh-F2
	for java-user@lucene.apache.org; Mon, 28 May 2007 07:00:38 -0700
Message-ID: <10836694.post@talk.nabble.com>
Date: Mon, 28 May 2007 07:00:38 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <10836580.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com> <10836580.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks to Luke, I realized my terms were not parsed correctly, and this has
nothing to do with upper case!
It seems to happen when the word ends with "ni". For example "giovanni" is
parsed "giovann".
Something about this?
Florian


Jolinar13 wrote:
> 
> Hello Mark!
> Thank you a lot for your answer.
> You are right for the Luke part. My Luke version was too old. My bad.
> But with Luke I still observe the problem I described.
> Any idea how to sort this out?
> Maybe this has to do with the fact I use Compass?
> Thank you
> Florian
> 
>>>>> I got strange
>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>> When I search the string (in lower case), I get no result. I get
>>>>> results
>>>>> if
>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>
>>>>> What is odd is that it affects only some of the strings, not all of
>>>>> them.
> 
> 
> markrmiller wrote:
>> 
>> FrenchAnalyzer does lowercase and using it would not in anyway alter 
>> Lukes ability to read your index.
>> 
>> - Mark
>> 
>> Jolinar13 wrote:
>>> Hello Erick,
>>> Still no idea about my problem?
>>> Anybody here using the FrenchAnalyzer?
>>> Thanks,
>>> Florian
>>>
>>>
>>> Jolinar13 wrote:
>>>   
>>>> Hello,
>>>> Thank you for your quick answer.
>>>> I use Luke to examine the index, but since I switched to
>>>> FrenchAnalyzer,
>>>> it says 'Not a Lucene index'.
>>>> If I open the index files in a text viewer, the strings are in UPPER
>>>> case.
>>>> I do use the same analyzer to index and search.
>>>> So, do I have to specify the FrenchAnalyzer not to be case sensitive?
>>>> How
>>>> to do that?
>>>> Thanks a lot
>>>> Florian
>>>>
>>>>
>>>> Erick Erickson wrote:
>>>>     
>>>>> First have you gotten a copy of Luke to examine your index to see
>>>>> what's actually indexed?
>>>>>
>>>>> The default behavior is usually to lowercase everything, but I'm not
>>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>>
>>>>> Searches are case sensitive. To get caseless searching, you need
>>>>> to put everything in the same case. This is usually done for you with
>>>>> any of the standard analyzers, but check specifically.
>>>>>
>>>>> Are you using the same analyzer at index AND search time?
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>>       
>>>>>> Hello,
>>>>>>
>>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got
>>>>>> strange
>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>> results
>>>>>> if
>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>
>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>> them.
>>>>>> Anyone who has ever experienced this problem?
>>>>>>
>>>>>> Thanks,
>>>>>> Florian
>>>>>> --
>>>>>> View this message in context:
>>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>         
>>>>>       
>>>>     
>>>
>>>   
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10836694
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 14:15:13 2007
Return-Path: <java-user-return-28371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6329 invoked from network); 28 May 2007 14:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 14:15:12 -0000
Received: (qmail 35996 invoked by uid 500); 28 May 2007 14:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35964 invoked by uid 500); 28 May 2007 14:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35953 invoked by uid 99); 28 May 2007 14:15:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:15:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:15:04 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hsfzg-0003BD-71
	for java-user@lucene.apache.org; Mon, 28 May 2007 07:14:44 -0700
Message-ID: <10836893.post@talk.nabble.com>
Date: Mon, 28 May 2007 07:14:44 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <10836694.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com> <10836580.post@talk.nabble.com> <10836694.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Some terms I tested :
vehicle => all:vehicl
vehiCle => all:vehicle
Vehicle => all:vehicl
VeHicle => all:vehicle
VEHICLE => all:vehicle
vehicles => all:vehicl
paris => all:par
:S


Jolinar13 wrote:
> 
> Thanks to Luke, I realized my terms were not parsed correctly, and this
> has nothing to do with upper case!
> It seems to happen when the word ends with "*i". For example "giovanni" is
> parsed "giovann".
> Something about this?
> Florian
> 
> 
> Jolinar13 wrote:
>> 
>> Hello Mark!
>> Thank you a lot for your answer.
>> You are right for the Luke part. My Luke version was too old. My bad.
>> But with Luke I still observe the problem I described.
>> Any idea how to sort this out?
>> Maybe this has to do with the fact I use Compass?
>> Thank you
>> Florian
>> 
>>>>>> I got strange
>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>> results
>>>>>> if
>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>
>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>> them.
>> 
>> 
>> markrmiller wrote:
>>> 
>>> FrenchAnalyzer does lowercase and using it would not in anyway alter 
>>> Lukes ability to read your index.
>>> 
>>> - Mark
>>> 
>>> Jolinar13 wrote:
>>>> Hello Erick,
>>>> Still no idea about my problem?
>>>> Anybody here using the FrenchAnalyzer?
>>>> Thanks,
>>>> Florian
>>>>
>>>>
>>>> Jolinar13 wrote:
>>>>   
>>>>> Hello,
>>>>> Thank you for your quick answer.
>>>>> I use Luke to examine the index, but since I switched to
>>>>> FrenchAnalyzer,
>>>>> it says 'Not a Lucene index'.
>>>>> If I open the index files in a text viewer, the strings are in UPPER
>>>>> case.
>>>>> I do use the same analyzer to index and search.
>>>>> So, do I have to specify the FrenchAnalyzer not to be case sensitive?
>>>>> How
>>>>> to do that?
>>>>> Thanks a lot
>>>>> Florian
>>>>>
>>>>>
>>>>> Erick Erickson wrote:
>>>>>     
>>>>>> First have you gotten a copy of Luke to examine your index to see
>>>>>> what's actually indexed?
>>>>>>
>>>>>> The default behavior is usually to lowercase everything, but I'm not
>>>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>>>
>>>>>> Searches are case sensitive. To get caseless searching, you need
>>>>>> to put everything in the same case. This is usually done for you with
>>>>>> any of the standard analyzers, but check specifically.
>>>>>>
>>>>>> Are you using the same analyzer at index AND search time?
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>>>       
>>>>>>> Hello,
>>>>>>>
>>>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got
>>>>>>> strange
>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>> results
>>>>>>> if
>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>
>>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>>> them.
>>>>>>> Anyone who has ever experienced this problem?
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Florian
>>>>>>> --
>>>>>>> View this message in context:
>>>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>> Nabble.com.
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>         
>>>>>>       
>>>>>     
>>>>
>>>>   
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10836893
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 14:28:36 2007
Return-Path: <java-user-return-28372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11917 invoked from network); 28 May 2007 14:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 14:28:35 -0000
Received: (qmail 62394 invoked by uid 500); 28 May 2007 14:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62230 invoked by uid 500); 28 May 2007 14:28:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62219 invoked by uid 99); 28 May 2007 14:28:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:28:32 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:28:27 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HsgCc-0003Qp-MY
	for java-user@lucene.apache.org; Mon, 28 May 2007 07:28:06 -0700
Message-ID: <10837045.post@talk.nabble.com>
Date: Mon, 28 May 2007 07:28:06 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <10836893.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com> <10836580.post@talk.nabble.com> <10836694.post@talk.nabble.com> <10836893.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like it remove the letter in the end, if it ends with an 'a', 'e' or
'i'.
Femelles => all:femel
Is this expected?
How to use FrenchAnalyzer?
Thanks
Florian


Jolinar13 wrote:
> 
> Some terms I tested :
> vehicle => all:vehicl
> vehiCle => all:vehicle
> Vehicle => all:vehicl
> VeHicle => all:vehicle
> VEHICLE => all:vehicle
> vehicles => all:vehicl
> paris => all:par
> :S
> 
> 
> Jolinar13 wrote:
>> 
>> Thanks to Luke, I realized my terms were not parsed correctly, and this
>> has nothing to do with upper case!
>> It seems to happen when the word ends with "*i". For example "giovanni"
>> is parsed "giovann".
>> Something about this?
>> Florian
>> 
>> 
>> Jolinar13 wrote:
>>> 
>>> Hello Mark!
>>> Thank you a lot for your answer.
>>> You are right for the Luke part. My Luke version was too old. My bad.
>>> But with Luke I still observe the problem I described.
>>> Any idea how to sort this out?
>>> Maybe this has to do with the fact I use Compass?
>>> Thank you
>>> Florian
>>> 
>>>>>>> I got strange
>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>> results
>>>>>>> if
>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>
>>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>>> them.
>>> 
>>> 
>>> markrmiller wrote:
>>>> 
>>>> FrenchAnalyzer does lowercase and using it would not in anyway alter 
>>>> Lukes ability to read your index.
>>>> 
>>>> - Mark
>>>> 
>>>> Jolinar13 wrote:
>>>>> Hello Erick,
>>>>> Still no idea about my problem?
>>>>> Anybody here using the FrenchAnalyzer?
>>>>> Thanks,
>>>>> Florian
>>>>>
>>>>>
>>>>> Jolinar13 wrote:
>>>>>   
>>>>>> Hello,
>>>>>> Thank you for your quick answer.
>>>>>> I use Luke to examine the index, but since I switched to
>>>>>> FrenchAnalyzer,
>>>>>> it says 'Not a Lucene index'.
>>>>>> If I open the index files in a text viewer, the strings are in UPPER
>>>>>> case.
>>>>>> I do use the same analyzer to index and search.
>>>>>> So, do I have to specify the FrenchAnalyzer not to be case sensitive?
>>>>>> How
>>>>>> to do that?
>>>>>> Thanks a lot
>>>>>> Florian
>>>>>>
>>>>>>
>>>>>> Erick Erickson wrote:
>>>>>>     
>>>>>>> First have you gotten a copy of Luke to examine your index to see
>>>>>>> what's actually indexed?
>>>>>>>
>>>>>>> The default behavior is usually to lowercase everything, but I'm not
>>>>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>>>>
>>>>>>> Searches are case sensitive. To get caseless searching, you need
>>>>>>> to put everything in the same case. This is usually done for you
>>>>>>> with
>>>>>>> any of the standard analyzers, but check specifically.
>>>>>>>
>>>>>>> Are you using the same analyzer at index AND search time?
>>>>>>>
>>>>>>> Best
>>>>>>> Erick
>>>>>>>
>>>>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>>>>       
>>>>>>>> Hello,
>>>>>>>>
>>>>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got
>>>>>>>> strange
>>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>>> results
>>>>>>>> if
>>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>>
>>>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>>>> them.
>>>>>>>> Anyone who has ever experienced this problem?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> Florian
>>>>>>>> --
>>>>>>>> View this message in context:
>>>>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>> Nabble.com.
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>         
>>>>>>>       
>>>>>>     
>>>>>
>>>>>   
>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>>> 
>>>> 
>>> 
>>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10837045
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 14:52:15 2007
Return-Path: <java-user-return-28373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18201 invoked from network); 28 May 2007 14:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 14:52:13 -0000
Received: (qmail 10967 invoked by uid 500); 28 May 2007 14:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10937 invoked by uid 500); 28 May 2007 14:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10926 invoked by uid 99); 28 May 2007 14:52:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:52:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 07:52:04 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Subject: RE: synchronize hits variable?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 28 May 2007 09:51:06 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
In-Reply-To: <685348.93495.qm@web50301.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: synchronize hits variable?
Thread-Index: Aceg1+zJ4wFp6FybSXaD4U0A9a+jUQAX3+Ag
References: <685348.93495.qm@web50301.mail.re2.yahoo.com>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the response.  Its definitely the user search object's
search().   I have to iterate through all the hits that come back to get
all the categories used in the results, so the number that hits gets
really doesn't matter--ill need them all.    =20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Sunday, May 27, 2007 10:26 PM
To: java-user@lucene.apache.org
Subject: Re: synchronize hits variable?

Hi John,

20M sounds suspicious.  Without seeing the code, it's hard to tell.  My
guess is the problem lies elsewhere or some piece of Lucene is being
incorrectly used.  Or maybe your Lucene Documents are just very large.
Are they?  You could go modify Hits source and change the number of hits
that Hits instance loads.  I think it caches either 100 or 200 (haven't
looked at it in a while).  There is no API for changing it, so you could
change it in the sources, recompile, redeploy, and see if that helps
you.

Otis
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: John Powers <jpowers@configureone.com>
To: java-user@lucene.apache.org
Sent: Sunday, May 27, 2007 9:17:59 PM
Subject: synchronize hits variable?

In a j2ee webapp we have a search object that stores a user's search
preferences (items/page, detail level, etc).  it has a search() that
calls a static method getSearcher() that returns a static IndexSearcher
that all these user search objects use.....searching with that gives us
a Hits object that this user object iterates through to find out what
categories are used, which ones to display, etc.    this hits object is
huge.   Its fluffing up each user session by 20M in some cases.    This
is unacceptable of course.    I am sure many have run into this issue,
and I was curious what you did to solve it.     If I use a local
variable to that search method, null it after I'm done and call gc(), it
still is bad.    I can't put the hits variable into a static object or
attribute cause of course there are multiple of these user search
objects using it at any time.     Even if I isolated the user search
part to a singleton, others may use it at the same time as well.      I
imagine some sort of synchronization of that static variable is in order
but am not quite sure.   does someone have an example of this?  I would
image everyone has had to deal with this problem.   20M is just to big.
When we use a profiler we find that it's a char[] that seems to be
holding a lot of the data..like 16M of it.    For different indexes in
different servers, this size is different, but for the most part its way
to big everywhere.

=20

Thoughts?  I appreciate any help on this.

=20

Thanks

=20





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 15:26:00 2007
Return-Path: <java-user-return-28374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42529 invoked from network); 28 May 2007 15:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 15:25:59 -0000
Received: (qmail 83033 invoked by uid 500); 28 May 2007 15:25:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83008 invoked by uid 500); 28 May 2007 15:25:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82996 invoked by uid 99); 28 May 2007 15:25:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 08:25:56 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 08:25:49 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hsh68-0004qe-UZ
	for java-user@lucene.apache.org; Mon, 28 May 2007 08:25:28 -0700
Message-ID: <10837835.post@talk.nabble.com>
Date: Mon, 28 May 2007 08:25:28 -0700 (PDT)
From: Jolinar13 <jolinar13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
In-Reply-To: <10837045.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: jolinar13@gmail.com
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com> <10836580.post@talk.nabble.com> <10836694.post@talk.nabble.com> <10836893.post@talk.nabble.com> <10837045.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Finally, I use the standard analyzer with some custom stop words :
le,la,les,l',un,une,des,d',=C3=A0,au,de,et,en,dans,se,sont,qui,a,est,il,pou=
r,que,du,sa,par,mais,sur,avec,aux,ce,d,s,l,ou,pas,ses
Thanks anyway
Florian


Jolinar13 wrote:
>=20
> It looks like it remove the letter in the end, if it ends with an 'a', 'e=
'
> or 'i'.
> Femelles =3D> all:femel
> Is this expected?
> How to use FrenchAnalyzer?
> Thanks
> Florian
>=20
>=20
> Jolinar13 wrote:
>>=20
>> Some terms I tested :
>> vehicle =3D> all:vehicl
>> vehiCle =3D> all:vehicle
>> Vehicle =3D> all:vehicl
>> VeHicle =3D> all:vehicle
>> VEHICLE =3D> all:vehicle
>> vehicles =3D> all:vehicl
>> paris =3D> all:par
>> :S
>>=20
>>=20
>> Jolinar13 wrote:
>>>=20
>>> Thanks to Luke, I realized my terms were not parsed correctly, and this
>>> has nothing to do with upper case!
>>> It seems to happen when the word ends with "*i". For example "giovanni"
>>> is parsed "giovann".
>>> Something about this?
>>> Florian
>>>=20
>>>=20
>>> Jolinar13 wrote:
>>>>=20
>>>> Hello Mark!
>>>> Thank you a lot for your answer.
>>>> You are right for the Luke part. My Luke version was too old. My bad.
>>>> But with Luke I still observe the problem I described.
>>>> Any idea how to sort this out?
>>>> Maybe this has to do with the fact I use Compass?
>>>> Thank you
>>>> Florian
>>>>=20
>>>>>>>> I got strange
>>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>>> results
>>>>>>>> if
>>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>>
>>>>>>>> What is odd is that it affects only some of the strings, not all o=
f
>>>>>>>> them.
>>>>=20
>>>>=20
>>>> markrmiller wrote:
>>>>>=20
>>>>> FrenchAnalyzer does lowercase and using it would not in anyway alter=
=20
>>>>> Lukes ability to read your index.
>>>>>=20
>>>>> - Mark
>>>>>=20
>>>>> Jolinar13 wrote:
>>>>>> Hello Erick,
>>>>>> Still no idea about my problem?
>>>>>> Anybody here using the FrenchAnalyzer?
>>>>>> Thanks,
>>>>>> Florian
>>>>>>
>>>>>>
>>>>>> Jolinar13 wrote:
>>>>>>  =20
>>>>>>> Hello,
>>>>>>> Thank you for your quick answer.
>>>>>>> I use Luke to examine the index, but since I switched to
>>>>>>> FrenchAnalyzer,
>>>>>>> it says 'Not a Lucene index'.
>>>>>>> If I open the index files in a text viewer, the strings are in UPPE=
R
>>>>>>> case.
>>>>>>> I do use the same analyzer to index and search.
>>>>>>> So, do I have to specify the FrenchAnalyzer not to be case
>>>>>>> sensitive? How
>>>>>>> to do that?
>>>>>>> Thanks a lot
>>>>>>> Florian
>>>>>>>
>>>>>>>
>>>>>>> Erick Erickson wrote:
>>>>>>>    =20
>>>>>>>> First have you gotten a copy of Luke to examine your index to see
>>>>>>>> what's actually indexed?
>>>>>>>>
>>>>>>>> The default behavior is usually to lowercase everything, but I'm
>>>>>>>> not
>>>>>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>>>>>
>>>>>>>> Searches are case sensitive. To get caseless searching, you need
>>>>>>>> to put everything in the same case. This is usually done for you
>>>>>>>> with
>>>>>>>> any of the standard analyzers, but check specifically.
>>>>>>>>
>>>>>>>> Are you using the same analyzer at index AND search time?
>>>>>>>>
>>>>>>>> Best
>>>>>>>> Erick
>>>>>>>>
>>>>>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>>>>>      =20
>>>>>>>>> Hello,
>>>>>>>>>
>>>>>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got
>>>>>>>>> strange
>>>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>>>> results
>>>>>>>>> if
>>>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>>>
>>>>>>>>> What is odd is that it affects only some of the strings, not all
>>>>>>>>> of
>>>>>>>>> them.
>>>>>>>>> Anyone who has ever experienced this problem?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> Florian
>>>>>>>>> --
>>>>>>>>> View this message in context:
>>>>>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-s=
trings-in-capital-letters-tf3789153.html#a10715673
>>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>>> Nabble.com.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>        =20
>>>>>>>>      =20
>>>>>>>    =20
>>>>>>
>>>>>>  =20
>>>>>=20
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>=20
>>>>>=20
>>>>>=20
>>>>=20
>>>>=20
>>>=20
>>>=20
>>=20
>>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Very-odd-behaviour-of-F=
renchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10837835
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 16:47:32 2007
Return-Path: <java-user-return-28375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68515 invoked from network); 28 May 2007 16:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 16:47:31 -0000
Received: (qmail 19300 invoked by uid 500); 28 May 2007 16:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19272 invoked by uid 500); 28 May 2007 16:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19261 invoked by uid 99); 28 May 2007 16:47:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 09:47:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 09:47:22 -0700
Received: by wx-out-0506.google.com with SMTP id t8so889027wxc
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 09:47:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OzUqjv1s25J6dV0pLZjldfqTFugJTSfTi53iaXSi/tangCnk+xwyzS+aQyg0q9K1ROAOgQJmO8Y/C9dpHUsCW+uk/9uxw1LvMsVfNzxD/Cgmau4Z+3mS0VnPPmPsicdthLmTsCDYXsnYKvRA+Kcg3/FLhLPABOTezdqts3W5YZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=GZ2Z7d7myinuHbQBKguJHnZFuTNAHHwFB4ZkVFqvWIG886tCt5Xd4rN29gas27ov0i66eW2Ukqw7vhzx8T29jQYtG52dyCfiVfhxul4J/r/CJq80GNzbtp1tLWvEGKLMyjwFz5jYZAixBSGc/gmimKfV88PjAg7cWGUnh7YX2pc=
Received: by 10.90.52.2 with SMTP id z2mr4012219agz.1180370821423;
        Mon, 28 May 2007 09:47:01 -0700 (PDT)
Received: from ?192.168.1.100? ( [67.86.221.9])
        by mx.google.com with ESMTP id l48sm6021229wrl.2007.05.28.09.47.00;
        Mon, 28 May 2007 09:47:00 -0700 (PDT)
Message-ID: <465B0762.80908@gmail.com>
Date: Mon, 28 May 2007 12:46:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: synchronize hits variable?
References: <685348.93495.qm@web50301.mail.re2.yahoo.com> <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You do not want to be using Hits. Frankly, the way pagination should 
normally be done, Hits caching means almost nobody really wants to be 
using Hits, but in your case it's even worse. Look into a Hit collector 
-- not only are you caching every single document in your search 
results, but you are re-querying many times for a single query by 
running through all of the result in Hits! I don't have the time at the 
moment to explain further (I am sure someone else will) but you need to 
drop Hits like a bad habit and look into HitCollector.

- Mark

John Powers wrote:
> Thanks for the response.  Its definitely the user search object's
> search().   I have to iterate through all the hits that come back to get
> all the categories used in the results, so the number that hits gets
> really doesn't matter--ill need them all.     
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Sunday, May 27, 2007 10:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: synchronize hits variable?
>
> Hi John,
>
> 20M sounds suspicious.  Without seeing the code, it's hard to tell.  My
> guess is the problem lies elsewhere or some piece of Lucene is being
> incorrectly used.  Or maybe your Lucene Documents are just very large.
> Are they?  You could go modify Hits source and change the number of hits
> that Hits instance loads.  I think it caches either 100 or 200 (haven't
> looked at it in a while).  There is no API for changing it, so you could
> change it in the sources, recompile, redeploy, and see if that helps
> you.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: John Powers <jpowers@configureone.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, May 27, 2007 9:17:59 PM
> Subject: synchronize hits variable?
>
> In a j2ee webapp we have a search object that stores a user's search
> preferences (items/page, detail level, etc).  it has a search() that
> calls a static method getSearcher() that returns a static IndexSearcher
> that all these user search objects use.....searching with that gives us
> a Hits object that this user object iterates through to find out what
> categories are used, which ones to display, etc.    this hits object is
> huge.   Its fluffing up each user session by 20M in some cases.    This
> is unacceptable of course.    I am sure many have run into this issue,
> and I was curious what you did to solve it.     If I use a local
> variable to that search method, null it after I'm done and call gc(), it
> still is bad.    I can't put the hits variable into a static object or
> attribute cause of course there are multiple of these user search
> objects using it at any time.     Even if I isolated the user search
> part to a singleton, others may use it at the same time as well.      I
> imagine some sort of synchronization of that static variable is in order
> but am not quite sure.   does someone have an example of this?  I would
> image everyone has had to deal with this problem.   20M is just to big.
> When we use a profiler we find that it's a char[] that seems to be
> holding a lot of the data..like 16M of it.    For different indexes in
> different servers, this size is different, but for the most part its way
> to big everywhere.
>
>  
>
> Thoughts?  I appreciate any help on this.
>
>  
>
> Thanks
>
>  
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 16:50:05 2007
Return-Path: <java-user-return-28376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69148 invoked from network); 28 May 2007 16:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 16:50:04 -0000
Received: (qmail 26523 invoked by uid 500); 28 May 2007 16:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26180 invoked by uid 500); 28 May 2007 16:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26169 invoked by uid 99); 28 May 2007 16:50:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 09:50:01 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 09:49:56 -0700
Received: by wr-out-0506.google.com with SMTP id 36so583379wra
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 09:49:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dP0Y8DztIaHjvbEPdi68tDhfBQJIlcH7JxU3OEqgEc/qGh8utYY7yiKQKh1SIHLbe8pkn4za5ROg4koKOipZ39cgxEPxQdSJsAPOQTJVsnWOh3wVYUbGePyiz6tako8dGgPP8mcC5wnSicZs1OKCUCEhfpAFipxObNaErRRR3YE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hXhlVn+EF4pVpKnBlyfYKcmpti0pFxKfA6BZ622NLUnLWrUi+YFCr3rGy9Z8OxRGfxivEnIypTSt1lI1HR/wA22/Py3i1ZZg+JQ5kynA0gQuZUsExIQiRwbeoE91w6qgc9r1Z8XN7E0bqGr7XQiwLf3My/ta0CHTV5lkj21//14=
Received: by 10.90.113.18 with SMTP id l18mr4014335agc.1180370975550;
        Mon, 28 May 2007 09:49:35 -0700 (PDT)
Received: from ?192.168.1.100? ( [67.86.221.9])
        by mx.google.com with ESMTP id 25sm6055895wra.2007.05.28.09.49.35;
        Mon, 28 May 2007 09:49:35 -0700 (PDT)
Message-ID: <465B07FC.4050001@gmail.com>
Date: Mon, 28 May 2007 12:49:00 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Very odd behaviour of FrenchAnalyzer with strings in capital
 letters
References: <10715673.post@talk.nabble.com> <359a92830705210627j6b3cca0ci5c53e5ff6d3ffea2@mail.gmail.com> <10719413.post@talk.nabble.com> <10835636.post@talk.nabble.com> <465AD47C.3080602@gmail.com> <10836580.post@talk.nabble.com> <10836694.post@talk.nabble.com> <10836893.post@talk.nabble.com> <10837045.post@talk.nabble.com> <10837835.post@talk.nabble.com>
In-Reply-To: <10837835.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

FrenchAnalyzer has a stemmer built in. You are seeing the result of that 
stemmer in action. If you would not like to stem, you should take a look 
at the code for FrenchAnalyzer and copy it to make your own...just 
remove the FrenchStemming filter.

- Mark

Jolinar13 wrote:
> Finally, I use the standard analyzer with some custom stop words :
> le,la,les,l',un,une,des,d',,au,de,et,en,dans,se,sont,qui,a,est,il,pour,que,du,sa,par,mais,sur,avec,aux,ce,d,s,l,ou,pas,ses
> Thanks anyway
> Florian
>
>
> Jolinar13 wrote:
>   
>> It looks like it remove the letter in the end, if it ends with an 'a', 'e'
>> or 'i'.
>> Femelles => all:femel
>> Is this expected?
>> How to use FrenchAnalyzer?
>> Thanks
>> Florian
>>
>>
>> Jolinar13 wrote:
>>     
>>> Some terms I tested :
>>> vehicle => all:vehicl
>>> vehiCle => all:vehicle
>>> Vehicle => all:vehicl
>>> VeHicle => all:vehicle
>>> VEHICLE => all:vehicle
>>> vehicles => all:vehicl
>>> paris => all:par
>>> :S
>>>
>>>
>>> Jolinar13 wrote:
>>>       
>>>> Thanks to Luke, I realized my terms were not parsed correctly, and this
>>>> has nothing to do with upper case!
>>>> It seems to happen when the word ends with "*i". For example "giovanni"
>>>> is parsed "giovann".
>>>> Something about this?
>>>> Florian
>>>>
>>>>
>>>> Jolinar13 wrote:
>>>>         
>>>>> Hello Mark!
>>>>> Thank you a lot for your answer.
>>>>> You are right for the Luke part. My Luke version was too old. My bad.
>>>>> But with Luke I still observe the problem I described.
>>>>> Any idea how to sort this out?
>>>>> Maybe this has to do with the fact I use Compass?
>>>>> Thank you
>>>>> Florian
>>>>>
>>>>>           
>>>>>>>>> I got strange
>>>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>>>> results
>>>>>>>>> if
>>>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>>>
>>>>>>>>> What is odd is that it affects only some of the strings, not all of
>>>>>>>>> them.
>>>>>>>>>                   
>>>>> markrmiller wrote:
>>>>>           
>>>>>> FrenchAnalyzer does lowercase and using it would not in anyway alter 
>>>>>> Lukes ability to read your index.
>>>>>>
>>>>>> - Mark
>>>>>>
>>>>>> Jolinar13 wrote:
>>>>>>             
>>>>>>> Hello Erick,
>>>>>>> Still no idea about my problem?
>>>>>>> Anybody here using the FrenchAnalyzer?
>>>>>>> Thanks,
>>>>>>> Florian
>>>>>>>
>>>>>>>
>>>>>>> Jolinar13 wrote:
>>>>>>>   
>>>>>>>               
>>>>>>>> Hello,
>>>>>>>> Thank you for your quick answer.
>>>>>>>> I use Luke to examine the index, but since I switched to
>>>>>>>> FrenchAnalyzer,
>>>>>>>> it says 'Not a Lucene index'.
>>>>>>>> If I open the index files in a text viewer, the strings are in UPPER
>>>>>>>> case.
>>>>>>>> I do use the same analyzer to index and search.
>>>>>>>> So, do I have to specify the FrenchAnalyzer not to be case
>>>>>>>> sensitive? How
>>>>>>>> to do that?
>>>>>>>> Thanks a lot
>>>>>>>> Florian
>>>>>>>>
>>>>>>>>
>>>>>>>> Erick Erickson wrote:
>>>>>>>>     
>>>>>>>>                 
>>>>>>>>> First have you gotten a copy of Luke to examine your index to see
>>>>>>>>> what's actually indexed?
>>>>>>>>>
>>>>>>>>> The default behavior is usually to lowercase everything, but I'm
>>>>>>>>> not
>>>>>>>>> entirely sure if the French analyzer does this. But I suspect so.
>>>>>>>>>
>>>>>>>>> Searches are case sensitive. To get caseless searching, you need
>>>>>>>>> to put everything in the same case. This is usually done for you
>>>>>>>>> with
>>>>>>>>> any of the standard analyzers, but check specifically.
>>>>>>>>>
>>>>>>>>> Are you using the same analyzer at index AND search time?
>>>>>>>>>
>>>>>>>>> Best
>>>>>>>>> Erick
>>>>>>>>>
>>>>>>>>> On 5/21/07, Jolinar13 <jolinar13@gmail.com> wrote:
>>>>>>>>>       
>>>>>>>>>                   
>>>>>>>>>> Hello,
>>>>>>>>>>
>>>>>>>>>> I tried org.apache.lucene.analysis.fr.FrenchAnalyzer and I got
>>>>>>>>>> strange
>>>>>>>>>> search results on strings in uppercase. (example : VEHICLE)
>>>>>>>>>> When I search the string (in lower case), I get no result. I get
>>>>>>>>>> results
>>>>>>>>>> if
>>>>>>>>>> I use "vehicle*" or "vehiclE", or "vehicLe" etc.
>>>>>>>>>>
>>>>>>>>>> What is odd is that it affects only some of the strings, not all
>>>>>>>>>> of
>>>>>>>>>> them.
>>>>>>>>>> Anyone who has ever experienced this problem?
>>>>>>>>>>
>>>>>>>>>> Thanks,
>>>>>>>>>> Florian
>>>>>>>>>> --
>>>>>>>>>> View this message in context:
>>>>>>>>>> http://www.nabble.com/Very-odd-behaviour-of-FrenchAnalyzer-with-strings-in-capital-letters-tf3789153.html#a10715673
>>>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>>>> Nabble.com.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>         
>>>>>>>>>>                     
>>>>>>>>>       
>>>>>>>>>                   
>>>>>>>>     
>>>>>>>>                 
>>>>>>>   
>>>>>>>               
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>           
>>>>         
>>>       
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 17:00:45 2007
Return-Path: <java-user-return-28377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70912 invoked from network); 28 May 2007 17:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 17:00:45 -0000
Received: (qmail 39052 invoked by uid 500); 28 May 2007 17:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39018 invoked by uid 500); 28 May 2007 17:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39007 invoked by uid 99); 28 May 2007 17:00:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:00:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:00:38 -0700
Received: by wr-out-0506.google.com with SMTP id 36so585131wra
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 10:00:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YFF88SCOU7/SIpxdkLNsPch3Bf3RjDWCU4AdF6R19SKrvWjTTQk4mLCgx7uS8T+cFQqMWkeYYn6jEas9fHWCuxptrwe25+S8EAm7Y0OcYdu3dJEJEC4U2KcLQtIF13vATrYo9aMFFTQnwwn6zmaaIsxiIKHY2UuODsumAMO9LuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NPbfLdL7Os3h/KUFAqW3et/GB6LjrtoOJJhI7uVVqAA8diHWV5T7E+wJM7OR4JVngqNkr8EjDfYB++VAMkL4HtMFf011d+JByZ7t/bjHMfF5niL4Q+J+cDgKVl8q774MCuESMmJFuRA1dXVWq362hwDa0spgSgD3oE4S9jnhfBY=
Received: by 10.90.87.5 with SMTP id k5mr4013009agb.1180371616252;
        Mon, 28 May 2007 10:00:16 -0700 (PDT)
Received: from ?192.168.1.100? ( [67.86.221.9])
        by mx.google.com with ESMTP id 67sm6013710wra.2007.05.28.10.00.15;
        Mon, 28 May 2007 10:00:15 -0700 (PDT)
Message-ID: <465B0A7C.9090203@gmail.com>
Date: Mon, 28 May 2007 12:59:40 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: synchronize hits variable?
References: <685348.93495.qm@web50301.mail.re2.yahoo.com> <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
In-Reply-To: <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Turns out Hits will only cache 200 documents max actually. It would be 
nice to be able to set that (I'd like to set it to 0). It would be also 
nice if you could control the number that triggers a re-search. I have 
made my own Hits  class to drop both of those features, but it would be 
cool if they could somehow be controlled with core Lucene.

- Mark

John Powers wrote:
> Thanks for the response.  Its definitely the user search object's
> search().   I have to iterate through all the hits that come back to get
> all the categories used in the results, so the number that hits gets
> really doesn't matter--ill need them all.     
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Sunday, May 27, 2007 10:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: synchronize hits variable?
>
> Hi John,
>
> 20M sounds suspicious.  Without seeing the code, it's hard to tell.  My
> guess is the problem lies elsewhere or some piece of Lucene is being
> incorrectly used.  Or maybe your Lucene Documents are just very large.
> Are they?  You could go modify Hits source and change the number of hits
> that Hits instance loads.  I think it caches either 100 or 200 (haven't
> looked at it in a while).  There is no API for changing it, so you could
> change it in the sources, recompile, redeploy, and see if that helps
> you.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: John Powers <jpowers@configureone.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, May 27, 2007 9:17:59 PM
> Subject: synchronize hits variable?
>
> In a j2ee webapp we have a search object that stores a user's search
> preferences (items/page, detail level, etc).  it has a search() that
> calls a static method getSearcher() that returns a static IndexSearcher
> that all these user search objects use.....searching with that gives us
> a Hits object that this user object iterates through to find out what
> categories are used, which ones to display, etc.    this hits object is
> huge.   Its fluffing up each user session by 20M in some cases.    This
> is unacceptable of course.    I am sure many have run into this issue,
> and I was curious what you did to solve it.     If I use a local
> variable to that search method, null it after I'm done and call gc(), it
> still is bad.    I can't put the hits variable into a static object or
> attribute cause of course there are multiple of these user search
> objects using it at any time.     Even if I isolated the user search
> part to a singleton, others may use it at the same time as well.      I
> imagine some sort of synchronization of that static variable is in order
> but am not quite sure.   does someone have an example of this?  I would
> image everyone has had to deal with this problem.   20M is just to big.
> When we use a profiler we find that it's a char[] that seems to be
> holding a lot of the data..like 16M of it.    For different indexes in
> different servers, this size is different, but for the most part its way
> to big everywhere.
>
>  
>
> Thoughts?  I appreciate any help on this.
>
>  
>
> Thanks
>
>  
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 17:37:28 2007
Return-Path: <java-user-return-28378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80688 invoked from network); 28 May 2007 17:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 17:37:28 -0000
Received: (qmail 81103 invoked by uid 500); 28 May 2007 17:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80061 invoked by uid 500); 28 May 2007 17:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80048 invoked by uid 99); 28 May 2007 17:37:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:37:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:37:19 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 16198500 for java-user@lucene.apache.org; Mon, 28 May 2007 19:36:56 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Does Lucene search over memory too?
Date: Mon, 28 May 2007 19:36:55 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Does Lucene search over memory too?
Thread-Index: AcehIoqbsQLZTq86QqW7tZdJ5Gm3fAALBrjw
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,=20

think you can find your answer in the IndexWriter API:

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org=
/apache/lucene/index/IndexWriter.html

The optional autoCommit argument to the constructors  controls =
visibility of the changes to IndexReader instances reading the same =
index. When this is false, changes are not visible until close() is =
called. Note that changes will still be flushed to the Directory as new =
files, but are not committed (no new segments_N file is written =
referencing the new files) until close() is called. If something goes =
terribly wrong (for example the JVM crashes) before close(), then the =
index will reflect none of the changes made (it will remain in its =
starting state). You can also call abort(), which closes the writer =
without committing any changes, and removes any index files that had =
been flushed but are now unreferenced. This mode is useful for =
preventing readers from refreshing at a bad time (for example after =
you've done all your deletes but before you've done your adds). It can =
also be used to implement simple single-writer transactional semantics =
("all or none").

Regards Ard

>=20
> Hi,
>     Does Lucene search FSDirectory as well as buffered=20
> in-memory docs while
> we are calling searcher.search(query)?
>     Why I'm asking this is, I've indexed my doc with mergeFactor &
> Max.Buff.Docs =3D 50 and I've optimized and closed it at mid-night
> only.Beforeoptimization, my search gives partial matches and it does
> not give matches
> which is in memory.
>=20
>     To get all matches (inclusive of matches in memory),what=20
> i have to do?
>     Shall I use writer.flush() to resolve this?
>=20
> Thanks in Advance
>              RSK
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 17:51:51 2007
Return-Path: <java-user-return-28379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84233 invoked from network); 28 May 2007 17:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 17:51:50 -0000
Received: (qmail 95618 invoked by uid 500); 28 May 2007 17:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95499 invoked by uid 500); 28 May 2007 17:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95484 invoked by uid 99); 28 May 2007 17:51:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:51:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 10:51:41 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id BD913223EFC
	for <java-user@lucene.apache.org>; Mon, 28 May 2007 13:51:20 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Mon, 28 May 2007 13:51:20 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id A0F2C7C4F; Mon, 28 May 2007 13:51:20 -0400 (EDT)
Message-Id: <1180374680.23199.1192167575@webmail.messagingengine.com>
X-Sasl-Enc: OpYYLK2kROySzmLZBHFwJIvhEA0bRlnr+YS7nDTyiyo7 1180374680
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl>
Subject: RE: Does Lucene search over memory too?
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl>
Date: Mon, 28 May 2007 13:51:20 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Just to clarify: the answer to the original question is "no".  The
searchers only see what's been flushed to the index directory, so,
they will not search those docs still buffered in RAM of the writer.
Calling writer.flush() and then recreating your searchers should work.

The "autoCommit" mode for IndexWriter has not actually been released
yet: you can only use it on the trunk.

It actually serves a different purpose: it allows you to make sure
your searchers do not see any changes made by the writer (even the
ones that have been flushed) until you call close.  It defaults to
autoCommit="true", which matches the current released Lucene
behavior.

Mike

"Ard Schrijvers" <a.schrijvers@hippo.nl> wrote:
> Hello, 
> 
> think you can find your answer in the IndexWriter API:
> 
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/IndexWriter.html
> 
> The optional autoCommit argument to the constructors  controls visibility
> of the changes to IndexReader instances reading the same index. When this
> is false, changes are not visible until close() is called. Note that
> changes will still be flushed to the Directory as new files, but are not
> committed (no new segments_N file is written referencing the new files)
> until close() is called. If something goes terribly wrong (for example
> the JVM crashes) before close(), then the index will reflect none of the
> changes made (it will remain in its starting state). You can also call
> abort(), which closes the writer without committing any changes, and
> removes any index files that had been flushed but are now unreferenced.
> This mode is useful for preventing readers from refreshing at a bad time
> (for example after you've done all your deletes but before you've done
> your adds). It can also be used to implement simple single-writer
> transactional semantics ("all or none").
>
> Regards Ard
> 
> > 
> > Hi,
> >     Does Lucene search FSDirectory as well as buffered 
> > in-memory docs while
> > we are calling searcher.search(query)?
> >     Why I'm asking this is, I've indexed my doc with mergeFactor &
> > Max.Buff.Docs = 50 and I've optimized and closed it at mid-night
> > only.Beforeoptimization, my search gives partial matches and it does
> > not give matches
> > which is in memory.
> > 
> >     To get all matches (inclusive of matches in memory),what 
> > i have to do?
> >     Shall I use writer.flush() to resolve this?
> > 
> > Thanks in Advance
> >              RSK
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 19:15:14 2007
Return-Path: <java-user-return-28380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10940 invoked from network); 28 May 2007 19:15:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 19:15:13 -0000
Received: (qmail 89172 invoked by uid 500); 28 May 2007 19:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88172 invoked by uid 500); 28 May 2007 19:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88157 invoked by uid 99); 28 May 2007 19:15:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 12:15:10 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJ_YOUR_OWN
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sdmonroe@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 12:15:05 -0700
Received: by an-out-0708.google.com with SMTP id b20so470699ana
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 12:14:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=VqaRWxu/U0+bCn8xMjFsTlTKHGaEHr6c0Rpz0FaNskR4RMjtDQrYlfvqnlNtCMM9ydj3L1AqGTSThU97ofFnN+26lHgzyIF6924E2d2FH8E+NUb9cg2DC1+iPbMPkzpD++/1X0jDw713hODEomcRzdwtN8hxDT/23SQdfhQk914=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=qw4tFMQyh+9ItzsSIpm9Yix2e92FGO53U0z9PN/qqXEZxU5HIhwCrgz9K8byVjRN7g3ULJF7iBY9Bb5lmb1txrNLB/P4IEP6v2DmMtZX/oVmbN1getD0forn1UfHDaYZvRrww4JDxpwtwpeVD4taDrUdMLz/PgAdZSi/wo73CBM=
Received: by 10.142.99.21 with SMTP id w21mr178578wfb.1180379670368;
        Mon, 28 May 2007 12:14:30 -0700 (PDT)
Received: by 10.143.8.16 with HTTP; Mon, 28 May 2007 12:14:29 -0700 (PDT)
Message-ID: <e23f467e0705281214m194ad47dm428930c3314ca087@mail.gmail.com>
Date: Mon, 28 May 2007 12:14:29 -0700
From: "Sherman Monroe" <smonroe@overdogg.com>
Sender: sdmonroe@gmail.com
To: smonroe@overdogg.com
Subject: overdogg.com - Start Your Own Competition!
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_24870_21272525.1180379669377"
X-Google-Sender-Auth: 373222db4204ab65
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24870_21272525.1180379669377
Content-Type: multipart/alternative; 
	boundary="----=_Part_24871_4870638.1180379669377"

------=_Part_24871_4870638.1180379669377
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Friends,

I'd like to announce the Beta release of my new service, overdogg.com - The
Buyer's Marketplace:

"overdogg is an online community centered around user-sponsored competitions
for services. overdogg pioneers the online buyer's market by developing a
Web-based community in which buyers and providers meet in an efficient and
entertaining competition-style format to fill personal and business needs.
Whether it's a homeowner needing a tree removed from their yard, the mother
needing ideas and planners for her daughter's wedding, a 13-year-old boy
searching for a lost puppy, a police investigator trying to solve a crime,
an entrepreneur posting a reward for the market data he needs, or a bachelor
needing a date for his upcoming class reunion, anyone can stage an ad-hoc
competition to enlist our millions of users across the web to help them
obtain what it is they desire."

Sign up for a free account today, and start getting what you want! Please
help spread the word, and send any feedback or comments, or leave them
here<http://www.overdogg.com/main.jsp?context=browse&header=entry_homepage&posterId=1>
.

-overdogg team

------------------------------To remove your email from this mailing list,
respond to this email with the words "I'm melting, I'm melting" in the
subject.

------=_Part_24871_4870638.1180379669377
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Friends,<br><br>I&#39;d like to announce the Beta release of my new service, <a href="http://overdogg.com/" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">overdogg.com</a> - The Buyer&#39;s Marketplace:
<br><br>&quot;overdogg is an online community centered around user-sponsored
competitions for services. overdogg pioneers the online buyer&#39;s market by developing
a Web-based community in which buyers and providers meet in an
efficient and entertaining competition-style format to fill personal
and business needs. Whether it&#39;s a homeowner needing a tree removed
from their yard, the mother needing ideas and planners for her
daughter&#39;s wedding, a 13-year-old boy searching for a lost puppy, a
police investigator trying to solve a crime, an entrepreneur posting a
reward for the market data he needs, or a bachelor needing a date for
his upcoming class reunion, anyone can stage an ad-hoc competition to
enlist our millions of users across the web to help them obtain what it
is they desire.&quot;<br><br>Sign
up for a free account today, and start getting what you want! Please
help spread the word, and send any feedback or comments, or <a href="http://www.overdogg.com/main.jsp?context=browse&amp;header=entry_homepage&amp;posterId=1" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">

leave them here</a>.<br><br>-overdogg team<br><br>------------------------------<div id="mb_0">To remove your email from this mailing list, respond to this email with the words &quot;I&#39;m melting, I&#39;m melting&quot; in the subject.
</div>

------=_Part_24871_4870638.1180379669377--


------=_Part_24870_21272525.1180379669377
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_24870_21272525.1180379669377--

From java-user-return-28381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 28 19:43:52 2007
Return-Path: <java-user-return-28381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25009 invoked from network); 28 May 2007 19:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 May 2007 19:43:50 -0000
Received: (qmail 23927 invoked by uid 500); 28 May 2007 19:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23619 invoked by uid 500); 28 May 2007 19:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 46750 invoked by uid 99); 28 May 2007 11:58:53 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of kumaranjove@gmail.com designates 64.233.184.234 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=EX3aFvqPwx948pOhhGoDDC8M90AoX0cKlCe+lFrDAV+Z0f/cXlF35fxN3R+ocYjJS5sQk85oi2lKsgY6D69phhLJHNzlwfO9kGcQ7944T3xaxm0we4jDq8Hi2MT9/ZhaEvgz1/5kPAYj03zFjqjcfEYaCxz/5fBNrZIvoE7MV60=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZGzeclpJBxSf8h3rcjSiZ4IVSFZwbK2jU7h3SKYH7ynL/Nr3KIcSZPEKo9s7GgYh1xWfyp4HFPz33iWBsHo52HcVXyYyYRiXYvtGTm0TiRONkPN6bAFsGjF8KNrhOMnB0qaPJ69Njd0xQwQqXnWMR7N2pJRNtj+tJneJzZtxl4c=
Message-ID: <21e234c60705280457p2ccf75deoe42ecaeb702ecb1e@mail.gmail.com>
Date: Mon, 28 May 2007 17:27:34 +0530
From: "senthil kumaran" <kumaranjove@gmail.com>
To: java-user@lucene.apache.org
Subject: Does Lucene search over memory too?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61888_27545484.1180353454185"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61888_27545484.1180353454185
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    Does Lucene search FSDirectory as well as buffered in-memory docs while
we are calling searcher.search(query)?
    Why I'm asking this is, I've indexed my doc with mergeFactor &
Max.Buff.Docs = 50 and I've optimized and closed it at mid-night
only.Beforeoptimization, my search gives partial matches and it does
not give matches
which is in memory.

    To get all matches (inclusive of matches in memory),what i have to do?
    Shall I use writer.flush() to resolve this?

------=_Part_61888_27545484.1180353454185--

From java-user-return-28382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 00:03:11 2007
Return-Path: <java-user-return-28382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87112 invoked from network); 29 May 2007 00:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 00:03:10 -0000
Received: (qmail 83266 invoked by uid 500); 29 May 2007 00:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82865 invoked by uid 500); 29 May 2007 00:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 93371 invoked by uid 99); 28 May 2007 22:17:59 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of tcheng3@gmail.com designates 64.233.166.180 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=mJkW7nO+oBghho5L1uoMoiOtE5liXjYaJTm8tKEcfo9lZzJeKeGWCl/6d1NwCHUmOc9ENYMf4UqCXmT8dwn9d+6sNl+g0Y100Xs8jZ0Fs+vF7mak0W8CeKeEgxzzK7IJbhcebTnHUmKLkIyB/Q1G17Gtu2hk0QzVOz2nhvTrMT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=CJt1lZGqHMSvuiohaznyHo9AZqd2wQARZFmcWes6qbU0L9nl31HOk8kF3gl8yvzMMuAk74/rmscfzwove+iE7jpEFaC0EqTBbVJ9SZHEXP7FFJhLZkanPbYZKskXNU5bEaGB6g3EVXnIHdlQ3GNCkGt3LPXKFg5eFLdKL4KX/b0=
Message-ID: <5d91badf0705281517r67db47f5ge98836e0a893b717@mail.gmail.com>
Date: Mon, 28 May 2007 17:17:30 -0500
From: "Tao Cheng" <tcheng3@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene javadoc not up-to-date?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98636_17195841.1180390650774"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_98636_17195841.1180390650774
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've encountered a few discrepcies between the javadoc of Lucene and the
source code.
I use:
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/ as
the most up-to-date javadoc reference.
For instance, the SegmentTermDocs class implements the TermDocs interface.
However, there is no information about this SegmentTermDocs class in the
javadoc.
I notice such source codes (e.g. index/SegmentTermDocs.java) are not well
commented. Perhaps that's why they are not included in the javadoc
generation?
Thanks.

-Tao

------=_Part_98636_17195841.1180390650774--

From java-user-return-28383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 00:37:54 2007
Return-Path: <java-user-return-28383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93946 invoked from network); 29 May 2007 00:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 00:37:53 -0000
Received: (qmail 16407 invoked by uid 500); 29 May 2007 00:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15993 invoked by uid 500); 29 May 2007 00:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15981 invoked by uid 99); 29 May 2007 00:37:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 17:37:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 17:37:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 534625B763; Mon, 28 May 2007 17:37:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 495697F403
	for <java-user@lucene.apache.org>; Mon, 28 May 2007 17:37:24 -0700 (PDT)
Date: Mon, 28 May 2007 17:37:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene javadoc not up-to-date?
In-Reply-To: <5d91badf0705281517r67db47f5ge98836e0a893b717@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705281736220.23716@hal.rescomp.berkeley.edu>
References: <5d91badf0705281517r67db47f5ge98836e0a893b717@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: For instance, the SegmentTermDocs class implements the TermDocs interface.
: However, there is no information about this SegmentTermDocs class in the
: javadoc.

SegmentTermDocs is a package protected class, so it's javadocs are not
exposed (it cannot be directly used by clients, so there is no reason to
advertise it's existence in the javadocs.)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 02:15:19 2007
Return-Path: <java-user-return-28384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21171 invoked from network); 29 May 2007 02:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 02:15:17 -0000
Received: (qmail 83849 invoked by uid 500); 29 May 2007 02:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83598 invoked by uid 500); 29 May 2007 02:15:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83587 invoked by uid 99); 29 May 2007 02:15:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 19:15:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 19:15:08 -0700
Received: by nz-out-0506.google.com with SMTP id x7so677720nzc
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 19:14:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i1nrBgJWsz0ScKDkGuMHTT7br6jJ6NVWoo3as/aoVO7BV5BuqojSdKx/L2zfEYE8pEMFi1Llqeb6Jn6UWJ39Z1Ueyb92UGZHd+6/W5ERfeaE9VnCPCJxpWu0SYlSO2pYnWbLcnz7+9ky/KQGmwH7NmH1PQM0k9eJPzW7SMuWllk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OtcFoChm84Jmx9iPHAQZ80UmHE/vzOTgqWz7eibYrQxVkZbhxES+GIwMvy5gens+9HNeXLNptzqRw/xp2L686pOny/Rds5rzxGEjlcgHdfp0a8U02s83sHS8DTxgb1YZ7exfoi+Q9sNEELKXWEKl870wNQxibIuS5Dld/2hDRaw=
Received: by 10.115.76.1 with SMTP id d1mr3208986wal.1180404886913;
        Mon, 28 May 2007 19:14:46 -0700 (PDT)
Received: by 10.114.255.16 with HTTP; Mon, 28 May 2007 19:14:46 -0700 (PDT)
Message-ID: <7798eaa0705281914u50f54841s84bdd274d3ded8@mail.gmail.com>
Date: Mon, 28 May 2007 23:14:46 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <c68e39170705241325x62aa9363w79f49052e9f51733@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_190084_25306959.1180404886871"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <c68e39170705241325x62aa9363w79f49052e9f51733@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_190084_25306959.1180404886871
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi again,

On 5/24/07, Yonik Seeley <yonik@apache.org> wrote:

> Currently, a deleted doc is removed when the segment containing it is
> involved in a segment  merge.  A merge could be triggered on any
> addDocument(), making it difficult to incrementally update anything.


sorry but is the document id renumbering caused by a merge visible from an
opened reader? Or can I assume that document ids are kept the same while my
searcher is opened, disregarding how many updates or optimizations happened
after its opening? This way I could regenerate my extra in-memory data
structures indexed by document id just when the searcher is reopened (say,
every 1000 updates) instead of after each update.

Thank you in advance.
Cheers,
Carlos

------=_Part_190084_25306959.1180404886871--

From java-user-return-28385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 05:39:35 2007
Return-Path: <java-user-return-28385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74126 invoked from network); 29 May 2007 05:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 05:39:33 -0000
Received: (qmail 60878 invoked by uid 500); 29 May 2007 05:39:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60821 invoked by uid 500); 29 May 2007 05:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60807 invoked by uid 99); 29 May 2007 05:39:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 22:39:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 22:39:25 -0700
Received: by an-out-0708.google.com with SMTP id b20so506138ana
        for <java-user@lucene.apache.org>; Mon, 28 May 2007 22:39:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kxL9EExg+rRPxaDcxGf0L6zjYe7/YCldvhQht3CKV9fFoSB9YW9u61WRaJAKenL01PRFQrbAH4E0PBLREJHfYtKgc6nfaGkMzsc0f5VTwvpcHV01b5EbB0nCLgMi84t9gxJXBe61Sw1kIqBBa2lMWH//2QzCZ52h6jR+7P0YUcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qvhijUWSIHaBrbNvqUJs/5Jtgb6A8St+I1nUSFVdHvSjuHp8VrrbczV1gEU6js6XaEQvKw5mG92Q7lKtCAdGXovunh4gUsnvlarpkhAUleGh9L2jZEc5Zkh6RpQ2xuTNUnzrg3x4rbCiBbEvYQccNFsJUTTB8WfFw5abp2RZ7Ks=
Received: by 10.100.171.16 with SMTP id t16mr4947837ane.1180417143714;
        Mon, 28 May 2007 22:39:03 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Mon, 28 May 2007 22:39:03 -0700 (PDT)
Message-ID: <34b8543c0705282239m6d2a186ctdf822c9d22014756@mail.gmail.com>
Date: Tue, 29 May 2007 09:09:03 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
In-Reply-To: <Pine.LNX.4.58.0705240037000.11755@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85102_18462185.1180417143642"
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>
	 <4652C220.7090505@ecomware.it>
	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>
	 <465303E2.6020802@syr.edu>
	 <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>
	 <4654747C.80005@syr.edu>
	 <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>
	 <Pine.LNX.4.58.0705240037000.11755@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85102_18462185.1180417143642
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,

>
>     * It is a Unicode space character (SPACE_SEPARATOR, LINE_SEPARATOR, or
>       PARAGRAPH_SEPARATOR) but is not also a non-breaking space ('\u00A0',
>       '\u2007', '\u202F').
>     * It is '\u0009', HORIZONTAL TABULATION.
>     * It is '\u000A', LINE FEED.
>     * It is '\u000B', VERTICAL TABULATION.
>     * It is '\u000C', FORM FEED.
>     * It is '\u000D', CARRIAGE RETURN.
>     * It is '\u001C', FILE SEPARATOR.
>     * It is '\u001D', GROUP SEPARATOR.
>     * It is '\u001E', RECORD SEPARATOR.
>     * It is '\u001F', UNIT SEPARATOR.






...are there Persian characters with a category type of SPACE_SEPARATOR,
> LINE_SEPARATOR, or PARAGRAPH_SEPARATOR ?
>
>
>
How can I know that?

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_85102_18462185.1180417143642--

From java-user-return-28386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 05:50:38 2007
Return-Path: <java-user-return-28386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77327 invoked from network); 29 May 2007 05:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 05:50:37 -0000
Received: (qmail 74299 invoked by uid 500); 29 May 2007 05:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73227 invoked by uid 500); 29 May 2007 05:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73216 invoked by uid 99); 29 May 2007 05:50:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 22:50:34 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 22:50:28 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l4T5o2SG003663
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 08:50:02 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m5t8d2dj; 29 May 2007 08:49:00 +0300
Message-ID: <465BBEB9.7080400@teamware.com>
Date: Tue, 29 May 2007 08:48:41 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Does Lucene search over memory too?
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl> <1180374680.23199.1192167575@webmail.messagingengine.com>
In-Reply-To: <1180374680.23199.1192167575@webmail.messagingengine.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 29 May 2007 08:50:02 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> The "autoCommit" mode for IndexWriter has not actually been released
> yet: you can only use it on the trunk.
> 
> It actually serves a different purpose: it allows you to make sure
> your searchers do not see any changes made by the writer (even the
> ones that have been flushed) until you call close.  It defaults to
> autoCommit="true", which matches the current released Lucene
> behavior.

I read the new IndexWriter Javadoc and I'm unclear about this autocommit.  In 
2.1, I thought an IndexReader opened in an IndexSearcher does not "see" 
additions to an index made by an IndexWriter, i.e. maxDoc and numDocs remain 
constant, so the statement

"When autoCommit is true then every flush is also a commit (IndexReader 
instances will see each flush as changes to the index). This is the default, to 
match the behavior before 2.2"

makes me wonder if my assumptions are wrong.  Can you clarify what it means by 
the IndexReader "seeing" changes to the index?

Thanks
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 06:09:40 2007
Return-Path: <java-user-return-28387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82216 invoked from network); 29 May 2007 06:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 06:09:40 -0000
Received: (qmail 92074 invoked by uid 500); 29 May 2007 06:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92029 invoked by uid 500); 29 May 2007 06:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92001 invoked by uid 99); 29 May 2007 06:09:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 23:09:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 May 2007 23:09:31 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4T699Ob336738
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 06:09:09 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4T699mf4108408
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 08:09:09 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4T6995W016469
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 08:09:09 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4T699TI016466
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 08:09:09 +0200
In-Reply-To: <465BBEB9.7080400@teamware.com>
Subject: Re: Does Lucene search over memory too?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 28 May 2007 23:07:27 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 29/05/2007 09:09:08
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman <adb@teamware.com> wrote on 28/05/2007 22:48:41:

> I read the new IndexWriter Javadoc and I'm unclear about this
> autocommit.  In
> 2.1, I thought an IndexReader opened in an IndexSearcher does not "see"
> additions to an index made by an IndexWriter, i.e. maxDoc and
> numDocs remain
> constant, so the statement
>
> "When autoCommit is true then every flush is also a commit (IndexReader
> instances will see each flush as changes to the index). This is
> the default, to
> match the behavior before 2.2"
>
> makes me wonder if my assumptions are wrong.  Can you clarify
> what it means by
> the IndexReader "seeing" changes to the index?

Antony, your assumptions were (and still are) correct - once
an index reader is opened it is unaffected by changes to the
underlying index. Would it be clearer if the javadoc said:
"(An IndexReader instance will see changes to the index caused
by flush operations that completed prior to opening that
IndexReader instance)."?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 08:45:53 2007
Return-Path: <java-user-return-28388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35077 invoked from network); 29 May 2007 08:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 08:45:51 -0000
Received: (qmail 2994 invoked by uid 500); 29 May 2007 08:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2947 invoked by uid 500); 29 May 2007 08:45:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2931 invoked by uid 99); 29 May 2007 08:45:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 01:45:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 01:45:42 -0700
Received: by nz-out-0506.google.com with SMTP id x7so742057nzc
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 01:45:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fDK91csXbrZoEW/i8sFUJIQ2SHttzdLGEqHw3O220dDVJ/crmDJOtbmOLy+riB1LTfThlejugW/RPEEAtk4ZCuj2d/AmSQZLsGulQj/WR/zcTTugNH0PwyHFN0tem8Mroo+rUbahBOdqAEZl3AyO2M6jnH5O7/uRcB2bSPjZDgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hk3s/9ZxIYYzcBxHWjI2P4D4xi8oZqBH4jklx+CR5UysgxrEilAtlzkHHSJg03iWb/FJdmu5oU817yAjOpA98DUa9KR26CrKdGwafWavUwxHsKndrt2PwzqtlCBhaqadXdvrcab2Q+3CPvmKpfkClDVKrkxJPzlD665E9hGq+qM=
Received: by 10.115.74.1 with SMTP id b1mr3309247wal.1180428320555;
        Tue, 29 May 2007 01:45:20 -0700 (PDT)
Received: by 10.114.93.18 with HTTP; Tue, 29 May 2007 01:45:20 -0700 (PDT)
Message-ID: <4628d2a90705290145y79cb868cw9f1af8272348271d@mail.gmail.com>
Date: Tue, 29 May 2007 14:15:20 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene search over memory too?
In-Reply-To: <1180374680.23199.1192167575@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_154573_12384307.1180428320448"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl>
	 <1180374680.23199.1192167575@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_154573_12384307.1180428320448
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Michael McCandless,
    Thanks a lot for this clarification.
    Calling writer.flush() before every search is the solution for my case.
But this may cause any performance issues(i.e) more time or more memory
requirement?
    Any idea about time taken for writer.flush()?

Thanks & Regards
RSK

On 5/28/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> Just to clarify: the answer to the original question is "no".  The
> searchers only see what's been flushed to the index directory, so,
> they will not search those docs still buffered in RAM of the writer.
> Calling writer.flush() and then recreating your searchers should work.
>
> The "autoCommit" mode for IndexWriter has not actually been released
> yet: you can only use it on the trunk.
>
> It actually serves a different purpose: it allows you to make sure
> your searchers do not see any changes made by the writer (even the
> ones that have been flushed) until you call close.  It defaults to
> autoCommit="true", which matches the current released Lucene
> behavior.
>
> Mike
>
> "Ard Schrijvers" <a.schrijvers@hippo.nl> wrote:
> > Hello,
> >
> > think you can find your answer in the IndexWriter API:
> >
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/IndexWriter.html
> >
> > The optional autoCommit argument to the constructors  controls
> visibility
> > of the changes to IndexReader instances reading the same index. When
> this
> > is false, changes are not visible until close() is called. Note that
> > changes will still be flushed to the Directory as new files, but are not
> > committed (no new segments_N file is written referencing the new files)
> > until close() is called. If something goes terribly wrong (for example
> > the JVM crashes) before close(), then the index will reflect none of the
> > changes made (it will remain in its starting state). You can also call
> > abort(), which closes the writer without committing any changes, and
> > removes any index files that had been flushed but are now unreferenced.
> > This mode is useful for preventing readers from refreshing at a bad time
> > (for example after you've done all your deletes but before you've done
> > your adds). It can also be used to implement simple single-writer
> > transactional semantics ("all or none").
> >
> > Regards Ard
> >
> > >
> > > Hi,
> > >     Does Lucene search FSDirectory as well as buffered
> > > in-memory docs while
> > > we are calling searcher.search(query)?
> > >     Why I'm asking this is, I've indexed my doc with mergeFactor &
> > > Max.Buff.Docs = 50 and I've optimized and closed it at mid-night
> > > only.Beforeoptimization, my search gives partial matches and it does
> > > not give matches
> > > which is in memory.
> > >
> > >     To get all matches (inclusive of matches in memory),what
> > > i have to do?
> > >     Shall I use writer.flush() to resolve this?
> > >
> > > Thanks in Advance
> > >              RSK
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_154573_12384307.1180428320448--

From java-user-return-28389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 09:38:25 2007
Return-Path: <java-user-return-28389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50849 invoked from network); 29 May 2007 09:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 09:38:24 -0000
Received: (qmail 94144 invoked by uid 500); 29 May 2007 09:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94116 invoked by uid 500); 29 May 2007 09:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94105 invoked by uid 99); 29 May 2007 09:38:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:38:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:38:16 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B1CF622887F
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 05:37:55 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 29 May 2007 05:37:55 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 93D0FB156; Tue, 29 May 2007 05:37:55 -0400 (EDT)
Message-Id: <1180431475.32057.1192266235@webmail.messagingengine.com>
X-Sasl-Enc: z+QPAHNxNJMoXwVZjGsEEuwG/g0quznWqQhbZPhDFDZl 1180431475
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
Subject: Re: Does Lucene search over memory too?
In-Reply-To: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
Date: Tue, 29 May 2007 05:37:55 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Doron Cohen" <DORONC@il.ibm.com> wrote:
> Antony Bowesman <adb@teamware.com> wrote on 28/05/2007 22:48:41:
> 
> > I read the new IndexWriter Javadoc and I'm unclear about this
> > autocommit.  In
> > 2.1, I thought an IndexReader opened in an IndexSearcher does not "see"
> > additions to an index made by an IndexWriter, i.e. maxDoc and
> > numDocs remain
> > constant, so the statement
> >
> > "When autoCommit is true then every flush is also a commit (IndexReader
> > instances will see each flush as changes to the index). This is
> > the default, to
> > match the behavior before 2.2"
> >
> > makes me wonder if my assumptions are wrong.  Can you clarify
> > what it means by
> > the IndexReader "seeing" changes to the index?
> 
> Antony, your assumptions were (and still are) correct - once
> an index reader is opened it is unaffected by changes to the
> underlying index. Would it be clearer if the javadoc said:
> "(An IndexReader instance will see changes to the index caused
> by flush operations that completed prior to opening that
> IndexReader instance)."?

Good point, it's confusing now.  I will fix IndexWriter's javadoc.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 09:46:28 2007
Return-Path: <java-user-return-28390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53315 invoked from network); 29 May 2007 09:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 09:46:27 -0000
Received: (qmail 15673 invoked by uid 500); 29 May 2007 09:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15638 invoked by uid 500); 29 May 2007 09:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15626 invoked by uid 99); 29 May 2007 09:46:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:46:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of itsadok@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:46:11 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1052106wxc
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 02:45:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=TGRjYy+HqOqL840GG0idUcE6mFVQ+LgHEtjhBLO8YMnaaPqQWDJFVuQ5wE+fa41A2pg70Y8NEKbn0F9LMGC28IObCIhsx3w1Ytxafhg8QdzJ/uMoFMnGbT4rQKHfzGTDAMNdTQMD8bkvNhMXek5eDYJQieSKIsBBvirnM8oLrFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ci59kNlKXqRZ/aANlliI+9c02AUPRNSwJsgmpHFPiAYw+nyMvkYskaZImgKMDRe3JDLDQxXscfxrYTuZ/42sxqfcxRqiPA08/asez4dYKOPwem/5pbn5tv3rYIyywTYxd6K9Hb8xmBIfAJsOLJoss5t60YQ0Hv7OjPsrEfI2Shc=
Received: by 10.90.81.14 with SMTP id e14mr4366904agb.1180431950187;
        Tue, 29 May 2007 02:45:50 -0700 (PDT)
Received: by 10.90.52.14 with HTTP; Tue, 29 May 2007 02:45:50 -0700 (PDT)
Message-ID: <b4615b180705290245o5be6285do56dbb208874d59f7@mail.gmail.com>
Date: Tue, 29 May 2007 12:45:50 +0300
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: MultiSearcher, Hits and createWeight
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_141699_32132605.1180431950153"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_141699_32132605.1180431950153
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I am developing a distributed index, using MultiSearcher and RemoteSearcher.
When investigating some performance issues, I noticed that there is a lot of
back-and-forth traffic between the servers during the weight calculation.
Although MultiSearcher has a method called createWeight that minimizes the
calls to the sub-searchers, this method never actually gets called when I
call search(query).

>From what I can tell, this is fixable by changing in Hits.java the line:
weight = q.weight(s);
to:
weight = s.createWeight(q);

I made that change, and it seems to work OK, but I don't know enough about
Lucene to be sure that it's safe.
Have I got something wrong? Is it safe to make that change?

Thanks,
Israel Tsadok

------=_Part_141699_32132605.1180431950153--

From java-user-return-28391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 09:48:24 2007
Return-Path: <java-user-return-28391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53715 invoked from network); 29 May 2007 09:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 09:48:23 -0000
Received: (qmail 23939 invoked by uid 500); 29 May 2007 09:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23912 invoked by uid 500); 29 May 2007 09:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23893 invoked by uid 99); 29 May 2007 09:48:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:48:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 02:48:12 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 15E68228A3C
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 05:47:52 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Tue, 29 May 2007 05:47:52 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id EB400B170; Tue, 29 May 2007 05:47:51 -0400 (EDT)
Message-Id: <1180432071.32736.1192266315@webmail.messagingengine.com>
X-Sasl-Enc: yk8+YwKTxP+cevnTqOnb5DLt7pdxz2JrMKNajcMzqJ6d 1180432071
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0E36@webmail.hippo.nl>
   <1180374680.23199.1192167575@webmail.messagingengine.com>
   <4628d2a90705290145y79cb868cw9f1af8272348271d@mail.gmail.com>
Subject: Re: Does Lucene search over memory too?
In-Reply-To: <4628d2a90705290145y79cb868cw9f1af8272348271d@mail.gmail.com>
Date: Tue, 29 May 2007 05:47:51 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"SK R" <rsk.sen@gmail.com> wrote:
> Hi Michael McCandless,
>     Thanks a lot for this clarification.
>     Calling writer.flush() before every search is the solution for my
>     case.
> But this may cause any performance issues(i.e) more time or more memory
> requirement?
>     Any idea about time taken for writer.flush()?

It should not increase memory usage; in fact it should decrease it
since presumably you are flushing earlier than Lucene normally would.

Time to flush also should not vary greatly since one way or another
these documents must pay the IO prices to make it to disk.

The one sizable difference is you are now creating smaller initial
segments than Lucene would normally have created.  These segments will
then require somewhat more merging which will indeed cost more
indexing time over time as the merger must now merge smaller segments
together.

However, likely this effect is neglible in your application: you
really should test the indexing time and see if it actually matters.
No need to prematurely optimize.

Also, make sure your maxBufferedDocs is <= 10X of how many docs you
typically flush otherwise you may hit this still-open issue:

    http://issues.apache.org/jira/browse/LUCENE-845

For example, don't set maxBuffereDocs to something huge (eg 1000000)
else your indexing process will do way too much merging.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 10:21:47 2007
Return-Path: <java-user-return-28392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61149 invoked from network); 29 May 2007 10:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 10:21:45 -0000
Received: (qmail 80371 invoked by uid 500); 29 May 2007 10:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80342 invoked by uid 500); 29 May 2007 10:21:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80327 invoked by uid 99); 29 May 2007 10:21:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 03:21:41 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 03:21:35 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l4TAL40h016305
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 13:21:04 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m5tdl68o; 29 May 2007 13:21:00 +0300
Message-ID: <465BFE56.6060601@teamware.com>
Date: Tue, 29 May 2007 13:20:06 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Does Lucene search over memory too?
References: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
In-Reply-To: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 29 May 2007 13:21:04 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> Antony Bowesman <adb@teamware.com> wrote on 28/05/2007 22:48:41:
> 
>> I read the new IndexWriter Javadoc and I'm unclear about this
>> autocommit.  In
>> 2.1, I thought an IndexReader opened in an IndexSearcher does not "see"
>> additions to an index made by an IndexWriter, i.e. maxDoc and
>> numDocs remain
>> constant, so the statement
>>
>> "When autoCommit is true then every flush is also a commit (IndexReader
>> instances will see each flush as changes to the index). This is
>> the default, to
>> match the behavior before 2.2"
>>
>> makes me wonder if my assumptions are wrong.  Can you clarify
>> what it means by
>> the IndexReader "seeing" changes to the index?
> 
> Antony, your assumptions were (and still are) correct - once
> an index reader is opened it is unaffected by changes to the
> underlying index. Would it be clearer if the javadoc said:
> "(An IndexReader instance will see changes to the index caused
> by flush operations that completed prior to opening that
> IndexReader instance)."?

Thanks Doron, I understood "IndexReader instance" as one that was already open, 
as it's not possible to 'open' an existing object instance, the static open() 
methods create new instances.

Your explanation clarifies things.  So, the scenario where the IndexReader sees 
changes with autocommit=true is

BEGIN
IndexWriter - open
- add documents
   - some merges/flushes occur here
   IndexReader - open
   - sees index with results of earlier merges
IndexWriter - close
END

whereas with autocommit=false, the IndexReader would see the state of the index 
at BEGIN and any merges/flushes would not show.

Perhaps the text could then be something like

"(Changes to the index caused by flush operations will be visible to an 
IndexReader when it is opened prior to closing the IndexWriter)"

It would also be worth updating the isCurrent() Javadoc to clarify its 
behaviour.  Presumably, with autocommit=false, isCurrent() will always return 
true is only using the IndexWriter to add/delete documents.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 11:23:53 2007
Return-Path: <java-user-return-28393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79797 invoked from network); 29 May 2007 11:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 11:23:52 -0000
Received: (qmail 63162 invoked by uid 500); 29 May 2007 11:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62567 invoked by uid 500); 29 May 2007 11:23:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62556 invoked by uid 99); 29 May 2007 11:23:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 04:23:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 04:23:42 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 7C53B22308E
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 07:23:21 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Tue, 29 May 2007 07:23:21 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5A886B288; Tue, 29 May 2007 07:23:21 -0400 (EDT)
Message-Id: <1180437801.9069.1192278293@webmail.messagingengine.com>
X-Sasl-Enc: INTipZ8Ii0Jao0HdC6gnwmpmVCRBV6hC9/vzjUcV2b0x 1180437801
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <OF4C797088.FD7B65B1-ON882572EA.0021006A-882572EA.0021A43C@il.ibm.com>
   <465BFE56.6060601@teamware.com>
Subject: Re: Does Lucene search over memory too?
In-Reply-To: <465BFE56.6060601@teamware.com>
Date: Tue, 29 May 2007 07:23:21 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Antony Bowesman" <adb@teamware.com> wrote:
> Doron Cohen wrote:
> > Antony Bowesman <adb@teamware.com> wrote on 28/05/2007 22:48:41:
> > 
> >> I read the new IndexWriter Javadoc and I'm unclear about this
> >> autocommit.  In
> >> 2.1, I thought an IndexReader opened in an IndexSearcher does not "see"
> >> additions to an index made by an IndexWriter, i.e. maxDoc and
> >> numDocs remain
> >> constant, so the statement
> >>
> >> "When autoCommit is true then every flush is also a commit (IndexReader
> >> instances will see each flush as changes to the index). This is
> >> the default, to
> >> match the behavior before 2.2"
> >>
> >> makes me wonder if my assumptions are wrong.  Can you clarify
> >> what it means by
> >> the IndexReader "seeing" changes to the index?
> > 
> > Antony, your assumptions were (and still are) correct - once
> > an index reader is opened it is unaffected by changes to the
> > underlying index. Would it be clearer if the javadoc said:
> > "(An IndexReader instance will see changes to the index caused
> > by flush operations that completed prior to opening that
> > IndexReader instance)."?
> 
> Thanks Doron, I understood "IndexReader instance" as one that was already open, 
> as it's not possible to 'open' an existing object instance, the static open() 
> methods create new instances.
> 
> Your explanation clarifies things.  So, the scenario where the IndexReader sees 
> changes with autocommit=true is
> 
> BEGIN
> IndexWriter - open
> - add documents
>    - some merges/flushes occur here
>    IndexReader - open
>    - sees index with results of earlier merges
> IndexWriter - close
> END
> 
> whereas with autocommit=false, the IndexReader would see the state of the index 
> at BEGIN and any merges/flushes would not show.
> 
> Perhaps the text could then be something like
> 
> "(Changes to the index caused by flush operations will be visible to an 
> IndexReader when it is opened prior to closing the IndexWriter)"

I've actually updated the javadocs to add this after the description
of autoCommit:

  Regardless of <code>autoCommit</code>, an {@link
  IndexReader} or {@link org.apache.lucene.search.IndexSearcher} will only see the
  index as of the "point in time" that it was opened.  Any
  changes committed to the index after the reader was opened
  are not visible until the reader is re-opened.

> It would also be worth updating the isCurrent() Javadoc to clarify its 
> behaviour.  Presumably, with autocommit=false, isCurrent() will always return 
> true is only using the IndexWriter to add/delete documents.

Excellent point!  I will go update isCurrent as well.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 12:54:29 2007
Return-Path: <java-user-return-28394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98949 invoked from network); 29 May 2007 12:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 12:54:29 -0000
Received: (qmail 19194 invoked by uid 500); 29 May 2007 12:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18791 invoked by uid 500); 29 May 2007 12:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18780 invoked by uid 99); 29 May 2007 12:54:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 05:54:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sprasanna199@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 05:54:20 -0700
Received: by an-out-0708.google.com with SMTP id b20so536755ana
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 05:53:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=T/gaueFc8ljdBYYi+BekPDycIQjOP0UCnq/FlaXEdXDSK07/jaD2+8SbGNlA+3n2BJfcFuXM9ArtSueiK/sPVOJmP+svi8ArKNUTQGYsmvKPhN+nESXoCWSXb77v3rtMQmLqn8hz0VCR5MnyM+3UGjnyBoj20JBn/foCikz2JGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jT2uqzu1aujA/n/S7UtihKhuIf+LHItLsvLvd8J249LQr0aTi9s6MySKi8GcI5ms5brnyRcNhj+X2v4MitJJbsTTUsqJHJZyI1HB288XTS/CSZruqbSpFanmgxFJ2KOs+dQgsfrk8ES2TyZw+hqH5g42NFaQuH4NwYTkomXrqds=
Received: by 10.100.173.19 with SMTP id v19mr5130743ane.1180443233010;
        Tue, 29 May 2007 05:53:53 -0700 (PDT)
Received: by 10.100.37.7 with HTTP; Tue, 29 May 2007 05:53:52 -0700 (PDT)
Message-ID: <3e475f5b0705290553k511bc81dse6de643035f948c8@mail.gmail.com>
Date: Tue, 29 May 2007 18:23:52 +0530
From: "Prasanna Seshadri" <sprasanna199@gmail.com>
To: java-user@lucene.apache.org
Subject: Shortest snippet in search results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_244096_7069345.1180443232970"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_244096_7069345.1180443232970
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello users,

I am right now developing an algorithm to calculate the shortest  snippet
from the search results for a given keyword of length n  (from user query).
>From the lucene source I found that there is a  method getBestFragments
which would do the same. However its very  hard to interpret the algorithm
you used for that purpose.  Therefore it would be great if you can share any
pointers to an  pseudo algorithm which would calculate the shortest snippet
from  search results so that it will be useful for me (I am planning to
implement the algorithm in scripting languages like python).

Thanks,
S.Prasanna

-- 
S.Prasanna (ME Comp Science and Engg)
http://www.pythonprasanna.com
http://blogs.sun.com/prasanna
http://www.livejournal.com/~sprasanna199

------=_Part_244096_7069345.1180443232970--

From java-user-return-28395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 13:19:15 2007
Return-Path: <java-user-return-28395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7030 invoked from network); 29 May 2007 13:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 13:19:14 -0000
Received: (qmail 73174 invoked by uid 500); 29 May 2007 13:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73144 invoked by uid 500); 29 May 2007 13:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73133 invoked by uid 99); 29 May 2007 13:19:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 06:19:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 06:19:06 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1602018uge
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 06:18:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pu8ld7D+3zEZPnBrdg4WREgOD9/5F0piY8B3kkEbokh+07OJV+906kFNjSX2AAbJ2d2BsytwPYV45DzWgUtJ1wj2rKTQaXdn2MrGSGqa4/lEFjlTy25NAVfsv9N7FNvhF/OMgx7UE8xx4uqRU3DGRiVURVxiI0nXAZyjINP7jAM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sg4RogwknDCJg5PgbFP+gbwCkl5ShvUhFPj4kunvZMqBOBgoXcLsL5iTtDNIEDeB/qh4xlzgXBOIBblVDWF0+XSoH4GZqcYTGAPq4whGEhJLNhhGSjv3Qa+qccFql/WiG8rG7Riu0Phat3xlnZ+1LF+7gJnnQOdLSMoTXmN6SLU=
Received: by 10.82.151.14 with SMTP id y14mr12547326bud.1180444724773;
        Tue, 29 May 2007 06:18:44 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 29 May 2007 06:18:44 -0700 (PDT)
Message-ID: <359a92830705290618h770189dna7b8f156839b8873@mail.gmail.com>
Date: Tue, 29 May 2007 09:18:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: maxDoc and arrays
In-Reply-To: <7798eaa0705281914u50f54841s84bdd274d3ded8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106425_17373160.1180444724730"
References: <7798eaa0705240941y5b420dd3sb2867ed86008dc19@mail.gmail.com>
	 <359a92830705241025t583bb657jbde1a1776bc1546a@mail.gmail.com>
	 <7798eaa0705241130q2258caf5rd2d5486c1f6afa66@mail.gmail.com>
	 <359a92830705241305h2aa4cd85pea7fde5b28c5213e@mail.gmail.com>
	 <7798eaa0705241314n1cb2dc9fse01404d9bc6053ec@mail.gmail.com>
	 <c68e39170705241325x62aa9363w79f49052e9f51733@mail.gmail.com>
	 <7798eaa0705281914u50f54841s84bdd274d3ded8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106425_17373160.1180444724730
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As far as I know, no changes are visible to an already-opened reader
so for the life of that reader document IDs are unchanged.

Erick

On 5/28/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> Hi again,
>
> On 5/24/07, Yonik Seeley <yonik@apache.org> wrote:
>
> > Currently, a deleted doc is removed when the segment containing it is
> > involved in a segment  merge.  A merge could be triggered on any
> > addDocument(), making it difficult to incrementally update anything.
>
>
> sorry but is the document id renumbering caused by a merge visible from an
> opened reader? Or can I assume that document ids are kept the same while
> my
> searcher is opened, disregarding how many updates or optimizations
> happened
> after its opening? This way I could regenerate my extra in-memory data
> structures indexed by document id just when the searcher is reopened (say,
> every 1000 updates) instead of after each update.
>
> Thank you in advance.
> Cheers,
> Carlos
>

------=_Part_106425_17373160.1180444724730--

From java-user-return-28396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 15:10:48 2007
Return-Path: <java-user-return-28396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59014 invoked from network); 29 May 2007 15:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 15:10:48 -0000
Received: (qmail 18412 invoked by uid 500); 29 May 2007 15:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18337 invoked by uid 500); 29 May 2007 15:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18305 invoked by uid 99); 29 May 2007 15:10:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 08:10:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.147.102.77] (HELO smtp114.plus.mail.re1.yahoo.com) (69.147.102.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 May 2007 08:10:16 -0700
Received: (qmail 50396 invoked from network); 29 May 2007 15:09:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding;
  b=DfRciO8WzUmQTRUqP4ej/cjrqkUboCHYqXPTy917G2Bpabw8ludVwLUr2Vs2+MxWiwHNVTRwcHsxOXgfBh+WPRIRvhg6y8zRQUQ6qOZyJlNw7xdxqKiyNQu5M+qsrnorlB0b6clqs0Ri6FM7qQa+KHHoZ0NnYY2peYuIAvIxNSY=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp114.plus.mail.re1.yahoo.com with SMTP; 29 May 2007 15:09:54 -0000
X-YMail-OSG: 9AYIpEMVM1kVJ5RsH_nNJsHxQydhdWdk1SUHqIa4Pq7HOsy8
Message-ID: <465C4241.1080501@yahoo.de>
Date: Tue, 29 May 2007 17:09:53 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: addding/searching documents during optimize
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am not sure, so i need ur opinion to these 2 questions:

Is it save to search an index while its beeing optimized by another java 
process?

Is it save to add documents to an index while its beeing optimized by 
another java process?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 15:38:03 2007
Return-Path: <java-user-return-28397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70443 invoked from network); 29 May 2007 15:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 15:38:02 -0000
Received: (qmail 3467 invoked by uid 500); 29 May 2007 15:38:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3421 invoked by uid 500); 29 May 2007 15:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3391 invoked by uid 99); 29 May 2007 15:38:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 08:38:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 08:37:54 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1636269uge
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 08:37:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ShSb33wpu+GBXKZl0jmF0DMWY8B7aHuMtEy+giBfbifETBZfdpcrurWlFmJqzI2otNC4137qIiIekUh1QDneRMP+5OQk3hd8+VgzKpwPKTlpGIlTbBCuGbHta1CiLzTRewkpWuHo/TjP4uSrgS0A6QITJEKo+aNJa3XYZ5ErM3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=f+ZnEAHEp+jGbjk7CFTNkUXZVva02T8nwiZ42S5LkFIvxyyjCOQsLfBfavhwjoFWD6/0qz1dxX/zIIetspzVr9RPIHotvrjj+DCPHqPhA6D45xZMAtC/8XnGgMugzDcE3So4ika3rdYdnhN1WD+A2N6yxZ1vvk+jMpI69cKoIVE=
Received: by 10.82.123.16 with SMTP id v16mr12848830buc.1180453051015;
        Tue, 29 May 2007 08:37:31 -0700 (PDT)
Received: by 10.82.118.10 with HTTP; Tue, 29 May 2007 08:37:30 -0700 (PDT)
Message-ID: <f81fa4180705290837m7c41d934ubbece3bd9ce968da@mail.gmail.com>
Date: Tue, 29 May 2007 11:37:30 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Is it possible to do near terms without using phrase slop in query parser syntax?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've got a field that is indexing people names.  The field is
multivalued and I'm using Solr with a positionIncrementGap of 100.

I've found that trying to specify a near query using something like:
actor_name_mv:"Foster, Jody"~2
matches "Foster, Jody" with a tf score of 1, but it matches "Jody
Foster" with a tf score of .577  The phraseFreq in the first case is 1
and the phraseFreq in the second is 1/3.

For this particular case, I would like the scores for these two cases
to be the same. Is that possible?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 15:43:41 2007
Return-Path: <java-user-return-28398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71953 invoked from network); 29 May 2007 15:43:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 15:43:40 -0000
Received: (qmail 17622 invoked by uid 500); 29 May 2007 15:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17332 invoked by uid 500); 29 May 2007 15:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17321 invoked by uid 99); 29 May 2007 15:43:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 08:43:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 08:43:31 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1Ht3qn-0005IN-A9
	for java-user@lucene.apache.org; Tue, 29 May 2007 17:43:09 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EM+XXH1SSmKF for <java-user@lucene.apache.org>;
	Tue, 29 May 2007 17:42:58 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1Ht3kq-0004Z4-PX
	for java-user@lucene.apache.org; Tue, 29 May 2007 17:37:00 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <KSS1GAK4>; Tue, 29 May 2007 17:37:00 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526AE@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Modifying StandardAnalyzer so that it also splits words after pun
	ctuation characters that are not followed by whitespace
Date: Tue, 29 May 2007 17:36:53 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi folks!

The topic says it all: I want to modify the StandardAnalyzer so that it =
also
splits words after punctuation characters (.,: etc.) that are NOT =
followed
by a whitespace character, in addition to punctuation characters that =
ARE
followed by whitespace.

Of course i've looked at StandardTokenizer.jj, but I don't quite get =
it. The
recursive nature of the grammar bends my mind.

Can someone smarter than me help here? I'd be most thankful!
Regards,


Michael


--=20
Michael B=F6ckling
Java Engineer
dmc digital media center GmbH=20
Rommelstra=DFe 11=20
70376 Stuttgart (Germany)=20
Telefon: +49 711 601747-0
Telefax: +49 711 601747-141=20
E-Mail: Michael.Boeckling@dmc.de=20
Internet: www.dmc.de=20

Handelsregister: AG Stuttgart HRB 18974
Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend

---------------------------------------------
Besseres E-Business.
dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. =
Seit
=FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden =
z=E4hlen
neckermann.de, Kodak und Telekom Training.

dmc auf Platz 8 im aktuellen New Media Service Ranking.
Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir =
mit einem
Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
Dienstleister in Deutschland.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 16:19:50 2007
Return-Path: <java-user-return-28399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89188 invoked from network); 29 May 2007 16:19:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 16:19:49 -0000
Received: (qmail 91932 invoked by uid 500); 29 May 2007 16:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91894 invoked by uid 500); 29 May 2007 16:19:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91883 invoked by uid 99); 29 May 2007 16:19:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 09:19:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 09:19:40 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: synchronize hits variable?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 29 May 2007 11:18:42 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B294976C8@bettylou.configureone.net>
In-Reply-To: <465B0762.80908@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: synchronize hits variable?
Thread-Index: AcehR8tTxG15U3i0R7+SV/sqktxcvAAxLIUg
References: <685348.93495.qm@web50301.mail.re2.yahoo.com> <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net> <465B0762.80908@gmail.com>
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

If I need all the documents returned by the query to to the Hits object,
does a hitcollector work?   =20

I take it that each time I Hits.doc(i) I get the full document; so if
that's the problem, can I just get all of the single column I need for
all those docs?

Size: the directory I'm dealing with on a windowsXP machine is 5M.   how
can I be getting 20M Hits variable?  =20

I've looked in the LIA book and it seems to forloop through all the hits
just like I am doing.  =20

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Monday, May 28, 2007 11:46 AM
To: java-user@lucene.apache.org
Subject: Re: synchronize hits variable?

You do not want to be using Hits. Frankly, the way pagination should=20
normally be done, Hits caching means almost nobody really wants to be=20
using Hits, but in your case it's even worse. Look into a Hit collector=20
-- not only are you caching every single document in your search=20
results, but you are re-querying many times for a single query by=20
running through all of the result in Hits! I don't have the time at the=20
moment to explain further (I am sure someone else will) but you need to=20
drop Hits like a bad habit and look into HitCollector.

- Mark

John Powers wrote:
> Thanks for the response.  Its definitely the user search object's
> search().   I have to iterate through all the hits that come back to
get
> all the categories used in the results, so the number that hits gets
> really doesn't matter--ill need them all.    =20
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
> Sent: Sunday, May 27, 2007 10:26 PM
> To: java-user@lucene.apache.org
> Subject: Re: synchronize hits variable?
>
> Hi John,
>
> 20M sounds suspicious.  Without seeing the code, it's hard to tell.
My
> guess is the problem lies elsewhere or some piece of Lucene is being
> incorrectly used.  Or maybe your Lucene Documents are just very large.
> Are they?  You could go modify Hits source and change the number of
hits
> that Hits instance loads.  I think it caches either 100 or 200
(haven't
> looked at it in a while).  There is no API for changing it, so you
could
> change it in the sources, recompile, redeploy, and see if that helps
> you.
>
> Otis
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: John Powers <jpowers@configureone.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, May 27, 2007 9:17:59 PM
> Subject: synchronize hits variable?
>
> In a j2ee webapp we have a search object that stores a user's search
> preferences (items/page, detail level, etc).  it has a search() that
> calls a static method getSearcher() that returns a static
IndexSearcher
> that all these user search objects use.....searching with that gives
us
> a Hits object that this user object iterates through to find out what
> categories are used, which ones to display, etc.    this hits object
is
> huge.   Its fluffing up each user session by 20M in some cases.
This
> is unacceptable of course.    I am sure many have run into this issue,
> and I was curious what you did to solve it.     If I use a local
> variable to that search method, null it after I'm done and call gc(),
it
> still is bad.    I can't put the hits variable into a static object or
> attribute cause of course there are multiple of these user search
> objects using it at any time.     Even if I isolated the user search
> part to a singleton, others may use it at the same time as well.
I
> imagine some sort of synchronization of that static variable is in
order
> but am not quite sure.   does someone have an example of this?  I
would
> image everyone has had to deal with this problem.   20M is just to
big.
> When we use a profiler we find that it's a char[] that seems to be
> holding a lot of the data..like 16M of it.    For different indexes in
> different servers, this size is different, but for the most part its
way
> to big everywhere.
>
> =20
>
> Thoughts?  I appreciate any help on this.
>
> =20
>
> Thanks
>
> =20
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:05:50 2007
Return-Path: <java-user-return-28400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16540 invoked from network); 29 May 2007 17:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:05:49 -0000
Received: (qmail 6914 invoked by uid 500); 29 May 2007 17:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6746 invoked by uid 500); 29 May 2007 17:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6735 invoked by uid 99); 29 May 2007 17:05:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:05:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:05:40 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163E73A6@mailer.syr.edu>; Tue, 29 May 2007 13:05:19 -0400
Message-ID: <465C5D10.6050202@syr.edu>
Date: Tue, 29 May 2007 13:04:16 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: WhitespaceAnalyzer [was: Re: regaridng Reader.terms()]
References: <34b8543c0705220229v362aa368je4a1ce8633a60ff5@mail.gmail.com>	 <4652C220.7090505@ecomware.it>	 <34b8543c0705220318i2acd86f3y210dede1960ea5a5@mail.gmail.com>	 <465303E2.6020802@syr.edu>	 <34b8543c0705222238x3536464enec89a65969fdc7a8@mail.gmail.com>	 <4654747C.80005@syr.edu>	 <34b8543c0705232232o4423bfe4qb055b9c658b1ebb0@mail.gmail.com>	 <Pine.LNX.4.58.0705240037000.11755@hal.rescomp.berkeley.edu> <34b8543c0705282239m6d2a186ctdf822c9d22014756@mail.gmail.com>
In-Reply-To: <34b8543c0705282239m6d2a186ctdf822c9d22014756@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mohammad,

Mohammad Norouzi wrote:
> [Hoss wrote:]
>> ...are there Persian characters with a category type of SPACE_SEPARATOR,
>> LINE_SEPARATOR, or PARAGRAPH_SEPARATOR ?
> 
> How can I know that?

The Unicode standard's codes[1] for these are:

   SPACE SEPARATOR: Zs
   LINE SEPARATOR: Zl
   PARAGRAPH SEPARATOR: Zp

>From <http://www.unicode.org/Public/4.0-Update/PropList-4.0.0.txt>, the
only characters with these properties are:

   0020       ; White_Space # Zs    SPACE
   00A0       ; White_Space # Zs    NO-BREAK SPACE
   1680       ; White_Space # Zs    OGHAM SPACE MARK
   180E       ; White_Space # Zs    MONGOLIAN VOWEL SEPARATOR
   2000..200A ; White_Space # Zs    EN QUAD..HAIR SPACE
   200B       ; Other_Default_Ignorable_Code_Point # Zs ZERO WIDTH SPACE
   2028       ; White_Space # Zl    LINE SEPARATOR
   2029       ; White_Space # Zp    PARAGRAPH SEPARATOR
   202F       ; White_Space # Zs    NARROW NO-BREAK SPACE
   205F       ; White_Space # Zs    MEDIUM MATHEMATICAL SPACE
   3000       ; White_Space # Zs    IDEOGRAPHIC SPACE

Modern Persian uses Arabic orthography with four additional letters[2]
-- peh, tcheh, jeh, and gaf -- all of which are included in the Unicode
basic Arabic character set.

The Arabic Unicode character ranges are:

   [U+0600 - U+06FF] <http://www.unicode.org/charts/PDF/U0600.pdf>
   [U+0750 - U+077F] <http://www.unicode.org/charts/PDF/U0750.pdf>
   [U+FB50 - U+FC3F] <http://www.unicode.org/charts/PDF/UFB50.pdf>
   [U+FE70 - U+FEFF] <http://www.unicode.org/charts/PDF/UFE70.pdf>

The intersection of the sets { all Arabic characters } and { all Unicode
whitespace characters } is the null set.  Thus, it appears, there are no
Arabic-specific (and hence Persian-specific) whitespace characters in
the Unicode standard.

Steve

[1] Unicode 4.0.0 Character Database - Property value codes:
<http://www.unicode.org/Public/4.0-Update/UCD-4.0.0.html#Property_Values>
[2] http://en.wikipedia.org/wiki/Persian_alphabet

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:30:06 2007
Return-Path: <java-user-return-28401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25468 invoked from network); 29 May 2007 17:30:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:30:05 -0000
Received: (qmail 59293 invoked by uid 500); 29 May 2007 17:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59266 invoked by uid 500); 29 May 2007 17:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59245 invoked by uid 99); 29 May 2007 17:29:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:29:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:29:49 -0700
Received: by an-out-0708.google.com with SMTP id b20so593331ana
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 10:29:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=K8fwHj3AdVvVFkQkK6r6V5UX/Bilaoi1/KXjhiiminSnevN77d8j9RH+GLieB2JbEILAga/r3IFJHI+R7KJxH6ZGjzkqoOOtDDGMKs7bURsghIuNKV1L3H9tT9z6LSMKkwKwu7oT/FReJ9mjKwQuK4HE5BgMq5GNa92wWMNxv+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BHqLGcZjQsasoiIfnhcUgc1isT7/hD4R5ufOiZuLnvV+q3dRM+GcYrqSFTzPvCliHBJq/ShjqMxZZjCYvqMTV3plMaSsNzX0I4KQlx7/M8tHqYVqgbIAzw1Xh6KddJHsxq8FxVRtJSicw1ZbOhVZcDp5TvnUHd0heDQ+mQu+8hM=
Received: by 10.115.59.4 with SMTP id m4mr3499425wak.1180459762559;
        Tue, 29 May 2007 10:29:22 -0700 (PDT)
Received: by 10.114.255.16 with HTTP; Tue, 29 May 2007 10:29:22 -0700 (PDT)
Message-ID: <7798eaa0705291029r21bd06b3v4a3ab1c5c3917b87@mail.gmail.com>
Date: Tue, 29 May 2007 14:29:22 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: (Sort of) transactional behavior
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_202905_18309846.1180459762522"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_202905_18309846.1180459762522
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I have a searcher and a writer, the writer writes N changes, then the
searcher is reopened to reflect them. Depending on whether autoCommit is
false or true for the writer it could have to be closed after the N-changes
batch too, just to make visible the flushed changes. But suppose for now
that autoCommit=true (classic behaviour).

The index itself references external documents by id, when these documents
are added or changed a correspondent update in the index takes place. The
external documents have a couple of timestamps indicating one the date of
the last document change and the other the last time the document was
indexed. Of course, if the first timestamp is newer than the second one, the
index must be updated for that document. If and only if this update is
successfully carried on, the indexed timestamp has to be updated, that is to
mark the document as indexed.

The point is that I don't know how to ensure that the index update is in
fact persisted to disk except by flushing after every M changes by myself.
Also, if there were some callback mechanism by which my app could be told of
flush events, I would update the timestamps just for the effectively flushed
documents; but I'm not aware of such feedback mechanism. Then, it's still
another history with autoCommit=true, because I know changes are not
committed before the index is closed, this could be a beginning but I still
don't know if that close operation is in fact atomic.

What do you suggest?

Thank you in advance.
Regards,
Carlos

------=_Part_202905_18309846.1180459762522--

From java-user-return-28402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:35:40 2007
Return-Path: <java-user-return-28402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27096 invoked from network); 29 May 2007 17:35:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:35:39 -0000
Received: (qmail 70557 invoked by uid 500); 29 May 2007 17:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70201 invoked by uid 500); 29 May 2007 17:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70190 invoked by uid 99); 29 May 2007 17:35:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:35:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:35:30 -0700
Received: by nf-out-0910.google.com with SMTP id d3so5701nfc
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 10:35:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KFYaHcyyLqwtd2bNVGKAn9QxJcnrpxahqNk3ZOPrO5la2hGCTTAxNWHGnfhLQ8rbs2eRohMvKHrZI9NRYg+B0kKfD/TKTRtKUFzy8CDzvi4pIgKDG8HMt77MdcsDUENFvv1Ms+/57bOjtL/Og+kPpkP2g9ofWizdLi0ItibIyMw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MlS3owgdkr2wVKM2GIpcE7elnLkZN3tA0+sKeKYPPav4aE4coJld8XJahVci8U3Gr4iK1gGlPRxEkLj7hMkLd+o41ewBq6dTgWgrMF38W43iUDXQQBPmyGjAAfRJL6GwNlY+/J3UiX9OJtJW+H8NxERR5y+9HlhSyTJIxYDGEhg=
Received: by 10.82.113.6 with SMTP id l6mr13051024buc.1180460107635;
        Tue, 29 May 2007 10:35:07 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 29 May 2007 10:35:07 -0700 (PDT)
Message-ID: <359a92830705291035i425d3bc5g97b0a342aef28c4a@mail.gmail.com>
Date: Tue, 29 May 2007 13:35:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer so that it also splits words after pun ctuation characters that are not followed by whitespace
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526AE@fafnir.intra.dmc.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109281_16738970.1180460107603"
References: <F60407925D044842B7E21677C8B8CE2818C526AE@fafnir.intra.dmc.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109281_16738970.1180460107603
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, one possibility is to do something simpler. Rather than
modifying StandardAnalyzer, modify the input stream. That is,
substitute spaces for punctuation NOT followed by whitespace
and then just let the analyzer handle the result.

For that matter, if you're going to alter the input stream
before giving it to the analyzer, you can then use pretty
simple analyzers unless you need some of the
other characteristics of StandardAnalyzer....

Or not....

Erick

On 5/29/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
>
> Hi folks!
>
> The topic says it all: I want to modify the StandardAnalyzer so that it
> also
> splits words after punctuation characters (.,: etc.) that are NOT followe=
d
> by a whitespace character, in addition to punctuation characters that ARE
> followed by whitespace.
>
> Of course i've looked at StandardTokenizer.jj, but I don't quite get it.
> The
> recursive nature of the grammar bends my mind.
>
> Can someone smarter than me help here? I'd be most thankful!
> Regards,
>
>
> Michael
>
>
> --
> Michael B=F6ckling
> Java Engineer
> dmc digital media center GmbH
> Rommelstra=DFe 11
> 70376 Stuttgart (Germany)
> Telefon: +49 711 601747-0
> Telefax: +49 711 601747-141
> E-Mail: Michael.Boeckling@dmc.de
> Internet: www.dmc.de
>
> Handelsregister: AG Stuttgart HRB 18974
> Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend
>
> ---------------------------------------------
> Besseres E-Business.
> dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. Seit
> =FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
> erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden z=E4=
hlen
> neckermann.de, Kodak und Telekom Training.
>
> dmc auf Platz 8 im aktuellen New Media Service Ranking.
> Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir mit=
 einem
> Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
> Dienstleister in Deutschland.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_109281_16738970.1180460107603--

From java-user-return-28403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:36:03 2007
Return-Path: <java-user-return-28403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27347 invoked from network); 29 May 2007 17:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:36:01 -0000
Received: (qmail 73563 invoked by uid 500); 29 May 2007 17:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73530 invoked by uid 500); 29 May 2007 17:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73518 invoked by uid 99); 29 May 2007 17:35:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:35:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:35:46 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4THZOKp160576
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 17:35:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4THZO8I1249406
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 19:35:24 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4THZOR4030865
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 19:35:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4THZOZ8030856
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 19:35:24 +0200
Subject: Fw: About Lucene-patch-446
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF8465B49C.B9F875B3-ON882572EA.005E7C52-882572EA.006063FF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 29 May 2007 10:32:50 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 29/05/2007 20:35:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


---------------------------------------------
taking theis discussion back to the user list
---------------------------------------------

"Huajing Li" wrote on 29/05/2007:

> Hi Doron,
>
> Days ago I published a post in the Lucene user maillist asking
> about merging database data with Lucene queries. You pointed
> out that ValueSourceQuery and CustomScoreQuery can be used to
> achieve this end.
> However, I checked the web page of the Lucene patch (446) and
> found no source codes about these two classes. Would you please
> help me to point out the location of the codes?

Hi Haujing,

I just checked the recent patch in LUCENE-446 and it does
contain the CustomScoreQuery class - perhaps you were
looking at an older version of that patch? The latest one
is "function.patch.txt" dated 05/May/2007, size 93KB. Note
that there are two patch files there by this name, but
the outdated one is grayed out.

> Meanwhile, as I
> was reading the class ValueSource, I found the
> getValues(IndexReader reader) method has to be linked with an
> IndexReader. Correct me if I am wrong. Does this mean that the
> value source has to be somewhere in the index?

getValues() accepts an IndexReader and the provided
implementations in fact read values from the index.
But your implementation can choose to not read values
from the index but rather from a database. You would
probably at least use the reader to verify that it refers
to an "index version" that matches the external (db)
values used as value source.

In LUCENE-446 there's a link to javadocs for this feature,
in particular see the package docs for search.function.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:37:12 2007
Return-Path: <java-user-return-28404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28012 invoked from network); 29 May 2007 17:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:37:11 -0000
Received: (qmail 81144 invoked by uid 500); 29 May 2007 17:37:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81103 invoked by uid 500); 29 May 2007 17:37:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81092 invoked by uid 99); 29 May 2007 17:37:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:37:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:37:02 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2002696muf
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 10:36:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uPaCtGeQckZBR0GQUOkCjMzaWKW52ntdwItpYk8c3ild073mpkNKJYSMsX5g5v8JIDPOUTJBB1yskSJiOVmGMKEEq9ydpIUpOxBkPfphZmtBLnwQmV5NK7ApMHXH+GvBr1BFzTw+vDZ1KZXDDN4ZpFdi/pGT0ezbNZQCZWl+pmk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aUBhb/vLNZ6PUKNhITJSYD/meLDmLOSQLm0xi1YBbS/Z9nsmvfjOK2LVJ/kT9ceuGNg0NTVC0d696su2353otFZFjQvGrdINUBPCFb5LaE9aHD5L8fpZT8pehVXSD3k36EXZ+p+Ycf80wT2kmhVOBHTOCrAQrGBIzR6vXp/F0a4=
Received: by 10.82.177.3 with SMTP id z3mr13008124bue.1180460196126;
        Tue, 29 May 2007 10:36:36 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 29 May 2007 10:36:35 -0700 (PDT)
Message-ID: <359a92830705291036o4ec08728ge6e0d13e6b1c9d61@mail.gmail.com>
Date: Tue, 29 May 2007 13:36:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: synchronize hits variable?
In-Reply-To: <F9E303076B72074AB76B2C8F78952B294976C8@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109305_3188538.1180460195984"
References: <685348.93495.qm@web50301.mail.re2.yahoo.com>
	 <F9E303076B72074AB76B2C8F78952B2949762F@bettylou.configureone.net>
	 <465B0762.80908@gmail.com>
	 <F9E303076B72074AB76B2C8F78952B294976C8@bettylou.configureone.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109305_3188538.1180460195984
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Except pay heed to the documentation that says something
about calling IndexReader.doc() inside the loop is expensive. Although
lazy loading is, I think, designed to help with this....

Erick

On 5/29/07, John Powers <jpowers@configureone.com> wrote:
>
> If I need all the documents returned by the query to to the Hits object,
> does a hitcollector work?
>
> I take it that each time I Hits.doc(i) I get the full document; so if
> that's the problem, can I just get all of the single column I need for
> all those docs?
>
> Size: the directory I'm dealing with on a windowsXP machine is 5M.   how
> can I be getting 20M Hits variable?
>
> I've looked in the LIA book and it seems to forloop through all the hits
> just like I am doing.
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Monday, May 28, 2007 11:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: synchronize hits variable?
>
> You do not want to be using Hits. Frankly, the way pagination should
> normally be done, Hits caching means almost nobody really wants to be
> using Hits, but in your case it's even worse. Look into a Hit collector
> -- not only are you caching every single document in your search
> results, but you are re-querying many times for a single query by
> running through all of the result in Hits! I don't have the time at the
> moment to explain further (I am sure someone else will) but you need to
> drop Hits like a bad habit and look into HitCollector.
>
> - Mark
>
> John Powers wrote:
> > Thanks for the response.  Its definitely the user search object's
> > search().   I have to iterate through all the hits that come back to
> get
> > all the categories used in the results, so the number that hits gets
> > really doesn't matter--ill need them all.
> >
> > -----Original Message-----
> > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > Sent: Sunday, May 27, 2007 10:26 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: synchronize hits variable?
> >
> > Hi John,
> >
> > 20M sounds suspicious.  Without seeing the code, it's hard to tell.
> My
> > guess is the problem lies elsewhere or some piece of Lucene is being
> > incorrectly used.  Or maybe your Lucene Documents are just very large.
> > Are they?  You could go modify Hits source and change the number of
> hits
> > that Hits instance loads.  I think it caches either 100 or 200
> (haven't
> > looked at it in a while).  There is no API for changing it, so you
> could
> > change it in the sources, recompile, redeploy, and see if that helps
> > you.
> >
> > Otis
> > . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> > Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
> >
> > ----- Original Message ----
> > From: John Powers <jpowers@configureone.com>
> > To: java-user@lucene.apache.org
> > Sent: Sunday, May 27, 2007 9:17:59 PM
> > Subject: synchronize hits variable?
> >
> > In a j2ee webapp we have a search object that stores a user's search
> > preferences (items/page, detail level, etc).  it has a search() that
> > calls a static method getSearcher() that returns a static
> IndexSearcher
> > that all these user search objects use.....searching with that gives
> us
> > a Hits object that this user object iterates through to find out what
> > categories are used, which ones to display, etc.    this hits object
> is
> > huge.   Its fluffing up each user session by 20M in some cases.
> This
> > is unacceptable of course.    I am sure many have run into this issue,
> > and I was curious what you did to solve it.     If I use a local
> > variable to that search method, null it after I'm done and call gc(),
> it
> > still is bad.    I can't put the hits variable into a static object or
> > attribute cause of course there are multiple of these user search
> > objects using it at any time.     Even if I isolated the user search
> > part to a singleton, others may use it at the same time as well.
> I
> > imagine some sort of synchronization of that static variable is in
> order
> > but am not quite sure.   does someone have an example of this?  I
> would
> > image everyone has had to deal with this problem.   20M is just to
> big.
> > When we use a profiler we find that it's a char[] that seems to be
> > holding a lot of the data..like 16M of it.    For different indexes in
> > different servers, this size is different, but for the most part its
> way
> > to big everywhere.
> >
> >
> >
> > Thoughts?  I appreciate any help on this.
> >
> >
> >
> > Thanks
> >
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_109305_3188538.1180460195984--

From java-user-return-28405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 17:55:07 2007
Return-Path: <java-user-return-28405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33686 invoked from network); 29 May 2007 17:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 17:55:06 -0000
Received: (qmail 20135 invoked by uid 500); 29 May 2007 17:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20103 invoked by uid 500); 29 May 2007 17:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20084 invoked by uid 99); 29 May 2007 17:55:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:55:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 10:54:58 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.163E78E1@mailer.syr.edu>; Tue, 29 May 2007 13:54:38 -0400
Message-ID: <465C689E.2080004@syr.edu>
Date: Tue, 29 May 2007 13:53:34 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer so that it also splits words after
 pun	ctuation characters that are not followed by whitespace
References: <F60407925D044842B7E21677C8B8CE2818C526AE@fafnir.intra.dmc.de>
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526AE@fafnir.intra.dmc.de>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

Michael Bckling wrote:
> Hi folks!
> 
> The topic says it all: I want to modify the StandardAnalyzer so that it also
> splits words after punctuation characters (.,: etc.) that are NOT followed
> by a whitespace character, in addition to punctuation characters that ARE
> followed by whitespace.
> 
> Of course i've looked at StandardTokenizer.jj, but I don't quite get it. The
> recursive nature of the grammar bends my mind.
> 
> Can someone smarter than me help here?

Um, that probably disqualifies me, but anyway...

There are several regexes in StandardTokenizer.jj that generate tokens
containing punctuation.  You should be able to selectively comment them
out to achieve what you want:

1. Acronyms:

  | <ACRONYM: <ALPHA> "." (<ALPHA> ".")+ >

2. Company names:

  | <COMPANY: <ALPHA> ("&"|"@") <ALPHA> >

3. Email addresses:

  | <EMAIL: <ALPHANUM> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM>
    (("."|"-") <ALPHANUM>)+ >

4. Hostnames:

  | <HOST: <ALPHANUM> ("." <ALPHANUM>)+ >

5. The <NUM>, <P> and <HAS_DIGIT> regexes, for IP addresses, etc.:

  | <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
         | <HAS_DIGIT> <P> <ALPHANUM>
         | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
         | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
         | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
         | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
          )
    >
  | <#P: ("_"|"-"|"/"|"."|",") >
  | <#HAS_DIGIT:		  // at least one digit
    (<LETTER>|<DIGIT>)*
    <DIGIT>
    (<LETTER>|<DIGIT>)*
    >


Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 18:13:27 2007
Return-Path: <java-user-return-28406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41555 invoked from network); 29 May 2007 18:13:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 18:13:25 -0000
Received: (qmail 72922 invoked by uid 500); 29 May 2007 18:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72879 invoked by uid 500); 29 May 2007 18:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72866 invoked by uid 99); 29 May 2007 18:13:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 11:13:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 11:13:10 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 819D9226540
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 14:12:49 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 29 May 2007 14:12:49 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5588EBD3A; Tue, 29 May 2007 14:12:49 -0400 (EDT)
Message-Id: <1180462369.25281.1192358401@webmail.messagingengine.com>
X-Sasl-Enc: 526zQxHB7RaiE8NOy3TDlcDHf9JrlfEAx38NhMft+Jwo 1180462369
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <7798eaa0705291029r21bd06b3v4a3ab1c5c3917b87@mail.gmail.com>
Subject: Re: (Sort of) transactional behavior
In-Reply-To: <7798eaa0705291029r21bd06b3v4a3ab1c5c3917b87@mail.gmail.com>
Date: Tue, 29 May 2007 14:12:49 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Carlos Pita" <carlosjosepita@gmail.com> wrote:

> I have a searcher and a writer, the writer writes N changes, then the
> searcher is reopened to reflect them. Depending on whether autoCommit is
> false or true for the writer it could have to be closed after the N-changes
> batch too, just to make visible the flushed changes. But suppose for now
> that autoCommit=true (classic behaviour).
> 
> The index itself references external documents by id, when these documents
> are added or changed a correspondent update in the index takes place. The
> external documents have a couple of timestamps indicating one the date of
> the last document change and the other the last time the document was
> indexed. Of course, if the first timestamp is newer than the second one, the
> index must be updated for that document. If and only if this update is
> successfully carried on, the indexed timestamp has to be updated, that is to
> mark the document as indexed.
> 
> The point is that I don't know how to ensure that the index update is in
> fact persisted to disk except by flushing after every M changes by myself.
> Also, if there were some callback mechanism by which my app could be told of
> flush events, I would update the timestamps just for the effectively flushed
> documents; but I'm not aware of such feedback mechanism. Then, it's still
> another history with autoCommit=true, because I know changes are not
> committed before the index is closed, this could be a beginning but I still
> don't know if that close operation is in fact atomic.

I think this may work: if you leave autoCommit=true, and set your
maxBufferedDocs to M, then you could keep a separate counter and after
every M'th addDocument call you then "commit" your timestamp (ie
update the "last indexed timestamp").

If you set autoCommit=false, then you do the same logic but you run it
instead after writer.close() has been successfully called.  Using
autoCommit=false allows you to do "all or none" for all of your N
added docs, if that's important.

Both flush and close are atomic in the sense that either all or none
of the docs will have been added to the index.  Note however that if
an exception is hit during these, it's still possible that all docs
were added (this can happen when the exception is hit during merging
that happens after the buffered documents are flushed to disk).

Or you could be simpler and just wait until all N docs are done in
either case, then commit the indexed timestamps, on the assumption
that it's OK if docs get accidentally reindexed?

But realize Lucene is only as good as the JVM & IO subsystem under it.
For example, if the machine crashes but there were writes "in flight"
in a write cache somewhere that didn't actually make it to physical
storage then even though the close() or flush() returned successfully,
some changes will have been lost (and likely the index will be
corrupt).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 19:52:09 2007
Return-Path: <java-user-return-28407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95766 invoked from network); 29 May 2007 19:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 19:52:07 -0000
Received: (qmail 13111 invoked by uid 500); 29 May 2007 19:52:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13071 invoked by uid 500); 29 May 2007 19:52:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13060 invoked by uid 99); 29 May 2007 19:52:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 12:52:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 12:51:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5CE595B76C; Tue, 29 May 2007 12:51:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 553317F403
	for <java-user@lucene.apache.org>; Tue, 29 May 2007 12:51:38 -0700 (PDT)
Date: Tue, 29 May 2007 12:51:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Is it possible to do near terms without using phrase slop in
 query parser syntax?
In-Reply-To: <f81fa4180705290837m7c41d934ubbece3bd9ce968da@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705291247410.25646@hal.rescomp.berkeley.edu>
References: <f81fa4180705290837m7c41d934ubbece3bd9ce968da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I've found that trying to specify a near query using something like:
: actor_name_mv:"Foster, Jody"~2
: matches "Foster, Jody" with a tf score of 1, but it matches "Jody
: Foster" with a tf score of .577  The phraseFreq in the first case is 1
: and the phraseFreq in the second is 1/3.

as i recall, phraseFreq is passed to the tf(float) function of your
similarity, you can get differnet behavior between the tf() for phrase
queries and simple term queries by having different tf impls for tf(float)
- used for phrases; and tf(int) - used for terms.  by default, tf(int)
calls tf(float)

so you could make tf(float) round up to hte nearest int, and then
fractional phraseFreqs should score the same as exact phraseFreqs.  do
some testing of cases where the phrase matches more then once on the same
field though ... it may not be what you expect ( i believe the
phraseFreqs are summed before calling tf() so there is no way to tell the
differnce between 1 exact match with a phraseFreq of "1" and 2 sloppy
matches each with phraseFreqs of 0.5.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue May 29 19:54:15 2007
Return-Path: <java-user-return-28408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96641 invoked from network); 29 May 2007 19:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 May 2007 19:54:08 -0000
Received: (qmail 17513 invoked by uid 500); 29 May 2007 19:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17454 invoked by uid 500); 29 May 2007 19:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17398 invoked by uid 99); 29 May 2007 19:54:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 12:54:04 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.91.147.7] (HELO mailgw2a.lmco.com) (192.91.147.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 12:53:59 -0700
Received: from emss03g01.ems.lmco.com (relay3.ems.lmco.com [141.240.4.144])by mailgw2a.lmco.com  (LM-6) with ESMTP id l4TJrceD013938for <java-user@lucene.apache.org>; Tue, 29 May 2007 15:53:38 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JIT00001J9EU2@lmco.com> for java-user@lucene.apache.org; Tue, 29 May 2007 15:53:38 -0400 (EDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JIT00CQ8J93BE@lmco.com> for java-user@lucene.apache.org; Tue, 29 May 2007 15:53:28 -0400 (EDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 29 May 2007 15:53:28 -0400
Date: Tue, 29 May 2007 15:53:27 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: addding/searching documents during optimize
In-reply-to: <465C4241.1080501@yahoo.de>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: addding/searching documents during optimize
Thread-Index: AceiA6E7h5TP/pvkRW6T0qjbsGxKiAAJytkg
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <465C4241.1080501@yahoo.de>
X-OriginalArrivalTime: 29 May 2007 19:53:28.0298 (UTC) FILETIME=[06B224A0:01C7A22B]
X-Virus-Checked: Checked by ClamAV on apache.org

1. Yes it is safe to search while optimizing and adding documents to an
index.

2. NO you can not add documents to an index while it is optimized. You
can only have one instance of IndexWriter working on an index

HTH

Aviran
http://www.aviransplace.com
http://shaveh.co.il 

-----Original Message-----
From: Joe [mailto:fischauto333@yahoo.de] 
Sent: Tuesday, May 29, 2007 11:10 AM
To: java-user@lucene.apache.org
Subject: addding/searching documents during optimize

Hi,

I am not sure, so i need ur opinion to these 2 questions:

Is it save to search an index while its beeing optimized by another java
process?

Is it save to add documents to an index while its beeing optimized by
another java process?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 05:04:56 2007
Return-Path: <java-user-return-28409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12293 invoked from network); 30 May 2007 05:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 05:04:54 -0000
Received: (qmail 13046 invoked by uid 500); 30 May 2007 05:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13000 invoked by uid 500); 30 May 2007 05:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12977 invoked by uid 99); 30 May 2007 05:04:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 22:04:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 22:04:42 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4U54Kao467626
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 05:04:20 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4U54K0X3702994
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 07:04:20 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4U54KKm022046
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 07:04:20 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4U54Kmp022043
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 07:04:20 +0200
In-Reply-To: <Pine.LNX.4.58.0705291247410.25646@hal.rescomp.berkeley.edu>
Subject: Re: Is it possible to do near terms without using phrase slop in query
 parser syntax?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF83E775D0.2B7FC61E-ON882572EB.001A9DF5-882572EB.001BA446@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 29 May 2007 22:01:55 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 30/05/2007 08:04:20
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter <hossman_lucene@fucit.org> wrote on 29/05/2007 12:51:38:
>
> : I've found that trying to specify a near query using something like:
> : actor_name_mv:"Foster, Jody"~2
> : matches "Foster, Jody" with a tf score of 1, but it matches "Jody
> : Foster" with a tf score of .577  The phraseFreq in the first case is 1
> : and the phraseFreq in the second is 1/3.
>
> as i recall, phraseFreq is passed to the tf(float) function of your
> similarity, you can get differnet behavior between the tf() for phrase
> queries and simple term queries by having different tf impls
> for tf(float)
> - used for phrases; and tf(int) - used for terms.  by default, tf(int)
> calls tf(float)
>
> so you could make tf(float) round up to hte nearest int, and then
> fractional phraseFreqs should score the same as exact phraseFreqs.  do
> some testing of cases where the phrase matches more then once on the same
> field though ... it may not be what you expect ( i believe the
> phraseFreqs are summed before calling tf() so there is no way to tell the
> differnce between 1 exact match with a phraseFreq of "1" and 2 sloppy
> matches each with phraseFreqs of 0.5.

Yes they are summed before calling tf(). Would perhaps be
better to override Similarity.sloppyFreq(int) to return 1
(when searching those queries) - this would actually mean
that the sloppiness degree is ignored. It would not be symmetric
though, in the sense that eg query "A B"~3, while it would
score the same these docs: "A B"; "B A"; "A X B"; "B X A",
it would find match "A X Y Z B" but not "B Z Y X A". In
other words, this would not be equivalent to having
SpanQuery's inOrder = false.

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 06:46:55 2007
Return-Path: <java-user-return-28410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98708 invoked from network); 30 May 2007 06:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 06:46:54 -0000
Received: (qmail 29096 invoked by uid 500); 30 May 2007 06:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28662 invoked by uid 500); 30 May 2007 06:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28651 invoked by uid 99); 30 May 2007 06:46:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 23:46:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 May 2007 23:46:44 -0700
Received: by py-out-1112.google.com with SMTP id a25so4021318pyi
        for <java-user@lucene.apache.org>; Tue, 29 May 2007 23:46:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Sf3Bjv1rstDCCVPfLdOOm59zsl5O7lxNhyx7NkO8nj1FNPAswbhWgItDUfq110uMK+DuRJAiMcPOJNdUcta26mjDNcnOjxhJj1aun6mujzbi/2nkNj1e7Vud3by7iQ4m+OniPvk9PwaiAqEi2E4cJNTp+plKbPQbYeNGDWlf5sg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=ATOvzc7SXg7LEdz3LFbUtNn2laxyqiogmfhSExU/qwopw7xWtNJrMmE6WwXYj2Ml2Nn/0KeSXbEoFDYRerGZdno0y5Il5gwsmgRkEtFuEtBcCHUfuMNcvpzJeDWj7wr6k7Qn1IHy4/xAadWwihpt3XeQ4azW0U9kufl3ZTVXFhI=
Received: by 10.35.32.9 with SMTP id k9mr8554213pyj.1180507582918;
        Tue, 29 May 2007 23:46:22 -0700 (PDT)
Received: from ?127.0.0.1? ( [24.7.67.61])
        by mx.google.com with ESMTP id z80sm19039526pyg.2007.05.29.23.46.19;
        Tue, 29 May 2007 23:46:22 -0700 (PDT)
Message-ID: <465D1D93.8040806@gmail.com>
Date: Tue, 29 May 2007 23:45:39 -0700
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: MoreLikeThis API changes?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to build a custom MoreLikeThis implementation that will run 
within solr and I've run into a few API hurdles...

1. Can MLT.java be modified to optionally take the Similarity 
implementation in the constructor?  Currently it is hardcoded to:
  private Similarity similarity = new DefaultSimilarity();

2. Do retrieveTerms(int docNum) and createQuery(PriorityQueue q) need to 
be private?  Can they be public?  If not public, could they at least be 
protected?

3. Can isNoiseWord() be protected?


If these changes sound reasonable, I'll make a JIRA patch.

thanks
ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 07:01:18 2007
Return-Path: <java-user-return-28411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91914 invoked from network); 30 May 2007 07:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 07:01:17 -0000
Received: (qmail 54118 invoked by uid 500); 30 May 2007 07:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54079 invoked by uid 500); 30 May 2007 07:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54064 invoked by uid 99); 30 May 2007 07:01:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 00:01:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 00:00:57 -0700
Received: by nz-out-0506.google.com with SMTP id x7so987541nzc
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 00:00:36 -0700 (PDT)
Received: by 10.114.111.1 with SMTP id j1mr3813101wac.1180508436262;
        Wed, 30 May 2007 00:00:36 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 30 May 2007 00:00:36 -0700 (PDT)
Message-ID: <1324e4e20705300000l3d47f9f1q324859bafc97564a@mail.gmail.com>
Date: Wed, 30 May 2007 12:30:36 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Get all unique values of specific field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_627_19191647.1180508436237"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_627_19191647.1180508436237
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

I have created a Lucene Index of Students Database, this database have 5
fields i.e. Name, Address, Class, PhoneNo and ScholarNo.
Now I have opened Searcher and query "Name:Menaria" , Its return 100
results. Now I wants the All unique "Class"  names which is return in Hits
objects, How can I get unique Class list without using Loop.

Please suggest me..

-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_627_19191647.1180508436237--

From java-user-return-28412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 07:15:42 2007
Return-Path: <java-user-return-28412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73746 invoked from network); 30 May 2007 07:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 07:15:40 -0000
Received: (qmail 74801 invoked by uid 500); 30 May 2007 07:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74198 invoked by uid 500); 30 May 2007 07:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74187 invoked by uid 99); 30 May 2007 07:15:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 00:15:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 00:15:31 -0700
Received: by an-out-0708.google.com with SMTP id b20so678643ana
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 00:15:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LcuAq/Kd3PzkwJAzUczUNzAfQymLcr2jZJboHl+Glpa8OSUt9ugDHPX6y+H/4IirzNE/8SgdUfoakRQuEfrPz5ksw/R7/Fko689GNxAIovB3W2k2d2Z76fio0xsQjM0LQQbe74moyyj7s7kxzS/1GIe7eYS+Ew8n7DjSxwm8gU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pk7juGqPDb8Kq6qLeiE6EOcScswMdrPOx2S1c9fAgxTkV+aH5rphmEOyKw2UBBVYk411wi/45Jbc0d30AsCRbY33WhpNb+qrrAkUq5L1edk0DQQkFu0Rp5Xg5iSMaDdSIF25HpUdtQvbnkMZs5/d6/H38zpQ9Rdoe6Y7TkgdGvk=
Received: by 10.100.120.5 with SMTP id s5mr5731290anc.1180509309673;
        Wed, 30 May 2007 00:15:09 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Wed, 30 May 2007 00:15:09 -0700 (PDT)
Message-ID: <34b8543c0705300015i2c782f61r77602b97dbb556ca@mail.gmail.com>
Date: Wed, 30 May 2007 10:45:09 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <1324e4e20705300000l3d47f9f1q324859bafc97564a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_956_23105843.1180509309627"
References: <1324e4e20705300000l3d47f9f1q324859bafc97564a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_956_23105843.1180509309627
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure if this is fulfill your needs:
IndexReader.terms() which returns a TermEnum:

            TermEnum te = reader.terms();
            while(te.next()) {
                if(te.term().field().equals("Class")) {
                    System.out.println(te.term
().field()+":"+te.term().text());
                }
            }


On 5/30/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> Hello everyone,
>
> I have created a Lucene Index of Students Database, this database have 5
> fields i.e. Name, Address, Class, PhoneNo and ScholarNo.
> Now I have opened Searcher and query "Name:Menaria" , Its return 100
> results. Now I wants the All unique "Class"  names which is return in Hits
> objects, How can I get unique Class list without using Loop.
>
> Please suggest me..
>
> --
> Thanks,
> Laxmilal menaria
>
> http://www.minalyzer.com/
> http://www.chambal.com/
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_956_23105843.1180509309627--

From java-user-return-28413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 08:34:33 2007
Return-Path: <java-user-return-28413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73662 invoked from network); 30 May 2007 08:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 08:34:32 -0000
Received: (qmail 99669 invoked by uid 500); 30 May 2007 08:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99628 invoked by uid 500); 30 May 2007 08:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99617 invoked by uid 99); 30 May 2007 08:34:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 01:34:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.53.34] (HELO smtp109.plus.mail.re2.yahoo.com) (206.190.53.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 May 2007 01:34:23 -0700
Received: (qmail 92310 invoked from network); 30 May 2007 08:34:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=gldwGAr0CqanGpPHZcqtPDe3TV83CbSyVzX+b7yRVdVUhO+52TeYVX+pOiNH/hGV0gNpOWKabMMCYRMIwoyrazAiuaQcQ2jivJ7sDFXFBtW0NYqa0FREM7uNqBRYtH+XsjFR54Ypu0qiQBRJ/PT8/223iPwiW/peQwKa9Dlp6YI=  ;
Received: from unknown (HELO ?172.16.0.167?) (fischauto333@217.110.73.186 with plain)
  by smtp109.plus.mail.re2.yahoo.com with SMTP; 30 May 2007 08:34:01 -0000
X-YMail-OSG: _vxTO9sVM1mv6feohig.95aHCfZhbozjub3W_SB_b3DUnyiPTog_cBbRKbv_HuBzUJblamxa1FGyKbG3LOg3ardr7PX8shn83cbSmM23.WMgQHx90nTt
Message-ID: <465D36F9.1000704@yahoo.de>
Date: Wed, 30 May 2007 10:34:01 +0200
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: addding/searching documents during optimize
References: <465C4241.1080501@yahoo.de> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi,
> 1. Yes it is safe to search while optimizing and adding documents to an
> index.
>
> 2. NO you can not add documents to an index while it is optimized. You
> can only have one instance of IndexWriter working on an index
>
> HTH
>   
yes it did,thx



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 08:52:31 2007
Return-Path: <java-user-return-28414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86618 invoked from network); 30 May 2007 08:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 08:52:30 -0000
Received: (qmail 29939 invoked by uid 500); 30 May 2007 08:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29811 invoked by uid 500); 30 May 2007 08:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29647 invoked by uid 99); 30 May 2007 08:52:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 01:52:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 01:52:20 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1006898nzc
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 01:51:59 -0700 (PDT)
Received: by 10.114.56.1 with SMTP id e1mr3820463waa.1180515118962;
        Wed, 30 May 2007 01:51:58 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 30 May 2007 01:51:58 -0700 (PDT)
Message-ID: <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
Date: Wed, 30 May 2007 14:21:58 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_365_24521453.1180515118919"
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com>
	 <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_365_24521453.1180515118919
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks,

Thats okay for short index, But if index have millions of records or GB's
data then it will get slow . So what is better ?

On 5/30/07, Erich Eichinger <E.Eichinger@diamonddogs.cc> wrote:
>
>
> hi,
>
> I guess it doesn't work without any iteration.
>
> Another option coming to my mind: If the list of possible classnames isn't
> too long, you could do (pseudocode)
>
>   Hashtable resultCount = new Hashtable();
>   foreach( string classname in possibleClassNames )
>   {
>     resultlist = index.SearchFor("Name:Menaria AND Class:"+classname)
>     resultCount[classname] = resultlist.Count;
>   }
>
> cheers,
> Erich
>
>
> > -----Original Message-----
> > From: Michael Mitiaguin [mailto:mitiaguin@gmail.com]
> > Sent: Wednesday, May 30, 2007 9:33 AM
> > To: lucene-net-user@incubator.apache.org
> > Subject: Re: Get all unique values of specific field
> >
> > Laxmilal ,
> >
> > What's the problem with a hit list iteration ( it should be
> > very fast  )  ?
> > I am not sure about equivalent    of SQL "distinct"  in Lucene.
> > You didn't describe whether you index ( and plus store )  all fields.
> > Effectively you may just store a primary key ( let's say
> > incremental int id  for the sake of example , though you
> > table doesn't look normalised , it  doesn't really matter  in
> > our case  )  which  will be stored not  indexed ,  the rest
> > may be indexed as (  Name + Address + Class  ...) or as
> > separate fields if you need to and either stored or not stored.
> > Having applied search "Name:Menaria"  ( and having written
> > all this I realised that you still need to iterate a hit list
> >  but let me finish
> > :) )  you may form a string with coma delimited IDs and then
> >
> > "select distinct class from mytable where where id in "(" +
> > formedstring + ") "
> >
> > Surely if you store everything in Lucene index , there is no
> > need to query database and you may use collections for
> > picking up distinct "Class" values , but  my understanding
> > you still need to iterate through Hits
> >
> > Regards
> > Michael
> >
> > On 5/30/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> > > Hello everyone,
> > >
> > > I have created a Lucene Index of Students Database, this
> > database have
> > > 5 fields i.e. Name, Address, Class, PhoneNo and ScholarNo.
> > > Now I have opened Searcher and query "Name:Menaria" , Its
> > return 100
> > > results. Now I wants the All unique "Class"  names which is
> > return in
> > > Hits objects, How can I get unique Class list without using Loop.
> > >
> > > Please suggest me..
> > >
> > > --
> > > Thanks,
> > > Laxmilal menaria
> > >
> > > http://www.minalyzer.com/
> > > http://www.chambal.com/
> > >
> >
>



-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_365_24521453.1180515118919--

From java-user-return-28415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 09:58:28 2007
Return-Path: <java-user-return-28415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82930 invoked from network); 30 May 2007 09:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 09:58:27 -0000
Received: (qmail 36315 invoked by uid 500); 30 May 2007 09:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36281 invoked by uid 500); 30 May 2007 09:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36270 invoked by uid 99); 30 May 2007 09:58:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 02:58:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 02:58:16 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HtKwE-0000Ia-GL
	for java-user@lucene.apache.org; Wed, 30 May 2007 11:57:54 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id q-4cxpNJXC8h for <java-user@lucene.apache.org>;
	Wed, 30 May 2007 11:57:50 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HtKwA-0000IO-OQ
	for java-user@lucene.apache.org; Wed, 30 May 2007 11:57:50 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <KSS1G74N>; Wed, 30 May 2007 11:57:50 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526B2@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: AW: Modifying StandardAnalyzer so that it also splits words after
	 pun	ctuation characters that are not followed by whitespace
Date: Wed, 30 May 2007 11:57:49 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, I've followed your advice and commented out some Lines in the NUM
section. It now works as espected, thanks a lot, I just tried and it =
does
what I wanted it to do now. It looks scary, but isn't that bad.=20

Thanks!

Regards,
Michael



> -----Urspr=FCngliche Nachricht-----
> Von: Steven Rowe [mailto:sarowe@syr.edu]
> Gesendet: Dienstag, 29. Mai 2007 19:54
> An: java-user@lucene.apache.org
> Betreff: Re: Modifying StandardAnalyzer so that it also splits words
> after pun ctuation characters that are not followed by whitespace
>=20
>=20
> Hi Michael,
>=20
> Michael B=F6ckling wrote:
> > Hi folks!
> >=20
> > The topic says it all: I want to modify the=20
> StandardAnalyzer so that it also
> > splits words after punctuation characters (.,: etc.) that=20
> are NOT followed
> > by a whitespace character, in addition to punctuation=20
> characters that ARE
> > followed by whitespace.
> >=20
> > Of course i've looked at StandardTokenizer.jj, but I don't=20
> quite get it. The
> > recursive nature of the grammar bends my mind.
> >=20
> > Can someone smarter than me help here?
>=20
> Um, that probably disqualifies me, but anyway...
>=20
> There are several regexes in StandardTokenizer.jj that generate =
tokens
> containing punctuation.  You should be able to selectively=20
> comment them
> out to achieve what you want:
>=20
> 1. Acronyms:
>=20
>   | <ACRONYM: <ALPHA> "." (<ALPHA> ".")+ >
>=20
> 2. Company names:
>=20
>   | <COMPANY: <ALPHA> ("&"|"@") <ALPHA> >
>=20
> 3. Email addresses:
>=20
>   | <EMAIL: <ALPHANUM> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM>
>     (("."|"-") <ALPHANUM>)+ >
>=20
> 4. Hostnames:
>=20
>   | <HOST: <ALPHANUM> ("." <ALPHANUM>)+ >
>=20
> 5. The <NUM>, <P> and <HAS_DIGIT> regexes, for IP addresses, etc.:
>=20
>   | <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
>          | <HAS_DIGIT> <P> <ALPHANUM>
>          | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>          | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>          | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P>=20
> <HAS_DIGIT>)+
>          | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P>=20
> <ALPHANUM>)+
>           )
>     >
>   | <#P: ("_"|"-"|"/"|"."|",") >
>   | <#HAS_DIGIT:		  // at least one digit
>     (<LETTER>|<DIGIT>)*
>     <DIGIT>
>     (<LETTER>|<DIGIT>)*
>     >
>=20
>=20
> Steve
>=20
> --=20
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 10:05:30 2007
Return-Path: <java-user-return-28416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94574 invoked from network); 30 May 2007 10:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 10:05:29 -0000
Received: (qmail 50865 invoked by uid 500); 30 May 2007 10:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50819 invoked by uid 500); 30 May 2007 10:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50798 invoked by uid 99); 30 May 2007 10:05:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:05:25 -0700
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:05:21 -0700
Received: by ug-out-1314.google.com with SMTP id m2so158423uge
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 03:04:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CTSPpPsjENYZqtEdxF6nRptYaOKD2KO0U0Dcleu6qvKI4SXrScaIvkrMufHQDd3DShJ8AXRwwQPLjYyWebtdeG7TYBcj+WgvPSRKxviPkCL/apqYVe6Z85eINBqjvXkbQRyMsekO05RnhXccCXyGzhXlP3YRbII11fWGBtJDm48=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=leVa0GGTIKzMl6v+h/kbC+eQ8ENZh/ZpVBloPTBzut8VYSl0nJOJi4njwmAhdroPWYS5dzKBrim5rg5ZQ2NAdzCFXiD/TIrFzw+GpDiqgtCDYo2aUqm6LFEgZDwHqpoBY0FurZczEQmDGtXndXcIxzWulgdYtGlG/jpH8F27gSA=
Received: by 10.67.19.13 with SMTP id w13mr487498ugi.1180519499870;
        Wed, 30 May 2007 03:04:59 -0700 (PDT)
Received: from ?192.168.1.2? ( [83.249.114.76])
        by mx.google.com with ESMTP id i5sm35215439mue.2007.05.30.03.04.57;
        Wed, 30 May 2007 03:04:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com> <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc> <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Get all unique values of specific field
Date: Wed, 30 May 2007 12:03:07 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
>> > What's the problem with a hit list iteration ( it should be
>> > very fast  )  ?
>
> Thats okay for short index, But if index have millions of records  
> or GB's
> data then it will get slow .

Iterate only the top n results when you gather the unique values. If  
you get a million hits, ask the user to narrow down the search a bit.

Searching the forum archives for facets or faceted classification  
might also be helpful.



-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 10:22:01 2007
Return-Path: <java-user-return-28417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42589 invoked from network); 30 May 2007 10:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 10:22:00 -0000
Received: (qmail 79564 invoked by uid 500); 30 May 2007 10:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79491 invoked by uid 500); 30 May 2007 10:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79442 invoked by uid 99); 30 May 2007 10:21:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:21:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:21:48 -0700
Received: by wr-out-0506.google.com with SMTP id 36so921714wra
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 03:21:27 -0700 (PDT)
Received: by 10.114.24.1 with SMTP id 1mr3869058wax.1180520487166;
        Wed, 30 May 2007 03:21:27 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 30 May 2007 03:21:27 -0700 (PDT)
Message-ID: <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
Date: Wed, 30 May 2007 15:51:27 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1085_22864347.1180520487123"
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com>
	 <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
	 <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
	 <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1085_22864347.1180520487123
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks karl,

But if I implement faceted classification, then I know whats our classes
name, but if I don't know classes name, then what should I do ?


On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
> >> > What's the problem with a hit list iteration ( it should be
> >> > very fast  )  ?
> >
> > Thats okay for short index, But if index have millions of records
> > or GB's
> > data then it will get slow .
>
> Iterate only the top n results when you gather the unique values. If
> you get a million hits, ask the user to narrow down the search a bit.
>
> Searching the forum archives for facets or faceted classification
> might also be helpful.
>
>
>
> --
> karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_1085_22864347.1180520487123--

From java-user-return-28418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 10:22:17 2007
Return-Path: <java-user-return-28418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45573 invoked from network); 30 May 2007 10:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 10:22:16 -0000
Received: (qmail 81496 invoked by uid 500); 30 May 2007 10:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81427 invoked by uid 500); 30 May 2007 10:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81416 invoked by uid 99); 30 May 2007 10:22:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:22:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:22:08 -0700
Received: by wr-out-0506.google.com with SMTP id 36so921762wra
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 03:21:48 -0700 (PDT)
Received: by 10.114.173.15 with SMTP id v15mr3880659wae.1180520507373;
        Wed, 30 May 2007 03:21:47 -0700 (PDT)
Received: by 10.114.39.18 with HTTP; Wed, 30 May 2007 03:21:47 -0700 (PDT)
Message-ID: <1324e4e20705300321i7848a86atb2503c8bf17d5a09@mail.gmail.com>
Date: Wed, 30 May 2007 15:51:47 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org, lucene-net-user@incubator.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1093_11234551.1180520507327"
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com>
	 <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
	 <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
	 <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
	 <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1093_11234551.1180520507327
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 5/30/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> Thanks karl,
>
> But if I implement faceted classification, then I know whats our classes
> name, but if I don't know classes name, then what should I do ?
>
>
> On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> >
> > 30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
> > >> > What's the problem with a hit list iteration ( it should be
> > >> > very fast  )  ?
> > >
> > > Thats okay for short index, But if index have millions of records
> > > or GB's
> > > data then it will get slow .
> >
> > Iterate only the top n results when you gather the unique values. If
> > you get a million hits, ask the user to narrow down the search a bit.
> >
> > Searching the forum archives for facets or faceted classification
> > might also be helpful.
> >
> >
> >
> > --
> > karl
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Thanks,
> Laxmilal menaria
>
> http://www.minalyzer.com/
> http://www.chambal.com/
>



-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_1093_11234551.1180520507327--

From java-user-return-28419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 10:26:35 2007
Return-Path: <java-user-return-28419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9799 invoked from network); 30 May 2007 10:26:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 10:26:35 -0000
Received: (qmail 90299 invoked by uid 500); 30 May 2007 10:26:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89830 invoked by uid 500); 30 May 2007 10:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89819 invoked by uid 99); 30 May 2007 10:26:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:26:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jokin.c@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 03:26:27 -0700
Received: by py-out-1112.google.com with SMTP id a25so4107377pyi
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 03:26:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LHSJNd6LMSE9dmntFY53fNw+xGg9u7hGoAhSd/5DcBYEj5RLG2tOjPP62vDpOY6YTadha8AKa03mT28EnRN4bMKI1F8y4rvxZ3Gmu6d6U1qCM4IHMGQE3mVidqdB8ykymnVyQUE+Iw6chogK9lzVdSB7ZH8G/UwazSDkVA4Tsk0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ItBfs25pJs4G7eHa20Y5pzhC6Mzx7Mxm/PGiZbbm4746Pf90JxFu4b77SKYHw+F7wZ0oizGlQKJMjXFJGoy25RO2c2+ta/lolwVfDFjJQ+WyDukgEs5MwRsLOAx8k7x4q7fdLJthftKtzvweiq4+a0FtEsptsCCSKkxp4l2p+7g=
Received: by 10.35.45.14 with SMTP id x14mr12041722pyj.1180520766352;
        Wed, 30 May 2007 03:26:06 -0700 (PDT)
Received: by 10.35.16.4 with HTTP; Wed, 30 May 2007 03:26:05 -0700 (PDT)
Message-ID: <93228c910705300326u154d1b29xa0ce50267ae1211e@mail.gmail.com>
Date: Wed, 30 May 2007 12:26:05 +0200
From: "Jokin Cuadrado" <jokin.c@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com>
	 <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
	 <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
	 <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can also get stringindex of the class field, for access to the
field info without the need of accessing the document in hits.

You can implement a custom collector and get the unique values in that.

On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> 30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
> >> > What's the problem with a hit list iteration ( it should be
> >> > very fast  )  ?
> >

> > Thats okay for short index, But if index have millions of records
> > or GB's
> > data then it will get slow .
>
> Iterate only the top n results when you gather the unique values. If
> you get a million hits, ask the user to narrow down the search a bit.
>
> Searching the forum archives for facets or faceted classification
> might also be helpful.
>
>
>
> --
> karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 11:26:18 2007
Return-Path: <java-user-return-28420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59276 invoked from network); 30 May 2007 11:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 11:26:16 -0000
Received: (qmail 95827 invoked by uid 500); 30 May 2007 11:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95767 invoked by uid 500); 30 May 2007 11:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95755 invoked by uid 99); 30 May 2007 11:26:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 04:26:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 04:26:08 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1034009nzc
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 04:25:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Y3iHakp6GxRtEIxLQnlbjFaHLD6B5dg2iviUudy+I3bhA4Fi+KMx1d5vJPMXAHrYuuudyOiV2+YCn1pjbNt0DCqI1uJfJa7e4zechbpzTCADp3hQXjmCD2ChupoIa1A1VkWGswnu7FOwD618JXP+MqhmDQzVeAevR3yKiQvcrnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Mr2IZ400A//A37ufefGqAMs6nVJP+L+lUz04PMSr+iLcdUxpUgloRpAVwos2P8S4GE5dCbmtpON7BKnix0C7vc+PJDgw1kBhu/0wuw/31ktao1ICSWdLZilj4Av0ZH8CgdtG8gJ7G+hgJe4cfMo/1sTTpJfWSQ5LpGQOKIN8ITk=
Received: by 10.65.75.2 with SMTP id c2mr15180401qbl.1180524347208;
        Wed, 30 May 2007 04:25:47 -0700 (PDT)
Received: from ?192.168.1.2? ( [83.249.114.76])
        by mx.google.com with ESMTP id f18sm15275898qba.2007.05.30.04.25.45;
        Wed, 30 May 2007 04:25:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com> <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc> <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com> <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com> <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <00D5ED97-ED8A-4A1A-ADC2-2C0AA4727D15@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Get all unique values of specific field
Date: Wed, 30 May 2007 13:23:56 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


30 maj 2007 kl. 12.21 skrev Laxmilal Menaria:

> On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
>> 30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
>> >> > What's the problem with a hit list iteration ( it should be
>> >> > very fast  )  ?
>> >
>> > Thats okay for short index, But if index have millions of records
>> > or GB's data then it will get slow .
>>
>> Iterate only the top n results when you gather the unique values. If
>> you get a million hits, ask the user to narrow down the search a bit.
>>
>> Searching the forum archives for facets or faceted classification
>> might also be helpful.
>
> But if I implement faceted classification, then I know whats our  
> classes
> name, but if I don't know classes name, then what should I do ?

Then my recommend my first suggestion, that you gather the information
by iterating the top n results.

But you know the classes. There is a finite number of them and at some
point in time you have inserted them to your index. Depending on how
you store and index documents you might even be able to extract them
from the index.

For instance, you could index the class name untokenized in field used
only for that purpose. The terms in this field now represents the
available classes. You access them by seeking and iterating terms using
the IndexReader.


-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 12:58:00 2007
Return-Path: <java-user-return-28421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9024 invoked from network); 30 May 2007 12:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 12:57:57 -0000
Received: (qmail 13315 invoked by uid 500); 30 May 2007 12:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13274 invoked by uid 500); 30 May 2007 12:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13259 invoked by uid 99); 30 May 2007 12:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 05:57:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 05:57:49 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id B39265B52E
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 05:57:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <465D1D93.8040806@gmail.com>
References: <465D1D93.8040806@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A916145A-4CAA-4415-975D-B0358D61C6F7@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: MoreLikeThis API changes?
Date: Wed, 30 May 2007 08:57:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On May 30, 2007, at 2:45 AM, Ryan McKinley wrote:

> I'm trying to build a custom MoreLikeThis implementation that will  
> run within solr and I've run into a few API hurdles...
>
> 1. Can MLT.java be modified to optionally take the Similarity  
> implementation in the constructor?  Currently it is hardcoded to:
>  private Similarity similarity = new DefaultSimilarity();
>

Seems reasonable.  I suppose accessors would be reasonable too, since  
many of the other attributes have accessors.


> 2. Do retrieveTerms(int docNum) and createQuery(PriorityQueue q)  
> need to be private?  Can they be public?  If not public, could they  
> at least be protected?
>

I would think protected would be fine, what is your case for it being  
public?

> 3. Can isNoiseWord() be protected?
>

Seems reasonable.

>
> If these changes sound reasonable, I'll make a JIRA patch.
>
> thanks
> ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 13:28:30 2007
Return-Path: <java-user-return-28422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61545 invoked from network); 30 May 2007 13:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 13:28:28 -0000
Received: (qmail 6225 invoked by uid 500); 30 May 2007 13:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6173 invoked by uid 500); 30 May 2007 13:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6135 invoked by uid 99); 30 May 2007 13:28:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 06:28:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 06:28:05 -0700
Received: by ug-out-1314.google.com with SMTP id m2so197053uge
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 06:27:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BcufhXl4GEIPZ1PEeG3qEZ8spfWn0nfGM7W+WVUyLNrffmFftvS6WL+qUZEgmoxRkbGE2w0zXGXqwUpbnDvZ0LwOwKMQ8ZGF4D9VJRlG66e5NTPyBCyqpqoDoo/9aDG96PS/xHfRJ5KcI3Zcx+0JBe5j/zLIOPfGbmgyQyc+eAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FLq6Tz09Khq58yA4fruMWaTGUT12Y7diohfrBhE77llF6jAivoRRKm02lIaxih/W7mpc39pFq9izbTfKR4i7s0MGXBIX4NcUNOONBtFetymjKL1V+2uBT6d6B3KfVg0VoLtnWcBZpuN3xv/Sk0wez96JdMDU9IUC4wx3ioH70Bo=
Received: by 10.82.185.12 with SMTP id i12mr13904093buf.1180531664412;
        Wed, 30 May 2007 06:27:44 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 30 May 2007 06:27:44 -0700 (PDT)
Message-ID: <359a92830705300627v689d32a5xb86098c311a902de@mail.gmail.com>
Date: Wed, 30 May 2007 09:27:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get all unique values of specific field
In-Reply-To: <00D5ED97-ED8A-4A1A-ADC2-2C0AA4727D15@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2209_22562796.1180531664373"
References: <cc7a2340705300033p2a2c0815u79d25a9c188169d9@mail.gmail.com>
	 <5819CEE5BB511B4285A1F4BC147C53773E7E46@maildog.office.dd.loc>
	 <1324e4e20705300151k4ae7b274h9b6ae0417ac2123f@mail.gmail.com>
	 <46C66E95-1F04-4F23-8AB4-683C0CFACB71@gmail.com>
	 <1324e4e20705300321n281057cct5e92da4eeb6cec09@mail.gmail.com>
	 <00D5ED97-ED8A-4A1A-ADC2-2C0AA4727D15@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2209_22562796.1180531664373
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could also think about pre-building a set of Filters once your index has
been built, perhaps at warm-up time. One filter for each class and use those
in your queries....

Erick

On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 30 maj 2007 kl. 12.21 skrev Laxmilal Menaria:
>
> > On 5/30/07, karl wettin <karl.wettin@gmail.com> wrote:
> >> 30 maj 2007 kl. 10.51 skrev Laxmilal Menaria:
> >> >> > What's the problem with a hit list iteration ( it should be
> >> >> > very fast  )  ?
> >> >
> >> > Thats okay for short index, But if index have millions of records
> >> > or GB's data then it will get slow .
> >>
> >> Iterate only the top n results when you gather the unique values. If
> >> you get a million hits, ask the user to narrow down the search a bit.
> >>
> >> Searching the forum archives for facets or faceted classification
> >> might also be helpful.
> >
> > But if I implement faceted classification, then I know whats our
> > classes
> > name, but if I don't know classes name, then what should I do ?
>
> Then my recommend my first suggestion, that you gather the information
> by iterating the top n results.
>
> But you know the classes. There is a finite number of them and at some
> point in time you have inserted them to your index. Depending on how
> you store and index documents you might even be able to extract them
> from the index.
>
> For instance, you could index the class name untokenized in field used
> only for that purpose. The terms in this field now represents the
> available classes. You access them by seeking and iterating terms using
> the IndexReader.
>
>
> --
> karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2209_22562796.1180531664373--

From java-user-return-28423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 15:33:11 2007
Return-Path: <java-user-return-28423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44135 invoked from network); 30 May 2007 15:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 15:33:10 -0000
Received: (qmail 50603 invoked by uid 500); 30 May 2007 15:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50555 invoked by uid 500); 30 May 2007 15:33:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50544 invoked by uid 99); 30 May 2007 15:33:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:33:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:33:00 -0700
Received: (qmail 12285 invoked by uid 89); 30 May 2007 15:32:39 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 30 May 2007 15:32:39 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: Obtain Lock file timeout during deleteDocument()
Date: Wed, 30 May 2007 11:32:38 -0400
User-Agent: KMail/1.9.6
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart3456830.6jFjjaNt4Y";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705301132.38831.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart3456830.6jFjjaNt4Y
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I am a little confused, probably, because I missed some detail when looking=
=20
through the code of lucene 2.1.

Scenario: Deleting documents works for a while, eventually, I get the=20
exception that obtaining the lock files has timed out.


I was trying to find an answer to this.
I call IndexReader.deleteDocument() for the _first_ time.
If my index has several segments, my IndexReader is actually a MultiReader.
Therefore the variable directoryOwner is set to true and as the first step,=
 a=20
lock file is created. After that, the document is marked as deleted.

If I call deleteDocument again, it may or may not work.
Now by just reading the code, and I am sure I am missing some details, I am=
=20
wondering, how can I successfully call deleteDocument again? The code will=
=20
try to obtain the lockfile again, but since it is already there, it will ti=
me=20
out. That is the point where I am confused. After I deleted a document, the=
=20
write.lock file is still there, and directoryOwner is still true.


Maybe knowing more about this will help me to find out why I get the=20
exception "Lock obtain timed out" after a while and after several successfu=
l=20
document deletions.

Thank you!

Regards,
Martin

--nextPart3456830.6jFjjaNt4Y
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGXZkWtFAZVxKupnURAkfdAKCrJWr7iwT/0AUfyHKaU8k9PK7C5wCeP/ch
+B193xRMlqBIfceGcHlPQ50=
=Wdyh
-----END PGP SIGNATURE-----

--nextPart3456830.6jFjjaNt4Y--

From java-user-return-28424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 15:50:12 2007
Return-Path: <java-user-return-28424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88365 invoked from network); 30 May 2007 15:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 15:50:10 -0000
Received: (qmail 91584 invoked by uid 500); 30 May 2007 15:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91550 invoked by uid 500); 30 May 2007 15:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91539 invoked by uid 99); 30 May 2007 15:50:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:50:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:50:02 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id D35FD226F47;
	Wed, 30 May 2007 11:49:41 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 30 May 2007 11:49:41 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id B60F7DC8B; Wed, 30 May 2007 11:49:41 -0400 (EDT)
Message-Id: <1180540181.29135.1192542825@webmail.messagingengine.com>
X-Sasl-Enc: Y60R7xsWrpBROYaqszF7YVkVsOMb7OVENa98wizAZ5rq 1180540181
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, martin.kobele@netsweeper.com
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <200705301132.38831.martin.kobele@netsweeper.com>
Subject: Re: Obtain Lock file timeout during deleteDocument()
In-Reply-To: <200705301132.38831.martin.kobele@netsweeper.com>
Date: Wed, 30 May 2007 11:49:41 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Martin Kobele" <martin.kobele@netsweeper.com> wrote:

> I was trying to find an answer to this.
> I call IndexReader.deleteDocument() for the _first_ time.
> If my index has several segments, my IndexReader is actually a MultiReader.
> Therefore the variable directoryOwner is set to true and as the first step, a 
> lock file is created. After that, the document is marked as deleted.
> 
> If I call deleteDocument again, it may or may not work.
> Now by just reading the code, and I am sure I am missing some details, I am 
> wondering, how can I successfully call deleteDocument again? The code will 
> try to obtain the lockfile again, but since it is already there, it will time 
> out. That is the point where I am confused. After I deleted a document, the 
> write.lock file is still there, and directoryOwner is still true.

The lock should be acquired only on the first call to deleteDocument.
That method calls acquireWriteLock which only acquires the write lock
if it hasn't already (ie, writeLock == null).  So the 2nd call to
deleteDocument would see that the lock was already held and should not
then try to acquire it again.

You are only using a single instance of IndexReader, right?  If for
example you try to make a new instance of IndexReader and then call
deleteDocument on that new one, then you would hit the exception
unless you had closed the first one.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 15:53:40 2007
Return-Path: <java-user-return-28425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59422 invoked from network); 30 May 2007 15:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 15:53:39 -0000
Received: (qmail 97631 invoked by uid 500); 30 May 2007 15:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97603 invoked by uid 500); 30 May 2007 15:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97592 invoked by uid 99); 30 May 2007 15:53:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:53:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 08:53:31 -0700
Received: (qmail 14557 invoked by uid 89); 30 May 2007 15:53:10 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 30 May 2007 15:53:10 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: Re: Obtain Lock file timeout during deleteDocument()
Date: Wed, 30 May 2007 11:53:09 -0400
User-Agent: KMail/1.9.6
References: <200705301132.38831.martin.kobele@netsweeper.com> <1180540181.29135.1192542825@webmail.messagingengine.com>
In-Reply-To: <1180540181.29135.1192542825@webmail.messagingengine.com>
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2405479.S1hbCc2WNr";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705301153.09967.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart2405479.S1hbCc2WNr
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline


On Wednesday 30 May 2007 11:49:41 Michael McCandless wrote:
> "Martin Kobele" <martin.kobele@netsweeper.com> wrote:
> > I was trying to find an answer to this.
> > I call IndexReader.deleteDocument() for the _first_ time.
> > If my index has several segments, my IndexReader is actually a
> > MultiReader. Therefore the variable directoryOwner is set to true and as
> > the first step, a lock file is created. After that, the document is
> > marked as deleted.
> >
> > If I call deleteDocument again, it may or may not work.
> > Now by just reading the code, and I am sure I am missing some details, I
> > am wondering, how can I successfully call deleteDocument again? The code
> > will try to obtain the lockfile again, but since it is already there, it
> > will time out. That is the point where I am confused. After I deleted a
> > document, the write.lock file is still there, and directoryOwner is sti=
ll
> > true.
>
> The lock should be acquired only on the first call to deleteDocument.
> That method calls acquireWriteLock which only acquires the write lock
> if it hasn't already (ie, writeLock =3D=3D null).  So the 2nd call to
> deleteDocument would see that the lock was already held and should not
> then try to acquire it again.

oh yeah, darn, I knew I missed that little detail! ;)

>
> You are only using a single instance of IndexReader, right?  If for
> example you try to make a new instance of IndexReader and then call
> deleteDocument on that new one, then you would hit the exception
> unless you had closed the first one.

Yeah, I use only one single instance of the IndexReader of this particular=
=20
index. But I have like 20 IndexReaders of 20 different indexes open.


Thanks,
Martin


--nextPart2405479.S1hbCc2WNr
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGXZ3ltFAZVxKupnURAnJaAJ0RbedKhXsgcU/YoSDtd6d7hgumiwCgl76r
0ZG+uSQDA9YWKAgc24U0Fx0=
=0lBf
-----END PGP SIGNATURE-----

--nextPart2405479.S1hbCc2WNr--

From java-user-return-28426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 16:17:29 2007
Return-Path: <java-user-return-28426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31626 invoked from network); 30 May 2007 16:17:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 16:17:28 -0000
Received: (qmail 63416 invoked by uid 500); 30 May 2007 16:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63378 invoked by uid 500); 30 May 2007 16:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63364 invoked by uid 99); 30 May 2007 16:17:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 09:17:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 09:17:18 -0700
Received: by wa-out-1112.google.com with SMTP id k17so1159599waf
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 09:16:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=n8R84GMW2Hfteqb18NCcgU4eKOANsIQHZfrVN9WC1T3cz4gQAjw36c0PqZXs7MRbtRBAkmHuDEMiSYI9stv/bF6EOgYtxAmVSTCxK227R8a2nQ6qD56ymYpt3AptjRT+GzDwK0YiKJf+nO67bKx90LfaYxFyUzIqpxwYA0+Z54U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FuEE8INvz52544MrRrWbAvVa7nzBfhKCXF/3HemXOXohAfP8YolEvHbDQD5SPebVjlm931BaVIgSGIVND8OpsHuGss0/qnnMZ72Nm3W7RRNsED0iSnjFu4PzkAuUIaBlUSx9GEQx332FZjLrcq5x0TTXQr/TF1LT30WqpiFUXrk=
Received: by 10.114.151.13 with SMTP id y13mr4041679wad.1180541817636;
        Wed, 30 May 2007 09:16:57 -0700 (PDT)
Received: from ?127.0.0.1? ( [24.7.67.61])
        by mx.google.com with ESMTP id l36sm2252630waf.2007.05.30.09.16.56;
        Wed, 30 May 2007 09:16:56 -0700 (PDT)
Message-ID: <465DA350.6050103@gmail.com>
Date: Wed, 30 May 2007 09:16:16 -0700
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MoreLikeThis API changes?
References: <465D1D93.8040806@gmail.com> <A916145A-4CAA-4415-975D-B0358D61C6F7@apache.org>
In-Reply-To: <A916145A-4CAA-4415-975D-B0358D61C6F7@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

> 
>> 2. Do retrieveTerms(int docNum) and createQuery(PriorityQueue q) need 
>> to be private?  Can they be public?  If not public, could they at 
>> least be protected?
>>
> 
> I would think protected would be fine, what is your case for it being 
> public?
> 

 From the solr RequestHandler, I want to return the "interesting" terms 
used for MLT.  If retrieveTerms() is public, the handler could do this 
for any MLT implementation.  If protected, it would be locked to its own 
subclass of MLT (ok, but not ideal).

Since retrieveInterestingTerms(Reader) is public, it seems reasonable.

- - - -

In implementing the handler, i ran into another related problem...

Is there any way to walk through a PriorityQueue without destroying it? 
  Everything I see calls pq.pop() in a loop.  I would like to be able to 
use the queue to construct the MLT query and for display.  For large 
documents, constructing the "interesting" terms can be very slow, so 
doing it twice isn't a good idea.


thanks
ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 17:31:02 2007
Return-Path: <java-user-return-28427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3180 invoked from network); 30 May 2007 17:31:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 17:31:01 -0000
Received: (qmail 71418 invoked by uid 500); 30 May 2007 17:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71384 invoked by uid 500); 30 May 2007 17:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71373 invoked by uid 99); 30 May 2007 17:30:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 10:30:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 May 2007 10:30:52 -0700
Received: (qmail 80948 invoked by uid 60001); 30 May 2007 17:30:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=0DggK5GRYbQOE+LUEKRTZe3EOW1zwtZxWhm40O5ze2geYwvqm9tvEcCrGJWOXysx6HebxTGgZaw7atXpCvBqKzR43FhdU7r9B2+0068ukXNg0PdXHzDWP66Zq5aAHWb9EmsrFzWSwL40l+V35sh/cjXXqKb907x0F0YPWqg9UNY=;
X-YMail-OSG: AnEmFn4VM1mnxYpuZ9So5VpvABo3Nwau.vGtm3m.Umj.VMay_T2uVWDNatDK9sl792Wyc0x4DncsrAskQplGH5ABMRoC_7moDGv7ng2cL02YlmUS
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Wed, 30 May 2007 17:30:30 GMT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Wed, 30 May 2007 17:30:30 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: MoreLikeThis API changes?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <324465.77161.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>> I want to return the "interesting" terms used for MLT

Could you do this using Query.extractTerms() on the rewritten version of the MoreLikeThis query (a BooleanQuery)?

Mark

----- Original Message ----
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 30 May, 2007 5:16:16 PM
Subject: Re: MoreLikeThis API changes?

> 
>> 2. Do retrieveTerms(int docNum) and createQuery(PriorityQueue q) need 
>> to be private?  Can they be public?  If not public, could they at 
>> least be protected?
>>
> 
> I would think protected would be fine, what is your case for it being 
> public?
> 

 From the solr RequestHandler, I want to return the "interesting" terms 
used for MLT.  If retrieveTerms() is public, the handler could do this 
for any MLT implementation.  If protected, it would be locked to its own 
subclass of MLT (ok, but not ideal).

Since retrieveInterestingTerms(Reader) is public, it seems reasonable.

- - - -

In implementing the handler, i ran into another related problem...

Is there any way to walk through a PriorityQueue without destroying it? 
  Everything I see calls pq.pop() in a loop.  I would like to be able to 
use the queue to construct the MLT query and for display.  For large 
documents, constructing the "interesting" terms can be very slow, so 
doing it twice isn't a good idea.


thanks
ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:02:42 2007
Return-Path: <java-user-return-28428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54250 invoked from network); 30 May 2007 18:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:02:41 -0000
Received: (qmail 46714 invoked by uid 500); 30 May 2007 18:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46488 invoked by uid 500); 30 May 2007 18:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46477 invoked by uid 99); 30 May 2007 18:02:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:02:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:02:33 -0700
Received: (qmail 26956 invoked by uid 89); 30 May 2007 18:02:12 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 30 May 2007 18:02:12 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: Re: Obtain Lock file timeout during deleteDocument()
Date: Wed, 30 May 2007 14:02:11 -0400
User-Agent: KMail/1.9.6
References: <200705301132.38831.martin.kobele@netsweeper.com> <1180540181.29135.1192542825@webmail.messagingengine.com> <200705301153.09967.martin.kobele@netsweeper.com>
In-Reply-To: <200705301153.09967.martin.kobele@netsweeper.com>
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2715864.B7jjUNfjVh";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705301402.12026.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart2715864.B7jjUNfjVh
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Wednesday 30 May 2007 11:53:09 Martin Kobele wrote:
> On Wednesday 30 May 2007 11:49:41 Michael McCandless wrote:
> > You are only using a single instance of IndexReader, right?  If for
> > example you try to make a new instance of IndexReader and then call
> > deleteDocument on that new one, then you would hit the exception
> > unless you had closed the first one.
>
> Yeah, I use only one single instance of the IndexReader of this particular
> index. But I have like 20 IndexReaders of 20 different indexes open.
>
oh dear, it was my own fault.....
I was hoping I could monitor the last modified time of the directory to=20
determine whether somebody has replaced the index. But lucene itself modifi=
es=20
the time stamp of the directory when you delete documents.
I am wiser now ;)

Thanks!

Martin


=2D-=20
Martin Kobele
Software Developer
t. 519-826-5222 ext #224
f. 519-826-5228
martin.kobele@netsweeper.com
Netsweeper Corporate Head Office
104 Dawson Road
Guelph, Ontario
N1H 1A7

--nextPart2715864.B7jjUNfjVh
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGXbwktFAZVxKupnURAuwwAJ9cfBncc3O3ogd+lEX6k+I9hU05dACdHgH/
JTKHakqIvIROH6ICyq6rCJ8=
=hYiX
-----END PGP SIGNATURE-----

--nextPart2715864.B7jjUNfjVh--

From java-user-return-28429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:09:21 2007
Return-Path: <java-user-return-28429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89031 invoked from network); 30 May 2007 18:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:09:21 -0000
Received: (qmail 58786 invoked by uid 500); 30 May 2007 18:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58726 invoked by uid 500); 30 May 2007 18:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58702 invoked by uid 99); 30 May 2007 18:09:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:09:18 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zareensyed@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:09:13 -0700
Received: by wa-out-1112.google.com with SMTP id k17so1196371waf
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 11:08:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=eWINk/5Qp/AMvKfW42g5q/OzaBcy1NqppLvIpT/7z6gTIT8Yaduh2FwnLzDGr2WkJuttsZLgI+Xok7saTUlTPK8YmJnJgpxzQaRmyQ6oYnrpRPnKGcj6CNe/kwtE27+beNUrBZ4Nof6i5I6Ma4+Fuz7u9cJoKIaY7T2JgOwjK8o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NPN9mZVD/DVoDbgWGAUnyvQwFeqAv6eR3K+n6MkN2iWJE5MMIGM5m/dN3DkwnWNfpR551T3vuNqKbR29uasHgVzqPwyaeYKKKe3C9UTcIfQyt49xzOcq3yAA6P83Kiq5me3nIOB3VA+mGYHkz3fW/kSuUj7byvEKqo9rAJ9h+us=
Received: by 10.114.15.1 with SMTP id 1mr4152870wao.1180548532800;
        Wed, 30 May 2007 11:08:52 -0700 (PDT)
Received: by 10.114.201.20 with HTTP; Wed, 30 May 2007 11:08:52 -0700 (PDT)
Message-ID: <65b111b90705301108m1fea2020m8aedd588b5c7dbea@mail.gmail.com>
Date: Wed, 30 May 2007 14:08:52 -0400
From: "zareen syed" <zareensyed@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing large corpus of wikipedia
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8846_18234536.1180548532723"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8846_18234536.1180548532723
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Everybody,

I would appreciate if lucene users could give me some advice about the
project I am doing.
I want to use lucene to index wikipedia and do searches on it as a part of
my project.
- Firstly, I am concerned about the size of wikipedia. Is it feasible to do
it on a single machine
  with 1 GB of Physical Memory and 1.3GHz processor. Can lucene handle it
efficiently.
- Secondly, I wanted to know that when doing search does lucene load the
whole index in memory
   or if the index size is larger than memory then would the search be
significantly slowed down.
- Thirdly, I want to pass documents as queries to wikipedia corpus, can
lucene handle such large
   queries equivanlent to documents sizes, if not what modifications do I
have to make.
- Fourthly, would it be efficient to keep subsets of index on different
machines and then distribute the query to all of them.

Any suggestions on how to improve the performance with lucene considering
the problem I mentioned above.

Thank you all,
Zareen Saba Syed

------=_Part_8846_18234536.1180548532723--

From java-user-return-28430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:21:03 2007
Return-Path: <java-user-return-28430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13112 invoked from network); 30 May 2007 18:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:21:02 -0000
Received: (qmail 80605 invoked by uid 500); 30 May 2007 18:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80574 invoked by uid 500); 30 May 2007 18:20:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80563 invoked by uid 99); 30 May 2007 18:20:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:20:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.96] (HELO smtp007.mail.ukl.yahoo.com) (217.12.11.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 May 2007 11:20:52 -0700
Received: (qmail 55798 invoked from network); 30 May 2007 18:20:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=P4SxN2pZRV/PRB7wtLdYcbeUdwd/zeGbZJEdrQ00SMRT5K74KYnwx5jHwF2J9+rpchoPvjdcpsOvS86FWK/G3Z1qYe4OCkgMqNLFH537NOydDyrG92tAx3WZ5CqiASNrm/o/DUXsSFu0CvfGVRh0wQsRttKSro+CV7m5gRuR35A=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp007.mail.ukl.yahoo.com with SMTP; 30 May 2007 18:20:30 -0000
X-YMail-OSG: gSwyE6wVM1m14EDvWYhs1dfhYFbH4o5un.VLR3yhWPd71htJA6OUjnNsf1mHdkmg93mgvKGVog--
Message-ID: <465DC06B.4050803@yahoo.co.uk>
Date: Wed, 30 May 2007 19:20:27 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing large corpus of wikipedia
References: <65b111b90705301108m1fea2020m8aedd588b5c7dbea@mail.gmail.com>
In-Reply-To: <65b111b90705301108m1fea2020m8aedd588b5c7dbea@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> - Is it feasible to do
> it on a single machine  with 1 GB of Physical Memory and 1.3GHz 
> processor. Can lucene handle it
> efficiently.
Yes, I've indexed all of English Wikipedia using 1GB RAM (with a 3Ghz 
processor)

> - Secondly, I wanted to know that when doing search does lucene load the
> whole index in memory
No.

> - Thirdly, I want to pass documents as queries to wikipedia corpus, can
> lucene handle such large
>   queries equivanlent to documents sizes, 
Yes, see "MoreLikeThis" in the contrib section


> - Fourthly, would it be efficient to keep subsets of index on different
> machines and then distribute the query to all of them.
Yes but I'd avoid complicating the architecture until you've established 
that you have a performance issue.


Cheers,
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:21:24 2007
Return-Path: <java-user-return-28431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19772 invoked from network); 30 May 2007 18:21:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:21:22 -0000
Received: (qmail 83200 invoked by uid 500); 30 May 2007 18:21:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83161 invoked by uid 500); 30 May 2007 18:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83150 invoked by uid 99); 30 May 2007 18:21:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:21:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:21:13 -0700
Received: by ug-out-1314.google.com with SMTP id m2so270332uge
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 11:20:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MzMinEG1A2gKeQcnbnhjb8tFvYuaE3gzCPxkv0LT9X76aTnnJmBhq9kLUf7AXzVjokIzRS8vYnML5Iv1SxuVecNXU8VAQ6f2QiT0wHmEPAQ6SY0uJ7gMLzdk72JDI7wqBYpI6UrqrvV3KyHib61z6CYK78Pt65ncXoyx9ovQ5S4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r8RMuodIkz1HQJdrTwxAmvd44oA55TI3+xb+ijj7ifoD8zAAMdH0bQSu8rzegd5FrpiQWHYtpgs/CMD8YYaZ0beFKKH5xNLKgeqh4af2n6l0SqnNK5bpsgPkWaOxJUVENUrI9DTVGcL6OERm13hCNU0vR8l3RLEFL83qBNwo00Y=
Received: by 10.82.100.1 with SMTP id x1mr1130612bub.1180549251617;
        Wed, 30 May 2007 11:20:51 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Wed, 30 May 2007 11:20:51 -0700 (PDT)
Message-ID: <f81fa4180705301120w11f6283dn464f361a10acfeb7@mail.gmail.com>
Date: Wed, 30 May 2007 14:20:51 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is it possible to do near terms without using phrase slop in query parser syntax?
In-Reply-To: <OF83E775D0.2B7FC61E-ON882572EB.001A9DF5-882572EB.001BA446@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.58.0705291247410.25646@hal.rescomp.berkeley.edu>
	 <OF83E775D0.2B7FC61E-ON882572EB.001A9DF5-882572EB.001BA446@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you both for the assistance.
I ended up going the tf(float) override route rather than sloppyFreq.
I want to keep the ability to specify how far part something is
allowed to be, but from what I understood of Doron's response, I might
lose that if I overrode sloppyFreq.

Because my application is a matching tool rather than a searching
tool, it is okay for a term or phrase that matches multiple times to
have the same score as a single match.  Multiple matches don't mean
anything good in my application.

On 5/30/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> Chris Hostetter <hossman_lucene@fucit.org> wrote on 29/05/2007 12:51:38:
> >
> > : I've found that trying to specify a near query using something like:
> > : actor_name_mv:"Foster, Jody"~2
> > : matches "Foster, Jody" with a tf score of 1, but it matches "Jody
> > : Foster" with a tf score of .577  The phraseFreq in the first case is 1
> > : and the phraseFreq in the second is 1/3.
> >
> > as i recall, phraseFreq is passed to the tf(float) function of your
> > similarity, you can get differnet behavior between the tf() for phrase
> > queries and simple term queries by having different tf impls
> > for tf(float)
> > - used for phrases; and tf(int) - used for terms.  by default, tf(int)
> > calls tf(float)
> >
> > so you could make tf(float) round up to hte nearest int, and then
> > fractional phraseFreqs should score the same as exact phraseFreqs.  do
> > some testing of cases where the phrase matches more then once on the same
> > field though ... it may not be what you expect ( i believe the
> > phraseFreqs are summed before calling tf() so there is no way to tell the
> > differnce between 1 exact match with a phraseFreq of "1" and 2 sloppy
> > matches each with phraseFreqs of 0.5.
>
> Yes they are summed before calling tf(). Would perhaps be
> better to override Similarity.sloppyFreq(int) to return 1
> (when searching those queries) - this would actually mean
> that the sloppiness degree is ignored. It would not be symmetric
> though, in the sense that eg query "A B"~3, while it would
> score the same these docs: "A B"; "B A"; "A X B"; "B X A",
> it would find match "A X Y Z B" but not "B Z Y X A". In
> other words, this would not be equivalent to having
> SpanQuery's inOrder = false.
>
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:34:48 2007
Return-Path: <java-user-return-28432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88294 invoked from network); 30 May 2007 18:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:34:47 -0000
Received: (qmail 18796 invoked by uid 500); 30 May 2007 18:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18762 invoked by uid 500); 30 May 2007 18:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18748 invoked by uid 99); 30 May 2007 18:34:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:34:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:34:36 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4UIYEXr399550
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 18:34:14 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4UIYEto3665946
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 20:34:14 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4UIYDNX019678
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 20:34:13 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4UIYDAv019666
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 20:34:13 +0200
In-Reply-To: <f81fa4180705301120w11f6283dn464f361a10acfeb7@mail.gmail.com>
Subject: Re: Is it possible to do near terms without using phrase slop in query
 parser syntax?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF13C0AD5F.FCC167A3-ON882572EB.00650774-882572EB.0065C0E3@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 30 May 2007 11:31:25 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 30/05/2007 21:34:13
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Daniel Einspanjer" <deinspanjer@gmail.com> wrote on 30/05/2007 11:20:51:

> I want to keep the ability to specify how far part something is
> allowed to be, but from what I understood of Doron's response, I might
> lose that if I overrode sloppyFreq.

Just to clarify: sloopyFreq is invoked only for valid distances.
So overriding it to return a constant would just cause not to
reward a shorter distance over a longer (valid) distance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 18:35:14 2007
Return-Path: <java-user-return-28433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96661 invoked from network); 30 May 2007 18:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 18:35:13 -0000
Received: (qmail 20880 invoked by uid 500); 30 May 2007 18:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20839 invoked by uid 500); 30 May 2007 18:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20828 invoked by uid 99); 30 May 2007 18:35:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:35:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ryantxu@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 11:35:04 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1122786nzc
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 11:34:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cnYL6x1Dbs08AJz5UFCXO7h3RkmqnWhE8W3/hXfdM8nhsrrw5P6kKu9UrdVSrtE9GMikb15emSJ+fIgBaEnr8ulQovOgtASnLAyL7SzWxwSSDFdSjyYBZEB2SOG6RAxSlJsSMS9MPOwYW/sB4JGCCzCcxWE62GbM+NCagB2RG2w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Aw1G/zY6dxrfXoTYHpON9FBLSDfsdm80E6ihsfT4L8I/2CGdZYHNT9rp3sBPgtTVhHkEjAohVhglSNc91M31lfFgSk7IN0HcLB61FHBf1ju1IbD/7CsrVVodyoLxQAwpjcD/sJiOBBkZ5nzcllXjMjzcNL/KlKMkBPExRdEafXg=
Received: by 10.114.174.2 with SMTP id w2mr4149247wae.1180550083328;
        Wed, 30 May 2007 11:34:43 -0700 (PDT)
Received: from ?127.0.0.1? ( [24.7.67.61])
        by mx.google.com with ESMTP id m6sm520104wag.2007.05.30.11.34.41;
        Wed, 30 May 2007 11:34:42 -0700 (PDT)
Message-ID: <465DC398.3020101@gmail.com>
Date: Wed, 30 May 2007 11:34:00 -0700
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MoreLikeThis API changes?
References: <324465.77161.qm@web26001.mail.ukl.yahoo.com>
In-Reply-To: <324465.77161.qm@web26001.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mark harwood wrote:
>>> I want to return the "interesting" terms used for MLT
> 
> Could you do this using Query.extractTerms() on the rewritten version of the MoreLikeThis query (a BooleanQuery)?
> 

thanks!  that works and avoids the PriorityQueue traverstal problems.  I 
can even get the boost (normalized tf/idf) using BooleanQuery.clauses().

I will post a patch that:

1. lets you set the Similarity
2. makes isNoiseWord() protected

thanks
ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 19:05:27 2007
Return-Path: <java-user-return-28434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7009 invoked from network); 30 May 2007 19:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 19:05:27 -0000
Received: (qmail 80291 invoked by uid 500); 30 May 2007 19:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80253 invoked by uid 500); 30 May 2007 19:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80239 invoked by uid 99); 30 May 2007 19:05:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 12:05:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 12:05:17 -0700
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l4UJ4sd4026661
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:04:54 -0400
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4UJ4sar547588
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:04:54 -0400
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4UJ4sxk013914
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:04:54 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4UJ4ste013904
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:04:54 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: restricting hits to a subset of "id"s
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFBDD23C77.C7F55FD8-ON852572EB.0067F1EA-852572EB.0068D146@us.ibm.com>
Date: Wed, 30 May 2007 15:04:54 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 05/30/2007 15:04:56,
	Serialize complete at 05/30/2007 15:04:56
Content-Type: multipart/alternative; boundary="=_alternative 0068D054852572EB_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0068D054852572EB_=
Content-Type: text/plain; charset="US-ASCII"

I'm relatively new to Lucene-- I think I know the answer to this, but in 
case I'm wrong I'd like to know.

In our application we are looking for hits in a large corpus of resumes. 
The documents are rather simple:
simply a person id and a text field.  The query is something like 
a "more like this" application. This is working very well right out of the 
box. However my user would
like to input a subset of all the person ids and only return those hits 
that are among that list. This input 
list is likely to be many thousands of people. The people in this list 
won't fall into any obvious
categories by which this could be dealt with by an appropriate query to 
the index, if the people had
been tagged at indexing time. It will be essentially a "random" list of 
person ids.

My guess is that my user would really like the scoring to be done only 
considering that subset of person ids as
well but we haven't explicitly discussed it and I'm pretty sure that the 
scoring is based on information in
the entire index and can't be changed on the fly, correct?

In any case it seems to me that the "natural" way to only return people 
who are in the original input list
is to simply use Lucene as it is, getting all the hits I need, and then 
only returning out of the application those on 
the original input list. Does this seem appropriate?
Thanks in advance for any pointers--

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0068D054852572EB_=--

From java-user-return-28435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 19:16:12 2007
Return-Path: <java-user-return-28435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10886 invoked from network); 30 May 2007 19:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 19:16:10 -0000
Received: (qmail 96327 invoked by uid 500); 30 May 2007 19:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96288 invoked by uid 500); 30 May 2007 19:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96270 invoked by uid 99); 30 May 2007 19:16:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 12:16:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 12:16:02 -0700
Received: by py-out-1112.google.com with SMTP id a25so227643pyi
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 12:15:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=TNmBSQbEp3XLZ+BuZU2zniv0vPzFVDfRsepdtSuD5GoQw522lQe81hNyrZsPnncfckhXGeIjwMlqu3J4bApGeSmRlBcD+3yDzeNzhiZA6W14LDHrYnKXX9Y28Uxgtn3nESc/CLI9AiPdu2bsIEp70HI7ABwLF3WKLKfAxh6usEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=fGsSYYjkEX3B3wGmx1qMq6SPM66nVOsdqr54bYPvOohOGUPcY2jJudWAmYCJf27xUwP7wfFplZdXpenY782CnI/x+Z3RmdQLLr8d7zgjGFGKsoYQaXGQC/VMCg6Rct/Q1Gu3a+fCXHLGTkG+kR/Zs48xw02e0wDz8AprEIvaN+Q=
Received: by 10.35.98.3 with SMTP id a3mr12805069pym.1180552540863;
        Wed, 30 May 2007 12:15:40 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Wed, 30 May 2007 12:15:40 -0700 (PDT)
Message-ID: <c68e39170705301215s1d17b2e5n6ac0c142a9712113@mail.gmail.com>
Date: Wed, 30 May 2007 15:15:40 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: restricting hits to a subset of "id"s
In-Reply-To: <OFBDD23C77.C7F55FD8-ON852572EB.0067F1EA-852572EB.0068D146@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OFBDD23C77.C7F55FD8-ON852572EB.0067F1EA-852572EB.0068D146@us.ibm.com>
X-Google-Sender-Auth: 25a5b87d020e34f6
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/30/07, Donna L Gresh <gresh@us.ibm.com> wrote:
> My guess is that my user would really like the scoring to be done only
> considering that subset of person ids as
> well but we haven't explicitly discussed it and I'm pretty sure that the
> scoring is based on information in
> the entire index and can't be changed on the fly, correct?

Yes, term document frequency (used for idf - inverse document
frequency) will be based on the whole index.

> In any case it seems to me that the "natural" way to only return people
> who are in the original input list
> is to simply use Lucene as it is, getting all the hits I need, and then
> only returning out of the application those on
> the original input list. Does this seem appropriate?
> Thanks in advance for any pointers--

It's probably easier to use a Filter (which essentially does the same
thing at a lower level in the search API).

Use termDocs(Term) to look up the ids, add them to a BitSet, and make
a Filter with that.
You might want to check out CachingWrapperFilter or QueryFilter too.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 20:45:51 2007
Return-Path: <java-user-return-28436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2108 invoked from network); 30 May 2007 20:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 20:45:50 -0000
Received: (qmail 92814 invoked by uid 500); 30 May 2007 20:45:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92774 invoked by uid 500); 30 May 2007 20:45:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92763 invoked by uid 99); 30 May 2007 20:45:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 13:45:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 13:45:42 -0700
Received: by wa-out-1112.google.com with SMTP id k17so1244034waf
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 13:45:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=qnyfcze7GU+tUdS8ONPNYqo+5Rb7m21pn5z4w99IiBoT7YMjYZ4bguy55yT/iCKzqqBhlmoFTmZiHu/AHW0keRMbMv0yXzmdVGp7oCoQmCqZuaSXuz9vv+qtH5DEaHMXa85st0zzSFgaOy7bHTqoCwiLHcYGCprSerRpsM2bNrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jkXHNZULGVbkITPIAN3o0upevsHYn51fxijoNdKFSpePwb5cbtNyQwEE5CQ6syD/RGsF3dmZQrReAuurlZxszsbNk1pOZcBeuEPrP1oTUZI2miqNBiw2/gIq36bHqoOZF3FUUov3D4mciZ0B4TgkH0Cu0A0Ee5sYuswxpJc4x7U=
Received: by 10.115.109.1 with SMTP id l1mr4244126wam.1180557922008;
        Wed, 30 May 2007 13:45:22 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Wed, 30 May 2007 13:45:21 -0700 (PDT)
Message-ID: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
Date: Wed, 30 May 2007 16:45:21 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: The values which compute scores.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hopefully I'm not opening myself up to public ridicule with what may
be a very stupid question, but...

At the moment, I'm trying to wrap my head around some of the math that
happens when Lucene does scoring.  Let's put aside the big equation
for a moment and focus on a simple method, such as tf().  [term
frequency]

I understand that tf(freq) is supposed to return larger values when
freq is large, and smaller values when freq is small.  Though here's
what making me scratch my head today:

a) Where does freq come from?  (Not what is it, but who computes it and how?)

Reason I ask is:

b) How do I know what "large" and "small" is, as I don't really have a
relative scale of what the max and min values are?  Should I just
assume a linear scale of 1.0 to 0.0 will be passed to the method?

But then that begs the question...

c) What values should I be passing out of a function like this?
Should I normalize my outgoing scores to some scale, or do I simply
just need to provide numbers that "have the right shaped curve".

I wish the documentation shed a smidgen bit more light in those areas.


I look at things like idf() which returns 1+log(ratio) and then has
that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.

I feel like there may be some mathematical trickery going on and that
maybe the actual score values themselves don't matter inside the
ranking code, so long as their relative values to one another.

This then makes me ponder how the normalization process is done
between queries, allowing for a mix'n'match of results as these
numbers spill to the outside world.  Obviously normalization has to
happen at that point for the mixing query results magic to work.


Is there a math wizard in the group who can talk to me like I'm four years old?

-wls
http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 21:07:36 2007
Return-Path: <java-user-return-28437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41731 invoked from network); 30 May 2007 21:07:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 21:07:35 -0000
Received: (qmail 42488 invoked by uid 500); 30 May 2007 21:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42433 invoked by uid 500); 30 May 2007 21:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42416 invoked by uid 99); 30 May 2007 21:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 14:07:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 14:07:26 -0700
Received: by py-out-1112.google.com with SMTP id a25so301640pyi
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 14:07:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Ne134aKq8IlAazeHKngl0Vzn94YkTFzwSZi8xpEkmWumBLLmLROWun1uNr81YPmKe08ex3VzFV+oFiIpuvpftSltkYORjhIMB7QLi5nDcw0sU6nWlDuxHJ20XERAwevQ7NbGQw/ysAAtBZeBbyD1hAnKN07K0Bts9FBVYIfXKVM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=atn3S/cVZWaQGjuRgUuRApZteePMUBfpGeXU5vFftfnxB2Owy7G3FUoDH4mtOkl+ZcyEiKiSA/S1SzcCoHaWPM+PTA9ApQsvtfE5DYcNirKx/rZflkl26h+vQ1ZeNPO8RpesAr3tnjyICjLrpZPnDFwio4szw64NisyJCcIgujc=
Received: by 10.35.85.16 with SMTP id n16mr9755421pyl.1180559225635;
        Wed, 30 May 2007 14:07:05 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Wed, 30 May 2007 14:07:05 -0700 (PDT)
Message-ID: <c68e39170705301407s20ca283ev1215de9aa239fc44@mail.gmail.com>
Date: Wed, 30 May 2007 17:07:05 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores.
In-Reply-To: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
X-Google-Sender-Auth: 7def411f4b57f58c
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/30/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
> a) Where does freq come from?  (Not what is it, but who computes it and how?)

For a single term, it's determined at index time and stored in the index.
TermDocs gives you a list of documents containing the term, and for
each document, the number of time the term appears (the freq).

Note: TermScorer calls the tf(int) version on Similarity rather than
the tf(float) version.

> c) What values should I be passing out of a function like this?
> Should I normalize my outgoing scores to some scale, or do I simply
> just need to provide numbers that "have the right shaped curve".

Hits normalizes to 1 based on the max score, if that max score is
greater than 1.
Scores across queries aren't really comparable though.

> I look at things like idf() which returns 1+log(ratio) and then has
> that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.
>
> I feel like there may be some mathematical trickery going on and that
> maybe the actual score values themselves don't matter inside the
> ranking code, so long as their relative values to one another.

Pretty much.

> This then makes me ponder how the normalization process is done
> between queries, allowing for a mix'n'match of results as these
> numbers spill to the outside world.  Obviously normalization has to
> happen at that point for the mixing query results magic to work.

Lucene doesn't currently do this "mixing", and it's not really clear
to me how it should be done.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 22:01:23 2007
Return-Path: <java-user-return-28438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31864 invoked from network); 30 May 2007 22:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 22:01:22 -0000
Received: (qmail 25623 invoked by uid 500); 30 May 2007 22:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25588 invoked by uid 500); 30 May 2007 22:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25577 invoked by uid 99); 30 May 2007 22:01:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 15:01:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a16.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 15:01:13 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id C15FD7CC74
	for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:00:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
References: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9C16DB55-D91F-44E5-B819-1671DAF5339A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: The values which compute scores.
Date: Wed, 30 May 2007 18:00:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Walt,

One question that comes to mind, is what are you looking to do?  Are  
you not happy with the current scoring or you just trying to better  
understand scoring?  The calls to Similarity.tf(), etc. are call  
backs from within the scoring algorithm (have a look at TermScorer in  
the code) and provide a means for an application to change the score,  
but in many cases there really isn't too much incentive to do so.

-Grant


On May 30, 2007, at 4:45 PM, Walt Stoneburner wrote:

> Hopefully I'm not opening myself up to public ridicule with what may
> be a very stupid question, but...
>
> At the moment, I'm trying to wrap my head around some of the math that
> happens when Lucene does scoring.  Let's put aside the big equation
> for a moment and focus on a simple method, such as tf().  [term
> frequency]
>
> I understand that tf(freq) is supposed to return larger values when
> freq is large, and smaller values when freq is small.  Though here's
> what making me scratch my head today:
>
> a) Where does freq come from?  (Not what is it, but who computes it  
> and how?)
>
> Reason I ask is:
>
> b) How do I know what "large" and "small" is, as I don't really have a
> relative scale of what the max and min values are?  Should I just
> assume a linear scale of 1.0 to 0.0 will be passed to the method?
>
> But then that begs the question...
>
> c) What values should I be passing out of a function like this?
> Should I normalize my outgoing scores to some scale, or do I simply
> just need to provide numbers that "have the right shaped curve".
>
> I wish the documentation shed a smidgen bit more light in those areas.
>
>
> I look at things like idf() which returns 1+log(ratio) and then has
> that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.
>
> I feel like there may be some mathematical trickery going on and that
> maybe the actual score values themselves don't matter inside the
> ranking code, so long as their relative values to one another.
>
> This then makes me ponder how the normalization process is done
> between queries, allowing for a mix'n'match of results as these
> numbers spill to the outside world.  Obviously normalization has to
> happen at that point for the mixing query results magic to work.
>
>
> Is there a math wizard in the group who can talk to me like I'm  
> four years old?
>
> -wls
> http://www.wwco.com/~wls/blog/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed May 30 22:06:57 2007
Return-Path: <java-user-return-28439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45279 invoked from network); 30 May 2007 22:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 May 2007 22:06:56 -0000
Received: (qmail 31703 invoked by uid 500); 30 May 2007 22:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31662 invoked by uid 500); 30 May 2007 22:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31651 invoked by uid 99); 30 May 2007 22:06:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 15:06:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 15:06:49 -0700
Received: by wr-out-0506.google.com with SMTP id 36so1060229wra
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 15:06:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=s9rOQbJbJFWXT9zesEpOGyBc4+dk0KU9bctIlU+H/9abI9Yl4WYJbUrvQ8abwxIwxO7PIDu+Tg6hoQFlIHcVbUQMS2bkOhAQrIJ4ftiPZTPXYVTrd4v3dYk61b92Z3yRxZqLL+wNwSxF+KRlLiXfqm6JCsuEuBDBvvFfO5AglKI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ab/cIStIZrjQ93fqLpORgTTyGDFFMEQ+4vhVq6oY97NUTT2YPKdj/Pdd6lpTVx6hB4IiYht6u8WuG3USwdW8RbihJCCyVpGVV39DhKaYxHZQ6u2oJRvbTEoNdgFPAeVCj3BnJpFtlgLC9nYeOvV+I3RWEyoRXkF/tU4f6ywSoNI=
Received: by 10.82.180.17 with SMTP id c17mr14685709buf.1180562788009;
        Wed, 30 May 2007 15:06:28 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Wed, 30 May 2007 15:06:27 -0700 (PDT)
Message-ID: <f81fa4180705301506i24c5e00y43d9cea57499c02d@mail.gmail.com>
Date: Wed, 30 May 2007 18:06:27 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
In-Reply-To: <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
	 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
	 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
	 <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
	 <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : Not really.  The explain scores aren't normalized and I also couldn't
> : find a way to get the explain data as anything other than a whitespace
> : formatted text blob from Solr.  Keep in mind that they need confidence
>
> the defualt way Solr dumps score explainations is just as plain text, but
> the Explanation objects are actually fairly well structured, and easy to
> walk in a custom request handler -- this would let you make direct
> comparisons of the various peices of the Explanations from doc 1 with doc
> 2 if you wanted.

Does anyone have any experience with examining Explanation objects in
a custom request handler?

I started this project using Solr on top of Lucene because I wanted
the flexibility it provided. The ability to have dynamic field names
so the user could configure what fields they wanted to index and how
they wanted them to be indexed (using field type configurations good
for titles or for person names or for years, etc.).

What I quickly found I could do without though was the HTTP overhead.
I implemented the EmbeddedSolr class found on the Solr wiki that let
me interact with the Solr engine directly. This is important since I'm
doing thousands of queries in a batch.

I need to find out about this custom request handler thing. If anyone
has any example code, it would be greatly appreciated.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 00:18:53 2007
Return-Path: <java-user-return-28440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9498 invoked from network); 31 May 2007 00:18:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 00:18:51 -0000
Received: (qmail 98639 invoked by uid 500); 31 May 2007 00:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98597 invoked by uid 500); 31 May 2007 00:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98586 invoked by uid 99); 31 May 2007 00:18:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 17:18:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 17:18:42 -0700
Received: by an-out-0708.google.com with SMTP id b20so831952ana
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 17:18:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PBCqeHQ1IKBhLfKEVntZ2/oaDqe1ZCTDXuJiqq1apE6qerjn8yCNOu4ekKZV9wptvYawgu8KvY+5V0MaLKQK6RloRnPefUm9rdreWfl3d+IMVyz8WLfpdKj0ponELgldNirMo515N2Ci4woD6a5UrHWUOO7hfi3KfjbWZobKThw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G47Rmr2RLP7+CA6y8GvNReJDD/6j23kj9D5MyWAX4dSPc66mfKK/Wv+390hTCv/xmGWRGaum9Z74xwET3diw1brTnzcE5DJjlLuEVW2a9Gvd98/uP8QkIvQB1+ahfOCVjrnlxbw5+wEbKa3B/k5Kqt2veJqNxoEx6pMezU4gtKY=
Received: by 10.78.122.16 with SMTP id u16mr2474864huc.1180570690584;
        Wed, 30 May 2007 17:18:10 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Wed, 30 May 2007 17:18:10 -0700 (PDT)
Message-ID: <f81fa4180705301718u6fa70a63m67a0ef1ce69f8d42@mail.gmail.com>
Date: Wed, 30 May 2007 20:18:10 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores.
In-Reply-To: <9C16DB55-D91F-44E5-B819-1671DAF5339A@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ae6f38f60705301345h7b158b7bo81058418c6ba5e49@mail.gmail.com>
	 <9C16DB55-D91F-44E5-B819-1671DAF5339A@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

This may be a five year old explaining to a four year old why the sky
is blue, but I'll share some of the stuff I've picked up. :)

My application isn't so much a search engine as a matching engine.  I
take a large list of movie documents from a customer like a movie
channel or a cable provider and match that list against the movies our
company has classified.  I wrote a query parser on top of the native
query parser that understands interpolated terms such as
+title_fuzzy_multivalued:"${LongTitle}" and it will pull the LongTitle
field from the customer movie and plug it into that term.

The huge problem I ran into was one of scoring.  Since this is
matching not searching, and since the interpolation causes the query
from item A to be different from item B and likely wildly different
from the queries used in a different customer's matching, I really
needed a good score that could be compared across the board.

The solution I opted for was what I call perfect score normalization.
Basically, I index both the customer feed and the classified feed.
When the user of my system is adding a new feed to the system, they
define field alignments, e.g. they map the customer's LongTitle field
to the title field of the classified feed.  Then, they define the
appropriate indices to use for each field alignment, e.g. they might
index the title fields using the title_strict_string_multivalue and
the title_fuzzy_terms_multivalue indices.

Now that I have these common indices, when I perform the matching run,
I interpolate the query using the values for the source item and get
both the best match from the classified feed (using a Solr filter
query to restrict the result set to only items with the classified
feed id) and the match for the customer item (using a filter query on
that item's ID).  Now that I have these two scores, they are
comparable in the sense that the score of the customer item is "as
good as it gets".  I divide the match score by the reference item
score and if the value is greater than one for some reason, I subtract
the amount above one from one to penalize it for being "too good".

This strategy required a few tweaks in the Similarity class.  I have
actor name phrase queries with a word slop of two so that I can match
First Last to Last, First. I made my tf(float) function return 0 or 1
so that the scores for those two items look the same.  tf also matters
in the case of multiple hits of a term within a field such as title.
If I am matching a movie with the title "Caesar Came Saw and
Conquered", I don't want the title "Caesar Came, Caesar Saw, Caesar
Conquered" to have a higher score just because the word Caesar is
repeated.

I customize the idf() function to always return a 1 for year fields
because it could do funny things to a score if the source item had a
year 1984 and my query term was year_year:[${year -1} TO ${year +1}]
and there was only one item with a year of 1983. The 1983 would
actually score higher than the 1984.

I'm currently looking at whether overriding queryNorm() to always
return 1 is a good thing or not.  I saw reference in a recent thread
that doing that might cause ^ boosts in terms or clauses to not work
right so I need to go back and study that again.

The other big thing that I'm doing is that the user doesn't define the
query in one big lump. They break it down into scoring sections. all
the title related terms are in one section and all the year related
terms in a different one.  The user defines weights that each of these
sections should contribute to my "weighted score".  I run individual
queries for each of these scoring sections against the source and
target items and record those normalized scores then multiply them by
their weights and add them up to get my weighted score.
This strategy is working pretty well, but it is slow because of all
the extra queries.  I know that I can eliminate them by getting access
to the Explanation object and parsing out the scores I want there, but
that is what I am in the middle of researching how to do now. :)

Anyway.. some of this might be useful to you or maybe it is all
babble. You are either welcome or asked for forgiveness respectively.
:)

Daniel

On 5/30/07, Grant Ingersoll <gsingers@apache.org> wrote:
> Hi Walt,
>
> One question that comes to mind, is what are you looking to do?  Are
> you not happy with the current scoring or you just trying to better
> understand scoring?  The calls to Similarity.tf(), etc. are call
> backs from within the scoring algorithm (have a look at TermScorer in
> the code) and provide a means for an application to change the score,
> but in many cases there really isn't too much incentive to do so.
>
> -Grant
>
>
> On May 30, 2007, at 4:45 PM, Walt Stoneburner wrote:
>
> > Hopefully I'm not opening myself up to public ridicule with what may
> > be a very stupid question, but...
> >
> > At the moment, I'm trying to wrap my head around some of the math that
> > happens when Lucene does scoring.  Let's put aside the big equation
> > for a moment and focus on a simple method, such as tf().  [term
> > frequency]
> >
> > I understand that tf(freq) is supposed to return larger values when
> > freq is large, and smaller values when freq is small.  Though here's
> > what making me scratch my head today:
> >
> > a) Where does freq come from?  (Not what is it, but who computes it
> > and how?)
> >
> > Reason I ask is:
> >
> > b) How do I know what "large" and "small" is, as I don't really have a
> > relative scale of what the max and min values are?  Should I just
> > assume a linear scale of 1.0 to 0.0 will be passed to the method?
> >
> > But then that begs the question...
> >
> > c) What values should I be passing out of a function like this?
> > Should I normalize my outgoing scores to some scale, or do I simply
> > just need to provide numbers that "have the right shaped curve".
> >
> > I wish the documentation shed a smidgen bit more light in those areas.
> >
> >
> > I look at things like idf() which returns 1+log(ratio) and then has
> > that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.
> >
> > I feel like there may be some mathematical trickery going on and that
> > maybe the actual score values themselves don't matter inside the
> > ranking code, so long as their relative values to one another.
> >
> > This then makes me ponder how the normalization process is done
> > between queries, allowing for a mix'n'match of results as these
> > numbers spill to the outside world.  Obviously normalization has to
> > happen at that point for the mixing query results magic to work.
> >
> >
> > Is there a math wizard in the group who can talk to me like I'm
> > four years old?
> >
> > -wls
> > http://www.wwco.com/~wls/blog/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 00:31:12 2007
Return-Path: <java-user-return-28441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62353 invoked from network); 31 May 2007 00:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 00:31:11 -0000
Received: (qmail 11484 invoked by uid 500); 31 May 2007 00:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11441 invoked by uid 500); 31 May 2007 00:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11429 invoked by uid 99); 31 May 2007 00:31:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 17:31:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 17:31:03 -0700
Received: by wr-out-0506.google.com with SMTP id 36so1083553wra
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 17:30:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=s6LEEYtMYgE8SprGfU0oLHdZMpvu4G8mrHISz/cwg1K/S7iwyU5frQkmThGVpHAIB8zQyO4236vzUCPDk+AcS7QN8teqsIPeiCAP1jhPRWfuqGX/xbWZeUOh7PobMet0hXOqkZdjz/JAQlg7eDur492FFHiG0XBqdVClRVlb7YA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FP4SnQvCzkmaIIdirEYxZ9hUBZnzJ7cVNqr3nSSMmqyCm1X5W96i9ulbZ97wTdCDu5ZB4wvQtXQk/iT9hKbu2sDWhQ9r2RwJA//3c1EaHPulyubJC5zkx6S/6MEGWmO86MMCGm1JtW/yDF7FOfCDDqiSr68ZBV/ietfXFRH//VU=
Received: by 10.78.56.19 with SMTP id e19mr881820hua.1180571441580;
        Wed, 30 May 2007 17:30:41 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Wed, 30 May 2007 17:30:41 -0700 (PDT)
Message-ID: <f81fa4180705301730w4f53f560xf8565bf23c2c5b9@mail.gmail.com>
Date: Wed, 30 May 2007 20:30:41 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is it possible to do near terms without using phrase slop in query parser syntax?
In-Reply-To: <OF13C0AD5F.FCC167A3-ON882572EB.00650774-882572EB.0065C0E3@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180705301120w11f6283dn464f361a10acfeb7@mail.gmail.com>
	 <OF13C0AD5F.FCC167A3-ON882572EB.00650774-882572EB.0065C0E3@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hrm. So maybe I need to go back and take another look at that. I think
I might still need to be overriding tf() to handle the other issue I
mentioned in the thread I replied to just before this about Caesar
appearing multiple times in one title.

On 5/30/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> "Daniel Einspanjer" <deinspanjer@gmail.com> wrote on 30/05/2007 11:20:51:
>
> > I want to keep the ability to specify how far part something is
> > allowed to be, but from what I understood of Doron's response, I might
> > lose that if I overrode sloppyFreq.
>
> Just to clarify: sloopyFreq is invoked only for valid distances.
> So overriding it to return a constant would just cause not to
> reward a shorter distance over a longer (valid) distance.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 01:13:16 2007
Return-Path: <java-user-return-28442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35596 invoked from network); 31 May 2007 01:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 01:13:15 -0000
Received: (qmail 44879 invoked by uid 500); 31 May 2007 01:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44835 invoked by uid 500); 31 May 2007 01:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44824 invoked by uid 99); 31 May 2007 01:13:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 18:13:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 18:13:08 -0700
Content-class: urn:content-classes:message
Subject: hitcollector
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7A320.AFC7881E"
Date: Wed, 30 May 2007 20:11:58 -0500
Message-ID: <9E9C06BD88103141AE5832E5265F4CA19324@bettylou.configureone.net>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: hitcollector
Thread-Index: AcejIKUKzhgFjdJqQAq0PNQWGz7uEg==
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7A320.AFC7881E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Thanks to the "hitcollector" suggestion.  It worked very well!    we
have such a small index, but the categories are complicated, sequenced
and can be related in various ways that their structure is very
important to the users.    so now I can get a list of "used categories"
with a hitcollector instead of pulling a Hits that was costing me an
enormous amount of memory.     Thank you for the suggestion and thank
you lucene for rockin!


------_=_NextPart_001_01C7A320.AFC7881E--

From java-user-return-28443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 01:31:11 2007
Return-Path: <java-user-return-28443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69334 invoked from network); 31 May 2007 01:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 01:31:10 -0000
Received: (qmail 67560 invoked by uid 500); 31 May 2007 01:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67502 invoked by uid 500); 31 May 2007 01:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67481 invoked by uid 99); 31 May 2007 01:31:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 18:31:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 May 2007 18:30:59 -0700
Received: by py-out-1112.google.com with SMTP id a25so16445pyi
        for <java-user@lucene.apache.org>; Wed, 30 May 2007 18:30:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=F7m2L+EIF8UO1Jcmr3YtL1rTFID1JazVmtJ3/Smku3fY0cj32CEFyt/y3Jy7LQweX+/V1h8S/mVnKD2Hltwk0X4ouU/hLuyS4Dxd9Lg/yQm3fTgtUVjQnxNFdZHIQjjuA2iI26DgfxsTJqCIA9ya53AaDpB0fyxChebVvFIFR4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=QHwt7Zd5eKaYlFP8vRDV9FisAf1pY9n1IEFErE1VV+OWzZ/NNp/U4NZYQz7PjB3oQRujx6qmyVrIfi8FdAM+A83hBZaYGWxqvh6kn8JhKjezCxxQjH6yrvAzqEziy429M5VlCx74vjXeqOrQdKe5wGVFXvgodtJzjRwWDfPAVQs=
Received: by 10.35.106.1 with SMTP id i1mr149244pym.1180575038151;
        Wed, 30 May 2007 18:30:38 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Wed, 30 May 2007 18:30:38 -0700 (PDT)
Message-ID: <c68e39170705301830i26babd79q98e6156967d181bb@mail.gmail.com>
Date: Wed, 30 May 2007 21:30:38 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Ideas for a relevance score that could be considered stable across multiple searches with the same query structure?
Cc: solr-user@lucene.apache.org
In-Reply-To: <f81fa4180705301506i24c5e00y43d9cea57499c02d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180704100504q142073c2n5ad0e88f0fff7579@mail.gmail.com>
	 <f81fa4180704101703x3c48d42ei529da26c6c8132ac@mail.gmail.com>
	 <0315F020-F9E4-41FB-AABA-E02D2B5D0649@apache.org>
	 <f81fa4180704110704mef44a69j1d1b90ead93f0e30@mail.gmail.com>
	 <Pine.LNX.4.58.0704111528010.5697@hal.rescomp.berkeley.edu>
	 <f81fa4180705301506i24c5e00y43d9cea57499c02d@mail.gmail.com>
X-Google-Sender-Auth: 64d481c59b8d24e7
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/30/07, Daniel Einspanjer <deinspanjer@gmail.com> wrote:
> What I quickly found I could do without though was the HTTP overhead.
> I implemented the EmbeddedSolr class found on the Solr wiki that let
> me interact with the Solr engine directly. This is important since I'm
> doing thousands of queries in a batch.
>
> I need to find out about this custom request handler thing. If anyone
> has any example code, it would be greatly appreciated.

Yes, a custom query handler is a better way to go than EmbeddedSolr if
you are looking to implement custom query logic (thousands of
sub-requests for a single app-level request), while keeping the
benefits of a stand-alone server with the HTTP interfaces.

The standard and dismax request handlers use the exact same mechanism
as a custom request handler would.  See the StandardRequestHander and
start from there.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 07:36:35 2007
Return-Path: <java-user-return-28444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69766 invoked from network); 31 May 2007 07:36:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 07:36:34 -0000
Received: (qmail 19459 invoked by uid 500); 31 May 2007 07:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19432 invoked by uid 500); 31 May 2007 07:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19421 invoked by uid 99); 31 May 2007 07:36:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 00:36:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 00:36:23 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l4V7a1YB378924
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 07:36:01 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4V7a1ZX3936404
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 09:36:01 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4V7a0rM027911
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 09:36:00 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4V7a0T4027906
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 09:36:00 +0200
In-Reply-To: <f81fa4180705301718u6fa70a63m67a0ef1ce69f8d42@mail.gmail.com>
Subject: Re: The values which compute scores.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFE8D9A096.FCC5A2DB-ON882572EC.002751C5-882572EC.00296D90@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 31 May 2007 00:32:30 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 31/05/2007 10:36:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I have no particular experience with matching
problems so the following might be off target...

Anyhow, if I understand correctly, problem is that,
currently, given a set of customer film descriptions
{D1, D2, ... , Dn}, a set of n queries are created
and each query can match at most one film in the
classification index, and it is impossible for both D1
and D2 to match the same classified film F. But if
both q1 and q2 matched a certain film F, some score
normalization is required in order to select: F matches
D1, or F matches D2.

If so, I am not sure that deep tuning of Lucene
scores is the best way to go.

How about the following alternative:
(1) Create an auxiliary index containing all (and
only) the customer documents. So each document in
the aux index represents a customer film description.
(2) For each customer document D, create the query Q,
and run it on the combined index (using a MultiReader
over the auxiliary index (reader) and the classification
index (reader). The customer document D (from the aux
index) is supposed to be the top result. Ignore all
other scores from the aux index. Use this (max) score
of D to normalize all the scores of film docs from the
classification index.

HTH,
Doron

"Daniel Einspanjer" <deinspanjer@gmail.com> wrote on 30/05/2007 17:18:10:

> This may be a five year old explaining to a four year old why the sky
> is blue, but I'll share some of the stuff I've picked up. :)
>
> My application isn't so much a search engine as a matching engine.  I
> take a large list of movie documents from a customer like a movie
> channel or a cable provider and match that list against the movies our
> company has classified.  I wrote a query parser on top of the native
> query parser that understands interpolated terms such as
> +title_fuzzy_multivalued:"${LongTitle}" and it will pull the LongTitle
> field from the customer movie and plug it into that term.
>
> The huge problem I ran into was one of scoring.  Since this is
> matching not searching, and since the interpolation causes the query
> from item A to be different from item B and likely wildly different
> from the queries used in a different customer's matching, I really
> needed a good score that could be compared across the board.
>
> The solution I opted for was what I call perfect score normalization.
> Basically, I index both the customer feed and the classified feed.
> When the user of my system is adding a new feed to the system, they
> define field alignments, e.g. they map the customer's LongTitle field
> to the title field of the classified feed.  Then, they define the
> appropriate indices to use for each field alignment, e.g. they might
> index the title fields using the title_strict_string_multivalue and
> the title_fuzzy_terms_multivalue indices.
>
> Now that I have these common indices, when I perform the matching run,
> I interpolate the query using the values for the source item and get
> both the best match from the classified feed (using a Solr filter
> query to restrict the result set to only items with the classified
> feed id) and the match for the customer item (using a filter query on
> that item's ID).  Now that I have these two scores, they are
> comparable in the sense that the score of the customer item is "as
> good as it gets".  I divide the match score by the reference item
> score and if the value is greater than one for some reason, I subtract
> the amount above one from one to penalize it for being "too good".
>
> This strategy required a few tweaks in the Similarity class.  I have
> actor name phrase queries with a word slop of two so that I can match
> First Last to Last, First. I made my tf(float) function return 0 or 1
> so that the scores for those two items look the same.  tf also matters
> in the case of multiple hits of a term within a field such as title.
> If I am matching a movie with the title "Caesar Came Saw and
> Conquered", I don't want the title "Caesar Came, Caesar Saw, Caesar
> Conquered" to have a higher score just because the word Caesar is
> repeated.
>
> I customize the idf() function to always return a 1 for year fields
> because it could do funny things to a score if the source item had a
> year 1984 and my query term was year_year:[${year -1} TO ${year +1}]
> and there was only one item with a year of 1983. The 1983 would
> actually score higher than the 1984.
>
> I'm currently looking at whether overriding queryNorm() to always
> return 1 is a good thing or not.  I saw reference in a recent thread
> that doing that might cause ^ boosts in terms or clauses to not work
> right so I need to go back and study that again.
>
> The other big thing that I'm doing is that the user doesn't define the
> query in one big lump. They break it down into scoring sections. all
> the title related terms are in one section and all the year related
> terms in a different one.  The user defines weights that each of these
> sections should contribute to my "weighted score".  I run individual
> queries for each of these scoring sections against the source and
> target items and record those normalized scores then multiply them by
> their weights and add them up to get my weighted score.
> This strategy is working pretty well, but it is slow because of all
> the extra queries.  I know that I can eliminate them by getting access
> to the Explanation object and parsing out the scores I want there, but
> that is what I am in the middle of researching how to do now. :)
>
> Anyway.. some of this might be useful to you or maybe it is all
> babble. You are either welcome or asked for forgiveness respectively.
> :)
>
> Daniel
>
> On 5/30/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > Hi Walt,
> >
> > One question that comes to mind, is what are you looking to do?  Are
> > you not happy with the current scoring or you just trying to better
> > understand scoring?  The calls to Similarity.tf(), etc. are call
> > backs from within the scoring algorithm (have a look at TermScorer in
> > the code) and provide a means for an application to change the score,
> > but in many cases there really isn't too much incentive to do so.
> >
> > -Grant
> >
> >
> > On May 30, 2007, at 4:45 PM, Walt Stoneburner wrote:
> >
> > > Hopefully I'm not opening myself up to public ridicule with what may
> > > be a very stupid question, but...
> > >
> > > At the moment, I'm trying to wrap my head around some of
> the math that
> > > happens when Lucene does scoring.  Let's put aside the big equation
> > > for a moment and focus on a simple method, such as tf().  [term
> > > frequency]
> > >
> > > I understand that tf(freq) is supposed to return larger values when
> > > freq is large, and smaller values when freq is small.  Though here's
> > > what making me scratch my head today:
> > >
> > > a) Where does freq come from?  (Not what is it, but who computes it
> > > and how?)
> > >
> > > Reason I ask is:
> > >
> > > b) How do I know what "large" and "small" is, as I don't
> really have a
> > > relative scale of what the max and min values are?  Should I just
> > > assume a linear scale of 1.0 to 0.0 will be passed to the method?
> > >
> > > But then that begs the question...
> > >
> > > c) What values should I be passing out of a function like this?
> > > Should I normalize my outgoing scores to some scale, or do I simply
> > > just need to provide numbers that "have the right shaped curve".
> > >
> > > I wish the documentation shed a smidgen bit more light in
> those areas.
> > >
> > >
> > > I look at things like idf() which returns 1+log(ratio) and then has
> > > that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.
> > >
> > > I feel like there may be some mathematical trickery going on and that
> > > maybe the actual score values themselves don't matter inside the
> > > ranking code, so long as their relative values to one another.
> > >
> > > This then makes me ponder how the normalization process is done
> > > between queries, allowing for a mix'n'match of results as these
> > > numbers spill to the outside world.  Obviously normalization has to
> > > happen at that point for the mixing query results magic to work.
> > >
> > >
> > > Is there a math wizard in the group who can talk to me like I'm
> > > four years old?
> > >
> > > -wls
> > > http://www.wwco.com/~wls/blog/
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > --------------------------
> > Grant Ingersoll
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 12:38:43 2007
Return-Path: <java-user-return-28445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8941 invoked from network); 31 May 2007 12:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 12:38:42 -0000
Received: (qmail 25986 invoked by uid 500); 31 May 2007 12:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25956 invoked by uid 500); 31 May 2007 12:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25929 invoked by uid 99); 31 May 2007 12:38:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 05:38:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of deinspanjer@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 05:38:32 -0700
Received: by mu-out-0910.google.com with SMTP id g7so157729muf
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 05:38:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PDQn6fbsIw5aV+9pTDIOvjnSPGJyxNPuP7KUeAETzKeQrvwKyIJ9j98qbLFHTLTksJnEhU/rEWOFd0u1i1KxBdsO4zhOnExzEAkQuOdbJM1Fvacxel4w+oPb8gFzNcl1EoPlCIrwnUwAuKg7atDr1ZgsRXO2LD7oOMv3Et8aLkA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=T+caV9HTOU9XgKF2yDjMWbxYKWMLgYggYCAa8ksPI3vUcAIa/A4779yLQFLZ1BZfmc1FHLHyvimwrx1r/U5hhWoR5DRgKCzZH5FibgBgzqyAc1zKNFeQnj+0CE0RSUaxX/iLITBqnA649FfWvJzv3ai3L5IQQSsLN0msUOE9Ek8=
Received: by 10.82.187.16 with SMTP id k16mr16067567buf.1180615090496;
        Thu, 31 May 2007 05:38:10 -0700 (PDT)
Received: by 10.82.119.3 with HTTP; Thu, 31 May 2007 05:38:09 -0700 (PDT)
Message-ID: <f81fa4180705310538k52130986xe12cbaacd8812db9@mail.gmail.com>
Date: Thu, 31 May 2007 08:38:09 -0400
From: "Daniel Einspanjer" <deinspanjer@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores.
In-Reply-To: <OFE8D9A096.FCC5A2DB-ON882572EC.002751C5-882572EC.00296D90@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f81fa4180705301718u6fa70a63m67a0ef1ce69f8d42@mail.gmail.com>
	 <OFE8D9A096.FCC5A2DB-ON882572EC.002751C5-882572EC.00296D90@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The score normalization is actually more important for purposes of
review. It actually is possible that both D1 and D2 properly match to
F1. Some customers have repeats of the same film (e.g. Spiderman 2 and
Spiderman 2 in HD).  When the system goes through and records the
potential matches, our review team needs to be able to determine
whether these matches are correct or not.  In order to do so quickly
and accurately, they want the ability to judge things like "This is
why it chose this as a match, the title was a poor score, but the
actors and year were very highly scored".  They might mark that as a
good match or as a bad match. Things that are recorded as bad matches
will be avoided on subsequent runs (e.g. the engine will match the
highest scoring item that is not in the blacklist for this source
item).

Having all the customer feeds and the classified feed in one big index
hasn't really caused me any problems so far. The filter queries seem
to work fine for restricting a particular query to one set or the
other.

On 5/31/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> I have no particular experience with matching
> problems so the following might be off target...
>
> Anyhow, if I understand correctly, problem is that,
> currently, given a set of customer film descriptions
> {D1, D2, ... , Dn}, a set of n queries are created
> and each query can match at most one film in the
> classification index, and it is impossible for both D1
> and D2 to match the same classified film F. But if
> both q1 and q2 matched a certain film F, some score
> normalization is required in order to select: F matches
> D1, or F matches D2.
>
> If so, I am not sure that deep tuning of Lucene
> scores is the best way to go.
>
> How about the following alternative:
> (1) Create an auxiliary index containing all (and
> only) the customer documents. So each document in
> the aux index represents a customer film description.
> (2) For each customer document D, create the query Q,
> and run it on the combined index (using a MultiReader
> over the auxiliary index (reader) and the classification
> index (reader). The customer document D (from the aux
> index) is supposed to be the top result. Ignore all
> other scores from the aux index. Use this (max) score
> of D to normalize all the scores of film docs from the
> classification index.
>
> HTH,
> Doron
>
> "Daniel Einspanjer" <deinspanjer@gmail.com> wrote on 30/05/2007 17:18:10:
>
> > This may be a five year old explaining to a four year old why the sky
> > is blue, but I'll share some of the stuff I've picked up. :)
> >
> > My application isn't so much a search engine as a matching engine.  I
> > take a large list of movie documents from a customer like a movie
> > channel or a cable provider and match that list against the movies our
> > company has classified.  I wrote a query parser on top of the native
> > query parser that understands interpolated terms such as
> > +title_fuzzy_multivalued:"${LongTitle}" and it will pull the LongTitle
> > field from the customer movie and plug it into that term.
> >
> > The huge problem I ran into was one of scoring.  Since this is
> > matching not searching, and since the interpolation causes the query
> > from item A to be different from item B and likely wildly different
> > from the queries used in a different customer's matching, I really
> > needed a good score that could be compared across the board.
> >
> > The solution I opted for was what I call perfect score normalization.
> > Basically, I index both the customer feed and the classified feed.
> > When the user of my system is adding a new feed to the system, they
> > define field alignments, e.g. they map the customer's LongTitle field
> > to the title field of the classified feed.  Then, they define the
> > appropriate indices to use for each field alignment, e.g. they might
> > index the title fields using the title_strict_string_multivalue and
> > the title_fuzzy_terms_multivalue indices.
> >
> > Now that I have these common indices, when I perform the matching run,
> > I interpolate the query using the values for the source item and get
> > both the best match from the classified feed (using a Solr filter
> > query to restrict the result set to only items with the classified
> > feed id) and the match for the customer item (using a filter query on
> > that item's ID).  Now that I have these two scores, they are
> > comparable in the sense that the score of the customer item is "as
> > good as it gets".  I divide the match score by the reference item
> > score and if the value is greater than one for some reason, I subtract
> > the amount above one from one to penalize it for being "too good".
> >
> > This strategy required a few tweaks in the Similarity class.  I have
> > actor name phrase queries with a word slop of two so that I can match
> > First Last to Last, First. I made my tf(float) function return 0 or 1
> > so that the scores for those two items look the same.  tf also matters
> > in the case of multiple hits of a term within a field such as title.
> > If I am matching a movie with the title "Caesar Came Saw and
> > Conquered", I don't want the title "Caesar Came, Caesar Saw, Caesar
> > Conquered" to have a higher score just because the word Caesar is
> > repeated.
> >
> > I customize the idf() function to always return a 1 for year fields
> > because it could do funny things to a score if the source item had a
> > year 1984 and my query term was year_year:[${year -1} TO ${year +1}]
> > and there was only one item with a year of 1983. The 1983 would
> > actually score higher than the 1984.
> >
> > I'm currently looking at whether overriding queryNorm() to always
> > return 1 is a good thing or not.  I saw reference in a recent thread
> > that doing that might cause ^ boosts in terms or clauses to not work
> > right so I need to go back and study that again.
> >
> > The other big thing that I'm doing is that the user doesn't define the
> > query in one big lump. They break it down into scoring sections. all
> > the title related terms are in one section and all the year related
> > terms in a different one.  The user defines weights that each of these
> > sections should contribute to my "weighted score".  I run individual
> > queries for each of these scoring sections against the source and
> > target items and record those normalized scores then multiply them by
> > their weights and add them up to get my weighted score.
> > This strategy is working pretty well, but it is slow because of all
> > the extra queries.  I know that I can eliminate them by getting access
> > to the Explanation object and parsing out the scores I want there, but
> > that is what I am in the middle of researching how to do now. :)
> >
> > Anyway.. some of this might be useful to you or maybe it is all
> > babble. You are either welcome or asked for forgiveness respectively.
> > :)
> >
> > Daniel
> >
> > On 5/30/07, Grant Ingersoll <gsingers@apache.org> wrote:
> > > Hi Walt,
> > >
> > > One question that comes to mind, is what are you looking to do?  Are
> > > you not happy with the current scoring or you just trying to better
> > > understand scoring?  The calls to Similarity.tf(), etc. are call
> > > backs from within the scoring algorithm (have a look at TermScorer in
> > > the code) and provide a means for an application to change the score,
> > > but in many cases there really isn't too much incentive to do so.
> > >
> > > -Grant
> > >
> > >
> > > On May 30, 2007, at 4:45 PM, Walt Stoneburner wrote:
> > >
> > > > Hopefully I'm not opening myself up to public ridicule with what may
> > > > be a very stupid question, but...
> > > >
> > > > At the moment, I'm trying to wrap my head around some of
> > the math that
> > > > happens when Lucene does scoring.  Let's put aside the big equation
> > > > for a moment and focus on a simple method, such as tf().  [term
> > > > frequency]
> > > >
> > > > I understand that tf(freq) is supposed to return larger values when
> > > > freq is large, and smaller values when freq is small.  Though here's
> > > > what making me scratch my head today:
> > > >
> > > > a) Where does freq come from?  (Not what is it, but who computes it
> > > > and how?)
> > > >
> > > > Reason I ask is:
> > > >
> > > > b) How do I know what "large" and "small" is, as I don't
> > really have a
> > > > relative scale of what the max and min values are?  Should I just
> > > > assume a linear scale of 1.0 to 0.0 will be passed to the method?
> > > >
> > > > But then that begs the question...
> > > >
> > > > c) What values should I be passing out of a function like this?
> > > > Should I normalize my outgoing scores to some scale, or do I simply
> > > > just need to provide numbers that "have the right shaped curve".
> > > >
> > > > I wish the documentation shed a smidgen bit more light in
> > those areas.
> > > >
> > > >
> > > > I look at things like idf() which returns 1+log(ratio) and then has
> > > > that value squared.  Clearly that isn't on a scale of 1.0 to 0.0.
> > > >
> > > > I feel like there may be some mathematical trickery going on and that
> > > > maybe the actual score values themselves don't matter inside the
> > > > ranking code, so long as their relative values to one another.
> > > >
> > > > This then makes me ponder how the normalization process is done
> > > > between queries, allowing for a mix'n'match of results as these
> > > > numbers spill to the outside world.  Obviously normalization has to
> > > > happen at that point for the mixing query results magic to work.
> > > >
> > > >
> > > > Is there a math wizard in the group who can talk to me like I'm
> > > > four years old?
> > > >
> > > > -wls
> > > > http://www.wwco.com/~wls/blog/
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > Center for Natural Language Processing
> > > http://www.cnlp.org/tech/lucene.asp
> > >
> > > Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> > > LuceneFAQ
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 12:45:28 2007
Return-Path: <java-user-return-28446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48926 invoked from network); 31 May 2007 12:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 12:45:27 -0000
Received: (qmail 41344 invoked by uid 500); 31 May 2007 12:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41306 invoked by uid 500); 31 May 2007 12:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41295 invoked by uid 99); 31 May 2007 12:45:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 05:45:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.125.103] (HELO web38812.mail.mud.yahoo.com) (209.191.125.103)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 May 2007 05:45:18 -0700
Received: (qmail 87216 invoked by uid 60001); 31 May 2007 12:44:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=skuQ3kWERtkNpL3Zds6rnRTCkPgI7+LWH8U2E1VS6oQhync4BdsBcbtg+xDBosC5e+UjU2hOQUSitXxtLNbNmQMooJFjFbbIWSMSEKfsQ8J4qZRYoTs77G5OEwRhSKyr5jraA+objN514tPg95Zi7aorWo3ob+EyJHbNC8CuK7U=;
X-YMail-OSG: ebKArAMVM1kGLtLUjFGnxYrgpDGA5lyyjANzsdDu4f2gVSVmLqWghdlxqv6nCVkqkZgni9AV8t.q4TOJCZExZGDORAG82HNSE0hMOshfkwvHbym4xPpviqy15yboRQ--
Received: from [209.191.106.123] by web38812.mail.mud.yahoo.com via HTTP; Thu, 31 May 2007 05:44:56 PDT
X-Mailer: YahooMailRC/651.23.1 YahooMailWebService/0.7.41.14
Date: Thu, 31 May 2007 05:44:56 -0700 (PDT)
From: balasubramanian sudaakeran <sudaakeran_b@yahoo.com>
Subject: Potential issue with DisjunctionMaxScorer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <996380.86904.qm@web38812.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I found the following piece of logic in DisjunctionMaxScorer.skipTo function which may have a potential issue (marked in code as <<<<ISSUE>>>>).

    public boolean skipTo(int target) throws IOException {
        if (firstTime) {
          if (!more) return false;
          heapify();
          firstTime = false;
          return true;   // more would have been false if no subScorers had any docs
        <<<<ISSUE>>>> The issue is that we should not have his return statement over here. It should continue on the rest of the logic. Otherwise firsttime the skipping to target will not happen.
    
        }

        while (subScorers.size()>0 && ((Scorer)subScorers.get(0)).doc()<target) {
            if (((Scorer)subScorers.get(0)).skipTo(target))
                heapAdjust(0);
            else
                heapRemoveRoot();
        }
        if ((subScorers.size()==0))
            return (more = false);
        return true;
    }

Please somebody confirm if this is an issue.

regards,
Sudaakeran B




 
____________________________________________________________________________________
We won't tell. Get more on shows you hate to love 
(and love to hate): Yahoo! TV's Guilty Pleasures list.
http://tv.yahoo.com/collections/265 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 14:18:01 2007
Return-Path: <java-user-return-28447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86611 invoked from network); 31 May 2007 14:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 14:17:58 -0000
Received: (qmail 26595 invoked by uid 500); 31 May 2007 14:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26555 invoked by uid 500); 31 May 2007 14:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26544 invoked by uid 99); 31 May 2007 14:17:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 07:17:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 07:17:48 -0700
Received: by py-out-1112.google.com with SMTP id a25so451143pyi
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 07:17:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RjE+0MIatiZaDtEHzWYK4C9FDm3lkT4fpTCSf8qaZcNaYqp2y1O5oVrD9tKUYBYQBrVyE/v71ySQLBtdAIGDANJC0XLyftDV5l0PT/+HOgPQdD4B44QReKEFlTrnU+6z+qbDnAoYMeZv6QnaFjFGKNklfRbmDhtu9Id2inF0UB8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=PY/Rt3a1xZPG9N8hgAvDxVCrjDWzaYLjh88uwqij2nn4TUusFNofP4+WpPPTkyrDyloYcrlRL11U50Kk5qL1T/h9inESBNR0xT18D3sj1ilmQJDVpiD6+RVMz7vCVOOKmbvdCyOXHMX6IC5L0Il00UAdt1LnNd2ZpwgnraIQJIc=
Received: by 10.35.71.1 with SMTP id y1mr1132585pyk.1180621044934;
        Thu, 31 May 2007 07:17:24 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 31 May 2007 07:17:24 -0700 (PDT)
Message-ID: <c68e39170705310717y1565c501rf0db88d796354235@mail.gmail.com>
Date: Thu, 31 May 2007 10:17:24 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Potential issue with DisjunctionMaxScorer
In-Reply-To: <996380.86904.qm@web38812.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <996380.86904.qm@web38812.mail.mud.yahoo.com>
X-Google-Sender-Auth: 62d8032acd0bf3af
X-Virus-Checked: Checked by ClamAV on apache.org

If I haven't been recently looking at some of these scorers, it takes
a while to wrap my head around them again.

It would be really helpful if you could provide a unit test that shows
the failure, and attach it to a JIRA issue.

-Yonik


On 5/31/07, balasubramanian sudaakeran <sudaakeran_b@yahoo.com> wrote:
> Hi,
> I found the following piece of logic in DisjunctionMaxScorer.skipTo function which may have a potential issue (marked in code as <<<<ISSUE>>>>).
>
>     public boolean skipTo(int target) throws IOException {
>         if (firstTime) {
>           if (!more) return false;
>           heapify();
>           firstTime = false;
>           return true;   // more would have been false if no subScorers had any docs
>         <<<<ISSUE>>>> The issue is that we should not have his return statement over here. It should continue on the rest of the logic. Otherwise firsttime the skipping to target will not happen.
>
>         }
>
>         while (subScorers.size()>0 && ((Scorer)subScorers.get(0)).doc()<target) {
>             if (((Scorer)subScorers.get(0)).skipTo(target))
>                 heapAdjust(0);
>             else
>                 heapRemoveRoot();
>         }
>         if ((subScorers.size()==0))
>             return (more = false);
>         return true;
>     }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 14:24:51 2007
Return-Path: <java-user-return-28448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20741 invoked from network); 31 May 2007 14:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 14:24:50 -0000
Received: (qmail 43137 invoked by uid 500); 31 May 2007 14:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43103 invoked by uid 500); 31 May 2007 14:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43092 invoked by uid 99); 31 May 2007 14:24:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 07:24:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 07:24:40 -0700
Received: by py-out-1112.google.com with SMTP id a25so457749pyi
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 07:24:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=uYNJsp/7OhNL2uKT4saH7IJPhtcVI36fZGS+iWnNrgmtMG7Mo+T8ihQdmT07RLlQYlo4yYz8FRDdm/C4GSJbpscexNCD28CWDRgaZAjQKa5/2qFpMcMSKvtqGL+ADNiuwwsnNtjj7xpagS3TOyBioooZx+YgCZl2h0OkstYm7lU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=L/5Lk1N5p0x4rYEhY2CbsZ3fSrPaz7z52c5MWOGUOXsujxMv7tDFlSxe7fv1mnmZ2vzFaKSKihD9hR+sFtFydNOfvaxGxp6PRP0U4GLg2MZ3VamqFzOfqz97WYXUDD+tDLq33BH/Y8OvWD+3mMEfPsLw5J3lHWN6INVPXuDEtFM=
Received: by 10.35.121.12 with SMTP id y12mr1167858pym.1180621459791;
        Thu, 31 May 2007 07:24:19 -0700 (PDT)
Received: by 10.35.98.7 with HTTP; Thu, 31 May 2007 07:24:19 -0700 (PDT)
Message-ID: <c68e39170705310724h25595cc7ycdb40b053d548442@mail.gmail.com>
Date: Thu, 31 May 2007 10:24:19 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Potential issue with DisjunctionMaxScorer
In-Reply-To: <996380.86904.qm@web38812.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <996380.86904.qm@web38812.mail.mud.yahoo.com>
X-Google-Sender-Auth: 6261e7aafcec4637
X-Virus-Checked: Checked by ClamAV on apache.org

On 5/31/07, balasubramanian sudaakeran <sudaakeran_b@yahoo.com> wrote:
> Hi,
> I found the following piece of logic in DisjunctionMaxScorer.skipTo function which may have a potential issue (marked in code as <<<<ISSUE>>>>).
>
>     public boolean skipTo(int target) throws IOException {
>         if (firstTime) {
>           if (!more) return false;
>           heapify();
>           firstTime = false;
>           return true;   // more would have been false if no subScorers had any docs
>         <<<<ISSUE>>>> The issue is that we should not have his return statement over here. It should continue on the rest of the logic. Otherwise firsttime the skipping to target will not happen.

You are correct.  It's a bug.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 15:58:02 2007
Return-Path: <java-user-return-28449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32576 invoked from network); 31 May 2007 15:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 15:58:01 -0000
Received: (qmail 16955 invoked by uid 500); 31 May 2007 15:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16929 invoked by uid 500); 31 May 2007 15:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16917 invoked by uid 99); 31 May 2007 15:57:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 08:57:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 08:57:49 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l4VFvSGl000589
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 11:57:29 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4VFvS3I516428
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 11:57:28 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4VFvSfZ012315
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 11:57:28 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4VFvS2U012312
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 11:57:28 -0400
In-Reply-To: <c68e39170705301215s1d17b2e5n6ac0c142a9712113@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: restricting hits to a subset of "id"s
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF238BBDD2.164C41C1-ON852572EC.005787DB-852572EC.0057A842@us.ibm.com>
Date: Thu, 31 May 2007 11:57:28 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 05/31/2007 11:57:31,
	Serialize complete at 05/31/2007 11:57:31
Content-Type: multipart/alternative; boundary="=_alternative 0057A740852572EC_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0057A740852572EC_=
Content-Type: text/plain; charset="US-ASCII"

Thanks Yonik, this is working well (the BitSet and Filter option). It's
always helpful to have a pointer as to where to start--

>It's probably easier to use a Filter (which essentially does the same
>thing at a lower level in the search API).

>Use termDocs(Term) to look up the ids, add them to a BitSet, and make
>a Filter with that.
>You might want to check out CachingWrapperFilter or QueryFilter too.

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0057A740852572EC_=--

From java-user-return-28450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 18:44:40 2007
Return-Path: <java-user-return-28450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23520 invoked from network); 31 May 2007 18:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 18:44:40 -0000
Received: (qmail 71091 invoked by uid 500); 31 May 2007 18:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71051 invoked by uid 500); 31 May 2007 18:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 46619 invoked by uid 99); 31 May 2007 18:35:25 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.242 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=E7hs+oT98IQ2934Ck/9HpeCJNbrPtGVQo2SozOgR5bb0YSQww8vCRlmH1C+qn77B/WFbSOWjPuglBnp7Jxn1MyVc7b50c4IGZxZIbH8rNVRib77uQu9pIISEqSBGev8PkGEoD9SySM0dW5M2HCI7y3jcoLgHXxonVYadR4E49ZU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qhKciVlTlqranCVX1N5UziGMAczlkQBs1pUawivCDWFuJr9dzYyLni7IPZamxZM0/FU/ndfUvXQ87UbspBt1HYYrKJs5yNtvfLTFGreTKiLYLETwCDau44xIzOJANAun8F+1mPEcWqxOHvWS9/qYrvZmqXhokIiHiDerk2u4yNs=
Message-ID: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>
Date: Thu, 31 May 2007 20:34:54 +0200
From: "wojtek hury" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: boosting different parts of the same field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7882_30217880.1180636494316"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7882_30217880.1180636494316
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a way of boosting only fragment of the field? Let's say that I have
a title and short description of something which I want to index into
"myfield" field - is there a way of boosting title as more important for
scoring than description? I thought that maybe something like below would
work

Field f = new Field("myfield", title, Field.Store.NO, Field.Index.TOKENIZED
);
f.setBoost(TITLE_BOOST);
doc.add(f);
f = new Field("myfield", description, Field.Store.NO, Field.Index.TOKENIZED
);
f.setBoost(DECRIPTION_BOOST);
doc.add(f);

But I realized that it has effects that field "myfield" (all field) has
boost TITLE_BOOST * DESCRIPTION_BOOST. Is there any work-around for this?
Thank you in advance for any help.
wojtek hury

------=_Part_7882_30217880.1180636494316--

From java-user-return-28451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 18:53:52 2007
Return-Path: <java-user-return-28451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86679 invoked from network); 31 May 2007 18:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 18:53:51 -0000
Received: (qmail 99473 invoked by uid 500); 31 May 2007 18:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99436 invoked by uid 500); 31 May 2007 18:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99425 invoked by uid 99); 31 May 2007 18:53:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 11:53:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 11:53:41 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l4VIrKRI016822
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 14:53:20 -0400
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l4VIrKDu523162
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 14:53:20 -0400
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l4VIrJLs028467
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 14:53:20 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l4VIrJ03028464
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 14:53:19 -0400
In-Reply-To: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: boosting different parts of the same field
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com>
Date: Thu, 31 May 2007 14:53:19 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M4_03042007|March 04, 2007) at
 05/31/2007 14:53:22,
	Serialize complete at 05/31/2007 14:53:22
Content-Type: multipart/alternative; boundary="=_alternative 0067BF3C852572EC_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0067BF3C852572EC_=
Content-Type: text/plain; charset="US-ASCII"

>Is there a way of boosting only fragment of the field? Let's say that I 
have
>a title and short description of something which I want to index into
>"myfield" field - is there a way of boosting title as more important for
>scoring than description? I thought that maybe something like below would
>work

maybe this is a silly question but why not create a title field and a 
description field and
boost them separately? 




Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 0067BF3C852572EC_=--

From java-user-return-28452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 19:01:57 2007
Return-Path: <java-user-return-28452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25767 invoked from network); 31 May 2007 19:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 19:01:56 -0000
Received: (qmail 18841 invoked by uid 500); 31 May 2007 19:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18789 invoked by uid 500); 31 May 2007 19:01:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18723 invoked by uid 99); 31 May 2007 19:01:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 12:01:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wojtekh2@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 12:01:46 -0700
Received: by wr-out-0506.google.com with SMTP id i4so274944wra
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 12:01:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FCbKRjZblxHGQeLY7BH0yIKXluEH8njV5WaJYdEzgHNd77JXvsP+t0FaKoNXWrfDToDQmVY9fCTaOfnr1t9zm4OFXLQAbD+e546OWzGppVelaXKbzQUP3B0UqXKnJ/j606eKObpi+dm19dhAAm/lnytvp4m9A5RwdGmcK2vWU0Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kKRXIB7SSg4CqBkBCUpLLRtIiyonfmtaP/ovcGmVhhYMbgJhahrhCxDqreUQSXjgGoqjQiwgipUrMtrgVkG2BB2pKQ1pHlMRFqZqO5X498xoeioV8WELNt8qaKZ14KMw6Y7g/Dtp65JI2n7zPZmNJ7wMNgb17pr7VYocQqt7MQA=
Received: by 10.78.195.9 with SMTP id s9mr610960huf.1180638083911;
        Thu, 31 May 2007 12:01:23 -0700 (PDT)
Received: by 10.78.45.14 with HTTP; Thu, 31 May 2007 12:01:23 -0700 (PDT)
Message-ID: <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com>
Date: Thu, 31 May 2007 21:01:23 +0200
From: "wojtek hury" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: boosting different parts of the same field
In-Reply-To: <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8262_3816887.1180638083828"
References: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>
	 <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8262_3816887.1180638083828
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is issue with a field (let's call it "fulltext") containing all other
fields' values (to perform "search in all" query). Still, while performing
"search in all" I would like to boost some parts of this "fulltext" field.
wojtek

On 5/31/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> >Is there a way of boosting only fragment of the field? Let's say that I
> have
> >a title and short description of something which I want to index into
> >"myfield" field - is there a way of boosting title as more important for
> >scoring than description? I thought that maybe something like below would
> >work
>
> maybe this is a silly question but why not create a title field and a
> description field and
> boost them separately?
>
>
>
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>

------=_Part_8262_3816887.1180638083828--

From java-user-return-28453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 19:21:22 2007
Return-Path: <java-user-return-28453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32386 invoked from network); 31 May 2007 19:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 19:21:21 -0000
Received: (qmail 50449 invoked by uid 500); 31 May 2007 19:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50416 invoked by uid 500); 31 May 2007 19:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50405 invoked by uid 99); 31 May 2007 19:21:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 12:21:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 12:21:12 -0700
Received: by wx-out-0506.google.com with SMTP id t8so225293wxc
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 12:20:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VSE/4jmWtSrBm5fbnS937jB2HbzD6ty6kh4Hs45UrDoRKwvKUZrMeruggmxWroHMzkaaztI7bxrQ3iHGSioo88SsnI7N3/Hxulw+p4UHIO+mPhpbEeTtEJmhTACQrYt6g1GIekBGLUXLZIcdaa8qeAfo6ssmpI6tADbhSIXpXX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BkLJuSIzYGzLYbE8+s3jkBCQvraxV/Yv8Dk30uGXugGzbOih6Jr0Jyn4yfxSdOKOJR9FpaNJxivz7F+pwnx125xtXbA+IgiOpKGKKQGbsXaUPZ5BhY684ZwV+m3LKkmgtLzfHnkqJSYUX9uUOVX5tUv/4Hs4qiOow3vdhwuDCDY=
Received: by 10.90.70.10 with SMTP id s10mr1086471aga.1180639251624;
        Thu, 31 May 2007 12:20:51 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 35sm9752515wra.2007.05.31.12.20.42;
        Thu, 31 May 2007 12:20:50 -0700 (PDT)
Message-ID: <465F1FCF.9020900@gmail.com>
Date: Thu, 31 May 2007 15:19:43 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: boosting different parts of the same field
References: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>	 <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com> <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com>
In-Reply-To: <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think your looking at a limitation of using the "fulltext" approach. 
You are also loosing the boosting you would get for matching on shorter 
fields. Sometimes you just have to give in and query across all fields 
or take the compromise..Lucene does not have a concept of "meta-fields" 
within fields that I know of.

- Mark

wojtek hury wrote:
> This is issue with a field (let's call it "fulltext") containing all 
> other
> fields' values (to perform "search in all" query). Still, while 
> performing
> "search in all" I would like to boost some parts of this "fulltext" 
> field.
> wojtek
>
> On 5/31/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>>
>> >Is there a way of boosting only fragment of the field? Let's say that I
>> have
>> >a title and short description of something which I want to index into
>> >"myfield" field - is there a way of boosting title as more important 
>> for
>> >scoring than description? I thought that maybe something like below 
>> would
>> >work
>>
>> maybe this is a silly question but why not create a title field and a
>> description field and
>> boost them separately?
>>
>>
>>
>>
>> Donna L. Gresh
>> Services Research, Mathematical Sciences Department
>> IBM T.J. Watson Research Center
>> (914) 945-2472
>> http://www.research.ibm.com/people/g/donnagresh
>> gresh@us.ibm.com
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 20:05:11 2007
Return-Path: <java-user-return-28454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87585 invoked from network); 31 May 2007 20:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 20:05:09 -0000
Received: (qmail 35289 invoked by uid 500); 31 May 2007 20:05:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35264 invoked by uid 500); 31 May 2007 20:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35253 invoked by uid 99); 31 May 2007 20:05:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 13:05:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com) (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 May 2007 13:05:01 -0700
Received: (qmail 64978 invoked from network); 31 May 2007 20:04:37 -0000
Received: from unknown (HELO ?192.168.1.34?) (kkrugler@pacbell.net@63.200.72.123 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 31 May 2007 20:04:37 -0000
X-YMail-OSG: nLISpRAVM1kevXuSm4_D_i6DY4rxz.cvdUi9.gYaA5v1p1ZItyOUrUKFz8S.bNMNDOSeZIMyvRuu.yUB4G0gaZykzf4BNDKZa5eecfgdCZV9cBVoFKuy_d_JOUebvQ--
Mime-Version: 1.0
Message-Id: <p0623093ac284d0644d3e@[192.168.1.34]>
In-Reply-To: <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com>
References: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>	
 <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com>
 <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com>
Date: Thu, 31 May 2007 12:21:43 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: boosting different parts of the same field
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org

>This is issue with a field (let's call it "fulltext") containing all other
>fields' values (to perform "search in all" query). Still, while performing
>"search in all" I would like to boost some parts of this "fulltext" field.

One way I do this in Solr (where you can easily specify this type of 
combo field) is to add the field I want to boost multiple times. It's 
very course granularity, but it works.

See a discussion of this recently on the Solr mailing list.

-- Ken

>wojtek
>
>On 5/31/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>>
>>>Is there a way of boosting only fragment of the field? Let's say that I
>>have
>>>a title and short description of something which I want to index into
>>>"myfield" field - is there a way of boosting title as more important for
>>>scoring than description? I thought that maybe something like below would
>>>work
>>
>>maybe this is a silly question but why not create a title field and a
>>description field and
>>boost them separately?
>>
>>
>>
>>
>>Donna L. Gresh
>>Services Research, Mathematical Sciences Department
>>IBM T.J. Watson Research Center
>>(914) 945-2472
>>http://www.research.ibm.com/people/g/donnagresh
>>gresh@us.ibm.com


-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"Find Code, Find Answers"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 20:34:12 2007
Return-Path: <java-user-return-28455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79150 invoked from network); 31 May 2007 20:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 20:34:11 -0000
Received: (qmail 78719 invoked by uid 500); 31 May 2007 20:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78679 invoked by uid 500); 31 May 2007 20:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78665 invoked by uid 99); 31 May 2007 20:34:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 13:34:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 13:34:01 -0700
Received: from [10.200.1.71] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 5FEB21DB140
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 13:33:40 -0700 (PDT)
Message-ID: <465F3123.6050208@affinitycircles.com>
Date: Thu, 31 May 2007 13:33:39 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Icedove 1.5.0.10 (X11/20070329)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: boosting different parts of the same field
References: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>	 <OF3AE86868.CF93A8B8-ON852572EC.00677E1F-852572EC.0067C1C4@us.ibm.com> <329a6c830705311201r27f3106ci1ef7db1d561adecb@mail.gmail.com> <p0623093ac284d0644d3e@[192.168.1.34]>
In-Reply-To: <p0623093ac284d0644d3e@[192.168.1.34]>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I recently posted a similar question to this list.  Currently I am just 
adding the boosted field to the default search field multiple times  
Look for a thread on this list with a subject of "Document Boost."  
There were a few interesting ideas posted about how to go about this.

Les

Ken Krugler wrote:
>> This is issue with a field (let's call it "fulltext") containing all 
>> other
>> fields' values (to perform "search in all" query). Still, while 
>> performing
>> "search in all" I would like to boost some parts of this "fulltext" 
>> field.
>
> One way I do this in Solr (where you can easily specify this type of 
> combo field) is to add the field I want to boost multiple times. It's 
> very course granularity, but it works.
>
> See a discussion of this recently on the Solr mailing list.
>
> -- Ken
>
>> wojtek
>>
>> On 5/31/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>>>
>>>> Is there a way of boosting only fragment of the field? Let's say 
>>>> that I
>>> have
>>>> a title and short description of something which I want to index into
>>>> "myfield" field - is there a way of boosting title as more 
>>>> important for
>>>> scoring than description? I thought that maybe something like below 
>>>> would
>>>> work
>>>
>>> maybe this is a silly question but why not create a title field and a
>>> description field and
>>> boost them separately?
>>>
>>>
>>>
>>>
>>> Donna L. Gresh
>>> Services Research, Mathematical Sciences Department
>>> IBM T.J. Watson Research Center
>>> (914) 945-2472
>>> http://www.research.ibm.com/people/g/donnagresh
>>> gresh@us.ibm.com
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 21:00:10 2007
Return-Path: <java-user-return-28456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34071 invoked from network); 31 May 2007 21:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 21:00:08 -0000
Received: (qmail 25572 invoked by uid 500); 31 May 2007 21:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25420 invoked by uid 500); 31 May 2007 21:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25409 invoked by uid 99); 31 May 2007 21:00:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 14:00:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 14:00:00 -0700
Received: by wa-out-1112.google.com with SMTP id k17so396206waf
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 13:59:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=TzUpu84eIekGosALRDr6b1/yqX5CPZQu7JeqqamWvtGstdMdU+AsK2stxEVa6I4QNQxVWZTv1FsBRbIyFLkaCCNZxwfIXn8DiLW+lCynkp/5HsSVdW4deANQg+JGzhjDMb8vwwQEBOXZ1wnpXsUAUA/bsV4oLtuFqXv/6CVb5Uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=a7AAEzBHPFA1gD310jpreF5NZXQt1FF1pkbfzPZZybf6MMMfLhWpgHMM1SVH+mUhZO+TuQZK/B4GqOeVBsfSpv7EEwqTkN6z9CR5D0S9Lmq9eczLQU6L6e3C7Rq/pVM0cGZHWSTTMI1Myr9wbegaShVqwHVLvgPwt+UY6ni+gdw=
Received: by 10.114.175.16 with SMTP id x16mr1073546wae.1180645179777;
        Thu, 31 May 2007 13:59:39 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Thu, 31 May 2007 13:59:39 -0700 (PDT)
Message-ID: <ae6f38f60705311359w5f5a3856kac6ca06c0633bcec@mail.gmail.com>
Date: Thu, 31 May 2007 16:59:39 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Grant writes:
> One question that comes to mind, is what are you looking to do?

What I'm trying to do is prevent Lucene from providing better ranking
for documents that use a term multiple times than those that have more
term hits.

I've got some huge queries with quite a number of unique terms.  I
want the documents that hit more unique terms to float to the top,
while documents that hit some or few of the terms to sink to the
bottom (even if they have more occurrences of those terms).

Lucene, as I understand things, does this for the most part, though it
is possible that term frequency can play a significant roll and drown
out the part of the desired behavior that I'd like to keep.

My users want to grab search results using the currently Lucene
method, then select a checkbox and search without term frequency
contributing to the score.  I, on the other hand, have a vested
interest in not maintaining two indexes.


Daniel wrote:
> I don't want the title "Caesar Came, Caesar Saw, Caesar Conquered" to have a higher
> score just because the word Caesar is repeated.

This is very much the kind of problem I'm trying to address.

> I'm currently looking at whether overriding queryNorm() to always
> return 1 is a good thing or not.

I vaguely recall reading something about boosts as well; I'm not sure
you want to mess with this one.  For me, idf() is the bigger question.


Yonik writes:
> For a single term, [freq is] determined at index time and stored in the index.

I guess what I'm asking is, is freq, the value passed to tf(), the
count of the term, or a ratio of the term to total terms in the index.

> Scores across queries aren't really comparable though.
> ... Lucene doesn't currently do this "mixing", ...

This has always been my understanding of search engines, that the raw
scores are effectively meaningless if used to mix other query results
together.

However, according to the documentation at
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/Similarity.html,
it would seem that #4 queryNorm() says:
"This factor does not affect document ranking (since all ranked
documents are multiplied by the same factor), but rather just attempts
to make scores from different queries (or even different indexes)
comparable."

This to me is black magic.  It alludes that one can do two different
queries and a merge-sort, and further that the content can come from
different indexes.

Either I'm reading this completely wrong, or the documentation may
need an update.


Hope this provides better clarification.

As for why am I doing asking all this?  What I'd like to do is get a
firm understanding of how Lucene does scoring in such a way that the
behavior can be modified, and if ambitious enough fill in some of the
holes in the documentation.

Thanks all,
-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu May 31 22:18:33 2007
Return-Path: <java-user-return-28457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80807 invoked from network); 31 May 2007 22:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 May 2007 22:18:32 -0000
Received: (qmail 63899 invoked by uid 500); 31 May 2007 22:18:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63854 invoked by uid 500); 31 May 2007 22:18:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63843 invoked by uid 99); 31 May 2007 22:18:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 15:18:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 15:18:24 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id BEB115C3B1
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 15:18:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>
References: <329a6c830705311134k65fceadbxeab35b49f4e9415c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <53DBCB04-4504-41EA-A20B-D75754C59B64@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: boosting different parts of the same field
Date: Thu, 31 May 2007 18:18:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

If you are up for _BLEEDING EDGE_ stuff, have a look at the Payload  
addition to the trunk.  With this, you can set payloads on individual  
terms (i.e. the title tokens) and then use the BoostingTermQuery when  
searching to factor in the payload in the scoring. This is very much  
"buyer beware" at this point as it is not even officially released  
yet.  While it isn't overly complicated to use or anything, I just  
wouldn't recommend it for production yet.


-Grant

On May 31, 2007, at 2:34 PM, wojtek hury wrote:

> Is there a way of boosting only fragment of the field? Let's say  
> that I have
> a title and short description of something which I want to index into
> "myfield" field - is there a way of boosting title as more  
> important for
> scoring than description? I thought that maybe something like below  
> would
> work
>
> Field f = new Field("myfield", title, Field.Store.NO,  
> Field.Index.TOKENIZED
> );
> f.setBoost(TITLE_BOOST);
> doc.add(f);
> f = new Field("myfield", description, Field.Store.NO,  
> Field.Index.TOKENIZED
> );
> f.setBoost(DECRIPTION_BOOST);
> doc.add(f);
>
> But I realized that it has effects that field "myfield" (all field)  
> has
> boost TITLE_BOOST * DESCRIPTION_BOOST. Is there any work-around for  
> this?
> Thank you in advance for any help.
> wojtek hury

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 00:59:08 2007
Return-Path: <java-user-return-28458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71497 invoked from network); 1 Jun 2007 00:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 00:59:06 -0000
Received: (qmail 83192 invoked by uid 500); 1 Jun 2007 00:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82998 invoked by uid 500); 1 Jun 2007 00:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82975 invoked by uid 99); 1 Jun 2007 00:58:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 17:58:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 17:58:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6831C5B772; Thu, 31 May 2007 17:58:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 48B677F403
	for <java-user@lucene.apache.org>; Thu, 31 May 2007 17:58:25 -0700 (PDT)
Date: Thu, 31 May 2007 17:58:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores.
In-Reply-To: <ae6f38f60705311359w5f5a3856kac6ca06c0633bcec@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0705311746060.18729@hal.rescomp.berkeley.edu>
References: <ae6f38f60705311359w5f5a3856kac6ca06c0633bcec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: What I'm trying to do is prevent Lucene from providing better ranking
: for documents that use a term multiple times than those that have more
: term hits.
:
: I've got some huge queries with quite a number of unique terms.  I
: want the documents that hit more unique terms to float to the top,
: while documents that hit some or few of the terms to sink to the
: bottom (even if they have more occurrences of those terms).
:
: Lucene, as I understand things, does this for the most part, though it
: is possible that term frequency can play a significant roll and drown
: out the part of the desired behavior that I'd like to keep.

your best two choices for tweaking this behavior are to make term
frequency less significant, or make the coord factor for boolean queries
more significant.

: I guess what I'm asking is, is freq, the value passed to tf(), the
: count of the term, or a ratio of the term to total terms in the index.

for term queries it is the literal term frequency (you can see this by
looking at the Explaination info for a query)

: "This factor does not affect document ranking (since all ranked
: documents are multiplied by the same factor), but rather just attempts
: to make scores from different queries (or even different indexes)
: comparable."
:
: This to me is black magic.  It alludes that one can do two different
: queries and a merge-sort, and further that the content can come from
: different indexes.

it is in fact, black magic ... as the phrase says it *attempts* to make
scores from different queries comparable ... it does not actually make
them mathematicly comparable, since scores are completley unbounded.

As i recall, a more practical purpose for the queryNorm is that when
dealing with large complex query structures consisting of "container"
queries (BooleanQueries, DisjunctionMaxQueries, SpanNearQueries, etc...)
the queryNorm is applied to the the "leaf"  queries as the computation
proceeds, which helps keep the scores from getting unmanagably large
(and loosing precision) as they are aggregated up.

when dealing with floats, where 0<n<1 ...
  A*n + B*n + C*n + ... Z*n
...results in  more "precise" calculation then...
  (A + B C + ... + Z)*n

...correct?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 03:02:32 2007
Return-Path: <java-user-return-28459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74033 invoked from network); 1 Jun 2007 03:02:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 03:02:31 -0000
Received: (qmail 34248 invoked by uid 500); 1 Jun 2007 03:02:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34211 invoked by uid 500); 1 Jun 2007 03:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34200 invoked by uid 99); 1 Jun 2007 03:02:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 20:02:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cedric.ho@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 20:02:23 -0700
Received: by nz-out-0506.google.com with SMTP id x7so321810nzc
        for <java-user@lucene.apache.org>; Thu, 31 May 2007 20:02:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RBvjEFr0gedzsOxMdYykHZ5o2jUXnXK1Xfr2yrhDaNOV49QL3c9vB9UbG9Sgt5STPI5RigJ1H/qMcTdklcmepJm6pecWaI3l5scZEAXl2I/yiOccar2Ajmz4xKsDpnpzhsHD9SVP0l5+9y7VAk3mBjkX1CsmneBEfHt+YfaH7MM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Db79spdJ3p/Ffn6h4tc6/3khfsKVgYWj8IyrztmVrXCjqMERxEeCqBTjKoz8rWptkn4pFH/LQz7OOd5qxKVLY/kwNE+QJC7eK6Woacg2aBNMBizaivwCvkoRZiWrTpoymPdYHX7iV/P2QmA0/FJbZPrZByNZfXtwQGD8tKQJcLw=
Received: by 10.114.174.2 with SMTP id w2mr1278567wae.1180666921537;
        Thu, 31 May 2007 20:02:01 -0700 (PDT)
Received: by 10.114.46.4 with HTTP; Thu, 31 May 2007 20:02:01 -0700 (PDT)
Message-ID: <839ba01c0705312002j4ce50108nc54c923254f71dd@mail.gmail.com>
Date: Fri, 1 Jun 2007 11:02:01 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: exception during optimze
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

When I tried to build an index last night, the following exception
occurred during call to IndexWriter.optimze():

java.lang.NullPointerException
        at org.apache.lucene.index.IndexFileDeleter.findDeletableFiles(IndexFileDeleter.java:88)
        at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1570)
        at org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1351)
        at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:891)
        ......

The mergeFactor is set to 500. And the final index file size is about 10Gb.

Also since the writer.close() is not called. There's an write.lock
file in the index directory. After deleting the write.lock file, I
called optimze() again and it complete successfully. Is the indexing
successful then? Will any documents be lost due to the above
exception?

I am using lucene-core-2.1.0

Thanks,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 06:12:24 2007
Return-Path: <java-user-return-28460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85655 invoked from network); 1 Jun 2007 06:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 06:12:23 -0000
Received: (qmail 52048 invoked by uid 500); 1 Jun 2007 06:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51847 invoked by uid 500); 1 Jun 2007 06:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51836 invoked by uid 99); 1 Jun 2007 06:12:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 23:12:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 23:12:13 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hu0Mb-0000AV-3E
	for java-user@lucene.apache.org; Thu, 31 May 2007 23:11:53 -0700
Message-ID: <10907265.post@talk.nabble.com>
Date: Thu, 31 May 2007 23:11:53 -0700 (PDT)
From: Vaasu <srinivasay@aztecsoft.com>
To: java-user@lucene.apache.org
Subject: Re: Creating parser query "by hand"
In-Reply-To: <BE37A9BF-159D-4467-8661-4874DAC84502@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: srinivasay@aztecsoft.com
References: <43130817.2020706@fischer.name> <BE37A9BF-159D-4467-8661-4874DAC84502@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,


I am working on search using lucene2.0.0.

My requirement is to construct a lucene query in the form of string
(+contents:java programming +author:xxx) and then this is used to construct
lucene query so that it can be searched using lucene searcher. I want to
know, how to convert String query into lucene Query? so that it can be
searchable. 

is this possible? I will be thankful if you can send any samples for this.

Thanks,
Vaasu.



Erik Hatcher wrote:
> 
> On Aug 29, 2005, at 9:05 AM, Markus Fischer wrote:
>> I currently pass the search tokens as Vector to my query function  
>> and construct the string to pass to the QueryParse.parse() by hand.
>>
>> StringBuffer qStr = new StringBuffer();
>> qStr.append("title:" + queryString.trim() + "^7 ");
>> [...]
>>
>> and this append for every field I want to search in.
>>
>> When I started with lucene I had found a site saying that the  
>> performance would be better to craft the query token by hand and  
>> not having QueryParse.parse() parse my string again when I've  
>> already everything to built the tokens myself.
>>
>> Unfortuantely I can't find this site again and I can't find an  
>> example on how it works to actually create the tokens myself and  
>> pass them to the searcher.
>>
>> Any help would be appriciated.
> 
> Whether you parse or not in this case depends on whether the tokens  
> in the Vector are exactly the tokens you indexed or not.  If they  
> are, then you could create a BooleanQuery, construct a TermQuery for  
> each token and add it to the BooleanQuery.  Eliminating the use of  
> QueryParser when not needed may not be a performance booster, but it  
> certainly eliminates a source of confusion or unexpected queries  
> because of QP morphing them via parsing and analysis.
> 
>      Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Creating-parser-query-%22by-hand%22-tf261639.html#a10907265
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 06:16:57 2007
Return-Path: <java-user-return-28461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72181 invoked from network); 1 Jun 2007 06:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 06:16:56 -0000
Received: (qmail 60065 invoked by uid 500); 1 Jun 2007 06:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60033 invoked by uid 500); 1 Jun 2007 06:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60022 invoked by uid 99); 1 Jun 2007 06:16:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 23:16:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 May 2007 23:16:48 -0700
Received: (qmail 22803 invoked from network); 1 Jun 2007 11:39:57 +0530
Received: from unknown (HELO bhavin) (203.197.35.2)
  by mailserver with SMTP; 1 Jun 2007 11:39:57 +0530
Message-ID: <001601c7a414$b5b61a20$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <43130817.2020706@fischer.name> <BE37A9BF-159D-4467-8661-4874DAC84502@ehatchersolutions.com> <10907265.post@talk.nabble.com>
Subject: Re: Creating parser query "by hand"
Date: Fri, 1 Jun 2007 11:48:45 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi vaasu,
You can convert string query into lucene query using QueryParser class.
Please check API.

Thanks.
Bhavin pandya


----- Original Message ----- 
From: "Vaasu" <srinivasay@aztecsoft.com>
To: <java-user@lucene.apache.org>
Sent: Friday, June 01, 2007 11:41 AM
Subject: Re: Creating parser query "by hand"


>
> Hi,
>
>
> I am working on search using lucene2.0.0.
>
> My requirement is to construct a lucene query in the form of string
> (+contents:java programming +author:xxx) and then this is used to 
> construct
> lucene query so that it can be searched using lucene searcher. I want to
> know, how to convert String query into lucene Query? so that it can be
> searchable.
>
> is this possible? I will be thankful if you can send any samples for this.
>
> Thanks,
> Vaasu.
>
>
>
> Erik Hatcher wrote:
>>
>> On Aug 29, 2005, at 9:05 AM, Markus Fischer wrote:
>>> I currently pass the search tokens as Vector to my query function
>>> and construct the string to pass to the QueryParse.parse() by hand.
>>>
>>> StringBuffer qStr = new StringBuffer();
>>> qStr.append("title:" + queryString.trim() + "^7 ");
>>> [...]
>>>
>>> and this append for every field I want to search in.
>>>
>>> When I started with lucene I had found a site saying that the
>>> performance would be better to craft the query token by hand and
>>> not having QueryParse.parse() parse my string again when I've
>>> already everything to built the tokens myself.
>>>
>>> Unfortuantely I can't find this site again and I can't find an
>>> example on how it works to actually create the tokens myself and
>>> pass them to the searcher.
>>>
>>> Any help would be appriciated.
>>
>> Whether you parse or not in this case depends on whether the tokens
>> in the Vector are exactly the tokens you indexed or not.  If they
>> are, then you could create a BooleanQuery, construct a TermQuery for
>> each token and add it to the BooleanQuery.  Eliminating the use of
>> QueryParser when not needed may not be a performance booster, but it
>> certainly eliminates a source of confusion or unexpected queries
>> because of QP morphing them via parsing and analysis.
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: 
> http://www.nabble.com/Creating-parser-query-%22by-hand%22-tf261639.html#a10907265
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


