From java-user-return-19927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 01 10:13:28 2006
Return-Path: <java-user-return-19927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24643 invoked from network); 1 Apr 2006 10:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2006 10:13:27 -0000
Received: (qmail 53169 invoked by uid 500); 1 Apr 2006 10:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53140 invoked by uid 500); 1 Apr 2006 10:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53129 invoked by uid 99); 1 Apr 2006 10:13:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Apr 2006 02:13:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of artvas@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nproxy.gmail.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Apr 2006 02:13:21 -0800
Received: by nproxy.gmail.com with SMTP id c29so743532nfb
        for <java-user@lucene.apache.org>; Sat, 01 Apr 2006 02:12:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:cc:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=TOMgbtDQyHO/2VBkRRqqSy+JMsT5IMuiZDyyEdp90zhUzRq5Szur0KwFCyQIl5ETPdS6x9gUPRXor6lFXh53Fzqi0+FVoRuYuNREV9nbRVhW4ricIiPZ+33+Tigz8kDRRSTmPt4F+S+SdbZNGZtUzZUVX65IbRsaUveTSO7Xg6E=
Received: by 10.49.85.5 with SMTP id n5mr904646nfl;
        Sat, 01 Apr 2006 02:12:59 -0800 (PST)
Received: from ppp234-0.pptp.mtu-net.ru ( [81.195.234.0])
        by mx.gmail.com with ESMTP id a24sm336578nfc.2006.04.01.02.12.58;
        Sat, 01 Apr 2006 02:12:59 -0800 (PST)
Date: Sat, 1 Apr 2006 14:13:02 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <18784005.20060401141302@gmail.com>
To: "Yonik Seeley" <yseeley@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re[2]: OutOfMemory with search(Query, Sort)
In-Reply-To: <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
References: <756391613.20060401024129@gmail.com>
 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Yonik,

Thanks, it explains my issue and that's definitely a hit - I tried to
sort by filePath field which can be 100 bytes at average meaning 400M
RAM for the cache + IO excess to load them from 3G index. I wish this
caching were configurable as lazy or switched off, do you know if
that's possible?

>> I've tried to utilize Lucene's sorting function
YS> [...]
>> But on large index (4mln docs) I
>> get big delay with CPU to 100% and then OutOfMemoryError even when
>> there's only 1 document in the resultset!

YS> The first time you sort on a field, a FieldCache entry is populated,
YS> enabling random access to that field value.  A single int field for a
YS> 4M index == int[4000000] == 16MB memory.

-- 
Best regards,
 Artem                            mailto:artvas@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 01 14:15:39 2006
Return-Path: <java-user-return-19928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97239 invoked from network); 1 Apr 2006 14:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Apr 2006 14:15:38 -0000
Received: (qmail 81775 invoked by uid 500); 1 Apr 2006 14:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81742 invoked by uid 500); 1 Apr 2006 14:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81728 invoked by uid 99); 1 Apr 2006 14:15:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Apr 2006 06:15:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Apr 2006 06:15:31 -0800
Received: by zproxy.gmail.com with SMTP id 13so1080361nzn
        for <java-user@lucene.apache.org>; Sat, 01 Apr 2006 06:15:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CRDQKxyTmaRDXKMaufChAWXe1MFHvSraTaP7MeidJpsuJvMM+rvL5+kwjT6+AtDEFkvEonva/TB/2W2dpxHYlGlaijVn+8JOMSr10H18JLZwp8ofXRA/wEp11h6vTHy3GClf8MdnNN43a2QfdkLPwcGOIkBrHzW7eFIat6ItKFA=
Received: by 10.35.127.7 with SMTP id e7mr1609486pyn;
        Sat, 01 Apr 2006 06:15:11 -0800 (PST)
Received: by 10.35.107.3 with HTTP; Sat, 1 Apr 2006 06:15:11 -0800 (PST)
Message-ID: <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
Date: Sat, 1 Apr 2006 09:15:11 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: "Artem Vasiliev" <artvas@gmail.com>
Subject: Re: Re[2]: OutOfMemory with search(Query, Sort)
Cc: java-user@lucene.apache.org
In-Reply-To: <18784005.20060401141302@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <756391613.20060401024129@gmail.com>
	 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
	 <18784005.20060401141302@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/1/06, Artem Vasiliev <artvas@gmail.com> wrote:
>I tried to
> sort by filePath field which can be 100 bytes at average meaning 400M
> RAM for the cache

Well, it's probably not quite that bad...

For string sorting, a FieldCache.StringIndex is used.
It contains a sorted String[num_unique_terms_in_field], and an int[maxDoc]
So if 10 documents share a large string field value, that value will
only be in the fieldCache once.

If you are just using an IndexSearcher (no multisearchers), then the
String[] isn't strictly needed... only the ordering (the int[]) is
needed from the StringIndex.  One option is to create your own
FieldCache that doesn't create/store that String[].

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 02 14:39:55 2006
Return-Path: <java-user-return-19929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18719 invoked from network); 2 Apr 2006 14:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2006 14:39:55 -0000
Received: (qmail 83478 invoked by uid 500); 2 Apr 2006 14:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83412 invoked by uid 500); 2 Apr 2006 14:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83401 invoked by uid 99); 2 Apr 2006 14:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 07:39:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kvelentz@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nproxy.gmail.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 07:39:48 -0700
Received: by nproxy.gmail.com with SMTP id c29so856818nfb
        for <java-user@lucene.apache.org>; Sun, 02 Apr 2006 07:39:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:mime-version:content-type:x-mailer:thread-index:x-mimeole:message-id;
        b=QJjLS1A/s8tAwjZLaMQ12emSY4pJnfN2bYKOGFDaw/bLSN9pQ/PKfc1cYjmqmwU7HI66wDdUCCaHrcTOllpROcuwIx+YiiT11a5wuRQQe/vTjJSfJZJE/VaoQU8cbSzmQtd8tKzZS8CE1OIhm8VF1rNw5y+tv5NGzZvjYOe+KY0=
Received: by 10.49.80.7 with SMTP id h7mr613185nfl;
        Sun, 02 Apr 2006 07:39:27 -0700 (PDT)
Received: from frozenhell ( [62.1.244.15])
        by mx.gmail.com with ESMTP id a23sm811651nfc.2006.04.02.07.39.16;
        Sun, 02 Apr 2006 07:39:26 -0700 (PDT)
From: "Kostas V." <kvelentz@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Use two Analyzers in Lucene
Date: Sun, 2 Apr 2006 17:38:58 +0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0004_01C6567C.61A2A3E0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcZWYyyvqG1KQtGKRrOguKK4xSfk5w==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-ID: <442fe21e.693789f4.5cff.148b@mx.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0004_01C6567C.61A2A3E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,
I'm new to Java and in Lucene as well and I have a little problem.
I have to index and search with Lucene some papers that are written both in
English and Greek. When I say both I mean that in the same txt there are
both Greek na d English words.

I have the Analyzers for both languages (they do stemming as well) but I
don't know how to use them together. I imagine that I have to do two passes
for each paper  ?? or this is not correct?
The following line is how I use my English Analyzer

IndexWriter writer = new IndexWriter(indexPath,new PorterStemAnalyzer() ,
true);


And this about the Greek

IndexWriter writer = new IndexWriter(indexPath,new GreekAnalyzer() , true);


Is it possible?
And when I make the search, how the program can use both Analyzers as well?
They told me to make a mixed Analyzer but I don't know if this is possible.

 
Thanks in advance everyone for your help.

Kostas


------=_NextPart_000_0004_01C6567C.61A2A3E0--


From java-user-return-19930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 02 23:32:26 2006
Return-Path: <java-user-return-19930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77345 invoked from network); 2 Apr 2006 23:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Apr 2006 23:32:26 -0000
Received: (qmail 25640 invoked by uid 500); 2 Apr 2006 23:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25614 invoked by uid 500); 2 Apr 2006 23:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25603 invoked by uid 99); 2 Apr 2006 23:32:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 16:32:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 16:32:18 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id F29E1B7664
	for <java-user@lucene.apache.org>; Mon,  3 Apr 2006 09:31:50 +1000 (EST)
Message-ID: <44305F5B.8070309@nuix.com.au>
Date: Mon, 03 Apr 2006 09:33:47 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Use two Analyzers in Lucene
References: <442fe21e.693789f4.5cff.148b@mx.gmail.com>
In-Reply-To: <442fe21e.693789f4.5cff.148b@mx.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kostas V. wrote:
> I have the Analyzers for both languages (they do stemming as well) but I
> don't know how to use them together. I imagine that I have to do two passes
> for each paper  ?? or this is not correct?
> The following line is how I use my English Analyzer
> 
> IndexWriter writer = new IndexWriter(indexPath,new PorterStemAnalyzer() ,
> true);
> 
> And this about the Greek
> 
> IndexWriter writer = new IndexWriter(indexPath,new GreekAnalyzer() , true);
> 
> Is it possible?
> And when I make the search, how the program can use both Analyzers as well?
> They told me to make a mixed Analyzer but I don't know if this is possible.

The general idea would be to make an analyser which chooses which 
analyser to pass the text to.  In general this would be rather 
difficult, but in your particular situation, Greek and English use 
different alphabets so it may not be too hard.

Having a quick look at the GreekAnalyzer, it still uses the 
StandardTokenizer.  And it looks like the filters that are being used 
for this and the English analyser wouldn't interfere with each other 
either.  So you could probably make an analyser which performs both, 
something like this:

   public class CombinedAnalyser extends Analyzer {
     private GreekAnalyzer greek = new GreekAnalyzer();
     public TokenStream tokenStream(String fieldName, Reader reader) {
       // Filters greek
       TokenStream tokens = greek.tokenStream(fieldName, reader);

       // Filters english
       tokens = new StandardFilter(tokens);
       tokens = new LowerCaseFilter(tokens);
       tokens = new StopFilter(tokens);
       tokens = new PorterStemFilter(tokens);

       return tokens;
     }
   }

Another way to go about it would be to detect the greek fragments of the 
text up-front and pass those fragments through the greek analyser, and 
anything else through the other analyser.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 03 03:42:47 2006
Return-Path: <java-user-return-19931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54561 invoked from network); 3 Apr 2006 03:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2006 03:42:47 -0000
Received: (qmail 52564 invoked by uid 500); 3 Apr 2006 03:42:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52530 invoked by uid 500); 3 Apr 2006 03:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52519 invoked by uid 99); 3 Apr 2006 03:42:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 20:42:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.34.191.36] (HELO ext-ch1gw-2.online-age.net) (216.34.191.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 20:42:40 -0700
Received: from int-ch1gw-3.online-age.net (int-ch1gw-3 [3.159.232.67])
	by ext-ch1gw-2.online-age.net (8.13.6/8.13.6/20051111-SVVS-TLS-DNSBL) with ESMTP id k333gG5k027107
	for <java-user@lucene.apache.org>; Sun, 2 Apr 2006 23:42:19 -0400 (EDT)
Received: from cinmlef01.e2k.ad.ge.com (localhost [127.0.0.1])
	by int-ch1gw-3.online-age.net (8.12.9/8.12.3/990426-RLH) with ESMTP id k333gFhp005992
	for <java-user@lucene.apache.org>; Sun, 2 Apr 2006 23:42:16 -0400 (EDT)
Received: from banmlvem01.e2k.ad.ge.com ([3.159.224.31]) by cinmlef01.e2k.ad.ge.com with Microsoft SMTPSVC(6.0.3790.2499);
	 Sun, 2 Apr 2006 23:42:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Regarding Indexes
Date: Mon, 3 Apr 2006 09:12:09 +0530
Message-ID: <DC47ED83883E7C4B94AC2A67C1DA53C5025AD377@BANMLVEM01.e2k.ad.ge.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Regarding Indexes
Thread-Index: AcZU300NYhIScSVjQBq2E99OLgIvBwB8R5pw
From: "Babu, KameshNarayana \(GE, Research, consultant\)" <kameshnarayana.babu@ge.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Apr 2006 03:42:15.0299 (UTC) FILETIME=[995F6530:01C656D0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dont maintain individual index file. Convey the companies that they =
cannot get back the data.


-----Original Message-----
From: Ravi [mailto:ravi.jaladanki@siti.com]
Sent: Friday, March 31, 2006 9:52 PM
To: java-user@lucene.apache.org
Subject: Regarding Indexes


Hi Luceners,

 =20

  This is the my problem . Can any body give the solution for this one..

=20

=20

I am going to implement for the company which is going to Support ASP
(Application Service Provider )  model.=20

=20

In this model , around 200 companies are going to register with us and =
add
there documents and searches them .=20

Now the problem is shall I maintain individual index files for each =
company
or maintain single index file for all the companies.

=20

=20

If I maintain  individual index files then I need to create 200 searcher
objects for them because. each index should be searched..

=20

But if I maintain single index file , I can have one single index =
searcher
but I need to add the condition for each document. And more over in =
feature
if any body needed there own data we can not provide them .. so please =
tell
me which model can help us to solve this problem.. the key point in this
application is add/modify/delete will occur very frequently . Please =
help me
.... I am waiting for your feed back

=20

=20

Thanks

=20

Ravi Kumar Jaladanki

 =20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 03 05:19:49 2006
Return-Path: <java-user-return-19932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86140 invoked from network); 3 Apr 2006 05:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2006 05:19:48 -0000
Received: (qmail 471 invoked by uid 500); 3 Apr 2006 05:19:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 442 invoked by uid 500); 3 Apr 2006 05:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 423 invoked by uid 99); 3 Apr 2006 05:19:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 22:19:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.175] (HELO hnexfe09.hetnet.nl) (195.121.6.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Apr 2006 22:19:37 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe09.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Mon, 3 Apr 2006 07:19:14 +0200
In-Reply-To: <E3C8B754-4BD2-45A2-86EA-1EFDB989A3D5@snigel.net>
References: <20060331222008.73666.qmail@web37404.mail.mud.yahoo.com> <E3C8B754-4BD2-45A2-86EA-1EFDB989A3D5@snigel.net>
Mime-Version: 1.0 (Apple Message framework v746.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3E9D2366-5D0C-471A-A176-F92D957C83BB@snigel.net>
Cc: java-dev@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Spellchecker bug (or feature?)
Date: Mon, 3 Apr 2006 07:21:32 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 03 Apr 2006 05:19:14.0126 (UTC) FILETIME=[25A9EEE0:01C656DE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1 apr 2006 kl. 03.13 skrev karl wettin:
>
> 1 apr 2006 kl. 00.20 skrev Xiaocheng Luan:
>
>> Not sure if this is the right place to report this issue:
>>
>>   The accuracy value, which can be set via setAccuracy(), is being  
>> modified in SpellChecker.java when a word is checked. As a result,  
>> the "min" may be pushed
>>   very high and will not suggest anything for later requests.
>>
>>   One workaround would be to call setAccuracy() each time before a  
>> word is checked, I'm not sure if this is a feature (intended  
>> behavior) or a bug.
>>   By the way, I'm using spellchecker 1.9.1 that comes with Lucene  
>> 1.9.1.
>
> Ah, excellent timing. I just posted about that on the Jira as a  
> side note to my spell check refactor.
>
> http://issues.apache.org/jira/browse/LUCENE-537?page=all

It is most definitely a bug. And here is the quite simple fix:

public Suggestion[] suggestSimilar(String word, int numOfSuggestions....

         float min = this.min; // allows manipulation of accuracy  
within method.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 03 09:59:50 2006
Return-Path: <java-user-return-19933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28571 invoked from network); 3 Apr 2006 09:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2006 09:59:50 -0000
Received: (qmail 40656 invoked by uid 500); 3 Apr 2006 09:59:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40617 invoked by uid 500); 3 Apr 2006 09:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40606 invoked by uid 99); 3 Apr 2006 09:59:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 02:59:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.150.114.242] (HELO offstump-one.offstump.com) (217.150.114.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 02:59:42 -0700
Content-class: urn:content-classes:message
Subject: RE: Should I reindex with remove then add or can I add then remove?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 3 Apr 2006 10:59:15 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <2B7778F38CCF914EBD0E423ABA7B297E4B5FC6@offstump-one.offstump.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Should I reindex with remove then add or can I add then remove?
Thread-Index: AcZTTHP2Xt6G0Qz+TxW7LHRJBsnLEADuBtRQ
From: "Sindri Traustason" <sindrit@vyre.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi again

I guess I'll have to rephrase the question.

Is it ok to store a document number returned by TermDocs.doc() during
one IndexWriter.addDocument() and then performing a IndexReader.delete()
using that document number?

Sindri

> -----Original Message-----
> From: Sindri Traustason [mailto:sindrit@vyre.com]=20
> Sent: 29 March 2006 17:19
> To: java-user@lucene.apache.org
> Subject: Should I reindex with remove then add or can I add=20
> then remove?
>=20
> Hi!
>=20
> I have a question about how I should go about reindexing an=20
> existing record in an index.
>=20
> Currently my method that reindexes items is like this:
>=20
> 	public void updateInIndex( Item item ) throws IOException{
> 		Document doc =3D ItemDocumentFactory.createDocument(item);
> 		// Remove the document from search index
> 		Term term =3D new Term(ItemDocumentFactory.ITEM,=20
> item.getId());
> 		getIndexReader();
> 		indexReader.delete(term);
> 		// Remove the document from search index
> 		getIndexWriter();
> 		indexWriter.addDocument(doc);
> 	}
>=20
> getIndexReader closes the field variable indexWriter and=20
> opens indexReader and vice versa for get Index writer.  The=20
> problem with this is that it leaves the index in a state=20
> where the given item is not in the index (this can be seconds=20
> for large items).
>=20
> The suggested solution is like this:
>=20
> 	public void updateInIndex( Item item ) throws IOException{
> 		Document doc =3D ItemDocumentFactory.createDocument(item);
> 		Term term =3D new Term(ItemDocumentFactory.ITEM,=20
> item.getId());
> 		getIndexReader();
> 		// Find the old document
> 		TermDocs termDocs =3D indexReader.termDocs(term);
> 		int docNum =3D -1;
> 		if(termDocs.next()){
> 			docNum =3D termDocs.doc();
> 		}
> 		getIndexWriter();
> 		indexWriter.addDocument(doc);
> 		getIndexReader();
> 		// Remove the document from search index
> 		if(docNum!=3D-1){
> 			indexReader.delete(docNum);
> 		}
> 	}
>=20
> But what is frightening me here is the sentence "Clients=20
> should thus not rely on a given document having the same=20
> number between sessions." in=20
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index
> /IndexRead
> er.html
>=20
> My index is only accessed from this class and this class is=20
> private to a singleton thread that queues up index tasks=20
> (add, remove, update, optimize). =20
>=20
> So the question is: Since I can guarantee nothing else is=20
> updating the index can the second index reader be considered=20
> to be the same session and therefore the docNum for the old=20
> document still valid?
>=20
> I have done considerable tests on this and this seems to=20
> always work as intended.
>=20
> Cheers! And thanks in advance.
>=20
> Sindri Traustason
> Senior Software Engineer
> VYRE
> http://www.vyre.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 03 13:07:02 2006
Return-Path: <java-user-return-19934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42282 invoked from network); 3 Apr 2006 13:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2006 13:07:02 -0000
Received: (qmail 2087 invoked by uid 500); 3 Apr 2006 13:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1477 invoked by uid 500); 3 Apr 2006 13:06:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1466 invoked by uid 99); 3 Apr 2006 13:06:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 06:06:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 06:06:54 -0700
x-mimeole: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Regarding Indexes
Date: Mon, 3 Apr 2006 14:06:41 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE6A44FF@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Regarding Indexes
Thread-Index: AcZU300NYhIScSVjQBq2E99OLgIvBwAGT1cQAImu3aA=
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When doing this use a filter to restrict the query results to just those
for a users company. This will not affect the ranking then.

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: Mufaddal Khumri [mailto:MKhumri@allegromedical.com]=20
Sent: 31 March 2006 20:33
To: java-user@lucene.apache.org
Subject: RE: Regarding Indexes

The solution to your problem lies in answers to many business domain
specific questions like:

1. Will each company only want to carry out searches on their data or on
ALL the data?=20
2. If you do not know the answer to that, is there a chance that the
some companies would want to search only their data and some others
would want to search data from company a and company b? and yet another
company would want to search all the data?
3. How does having just one index opposed to individual indexes affect
indexing given the load that it will have to handle from one or more
companies? [Note: you could also index data from a group of companies
according to howmuch data on average they might have]
4. It might turn up that at this point you nor the companies might have
no way of knowing howmuch data they will have, in that case you will
have to use your best judgement in what path to take and build your app
in an a way such that it can be abstracted from whether the index is
being indexed in one index or in multiple indexes. Later you can toy
around with different setups as you get more understanding on the usage
of the application.

One way is to index all the data from a particular company with one of
the terms being "companyIdentifier" ... This way you will have the
ability to search within a company d's data or within a few different
company's data or the entire search index.


-Mufaddal.

-----Original Message-----
From: Ravi [mailto:ravi.jaladanki@siti.com]=20
Sent: Friday, March 31, 2006 9:22 AM
To: java-user@lucene.apache.org
Subject: Regarding Indexes

Hi Luceners,

 =20

  This is the my problem . Can any body give the solution for this one..

=20

=20

I am going to implement for the company which is going to Support ASP
(Application Service Provider )  model.=20

=20

In this model , around 200 companies are going to register with us and
add
there documents and searches them .=20

Now the problem is shall I maintain individual index files for each
company
or maintain single index file for all the companies.

=20

=20

If I maintain  individual index files then I need to create 200 searcher
objects for them because. each index should be searched..

=20

But if I maintain single index file , I can have one single index
searcher
but I need to add the condition for each document. And more over in
feature
if any body needed there own data we can not provide them .. so please
tell
me which model can help us to solve this problem.. the key point in this
application is add/modify/delete will occur very frequently . Please
help me
.... I am waiting for your feed back

=20

=20

Thanks

=20

Ravi Kumar Jaladanki

 =20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 03 15:27:13 2006
Return-Path: <java-user-return-19935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41370 invoked from network); 3 Apr 2006 15:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Apr 2006 15:27:13 -0000
Received: (qmail 86198 invoked by uid 500); 3 Apr 2006 15:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86159 invoked by uid 500); 3 Apr 2006 15:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86148 invoked by uid 99); 3 Apr 2006 15:27:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 08:27:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Apr 2006 08:27:05 -0700
Received: by zproxy.gmail.com with SMTP id 16so1800230nzp
        for <java-user@lucene.apache.org>; Mon, 03 Apr 2006 08:26:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nu8db20rHYtTV3On3ZfZ050EwURbph7gsG0r8IANGGQTzgqYSvYzcb8QBmIhwbdyXapfAZVNhxmJ966Dy+ZN1MhA6XfibmTAEQIdsgCjpmyfE7r8ai13Na/akvskEIDwbBB8ixo+Jw4mrDw+U7d4mN2gncCfzt6RWMkzZd2lnzg=
Received: by 10.64.185.3 with SMTP id i3mr754603qbf;
        Mon, 03 Apr 2006 08:26:45 -0700 (PDT)
Received: by 10.65.216.10 with HTTP; Mon, 3 Apr 2006 08:26:44 -0700 (PDT)
Message-ID: <4f2c7c9b0604030826m3b86a033k2efacfd0eab4a088@mail.gmail.com>
Date: Mon, 3 Apr 2006 23:26:44 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org, donv@webimpact.com
Subject: Re: Update or Delete Document for Lucene 1.4.x
In-Reply-To: <442D92D3.8060608@webimpact.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1858_1317463.1144078004965"
References: <442D92D3.8060608@webimpact.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1858_1317463.1144078004965
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

IndexReader.delete(int docNum) or IndexReader.delete(Term term)

2006/4/1, Don Vaillancourt <donv@webimpact.com>:
>
> Hi All,
>
> I need to implement the ability to update one document within a Lucene
> collection.
>
> I haven't been able to find anything in the API.  Is there a way to
> update one document or delete a document so that I can add an update?
>
> Thank You
>
> --
> Don Vaillancourt
> Director of Software Development
> WEB IMPACT INC.
> phone:   416-815-2000 ext. 245
> fax:     416-815-2001
> toll free:       866-319-1573 ext. 245
> email:   donv@web-impact.com <mailto:donv@webimpact.com>
> blackberry:      donv@rogers.blackberry.net
> <mailto:donv@rogers.blackberry.net>
> web:     http://www.web-impact.com
> address:         http://www.mapquest.ca
> <
> http://www.mapquest.com/maps/map.adp?country=3DCA&addtohistory=3D&formtyp=
e=3Daddress&searchtype=3Daddress&cat=3D&address=3D99%20Atlantic%20Ave&city=
=3DToronto&state=3DON&zipcode=3DM6K%203J8
> >
>
>
> This email message is intended only for the addressee(s) and contains
> information that may be confidential and/or copyright.
>
> If you are not the intended recipient please notify the sender by reply
> email and immediately delete this email.
>
> Use, disclosure or reproduction of this email by anyone other than the
> intended recipient(s) is strictly prohibited. No representation is made
> that this email or any attachments are free of viruses. Virus scanning
> is recommended and is the responsibility of the recipient.
>
>
>

------=_Part_1858_1317463.1144078004965--

From java-user-return-19936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 07:35:08 2006
Return-Path: <java-user-return-19936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27197 invoked from network); 4 Apr 2006 07:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 07:35:07 -0000
Received: (qmail 26978 invoked by uid 500); 4 Apr 2006 07:35:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26843 invoked by uid 500); 4 Apr 2006 07:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26832 invoked by uid 99); 4 Apr 2006 07:35:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 00:35:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BLANK_LINES_70_80
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 00:34:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DC9485B772; Tue,  4 Apr 2006 00:34:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D0DB47F403
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 00:34:38 -0700 (PDT)
Date: Tue, 4 Apr 2006 00:34:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene 1.9.1 - How to determine from which machine the hit comes?
In-Reply-To: <3664384.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0604040033330.14551@hal.rescomp.berkeley.edu>
References: <3647737.post@talk.nabble.com> <ACBE3413-1442-447C-B907-EB4276C243FD@ehatchersolutions.com>
 <3664384.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: How to find out which searcher a hit comes from with a MultiSearcher?

look at MultiSearcher.subSearcher and MultiSearcher.subDoc.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 07:40:32 2006
Return-Path: <java-user-return-19937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30492 invoked from network); 4 Apr 2006 07:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 07:40:31 -0000
Received: (qmail 39616 invoked by uid 500); 4 Apr 2006 07:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39591 invoked by uid 500); 4 Apr 2006 07:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39580 invoked by uid 99); 4 Apr 2006 07:40:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 00:40:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 00:40:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 75C035B779; Tue,  4 Apr 2006 00:40:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6A5117F403
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 00:40:04 -0700 (PDT)
Date: Tue, 4 Apr 2006 00:40:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: What is the largest index(s) size lucene can support
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3AEC@emss10m03.us.lmco.com>
Message-ID: <Pine.LNX.4.58.0604040037050.14551@hal.rescomp.berkeley.edu>
References: <92A278501EF50444AD3EE1FFB51219550BCE3AEC@emss10m03.us.lmco.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Or if to be more specific, can Lucene support BILLIONS of documents
: (across multiple indexes), and search all of them at once using the
: Parallel searcher?

I believe the theoretical limit in the number of documents is
Integer.MAX_VALUE -- regardless of how you partition the index, your
MultiSearcher has to be able to address every doc by (an) id.

There may be pratical limits you'd hit before you reach that point.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:17:45 2006
Return-Path: <java-user-return-19938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22040 invoked from network); 4 Apr 2006 10:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:17:43 -0000
Received: (qmail 49829 invoked by uid 500); 4 Apr 2006 10:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49672 invoked by uid 500); 4 Apr 2006 10:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49627 invoked by uid 99); 4 Apr 2006 10:17:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:17:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:17:31 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FQib1-0005n3-9q
	for java-user@lucene.apache.org; Tue, 04 Apr 2006 03:17:11 -0700
Message-ID: <3741693.post@talk.nabble.com>
Date: Tue, 4 Apr 2006 03:00:40 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Custom hit score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I want to have a simple hit score for every document where the query has been
found. E.g. if the query word was found 3 times in a document, this doc
should have 100% score, next document with 2 times should have 90% and so
on...

Normal hit score used by Lucene seems to be strange so I only want to know
how many times a query text appears in a document. With that information,
then I can make my own simple ranking...

Does someone know how this works in Lucene?

thx

Simon Dietschi
--
View this message in context: http://www.nabble.com/Custom-hit-score-t1392157.html#a3741693
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:41:13 2006
Return-Path: <java-user-return-19939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33736 invoked from network); 4 Apr 2006 10:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:41:12 -0000
Received: (qmail 75745 invoked by uid 500); 4 Apr 2006 10:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75681 invoked by uid 500); 4 Apr 2006 10:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75670 invoked by uid 99); 4 Apr 2006 10:41:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:41:07 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.50 as permitted sender)
Received: from [65.54.174.50] (HELO hotmail.com) (65.54.174.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:41:06 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 4 Apr 2006 03:40:46 -0700
Message-ID: <BAY103-F40417A3AD027AB41186564FECA0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Tue, 04 Apr 2006 10:40:45 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <1142419381.36365.ezmlm@lucene.apache.org>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser error
Date: Tue, 04 Apr 2006 10:40:45 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Apr 2006 10:40:46.0140 (UTC) FILETIME=[3B0367C0:01C657D4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there

Who can tell me why I got the the queryParser error for the following query:

Error in parse query :The light of the body is the eye: if therefore thine 
eye be single, thy whole body shall be full of light. But if thine eye be 
evil, thy whole body shall be full of darkness. If therefore the light that 
is in thee be darkness, how great is that darkness!
java.lang.NullPointerException

Appart from [, ], (, ), whatelse should be exculded in the query?

Thanks

Miki



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:41:40 2006
Return-Path: <java-user-return-19940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33936 invoked from network); 4 Apr 2006 10:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:41:39 -0000
Received: (qmail 77550 invoked by uid 500); 4 Apr 2006 10:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77519 invoked by uid 500); 4 Apr 2006 10:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77502 invoked by uid 99); 4 Apr 2006 10:41:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:41:34 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.46 as permitted sender)
Received: from [65.54.174.46] (HELO hotmail.com) (65.54.174.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:41:32 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 4 Apr 2006 03:41:11 -0700
Message-ID: <BAY103-F36931299CF23377E68B977FECA0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Tue, 04 Apr 2006 10:41:08 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <1142419381.36365.ezmlm@lucene.apache.org>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser error
Date: Tue, 04 Apr 2006 10:41:08 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Apr 2006 10:41:11.0947 (UTC) FILETIME=[4A653DB0:01C657D4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there

Who can tell me why I got the the queryParser error for the following query:

Error in parse query :The light of the body is the eye: if therefore thine 
eye be single, thy whole body shall be full of light. But if thine eye be 
evil, thy whole body shall be full of darkness. If therefore the light that 
is in thee be darkness, how great is that darkness!
java.lang.NullPointerException

Appart from [, ], (, ), whatelse should be exculded in the query?

Thanks

Miki



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:44:33 2006
Return-Path: <java-user-return-19941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35187 invoked from network); 4 Apr 2006 10:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:44:32 -0000
Received: (qmail 81422 invoked by uid 500); 4 Apr 2006 10:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81389 invoked by uid 500); 4 Apr 2006 10:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81378 invoked by uid 99); 4 Apr 2006 10:44:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:44:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.159.80.163] (HELO sapporo.toad.net) (66.159.80.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:44:25 -0700
Received: from [192.168.1.102] (pool-151-196-110-206.balt.east.verizon.net [151.196.110.206])
	by sapporo.toad.net (Postfix) with ESMTP id 97E7FA00D2
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 06:44:01 -0400 (EDT)
Message-ID: <44324DF2.8070605@cos.com>
Date: Tue, 04 Apr 2006 06:44:02 -0400
From: Michael Barry <mbarry@cos.com>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser error
References: <BAY103-F36931299CF23377E68B977FECA0@phx.gbl>
In-Reply-To: <BAY103-F36931299CF23377E68B977FECA0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to escape the colons.

miki sun wrote:
> Hi there
>
> Who can tell me why I got the the queryParser error for the following 
> query:
>
> Error in parse query :The light of the body is the eye: if therefore 
> thine eye be single, thy whole body shall be full of light. But if 
> thine eye be evil, thy whole body shall be full of darkness. If 
> therefore the light that is in thee be darkness, how great is that 
> darkness!
> java.lang.NullPointerException
>
> Appart from [, ], (, ), whatelse should be exculded in the query?
>
> Thanks
>
> Miki
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:52:50 2006
Return-Path: <java-user-return-19942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37874 invoked from network); 4 Apr 2006 10:52:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:52:49 -0000
Received: (qmail 86162 invoked by uid 500); 4 Apr 2006 10:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86130 invoked by uid 500); 4 Apr 2006 10:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86118 invoked by uid 99); 4 Apr 2006 10:52:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:52:44 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.46 as permitted sender)
Received: from [65.54.174.46] (HELO hotmail.com) (65.54.174.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:52:44 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 4 Apr 2006 03:52:23 -0700
Message-ID: <BAY103-F367B98F4C961585AB62A72FECA0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Tue, 04 Apr 2006 10:52:20 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <44324DF2.8070605@cos.com>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser error
Date: Tue, 04 Apr 2006 10:52:20 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Apr 2006 10:52:23.0690 (UTC) FILETIME=[DAC916A0:01C657D5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Still got error even without colon:

Error in parse query :The light of the body is the eye if therefore thine 
eye be single, thy whole body shall be full of light. But if thine eye be 
evil, thy whole body shall be full of darkness. If therefore the light that 
is in thee be darkness, how great is that darkness!

java.lang.NullPointerException



----Original Message Follows----
From: Michael Barry <mbarry@cos.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: QueryParser error
Date: Tue, 04 Apr 2006 06:44:02 -0400

You need to escape the colons.

miki sun wrote:
>Hi there
>
>Who can tell me why I got the the queryParser error for the following 
>query:
>
>Error in parse query :The light of the body is the eye: if therefore thine 
>eye be single, thy whole body shall be full of light. But if thine eye be 
>evil, thy whole body shall be full of darkness. If therefore the light that 
>is in thee be darkness, how great is that darkness!
>java.lang.NullPointerException
>
>Appart from [, ], (, ), whatelse should be exculded in the query?
>
>Thanks
>
>Miki



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 10:55:42 2006
Return-Path: <java-user-return-19943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38985 invoked from network); 4 Apr 2006 10:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 10:55:42 -0000
Received: (qmail 88496 invoked by uid 500); 4 Apr 2006 10:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88465 invoked by uid 500); 4 Apr 2006 10:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88454 invoked by uid 99); 4 Apr 2006 10:55:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:55:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.159.80.163] (HELO sapporo.toad.net) (66.159.80.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 03:55:36 -0700
Received: from [192.168.1.102] (pool-151-196-110-206.balt.east.verizon.net [151.196.110.206])
	by sapporo.toad.net (Postfix) with ESMTP id 7468CA0103
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 06:55:14 -0400 (EDT)
Message-ID: <44325093.60307@cos.com>
Date: Tue, 04 Apr 2006 06:55:15 -0400
From: Michael Barry <mbarry@cos.com>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser error
References: <BAY103-F367B98F4C961585AB62A72FECA0@phx.gbl>
In-Reply-To: <BAY103-F367B98F4C961585AB62A72FECA0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Exclamation point too ... check out the "Escaping Special Characters"
section in the QueryParser syntax guide 
(http://lucene.apache.org/java/docs/queryparsersyntax.html)

miki sun wrote:
> Still got error even without colon:
>
> Error in parse query :The light of the body is the eye if therefore 
> thine eye be single, thy whole body shall be full of light. But if 
> thine eye be evil, thy whole body shall be full of darkness. If 
> therefore the light that is in thee be darkness, how great is that 
> darkness!
>
> java.lang.NullPointerException
>
>
>
> ----Original Message Follows----
> From: Michael Barry <mbarry@cos.com>
> Reply-To: java-user@lucene.apache.org
> To: java-user@lucene.apache.org
> Subject: Re: QueryParser error
> Date: Tue, 04 Apr 2006 06:44:02 -0400
>
> You need to escape the colons.
>
> miki sun wrote:
>> Hi there
>>
>> Who can tell me why I got the the queryParser error for the following 
>> query:
>>
>> Error in parse query :The light of the body is the eye: if therefore 
>> thine eye be single, thy whole body shall be full of light. But if 
>> thine eye be evil, thy whole body shall be full of darkness. If 
>> therefore the light that is in thee be darkness, how great is that 
>> darkness!
>> java.lang.NullPointerException
>>
>> Appart from [, ], (, ), whatelse should be exculded in the query?
>>
>> Thanks
>>
>> Miki
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 11:02:24 2006
Return-Path: <java-user-return-19944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41255 invoked from network); 4 Apr 2006 11:02:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 11:02:23 -0000
Received: (qmail 96394 invoked by uid 500); 4 Apr 2006 11:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96361 invoked by uid 500); 4 Apr 2006 11:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96350 invoked by uid 99); 4 Apr 2006 11:02:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 04:02:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 04:02:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 70D1E33C696; Tue,  4 Apr 2006 07:01:57 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 28BF333C694
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 07:01:56 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <44325093.60307@cos.com>
References: <BAY103-F367B98F4C961585AB62A72FECA0@phx.gbl> <44325093.60307@cos.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8999F7A5-D736-4F0B-BDDE-F20C66E127BC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser error
Date: Tue, 4 Apr 2006 07:01:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Miki hasn't posted a complete stack trace, and if the NPE is coming  
from QueryParser it would likely give stack trace information  
pinpointing precisely where the issue is.  My hunch is some other  
code is obfuscating the real issue.  A complete stack trace would be  
much more helpful.

	Erik


On Apr 4, 2006, at 6:55 AM, Michael Barry wrote:

> Exclamation point too ... check out the "Escaping Special Characters"
> section in the QueryParser syntax guide (http://lucene.apache.org/ 
> java/docs/queryparsersyntax.html)
>
> miki sun wrote:
>> Still got error even without colon:
>>
>> Error in parse query :The light of the body is the eye if  
>> therefore thine eye be single, thy whole body shall be full of  
>> light. But if thine eye be evil, thy whole body shall be full of  
>> darkness. If therefore the light that is in thee be darkness, how  
>> great is that darkness!
>>
>> java.lang.NullPointerException
>>
>>
>>
>> ----Original Message Follows----
>> From: Michael Barry <mbarry@cos.com>
>> Reply-To: java-user@lucene.apache.org
>> To: java-user@lucene.apache.org
>> Subject: Re: QueryParser error
>> Date: Tue, 04 Apr 2006 06:44:02 -0400
>>
>> You need to escape the colons.
>>
>> miki sun wrote:
>>> Hi there
>>>
>>> Who can tell me why I got the the queryParser error for the  
>>> following query:
>>>
>>> Error in parse query :The light of the body is the eye: if  
>>> therefore thine eye be single, thy whole body shall be full of  
>>> light. But if thine eye be evil, thy whole body shall be full of  
>>> darkness. If therefore the light that is in thee be darkness, how  
>>> great is that darkness!
>>> java.lang.NullPointerException
>>>
>>> Appart from [, ], (, ), whatelse should be exculded in the query?
>>>
>>> Thanks
>>>
>>> Miki
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 11:29:42 2006
Return-Path: <java-user-return-19945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53547 invoked from network); 4 Apr 2006 11:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 11:29:42 -0000
Received: (qmail 18767 invoked by uid 500); 4 Apr 2006 11:29:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18423 invoked by uid 500); 4 Apr 2006 11:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18403 invoked by uid 99); 4 Apr 2006 11:29:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 04:29:36 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.14 as permitted sender)
Received: from [65.54.174.14] (HELO hotmail.com) (65.54.174.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 04:29:35 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 4 Apr 2006 04:29:15 -0700
Message-ID: <BAY103-F426701C508CF349F2D9B3FECA0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Tue, 04 Apr 2006 11:29:14 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <8999F7A5-D736-4F0B-BDDE-F20C66E127BC@ehatchersolutions.com>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser error + solution
Date: Tue, 04 Apr 2006 11:29:14 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 04 Apr 2006 11:29:15.0261 (UTC) FILETIME=[00FC0AD0:01C657DB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik and Michael!

I copied some code from demo.SearchFiles.java, I do not have a more clearer 
tracing message. Now it works.

But do you have a better way than this:

//escaping special chars for query parser
for (int i = 0; i < qr.length(); i ++)
{
if( (qr.charAt(i) == '+') ||(qr.charAt(i) == '-')
	||(qr.charAt(i) == '&')||(qr.charAt(i) == '~')
	||(qr.charAt(i) == '|')|| (qr.charAt(i) == '!')
	||(qr.charAt(i) == '[')||(qr.charAt(i) == ']')
	||(qr.charAt(i) == '(')||(qr.charAt(i) == ')')
	||(qr.charAt(i) == '{')||(qr.charAt(i) == '}')
	||(qr.charAt(i) == '^')||(qr.charAt(i) == '"')
	||(qr.charAt(i) == '*')||(qr.charAt(i) == '?')
	||(qr.charAt(i) == ':')||(qr.charAt(i) == '\\') )
	theQueries += "\\" + qr.charAt(i);
else
	theQueries += qr.charAt(i) ;
}



----Original Message Follows----
From: Erik Hatcher <erik@ehatchersolutions.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: QueryParser error
Date: Tue, 4 Apr 2006 07:01:41 -0400

Miki hasn't posted a complete stack trace, and if the NPE is coming  from 
QueryParser it would likely give stack trace information  pinpointing 
precisely where the issue is.  My hunch is some other  code is obfuscating 
the real issue.  A complete stack trace would be  much more helpful.

	Erik


On Apr 4, 2006, at 6:55 AM, Michael Barry wrote:

>Exclamation point too ... check out the "Escaping Special Characters"
>section in the QueryParser syntax guide (http://lucene.apache.org/ 
>java/docs/queryparsersyntax.html)
>
>miki sun wrote:
>>Still got error even without colon:
>>
>>Error in parse query :The light of the body is the eye if  therefore thine 
>>eye be single, thy whole body shall be full of  light. But if thine eye be 
>>evil, thy whole body shall be full of  darkness. If therefore the light 
>>that is in thee be darkness, how  great is that darkness!
>>
>>java.lang.NullPointerException
>>
>>
>>
>>----Original Message Follows----
>>From: Michael Barry <mbarry@cos.com>
>>Reply-To: java-user@lucene.apache.org
>>To: java-user@lucene.apache.org
>>Subject: Re: QueryParser error
>>Date: Tue, 04 Apr 2006 06:44:02 -0400
>>
>>You need to escape the colons.
>>
>>miki sun wrote:
>>>Hi there
>>>
>>>Who can tell me why I got the the queryParser error for the  following 
>>>query:
>>>
>>>Error in parse query :The light of the body is the eye: if  therefore 
>>>thine eye be single, thy whole body shall be full of  light. But if thine 
>>>eye be evil, thy whole body shall be full of  darkness. If therefore the 
>>>light that is in thee be darkness, how  great is that darkness!
>>>java.lang.NullPointerException
>>>
>>>Appart from [, ], (, ), whatelse should be exculded in the query?
>>>
>>>Thanks
>>>
>>>Miki
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 12:30:58 2006
Return-Path: <java-user-return-19946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90661 invoked from network); 4 Apr 2006 12:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 12:30:58 -0000
Received: (qmail 86137 invoked by uid 500); 4 Apr 2006 12:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86107 invoked by uid 500); 4 Apr 2006 12:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86096 invoked by uid 99); 4 Apr 2006 12:30:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:30:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:30:52 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FQkg3-0002ve-Ki
	for java-user@lucene.apache.org; Tue, 04 Apr 2006 05:30:31 -0700
Message-ID: <3743436.post@talk.nabble.com>
Date: Tue, 4 Apr 2006 05:30:31 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: highlighting - fuzzy search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Is it possible to get back a highlighted text "snippet" when using fuzzy
search? I mean where does lucene stores the similar words to the search
query? If I know where these words are, I can use one of these words to
highlight.

thx

Simon Dietschi
--
View this message in context: http://www.nabble.com/highlighting---fuzzy-search-t1392775.html#a3743436
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 12:56:12 2006
Return-Path: <java-user-return-19947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5003 invoked from network); 4 Apr 2006 12:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 12:56:12 -0000
Received: (qmail 27788 invoked by uid 500); 4 Apr 2006 12:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27757 invoked by uid 500); 4 Apr 2006 12:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27746 invoked by uid 99); 4 Apr 2006 12:56:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:56:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:56:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DE25E33CFEE; Tue,  4 Apr 2006 08:55:43 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id AACF733CFDC
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 08:54:49 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <3743436.post@talk.nabble.com>
References: <3743436.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: highlighting - fuzzy search
Date: Tue, 4 Apr 2006 08:54:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 4, 2006, at 8:30 AM, Fisheye wrote:
> Is it possible to get back a highlighted text "snippet" when using  
> fuzzy
> search? I mean where does lucene stores the similar words to the  
> search
> query? If I know where these words are, I can use one of these  
> words to
> highlight.

You mean using a FuzzyQuery (fuzzy~ in QueryParser syntax)?  For any  
query which expands to multiple terms, a rewrite of the Query is  
needed before the Highlighter can do its thing.  Look at Query.rewrite 
().

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 12:59:51 2006
Return-Path: <java-user-return-19948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7496 invoked from network); 4 Apr 2006 12:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 12:59:50 -0000
Received: (qmail 33700 invoked by uid 500); 4 Apr 2006 12:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33621 invoked by uid 500); 4 Apr 2006 12:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33413 invoked by uid 99); 4 Apr 2006 12:59:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:59:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 05:59:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 03FEC33CFDC; Tue,  4 Apr 2006 08:59:08 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 6A9B033CFEE
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 08:59:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <BAY103-F426701C508CF349F2D9B3FECA0@phx.gbl>
References: <BAY103-F426701C508CF349F2D9B3FECA0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E7463903-6503-4566-A04F-2AADAC528B43@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser error + solution
Date: Tue, 4 Apr 2006 08:58:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you're going to escape all the special characters used as  
operators in the query expression, then what is the point of using  
QueryParser?   Seems like you could just tokenize the text yourself  
and build a Query instance via API to support your needs.  Do you  
need to leverage any special operators of QueryParser?  Or are you  
just using it to take a string of words and turn it into a BooleanQuery?

	Erik


On Apr 4, 2006, at 7:29 AM, miki sun wrote:

> Thanks Erik and Michael!
>
> I copied some code from demo.SearchFiles.java, I do not have a more  
> clearer tracing message. Now it works.
>
> But do you have a better way than this:
>
> //escaping special chars for query parser
> for (int i = 0; i < qr.length(); i ++)
> {
> if( (qr.charAt(i) == '+') ||(qr.charAt(i) == '-')
> 	||(qr.charAt(i) == '&')||(qr.charAt(i) == '~')
> 	||(qr.charAt(i) == '|')|| (qr.charAt(i) == '!')
> 	||(qr.charAt(i) == '[')||(qr.charAt(i) == ']')
> 	||(qr.charAt(i) == '(')||(qr.charAt(i) == ')')
> 	||(qr.charAt(i) == '{')||(qr.charAt(i) == '}')
> 	||(qr.charAt(i) == '^')||(qr.charAt(i) == '"')
> 	||(qr.charAt(i) == '*')||(qr.charAt(i) == '?')
> 	||(qr.charAt(i) == ':')||(qr.charAt(i) == '\\') )
> 	theQueries += "\\" + qr.charAt(i);
> else
> 	theQueries += qr.charAt(i) ;
> }
>
>
>
> ----Original Message Follows----
> From: Erik Hatcher <erik@ehatchersolutions.com>
> Reply-To: java-user@lucene.apache.org
> To: java-user@lucene.apache.org
> Subject: Re: QueryParser error
> Date: Tue, 4 Apr 2006 07:01:41 -0400
>
> Miki hasn't posted a complete stack trace, and if the NPE is  
> coming  from QueryParser it would likely give stack trace  
> information  pinpointing precisely where the issue is.  My hunch is  
> some other  code is obfuscating the real issue.  A complete stack  
> trace would be  much more helpful.
>
> 	Erik
>
>
> On Apr 4, 2006, at 6:55 AM, Michael Barry wrote:
>
>> Exclamation point too ... check out the "Escaping Special Characters"
>> section in the QueryParser syntax guide (http://lucene.apache.org/  
>> java/docs/queryparsersyntax.html)
>>
>> miki sun wrote:
>>> Still got error even without colon:
>>>
>>> Error in parse query :The light of the body is the eye if   
>>> therefore thine eye be single, thy whole body shall be full of   
>>> light. But if thine eye be evil, thy whole body shall be full of   
>>> darkness. If therefore the light that is in thee be darkness,  
>>> how  great is that darkness!
>>>
>>> java.lang.NullPointerException
>>>
>>>
>>>
>>> ----Original Message Follows----
>>> From: Michael Barry <mbarry@cos.com>
>>> Reply-To: java-user@lucene.apache.org
>>> To: java-user@lucene.apache.org
>>> Subject: Re: QueryParser error
>>> Date: Tue, 04 Apr 2006 06:44:02 -0400
>>>
>>> You need to escape the colons.
>>>
>>> miki sun wrote:
>>>> Hi there
>>>>
>>>> Who can tell me why I got the the queryParser error for the   
>>>> following query:
>>>>
>>>> Error in parse query :The light of the body is the eye: if   
>>>> therefore thine eye be single, thy whole body shall be full of   
>>>> light. But if thine eye be evil, thy whole body shall be full  
>>>> of  darkness. If therefore the light that is in thee be  
>>>> darkness, how  great is that darkness!
>>>> java.lang.NullPointerException
>>>>
>>>> Appart from [, ], (, ), whatelse should be exculded in the query?
>>>>
>>>> Thanks
>>>>
>>>> Miki
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 13:10:37 2006
Return-Path: <java-user-return-19949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13892 invoked from network); 4 Apr 2006 13:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 13:10:37 -0000
Received: (qmail 50460 invoked by uid 500); 4 Apr 2006 13:10:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50435 invoked by uid 500); 4 Apr 2006 13:10:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50424 invoked by uid 99); 4 Apr 2006 13:10:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 06:10:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 06:10:26 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FQlIM-0004sO-I8
	for java-user@lucene.apache.org; Tue, 04 Apr 2006 06:10:06 -0700
Message-ID: <3743994.post@talk.nabble.com>
Date: Tue, 4 Apr 2006 06:10:06 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
In-Reply-To: <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Ok, thanks Erik. So probably my code may explain it:

-------------------------------------------------------------------------------------------------------------------------------

    public void searchQuery(String q, float rel, String indexDir){
    	
    	String excerpt = "";
    	
        try{
        	
          Searcher searcher = new IndexSearcher(indexDir);
          Analyzer analyzer = new StandardAnalyzer();
          
          Term searchTerm = new Term("text", q);
          FuzzyQuery fuzzyQuery = new FuzzyQuery(searchTerm, rel/100);

	    	System.out.println("Searching for: " + q);
	    	
	    	Hits hits = searcher.search(fuzzyQuery);
	    	System.out.println(hits.length() + " total matching documents");
	    	
	    	for (int i = 0; i < hits.length(); i++){
		    		  
			    	    Document doc = hits.doc(i);
			    	    String path = doc.get("path");
			    	    
			    	    SearchTextHighlighter processText = 
			    	    	new SearchTextHighlighter();
			    	    
//			    	    excerpt = 
//			    	    	processText.getExcerpt(doc.get("text"), q, fuzzyQuery);
			    	    
			    	    if (path != null){
			    	    	
			                  System.out.println(i + ".-------");
			                  System.out.println("  Path:    " + path);
			                  System.out.println("  Score:   " + hits.score(i));
			                  System.out.println("  DocID:   " + doc.get("docID"));
			                  System.out.println("  Snippet: " + excerpt);
			                  System.out.println();
			                  
			    	    }else{
			    	    	
			                  String url = doc.get("url");
			                  
			                  if (url != null){
			                	  
						    		System.out.println(i + ". " + url);
						    		System.out.println("   - " + doc.get("title"));
						    		System.out.println("Score: " + hits.score(i));
						    		
			                  }else{
			                	  
			                	  	System.out.println(i + 
			                	  			". " + "No path nor URL for this document");
			                  }
			    	    }
	    	}
          
          searcher.close();

        }catch (Exception e){
        	
        	e.printStackTrace();
        }
      }

-------------------------------------------------------------------------------------------------------------------------------

Method getExcerpt does the following:

-------------------------------------------------------------------------------------------------------------------------------

  public String getExcerpt(String textToCompute, String queryText, Query
query) {

    String excerpt = "";
    String vTemp = "";
    Analyzer analyzer = new StandardAnalyzer();
    Highlighter highlighter = new Highlighter(new QueryScorer(query));

    if(textToCompute != null ){

      TokenStream tokenStream = analyzer.tokenStream("text",
            new StringReader(textToCompute));

      try {

        vTemp = highlighter.getBestFragment(tokenStream, textToCompute);
        excerpt = vTemp.replaceAll("" + queryText + "", queryText);
      }
      catch (IOException ex) {

        
      }
    }

    return excerpt;
  }

-------------------------------------------------------------------------------------------------------------------------------
--
View this message in context: http://www.nabble.com/highlighting---fuzzy-search-t1392775.html#a3743994
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 13:37:33 2006
Return-Path: <java-user-return-19950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37433 invoked from network); 4 Apr 2006 13:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 13:37:32 -0000
Received: (qmail 2905 invoked by uid 500); 4 Apr 2006 13:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2884 invoked by uid 500); 4 Apr 2006 13:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2873 invoked by uid 99); 4 Apr 2006 13:37:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 06:37:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 06:37:23 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5AEA733CFDE; Tue,  4 Apr 2006 09:37:02 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 98B2433CFDC
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 09:36:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <3743994.post@talk.nabble.com>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: highlighting - fuzzy search
Date: Tue, 4 Apr 2006 09:36:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So, just like I said.... call Query.rewrite() and pass the returned  
Query to the Highlighter, not the original FuzzyQuery.  I believe the  
javadocs for Highlighter even mention this?   Or at least its an FAQ  
that hopefully is on the wiki or easily findable somehow.

	Erik


On Apr 4, 2006, at 9:10 AM, Fisheye wrote:

>
> Ok, thanks Erik. So probably my code may explain it:
>
> ---------------------------------------------------------------------- 
> ---------------------------------------------------------
>
>     public void searchQuery(String q, float rel, String indexDir){
>     	
>     	String excerpt = "";
>     	
>         try{
>         	
>           Searcher searcher = new IndexSearcher(indexDir);
>           Analyzer analyzer = new StandardAnalyzer();
>
>           Term searchTerm = new Term("text", q);
>           FuzzyQuery fuzzyQuery = new FuzzyQuery(searchTerm, rel/100);
>
> 	    	System.out.println("Searching for: " + q);
> 	    	
> 	    	Hits hits = searcher.search(fuzzyQuery);
> 	    	System.out.println(hits.length() + " total matching documents");
> 	    	
> 	    	for (int i = 0; i < hits.length(); i++){
> 		    		
> 			    	    Document doc = hits.doc(i);
> 			    	    String path = doc.get("path");
> 			    	
> 			    	    SearchTextHighlighter processText =
> 			    	    	new SearchTextHighlighter();
> 			    	
> //			    	    excerpt =
> //			    	    	processText.getExcerpt(doc.get("text"), q, fuzzyQuery);
> 			    	
> 			    	    if (path != null){
> 			    	    	
> 			                  System.out.println(i + ".-------");
> 			                  System.out.println("  Path:    " + path);
> 			                  System.out.println("  Score:   " + hits.score 
> (i));
> 			                  System.out.println("  DocID:   " + doc.get 
> ("docID"));
> 			                  System.out.println("  Snippet: " + excerpt);
> 			                  System.out.println();
> 			
> 			    	    }else{
> 			    	    	
> 			                  String url = doc.get("url");
> 			
> 			                  if (url != null){
> 			                	
> 						    		System.out.println(i + ". " + url);
> 						    		System.out.println("   - " + doc.get("title"));
> 						    		System.out.println("Score: " + hits.score(i));
> 						    		
> 			                  }else{
> 			                	
> 			                	  	System.out.println(i +
> 			                	  			". " + "No path nor URL for this document");
> 			                  }
> 			    	    }
> 	    	}
>
>           searcher.close();
>
>         }catch (Exception e){
>         	
>         	e.printStackTrace();
>         }
>       }
>
> ---------------------------------------------------------------------- 
> ---------------------------------------------------------
>
> Method getExcerpt does the following:
>
> ---------------------------------------------------------------------- 
> ---------------------------------------------------------
>
>   public String getExcerpt(String textToCompute, String queryText,  
> Query
> query) {
>
>     String excerpt = "";
>     String vTemp = "";
>     Analyzer analyzer = new StandardAnalyzer();
>     Highlighter highlighter = new Highlighter(new QueryScorer(query));
>
>     if(textToCompute != null ){
>
>       TokenStream tokenStream = analyzer.tokenStream("text",
>             new StringReader(textToCompute));
>
>       try {
>
>         vTemp = highlighter.getBestFragment(tokenStream,  
> textToCompute);
>         excerpt = vTemp.replaceAll("" + queryText + "", queryText);
>       }
>       catch (IOException ex) {
>
>
>       }
>     }
>
>     return excerpt;
>   }
>
> ---------------------------------------------------------------------- 
> ---------------------------------------------------------
> --
> View this message in context: http://www.nabble.com/highlighting--- 
> fuzzy-search-t1392775.html#a3743994
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 15:24:25 2006
Return-Path: <java-user-return-19951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4958 invoked from network); 4 Apr 2006 15:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 15:24:24 -0000
Received: (qmail 4180 invoked by uid 500); 4 Apr 2006 15:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4156 invoked by uid 500); 4 Apr 2006 15:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4145 invoked by uid 99); 4 Apr 2006 15:24:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 08:24:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 08:24:16 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FQnNr-0003at-Nq
	for java-user@lucene.apache.org; Tue, 04 Apr 2006 08:23:55 -0700
Message-ID: <3746483.post@talk.nabble.com>
Date: Tue, 4 Apr 2006 08:23:55 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
In-Reply-To: <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


ok, thank Erik, now it works :-)

Probably, do you know if there is a possibility to get the similar words
generated by the algorithm when doing fuzzy search?

Cheers

Simon Dietschi
--
View this message in context: http://www.nabble.com/highlighting---fuzzy-search-t1392775.html#a3746483
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 18:00:19 2006
Return-Path: <java-user-return-19952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92805 invoked from network); 4 Apr 2006 18:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 18:00:18 -0000
Received: (qmail 65067 invoked by uid 500); 4 Apr 2006 18:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64903 invoked by uid 500); 4 Apr 2006 18:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64892 invoked by uid 99); 4 Apr 2006 18:00:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 11:00:12 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pepone.onrez@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nproxy.gmail.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 11:00:10 -0700
Received: by nproxy.gmail.com with SMTP id c29so1234541nfb
        for <java-user@lucene.apache.org>; Tue, 04 Apr 2006 10:59:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=A8OeBWneKDipP9fz6JOtzewQ6vz6mARhH6DbHVDe4HoFb2vTF8edFeeinPn+spStyKlvBdioiEGzl1Wd2/lC4qB3jHNrESq7aU0MMFwHuGoCGD54jWLl12Ga2PfJUYwUd1I/+R87GYx/Vd+CAJlsrciZLhdjd+goVlr2q+zNC98=
Received: by 10.48.1.19 with SMTP id 19mr631936nfa;
        Tue, 04 Apr 2006 10:59:49 -0700 (PDT)
Received: by 10.48.157.15 with HTTP; Tue, 4 Apr 2006 10:59:49 -0700 (PDT)
Message-ID: <198501d60604041059lda5b56vd733fce73aa48ea1@mail.gmail.com>
Date: Tue, 4 Apr 2006 19:59:49 +0200
From: "pepone pepone" <pepone.onrez@gmail.com>
To: java-user@lucene.apache.org
Subject: problem Indexing path of files
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_841_13684126.1144173589281"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_841_13684126.1144173589281
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I trying to index the paths of a tree like structure in lucene

My docs have info like this

Node1
   name:a
   path:/a

Node2
   name:b
   path:/a/b

Node3
  name:c
  path:/a/b/c

 when search  for path:/a  the 3 Nodes match

I indexing this info using the StandardAnalyzer

any ideas to solve this trouble?


--
play tetris http://pepone.on-rez.com/tetris

------=_Part_841_13684126.1144173589281--

From java-user-return-19953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 18:33:22 2006
Return-Path: <java-user-return-19953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9989 invoked from network); 4 Apr 2006 18:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 18:33:22 -0000
Received: (qmail 15251 invoked by uid 500); 4 Apr 2006 18:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15229 invoked by uid 500); 4 Apr 2006 18:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15218 invoked by uid 99); 4 Apr 2006 18:33:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 11:33:16 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.22.58.18] (HELO mail.dicarta.com) (12.22.58.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 11:33:14 -0700
Received: from corpx.corp.dicarta.com (corpx.dicarta.com [10.1.8.35])
	by mail.dicarta.com  with ESMTP id k34IWlB03450
	for <java-user@lucene.apache.org>; Tue, 4 Apr 2006 11:32:48 -0700 (PDT)
From: jwang@dicarta.com
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: problem Indexing path of files
Date: Tue, 4 Apr 2006 11:32:52 -0700
Message-ID: <9778DA4F3D53D04B9AE80AC64AC073A305745B42@corpx.corp.dicarta.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: problem Indexing path of files
Thread-Index: AcZYEaLkdjRFFtu9RZ2URCRWAh5tfAAAP+JA
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Use the PerFieldAnalyzerWrapper and set your path (and probably name) to
KeywordAnalyzer.  Reserve whatever analyzer you have for the actual
contents/meta data of the file.

Do a search on PerFieldAnalyzerWrapper in this ML for examples.

Jeff Wang
diCarta, Inc.

-----Original Message-----
From: pepone pepone [mailto:pepone.onrez@gmail.com]=20
Sent: Tuesday, April 04, 2006 11:00 AM
To: java-user@lucene.apache.org
Subject: problem Indexing path of files=20

I trying to index the paths of a tree like structure in lucene

My docs have info like this

Node1
   name:a
   path:/a

Node2
   name:b
   path:/a/b

Node3
  name:c
  path:/a/b/c

 when search  for path:/a  the 3 Nodes match

I indexing this info using the StandardAnalyzer

any ideas to solve this trouble?


--
play tetris http://pepone.on-rez.com/tetris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 04 20:56:32 2006
Return-Path: <java-user-return-19954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89163 invoked from network); 4 Apr 2006 20:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Apr 2006 20:56:32 -0000
Received: (qmail 54204 invoked by uid 500); 4 Apr 2006 20:56:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53922 invoked by uid 500); 4 Apr 2006 20:56:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53909 invoked by uid 99); 4 Apr 2006 20:56:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 13:56:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 13:56:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2FAD733C10B; Tue,  4 Apr 2006 16:56:05 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id BD63233C10B
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 16:56:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <3746483.post@talk.nabble.com>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com> <3746483.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: highlighting - fuzzy search
Date: Tue, 4 Apr 2006 16:55:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 4, 2006, at 11:23 AM, Fisheye wrote:
> Probably, do you know if there is a possibility to get the similar  
> words
> generated by the algorithm when doing fuzzy search?

Well, a roundabout way is to simply create a FuzzyQuery, rewrite it,  
cast it to a BooleanQuery and use the BooleanQuery API to extract the  
TermQuery objects and the Term within the TermQuery has what you're  
looking for.  That's actually not a bad way to go, but you could also  
go more low-level and borrow the technique used under FuzzyQuery itself:

	<http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/ 
apache/lucene/search/FuzzyTermEnum.java>

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 00:11:10 2006
Return-Path: <java-user-return-19955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67139 invoked from network); 5 Apr 2006 00:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 00:11:10 -0000
Received: (qmail 75642 invoked by uid 500); 5 Apr 2006 00:11:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75608 invoked by uid 500); 5 Apr 2006 00:11:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75597 invoked by uid 99); 5 Apr 2006 00:11:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 17:11:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 17:11:00 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 33DA9B735C
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 10:10:32 +1000 (EST)
Message-ID: <44330B73.7030601@nuix.com.au>
Date: Wed, 05 Apr 2006 10:12:35 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com> <3746483.post@talk.nabble.com> <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com>
In-Reply-To: <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> 
> On Apr 4, 2006, at 11:23 AM, Fisheye wrote:
>> Probably, do you know if there is a possibility to get the similar words
>> generated by the algorithm when doing fuzzy search?
> 
> Well, a roundabout way is to simply create a FuzzyQuery, rewrite it, 
> cast it to a BooleanQuery and use the BooleanQuery API to extract the 
> TermQuery objects and the Term within the TermQuery has what you're 
> looking for.  That's actually not a bad way to go, but you could also go 
> more low-level and borrow the technique used under FuzzyQuery itself:
> 
>     <http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/search/FuzzyTermEnum.java> 

We take an approach somewhere down the middle...

     IndexReader reader = ...;
     FuzzyQuery q = ...

     FilteredTermEnum enum = q.getEnum(reader);

The advantage of this method is that it's easier to generalise (works 
for any subclass of MultiTermQuery, not just FuzzyQuery), while not 
needing any rewriting (which may eat more memory, although I can't say 
for sure.)

In fact our own code takes any query and looks at the type of it to 
extract terms from it, potentially recursively if it encounters a 
BooleanQuery.  It would be Really Nice [TM] if Lucene had a method on 
the Query class to do this directly. :-)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 00:30:21 2006
Return-Path: <java-user-return-19956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74343 invoked from network); 5 Apr 2006 00:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 00:30:21 -0000
Received: (qmail 89002 invoked by uid 500); 5 Apr 2006 00:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88969 invoked by uid 500); 5 Apr 2006 00:30:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88957 invoked by uid 99); 5 Apr 2006 00:30:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 17:30:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 17:30:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A437E5B772; Tue,  4 Apr 2006 17:29:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9D63D7F403;
	Tue,  4 Apr 2006 17:29:47 -0700 (PDT)
Date: Tue, 4 Apr 2006 17:29:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: Artem Vasiliev <artvas@gmail.com>
Subject: Re: Re[2]: OutOfMemory with search(Query, Sort)
In-Reply-To: <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604041722480.26394@hal.rescomp.berkeley.edu>
References: <756391613.20060401024129@gmail.com> 
 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com> 
 <18784005.20060401141302@gmail.com> <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > sort by filePath field which can be 100 bytes at average meaning 400M
: > RAM for the cache
:
: Well, it's probably not quite that bad...
:
: For string sorting, a FieldCache.StringIndex is used.
: It contains a sorted String[num_unique_terms_in_field], and an int[maxDoc]
: So if 10 documents share a large string field value, that value will
: only be in the fieldCache once.

yeah, but in his case he's dealing with filepaths -- i'm guessing that
each document represents a file, and no two files will have the same path.

some benefit may be gained in spliting the filepath field up into a
dirpath field and a filename field, and then sortinging on "dirpath,
filename" .. this should reduce the size quite a bit if the number of
unique files is significantly greater then the number of unique
directories -- of course how much it helps also depends greatly on wether
your fielnames are really long compared to your directory paths.

In general, Yonik's suggestion is really the best way to go.  as i
understand it the only reason the StringIndex FieldCache maintains the
list of strings permenantly is for use in a MultiSearcher, so if you
aren't worried about that i think it would work very nicely.

it would also make a really great PATCH, espcially if IndexSearcher got a
new option that let you tell it to use this new scaled down
Sort/FieldCache option for strings because you weren't using it in a
MultiSearcher.


: If you are just using an IndexSearcher (no multisearchers), then the
: String[] isn't strictly needed... only the ordering (the int[]) is
: needed from the StringIndex.  One option is to create your own
: FieldCache that doesn't create/store that String[].


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 04:24:52 2006
Return-Path: <java-user-return-19957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58086 invoked from network); 5 Apr 2006 04:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 04:24:52 -0000
Received: (qmail 62019 invoked by uid 500); 5 Apr 2006 04:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61985 invoked by uid 500); 5 Apr 2006 04:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61971 invoked by uid 99); 5 Apr 2006 04:24:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 21:24:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 21:24:44 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id C0DB7B7657
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 14:24:16 +1000 (EST)
Message-ID: <443346EC.2000108@nuix.com.au>
Date: Wed, 05 Apr 2006 14:26:20 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser error + solution
References: <BAY103-F426701C508CF349F2D9B3FECA0@phx.gbl>
In-Reply-To: <BAY103-F426701C508CF349F2D9B3FECA0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

miki sun wrote:
> Thanks Erik and Michael!
> 
> I copied some code from demo.SearchFiles.java, I do not have a more 
> clearer tracing message. Now it works.
> 
> But do you have a better way than this:
> 
[snip]

Something like this?

   String str = "Really bad query string: lots of evil stuff!";
   str = QueryParser.escape(str);

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 04:59:30 2006
Return-Path: <java-user-return-19958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68019 invoked from network); 5 Apr 2006 04:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 04:59:29 -0000
Received: (qmail 93195 invoked by uid 500); 5 Apr 2006 04:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93163 invoked by uid 500); 5 Apr 2006 04:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93148 invoked by uid 99); 5 Apr 2006 04:59:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 21:59:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of artvas@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nproxy.gmail.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 21:59:23 -0700
Received: by nproxy.gmail.com with SMTP id p77so1265061nfc
        for <java-user@lucene.apache.org>; Tue, 04 Apr 2006 21:59:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=A7Mr6Y7DOTbDELmBkmkG8qOzYE7guSg9EDv1zHIu0FHpSprkVpTp0mdI5VsGJqAfa0OCva6F6G/QtXVZ36kudAqv2BrQbv2e5uc9JyQJlimEMEXDLdBQbrEycbH1TGjsTswmYV45NyJJkmc/iyDZBeLRckdTEgVVDhBLoW3PZ9A=
Received: by 10.49.21.19 with SMTP id y19mr1204787nfi;
        Tue, 04 Apr 2006 21:59:02 -0700 (PDT)
Received: from ppp232-236.pptp.mtu-net.ru ( [81.195.232.236])
        by mx.gmail.com with ESMTP id o9sm407866nfa.2006.04.04.21.58.58;
        Tue, 04 Apr 2006 21:59:00 -0700 (PDT)
Date: Wed, 5 Apr 2006 08:59:15 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <1469269881.20060405085915@gmail.com>
To: java-user@lucene.apache.org
Subject: Re[4]: OutOfMemory with search(Query, Sort)
In-Reply-To: <Pine.LNX.4.58.0604041722480.26394@hal.rescomp.berkeley.edu>
References: <756391613.20060401024129@gmail.com>
 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
 <18784005.20060401141302@gmail.com>
 <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
 <Pine.LNX.4.58.0604041722480.26394@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Hoss,

Thanks for your answer, you're right, filepathes are pretty much
unique. Anyway I don't want this total-field-cache-loading situation occur
in any circumstances - it's too expensive. My app usually crawls while
user searches are performed. Crawl involves additions and deletions so
IndexSearcher get closed relatively frequently. Seems like Lucene
would reload the whole field cache for each new IndexSearcher, which
would be a big hit anyway. So I'll try FieldCache overriding solution
proposed by you and Yonik and may be commit it to Lucene as a patch.

Btw do I understand right that concrete FieldCache class isn't pluggable
at Lucene at the moment?

: >> sort by filePath field which can be 100 bytes at average meaning 400M
: >> RAM for the cache
CH> :
CH> : Well, it's probably not quite that bad...

CH> yeah, but in his case he's dealing with filepaths -- i'm guessing that
CH> each document represents a file, and no two files will have the same path.

CH> some benefit may be gained in spliting the filepath field up into a
CH> dirpath field and a filename field, and then sortinging on "dirpath,
CH> filename" .. this should reduce the size quite a bit if the number of

-- 
Best regards,
 Artem

http://sharehound.sourceforge.net sharehound, the open source filesystems indexer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 05:19:24 2006
Return-Path: <java-user-return-19959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75238 invoked from network); 5 Apr 2006 05:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 05:19:24 -0000
Received: (qmail 11860 invoked by uid 500); 5 Apr 2006 05:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11785 invoked by uid 500); 5 Apr 2006 05:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11695 invoked by uid 99); 5 Apr 2006 05:19:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:19:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:19:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 129245B76C; Tue,  4 Apr 2006 22:18:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 010557F403
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 22:18:38 -0700 (PDT)
Date: Tue, 4 Apr 2006 22:18:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
In-Reply-To: <44330B73.7030601@nuix.com.au>
Message-ID: <Pine.LNX.4.58.0604042207290.9728@hal.rescomp.berkeley.edu>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com>
 <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com>
 <3746483.post@talk.nabble.com> <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com>
 <44330B73.7030601@nuix.com.au>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



: > Well, a roundabout way is to simply create a FuzzyQuery, rewrite it,
: > cast it to a BooleanQuery and use the BooleanQuery API to extract the
: > TermQuery objects and the Term within the TermQuery has what you're
	...

: We take an approach somewhere down the middle...
	...
:      FuzzyQuery q = ...
	...
:      FilteredTermEnum enum = q.getEnum(reader);
	...
: In fact our own code takes any query and looks at the type of it to
: extract terms from it, potentially recursively if it encounters a
: BooleanQuery.  It would be Really Nice [TM] if Lucene had a method on
: the Query class to do this directly. :-)

Isn't that what Query.extractTerms is for?  Isn't it implimented by all
primitive Queries, so you should be able to say...

	HashSet terms = new HashSet();
	query.rewrite(reader).extractTerms(terms);

...and have yourself a list of all the terms?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 05:29:24 2006
Return-Path: <java-user-return-19960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80846 invoked from network); 5 Apr 2006 05:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 05:29:23 -0000
Received: (qmail 21913 invoked by uid 500); 5 Apr 2006 05:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21882 invoked by uid 500); 5 Apr 2006 05:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21871 invoked by uid 99); 5 Apr 2006 05:29:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:29:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:29:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9EDF85B76C; Tue,  4 Apr 2006 22:28:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9A1787F403
	for <java-user@lucene.apache.org>; Tue,  4 Apr 2006 22:28:57 -0700 (PDT)
Date: Tue, 4 Apr 2006 22:28:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom hit score
In-Reply-To: <3741693.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0604042220350.9728@hal.rescomp.berkeley.edu>
References: <3741693.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I want to have a simple hit score for every document where the query has been
: found. E.g. if the query word was found 3 times in a document, this doc
: should have 100% score, next document with 2 times should have 90% and so

you haven't defined the scoring mechanism you want to use very clearly,
especially in cases of multi clause queries, but you should start by
writing your own Similarity subclass that returns a constant value for
everything but the tf(float) function -- for that return the same value as
the input.

that should be a pretty good start towards the simplest scoring mechanism
possible for ranking documents by the number of times words match ...
beyond that you'll wnat to read more in depth about similarity and study
the the Explanation output from some sample queries to make sense of
what's goming on.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 05:47:33 2006
Return-Path: <java-user-return-19961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90050 invoked from network); 5 Apr 2006 05:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 05:47:32 -0000
Received: (qmail 39329 invoked by uid 500); 5 Apr 2006 05:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39310 invoked by uid 500); 5 Apr 2006 05:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39299 invoked by uid 99); 5 Apr 2006 05:47:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:47:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of artvas@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nproxy.gmail.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Apr 2006 22:47:26 -0700
Received: by nproxy.gmail.com with SMTP id c29so1323920nfb
        for <java-user@lucene.apache.org>; Tue, 04 Apr 2006 22:47:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=fgtsquUILfwdhKutY8aVT3LxLDDqNUrrrbXqEQcaUODeYfhhTHRVNQxe6k7rvkwzfwuBclZFfbdAHxOly+pEI3+0/na4ZHSvINbsj1DO17qsR6Y+zG1wWPiT5BICQ77Spta98eR8XNOVb93rxC98MrSnsjoZZ4lkwcVdcU3EiKk=
Received: by 10.48.225.9 with SMTP id x9mr1146135nfg;
        Tue, 04 Apr 2006 22:47:05 -0700 (PDT)
Received: from ppp232-236.pptp.mtu-net.ru ( [81.195.232.236])
        by mx.gmail.com with ESMTP id n23sm633791nfc.2006.04.04.22.47.04;
        Tue, 04 Apr 2006 22:47:05 -0700 (PDT)
Date: Wed, 5 Apr 2006 09:46:12 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <363893233.20060405094612@gmail.com>
To: "Yonik Seeley" <yseeley@gmail.com>, java-user@lucene.apache.org, Chris Hostetter <hossman_lucene@fucit.org>
Subject: Re[4]: OutOfMemory with search(Query, Sort)
In-Reply-To: <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
References: <756391613.20060401024129@gmail.com>
 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
 <18784005.20060401141302@gmail.com>
 <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>I tried to
>> sort by filePath field which can be 100 bytes at average meaning 400M
>> RAM for the cache

YS> For string sorting, a FieldCache.StringIndex is used.
YS> It contains a sorted String[num_unique_terms_in_field], and an int[maxDoc]
YS> So if 10 documents share a large string field value, that value will
YS> only be in the fieldCache once.

YS> If you are just using an IndexSearcher (no multisearchers), then the
YS> String[] isn't strictly needed... only the ordering (the int[]) is
YS> needed from the StringIndex.  One option is to create your own
YS> FieldCache that doesn't create/store that String[].

The int[] array here contains references to String[] and to populate
it still all the field values need to be loaded and compared/sorted
which is what I want to avoid. I guess my option is not to use
FieldCache at all.

-- 
Best regards,
 Artem

http://sharehound.sourceforge.net sharehound, the open source filesystems indexer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 08:21:52 2006
Return-Path: <java-user-return-19962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70197 invoked from network); 5 Apr 2006 08:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 08:21:52 -0000
Received: (qmail 20488 invoked by uid 500); 5 Apr 2006 08:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20464 invoked by uid 500); 5 Apr 2006 08:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20453 invoked by uid 99); 5 Apr 2006 08:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 01:21:45 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Apr 2006 01:21:44 -0700
Received: (qmail 12319 invoked by uid 60001); 5 Apr 2006 08:21:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NQhMRLdpAKYgXlfxVOuNp4Qu1wlVC8NY8zOe/Sx943mxjx2LlRgSfS8rEnPzmDhx6VF4LXfk1DYOYRd+TE6T5ySQX2UdVb8aV1ZAW47FGNeN+c2wQle8tXKLzFXy/RPHDtlKwRAzhrArsukiqUDmD0O6JH1S+2jbT3LHW7lOXjs=  ;
Message-ID: <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Wed, 05 Apr 2006 09:21:17 BST
Date: Wed, 5 Apr 2006 09:21:17 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: highlighting - fuzzy search
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0604042207290.9728@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Isn't that what Query.extractTerms is for?  Isn't it 
>implimented by all primitive Queries?..

As of last week, yes. I changed the SpanQueries to
implement this method and then refactored the
Highlighter package's QueryTermExtractor to make use
of this (it radically simplified the code in there).
This change to rely on extractTerms also means that
the highlighter now works properly with classes like
FilteredQuery.


Cheers,
Mark


		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 08:31:02 2006
Return-Path: <java-user-return-19963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76443 invoked from network); 5 Apr 2006 08:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 08:30:58 -0000
Received: (qmail 34971 invoked by uid 500); 5 Apr 2006 08:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34941 invoked by uid 500); 5 Apr 2006 08:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34925 invoked by uid 99); 5 Apr 2006 08:30:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 01:30:41 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Apr 2006 01:30:39 -0700
Received: (qmail 75226 invoked from network); 5 Apr 2006 08:30:18 -0000
Received: from unknown (HELO ?192.168.0.6?) (brungri@80.11.87.62 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 5 Apr 2006 08:30:17 -0000
Message-ID: <44337FDD.6090604@wanadoo.fr>
Date: Wed, 05 Apr 2006 10:29:17 +0200
From: Bruno Grilheres <bgrilheres@wanadoo.fr>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene or Nutch ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

  Hi All,

I have to develop a protoype of a search/indexation system with the 
following characteristics,
1) High volume of data indexation but only with add and delete 
functionality (approximatively 10 PDF) => scalable architecture HDFS 
seems good.
2) Specific analysis chain and a given set of meta-data indexation.
3) Language Recognition
4) No graphical interface for searching is needed, no crawling is 
needed, Indexation and Search are performed with HTTP Request to a Servlet

What is the best starting choice for this : Lucene or Nutch ?

As far as I know Lucene is a good choice for 2 and 4, Nutch is a better 
choice for 1 and 3.

Is Nutch as configurable as Lucene regarding the indexation and search 
process and is it possible to write plug-in for specific analysis  ?

Bruno

	

	
		
___________________________________________________________________________ 
Nouveau : tlphonez moins cher avec Yahoo! Messenger ! Dcouvez les tarifs exceptionnels pour appeler la France et l'international.
Tlchargez sur http://fr.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 10:46:45 2006
Return-Path: <java-user-return-19964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50910 invoked from network); 5 Apr 2006 10:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 10:46:26 -0000
Received: (qmail 33604 invoked by uid 500); 5 Apr 2006 10:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33344 invoked by uid 500); 5 Apr 2006 10:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33333 invoked by uid 99); 5 Apr 2006 10:46:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 03:46:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 03:46:11 -0700
Received: (qmail 29807 invoked from network); 5 Apr 2006 10:45:47 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]918100@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 5 Apr 2006 10:45:47 -0000
Message-ID: <44339FD9.3020201@artnology.com>
Date: Wed, 05 Apr 2006 12:45:45 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: FS lock on NFS mounted filesystem for indexing
References: <44337FDD.6090604@wanadoo.fr>
In-Reply-To: <44337FDD.6090604@wanadoo.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I got a strange problem during the indexer process running on Redhat ES4 
Linux machine ..
java.io.FileNotFoundException: /u01/export/index/books/_2s.fnm (No such 
file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at 
org.apache.lucene.store.FSIndexInput$Descriptor.<init>(FSDirectory.java:425)
        at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:434)
        at 
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:324)
        at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:56)
        at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:144)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
        at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:674)
        at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:658)
        at 
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:646)
        at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:453)
        at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)

After looking through the mailinglist probaly I am thinking that when 
the indexer runs on NFS mounted filesystem then its a problem of 
filesystem locking because I run the indexer and parallaly I also search 
on the index.

I am using Lucene 1.9.1 version with JDK1.5 VM on Redhat ES4 64 bit 
Linux Dual Core Opteron processor. Any information will be very greatful.

Thanks,
supriya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 10:48:57 2006
Return-Path: <java-user-return-19965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51866 invoked from network); 5 Apr 2006 10:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 10:48:56 -0000
Received: (qmail 35539 invoked by uid 500); 5 Apr 2006 10:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35512 invoked by uid 500); 5 Apr 2006 10:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35501 invoked by uid 99); 5 Apr 2006 10:48:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 03:48:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 03:48:49 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k35AmOR8017268
 for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 16:18:24 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: FS lock on NFS mounted filesystem for indexing
Date: Wed, 5 Apr 2006 16:18:23 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D724@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FS lock on NFS mounted filesystem for indexing
Thread-Index: AcZYnkQxAOalKLOdQ1qs8KJwdrIJCgAABE1w
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to make sure that both the indexing and searching process use
the same lock directory.=20

-----Original Message-----
From: Supriya Kumar Shyamal [mailto:supriya.shyamal@artnology.com]=20
Sent: Wednesday, April 05, 2006 4:16 PM
To: java-user@lucene.apache.org
Subject: FS lock on NFS mounted filesystem for indexing


Hi All,

I got a strange problem during the indexer process running on Redhat ES4

Linux machine ..
java.io.FileNotFoundException: /u01/export/index/books/_2s.fnm (No such=20
file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at=20
org.apache.lucene.store.FSIndexInput$Descriptor.<init>(FSDirectory.java:
425)
        at
org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:434)
        at=20
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:324)
        at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:56)
        at=20
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:144)
        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
        at
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
        at=20
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:674)
        at=20
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:658)
        at=20
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:
646)
        at=20
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:453)
        at=20
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)

After looking through the mailinglist probaly I am thinking that when=20
the indexer runs on NFS mounted filesystem then its a problem of=20
filesystem locking because I run the indexer and parallaly I also search

on the index.

I am using Lucene 1.9.1 version with JDK1.5 VM on Redhat ES4 64 bit=20
Linux Dual Core Opteron processor. Any information will be very
greatful.

Thanks,
supriya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 11:03:12 2006
Return-Path: <java-user-return-19966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58229 invoked from network); 5 Apr 2006 11:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 11:03:06 -0000
Received: (qmail 51216 invoked by uid 500); 5 Apr 2006 11:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51191 invoked by uid 500); 5 Apr 2006 11:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51180 invoked by uid 99); 5 Apr 2006 11:03:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 04:03:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.30] (HELO mailrelay.is.nl) (213.133.33.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 04:03:00 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by mailrelay.is.nl (CommuniGate Pro SMTP 4.3.5)
  with ESMTP id 14514673 for java-user@lucene.apache.org; Wed, 05 Apr 2006 13:02:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Optimize completely in memory with a FSDirectory?
Date: Wed, 5 Apr 2006 13:02:38 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A908@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Optimize completely in memory with a FSDirectory?
Thread-Index: AcZYoHOlCzMo5p7VQZ+Lr4aYAnMoGg==
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: "Lucene User \(E-mail\)" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have a question about memory/fileio settings and the FSDirectory.
The setMaxBufferedDocs and related parameters help a lot already to =
fully exploit my RAM when indexing, but since I'm running a fairly small =
index of around 40000 docs and I'm optimizing it relatively often, I was =
wondering if there is any way to enforce complete in-memory =
optimization.
The stupid thing is that even with a maxBufferedDocs of 50000, it still =
writes lots of tiny files to disk (together almost 2-3 times the size of =
the index), and the disk io skyrockets for a few seconds. I have enough =
memory to hold the index many times over, so it really shouldn't be a =
problem there, and it would be so much faster (I have to think).

Any hints?

Best regards,

Max Pfingsthorn

Hippo =20

Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
m.pfingsthorn@hippo.nl / www.hippo.nl
-------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 11:53:03 2006
Return-Path: <java-user-return-19967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84803 invoked from network); 5 Apr 2006 11:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 11:53:01 -0000
Received: (qmail 28899 invoked by uid 500); 5 Apr 2006 11:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28873 invoked by uid 500); 5 Apr 2006 11:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28862 invoked by uid 99); 5 Apr 2006 11:52:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 04:52:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 04:52:54 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k35BqTR8003812
 for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 17:22:29 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: Which Analyzer to use when searching on Keyword fields
Date: Wed, 5 Apr 2006 17:22:29 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D725@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Which Analyzer to use when searching on Keyword fields
Thread-Index: AcZYp2o/Z0o3XsJPRI6GYwIZsNNuCQ==
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am using lucene 1.4.3. Some of my fields are indexed as Keywords. I
also have subclassed Analyzer inorder to put stemming etc. I am not sure
if the input is tokenized when I am searching on keyword fields; I don't
want it to be. Do I need to have a special case in the overridden method
(Analyzer.tokenStream() ) to handle keyword fields?=20

I've noticed that there's a KeywordTokenizer now in the API, but its not
there for lucene 1.4.3. If I was using 1.9, I could probably determine
if the field was a keyword one and then return a
KeywordTokenizer(Reader), but I am using 1.4.3.

Any advice is appreciated.
-Venu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 12:33:55 2006
Return-Path: <java-user-return-19968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17878 invoked from network); 5 Apr 2006 12:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 12:33:55 -0000
Received: (qmail 18133 invoked by uid 500); 5 Apr 2006 12:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17749 invoked by uid 500); 5 Apr 2006 12:33:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17738 invoked by uid 99); 5 Apr 2006 12:33:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 05:33:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 05:33:48 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E3C2433D302; Wed,  5 Apr 2006 08:33:27 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 032C133CF31
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 08:32:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <E817F096B8D59B4E9D1E437917B1083103D725@mshydpub1.hyd.deshaw.com>
References: <E817F096B8D59B4E9D1E437917B1083103D725@mshydpub1.hyd.deshaw.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B6F224D5-41D2-471B-97F3-2A93F266E0DC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Which Analyzer to use when searching on Keyword fields
Date: Wed, 5 Apr 2006 08:32:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Venu,

I presume you're asking about what Analyzer to use with QueryParser.   
QueryParser analyzes all term text, but you can fake it for Keyword  
(non-tokenized) fields by using PerFieldAnalyzerWrapper, specifying  
the KeywordAnalyzer for the fields you indexed as such.

The KeywordAnalyzer code will work with 1.4.3, so just grab that  
class and put it into your project.  A couple of variations of it are  
also included with the Lucene in Action code.

	Erik


On Apr 5, 2006, at 7:52 AM, Satuluri, Venu_Madhav wrote:

> Hi,
>
> I am using lucene 1.4.3. Some of my fields are indexed as Keywords. I
> also have subclassed Analyzer inorder to put stemming etc. I am not  
> sure
> if the input is tokenized when I am searching on keyword fields; I  
> don't
> want it to be. Do I need to have a special case in the overridden  
> method
> (Analyzer.tokenStream() ) to handle keyword fields?
>
> I've noticed that there's a KeywordTokenizer now in the API, but  
> its not
> there for lucene 1.4.3. If I was using 1.9, I could probably determine
> if the field was a keyword one and then return a
> KeywordTokenizer(Reader), but I am using 1.4.3.
>
> Any advice is appreciated.
> -Venu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 13:07:40 2006
Return-Path: <java-user-return-19969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36354 invoked from network); 5 Apr 2006 13:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 13:07:18 -0000
Received: (qmail 71617 invoked by uid 500); 5 Apr 2006 13:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71579 invoked by uid 500); 5 Apr 2006 13:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71568 invoked by uid 99); 5 Apr 2006 13:06:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:06:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:06:06 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k35D5gR8023079
 for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 18:35:42 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Which Analyzer to use when searching on Keyword fields
Date: Wed, 5 Apr 2006 18:35:38 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D726@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Which Analyzer to use when searching on Keyword fields
Thread-Index: AcZYrcrqw2kBp1PZRQSx7AcovrdZXgAA8Mqw
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You understood me right, Erik. Your solution is working well, thanks.

Venu

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Wednesday, April 05, 2006 6:03 PM
To: java-user@lucene.apache.org
Subject: Re: Which Analyzer to use when searching on Keyword fields


Venu,

I presume you're asking about what Analyzer to use with QueryParser.  =20
QueryParser analyzes all term text, but you can fake it for Keyword =20
(non-tokenized) fields by using PerFieldAnalyzerWrapper, specifying =20
the KeywordAnalyzer for the fields you indexed as such.

The KeywordAnalyzer code will work with 1.4.3, so just grab that =20
class and put it into your project.  A couple of variations of it are =20
also included with the Lucene in Action code.

	Erik


On Apr 5, 2006, at 7:52 AM, Satuluri, Venu_Madhav wrote:

> Hi,
>
> I am using lucene 1.4.3. Some of my fields are indexed as Keywords. I
> also have subclassed Analyzer inorder to put stemming etc. I am not =20
> sure
> if the input is tokenized when I am searching on keyword fields; I =20
> don't
> want it to be. Do I need to have a special case in the overridden =20
> method
> (Analyzer.tokenStream() ) to handle keyword fields?
>
> I've noticed that there's a KeywordTokenizer now in the API, but =20
> its not
> there for lucene 1.4.3. If I was using 1.9, I could probably determine
> if the field was a keyword one and then return a
> KeywordTokenizer(Reader), but I am using 1.4.3.
>
> Any advice is appreciated.
> -Venu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 13:24:59 2006
Return-Path: <java-user-return-19970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48620 invoked from network); 5 Apr 2006 13:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 13:24:44 -0000
Received: (qmail 32106 invoked by uid 500); 5 Apr 2006 13:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32064 invoked by uid 500); 5 Apr 2006 13:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32052 invoked by uid 99); 5 Apr 2006 13:23:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:23:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of deliprao@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO zproxy.gmail.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:23:43 -0700
Received: by zproxy.gmail.com with SMTP id 16so580088nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 06:23:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=rltOOKqiHMFGDju914xS1AOhoEib6+lvKh5AbLXb/ZVa39/oOAAHG+t2qDFysz7FcQV+jbfc6SRwTHsKnPsFudUvJJMaCpOfVi95mSi7E080ZS2Nmb0ixVoTvfEp/eY9Y11h9pUixw6b1S/ZYafoYl9MdHfwL9dIZK0guGWUzYM=
Received: by 10.35.14.1 with SMTP id r1mr457719pyi;
        Wed, 05 Apr 2006 06:23:22 -0700 (PDT)
Received: by 10.35.15.11 with HTTP; Wed, 5 Apr 2006 06:23:21 -0700 (PDT)
Message-ID: <da9a0cdf0604050623p6df712beqf9c501572275db15@mail.gmail.com>
Date: Wed, 5 Apr 2006 18:53:21 +0530
From: "Delip Rao" <deliprao@gmail.com>
To: java-user@lucene.apache.org
Subject: searching offline
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a large collection of text documents that I want to search
using lucene. Is there any command line utility that will allow me to
search this static collection of documents?

Writing one is an option but I want to know if anyone has already done this=
.

Thanks in advance,
Delip

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 13:38:41 2006
Return-Path: <java-user-return-19971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51977 invoked from network); 5 Apr 2006 13:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 13:32:49 -0000
Received: (qmail 49010 invoked by uid 500); 5 Apr 2006 13:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48969 invoked by uid 500); 5 Apr 2006 13:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48957 invoked by uid 99); 5 Apr 2006 13:32:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:32:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:32:40 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k35DWFR8000770
 for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 19:02:16 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: searching offline
Date: Wed, 5 Apr 2006 19:02:15 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083103D729@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: searching offline
Thread-Index: AcZYtJeNSbvB+Q/tR0eYrzevknGhrwAALiAA
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Red Piranha: http://red-piranha.sourceforge.net/

-----Original Message-----
From: Delip Rao [mailto:deliprao@gmail.com]=20
Sent: Wednesday, April 05, 2006 6:53 PM
To: java-user@lucene.apache.org
Subject: searching offline


Hi,

I have a large collection of text documents that I want to search
using lucene. Is there any command line utility that will allow me to
search this static collection of documents?

Writing one is an option but I want to know if anyone has already done
this.

Thanks in advance,
Delip

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 13:55:14 2006
Return-Path: <java-user-return-19972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59337 invoked from network); 5 Apr 2006 13:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 13:49:37 -0000
Received: (qmail 89551 invoked by uid 500); 5 Apr 2006 13:49:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89526 invoked by uid 500); 5 Apr 2006 13:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89511 invoked by uid 99); 5 Apr 2006 13:49:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:49:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.49] (HELO mtaout03-winn.ispmail.ntl.com) (81.103.221.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 06:49:02 -0700
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20060405134838.XCUJ27969.mtaout03-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 14:48:38 +0100
Received: from jhi ([81.98.13.34]) by aamtaout01-winn.ispmail.ntl.com
          with SMTP
          id <20060405134838.CEUY19763.aamtaout01-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 14:48:38 +0100
Message-ID: <002a01c658b7$a6e96190$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <da9a0cdf0604050623p6df712beqf9c501572275db15@mail.gmail.com>
Subject: Re: searching offline
Date: Wed, 5 Apr 2006 14:48:40 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://regain.sourceforge.net/ ?

----- Original Message ----- 
From: "Delip Rao" <deliprao@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, April 05, 2006 2:23 PM
Subject: searching offline


Hi,

I have a large collection of text documents that I want to search
using lucene. Is there any command line utility that will allow me to
search this static collection of documents?

Writing one is an option but I want to know if anyone has already done this.

Thanks in advance,
Delip

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 14:28:41 2006
Return-Path: <java-user-return-19973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95933 invoked from network); 5 Apr 2006 14:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 14:28:40 -0000
Received: (qmail 85295 invoked by uid 500); 5 Apr 2006 14:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85252 invoked by uid 500); 5 Apr 2006 14:28:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85233 invoked by uid 99); 5 Apr 2006 14:28:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:28:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:28:32 -0700
Received: by zproxy.gmail.com with SMTP id 16so602851nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 07:28:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nEyEsbXn2TozMCJAYDInND92jDZERv2DFgqSXSHvsxlcmcPr0hsE8nZY8rnG0OuwS8zzx7lDiLg13cKAzQRUAm+uQt8hUntfusTkNsYP1lVryg3gXrkdKYDnqd/H8lUXLmXMYxK45FXVCSlA9xFjuvYdKtQh88qQWHe6i6x62Ug=
Received: by 10.35.101.9 with SMTP id d9mr526520pym;
        Wed, 05 Apr 2006 07:28:11 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 07:28:11 -0700 (PDT)
Message-ID: <c68e39170604050728v5c78b3buccdce6fc51e93f6e@mail.gmail.com>
Date: Wed, 5 Apr 2006 10:28:11 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: "Artem Vasiliev" <artvas@gmail.com>
Subject: Re: Re[4]: OutOfMemory with search(Query, Sort)
Cc: java-user@lucene.apache.org, "Chris Hostetter" <hossman_lucene@fucit.org>
In-Reply-To: <363893233.20060405094612@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <756391613.20060401024129@gmail.com>
	 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
	 <18784005.20060401141302@gmail.com>
	 <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
	 <363893233.20060405094612@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Artem Vasiliev <artvas@gmail.com> wrote:
> The int[] array here contains references to String[] and to populate
> it still all the field values need to be loaded and compared/sorted

Terms are stored and iterated in sorted order, so no sorting needs to be do=
ne.
It's still the case that all the terms for that field need to be
iterated over though.

Another approach might be to store term vectors and retrieve the term
only from documents matching a particular query.  It might be slower
per query, but wouldn't have the overhead of populating the int[]

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 14:38:19 2006
Return-Path: <java-user-return-19974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3161 invoked from network); 5 Apr 2006 14:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 14:38:16 -0000
Received: (qmail 5453 invoked by uid 500); 5 Apr 2006 14:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5434 invoked by uid 500); 5 Apr 2006 14:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5423 invoked by uid 99); 5 Apr 2006 14:38:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:38:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.153.135.34] (HELO mail.pharmaline.de) (62.153.135.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:38:10 -0700
Received: from [192.168.2.121] (62.153.135.40) by mail.pharmaline.de with
 ESMTP (Eudora Internet Mail Server 3.2.7) for 
 <java-user@lucene.apache.org>;
 Wed, 5 Apr 2006 16:37:48 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
To: java-user@lucene.apache.org
Message-Id: <18835164-C0E5-4C78-93AA-52EC63C8F435@pharmaline.de>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-7-584427399; protocol="application/pkcs7-signature"
From: Guido Neitzer <guido.neitzer@pharmaline.de>
Subject: WRITE_LOCK_TIMEOUT
Date: Wed, 5 Apr 2006 16:37:47 +0200
X-Mailer: Apple Mail (2.746.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-7-584427399
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi.

Is it correct that in Release 1.9.1 a WRITE_LOCK_TIMEOUT is hardcoded  
and there is no way to set it from outside?

I've seen a check-in in the CVS from a few days ago which added  
getters/setters for this, but ... there is no release containing  
this, right?

So, my question is: Is it save to use a nightly build for production  
use?

Thanks,
cug



--Apple-Mail-7-584427399
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGNzCCAvAw
ggJZoAMCAQICEB7tpxCHG7VYey3bP/Ou4e8wDQYJKoZIhvcNAQEEBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA2MDIxMTE3NDM1NFoXDTA3MDIxMTE3NDM1
NFowTTEfMB0GA1UEAxMWVGhhd3RlIEZyZWVtYWlsIE1lbWJlcjEqMCgGCSqGSIb3DQEJARYbZ3Vp
ZG8ubmVpdHplckBwaGFybWFsaW5lLmRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
yLhNUnNv30/r+pFUHocoIWGm8AAwFbwAWqFRhEwZzxLPCMSZme3G7W/5hyK+SxeQoOK8PPCsNyvy
sLBqUVHB3nm5w/NzZKk1gfc2QlzjPtv2C7bUnigDJs+X0YlgdxTxs68RdHBn/rbjjaxl+SkiEcsz
kZhKsAnS6zhlWSX7zDCIRR5VD08M0/fYSTwEcX1j8lWb/3McY7bCcHbLd+762QQAn03A4cPco4OK
3KAMld0n6qFFMG23IKx7qDTonYtCzsDVspQ1Fk14yJYVdf62RLWGBJPF+RMXB9juFhgdUrHZY3mo
wamFF3qZ8HD9wb+G7lhL8F+d5khDuLBYFXCqdQIDAQABozgwNjAmBgNVHREEHzAdgRtndWlkby5u
ZWl0emVyQHBoYXJtYWxpbmUuZGUwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQCFnjZk
bGIY3sGlsEIn98cV+tX9xNTThIwN6jhu7mGuxzvX+hN86kdlhEgaPmaatH8KfXXyfnhpTK3KOk8O
zDsxJqQDVe1HEW8M/4MkORMlydbcxSRPL967pgMRNjAMafL/IlssFJ3kF7q/2AjRd4VhnyoA3Yl/
sXF3WLOTJB5OzjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpB
MRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhh
d3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24x
JDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVy
c29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTla
MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSww
KgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0B
AQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B
1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk
16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/
AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25h
bEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJp
dmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOW
lJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amc
OY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8xggMQMIIDDAIB
ATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQu
MSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQHu2nEIcbtVh7
Lds/867h7zAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3
DQEJBTEPFw0wNjA0MDUxNDM3NDhaMCMGCSqGSIb3DQEJBDEWBBR6+2rEQSQP/jI7dQ5IRQC7MtCU
OzCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1
bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3Vp
bmcgQ0ECEB7tpxCHG7VYey3bP/Ou4e8wgYcGCyqGSIb3DQEJEAILMXigdjBiMQswCQYDVQQGEwJa
QTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3Rl
IFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEB7tpxCHG7VYey3bP/Ou4e8wDQYJKoZIhvcN
AQEBBQAEggEADpxSTVMfhX3jS4vtzzmtXQ9QmJp4rN75zeuODhViUZl3SiWE79wIVrEnilMJS/AQ
xpY5T2DzApZ4f5ymNtTMms5RoxOsvXrFPOWefvPu7NSLxkOJGjYczFD+UMRe96a3y9j3MmJGZ2xl
RfPd1M6yPTAtPil/Y8zROHRo/ctSJSbkpIaOzPaWPHEIeihdeHju1r5FRfvUb5MMdxsec785AorL
/PzIByjqZbonkkagLI35OP2reSNsN+QksjhdVj0KmNNcfrgZR1GlVqH77AfntiU0lTs/m7Hrr3is
eaKhYPfNYAFRNNGZ4HFQ8dyyjcxnm7sDwg2vhkVbbbUAETsfDwAAAAAAAA==

--Apple-Mail-7-584427399--

From java-user-return-19975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 14:45:34 2006
Return-Path: <java-user-return-19975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7774 invoked from network); 5 Apr 2006 14:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 14:45:33 -0000
Received: (qmail 32783 invoked by uid 500); 5 Apr 2006 14:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32725 invoked by uid 500); 5 Apr 2006 14:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32704 invoked by uid 99); 5 Apr 2006 14:45:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:45:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 07:45:20 -0700
Received: by zproxy.gmail.com with SMTP id 16so609302nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 07:44:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=n7cArDO8fEkejMVlfTolpDMIYhXa4gaPwFEJlWXGJH0nB/PRfBpLR1UUCxcMwpn+MxpUQZ1IOg7H7JjLWs8h530np6U2iLD5BSoMKRpUUkM2Lh9Fsv1iFzCHrJxytPQyzWhbboWGZn1InRo8jzg5kOPLftLAruiBXknu3ub58Ss=
Received: by 10.35.113.12 with SMTP id q12mr332869pym;
        Wed, 05 Apr 2006 07:44:59 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 07:44:59 -0700 (PDT)
Message-ID: <c68e39170604050744u29f51c2av8647da460328084@mail.gmail.com>
Date: Wed, 5 Apr 2006 10:44:59 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene or Nutch ?
In-Reply-To: <44337FDD.6090604@wanadoo.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <44337FDD.6090604@wanadoo.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Bruno Grilheres <bgrilheres@wanadoo.fr> wrote:
> 1) High volume of data indexation but only with add and delete
> functionality (approximatively 10 PDF) =3D> scalable architecture HDFS
> seems good.
> 2) Specific analysis chain and a given set of meta-data indexation.
> 3) Language Recognition
> 4) No graphical interface for searching is needed, no crawling is
> needed, Indexation and Search are performed with HTTP Request to a Servle=
t
>
> What is the best starting choice for this : Lucene or Nutch ?
>
> As far as I know Lucene is a good choice for 2 and 4, Nutch is a better
> choice for 1 and 3.

Solr would also be good for 2 and 4
As far as 1, what type of scalability requirements are we talking? (#
documents, size of docs, etc)

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 15:17:12 2006
Return-Path: <java-user-return-19976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24764 invoked from network); 5 Apr 2006 15:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 15:16:03 -0000
Received: (qmail 25686 invoked by uid 500); 5 Apr 2006 15:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25645 invoked by uid 500); 5 Apr 2006 15:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25608 invoked by uid 99); 5 Apr 2006 15:15:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:15:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Apr 2006 08:15:40 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <147879(2)>; Wed, 5 Apr 2006 08:15:13 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58633>; Wed, 5 Apr 2006 08:15:05 PDT
To: java-user@lucene.apache.org
Subject: Re: WRITE_LOCK_TIMEOUT 
In-Reply-To: Your message of "Wed, 05 Apr 2006 07:37:47 PDT."
             <18835164-C0E5-4C78-93AA-52EC63C8F435@pharmaline.de> 
Date: Wed, 5 Apr 2006 08:15:00 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <06Apr5.081505pdt."58633"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Hi.
> 
> Is it correct that in Release 1.9.1 a WRITE_LOCK_TIMEOUT is hardcoded  
> and there is no way to set it from outside?
> 
> I've seen a check-in in the CVS from a few days ago which added  
> getters/setters for this, but ... there is no release containing  
> this, right?
> 
> So, my question is: Is it save to use a nightly build for production  
> use?
> 
> Thanks,
> cug

Or, as I suggested a couple of days ago, a 1.9.2 release could be offered.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 15:24:12 2006
Return-Path: <java-user-return-19977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30382 invoked from network); 5 Apr 2006 15:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 15:24:07 -0000
Received: (qmail 64782 invoked by uid 500); 5 Apr 2006 15:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64759 invoked by uid 500); 5 Apr 2006 15:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64748 invoked by uid 99); 5 Apr 2006 15:24:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:24:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.153.135.34] (HELO mail.pharmaline.de) (62.153.135.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:24:00 -0700
Received: from [192.168.2.121] (62.153.135.40) by mail.pharmaline.de with
 ESMTP (Eudora Internet Mail Server 3.2.7) for 
 <java-user@lucene.apache.org>;
 Wed, 5 Apr 2006 17:23:38 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <06Apr5.081505pdt."58633"@synergy1.parc.xerox.com>
References: <06Apr5.081505pdt."58633"@synergy1.parc.xerox.com>
Content-Type: multipart/signed; micalg=sha1; boundary=Apple-Mail-8-587177514; protocol="application/pkcs7-signature"
Message-Id: <708C7ABB-57C0-48A4-B08F-9BC2F2C2B237@pharmaline.de>
From: Guido Neitzer <guido.neitzer@pharmaline.de>
Subject: Re: WRITE_LOCK_TIMEOUT 
Date: Wed, 5 Apr 2006 17:23:37 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-8-587177514
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

On 05.04.2006, at 17:15 Uhr, Bill Janssen wrote:

> Or, as I suggested a couple of days ago, a 1.9.2 release could be  
> offered.

Would be a good idea, because the current nightly builds have a lot  
of deprecated methods removed which where available in 1.9.1.

Lot of work just for this ... :-(

cug



--Apple-Mail-8-587177514
Content-Transfer-Encoding: base64
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Disposition: attachment;
	filename=smime.p7s

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGNzCCAvAw
ggJZoAMCAQICEB7tpxCHG7VYey3bP/Ou4e8wDQYJKoZIhvcNAQEEBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA2MDIxMTE3NDM1NFoXDTA3MDIxMTE3NDM1
NFowTTEfMB0GA1UEAxMWVGhhd3RlIEZyZWVtYWlsIE1lbWJlcjEqMCgGCSqGSIb3DQEJARYbZ3Vp
ZG8ubmVpdHplckBwaGFybWFsaW5lLmRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
yLhNUnNv30/r+pFUHocoIWGm8AAwFbwAWqFRhEwZzxLPCMSZme3G7W/5hyK+SxeQoOK8PPCsNyvy
sLBqUVHB3nm5w/NzZKk1gfc2QlzjPtv2C7bUnigDJs+X0YlgdxTxs68RdHBn/rbjjaxl+SkiEcsz
kZhKsAnS6zhlWSX7zDCIRR5VD08M0/fYSTwEcX1j8lWb/3McY7bCcHbLd+762QQAn03A4cPco4OK
3KAMld0n6qFFMG23IKx7qDTonYtCzsDVspQ1Fk14yJYVdf62RLWGBJPF+RMXB9juFhgdUrHZY3mo
wamFF3qZ8HD9wb+G7lhL8F+d5khDuLBYFXCqdQIDAQABozgwNjAmBgNVHREEHzAdgRtndWlkby5u
ZWl0emVyQHBoYXJtYWxpbmUuZGUwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQQFAAOBgQCFnjZk
bGIY3sGlsEIn98cV+tX9xNTThIwN6jhu7mGuxzvX+hN86kdlhEgaPmaatH8KfXXyfnhpTK3KOk8O
zDsxJqQDVe1HEW8M/4MkORMlydbcxSRPL967pgMRNjAMafL/IlssFJ3kF7q/2AjRd4VhnyoA3Yl/
sXF3WLOTJB5OzjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJBgNVBAYTAlpB
MRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgGA1UEChMRVGhh
d3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMgRGl2aXNpb24x
JDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3DQEJARYccGVy
c29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3MTYyMzU5NTla
MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQuMSww
KgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzANBgkqhkiG9w0B
AQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9fww6YfK/Uc4B
1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+uxg+B79AgAJk
16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMBAf8ECDAGAQH/
AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3dGVQZXJzb25h
bEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgGA1UEAxMRUHJp
dmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcPf6+svsIXoUOW
lJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH2ydxVyWN3amc
OY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8xggMQMIIDDAIB
ATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5KSBMdGQu
MSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQHu2nEIcbtVh7
Lds/867h7zAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3
DQEJBTEPFw0wNjA0MDUxNTIzMzhaMCMGCSqGSIb3DQEJBDEWBBQ+DYeukoPbNCs3cJRrmS4cxlXv
kTCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1
bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3Vp
bmcgQ0ECEB7tpxCHG7VYey3bP/Ou4e8wgYcGCyqGSIb3DQEJEAILMXigdjBiMQswCQYDVQQGEwJa
QTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3Rl
IFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEB7tpxCHG7VYey3bP/Ou4e8wDQYJKoZIhvcN
AQEBBQAEggEAwTSrzKesDTg8XqfMhCxtG7OcPFJHHeetTb4o/uptoPHNcqWaCfPqXLmekWj4R3J9
fFk/cfbknIesuk1G9Xc1F3s+deGez+YrKD6cjbIpXHtQ4LBpIq6sUS+CfM8U+OyhVT+pKqbHToEG
dWRxFJ4qmxyZ6J7UTUeArgCZgYLWVsqBQJwrTXVATBoyHPZ7iqSxXsPHOD361vi00AZDvXsSJ2rg
ptBdOHo9lIF17E5Vb3G05ZDvXlB4fSUGMA/5au+moZzg6Yk4Q4gx5SKjYDTUEYANmLxhMQFxppki
9ULlJr1JQHwO7fyIpwEvhYIiQnlpJ1m3MGYY3lyrHcIRZXb3FwAAAAAAAA==

--Apple-Mail-8-587177514--

From java-user-return-19978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 15:24:42 2006
Return-Path: <java-user-return-19978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30726 invoked from network); 5 Apr 2006 15:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 15:24:40 -0000
Received: (qmail 66411 invoked by uid 500); 5 Apr 2006 15:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66388 invoked by uid 500); 5 Apr 2006 15:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66377 invoked by uid 99); 5 Apr 2006 15:24:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:24:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:24:31 -0700
Received: by zproxy.gmail.com with SMTP id 16so623669nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 08:24:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=jUwwcdGLRrsEkJVHwE05JrEHuY+XSrwzXuZtUvKe60I6zV4bD4zX+gOYMi40mOKpaU2Euul9C91my3xgCNsW2FMyh2NCgvDKw2icmkenEoASY0DAvjOU5aTMMfpSLDoAae9kosKLtRXVYWBCqj7iXABXCxGjAPHJfjpehFfMbNU=
Received: by 10.35.96.11 with SMTP id y11mr263785pyl;
        Wed, 05 Apr 2006 08:24:10 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id i64sm29367pye.2006.04.05.08.24.10;
        Wed, 05 Apr 2006 08:24:10 -0700 (PDT)
Message-ID: <4433E119.4080101@gmail.com>
Date: Wed, 05 Apr 2006 10:24:09 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene Document order not being maintained?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm using Lucene 1.9.1, and I'm seeing some odd behavior that I hope 
someone can help me with.

My application counts on Lucene maintaining the order of the documents 
exactly the same as how I insert them.  Lucene is supposed to maintain 
document order, even across index merges, correct?

My indexing process works as follows (and some of this is hold-over from 
the time before lucene had a compound file format - so bear with me)

I open up a File based index - using a merge factor of 90, and in my 
current test, the compound index format.  When I have added 100,000 
documents, I close this index, and start on a new index.  I continue 
this until I'm done with all of the documents.  Then, as a last step, I 
open up a new empty index, and I call addIndexes(Directory[]) - and I 
pass in the directories in the same order that I created them.


This allows me to use higher merge factors without running into file 
handle issues, and without having to call optimize.

The problem that I am seeing right now, is that when I look into my 
large combined index with Luke, Document number 899 is the 899th 
document that I added.  However, Document 900 is the 49860th document 
that I added.  This continues until Document 910, where it suddenly 
jumps to the 99720th document.

Is this a bug, or am I misusing something in the API?

Thanks,

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 15:32:09 2006
Return-Path: <java-user-return-19979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37530 invoked from network); 5 Apr 2006 15:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 15:32:08 -0000
Received: (qmail 94515 invoked by uid 500); 5 Apr 2006 15:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94487 invoked by uid 500); 5 Apr 2006 15:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94475 invoked by uid 99); 5 Apr 2006 15:31:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:31:57 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_POST,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 62.15.139.10 is neither permitted nor denied by domain of gm.tagliani@aladus.com)
Received: from [62.15.139.10] (HELO oficinas.aladus.com) (62.15.139.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:31:57 -0700
Received: from [127.0.0.1] (gianmarco.intranet.aladus.com [172.20.3.11])
	by oficinas.aladus.com (Postfix) with ESMTP id A60D92ED27
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 17:31:34 +0200 (CEST)
Message-ID: <4433E2EC.4050709@aladus.com>
Date: Wed, 05 Apr 2006 17:31:56 +0200
From: Gian Marco Tagliani <gm.tagliani@aladus.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: lucene sorting
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I need to change the lucene sorting to give just a bit more relevance to 
the recent documents (but i don't want to sort by date). I'd like to mix 
the lucene score with the date of the document.

I'm following the example in "Lucene in Action", chapter 6. I'm trying 
to extends the SortComparatorSource but I don't understand how to get 
the lucene score of the document.

Do you have some idea about how to solve my problem?
Or do you know where get some more example on custom sorting?

Thanks,
Gian Marco



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 16:00:17 2006
Return-Path: <java-user-return-19980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57029 invoked from network); 5 Apr 2006 16:00:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 16:00:17 -0000
Received: (qmail 94120 invoked by uid 500); 5 Apr 2006 15:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94067 invoked by uid 500); 5 Apr 2006 15:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94032 invoked by uid 99); 5 Apr 2006 15:59:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 08:59:55 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Apr 2006 08:59:54 -0700
Received: (qmail 44129 invoked from network); 5 Apr 2006 15:22:40 -0000
Received: from unknown (HELO ?192.168.0.6?) (brungri@80.11.87.62 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 5 Apr 2006 15:22:40 -0000
Message-ID: <4433E0B6.9000405@wanadoo.fr>
Date: Wed, 05 Apr 2006 17:22:30 +0200
From: Bruno Grilheres <bgrilheres@wanadoo.fr>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene or Nutch ?
References: <44337FDD.6090604@wanadoo.fr> <c68e39170604050744u29f51c2av8647da460328084@mail.gmail.com>
In-Reply-To: <c68e39170604050744u29f51c2av8647da460328084@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for your answer, I was not aware of the SOLR project,

There was a big typo here, I meant less than 10 Go of PDF files per day 
during one month => i.e. less than 300 Go of PDF files.
I made some tests with PDF files, 100Mo or Native PDF are converted to 
3Mo of index in lucene [The text was indexed but not stored].

Bruno

Yonik Seeley wrote:
> On 4/5/06, Bruno Grilheres <bgrilheres@wanadoo.fr> wrote:
>   
>> 1) High volume of data indexation but only with add and delete
>> functionality (approximatively 10 PDF) => scalable architecture HDFS
>> seems good.
>> 2) Specific analysis chain and a given set of meta-data indexation.
>> 3) Language Recognition
>> 4) No graphical interface for searching is needed, no crawling is
>> needed, Indexation and Search are performed with HTTP Request to a Servlet
>>
>> What is the best starting choice for this : Lucene or Nutch ?
>>
>> As far as I know Lucene is a good choice for 2 and 4, Nutch is a better
>> choice for 1 and 3.
>>     
>
> Solr would also be good for 2 and 4
> As far as 1, what type of scalability requirements are we talking? (#
> documents, size of docs, etc)
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>   


	

	
		
___________________________________________________________________________ 
Nouveau : tlphonez moins cher avec Yahoo! Messenger ! Dcouvez les tarifs exceptionnels pour appeler la France et l'international.
Tlchargez sur http://fr.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 16:06:24 2006
Return-Path: <java-user-return-19981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60402 invoked from network); 5 Apr 2006 16:06:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 16:06:24 -0000
Received: (qmail 11718 invoked by uid 500); 5 Apr 2006 16:06:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11649 invoked by uid 500); 5 Apr 2006 16:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11629 invoked by uid 99); 5 Apr 2006 16:06:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 09:06:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 09:06:12 -0700
Received: by zproxy.gmail.com with SMTP id 16so638512nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 09:05:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JAUKXjpVrgq6SvwrNUvLHsD4mFP31TKWHE6w+20QVIXEG0SZAGTHYYysY7qQIE/TGPyE2q7nOp7hERbuxFHke4xg2Ss4xmpcCHjfG9eSKLiBMXNNBa+dernae9GjgSLzfkoLlXnV1H0YCbBZbqOmpEI1UCqGzPE8zfEH7lb2vn0=
Received: by 10.35.109.2 with SMTP id l2mr2348426pym;
        Wed, 05 Apr 2006 09:05:51 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 09:05:51 -0700 (PDT)
Message-ID: <c68e39170604050905n311bfa36g8f586190ea96c8bd@mail.gmail.com>
Date: Wed, 5 Apr 2006 12:05:51 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene or Nutch ?
In-Reply-To: <4433E0B6.9000405@wanadoo.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <44337FDD.6090604@wanadoo.fr>
	 <c68e39170604050744u29f51c2av8647da460328084@mail.gmail.com>
	 <4433E0B6.9000405@wanadoo.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Bruno Grilheres <bgrilheres@wanadoo.fr> wrote:
> Thanks for your answer, I was not aware of the SOLR project,
>
> There was a big typo here, I meant less than 10 Go of PDF files per day
> during one month =3D> i.e. less than 300 Go of PDF files.

Sorry, I'm not sure what the "Go" abbreviation is... I assume it's
Gigabytes (GB or GiB)?
If so, that's a lot.  I'd probably go with Nutch.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 16:56:28 2006
Return-Path: <java-user-return-19982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88808 invoked from network); 5 Apr 2006 16:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 16:56:25 -0000
Received: (qmail 31986 invoked by uid 500); 5 Apr 2006 16:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31962 invoked by uid 500); 5 Apr 2006 16:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31943 invoked by uid 99); 5 Apr 2006 16:56:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 09:56:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 09:56:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6198C5B76C; Wed,  5 Apr 2006 09:55:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 569257F403;
	Wed,  5 Apr 2006 09:55:48 -0700 (PDT)
Date: Wed, 5 Apr 2006 09:55:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, Artem Vasiliev <artvas@gmail.com>
Subject: Re[4]: OutOfMemory with search(Query, Sort)
In-Reply-To: <1469269881.20060405085915@gmail.com>
Message-ID: <Pine.LNX.4.58.0604050949550.17699@hal.rescomp.berkeley.edu>
References: <756391613.20060401024129@gmail.com>
 <c68e39170603311630l1e86300bl79a94f964587f80d@mail.gmail.com>
 <18784005.20060401141302@gmail.com> <c68e39170604010615u34afec87t790c3f8cce33eaa3@mail.gmail.com>
 <Pine.LNX.4.58.0604041722480.26394@hal.rescomp.berkeley.edu>
 <1469269881.20060405085915@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Thanks for your answer, you're right, filepathes are pretty much
: unique. Anyway I don't want this total-field-cache-loading situation occur
: in any circumstances - it's too expensive. My app usually crawls while
: user searches are performed. Crawl involves additions and deletions so
: IndexSearcher get closed relatively frequently. Seems like Lucene
: would reload the whole field cache for each new IndexSearcher, which
: would be a big hit anyway. So I'll try FieldCache overriding solution
: proposed by you and Yonik and may be commit it to Lucene as a patch.

it will, but you can structure your app so that you don't re-open your
IndexSearcher for every query -- just do it on a periodic basis (ie: "if
N time elapsed since last open, and index version has increased, reopen
searcher; sleep S time")

: Btw do I understand right that concrete FieldCache class isn't pluggable
: at Lucene at the moment?

it's definitley pluggable, just assign the implimentation you want to use
to FieldCache.DEFAULT and all coe will use it, but anything that calls
FieldCache.DEFAULT.getStringIndex(...) may expect that the string array
will be populated, so instead of replacing it the FieldCache isntance
completley, you can impliment your own SortField that uses
FieldCache.getCustom to build a cache that only contains the index ints.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 17:04:12 2006
Return-Path: <java-user-return-19983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92647 invoked from network); 5 Apr 2006 17:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 17:04:08 -0000
Received: (qmail 52825 invoked by uid 500); 5 Apr 2006 17:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52802 invoked by uid 500); 5 Apr 2006 17:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52791 invoked by uid 99); 5 Apr 2006 17:03:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:03:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:03:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B12AE5B76C; Wed,  5 Apr 2006 10:03:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AA9EF7F403
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 10:03:37 -0700 (PDT)
Date: Wed, 5 Apr 2006 10:03:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <4433E119.4080101@gmail.com>
Message-ID: <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
References: <4433E119.4080101@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: exactly the same as how I insert them.  Lucene is supposed to maintain
: document order, even across index merges, correct?

Lucene definitely maintains index order for document additions -- but i
don't know if any similar claim has been made about merging whole indexes.

: this until I'm done with all of the documents.  Then, as a last step, I
: open up a new empty index, and I call addIndexes(Directory[]) - and I
: pass in the directories in the same order that I created them.
	...
: The problem that I am seeing right now, is that when I look into my
: large combined index with Luke, Document number 899 is the 899th
: document that I added.  However, Document 900 is the 49860th document
: that I added.  This continues until Document 910, where it suddenly
: jumps to the 99720th document.

As I said, i'm not sure if it's a bug or undefined behavior, but
can you post a self contained JUnit test demonstrating this? -- that way
people can look at exactly what is going on (if it is a bug).




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 17:09:16 2006
Return-Path: <java-user-return-19984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94495 invoked from network); 5 Apr 2006 17:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 17:08:54 -0000
Received: (qmail 61549 invoked by uid 500); 5 Apr 2006 17:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61513 invoked by uid 500); 5 Apr 2006 17:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61501 invoked by uid 99); 5 Apr 2006 17:08:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:08:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:08:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 42E655B76C; Wed,  5 Apr 2006 10:08:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 38DF27F403
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 10:08:25 -0700 (PDT)
Date: Wed, 5 Apr 2006 10:08:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene sorting
In-Reply-To: <4433E2EC.4050709@aladus.com>
Message-ID: <Pine.LNX.4.58.0604051005340.17699@hal.rescomp.berkeley.edu>
References: <4433E2EC.4050709@aladus.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I don't know if there is anyway for a Custom Sort to access the lucene
score -- but another approach that works very well is to use the
FunctionQuery classes from Solr...

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/package-summary.html

...you can make a FunctionQuery object that scores things linerarly (or
reciprocally, or any other funciton you impliment in java) based on the
value of any field -- and then add that query to a BooleanQuery along with
your orriginal query and use the boost to determine how much of an
influence it has on your final score.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 17:56:22 2006
Return-Path: <java-user-return-19985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22574 invoked from network); 5 Apr 2006 17:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 17:56:20 -0000
Received: (qmail 74621 invoked by uid 500); 5 Apr 2006 17:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74595 invoked by uid 500); 5 Apr 2006 17:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74584 invoked by uid 99); 5 Apr 2006 17:56:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:56:14 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.47 as permitted sender)
Received: from [65.54.174.47] (HELO hotmail.com) (65.54.174.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 10:56:13 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 5 Apr 2006 10:55:52 -0700
Message-ID: <BAY103-F37E2D718DB7C1C1D2EC9A0FECB0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Wed, 05 Apr 2006 17:55:47 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <443346EC.2000108@nuix.com.au>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser error + solution
Date: Wed, 05 Apr 2006 17:55:47 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 05 Apr 2006 17:55:52.0484 (UTC) FILETIME=[2E051E40:01C658DA]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel you are very clever! Your solution remind me this:
No temptation has overtaken you but such as is common to man; and God is 
faithful, who will not allow you to be tempted beyond what you are able, but 
with the temptation will provide the way of escape also, so that you will be 
able to endure it.
1 Corinthians 10:13 (New American Standard Version)

Well done Erik!


----Original Message Follows----
From: Daniel Noll <daniel@nuix.com.au>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: QueryParser error + solution
Date: Wed, 05 Apr 2006 14:26:20 +1000

miki sun wrote:
>Thanks Erik and Michael!
>
>I copied some code from demo.SearchFiles.java, I do not have a more clearer 
>tracing message. Now it works.
>
>But do you have a better way than this:
>
[snip]

Something like this?

   String str = "Really bad query string: lots of evil stuff!";
   str = QueryParser.escape(str);

Daniel

--
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 18:23:20 2006
Return-Path: <java-user-return-19986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34997 invoked from network); 5 Apr 2006 18:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 18:23:19 -0000
Received: (qmail 31669 invoked by uid 500); 5 Apr 2006 18:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31641 invoked by uid 500); 5 Apr 2006 18:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31630 invoked by uid 99); 5 Apr 2006 18:23:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 11:23:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 11:23:12 -0700
Received: (qmail 30477 invoked from network); 5 Apr 2006 18:22:49 -0000
Received: from unknown (HELO p5496da04.dip.t-dialin.net) ([pbs]695637@[84.150.218.4])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Apr 2006 18:22:49 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Optimize completely in memory with a FSDirectory?
Date: Wed, 5 Apr 2006 20:22:34 +0200
User-Agent: KMail/1.8.2
References: <A955EA1F8FE31749AEC8C998082F6C7C41A908@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C41A908@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604052022.34971@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 05 April 2006 13:02, Max Pfingsthorn wrote:

> The setMaxBufferedDocs and related parameters help a lot already to
> fully exploit my RAM when indexing, but since I'm running a fairly small
> index of around 40000 docs and I'm optimizing it relatively often, I was
> wondering if there is any way to enforce complete in-memory
> optimization.

Maybe you could use a RAMDirectory and write it to disk using 
IndexWriter.addIndexes() from time to time?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 20:09:28 2006
Return-Path: <java-user-return-19987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98763 invoked from network); 5 Apr 2006 20:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 20:09:27 -0000
Received: (qmail 34466 invoked by uid 500); 5 Apr 2006 20:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34436 invoked by uid 500); 5 Apr 2006 20:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34423 invoked by uid 99); 5 Apr 2006 20:09:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:09:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO zproxy.gmail.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:09:21 -0700
Received: by zproxy.gmail.com with SMTP id 16so719626nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 13:09:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lruTD0qK3GF02Z+OT7VG93eTeo3EDQtg6wCNYbzbPYUdAZCPwCkpK2p7zXtWtL3E+O1QCTwO8Qx5laaNIx+vpJGV67F/+uMWd8wgERUScTANRza0gvHpVQh31s3JRzIVCmRODgvzu5xFB2YngeNiIdAS3kYBbXfqF/FM8d5bKts=
Received: by 10.35.39.2 with SMTP id r2mr10814pyj;
        Wed, 05 Apr 2006 13:09:00 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id w66sm7173pyw.2006.04.05.13.08.59;
        Wed, 05 Apr 2006 13:08:59 -0700 (PDT)
Message-ID: <443423DB.3040008@gmail.com>
Date: Wed, 05 Apr 2006 15:08:59 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
References: <4433E119.4080101@gmail.com> <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> : exactly the same as how I insert them.  Lucene is supposed to maintain
> : document order, even across index merges, correct?
> 
> Lucene definitely maintains index order for document additions -- but i
> don't know if any similar claim has been made about merging whole indexes.
> 
> : this until I'm done with all of the documents.  Then, as a last step, I
> : open up a new empty index, and I call addIndexes(Directory[]) - and I
> : pass in the directories in the same order that I created them.
> 	...
> : The problem that I am seeing right now, is that when I look into my
> : large combined index with Luke, Document number 899 is the 899th
> : document that I added.  However, Document 900 is the 49860th document
> : that I added.  This continues until Document 910, where it suddenly
> : jumps to the 99720th document.
> 
> As I said, i'm not sure if it's a bug or undefined behavior, but
> can you post a self contained JUnit test demonstrating this? -- that way
> people can look at exactly what is going on (if it is a bug).
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

Well, I set out to write  JUnit test case to quickly show this... but 
I'm having a heck of a time doing it.  With relatively small numbers of 
documents containing very few fields... I haven't been able to recreate 
the out-of-order problem.  However, with my real process, with a ton 
more data, I can recreate it every single time I index (it even gets the 
same documents out of order, consistently).

I'll continue to try to generate a test case that gets the docs out of 
order... but if someone in the know could answer authoritatively whether 
or not lucene is supposed to maintain document order when you merge 
multiple indexes together, that would be great.

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 20:18:09 2006
Return-Path: <java-user-return-19988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2729 invoked from network); 5 Apr 2006 20:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 20:18:07 -0000
Received: (qmail 59623 invoked by uid 500); 5 Apr 2006 20:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59593 invoked by uid 500); 5 Apr 2006 20:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59582 invoked by uid 99); 5 Apr 2006 20:18:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:18:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:18:01 -0700
Received: by zproxy.gmail.com with SMTP id 16so722307nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 13:17:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=o5ARIAyQZG/dNc296eNnjCabPnjfkXF6nGoZG7KcC4tpkxRvzfpPRfgmaFb/FHs4081YpmUEz27LXE60vlH9pPYXR9nJGuo16SMLeC5pzNbWdleEtRu5pfocAZLRUNEbEzEUPXw7TkKIaJL8ttgvLhywzADplf+eYZNFs5hGMKc=
Received: by 10.35.103.12 with SMTP id f12mr23202pym;
        Wed, 05 Apr 2006 13:17:40 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 13:17:35 -0700 (PDT)
Message-ID: <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
Date: Wed, 5 Apr 2006 16:17:35 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <443423DB.3040008@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> I'll continue to try to generate a test case that gets the docs out of
> order... but if someone in the know could answer authoritatively whether

I browsed the code for IndexWriter.addIndexes(Dir[]), and it looks
like it should preserve order.
The directories are added in order, and the segments for each
directory are added in order.  The merging code is shared, so that
shouldn't do anything different than normal segment merges.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 20:21:34 2006
Return-Path: <java-user-return-19989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4274 invoked from network); 5 Apr 2006 20:21:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 20:21:31 -0000
Received: (qmail 64668 invoked by uid 500); 5 Apr 2006 20:21:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64640 invoked by uid 500); 5 Apr 2006 20:21:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64629 invoked by uid 99); 5 Apr 2006 20:21:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:21:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:21:25 -0700
Received: by zproxy.gmail.com with SMTP id 16so723377nzp
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 13:21:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fNlgyPBcTS/X2tvyE8TcTHpjdJZGwL3tX/HpwtaB05JsvPRJd+frh2SzdEFXiIb3aptJz+SEvu1ioPVXVaC130RuCJ0YzdC9HyFpP9AnneDl6kti8/+QIT7FGrGkrB2YLNoUp5kCzDEkesik7mD+h8+cNZNPRSTQwOn98xL6hY4=
Received: by 10.35.18.4 with SMTP id v4mr20579pyi;
        Wed, 05 Apr 2006 13:21:04 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 13:21:04 -0700 (PDT)
Message-ID: <c68e39170604051321g6b0a91afid2facf4f7641c7a0@mail.gmail.com>
Date: Wed, 5 Apr 2006 16:21:04 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <443423DB.3040008@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> I haven't been able to recreate
> the out-of-order problem.  However, with my real process, with a ton
> more data, I can recreate it every single time I index (it even gets the
> same documents out of order, consistently).

If you have enough file handles, you can test if it's a Lucene problem
or your app by opening a MultiReader over all the indexes and testing
if the documents are in the order you think they are *before* merging.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 20:48:51 2006
Return-Path: <java-user-return-19990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23538 invoked from network); 5 Apr 2006 20:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 20:48:49 -0000
Received: (qmail 29124 invoked by uid 500); 5 Apr 2006 20:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29092 invoked by uid 500); 5 Apr 2006 20:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29077 invoked by uid 99); 5 Apr 2006 20:48:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:48:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:48:42 -0700
Received: by pproxy.gmail.com with SMTP id w49so783pyg
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 13:48:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=A14oBXIK6Hhqnix65MnK8UGtvnk01WwseHS5/neTx9QQwy+gvoKvJxnSDy3hSf/wjg3l7miOn6H0IPoQg5xlNV2g7PZRMW/G4lzk5k7nDJf1k6Ra9CBfPYW51XVoN2I2sxJn0//vQGNNF6uS1876JPbXTviZEELpfuMtaqzW+v4=
Received: by 10.35.109.2 with SMTP id l2mr79903pym;
        Wed, 05 Apr 2006 13:48:22 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id n77sm151109pye.2006.04.05.13.48.21;
        Wed, 05 Apr 2006 13:48:21 -0700 (PDT)
Message-ID: <44342D15.9070603@gmail.com>
Date: Wed, 05 Apr 2006 15:48:21 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
References: <4433E119.4080101@gmail.com>	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>	 <443423DB.3040008@gmail.com> <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
In-Reply-To: <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> On 4/5/06, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
>> I'll continue to try to generate a test case that gets the docs out of
>> order... but if someone in the know could answer authoritatively whether
> 
> I browsed the code for IndexWriter.addIndexes(Dir[]), and it looks
> like it should preserve order.
> The directories are added in order, and the segments for each
> directory are added in order.  The merging code is shared, so that
> shouldn't do anything different than normal segment merges.
> 
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

Thanks for checking Yonik.  I'm fairly certain that this is a lucene bug 
then - I will try to come up with a reproduceable test case.

My load code is pretty simple... whenever I create a new document, I put 
in a field that contains a counter of the load order.

When I look at the individual indexes, things are fine - but after it 
merges them, I get a significant percentage of documents which have been 
reordered.

One other thing I can look into - I've been building these indexes on a 
64 bit linux machine, using a 64 bit JVM.  I need to see if the same 
error happens on 32 bit windows....

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 20:57:38 2006
Return-Path: <java-user-return-19991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27810 invoked from network); 5 Apr 2006 20:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 20:57:37 -0000
Received: (qmail 48430 invoked by uid 500); 5 Apr 2006 20:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48408 invoked by uid 500); 5 Apr 2006 20:57:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48397 invoked by uid 99); 5 Apr 2006 20:57:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:57:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 13:57:32 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 03D595B776; Wed,  5 Apr 2006 13:57:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 025177F403
	for <java-user@lucene.apache.org>; Wed,  5 Apr 2006 13:57:10 -0700 (PDT)
Date: Wed, 5 Apr 2006 13:57:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <443423DB.3040008@gmail.com>
Message-ID: <Pine.LNX.4.58.0604051354290.30624@hal.rescomp.berkeley.edu>
References: <4433E119.4080101@gmail.com> <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
 <443423DB.3040008@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Well, I set out to write  JUnit test case to quickly show this... but
: I'm having a heck of a time doing it.  With relatively small numbers of
: documents containing very few fields... I haven't been able to recreate
: the out-of-order problem.  However, with my real process, with a ton
: more data, I can recreate it every single time I index (it even gets the
: same documents out of order, consistently).

it's very possible that the problem is specific to large numbers of
documents/indexes, or that it's specific to FSDirectory - so if you can't
reproduce with a handfull of docs on a RAMDirectory don't shy away from
making a test case that creates 10 1GB indexes in ./test-doc-order-on-merge
or something like that if it's the only way to reproduce the problem.

just warn us if it it's not obvious from the code that it does that :)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:03:54 2006
Return-Path: <java-user-return-19992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30617 invoked from network); 5 Apr 2006 21:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:03:53 -0000
Received: (qmail 62092 invoked by uid 500); 5 Apr 2006 21:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62018 invoked by uid 500); 5 Apr 2006 21:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61833 invoked by uid 99); 5 Apr 2006 21:03:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:03:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:03:38 -0700
Received: by pproxy.gmail.com with SMTP id n25so2523pyg
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 14:03:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GEl7ZSe20UkUU4C/nDFCQAMtE9q/VnPqRmKqP9XgBhOH5H1IrjHyb9r/yiboXGF2XKyQoKVYptyQITdAghpHCWedUgkS5RdaCxwUDnHuNbBXUzOjDXYrGq4JeVRPC5TA5U/sWx8aiSMUSe2m1T2mbUTRvH7n9L8eUE8djyvtumo=
Received: by 10.35.14.1 with SMTP id r1mr94396pyi;
        Wed, 05 Apr 2006 14:03:17 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 14:03:17 -0700 (PDT)
Message-ID: <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
Date: Wed, 5 Apr 2006 17:03:17 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <44342D15.9070603@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> I will try to come up with a reproduceable test case.

If you reproduce it, I'll fix it :-)

For your test case, try lowering numbers, such as maxBufferedDocs=3D2,
mergeFactor=3D2 or 3
to create more segments more quickly and cause more merges with fewer docum=
ents.


-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:23:56 2006
Return-Path: <java-user-return-19993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37708 invoked from network); 5 Apr 2006 21:23:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:23:48 -0000
Received: (qmail 97396 invoked by uid 500); 5 Apr 2006 21:23:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97371 invoked by uid 500); 5 Apr 2006 21:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97360 invoked by uid 99); 5 Apr 2006 21:23:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:23:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:23:39 -0700
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net [207.115.4.21])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k35LNNYC019580
	for <java-user@lucene.apache.org>; Wed, 5 Apr 2006 17:23:25 -0400
X-ORBL: [69.228.204.183]
Received: from [192.168.168.15] (adsl-69-228-204-183.dsl.pltn13.pacbell.net [69.228.204.183])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k35LNANh263712;
	Wed, 5 Apr 2006 17:23:12 -0400
Message-ID: <4434353D.90604@apache.org>
Date: Wed, 05 Apr 2006 14:23:09 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
References: <4433E119.4080101@gmail.com>
In-Reply-To: <4433E119.4080101@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dan Armbrust wrote:
> My indexing process works as follows (and some of this is hold-over from 
> the time before lucene had a compound file format - so bear with me)
> 
> I open up a File based index - using a merge factor of 90, and in my 
> current test, the compound index format.  When I have added 100,000 
> documents, I close this index, and start on a new index.  I continue 
> this until I'm done with all of the documents.  Then, as a last step, I 
> open up a new empty index, and I call addIndexes(Directory[]) - and I 
> pass in the directories in the same order that I created them.
> 
> This allows me to use higher merge factors without running into file 
> handle issues, and without having to call optimize.

As others have noted, this should work correctly.

I assume that your merge factor when calling addIndexes() is less than 
90.  If it's 90, then what you're doing is the same as Lucene would 
automatically do.  I think you could save yourself a lot of trouble if 
you simply lowered your merge factor substantially and then indexed 
everything in one pass.  To make things go faster, set 
maxBufferedDocs=100 or larger.  This should be as fast as what you're 
doing now and a lot simpler.

Or is that the part where I was supposed to "bear with" you?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:51:00 2006
Return-Path: <java-user-return-19994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52526 invoked from network); 5 Apr 2006 21:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:50:57 -0000
Received: (qmail 42392 invoked by uid 500); 5 Apr 2006 21:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42332 invoked by uid 500); 5 Apr 2006 21:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42246 invoked by uid 99); 5 Apr 2006 21:50:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:50:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:50:41 -0700
Received: by pproxy.gmail.com with SMTP id s49so13062pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 14:50:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pr+H0xoULWl/oDRJed6PrhIkmUwF3XaFXEWNp/o6NtkKjfrIR3JpGmGe/AYPl9cn1IceLH3zTdZxZAPRs8R9Q8FPQDg7gBVKEOaRCrFfbuS84hVC7oznwdIlidk3RVEt6rVPh+OAxrCYpeAYV346L2dcFZ+rukDxaiKfl9z8VzA=
Received: by 10.35.70.17 with SMTP id x17mr114216pyk;
        Wed, 05 Apr 2006 14:50:20 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 14:50:20 -0700 (PDT)
Message-ID: <c68e39170604051450q7ccfd25p48f5bca252c0bcf6@mail.gmail.com>
Date: Wed, 5 Apr 2006 17:50:20 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <4434353D.90604@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com> <4434353D.90604@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Doug Cutting <cutting@apache.org> wrote:

> As others have noted, this should work correctly.

One slight oddity I noticed with addIndexes(Dir[]) is that merging
starts at one past the first new segment added (not the first new
segment).  It doesn't seem like that should hurt much though.


-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:52:04 2006
Return-Path: <java-user-return-19995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53028 invoked from network); 5 Apr 2006 21:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:52:02 -0000
Received: (qmail 48937 invoked by uid 500); 5 Apr 2006 21:51:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48912 invoked by uid 500); 5 Apr 2006 21:51:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48901 invoked by uid 99); 5 Apr 2006 21:51:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:51:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wproxy.gmail.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:51:54 -0700
Received: by wproxy.gmail.com with SMTP id 36so256140wra
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 14:51:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dsvMbfy0JnzEL+WH9VYu/qy7kCWiOnN7mNsSpW7KyftY1/I203LLIqcmMB2fwedi0RlFgPz0HVAMb5a3OyhXI7U64lwDP6/nYeONx+niH0NfOO9xCg87pJT/qGyjloqCta/QKY+176XiAXJtDeOsl/OahGuoZRpnTPRRB4hapMI=
Received: by 10.54.145.20 with SMTP id s20mr139186wrd;
        Wed, 05 Apr 2006 14:51:34 -0700 (PDT)
Received: by 10.54.114.15 with HTTP; Wed, 5 Apr 2006 14:51:34 -0700 (PDT)
Message-ID: <e994873a0604051451xa8c51eia46de209ed0963a0@mail.gmail.com>
Date: Wed, 5 Apr 2006 17:51:34 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Throughput doesn't increase when using more concurrent threads
In-Reply-To: <43DD6821.8020302@nuix.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24239_3023381.1144273894114"
References: <GJEMKBFALLAJKLGINBHHKEHAKOAA.jbooth@net-temps.com>
	 <43820731.5000806@apache.org>
	 <fb9748c90601260043m3ed5e7fbh78ac7e23947a488f@mail.gmail.com>
	 <e994873a0601260756o58fb3b1ap3aa87df6de1ac0d7@mail.gmail.com>
	 <43D92935.1000809@apache.org> <43D92A28.6050501@apache.org>
	 <e994873a0601261320r753d864cwcb37b72e54539d09@mail.gmail.com>
	 <43DD6821.8020302@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24239_3023381.1144273894114
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

> Out of interest, does indexing time speed up much on 64-bit hardware?

I was able to speed up indexing on 64-bit platform by taking advantage of
the larger address space to parallelize the indexing process. One thread
creates index segments with a set of RAMDirectories and another thread
merges the segments to disk with 'addIndexes'. This resulted in a speed
improvement of 27%.

Peter


On 1/29/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> Peter Keegan wrote:
> > I tried the AMD64-bit JVM from Sun and with MMapDirectory and I'm now
> > getting 250 queries/sec and excellent cpu utilization (equal concurrenc=
y
> on
> > all cpus)!! Yonik, thanks for the pointer to the 64-bit jvm. I wasn't
> aware
> > of it.
> >
> Wow.  That's fast.
>
> Out of interest, does indexing time speed up much on 64-bit hardware?
> I'm particularly interested in this side of things because for our own
> application, any query response under half a second is good enough, but
> the indexing side could always be faster. :-)
>
> Daniel
>
> --
> Daniel Noll
>
> Nuix Australia Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia
> Phone: (02) 9280 0699
> Fax:   (02) 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24239_3023381.1144273894114--

From java-user-return-19996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:56:34 2006
Return-Path: <java-user-return-19996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55039 invoked from network); 5 Apr 2006 21:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:56:34 -0000
Received: (qmail 58166 invoked by uid 500); 5 Apr 2006 21:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58141 invoked by uid 500); 5 Apr 2006 21:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58130 invoked by uid 99); 5 Apr 2006 21:56:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:56:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:56:28 -0700
Received: by pproxy.gmail.com with SMTP id s49so14253pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 14:56:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=oFoyClJVmwGWD1ICI3u9f/fH+t6ZlWYyqd7Pguf52T/KTAz9viJuK/lHlrDnG1uPj0hLbc+qFatgZNzj+mEhLnXBliwvpCK4EqH1wSpsmhkSYomkT1mb2mO7H09v6gchMLrovXMhjQtKZX7j3bMHvmkURlNMPDclXv5f7mMkUaw=
Received: by 10.35.99.14 with SMTP id b14mr128400pym;
        Wed, 05 Apr 2006 14:56:07 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id x47sm826162pyc.2006.04.05.14.56.07;
        Wed, 05 Apr 2006 14:56:07 -0700 (PDT)
Message-ID: <44343CF6.4080908@gmail.com>
Date: Wed, 05 Apr 2006 16:56:06 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
References: <4433E119.4080101@gmail.com>	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>	 <443423DB.3040008@gmail.com>	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>	 <44342D15.9070603@gmail.com> <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
In-Reply-To: <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> For your test case, try lowering numbers, such as maxBufferedDocs=2,
> mergeFactor=2 or 3
> to create more segments more quickly and cause more merges with fewer documents.

Good suggestion.  A merge factor of 2 made it happen much more quickly. 
  Bug is filed:

http://issues.apache.org/jira/browse/LUCENE-540

JUnit test case is attached (although it may not be in the proper format 
for lucene - but I think its pretty straight forward)

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 21:59:32 2006
Return-Path: <java-user-return-19997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55923 invoked from network); 5 Apr 2006 21:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 21:59:31 -0000
Received: (qmail 61341 invoked by uid 500); 5 Apr 2006 21:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61314 invoked by uid 500); 5 Apr 2006 21:59:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61303 invoked by uid 99); 5 Apr 2006 21:59:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:59:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO pproxy.gmail.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 14:59:24 -0700
Received: by pproxy.gmail.com with SMTP id s49so14864pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 14:59:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OOi88vc8vc1PGkDT4GJ+KYNU1CA2yVZ1WFhjejbGMQiqjhJbOkjiNalbED5RNnf1XSy4a6/LYu+WrjG9nweYQzGD/GqwadgWcDOc8V5xRcxydse9LfVxqkUqpsx/Kuba4YvuhVAQJapkaiiatpp4uY/Aa/OOrI7VnQfdEuWOTd8=
Received: by 10.35.39.2 with SMTP id r2mr146936pyj;
        Wed, 05 Apr 2006 14:59:04 -0700 (PDT)
Received: from ?172.24.51.72? ( [129.176.197.15])
        by mx.gmail.com with ESMTP id t70sm4405pyg.2006.04.05.14.59.03;
        Wed, 05 Apr 2006 14:59:04 -0700 (PDT)
Message-ID: <44343DA7.10309@gmail.com>
Date: Wed, 05 Apr 2006 16:59:03 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
References: <4433E119.4080101@gmail.com> <4434353D.90604@apache.org>
In-Reply-To: <4434353D.90604@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:
> 
> I assume that your merge factor when calling addIndexes() is less than 
> 90.  If it's 90, then what you're doing is the same as Lucene would 
> automatically do.  I think you could save yourself a lot of trouble if 
> you simply lowered your merge factor substantially and then indexed 
> everything in one pass.  To make things go faster, set 
> maxBufferedDocs=100 or larger.  This should be as fast as what you're 
> doing now and a lot simpler.
> 
> Or is that the part where I was supposed to "bear with" you?
> 
> Doug
> 

Yep.  This code was written when I had to index tons of stuff on linux, 
and was constantly running into file handle issues (even with low merge 
factors).  I ended up writing a wrapper for lucene that handled it all 
for me, and I've just been reusing it.  Then today, I ran into this 
issue.  It may be time to rework some of the wrapper to take advantage 
of the lucene updates :)

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 22:01:16 2006
Return-Path: <java-user-return-19998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56717 invoked from network); 5 Apr 2006 22:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 22:01:16 -0000
Received: (qmail 65346 invoked by uid 500); 5 Apr 2006 22:01:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65324 invoked by uid 500); 5 Apr 2006 22:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65313 invoked by uid 99); 5 Apr 2006 22:01:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:01:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO pproxy.gmail.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:01:10 -0700
Received: by pproxy.gmail.com with SMTP id s49so15245pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 15:00:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FutmQt+GCde4rzFr4SM9CWGHpaa1gM4jnsux2BVeOx+VzvXKrsTsa7oTZrjUorrfYjGAXx6jm6o/U8gUWPhQswxuHFA05L8IXhypXiBuUAuEqUHVYCWwINFKDvZC8bG2xAoRWslJC6G4urgDT+ziuPOvNsc+K69HVnZ0TaeYkuI=
Received: by 10.35.119.11 with SMTP id w11mr146892pym;
        Wed, 05 Apr 2006 15:00:49 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 15:00:49 -0700 (PDT)
Message-ID: <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
Date: Wed, 5 Apr 2006 18:00:49 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <44343CF6.4080908@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/5/06, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> Yonik Seeley wrote:
> > For your test case, try lowering numbers, such as maxBufferedDocs=3D2,
> > mergeFactor=3D2 or 3
> > to create more segments more quickly and cause more merges with fewer d=
ocuments.
>
> Good suggestion.  A merge factor of 2 made it happen much more quickly.
>   Bug is filed:
>
> http://issues.apache.org/jira/browse/LUCENE-540

Thanks Dan, I'll look into it tonight, as promised.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-19999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 22:52:33 2006
Return-Path: <java-user-return-19999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76914 invoked from network); 5 Apr 2006 22:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 22:52:33 -0000
Received: (qmail 18382 invoked by uid 500); 5 Apr 2006 22:52:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18361 invoked by uid 500); 5 Apr 2006 22:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18338 invoked by uid 99); 5 Apr 2006 22:52:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:52:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:52:27 -0700
Received: by pproxy.gmail.com with SMTP id s49so26805pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 15:52:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SoULuODcfjQ4xbiFB76s+MjwBGd03OKn4rLBWOEkiZ6Eg8wJSQMTsf+UtWdctrQSFZBGjhrAJa7QB9gLeR7DrbAE5GAVevWX+wFbXcujQD/Jpz9Nw/J8PO3tXEghKmFZAonZdUGs9wb3clgFM0Cpnc3AIt3LyupmR78BNXTYshY=
Received: by 10.35.99.14 with SMTP id b14mr181699pym;
        Wed, 05 Apr 2006 15:52:06 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 15:52:06 -0700 (PDT)
Message-ID: <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
Date: Wed, 5 Apr 2006 18:52:06 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah Ha! I found the problem.

SegmentInfos.read(Directory directory) reads the segment info in reverse or=
der!
I gotta go home now... I'll look into the right fix later (it depends
on what else uses that method...)

FYI, I managed to reproduce it with only 3 documents in each index.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 22:57:29 2006
Return-Path: <java-user-return-20000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78229 invoked from network); 5 Apr 2006 22:57:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 22:57:29 -0000
Received: (qmail 24414 invoked by uid 500); 5 Apr 2006 22:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24385 invoked by uid 500); 5 Apr 2006 22:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24374 invoked by uid 99); 5 Apr 2006 22:57:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:57:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO pproxy.gmail.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 15:57:23 -0700
Received: by pproxy.gmail.com with SMTP id s49so27739pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 15:57:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XVmbCFj1kx9E8CexdXOkhkGi+cwqF9XTFloSxivntD+IGYzzM6k9DSa0kIgYZwDSrItutKZqsSmaCCzXy/qDcfzzHlFq1myYzlt11C8m7B773LEnVk32IOYY+qaZNm2at0Eum+nc8CYtHaNn4U15RZQdqgX8fLWojYm5r4PRV8M=
Received: by 10.35.70.17 with SMTP id x17mr177240pyk;
        Wed, 05 Apr 2006 15:57:03 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 15:57:03 -0700 (PDT)
Message-ID: <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
Date: Wed, 5 Apr 2006 18:57:03 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
	 <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Spoke too soon... the loop counter goes down to zero, but it looks
like the segments are added in order.

      for (int i =3D input.readInt(); i > 0; i--) { // read segmentInfos
        SegmentInfo si =3D
          new SegmentInfo(input.readString(), input.readInt(), directory);
        addElement(si);
      }

On 4/5/06, Yonik Seeley <yseeley@gmail.com> wrote:
> Ah Ha! I found the problem.
>
> SegmentInfos.read(Directory directory) reads the segment info in reverse =
order!
> I gotta go home now... I'll look into the right fix later (it depends
> on what else uses that method...)
>
> FYI, I managed to reproduce it with only 3 documents in each index.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 23:23:54 2006
Return-Path: <java-user-return-20001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87557 invoked from network); 5 Apr 2006 23:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 23:23:54 -0000
Received: (qmail 57317 invoked by uid 500); 5 Apr 2006 23:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57289 invoked by uid 500); 5 Apr 2006 23:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57278 invoked by uid 99); 5 Apr 2006 23:23:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 16:23:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO pproxy.gmail.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 16:23:48 -0700
Received: by pproxy.gmail.com with SMTP id s49so33044pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 16:23:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cphH9uKvf2qGPkpGHdyVg7Syi4l0OKv1ulzIhzptGZ4OiXhA81Ejz1bJLQM6v40zIsoQBT4A2FjQ1soXzwpFoYxTTYgs5EeQUpsqW/znAOsodzgHYEVSK5i+tJvi7h2havavh/xGWMRH/kCf2qR9fQ2N2KUUeCZDgg4qmdurEHs=
Received: by 10.35.12.13 with SMTP id p13mr229589pyi;
        Wed, 05 Apr 2006 16:23:28 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 16:23:28 -0700 (PDT)
Message-ID: <c68e39170604051623p2ee063b9u96987a9120e5d11c@mail.gmail.com>
Date: Wed, 5 Apr 2006 19:23:28 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <Pine.LNX.4.58.0604050959540.17699@hal.rescomp.berkeley.edu>
	 <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
	 <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
	 <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I realized what the real problem was during the drive home.

merged segments are added after all other segments, instead of the
spot the original segments resided.

I'll propose a patch soon...

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 05 23:35:26 2006
Return-Path: <java-user-return-20002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90278 invoked from network); 5 Apr 2006 23:35:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Apr 2006 23:35:26 -0000
Received: (qmail 69394 invoked by uid 500); 5 Apr 2006 23:35:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69368 invoked by uid 500); 5 Apr 2006 23:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69357 invoked by uid 99); 5 Apr 2006 23:35:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 16:35:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 16:35:20 -0700
Received: by pproxy.gmail.com with SMTP id s49so35531pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 16:35:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SdqrJDU6gkncrQadhqfPsdaF2z8ToMm42W8aZ9QVmTx3e/ADmqRkg6RWh4rPfjs6EpLm0iDsZxxV1uVo6s8RsWT9tbVXF0UJWHwRrHXyfJf5b0OxlipeGV3T36gSSsSoYBqy0I6jrvGI5LpkqDQI8FKCEZovreVh2fjWsto0NkY=
Received: by 10.35.127.7 with SMTP id e7mr250448pyn;
        Wed, 05 Apr 2006 16:35:00 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 16:35:00 -0700 (PDT)
Message-ID: <c68e39170604051635naf07ce3rc340d44344a54f47@mail.gmail.com>
Date: Wed, 5 Apr 2006 19:35:00 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051623p2ee063b9u96987a9120e5d11c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com> <443423DB.3040008@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
	 <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
	 <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
	 <c68e39170604051623p2ee063b9u96987a9120e5d11c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

OK, the following patch seems to work for me!
You might want to try it out on your larger test Dan.

The first part probably isn't necessary (the base=3Dstart instead of
start+1), but the second part is.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server



Index: org/apache/lucene/index/IndexWriter.java
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- org/apache/lucene/index/IndexWriter.java    (revision 391084)
+++ org/apache/lucene/index/IndexWriter.java    (working copy)
@@ -569,7 +569,7 @@

     // merge newly added segments in log(n) passes
     while (segmentInfos.size() > start+mergeFactor) {
-      for (int base =3D start+1; base < segmentInfos.size(); base++) {
+      for (int base =3D start; base < segmentInfos.size(); base++) {
         int end =3D Math.min(segmentInfos.size(), base+mergeFactor);
         if (end-base > 1)
           mergeSegments(base, end);
@@ -710,9 +710,9 @@
       infoStream.println(" into "+mergedName+" ("+mergedDocCount+" docs)")=
;
     }

-    for (int i =3D end-1; i >=3D minSegment; i--)     // remove old infos =
& add new

+    for (int i =3D end-1; i > minSegment; i--)     // remove old infos & a=
dd new
       segmentInfos.remove(i);
-    segmentInfos.addElement(new SegmentInfo(mergedName, mergedDocCount,
+    segmentInfos.set(minSegment, new SegmentInfo(mergedName, mergedDocCoun=
t,
                                             directory));

     // close readers before we attempt to delete now-obsolete segments

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 00:50:29 2006
Return-Path: <java-user-return-20003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23332 invoked from network); 6 Apr 2006 00:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 00:50:28 -0000
Received: (qmail 34835 invoked by uid 500); 6 Apr 2006 00:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34793 invoked by uid 500); 6 Apr 2006 00:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34779 invoked by uid 99); 6 Apr 2006 00:50:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 17:50:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 17:50:20 -0700
Received: by pproxy.gmail.com with SMTP id s49so12121pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 17:50:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=azVwE47fCu9+iv9ZZs6NA5WcXgv7WsQ/OyZ94WvdWORvczjZmqE9JRC1FfG6d6OzSwtfzxVNeTYTLToZUyE3n96GkKwZRQV/qCZtSVBfhh4It8YjzRH86nM3K07kUOpTyxcwfWzckPycd3L7MGM5YLds4b1pa9x8oesNRDhfePA=
Received: by 10.35.34.20 with SMTP id m20mr316237pyj;
        Wed, 05 Apr 2006 17:49:59 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 5 Apr 2006 17:49:59 -0700 (PDT)
Message-ID: <c68e39170604051749k709f8b38k21f54d129c9b9aa4@mail.gmail.com>
Date: Wed, 5 Apr 2006 20:49:59 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051635naf07ce3rc340d44344a54f47@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com>
	 <c68e39170604051317y2c3fe6e6udbd1572cece98e7c@mail.gmail.com>
	 <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
	 <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
	 <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
	 <c68e39170604051623p2ee063b9u96987a9120e5d11c@mail.gmail.com>
	 <c68e39170604051635naf07ce3rc340d44344a54f47@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

addIndexes(Dir[]) was the only user of mergeSegments() that passed an
endpoint that wasn't the end of the segment list, and hence the only
caller to mergeSegments() that will see a change of behavior.

Given that, I feel comfortable enough to commit this.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

On 4/5/06, Yonik Seeley <yseeley@gmail.com> wrote:
> OK, the following patch seems to work for me!
> You might want to try it out on your larger test Dan.
>
> The first part probably isn't necessary (the base=3Dstart instead of
> start+1), but the second part is.
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search Serv=
er
>
>
>
> Index: org/apache/lucene/index/IndexWriter.java
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> --- org/apache/lucene/index/IndexWriter.java    (revision 391084)
> +++ org/apache/lucene/index/IndexWriter.java    (working copy)
> @@ -569,7 +569,7 @@
>
>      // merge newly added segments in log(n) passes
>      while (segmentInfos.size() > start+mergeFactor) {
> -      for (int base =3D start+1; base < segmentInfos.size(); base++) {
> +      for (int base =3D start; base < segmentInfos.size(); base++) {
>          int end =3D Math.min(segmentInfos.size(), base+mergeFactor);
>          if (end-base > 1)
>            mergeSegments(base, end);
> @@ -710,9 +710,9 @@
>        infoStream.println(" into "+mergedName+" ("+mergedDocCount+" docs)=
");
>      }
>
> -    for (int i =3D end-1; i >=3D minSegment; i--)     // remove old info=
s & add new
>
> +    for (int i =3D end-1; i > minSegment; i--)     // remove old infos &=
 add new
>        segmentInfos.remove(i);
> -    segmentInfos.addElement(new SegmentInfo(mergedName, mergedDocCount,
> +    segmentInfos.set(minSegment, new SegmentInfo(mergedName, mergedDocCo=
unt,
>                                              directory));
>
>      // close readers before we attempt to delete now-obsolete segments
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 02:38:29 2006
Return-Path: <java-user-return-20004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67794 invoked from network); 6 Apr 2006 02:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 02:38:28 -0000
Received: (qmail 36578 invoked by uid 500); 6 Apr 2006 02:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36535 invoked by uid 500); 6 Apr 2006 02:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36523 invoked by uid 99); 6 Apr 2006 02:38:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 19:38:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 19:38:21 -0700
Received: by pproxy.gmail.com with SMTP id s49so31914pyc
        for <java-user@lucene.apache.org>; Wed, 05 Apr 2006 19:38:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AZZW9b58fShfFGanHz8x2s2os2mSV7yMfiatYMoXllhzhmwR0TuNuhIYX5eCmTvjb9cIVBZ1W2JbbUH3wSnwYj+GMjfELJjK84DkiNH0pCMAzwn8cQswzhm0bctOa2/0W3hCcB07T6qTiL297jrmW3Rd4NSgF0oeOlrxcFZKs34=
Received: by 10.35.127.7 with SMTP id e7mr419294pyn;
        Wed, 05 Apr 2006 19:38:00 -0700 (PDT)
Received: by 10.35.70.14 with HTTP; Wed, 5 Apr 2006 19:38:00 -0700 (PDT)
Message-ID: <82f04dc40604051938g2435f17en6a18e97b1f9b8695@mail.gmail.com>
Date: Wed, 5 Apr 2006 21:38:00 -0500
From: "Dan Armbrust" <daniel.armbrust.list@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Document order not being maintained?
In-Reply-To: <c68e39170604051749k709f8b38k21f54d129c9b9aa4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4433E119.4080101@gmail.com> <44342D15.9070603@gmail.com>
	 <c68e39170604051403m1a3470h78b0e80a63ead1f7@mail.gmail.com>
	 <44343CF6.4080908@gmail.com>
	 <c68e39170604051500x674c8b8exd10b799eb1bd1c5c@mail.gmail.com>
	 <c68e39170604051552j2fa424bdnf2b302d899fc46c4@mail.gmail.com>
	 <c68e39170604051557w6131e5b0l239f8c601c9418ab@mail.gmail.com>
	 <c68e39170604051623p2ee063b9u96987a9120e5d11c@mail.gmail.com>
	 <c68e39170604051635naf07ce3rc340d44344a54f47@mail.gmail.com>
	 <c68e39170604051749k709f8b38k21f54d129c9b9aa4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks guys.... as always... lucene (and especially the people behind
it) are top notch.

Less than 6 hours from the time I figured out that the bug was in
Lucene (and not my code, which is usually the case) - and its already
fixed (I'm going to assume - I'll test it tomorrow when I get to work)

Amazing.

Thanks again,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 04:43:57 2006
Return-Path: <java-user-return-20005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10828 invoked from network); 6 Apr 2006 04:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 04:43:57 -0000
Received: (qmail 40951 invoked by uid 500); 6 Apr 2006 04:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40924 invoked by uid 500); 6 Apr 2006 04:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40902 invoked by uid 99); 6 Apr 2006 04:43:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 21:43:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Apr 2006 21:43:48 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 11796B735C
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 14:43:21 +1000 (EST)
Message-ID: <44349CE9.6000603@nuix.com.au>
Date: Thu, 06 Apr 2006 14:45:29 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
References: <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com>
In-Reply-To: <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

mark harwood wrote:
>> Isn't that what Query.extractTerms is for?  Isn't it 
>> implimented by all primitive Queries?..
> 
> As of last week, yes. I changed the SpanQueries to
> implement this method and then refactored the
> Highlighter package's QueryTermExtractor to make use
> of this (it radically simplified the code in there).
> This change to rely on extractTerms also means that
> the highlighter now works properly with classes like
> FilteredQuery.

Very nice.  Yet another point I can add onto the huge list of reasons 
our app should update Lucene. :-)

Although I'd rather not rewrite the query first, it feels like it would 
use more memory than an extractTerms(IndexReader) method would.  Maybe 
I'm wrong on this, though.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 07:56:36 2006
Return-Path: <java-user-return-20006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6837 invoked from network); 6 Apr 2006 07:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 07:56:31 -0000
Received: (qmail 52744 invoked by uid 500); 6 Apr 2006 07:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52650 invoked by uid 500); 6 Apr 2006 07:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52480 invoked by uid 99); 6 Apr 2006 07:56:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 00:56:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 00:56:20 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FRPLQ-0002Om-VW
	for java-user@lucene.apache.org; Thu, 06 Apr 2006 00:55:58 -0700
Message-ID: <3779856.post@talk.nabble.com>
Date: Thu, 6 Apr 2006 00:55:56 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
In-Reply-To: <44349CE9.6000603@nuix.com.au>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com> <3746483.post@talk.nabble.com> <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com> <44330B73.7030601@nuix.com.au> <Pine.LNX.4.58.0604042207290.9728@hal.rescomp.berkeley.edu> <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com> <44349CE9.6000603@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


        HashSet terms = new HashSet();
        query.rewrite(reader).extractTerms(terms); 

Ok, but this delivers every term, not just a list of words the Levenshtein
algorithm produced with similarity. Regarding to the posts here in my opened
thread, you guis seem to be experienced programmers so, why you can't post a
code snippet as an example?
I'm asking that because probably I'm not so experienced in Lucene like you
and having an exaple would help .

Cheers

Simon Dietschi
--
View this message in context: http://www.nabble.com/highlighting---fuzzy-search-t1392775.html#a3779856
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 09:26:35 2006
Return-Path: <java-user-return-20007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61298 invoked from network); 6 Apr 2006 09:26:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 09:26:17 -0000
Received: (qmail 8974 invoked by uid 500); 6 Apr 2006 09:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8684 invoked by uid 500); 6 Apr 2006 09:25:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8667 invoked by uid 99); 6 Apr 2006 09:25:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 02:25:52 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.30] (HELO mailrelay.is.nl) (213.133.33.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 02:25:51 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by mailrelay.is.nl (CommuniGate Pro SMTP 4.3.5)
  with ESMTP id 14563822 for java-user@lucene.apache.org; Thu, 06 Apr 2006 11:25:28 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Optimize completely in memory with a FSDirectory?
Date: Thu, 6 Apr 2006 11:25:25 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A90A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Optimize completely in memory with a FSDirectory?
Thread-Index: AcZY3gIcaST7fMc5TyKbZN0oiouKRQAe8bBQ
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thanks for your suggestion. I thought about the same, but somehow it =
didn't seem like such a good idea... Now that I think about it, it would =
take the same IO load (in terms of flushing many megabytes to disk) as =
optimizing in memory with the FSDirectory.

Another weird thing we observed here is this:

During incremental updates to a previously optimized index, no matter =
what I set the merge factor at, it seems to optimize or possibly merge =
much sooner than it should.
More clearly:

I have an optimized index of around 150MB. I set merge factor to 300, =
maxmergedocs to Interger.MAX_VALUE, minmergedocs (maxbuffereddocs) to =
50000 (I have 40000 docs in the index), and still it merges after around =
50-80 new documents. If I understand merge factor right, it should not =
merge at all, but start a new segment after 300 new documents.

Of course this is a very artificial set of parameters, but I wanted to =
see what goes on. Could it have anything to do with the fact that I =
close the indexwriter after each batch of updates? Can anyone explain =
this?

max

> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
> Sent: Wednesday, April 05, 2006 20:23
> To: java-user@lucene.apache.org
> Subject: Re: Optimize completely in memory with a FSDirectory?
>=20
>=20
> On Mittwoch 05 April 2006 13:02, Max Pfingsthorn wrote:
>=20
> > The setMaxBufferedDocs and related parameters help a lot already to
> > fully exploit my RAM when indexing, but since I'm running a=20
> fairly small
> > index of around 40000 docs and I'm optimizing it relatively=20
> often, I was
> > wondering if there is any way to enforce complete in-memory
> > optimization.
>=20
> Maybe you could use a RAMDirectory and write it to disk using=20
> IndexWriter.addIndexes() from time to time?
>=20
> Regards
>  Daniel
>=20
> --=20
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 12:48:22 2006
Return-Path: <java-user-return-20008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70205 invoked from network); 6 Apr 2006 12:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 12:48:18 -0000
Received: (qmail 97881 invoked by uid 500); 6 Apr 2006 12:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97675 invoked by uid 500); 6 Apr 2006 12:48:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97359 invoked by uid 99); 6 Apr 2006 12:48:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 05:48:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.68] (HELO smtpout.mac.com) (17.250.248.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 05:48:07 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout01/MantshX 4.0) with ESMTP id k36Clj0P026738
	for <java-user@lucene.apache.org>; Thu, 6 Apr 2006 05:47:45 -0700 (PDT)
Received: from [192.168.1.110] (81-86-1-245.dsl.pipex.com [81.86.1.245])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k36ClgeO023059
	for <java-user@lucene.apache.org>; Thu, 6 Apr 2006 05:47:44 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <068EB53F-98B0-4A66-A4BC-5C8E394ADB9E@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Mailing List <java-user@lucene.apache.org>
From: Michael Dodson <mgdodson@mac.com>
Subject: nested phrase queries
Date: Thu, 6 Apr 2006 13:47:40 +0100
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can phrase queries be nested the same way boolean queries can be nested?

I want a user query to be translated into a boolean query (say, x AND  
(y OR z)), and I want  those terms to be within a certain distance of  
each other (approximately within the same sentence, so the slop would  
be about 7).   I then want to find documents where that phrase is  
within a certain distance of another term (in this case an image  
name).  So in pseudo code I would have something like

PhraseQuery query1
Set slop to 7

PhraseQuery query2
Set slop to 50

Add boolean terms to query1
Add query1 and imageName to query2

Search

I think I could break down my initial boolean query and turn query1  
into two phrase queries which are OR'ed together (so have query1a  
with "x AND y" with slop 7, and query1b with "x AND z" and slop 7,  
both added to a BooleanQuery) but I still need to combine that query  
with the image name in query2.

Thanks for the help.

Mike D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 13:57:20 2006
Return-Path: <java-user-return-20009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18869 invoked from network); 6 Apr 2006 13:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 13:57:19 -0000
Received: (qmail 42203 invoked by uid 500); 6 Apr 2006 13:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42172 invoked by uid 500); 6 Apr 2006 13:57:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42156 invoked by uid 99); 6 Apr 2006 13:57:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 06:57:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 06:57:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0E5CE33C10B; Thu,  6 Apr 2006 09:56:51 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id BDA7933C10A
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 09:56:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <068EB53F-98B0-4A66-A4BC-5C8E394ADB9E@mac.com>
References: <068EB53F-98B0-4A66-A4BC-5C8E394ADB9E@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D7F8189D-700B-453A-8B05-3085BBC7EA6C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: nested phrase queries
Date: Thu, 6 Apr 2006 09:56:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 6, 2006, at 8:47 AM, Michael Dodson wrote:
> Can phrase queries be nested the same way boolean queries can be  
> nested?

Yes... using SpanNearQuery instead of PhraseQuery.

> I want a user query to be translated into a boolean query (say, x  
> AND (y OR z)), and I want  those terms to be within a certain  
> distance of each other (approximately within the same sentence, so  
> the slop would be about 7).   I then want to find documents where  
> that phrase is within a certain distance of another term (in this  
> case an image name).  So in pseudo code I would have something like
>
> PhraseQuery query1
> Set slop to 7
>
> PhraseQuery query2
> Set slop to 50
>
> Add boolean terms to query1
> Add query1 and imageName to query2
>
> Search
>
> I think I could break down my initial boolean query and turn query1  
> into two phrase queries which are OR'ed together (so have query1a  
> with "x AND y" with slop 7, and query1b with "x AND z" and slop 7,  
> both added to a BooleanQuery) but I still need to combine that  
> query with the image name in query2.

QueryParser itself does not support the SpanQuery family, but the  
surround query parser (see contrib/surround in the codebase) does  
using an alternate syntax.  So depending on your needs, you may need  
to create some sort of parser to allow humans to enter such queries.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 14:09:11 2006
Return-Path: <java-user-return-20010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27938 invoked from network); 6 Apr 2006 14:09:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 14:09:10 -0000
Received: (qmail 63431 invoked by uid 500); 6 Apr 2006 14:09:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63397 invoked by uid 500); 6 Apr 2006 14:09:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63386 invoked by uid 99); 6 Apr 2006 14:09:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 07:09:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Apr 2006 07:09:02 -0700
Received: (qmail 31573 invoked by uid 60001); 6 Apr 2006 14:08:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AHAtA071Silz9XJBiJrhthzSEnLXNTscHngbUOPbrwrigk/0YG3zHDwe3w3HFAE6xtb1+K+OW9TlvNl8SjQjPIpyEklPsyJlLtaFiysv+6Y+zuRIXr9VXWPQk6R9SvTPGLEt0rGSLbR8DW+I0p7znL/JvlSZ0bsu9UlKgY3fWJ4=  ;
Message-ID: <20060406140839.31571.qmail@web26006.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Thu, 06 Apr 2006 15:08:39 BST
Date: Thu, 6 Apr 2006 15:08:39 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: nested phrase queries
To: java-user@lucene.apache.org
In-Reply-To: <D7F8189D-700B-453A-8B05-3085BBC7EA6C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The XMLQueryParser in the contrib section also handles
Spans (as well as a few other Lucene queries/filters
not represented by the standard QueryParser).

Here's an example of a complex query from the JUnit
test ....

<?xml version="1.0" encoding="UTF-8"?>
<SpanOr fieldName="contents">
 <SpanNear slop="8" inOrder="false" >		
  <SpanOr>
   <SpanTerm>killed</SpanTerm>
   <SpanTerm>died</SpanTerm>
   <SpanTerm>dead</SpanTerm>
  </SpanOr>
 <SpanOr>
 <!-- a less verbose way of declaring ORed
SpanTerms-->
  <SpanOrTerms>miner miners</SpanOrTerms>
  <SpanNear slop="6" inOrder="false">		
   <SpanTerm>mine</SpanTerm>					  
<SpanOrTerms>worker workers</SpanOrTerms>
  </SpanNear>
 </SpanOr>
 </SpanNear>	
  <SpanFirst end="10">
   <SpanOrTerms>fire burn</SpanOrTerms>
  </SpanFirst> 
</SpanOr>




--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> 
> On Apr 6, 2006, at 8:47 AM, Michael Dodson wrote:
> > Can phrase queries be nested the same way boolean
> queries can be  
> > nested?
> 
> Yes... using SpanNearQuery instead of PhraseQuery.
> 
> > I want a user query to be translated into a
> boolean query (say, x  
> > AND (y OR z)), and I want  those terms to be
> within a certain  
> > distance of each other (approximately within the
> same sentence, so  
> > the slop would be about 7).   I then want to find
> documents where  
> > that phrase is within a certain distance of
> another term (in this  
> > case an image name).  So in pseudo code I would
> have something like
> >
> > PhraseQuery query1
> > Set slop to 7
> >
> > PhraseQuery query2
> > Set slop to 50
> >
> > Add boolean terms to query1
> > Add query1 and imageName to query2
> >
> > Search
> >
> > I think I could break down my initial boolean
> query and turn query1  
> > into two phrase queries which are OR'ed together
> (so have query1a  
> > with "x AND y" with slop 7, and query1b with "x
> AND z" and slop 7,  
> > both added to a BooleanQuery) but I still need to
> combine that  
> > query with the image name in query2.
> 
> QueryParser itself does not support the SpanQuery
> family, but the  
> surround query parser (see contrib/surround in the
> codebase) does  
> using an alternate syntax.  So depending on your
> needs, you may need  
> to create some sort of parser to allow humans to
> enter such queries.
> 
> 	Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 14:16:58 2006
Return-Path: <java-user-return-20011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32763 invoked from network); 6 Apr 2006 14:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 14:16:49 -0000
Received: (qmail 85400 invoked by uid 500); 6 Apr 2006 14:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85376 invoked by uid 500); 6 Apr 2006 14:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85365 invoked by uid 99); 6 Apr 2006 14:16:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 07:16:39 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.196 as permitted sender)
Received: from [66.249.82.196] (HELO xproxy.gmail.com) (66.249.82.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 07:16:38 -0700
Received: by xproxy.gmail.com with SMTP id i26so108305wxd
        for <java-user@lucene.apache.org>; Thu, 06 Apr 2006 07:16:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=sKkRR+cEmaM2FcJC75HEMw20kyBpk4p+0TCrg9u8wL9+zTHGKzZfkMqtqVDVkoNQZx9yZ4kqPldqlIC9ElE+WGSi9fOgi/SLON/4bTk0qkHU212r+WuigXBgqhFNKo45kGAr6xnCHUCu6N5NQ6hSMYeNtTzQqBC2gUnEASrinkE=
Received: by 10.70.72.16 with SMTP id u16mr1267800wxa;
        Thu, 06 Apr 2006 07:16:17 -0700 (PDT)
Received: by 10.70.78.11 with HTTP; Thu, 6 Apr 2006 07:16:17 -0700 (PDT)
Message-ID: <e465bf5d0604060716v40eeec0at488d9f68caacca5a@mail.gmail.com>
Date: Thu, 6 Apr 2006 10:16:17 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: *easy* way to perform range searches on numeric values
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6636_19103026.1144332977830"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6636_19103026.1144332977830
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

How can I configure Lucene to handle numeric range searches?  (This questio=
n
has been asked 100 times, I'm sure.)

I've tried the suggestions on the SearchNumericalFields wiki page. This
seems to work for simple queries. Searching for "line:[1 to 10]" gives me
lines 1 thru 10 of the documents I am searching.

BUT it doesn't work if I want to search mutiple fields (e.g. making
CustomQueryParser extend MultiFieldQueryParser ).

Is there another way to configure numeric range searched aside from what is
posted on the wiki? If not, does anyone have any suggestions on how I would
go about getting a numeric range search to work on a mult-field search.

Any help is appreciated!

--Bill

------=_Part_6636_19103026.1144332977830--

From java-user-return-20012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 15:37:28 2006
Return-Path: <java-user-return-20012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86192 invoked from network); 6 Apr 2006 15:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 15:37:27 -0000
Received: (qmail 4356 invoked by uid 500); 6 Apr 2006 15:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4314 invoked by uid 500); 6 Apr 2006 15:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4302 invoked by uid 99); 6 Apr 2006 15:37:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 08:37:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 08:37:13 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1FRWzq-0007rj-7q
	for java-user@lucene.apache.org; Thu, 06 Apr 2006 09:06:10 -0700
Mime-Version: 1.0 (Apple Message framework v746.3)
Content-Transfer-Encoding: 7bit
Message-Id: <18296E1D-3091-491B-906D-D18A9E4B7CC1@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Marvin Humphrey <marvin@rectangular.com>
Subject: StopAnalyzer and apostrophes
Date: Thu, 6 Apr 2006 08:36:51 -0700
X-Mailer: Apple Mail (2.746.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greets,

It looks like StopAnalyzer tokenizes by letter, and doesn't handle  
apostrophes.  So, the input "I don't know" produces these tokens:

     don
     t
     know

Is that right?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 15:40:10 2006
Return-Path: <java-user-return-20013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87683 invoked from network); 6 Apr 2006 15:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 15:40:01 -0000
Received: (qmail 13127 invoked by uid 500); 6 Apr 2006 15:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13106 invoked by uid 500); 6 Apr 2006 15:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13088 invoked by uid 99); 6 Apr 2006 15:39:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 08:39:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.203.135.180] (HELO exfe02.ist.local) (130.203.135.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 08:39:48 -0700
Received: from [192.168.2.11] ([64.178.96.57]) by exfe02.ist.local with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Apr 2006 11:39:26 -0400
Message-ID: <4435362E.7010405@ist.psu.edu>
Date: Thu, 06 Apr 2006 11:39:26 -0400
From: Yang Sun <ysun@ist.psu.edu>
User-Agent: Mozilla Thunderbird 1.0.2-6 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Multiple Indexes Search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 06 Apr 2006 15:39:26.0714 (UTC) FILETIME=[49557DA0:01C65990]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Just wondering if there is anyway to search two indexes with relations 
like in the relational database. For example, in index1 there are fields 
"pid" and "content". in index2 there are fields "cid", "record", and 
"pid". I want to search keyword1 in content and keyword2 in record and  
they should also have the same pid. Is there anyway to do this? Or is 
there any relational database can be integrated with lucene?

Thanks,
Yang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 16:27:03 2006
Return-Path: <java-user-return-20014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15827 invoked from network); 6 Apr 2006 16:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 16:27:00 -0000
Received: (qmail 18222 invoked by uid 500); 6 Apr 2006 16:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17717 invoked by uid 500); 6 Apr 2006 16:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17706 invoked by uid 99); 6 Apr 2006 16:26:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 09:26:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 09:26:54 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1FRXlv-0007wf-Ri
	for java-user@lucene.apache.org; Thu, 06 Apr 2006 09:55:51 -0700
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <18296E1D-3091-491B-906D-D18A9E4B7CC1@rectangular.com>
References: <18296E1D-3091-491B-906D-D18A9E4B7CC1@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <746CF8AF-CA08-40F7-B30B-9BD10B313714@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: StopAnalyzer and apostrophes
Date: Thu, 6 Apr 2006 09:26:31 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wrote:

> It looks like StopAnalyzer tokenizes by letter, and doesn't handle  
> apostrophes.  So, the input "I don't know" produces these tokens:
>
>     don
>     t
>     know
>
> Is that right?

It's not right.  StopAnalyzer does tokenize letter by letter, but 't'  
is a stopword, so the tokens are:

     don
     know

Phew, that's much more useful.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 17:51:02 2006
Return-Path: <java-user-return-20015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65274 invoked from network); 6 Apr 2006 17:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 17:51:02 -0000
Received: (qmail 17429 invoked by uid 500); 6 Apr 2006 17:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17381 invoked by uid 500); 6 Apr 2006 17:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17322 invoked by uid 99); 6 Apr 2006 17:50:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 10:50:56 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.125.105] (HELO web38814.mail.mud.yahoo.com) (209.191.125.105)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Apr 2006 10:50:55 -0700
Received: (qmail 91502 invoked by uid 60001); 6 Apr 2006 17:50:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=P4lVNj9yZCNflTFyLOuj8k6/ePEeSjsY30sxPBiONLk1HuumLybzlhrUkpb1pO/t0S/4EjOaRYIKxgwwLR5eHoqamfVztOy6AoMCWNiLd6peR4yDJfTiDsR/dwpWTDB9yuSrTCrYejhHJEuH9uoWXsnXbGhYvv2P3DrdunWWOHE=  ;
Message-ID: <20060406175034.91500.qmail@web38814.mail.mud.yahoo.com>
Received: from [65.205.199.121] by web38814.mail.mud.yahoo.com via HTTP; Thu, 06 Apr 2006 10:50:34 PDT
Date: Thu, 6 Apr 2006 10:50:34 -0700 (PDT)
From: John Smith <john_smith9910@yahoo.com>
Subject: DateField vs DateTools
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1880331546-1144345834=:89933"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1880331546-1144345834=:89933
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi
   
  We are in the process of upgrading Lucene from 1.2 to 1.9.
   
  There used to be 2 methods in DateField.java in 1.2 
   
    public static String MIN_DATE_STRING() 
    public static String MAX_DATE_STRING() 
   
  This basically gave the minimum and the maximum dates we could index using Lucene. We used these dates for building DateFilters.
   
  Also if we got a date before 1970 to index, we would get an exception as  "Time too early" and if we got a date after the MAX_DATE_STRING, which kind of boiled down to some time in Apr 5188 or so... we would get an exception as "time too late". We used this functionality also.
   
  I have not drilled down into the implementation details too much, but what was the reason for getting rid of these methods in Lucene 1.9?
  
Is it still possible for us to get similar functionality in Lucene 1.9. If so, can anyone help us with this.
   
  Thank you
   
  JS

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1880331546-1144345834=:89933--

From java-user-return-20016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 18:15:48 2006
Return-Path: <java-user-return-20016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82881 invoked from network); 6 Apr 2006 18:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 18:15:47 -0000
Received: (qmail 79106 invoked by uid 500); 6 Apr 2006 18:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78668 invoked by uid 500); 6 Apr 2006 18:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78657 invoked by uid 99); 6 Apr 2006 18:15:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 11:15:41 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.125.92] (HELO web38801.mail.mud.yahoo.com) (209.191.125.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Apr 2006 11:15:40 -0700
Received: (qmail 23109 invoked by uid 60001); 6 Apr 2006 18:15:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=K3t22D2Fi+36xt1NqTCc3KmHvyfNXphonZdB6vxZNC5lkOCnZvfXwKSoiT3LK7hTHTH8C4hbt+MTOSvc7SL1qnDVshdlUYzxKiYTXWt8pWJP7fnV06v3hp9H2owFFUFt5kG6j0gINxAK1XKUlvVlXPKse/jo3eZUU3D5gAlsHnQ=  ;
Message-ID: <20060406181519.23107.qmail@web38801.mail.mud.yahoo.com>
Received: from [65.205.199.121] by web38801.mail.mud.yahoo.com via HTTP; Thu, 06 Apr 2006 11:15:19 PDT
Date: Thu, 6 Apr 2006 11:15:19 -0700 (PDT)
From: John Smith <john_smith9910@yahoo.com>
Subject: Question related to using FieldCacheImpl
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1845161916-1144347319=:22711"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1845161916-1144347319=:22711
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi
   
  I need to access min and max values of a particular field in the index, as soon as a searcher is initialized. I don't need it later. Looking at old newsgroup mails, I found a few recommendations.
   
  One was to keep the min and max fields external to the index. But this will not work for us. 
   
  Then there was the recommendation to use FieldCacheImpl, as sorting might be a little expensive. Looking at FieldCacheImpl implementation, I had a couple of questions. Sorry if this has been asked and answered before.
   
  If I use this method
   
   // inherit javadocs
  public String[] getStrings (IndexReader reader, String field)

  The string array I get back, is it guaranteed that the first non-null value I encounter in the array is the minimum value for this field and iterating through the array in the reverse order, the first non-null value I encounter is the max value for the field?
   
  Thank you
   
  JS
   
   
   

			
---------------------------------
Yahoo! Messenger with Voice. PC-to-Phone calls for ridiculously low rates.
--0-1845161916-1144347319=:22711--

From java-user-return-20017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 18:18:57 2006
Return-Path: <java-user-return-20017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86445 invoked from network); 6 Apr 2006 18:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 18:18:56 -0000
Received: (qmail 84509 invoked by uid 500); 6 Apr 2006 18:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84476 invoked by uid 500); 6 Apr 2006 18:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84463 invoked by uid 99); 6 Apr 2006 18:18:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 11:18:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.10] (HELO mis011.exch011.intermedia.net) (64.78.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 11:18:50 -0700
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Apr 2006 11:18:27 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C659A6.677AD2FD"
Subject: RE: Data structure of a Lucene Index
Date: Thu, 6 Apr 2006 11:16:47 -0700
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C19@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C19@ehost011-3.exch011.intermedia.net>
Thread-Topic: Data structure of a Lucene Index
Thread-Index: AcZS7Vd8A9Z2eApOTAayRi7IkjMCQAGuO0zG
References: <442A13D3.7080500@aol.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Apr 2006 18:18:27.0200 (UTC) FILETIME=[7FE82000:01C659A6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C659A6.677AD2FD
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Ideally, I'd love to see an article explaining both in detail: the index =
structure as well as the merge algorithm...

________________________________

From: Prasenjit Mukherjee [mailto:prasenjitm@aol.com]
Sent: Tue 3/28/2006 11:57 PM
To: java-user@lucene.apache.org
Subject: Data structure of a Lucene Index



It seems to me that lucene doesn't use B-tree for its indexing storage.
Any paper/article which explains the theory behind data-structure of=20
single index(segment).  I am not referring to the merge algorithm, I am
curious to know the storage structure of a single optimized lucene =
index.

Any pointer is greatly appreciated.
--Prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C659A6.677AD2FD
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C659A6.677AD2FD--

From java-user-return-20018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 18:44:58 2006
Return-Path: <java-user-return-20018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5885 invoked from network); 6 Apr 2006 18:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 18:44:57 -0000
Received: (qmail 37930 invoked by uid 500); 6 Apr 2006 18:44:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37907 invoked by uid 500); 6 Apr 2006 18:44:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37896 invoked by uid 99); 6 Apr 2006 18:44:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 11:44:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 11:44:50 -0700
Received: (qmail 2692 invoked from network); 6 Apr 2006 18:44:27 -0000
Received: from unknown (HELO p5496f9d5.dip.t-dialin.net) ([pbs]695637@[84.150.249.213])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Apr 2006 18:44:27 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: DateField vs DateTools
Date: Thu, 6 Apr 2006 20:44:25 +0200
User-Agent: KMail/1.8.2
References: <20060406175034.91500.qmail@web38814.mail.mud.yahoo.com>
In-Reply-To: <20060406175034.91500.qmail@web38814.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200604062044.25661@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Donnerstag 06 April 2006 19:50, John Smith wrote:

> =C2=A0 I have not drilled down into the implementation details too much, =
but
> what was the reason for getting rid of these methods in Lucene 1.9?

There is no limit on the given dates in DateTools (within the limits of=20
what Java's Calendar/Date class can do).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 19:33:25 2006
Return-Path: <java-user-return-20019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42925 invoked from network); 6 Apr 2006 19:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 19:33:23 -0000
Received: (qmail 41198 invoked by uid 500); 6 Apr 2006 19:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40861 invoked by uid 500); 6 Apr 2006 19:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40850 invoked by uid 99); 6 Apr 2006 19:33:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:33:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:33:15 -0700
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Apr 2006 12:32:14 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C659B0.8F0BBCD1"
Subject: RE: Distributed Lucene.. - clustering as a requirement
Date: Thu, 6 Apr 2006 12:30:27 -0700
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net>
Thread-Topic: Distributed Lucene.. - clustering as a requirement
Thread-Index: AcZBL3VFJaosBJrqQ0SZlgyYS2HJtgYgGPNo
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com> <fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Apr 2006 19:32:14.0804 (UTC) FILETIME=[CEF6E140:01C659B0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C659B0.8F0BBCD1
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I firmly believe that clustering support should be a part of Lucene.  =
We've tried implementing it ourselves and so far have been unsuccessful. =
 We tried storing Lucene indices in a database that is the back-end =
repository for our app in a clustered environment and could not overcome =
the indexing exceptions in our custom Directory implementation.
=20
I think it'd be perfect if some of the Lucene gurus were to implement an =
RDBMS-backed Directory and post it (in addition to the sleepycat.db =
package that's currently in contrib).  The nitty-gritties of dealing =
with Lucene indexing structures at a single byte level are just way too =
much trouble to deal with for application integrator like myself.
=20
- Dmitry

________________________________

From: Samuru Jackson [mailto:samurujackson@googlemail.com]
Sent: Mon 3/6/2006 10:05 AM
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene..



Do you plan to release some kind of a commerical product including an =
API?

I ask because I'm evaluating different technologies for a prototype
which is part of my diploma thesis.

The problem is that I have to deal with real huge data amounts and one
machine is simply not enough to handle those amounts of data.

Lucene seems to be a good choice but it won't scale up for real big
data amounts. So I thought about expanding the indexes over several
machines in junks so that it fits into the memory of those machines.

One machine should collect the results and calculate some kind of
score out of the delivered hits from the machines.

As I'm not familiar with the concrete mechanisms of Lucene this is
just a naive thought, but I think that such a clustering mechanism
could become a killer app.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C659B0.8F0BBCD1
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C659B0.8F0BBCD1--

From java-user-return-20020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 19:43:02 2006
Return-Path: <java-user-return-20020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47467 invoked from network); 6 Apr 2006 19:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 19:42:54 -0000
Received: (qmail 59555 invoked by uid 500); 6 Apr 2006 19:42:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59533 invoked by uid 500); 6 Apr 2006 19:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59522 invoked by uid 99); 6 Apr 2006 19:42:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:42:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:42:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EAC8933D94E; Thu,  6 Apr 2006 15:42:21 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 13D5833D94C
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 15:42:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060406140839.31571.qmail@web26006.mail.ukl.yahoo.com>
References: <20060406140839.31571.qmail@web26006.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <65BD4344-96AF-4002-98F4-01A6DD5FB96C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: nested phrase queries
Date: Thu, 6 Apr 2006 15:42:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Seeing this worries me we'll see users creating XML strings, then  
parsing them to get the desired query.  I've seen this lots with  
QueryParser, but it would be even more gross to see folks do this  
with the XML syntax.  So, here's my community service message for the  
day.... if you're creating a query in code, don't use a parser, use  
the Query subclasses API directly :)

The XMLQueryParser is a great thing for machine-machine  
communication, though!

	Erik

On Apr 6, 2006, at 10:08 AM, mark harwood wrote:

> The XMLQueryParser in the contrib section also handles
> Spans (as well as a few other Lucene queries/filters
> not represented by the standard QueryParser).
>
> Here's an example of a complex query from the JUnit
> test ....
>
> <?xml version="1.0" encoding="UTF-8"?>
> <SpanOr fieldName="contents">
>  <SpanNear slop="8" inOrder="false" >		
>   <SpanOr>
>    <SpanTerm>killed</SpanTerm>
>    <SpanTerm>died</SpanTerm>
>    <SpanTerm>dead</SpanTerm>
>   </SpanOr>
>  <SpanOr>
>  <!-- a less verbose way of declaring ORed
> SpanTerms-->
>   <SpanOrTerms>miner miners</SpanOrTerms>
>   <SpanNear slop="6" inOrder="false">		
>    <SpanTerm>mine</SpanTerm>					
> <SpanOrTerms>worker workers</SpanOrTerms>
>   </SpanNear>
>  </SpanOr>
>  </SpanNear>	
>   <SpanFirst end="10">
>    <SpanOrTerms>fire burn</SpanOrTerms>
>   </SpanFirst>
> </SpanOr>
>
>
>
>
> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>>
>> On Apr 6, 2006, at 8:47 AM, Michael Dodson wrote:
>>> Can phrase queries be nested the same way boolean
>> queries can be
>>> nested?
>>
>> Yes... using SpanNearQuery instead of PhraseQuery.
>>
>>> I want a user query to be translated into a
>> boolean query (say, x
>>> AND (y OR z)), and I want  those terms to be
>> within a certain
>>> distance of each other (approximately within the
>> same sentence, so
>>> the slop would be about 7).   I then want to find
>> documents where
>>> that phrase is within a certain distance of
>> another term (in this
>>> case an image name).  So in pseudo code I would
>> have something like
>>>
>>> PhraseQuery query1
>>> Set slop to 7
>>>
>>> PhraseQuery query2
>>> Set slop to 50
>>>
>>> Add boolean terms to query1
>>> Add query1 and imageName to query2
>>>
>>> Search
>>>
>>> I think I could break down my initial boolean
>> query and turn query1
>>> into two phrase queries which are OR'ed together
>> (so have query1a
>>> with "x AND y" with slop 7, and query1b with "x
>> AND z" and slop 7,
>>> both added to a BooleanQuery) but I still need to
>> combine that
>>> query with the image name in query2.
>>
>> QueryParser itself does not support the SpanQuery
>> family, but the
>> surround query parser (see contrib/surround in the
>> codebase) does
>> using an alternate syntax.  So depending on your
>> needs, you may need
>> to create some sort of parser to allow humans to
>> enter such queries.
>>
>> 	Erik
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
>
>
> 		
> ___________________________________________________________
> To help you stay safe and secure online, we've developed the all  
> new Yahoo! Security Centre. http://uk.security.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 19:44:42 2006
Return-Path: <java-user-return-20021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48887 invoked from network); 6 Apr 2006 19:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 19:44:42 -0000
Received: (qmail 65125 invoked by uid 500); 6 Apr 2006 19:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65100 invoked by uid 500); 6 Apr 2006 19:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65089 invoked by uid 99); 6 Apr 2006 19:44:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:44:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:44:35 -0700
Received: by pproxy.gmail.com with SMTP id s49so270989pyc
        for <java-user@lucene.apache.org>; Thu, 06 Apr 2006 12:44:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=afsWgi1/8Of0ixRkVTYW7563hGWNewB4SLHxuou7FXtirWH2tAPB021ddUHwMM8b/XOR++f8Ybq5XyKxgepONpKOWsIMPr1Cm8jfjxOGSKKBN9tWcHG6cbj14eWzsYisjThU8Z3ghufxnaMkjBEz+b/cx++chczPP5aCpKkdR+0=
Received: by 10.35.43.10 with SMTP id v10mr899713pyj;
        Thu, 06 Apr 2006 12:44:15 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Thu, 6 Apr 2006 12:44:15 -0700 (PDT)
Message-ID: <c68e39170604061244m161b7cefl4149ccf32259857b@mail.gmail.com>
Date: Thu, 6 Apr 2006 15:44:15 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question related to using FieldCacheImpl
In-Reply-To: <20060406181519.23107.qmail@web38801.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060406181519.23107.qmail@web38801.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/6/06, John Smith <john_smith9910@yahoo.com> wrote:
>    // inherit javadocs
>   public String[] getStrings (IndexReader reader, String field)
>
>   The string array I get back, is it guaranteed that the first non-null v=
alue I encounter in the array is the minimum value for this field and itera=
ting through the array in the reverse order, the first non-null value I enc=
ounter is the max value for the field?


I think you want getStringIndex()
StringIndex.lookup[1] is the first value, lookup[lookup.length-1] is the la=
st.


-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 19:55:04 2006
Return-Path: <java-user-return-20022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54315 invoked from network); 6 Apr 2006 19:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 19:55:01 -0000
Received: (qmail 85780 invoked by uid 500); 6 Apr 2006 19:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85759 invoked by uid 500); 6 Apr 2006 19:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85748 invoked by uid 99); 6 Apr 2006 19:54:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:54:55 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.125.99] (HELO web38808.mail.mud.yahoo.com) (209.191.125.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Apr 2006 12:54:54 -0700
Received: (qmail 33578 invoked by uid 60001); 6 Apr 2006 19:54:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=6axbtRjzyAX9xky2GNuPXMubZE9+N/PKor9L50IT+7J0yKpjMYrnWz6fjlKB+54cvw0IVweVZ3LifYePrsP/2IYUKC9z6ldZNT9NbGk72pK+SCuE04ndAyyyrQnKl+sgXQP5CImxx6toI/znCeEZpzhOGFwWgtfXOp/SBR/XDDo=  ;
Message-ID: <20060406195432.33576.qmail@web38808.mail.mud.yahoo.com>
Received: from [24.4.14.88] by web38808.mail.mud.yahoo.com via HTTP; Thu, 06 Apr 2006 12:54:32 PDT
Date: Thu, 6 Apr 2006 12:54:32 -0700 (PDT)
From: John Smith <john_smith9910@yahoo.com>
Subject: Re: Question related to using FieldCacheImpl
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170604061244m161b7cefl4149ccf32259857b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you

JS

--- Yonik Seeley <yseeley@gmail.com> wrote:

> On 4/6/06, John Smith <john_smith9910@yahoo.com>
> wrote:
> >    // inherit javadocs
> >   public String[] getStrings (IndexReader reader,
> String field)
> >
> >   The string array I get back, is it guaranteed
> that the first non-null value I encounter in the
> array is the minimum value for this field and
> iterating through the array in the reverse order,
> the first non-null value I encounter is the max
> value for the field?
> 
> 
> I think you want getStringIndex()
> StringIndex.lookup[1] is the first value,
> lookup[lookup.length-1] is the last.
> 
> 
> -Yonik
> http://incubator.apache.org/solr Solr, The Open
> Source Lucene Search Server
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 19:55:43 2006
Return-Path: <java-user-return-20023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54664 invoked from network); 6 Apr 2006 19:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 19:55:38 -0000
Received: (qmail 88038 invoked by uid 500); 6 Apr 2006 19:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88017 invoked by uid 500); 6 Apr 2006 19:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88006 invoked by uid 99); 6 Apr 2006 19:55:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:55:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nproxy.gmail.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 12:55:22 -0700
Received: by nproxy.gmail.com with SMTP id c29so174056nfb
        for <java-user@lucene.apache.org>; Thu, 06 Apr 2006 12:55:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TndlsNqAek2vi3W3WJVqPJPHK3/rJsdPIRVqYBQggCFvyCNqxYoNtd4a4xE4s0KGssVzMNswS1mwCGbFObJbUvUgO4HwBu3XtPkeqXN27kB7L9feGjq/lNP83JNrTTn12/n13rxd4t4iO1q06JWwVrjB+ZM8aek0SDgqRhfJEFA=
Received: by 10.48.231.19 with SMTP id d19mr876513nfh;
        Thu, 06 Apr 2006 12:55:01 -0700 (PDT)
Received: by 10.48.47.6 with HTTP; Thu, 6 Apr 2006 12:55:01 -0700 (PDT)
Message-ID: <88c6a6720604061255w48c690ebyd7a2892aae772798@mail.gmail.com>
Date: Thu, 6 Apr 2006 14:55:01 -0500
From: "Chris Lamprecht" <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene.. - clustering as a requirement
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com>
	 <fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com>
	 <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What about using lucene just for searching (i.e., no stored fields
except maybe one "ID" primary key field), and using an RDBMS for
storing the actual "documents"?  This way you're using lucene for what
lucene is best at, and using the database for what it's good at.  At
least up to a point -- RDBMSs have their limits too.  OR maybe if you
have a huge dataset, you might want to check out Nutch.

On 4/6/06, Dmitry Goldenberg <dmitry.goldenberg@weblayers.com> wrote:
> I firmly believe that clustering support should be a part of Lucene.  We'=
ve tried implementing it ourselves and so far have been unsuccessful.  We t=
ried storing Lucene indices in a database that is the back-end repository f=
or our app in a clustered environment and could not overcome the indexing e=
xceptions in our custom Directory implementation.
>
> I think it'd be perfect if some of the Lucene gurus were to implement an =
RDBMS-backed Directory and post it (in addition to the sleepycat.db package=
 that's currently in contrib).  The nitty-gritties of dealing with Lucene i=
ndexing structures at a single byte level are just way too much trouble to =
deal with for application integrator like myself.
>
> - Dmitry
>
> ________________________________
>
> From: Samuru Jackson [mailto:samurujackson@googlemail.com]
> Sent: Mon 3/6/2006 10:05 AM
> To: java-user@lucene.apache.org
> Subject: Re: Distributed Lucene..
>
>
>
> Do you plan to release some kind of a commerical product including an API=
?
>
> I ask because I'm evaluating different technologies for a prototype
> which is part of my diploma thesis.
>
> The problem is that I have to deal with real huge data amounts and one
> machine is simply not enough to handle those amounts of data.
>
> Lucene seems to be a good choice but it won't scale up for real big
> data amounts. So I thought about expanding the indexes over several
> machines in junks so that it fits into the memory of those machines.
>
> One machine should collect the results and calculate some kind of
> score out of the delivered hits from the machines.
>
> As I'm not familiar with the concrete mechanisms of Lucene this is
> just a naive thought, but I think that such a clustering mechanism
> could become a killer app.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 20:04:53 2006
Return-Path: <java-user-return-20024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59290 invoked from network); 6 Apr 2006 20:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 20:04:49 -0000
Received: (qmail 6925 invoked by uid 500); 6 Apr 2006 20:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6893 invoked by uid 500); 6 Apr 2006 20:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6882 invoked by uid 99); 6 Apr 2006 20:04:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 13:04:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.10] (HELO mis011.exch011.intermedia.net) (64.78.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 13:04:41 -0700
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Apr 2006 13:04:21 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C659B5.3170A7A5"
Subject: RE: Distributed Lucene.. - clustering as a requirement
Date: Thu, 6 Apr 2006 13:00:05 -0700
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net>
Thread-Topic: Distributed Lucene.. - clustering as a requirement
Thread-Index: AcZZs/OJAURqgIHuT7mdXQmoRaLSTwAAL8z7
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com><fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com><FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net> <88c6a6720604061255w48c690ebyd7a2892aae772798@mail.gmail.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Apr 2006 20:04:21.0009 (UTC) FILETIME=[4B127010:01C659B5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C659B5.3170A7A5
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I think it's a good idea.  For an enterprise-level application, Lucene =
appears too file-system and too byte-sequence-centric a technology.  =
Just my opinion.  The Directory API is just too low-level.
=20
I'd be OK with an RDBMS-based Directory implementation I could take and =
use.  But generally, I think the Lucene authors might like to take a =
step back and consider splitting off the repository and making it more =
extensible and high-level.  Perhaps something like JSR-170 (Java =
repository API) may be a good route to go....

________________________________

From: Chris Lamprecht [mailto:clamprecht@gmail.com]
Sent: Thu 4/6/2006 3:55 PM
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene.. - clustering as a requirement



What about using lucene just for searching (i.e., no stored fields
except maybe one "ID" primary key field), and using an RDBMS for
storing the actual "documents"?  This way you're using lucene for what
lucene is best at, and using the database for what it's good at.  At
least up to a point -- RDBMSs have their limits too.  OR maybe if you
have a huge dataset, you might want to check out Nutch.

On 4/6/06, Dmitry Goldenberg <dmitry.goldenberg@weblayers.com> wrote:
> I firmly believe that clustering support should be a part of Lucene.  =
We've tried implementing it ourselves and so far have been unsuccessful. =
 We tried storing Lucene indices in a database that is the back-end =
repository for our app in a clustered environment and could not overcome =
the indexing exceptions in our custom Directory implementation.
>
> I think it'd be perfect if some of the Lucene gurus were to implement =
an RDBMS-backed Directory and post it (in addition to the sleepycat.db =
package that's currently in contrib).  The nitty-gritties of dealing =
with Lucene indexing structures at a single byte level are just way too =
much trouble to deal with for application integrator like myself.
>
> - Dmitry
>
> ________________________________
>
> From: Samuru Jackson [mailto:samurujackson@googlemail.com]
> Sent: Mon 3/6/2006 10:05 AM
> To: java-user@lucene.apache.org
> Subject: Re: Distributed Lucene..
>
>
>
> Do you plan to release some kind of a commerical product including an =
API?
>
> I ask because I'm evaluating different technologies for a prototype
> which is part of my diploma thesis.
>
> The problem is that I have to deal with real huge data amounts and one
> machine is simply not enough to handle those amounts of data.
>
> Lucene seems to be a good choice but it won't scale up for real big
> data amounts. So I thought about expanding the indexes over several
> machines in junks so that it fits into the memory of those machines.
>
> One machine should collect the results and calculate some kind of
> score out of the delivered hits from the machines.
>
> As I'm not familiar with the concrete mechanisms of Lucene this is
> just a naive thought, but I think that such a clustering mechanism
> could become a killer app.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C659B5.3170A7A5
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C659B5.3170A7A5--

From java-user-return-20025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 20:19:40 2006
Return-Path: <java-user-return-20025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68343 invoked from network); 6 Apr 2006 20:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 20:19:37 -0000
Received: (qmail 48065 invoked by uid 500); 6 Apr 2006 20:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48026 invoked by uid 500); 6 Apr 2006 20:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47982 invoked by uid 99); 6 Apr 2006 20:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 13:19:21 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.236] (HELO web30413.mail.mud.yahoo.com) (68.142.201.236)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Apr 2006 13:19:16 -0700
Received: (qmail 55342 invoked by uid 60001); 6 Apr 2006 20:18:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Vlmok+qE5vJSuhsECcNvRDjNuYpOqvqCbBwUTvmFyU51SntSCybT5mnlVJw1iEkBtORf0v9AKmnLcmXqUtxW98jaqwS0FX6BKswBMMTfnZmbaU5kgDRIHqr1K1iJMXnuYKkdUXvOqj9gwjJQVu0c7fdHZ5gq7pvJLAAGvJFYOfs=  ;
Message-ID: <20060406201855.55340.qmail@web30413.mail.mud.yahoo.com>
Received: from [202.152.172.1] by web30413.mail.mud.yahoo.com via HTTP; Thu, 06 Apr 2006 13:18:55 PDT
Date: Thu, 6 Apr 2006 13:18:55 -0700 (PDT)
From: inge santoso <ing3_as@yahoo.com>
Subject: Question about Lucene's search algorithm
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1130015200-1144354735=:15735"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1130015200-1144354735=:15735
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

    Hi  all,
  Im still new to Lucene. I'm in the last year of my bachelor degree in
  Computer Science. My final thesis is about indexing and searching in Lucene  1.4.3. I've read about Space Optimizations for Total Ranking paper. My main  question is : 
          1.    What  search algorithm Lucene implements? Would it implement inverted index search on  the Space Optimizations for Total Ranking paper? 
  
          2.  Which class in  Lucene that uses this search algorithm? 
  
      3. About Lucene scoring :
           score_d =  sum_t(tf_q * idf_t/ norm_q*tf_d* idf_t/ norm_d_t)
          What is the role  of norm_d_t? Is it equal to normalization for document(norm_d)?
               Does lengthNorm  affect lucene ranking? 
  
      It's confusing for me, so I'm hoping you can give us
  the answer so there wouldn't be any wrong perception about this search  algorithm in the future.
      Thank  you for reading my letter. I'm very thankful for your attention.
      Inge 
		
---------------------------------
New Yahoo! Messenger with Voice. Call regular phones from your PC and save big.
--0-1130015200-1144354735=:15735--

From java-user-return-20026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 20:19:55 2006
Return-Path: <java-user-return-20026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68465 invoked from network); 6 Apr 2006 20:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 20:19:53 -0000
Received: (qmail 49955 invoked by uid 500); 6 Apr 2006 20:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49932 invoked by uid 500); 6 Apr 2006 20:19:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49920 invoked by uid 99); 6 Apr 2006 20:19:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 13:19:47 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.35 as permitted sender)
Received: from [65.54.174.35] (HELO hotmail.com) (65.54.174.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 13:19:46 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 6 Apr 2006 13:19:25 -0700
Message-ID: <BAY103-F25FB72BCDFFDBBB1EECFADFEC80@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Thu, 06 Apr 2006 20:19:24 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <BAY103-F37E2D718DB7C1C1D2EC9A0FECB0@phx.gbl>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: doc.get("contents")
Date: Thu, 06 Apr 2006 20:19:24 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 06 Apr 2006 20:19:25.0870 (UTC) FILETIME=[666944E0:01C659B7]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear all

I got a java.lang.NullPointerException at 
java.io.StringReader.<init>(StringReader.java:33) error when processing the 
following code:

for (int i = 0; i < theHits.length(); i++)
{
Document doc = theHits.doc(i);
String contents = doc.get("contents") ;
TokenStream tokenStream = analyzer.tokenStream( "contents", new 
StringReader(contents)) ;
System.out.println(theHighlighter.getBestFragment(tokenStream, contents));
}

I used demo.IndexFiles to index my directory. Who can tell me what's wrong? 
Thanks a lot!

Miki



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 21:54:15 2006
Return-Path: <java-user-return-20027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21243 invoked from network); 6 Apr 2006 21:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 21:54:15 -0000
Received: (qmail 40395 invoked by uid 500); 6 Apr 2006 21:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39933 invoked by uid 500); 6 Apr 2006 21:54:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39916 invoked by uid 99); 6 Apr 2006 21:54:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 14:54:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.93.161.132] (HELO mail1.zvents.com) (216.93.161.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 14:54:08 -0700
Received: from Oblong.zvents.com (c-71-198-187-222.hsd1.ca.comcast.net [71.198.187.222])
	by mail1.zvents.com (Postfix) with ESMTP id BF6E29C2B5
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 14:53:47 -0700 (PDT)
Message-Id: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Thu, 06 Apr 2006 14:53:44 -0700
To: java-user@lucene.apache.org
From: Tom Hill <lucene-list@zvents.com>
Subject: Getting count of documents matching a query?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi -

Is there a fast way (not easy, but speedy) of getting the count of 
documents that match a query?

I need the count, and don't need the docs at this point. If I had a 
simple query, (e.g. "book") I can use docFreq(), and it's lightning 
fast. If I just run it as a query it's much slower. I'm just 
wondering if I did a custom scorer / similarity / hitcollector, how 
much faster than a query could I get it? Or is there a better way?

And I'm not entirely sure how to implement the above idea, pointers 
or samples or hints would be wonderful.

Thanks,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 21:59:10 2006
Return-Path: <java-user-return-20028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23447 invoked from network); 6 Apr 2006 21:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 21:59:10 -0000
Received: (qmail 53994 invoked by uid 500); 6 Apr 2006 21:58:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53961 invoked by uid 500); 6 Apr 2006 21:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53943 invoked by uid 99); 6 Apr 2006 21:58:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 14:58:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 14:58:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BEAE05B766; Thu,  6 Apr 2006 14:58:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BAF187F403
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 14:58:25 -0700 (PDT)
Date: Thu, 6 Apr 2006 14:58:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: doc.get("contents")
In-Reply-To: <BAY103-F25FB72BCDFFDBBB1EECFADFEC80@phx.gbl>
Message-ID: <Pine.LNX.4.58.0604061455250.1987@hal.rescomp.berkeley.edu>
References: <BAY103-F25FB72BCDFFDBBB1EECFADFEC80@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Fields, by default, are not stored.  if you look at the FileDocument.java
file in the demo, you should see that the contents field is created this
way...

    // Add the contents of the file to a field named "contents".  Specify a Reader,
    // so that the text of the file is tokenized and indexed, but not stored.
    // Note that FileReader expects the file to be in the system's default encoding.
    // If that's not the case searching for special characters will fail.
    doc.add(new Field("contents", new FileReader(f)));

..since it is not stored, the call to doc.get("contents") returns null ...
you're not checking for it to be null, before passing it to StringReader,
so you get the null pointer exception then.

You could change the code to made contents a stored field, but that would
make you index much bigger.  you could also open the orriginal file on
disk, and pass it to the analyzer for highlighting instead.


: Date: Thu, 06 Apr 2006 20:19:24 +0000
: From: miki sun <sun_miki@hotmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: doc.get("contents")
:
: Dear all
:
: I got a java.lang.NullPointerException at
: java.io.StringReader.<init>(StringReader.java:33) error when processing the
: following code:
:
: for (int i = 0; i < theHits.length(); i++)
: {
: Document doc = theHits.doc(i);
: String contents = doc.get("contents") ;
: TokenStream tokenStream = analyzer.tokenStream( "contents", new
: StringReader(contents)) ;
: System.out.println(theHighlighter.getBestFragment(tokenStream, contents));
: }
:
: I used demo.IndexFiles to index my directory. Who can tell me what's wrong?
: Thanks a lot!
:
: Miki
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 22:19:29 2006
Return-Path: <java-user-return-20029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32479 invoked from network); 6 Apr 2006 22:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 22:19:29 -0000
Received: (qmail 78170 invoked by uid 500); 6 Apr 2006 22:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78014 invoked by uid 500); 6 Apr 2006 22:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78003 invoked by uid 99); 6 Apr 2006 22:19:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 15:19:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 15:19:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5EAB05B76E; Thu,  6 Apr 2006 15:19:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 55F667F403
	for <java-user@lucene.apache.org>; Thu,  6 Apr 2006 15:19:03 -0700 (PDT)
Date: Thu, 6 Apr 2006 15:19:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Getting count of documents matching a query?
In-Reply-To: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com>
Message-ID: <Pine.LNX.4.58.0604061507400.4130@hal.rescomp.berkeley.edu>
References: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I need the count, and don't need the docs at this point. If I had a
: simple query, (e.g. "book") I can use docFreq(), and it's lightning
: fast. If I just run it as a query it's much slower. I'm just
: wondering if I did a custom scorer / similarity / hitcollector, how
: much faster than a query could I get it? Or is there a better way?

A custom HitCollector would be the first big win, something like this
would probably work...

   final int[] count = new int[1]
   searcher.search(query, new HitCollector() {
       public void collect(int doc, float score) {
          count[0]++;
       }
    });
    return count[0]

otherways you might be able to shave time would be...

  * if your query can be represented as in simple set logic logic (you
    don't seem to be concerned with score) then implimenting it as a
    Filter may be faster becuase it won't do any score calculation, just a
    simple match/no-match (which is what you seem to want) ... but it will
    definitely take up more memory then a query

  * if you customize your similarity so that every function returns 0 or 1
    you might shave a little bit of time off by skipping some of the math
    equations ... but i really doubt it.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 23:19:10 2006
Return-Path: <java-user-return-20030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59578 invoked from network); 6 Apr 2006 23:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 23:19:10 -0000
Received: (qmail 42771 invoked by uid 500); 6 Apr 2006 23:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42438 invoked by uid 500); 6 Apr 2006 23:19:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42427 invoked by uid 99); 6 Apr 2006 23:19:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 16:19:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 16:19:03 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 750B8B735C
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 09:18:35 +1000 (EST)
Message-ID: <4435A24F.3050808@nuix.com.au>
Date: Fri, 07 Apr 2006 09:20:47 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com> <3746483.post@talk.nabble.com> <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com> <44330B73.7030601@nuix.com.au> <Pine.LNX.4.58.0604042207290.9728@hal.rescomp.berkeley.edu> <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com> <44349CE9.6000603@nuix.com.au> <3779856.post@talk.nabble.com>
In-Reply-To: <3779856.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Fisheye wrote:
>         HashSet terms = new HashSet();
>         query.rewrite(reader).extractTerms(terms); 
> 
> Ok, but this delivers every term, not just a list of words the Levenshtein
> algorithm produced with similarity.

I asked a similar thing in the past about term highlighting in general, 
and apparently it's just as fast to get all terms and then highlight 
those terms in your text, as it is to determine which terms are in the 
text without looking at the text, and then highlight those.

The terms which aren't in the text just won't result in any highlights.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 06 23:21:52 2006
Return-Path: <java-user-return-20031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60566 invoked from network); 6 Apr 2006 23:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Apr 2006 23:21:51 -0000
Received: (qmail 45370 invoked by uid 500); 6 Apr 2006 23:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45345 invoked by uid 500); 6 Apr 2006 23:21:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45334 invoked by uid 99); 6 Apr 2006 23:21:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 16:21:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 16:21:44 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 2758BB735C
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 09:21:18 +1000 (EST)
Message-ID: <4435A2F1.9060208@nuix.com.au>
Date: Fri, 07 Apr 2006 09:23:29 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopAnalyzer and apostrophes
References: <18296E1D-3091-491B-906D-D18A9E4B7CC1@rectangular.com> <746CF8AF-CA08-40F7-B30B-9BD10B313714@rectangular.com>
In-Reply-To: <746CF8AF-CA08-40F7-B30B-9BD10B313714@rectangular.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Marvin Humphrey wrote:
> I wrote:
> 
>> It looks like StopAnalyzer tokenizes by letter, and doesn't handle 
>> apostrophes.  So, the input "I don't know" produces these tokens:
>>
>>     don
>>     t
>>     know
>>
>> Is that right?
> 
> It's not right.  StopAnalyzer does tokenize letter by letter, but 't' is 
> a stopword, so the tokens are:
> 
>     don
>     know
> 
> Phew, that's much more useful.

Naturally.  But if you actually cared about apostrophes you would be 
using StandardAnalyzer instead, right?

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 00:05:21 2006
Return-Path: <java-user-return-20032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81986 invoked from network); 7 Apr 2006 00:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 00:05:18 -0000
Received: (qmail 971 invoked by uid 500); 7 Apr 2006 00:05:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 878 invoked by uid 500); 7 Apr 2006 00:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 865 invoked by uid 99); 7 Apr 2006 00:05:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 17:05:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 17:05:06 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1FRevR-0008Yt-NE
	for java-user@lucene.apache.org; Thu, 06 Apr 2006 17:34:09 -0700
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <4435A2F1.9060208@nuix.com.au>
References: <18296E1D-3091-491B-906D-D18A9E4B7CC1@rectangular.com> <746CF8AF-CA08-40F7-B30B-9BD10B313714@rectangular.com> <4435A2F1.9060208@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8CF3862A-75C2-49ED-B4F0-E17441445C00@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: StopAnalyzer and apostrophes
Date: Thu, 6 Apr 2006 17:04:43 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 6, 2006, at 4:23 PM, Daniel Noll wrote:

> Marvin Humphrey wrote:
>> I wrote:
>>> It looks like StopAnalyzer tokenizes by letter, and doesn't  
>>> handle apostrophes.  So, the input "I don't know" produces these  
>>> tokens:
>>>
>>>     don
>>>     t
>>>     know
>>>
>>> Is that right?
>> It's not right.  StopAnalyzer does tokenize letter by letter, but  
>> 't' is a stopword, so the tokens are:
>>     don
>>     know
>> Phew, that's much more useful.
>
> Naturally.  But if you actually cared about apostrophes you would  
> be using StandardAnalyzer instead, right?

I'd be using PolyAnalyzer ;)

<http://www.rectangular.com/kinosearch/docs/devel/KinoSearch/Analysis/ 
PolyAnalyzer.html>

... unless I were trying to duplicate the behavior of StopAnalyzer  
for benchmarking purposes.

Cheers,

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 01:02:08 2006
Return-Path: <java-user-return-20033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5207 invoked from network); 7 Apr 2006 01:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 01:02:08 -0000
Received: (qmail 47618 invoked by uid 500); 7 Apr 2006 01:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47541 invoked by uid 500); 7 Apr 2006 01:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47500 invoked by uid 99); 7 Apr 2006 01:02:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 18:02:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Apr 2006 18:01:59 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 752ADB735C
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 11:01:31 +1000 (EST)
Message-ID: <4435BA6F.1090500@nuix.com.au>
Date: Fri, 07 Apr 2006 11:03:43 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Calling addDocument twice for the same document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all.

I have a situation where a Document is constructed with a bunch of 
strings and a couple of readers.  An error may occur while reading from 
the readers, and in these situations, we want to remove the reader and 
then try to index the same document again.

I've made a test case which creates a document containing only strings, 
and calls addDocument twice with that document.  This appears to behave 
as expected, but I'm wondering mainly if I'm making a bad assumption here.

The next step is probably more interesting: removing the readers.  At 
present, Document has no convenient way for us to remove these fields. 
As removeField() and removeFields() take a string, I can't use those 
because we only want to remove fields where there is a reader and no 
string, and these methods remove all fields with the given name.  And as 
fields() returns an Enumeration instead of an Iterator, we can't just 
iterate through and remove the ones we don't want.

What would be the easiest way out of that?  At the moment I'm thinking I 
will implement a fieldIterator() method that returns an Iterator, and 
then the code will loop through and remove() any fields which have a 
readerValue().

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 09:41:07 2006
Return-Path: <java-user-return-20034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80794 invoked from network); 7 Apr 2006 09:41:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 09:41:07 -0000
Received: (qmail 84858 invoked by uid 500); 7 Apr 2006 09:41:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84811 invoked by uid 500); 7 Apr 2006 09:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84800 invoked by uid 99); 7 Apr 2006 09:41:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 02:41:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 02:40:58 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FRnSH-0006IF-5c
	for java-user@lucene.apache.org; Fri, 07 Apr 2006 02:40:37 -0700
Message-ID: <3800664.post@talk.nabble.com>
Date: Fri, 7 Apr 2006 02:40:37 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Re: highlighting - fuzzy search
In-Reply-To: <4435A24F.3050808@nuix.com.au>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
References: <3743436.post@talk.nabble.com> <C4A9D038-F8D8-4094-8463-515C7B4E1C8D@ehatchersolutions.com> <3743994.post@talk.nabble.com> <92100F41-174A-4DE6-8846-6D5CF410A54F@ehatchersolutions.com> <3746483.post@talk.nabble.com> <961080E5-25B5-47F2-BB39-A7D42FC537D0@ehatchersolutions.com> <44330B73.7030601@nuix.com.au> <Pine.LNX.4.58.0604042207290.9728@hal.rescomp.berkeley.edu> <20060405082117.12313.qmail@web26008.mail.ukl.yahoo.com> <44349CE9.6000603@nuix.com.au> <3779856.post@talk.nabble.com> <4435A24F.3050808@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


yes, this might be a way, but in my case it would not work:

The probles is, that I have to return an exceprt (snippet) and the words to
be highlighted as two separate strings. So now I use highlighter and
getBestFragment to extract the excerpt, then I remove the inserted html tags
and return the string to my application.
In normal query mode I return the matching query string entered by the user.
My application then does the highlighting and displays all I need.
So if I do fuzzy search and want to go the same way as if I do normal
search, I need the similar words generated from the Levenshtein algorithm.

Another approach may be to extract the similar words automatically
highlighted in the returned fragment by lucene, before I let remove the html
tags...
--
View this message in context: http://www.nabble.com/highlighting---fuzzy-search-t1392775.html#a3800664
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 10:01:42 2006
Return-Path: <java-user-return-20035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92990 invoked from network); 7 Apr 2006 10:01:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 10:01:41 -0000
Received: (qmail 15899 invoked by uid 500); 7 Apr 2006 10:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15542 invoked by uid 500); 7 Apr 2006 10:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15531 invoked by uid 99); 7 Apr 2006 10:01:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 03:01:35 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.30] (HELO mailrelay.is.nl) (213.133.33.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 03:01:34 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by mailrelay.is.nl (CommuniGate Pro SMTP 4.3.5)
  with ESMTP id 14622049 for java-user@lucene.apache.org; Fri, 07 Apr 2006 12:01:10 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Optimize completely in memory with a FSDirectory?
Date: Fri, 7 Apr 2006 12:01:06 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C41A90C@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Optimize completely in memory with a FSDirectory?
Thread-Index: AcZY3gIcaST7fMc5TyKbZN0oiouKRQAe8bBQADPc4pA=
From: "Max Pfingsthorn" <m.pfingsthorn@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

Sorry for the noise, it was my own fault. After a look at the sources, I =
saw I misinterpreted the MaxBufferedDocs parameter.
IndexWriter.maybeMergeSegments() seems to always merge everything if it =
is set so high. For my iterative updates of the index, it seems that the =
standard setting of 10 is very good. This is because I close the =
IndexWriter after one batch of add's in order to delete stuff the next =
round. Closing the IndexWriter will behave like an optimize() if =
MaxBufferedDocs is set much higher than the number of added documents.

Anyway, I've learned to leave the default settings and call optimize() =
periodically (like each n added documents).

However, if you do one _huge_ indexing batch, it might be nice for you =
to tweak this parameter to use more memory while indexing.

Bye!
max

> -----Original Message-----
> From: Max Pfingsthorn=20
> Sent: Thursday, April 06, 2006 11:25
> To: java-user@lucene.apache.org
> Subject: RE: Optimize completely in memory with a FSDirectory?
>=20
>=20
> Hi,
>=20
> Thanks for your suggestion. I thought about the same, but=20
> somehow it didn't seem like such a good idea... Now that I=20
> think about it, it would take the same IO load (in terms of=20
> flushing many megabytes to disk) as optimizing in memory with=20
> the FSDirectory.
>=20
> Another weird thing we observed here is this:
>=20
> During incremental updates to a previously optimized index,=20
> no matter what I set the merge factor at, it seems to=20
> optimize or possibly merge much sooner than it should.
> More clearly:
>=20
> I have an optimized index of around 150MB. I set merge factor=20
> to 300, maxmergedocs to Interger.MAX_VALUE, minmergedocs=20
> (maxbuffereddocs) to 50000 (I have 40000 docs in the index),=20
> and still it merges after around 50-80 new documents. If I=20
> understand merge factor right, it should not merge at all,=20
> but start a new segment after 300 new documents.
>=20
> Of course this is a very artificial set of parameters, but I=20
> wanted to see what goes on. Could it have anything to do with=20
> the fact that I close the indexwriter after each batch of=20
> updates? Can anyone explain this?
>=20
> max
>=20
> > -----Original Message-----
> > From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
> > Sent: Wednesday, April 05, 2006 20:23
> > To: java-user@lucene.apache.org
> > Subject: Re: Optimize completely in memory with a FSDirectory?
> >=20
> >=20
> > On Mittwoch 05 April 2006 13:02, Max Pfingsthorn wrote:
> >=20
> > > The setMaxBufferedDocs and related parameters help a lot=20
> already to
> > > fully exploit my RAM when indexing, but since I'm running a=20
> > fairly small
> > > index of around 40000 docs and I'm optimizing it relatively=20
> > often, I was
> > > wondering if there is any way to enforce complete in-memory
> > > optimization.
> >=20
> > Maybe you could use a RAMDirectory and write it to disk using=20
> > IndexWriter.addIndexes() from time to time?
> >=20
> > Regards
> >  Daniel
> >=20
> > --=20
> > http://www.danielnaber.de
> >=20
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 10:47:15 2006
Return-Path: <java-user-return-20036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19718 invoked from network); 7 Apr 2006 10:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 10:47:14 -0000
Received: (qmail 91313 invoked by uid 500); 7 Apr 2006 10:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91251 invoked by uid 500); 7 Apr 2006 10:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91240 invoked by uid 99); 7 Apr 2006 10:47:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 03:47:07 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.14 as permitted sender)
Received: from [65.54.174.14] (HELO hotmail.com) (65.54.174.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 03:47:06 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 7 Apr 2006 03:46:45 -0700
Message-ID: <BAY103-F44E3EFA597A6A99C38A4FFEC90@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Fri, 07 Apr 2006 10:46:41 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <Pine.LNX.4.58.0604061455250.1987@hal.rescomp.berkeley.edu>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: doc.get("contents")
Date: Fri, 07 Apr 2006 10:46:41 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 07 Apr 2006 10:46:45.0761 (UTC) FILETIME=[909A7710:01C65A30]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris

I just realize the "contents" in the index is not the "contents" in the 
original document.

Miki

----Original Message Follows----
From: Chris Hostetter <hossman_lucene@fucit.org>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: doc.get("contents")
Date: Thu, 6 Apr 2006 14:58:25 -0700 (PDT)


Fields, by default, are not stored.  if you look at the FileDocument.java
file in the demo, you should see that the contents field is created this
way...

     // Add the contents of the file to a field named "contents".  Specify a 
Reader,
     // so that the text of the file is tokenized and indexed, but not 
stored.
     // Note that FileReader expects the file to be in the system's default 
encoding.
     // If that's not the case searching for special characters will fail.
     doc.add(new Field("contents", new FileReader(f)));

..since it is not stored, the call to doc.get("contents") returns null ...
you're not checking for it to be null, before passing it to StringReader,
so you get the null pointer exception then.

You could change the code to made contents a stored field, but that would
make you index much bigger.  you could also open the orriginal file on
disk, and pass it to the analyzer for highlighting instead.


: Date: Thu, 06 Apr 2006 20:19:24 +0000
: From: miki sun <sun_miki@hotmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: doc.get("contents")
:
: Dear all
:
: I got a java.lang.NullPointerException at
: java.io.StringReader.<init>(StringReader.java:33) error when processing 
the
: following code:
:
: for (int i = 0; i < theHits.length(); i++)
: {
: Document doc = theHits.doc(i);
: String contents = doc.get("contents") ;
: TokenStream tokenStream = analyzer.tokenStream( "contents", new
: StringReader(contents)) ;
: System.out.println(theHighlighter.getBestFragment(tokenStream, contents));
: }
:
: I used demo.IndexFiles to index my directory. Who can tell me what's 
wrong?
: Thanks a lot!
:
: Miki
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 14:07:19 2006
Return-Path: <java-user-return-20037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24209 invoked from network); 7 Apr 2006 14:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 14:07:14 -0000
Received: (qmail 52184 invoked by uid 500); 7 Apr 2006 14:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52128 invoked by uid 500); 7 Apr 2006 14:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52113 invoked by uid 99); 7 Apr 2006 14:07:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:07:01 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO pproxy.gmail.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:07:01 -0700
Received: by pproxy.gmail.com with SMTP id m51so487868pye
        for <java-user@lucene.apache.org>; Fri, 07 Apr 2006 07:06:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Rhz3fcoj/r0gvQpE349oC1SRalFf7IMQpJRdrJkSbXMFSHE+a32hAhTJ5aGyuL9CtkTes6XxiqZXbEigUnTkp3iNPjcA/bWN3nnESqmzZsMwh0JJeDd+mz/FYP4YDrqdfh4IWyCn4BeV1IzkkoakSNJaJy7UB8nxfqNwqHiyc8Y=
Received: by 10.35.15.11 with SMTP id s11mr1710980pyi;
        Fri, 07 Apr 2006 07:06:40 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Fri, 7 Apr 2006 07:06:40 -0700 (PDT)
Message-ID: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
Date: Fri, 7 Apr 2006 10:06:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: I just don't get wildcards at all.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27413_31416971.1144418800555"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27413_31416971.1144418800555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

OK, I know I'm asking you to write my code for me (or at least point me to
an example), but I'm at my wits end, so please rescue me....

This is a reprise of TooManyClauses. We have a large amount of text, and a
requirement to do a wildcard query. Of course, it's waaaay too big to use
Wildcard or the other "expanding" queries. They frighten me anyway.....

y'all pointed me at the ConstantScoreRangeQuery (CSRQ), but actually using
it is not making sense to me.

I just don't get how, for instance,  CSRQ helps me that much. Say I want to
search for big*er. I can use a CSRQ to get all the docs that include this
term, just by using biga and bigz as my min/max terms. But then I'm stuck. =
I
could iterate through all the docs returned, but that seems inefficient. No=
t
to mention that the HitCollector (?) class warns against this due to "an
order of magnitude" decrease in response time.

What I *want* is a way to, for each doc in the CSRQ, get to answer whether
it's a match. Really, on the order of a callback with the value that worked
for the CSRQ and the ability to return a yes/no or a ranking. Again, I can
interate all the docs matched, but this seems expensive.

Using filters doesn't really seem to do the trick for me either. If I
understand them properly, they allow me to set up a bitset for all the
documents that should be searched. All 1,000,000 of them? Or am I thinking
about this completely backwards? I have LIA, but I'm also wondering if
there's something in 1.9 that I haven't found yet.

Now, given how easy the rest of Lucene is to use, I assume that I'm
approaching this poorly, but I sure am stumped.

All that said, I'm quite Java-naieve, so please bear with me if this
question demonstrates my ignorance painfully.....

Thanks
Erick

------=_Part_27413_31416971.1144418800555--

From java-user-return-20038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 14:21:21 2006
Return-Path: <java-user-return-20038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32770 invoked from network); 7 Apr 2006 14:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 14:21:09 -0000
Received: (qmail 84113 invoked by uid 500); 7 Apr 2006 14:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84079 invoked by uid 500); 7 Apr 2006 14:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84067 invoked by uid 99); 7 Apr 2006 14:20:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:20:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.167.1.4] (HELO marmot.shef.ac.uk) (143.167.1.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:20:57 -0700
Received: from drake.shef.ac.uk ([143.167.2.64])
	by marmot.shef.ac.uk with esmtp (Exim 4.52)
	id 1FRrpE-0000M8-4x
	for java-user@lucene.apache.org; Fri, 07 Apr 2006 15:20:36 +0100
Received: from http by drake.shef.ac.uk with local (Exim 4.42)
	id 1FRrpD-0005uo-Ry
	for java-user@lucene.apache.org; Fri, 07 Apr 2006 15:20:35 +0100
Received: from drake.shef.ac.uk (drake.shef.ac.uk [143.167.2.64]) 
	by 143.167.2.64 (IMP) with HTTP 
	for <acp05tm@localhost>; Fri,  7 Apr 2006 15:20:35 +0100
Message-ID: <1144419635.44367533c9c44@webmail.shef.ac.uk>
Date: Fri,  7 Apr 2006 15:20:35 +0100
From: trupti mulajkar <acp05tm@sheffield.ac.uk>
To: java-user@lucene.apache.org
Subject: lucene indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
Organization: University of Sheffield
X-Originating-IP: 143.167.2.64
X-S0phie-Scan: No
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


hi 
can anyone suggest how to split files using lucene.
i am trying to index the TREC collection using lucene-1.4.3
i want lucene to read the multiple files within single TREC file and create an
index accordingly.

cheers,
trupti mulajkar
MSc Advanced Computer Science




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 14:28:35 2006
Return-Path: <java-user-return-20039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43571 invoked from network); 7 Apr 2006 14:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 14:28:34 -0000
Received: (qmail 98881 invoked by uid 500); 7 Apr 2006 14:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98595 invoked by uid 500); 7 Apr 2006 14:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98584 invoked by uid 99); 7 Apr 2006 14:28:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:28:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO pproxy.gmail.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 07:28:26 -0700
Received: by pproxy.gmail.com with SMTP id m51so493340pye
        for <java-user@lucene.apache.org>; Fri, 07 Apr 2006 07:28:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IFbpUPYHavBvrJJs+hGBbbssJ9oMf7uljb7Mf1DG7DQTy9lfW5tpK+pdSXxNBPHMR6TP9LjstVNmU8TN23uPWH+HeOlsH1SRyXJwZ0lWy8xygeZ2fTFSWh/KlOqYs7AKzilLiW8KKs4OfW4+U2gMrlGrBBaJLhxR0UL6Y7i+Kzk=
Received: by 10.35.14.1 with SMTP id r1mr1677921pyi;
        Fri, 07 Apr 2006 07:28:05 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Fri, 7 Apr 2006 07:28:05 -0700 (PDT)
Message-ID: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
Date: Fri, 7 Apr 2006 10:28:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Exception in WildCardQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27814_29529084.1144420085322"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27814_29529084.1144420085322
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

So I'm trying to do silly stuff, just to poke a bit at wildcard queries. So
sue me... But I ran across this....

And yes, I know that creating a wildcard query is dangerous and downright
silly when you don't have a wildcard in the term, but this still seems like
a case should, say, default to a simple query rather than throw an
exception....

Lucene 1.9.1

Query q1 =3D new WildcardQuery(new Term("Text", "a"));
.
.
.
Hits hits =3D searcher.search(q1);


Caught Exception
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(Unknown Source)
    at org.apache.lucene.search.WildcardTermEnum.<init>(
WildcardTermEnum.java:65)
    at org.apache.lucene.search.WildcardQuery.getEnum(WildcardQuery.java:38=
)
    at org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java
:54)
    at org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java
:137)
    at org.apache.lucene.search.Query.weight(Query.java:92)
    at org.apache.lucene.search.Hits.<init>(Hits.java:41)
    at org.apache.lucene.search.Searcher.search(Searcher.java:44)
    at org.apache.lucene.search.Searcher.search(Searcher.java:36)
    at QuickTest.main(QuickTest.java:45)



FWIW
Erick

------=_Part_27814_29529084.1144420085322--

From java-user-return-20040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 15:39:32 2006
Return-Path: <java-user-return-20040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82632 invoked from network); 7 Apr 2006 15:39:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 15:39:32 -0000
Received: (qmail 39909 invoked by uid 500); 7 Apr 2006 15:39:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39864 invoked by uid 500); 7 Apr 2006 15:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39853 invoked by uid 99); 7 Apr 2006 15:39:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 08:39:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 08:39:25 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.151965E2@mailer.syr.edu>; Fri, 7 Apr 2006 11:39:04 -0400
Message-ID: <44368798.8050508@syr.edu>
Date: Fri, 07 Apr 2006 11:39:04 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene indexing
References: <1144419635.44367533c9c44@webmail.shef.ac.uk>
In-Reply-To: <1144419635.44367533c9c44@webmail.shef.ac.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene does not provide this out of the box.  You will have to write a 
program to do it and feed the results to Lucene. 

If I remember right, these files are in XML, so you can probably use SAX 
or a pull parser. 

I think a number of TREC participants, in the past, have used Lucene, so 
you may be able to find someone on the web who is generous enough to 
have shared their implementation.

trupti mulajkar wrote:
> hi 
> can anyone suggest how to split files using lucene.
> i am trying to index the TREC collection using lucene-1.4.3
> i want lucene to read the multiple files within single TREC file and create an
> index accordingly.
>
> cheers,
> trupti mulajkar
> MSc Advanced Computer Science
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 17:20:37 2006
Return-Path: <java-user-return-20041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44431 invoked from network); 7 Apr 2006 17:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 17:20:36 -0000
Received: (qmail 9602 invoked by uid 500); 7 Apr 2006 17:20:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9565 invoked by uid 500); 7 Apr 2006 17:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9549 invoked by uid 99); 7 Apr 2006 17:20:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 10:20:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 10:20:27 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id EEBE7BACD10; Fri,  7 Apr 2006 10:20:06 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
Received: from [192.168.2.100] (cpe-70-95-226-234.san.res.rr.com [70.95.226.234])
	by mail.cbrese.com (Postfix) with ESMTP id 9809BBC6176
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 10:19:59 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Re: Getting count of documents matching a query?
Date: Fri, 7 Apr 2006 11:06:57 -0700
User-Agent: KMail/1.9.1
References: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com> <Pine.LNX.4.58.0604061507400.4130@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0604061507400.4130@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_BpqNEf2Ds/7RfiJ"
Message-Id: <200604071106.57130.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.3 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Boundary-00=_BpqNEf2Ds/7RfiJ
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just wrote some simple code to test this.

For my test I ran the test with 3 queries:
- A 3 term boolean
- A single term query with over 5000 hits
- A single term query with 0 hits

For each query I ran the ran 4 tests of 10,000 searches:
1) using hits.length to get the counts and the standard similarity
2) using hits.length to get the counts and a custom similarity
3) using HitCollector to get the counts and the standard similarity
4) using HitCollector to get the counts and a custom similarity

The custom similarity returns 0 for all methods.  
The results are kind of surprising. It doesn't look like the speed up is 
enough to make the change to our application.

Here are the results, the test class is also attached:

time (mills) 14095, useHC=false, standardSimilarity=true, count=47, 
query=abstract_recent:(genetically modified organism)
time (mills) 15406, useHC=false, standardSimilarity=false, count=0, 
query=abstract_recent:(genetically modified organism)
time (mills) 13768, useHC=true, standardSimilarity=true, count=47, 
query=abstract_recent:(genetically modified organism)
time (mills) 14404, useHC=true, standardSimilarity=false, count=47, 
query=abstract_recent:(genetically modified organism)


time (mills) 6790, useHC=false, standardSimilarity=true, count=5776, 
query=lname:smith
time (mills) 4901, useHC=false, standardSimilarity=false, count=0, 
query=lname:smith
time (mills) 5209, useHC=true, standardSimilarity=true, count=5776, 
query=lname:smith
time (mills) 5578, useHC=true, standardSimilarity=false, count=5776, 
query=lname:smith


time (mills) 47, useHC=false, standardSimilarity=true, count=0, 
query=lname:dfdsalkfjdsalkjflsa
time (mills) 37, useHC=false, standardSimilarity=false, count=0, 
query=lname:dfdsalkfjdsalkjflsa
time (mills) 41, useHC=true, standardSimilarity=true, count=0, 
query=lname:dfdsalkfjdsalkjflsa
time (mills) 198, useHC=true, standardSimilarity=false, count=0, 
query=lname:dfdsalkfjdsalkjflsa




On Thursday 06 April 2006 15:19, Chris Hostetter wrote:
> : I need the count, and don't need the docs at this point. If I had a
> : simple query, (e.g. "book") I can use docFreq(), and it's lightning
> : fast. If I just run it as a query it's much slower. I'm just
> : wondering if I did a custom scorer / similarity / hitcollector, how
> : much faster than a query could I get it? Or is there a better way?
>
> A custom HitCollector would be the first big win, something like this
> would probably work...
>
>    final int[] count = new int[1]
>    searcher.search(query, new HitCollector() {
>        public void collect(int doc, float score) {
>           count[0]++;
>        }
>     });
>     return count[0]
>
> otherways you might be able to shave time would be...
>
>   * if your query can be represented as in simple set logic logic (you
>     don't seem to be concerned with score) then implimenting it as a
>     Filter may be faster becuase it won't do any score calculation, just a
>     simple match/no-match (which is what you seem to want) ... but it will
>     definitely take up more memory then a query
>
>   * if you customize your similarity so that every function returns 0 or 1
>     you might shave a little bit of time off by skipping some of the math
>     equations ... but i really doubt it.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--Boundary-00=_BpqNEf2Ds/7RfiJ
Content-Type: text/x-java;
  charset="iso-8859-1";
  name="LuceneCountTest.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="LuceneCountTest.java"

import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.DefaultSimilarity;
import org.apache.lucene.search.HitCollector;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;

public class LuceneCountTest {

	public static void main(String[] args) throws Exception {

		testCounts("abstract_recent:(genetically modified organism)");
		
		testCounts("lname:smith");

		testCounts("lname:dfdsalkfjdsalkjflsa");

	}

	private static void testCounts(String queryString) throws Exception {

		testCount(queryString, false, true);
		testCount(queryString, false, false);
		testCount(queryString, true, true);
		testCount(queryString, true, false);
		
		System.out.println();
		System.out.println();
	}

	private static void testCount(String queryString, final boolean useHitCollector, 
			final boolean standardSimilarity) throws Exception {

		IndexSearcher searcher = createSearcher(standardSimilarity);
		
		QueryParser parser = new QueryParser("f", new SimpleAnalyzer());
		parser.setDefaultOperator(QueryParser.AND_OPERATOR);
		
		Query query = parser.parse(queryString);

		searcher.search(query);
		
		long startTime = System.currentTimeMillis();
		
		final int[] hitCounts = new int[1];
		for (int i = 0; i < 10000; i++) {
			hitCounts[0] = 0;
			if (useHitCollector) {
				searcher.search(query, new HitCollector() {
					@Override
					public void collect(int doc, float score) {
						hitCounts[0]++;
					}
				});
			} else {
				Hits hits = searcher.search(query);
				hitCounts[0] = hits.length();
			}
		}
		
		System.out.println("time (mills) " + (System.currentTimeMillis() - startTime) +
				", useHC=" + useHitCollector + 
				", standardSimilarity=" + standardSimilarity + 
				", count=" + hitCounts[0] +
				", query=" + queryString);
		
		searcher.close();
	}

	private static IndexSearcher createSearcher(final boolean standardSimilarity) throws Exception {

		String indexPath = "/usr/local/cs/scholaruniverse/global/data/cv18/version/lucene/person_profile";
		
		IndexSearcher searcher = new IndexSearcher(indexPath);
		searcher.setSimilarity(new DefaultSimilarity() {

			public float coord(int overlap, int maxOverlap) {
				if (standardSimilarity) {
					return super.coord(overlap, maxOverlap);
				} else {
					return 0f;
				}
			}

			public float idf(int docFreq, int numDocs) {
				if (standardSimilarity) {
					return super.idf(docFreq, numDocs);
				} else {
					return 0f;
				}
			}

			public float queryNorm(float sumOfSquaredWeights) {
				if (standardSimilarity) {
					return super.queryNorm(sumOfSquaredWeights);
				} else {
					return 0f;
				}
			}

			public float sloppyFreq(int distance) {
				if (standardSimilarity) {
					return super.sloppyFreq(distance);
				} else {
					return 0f;
				}
			}

			public float tf(float freq) {
				if (standardSimilarity) {
					return super.tf(freq);
				} else {
					return 0f;
				}
			}

		    public float lengthNorm(String field, int numTerms) {
				if (standardSimilarity) {
					return super.lengthNorm(field, numTerms);
				} else {
					return 0f;
				}
		    }
		});
		
		return searcher;
	}

}


--Boundary-00=_BpqNEf2Ds/7RfiJ
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Boundary-00=_BpqNEf2Ds/7RfiJ--

From java-user-return-20042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 18:15:14 2006
Return-Path: <java-user-return-20042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81020 invoked from network); 7 Apr 2006 18:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 18:15:12 -0000
Received: (qmail 48773 invoked by uid 500); 7 Apr 2006 18:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48710 invoked by uid 500); 7 Apr 2006 18:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48686 invoked by uid 99); 7 Apr 2006 18:14:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 11:14:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 11:14:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BD2A5B76E; Fri,  7 Apr 2006 11:14:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6B5EE7F404
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 11:14:24 -0700 (PDT)
Date: Fri, 7 Apr 2006 11:14:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Getting count of documents matching a query?
In-Reply-To: <200604071106.57130.mail@jasoncalabrese.com>
Message-ID: <Pine.LNX.4.58.0604071103370.21305@hal.rescomp.berkeley.edu>
References: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com>
 <Pine.LNX.4.58.0604061507400.4130@hal.rescomp.berkeley.edu>
 <200604071106.57130.mail@jasoncalabrese.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


first off: you should double check the correctness ofyour customized
similarity class.  I'm pretty sure it's resulting in a differnet set of
matches then the DefaultSimilarity because your tf function returns 0f
regardless of wether there is a match.  (when i said "every function
returns 0 or 1" i ment you acctually have to have the if (match) return 1
else 0 logic at a minimum)

second: these times really shocked me untill i realized you were
reporting the sum of the execution times for all 10000 iterations (whew!)

third: for queries this simple, i don't think you're going find much
differneces in speed between the differnet models, but if you elliminate
the Similarity as a variable (compare only #1 and #3 for each query), you
can see that HitCollector was fairly consistently "a little faster" then
using Hits (but i'll admit, i thought it would be "more faster")

I think if you tried bigger, more complex queries (nested booleans, with
mandatory/required clauses, span queries, booleans with 20 or more
optional clauses) you might see a bigger discrepency.

it's also not clear how big your test index is, as doug has pointed out
before, it can make a big difference in benchmarking.


: For each query I ran the ran 4 tests of 10,000 searches:
: 1) using hits.length to get the counts and the standard similarity
: 2) using hits.length to get the counts and a custom similarity
: 3) using HitCollector to get the counts and the standard similarity
: 4) using HitCollector to get the counts and a custom similarity
:
: The custom similarity returns 0 for all methods.
: The results are kind of surprising. It doesn't look like the speed up is
: enough to make the change to our application.
:
: Here are the results, the test class is also attached:
:
: time (mills) 14095, useHC=false, standardSimilarity=true, count=47,
: query=abstract_recent:(genetically modified organism)
: time (mills) 15406, useHC=false, standardSimilarity=false, count=0,
: query=abstract_recent:(genetically modified organism)
: time (mills) 13768, useHC=true, standardSimilarity=true, count=47,
: query=abstract_recent:(genetically modified organism)
: time (mills) 14404, useHC=true, standardSimilarity=false, count=47,
: query=abstract_recent:(genetically modified organism)
:
:
: time (mills) 6790, useHC=false, standardSimilarity=true, count=5776,
: query=lname:smith
: time (mills) 4901, useHC=false, standardSimilarity=false, count=0,
: query=lname:smith
: time (mills) 5209, useHC=true, standardSimilarity=true, count=5776,
: query=lname:smith
: time (mills) 5578, useHC=true, standardSimilarity=false, count=5776,
: query=lname:smith
:
:
: time (mills) 47, useHC=false, standardSimilarity=true, count=0,
: query=lname:dfdsalkfjdsalkjflsa
: time (mills) 37, useHC=false, standardSimilarity=false, count=0,
: query=lname:dfdsalkfjdsalkjflsa
: time (mills) 41, useHC=true, standardSimilarity=true, count=0,
: query=lname:dfdsalkfjdsalkjflsa
: time (mills) 198, useHC=true, standardSimilarity=false, count=0,
: query=lname:dfdsalkfjdsalkjflsa
:
:
:
:
: On Thursday 06 April 2006 15:19, Chris Hostetter wrote:
: > : I need the count, and don't need the docs at this point. If I had a
: > : simple query, (e.g. "book") I can use docFreq(), and it's lightning
: > : fast. If I just run it as a query it's much slower. I'm just
: > : wondering if I did a custom scorer / similarity / hitcollector, how
: > : much faster than a query could I get it? Or is there a better way?
: >
: > A custom HitCollector would be the first big win, something like this
: > would probably work...
: >
: >    final int[] count = new int[1]
: >    searcher.search(query, new HitCollector() {
: >        public void collect(int doc, float score) {
: >           count[0]++;
: >        }
: >     });
: >     return count[0]
: >
: > otherways you might be able to shave time would be...
: >
: >   * if your query can be represented as in simple set logic logic (you
: >     don't seem to be concerned with score) then implimenting it as a
: >     Filter may be faster becuase it won't do any score calculation, just a
: >     simple match/no-match (which is what you seem to want) ... but it will
: >     definitely take up more memory then a query
: >
: >   * if you customize your similarity so that every function returns 0 or 1
: >     you might shave a little bit of time off by skipping some of the math
: >     equations ... but i really doubt it.
: >
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 20:39:19 2006
Return-Path: <java-user-return-20043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76318 invoked from network); 7 Apr 2006 20:39:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 20:39:19 -0000
Received: (qmail 11948 invoked by uid 500); 7 Apr 2006 20:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11907 invoked by uid 500); 7 Apr 2006 20:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11896 invoked by uid 99); 7 Apr 2006 20:39:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 13:39:12 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wproxy.gmail.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 13:39:12 -0700
Received: by wproxy.gmail.com with SMTP id i5so679564wra
        for <java-user@lucene.apache.org>; Fri, 07 Apr 2006 13:38:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NlM7JoD3ozTqyvBtq0Y68/tVv7DDv6WZ2dEwHCDO3dBY9ex1BYXTWfOvhBMGHMqT5UFsSL0dPfPhIgZrRQPFFsPofuudZKlqQAVbvAHO5/OqTIOqaxWEDgakOHwnYWv8MonprCp4VUBb9hqEmiGzPPFKWCm72/E6KmMMihAWIcg=
Received: by 10.65.147.2 with SMTP id z2mr1198179qbn;
        Fri, 07 Apr 2006 13:38:50 -0700 (PDT)
Received: by 10.65.248.6 with HTTP; Fri, 7 Apr 2006 13:38:50 -0700 (PDT)
Message-ID: <abe188f20604071338m51c226a1sff7f9c2a5b1e980e@mail.gmail.com>
Date: Fri, 7 Apr 2006 15:38:50 -0500
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Sandbox - SearchBean
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19991_21275089.1144442330267"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19991_21275089.1144442330267
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Can someone tell me where I can find the source code for SearchBean (Lucene
Sandbox)?

Thanks,
--Rajesh

------=_Part_19991_21275089.1144442330267--

From java-user-return-20044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 22:24:34 2006
Return-Path: <java-user-return-20044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28985 invoked from network); 7 Apr 2006 22:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 22:24:33 -0000
Received: (qmail 42842 invoked by uid 500); 7 Apr 2006 22:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42801 invoked by uid 500); 7 Apr 2006 22:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42789 invoked by uid 99); 7 Apr 2006 22:24:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 15:24:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 15:24:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A93575B76E; Fri,  7 Apr 2006 15:24:06 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A2F357F403
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 15:24:06 -0700 (PDT)
Date: Fri, 7 Apr 2006 15:24:06 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Sandbox - SearchBean
In-Reply-To: <abe188f20604071338m51c226a1sff7f9c2a5b1e980e@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604071522330.642@hal.rescomp.berkeley.edu>
References: <abe188f20604071338m51c226a1sff7f9c2a5b1e980e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


The "Lucene Sandbox" is also known as the "Lucene contrib directory" which
as of 1.9 is included in the core distribution (with each contrib module
in it's own jar)

however, there does not appear to be anything named "SearchBean" in
contrib at the moment.


: Date: Fri, 7 Apr 2006 15:38:50 -0500
: From: Rajesh Munavalli <findmath@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Lucene Sandbox - SearchBean
:
: Can someone tell me where I can find the source code for SearchBean (Lucene
: Sandbox)?
:
: Thanks,
: --Rajesh
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 22:35:33 2006
Return-Path: <java-user-return-20045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33448 invoked from network); 7 Apr 2006 22:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 22:35:32 -0000
Received: (qmail 53603 invoked by uid 500); 7 Apr 2006 22:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53577 invoked by uid 500); 7 Apr 2006 22:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53566 invoked by uid 99); 7 Apr 2006 22:35:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 15:35:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 15:35:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DBA2333D95C; Fri,  7 Apr 2006 18:35:05 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 81F7933D925
	for <java-user@lucene.apache.org>; Fri,  7 Apr 2006 18:35:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <abe188f20604071338m51c226a1sff7f9c2a5b1e980e@mail.gmail.com>
References: <abe188f20604071338m51c226a1sff7f9c2a5b1e980e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE824703-86E6-46BD-9F8A-238FE3538ED3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene Sandbox - SearchBean
Date: Fri, 7 Apr 2006 18:34:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There used to be a such a beast, and to get at it you'll need to  
resurrect it from the jakarta-lucene-sandbox CVS repository attic.   
We (well, I, but no one objected) chose not to bring it over as it  
was not a best-practice recommended way to work with Lucene search  
results.  It had its own sorting mechanism that was vastly inferior  
to the current built-in sorting that came along in Lucene 1.4.

If you're running into an issue in using Lucene, ask here and I'm  
sure we can work it out without you needing to locate SearchBean.

	Erik

On Apr 7, 2006, at 4:38 PM, Rajesh Munavalli wrote:

> Can someone tell me where I can find the source code for SearchBean  
> (Lucene
> Sandbox)?
>
> Thanks,
> --Rajesh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 07 23:32:10 2006
Return-Path: <java-user-return-20046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61284 invoked from network); 7 Apr 2006 23:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Apr 2006 23:32:09 -0000
Received: (qmail 18547 invoked by uid 500); 7 Apr 2006 23:32:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18475 invoked by uid 500); 7 Apr 2006 23:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18442 invoked by uid 99); 7 Apr 2006 23:32:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 16:32:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.167.1.4] (HELO marmot.shef.ac.uk) (143.167.1.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 16:31:59 -0700
Received: from drake.shef.ac.uk ([143.167.2.64])
	by marmot.shef.ac.uk with esmtp (Exim 4.52)
	id 1FS0QU-0001M2-3m
	for java-user@lucene.apache.org; Sat, 08 Apr 2006 00:31:38 +0100
Received: from http by drake.shef.ac.uk with local (Exim 4.42)
	id 1FS0QU-0001ZP-0a
	for java-user@lucene.apache.org; Sat, 08 Apr 2006 00:31:38 +0100
Received: from drake.shef.ac.uk (drake.shef.ac.uk [143.167.2.64]) 
	by 143.167.2.64 (IMP) with HTTP 
	for <acp05tm@localhost>; Sat,  8 Apr 2006 00:31:37 +0100
Message-ID: <1144452697.4436f659ef2c8@webmail.shef.ac.uk>
Date: Sat,  8 Apr 2006 00:31:37 +0100
From: trupti mulajkar <acp05tm@sheffield.ac.uk>
To: java-user@lucene.apache.org
Subject: Indexing Problems
References: <6.2.3.4.0.20060406144717.01e03aa0@mail1.zvents.com> <Pine.LNX.4.58.0604061507400.4130@hal.rescomp.berkeley.edu> <200604071106.57130.mail@jasoncalabrese.com> <Pine.LNX.4.58.0604071103370.21305@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0604071103370.21305@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
Organization: University of Sheffield
X-Originating-IP: 143.167.2.64
X-S0phie-Scan: No
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello,

i have modified the IndexFiles.java to read the document numbers from within the
TREC files, which are also being read correctly, however the index fails to
create the .cfs file.
thus the search query does not return the correct document number.
any suggestions how this can be sorted?

cheers,
trupti mulajkar
MSc Advanced Computer Science


Quoting Chris Hostetter <hossman_lucene@fucit.org>:

> 
> first off: you should double check the correctness ofyour customized
> similarity class.  I'm pretty sure it's resulting in a differnet set of
> matches then the DefaultSimilarity because your tf function returns 0f
> regardless of wether there is a match.  (when i said "every function
> returns 0 or 1" i ment you acctually have to have the if (match) return 1
> else 0 logic at a minimum)
> 
> second: these times really shocked me untill i realized you were
> reporting the sum of the execution times for all 10000 iterations (whew!)
> 
> third: for queries this simple, i don't think you're going find much
> differneces in speed between the differnet models, but if you elliminate
> the Similarity as a variable (compare only #1 and #3 for each query), you
> can see that HitCollector was fairly consistently "a little faster" then
> using Hits (but i'll admit, i thought it would be "more faster")
> 
> I think if you tried bigger, more complex queries (nested booleans, with
> mandatory/required clauses, span queries, booleans with 20 or more
> optional clauses) you might see a bigger discrepency.
> 
> it's also not clear how big your test index is, as doug has pointed out
> before, it can make a big difference in benchmarking.
> 
> 
> : For each query I ran the ran 4 tests of 10,000 searches:
> : 1) using hits.length to get the counts and the standard similarity
> : 2) using hits.length to get the counts and a custom similarity
> : 3) using HitCollector to get the counts and the standard similarity
> : 4) using HitCollector to get the counts and a custom similarity
> :
> : The custom similarity returns 0 for all methods.
> : The results are kind of surprising. It doesn't look like the speed up is
> : enough to make the change to our application.
> :
> : Here are the results, the test class is also attached:
> :
> : time (mills) 14095, useHC=false, standardSimilarity=true, count=47,
> : query=abstract_recent:(genetically modified organism)
> : time (mills) 15406, useHC=false, standardSimilarity=false, count=0,
> : query=abstract_recent:(genetically modified organism)
> : time (mills) 13768, useHC=true, standardSimilarity=true, count=47,
> : query=abstract_recent:(genetically modified organism)
> : time (mills) 14404, useHC=true, standardSimilarity=false, count=47,
> : query=abstract_recent:(genetically modified organism)
> :
> :
> : time (mills) 6790, useHC=false, standardSimilarity=true, count=5776,
> : query=lname:smith
> : time (mills) 4901, useHC=false, standardSimilarity=false, count=0,
> : query=lname:smith
> : time (mills) 5209, useHC=true, standardSimilarity=true, count=5776,
> : query=lname:smith
> : time (mills) 5578, useHC=true, standardSimilarity=false, count=5776,
> : query=lname:smith
> :
> :
> : time (mills) 47, useHC=false, standardSimilarity=true, count=0,
> : query=lname:dfdsalkfjdsalkjflsa
> : time (mills) 37, useHC=false, standardSimilarity=false, count=0,
> : query=lname:dfdsalkfjdsalkjflsa
> : time (mills) 41, useHC=true, standardSimilarity=true, count=0,
> : query=lname:dfdsalkfjdsalkjflsa
> : time (mills) 198, useHC=true, standardSimilarity=false, count=0,
> : query=lname:dfdsalkfjdsalkjflsa
> :
> :
> :
> :
> : On Thursday 06 April 2006 15:19, Chris Hostetter wrote:
> : > : I need the count, and don't need the docs at this point. If I had a
> : > : simple query, (e.g. "book") I can use docFreq(), and it's lightning
> : > : fast. If I just run it as a query it's much slower. I'm just
> : > : wondering if I did a custom scorer / similarity / hitcollector, how
> : > : much faster than a query could I get it? Or is there a better way?
> : >
> : > A custom HitCollector would be the first big win, something like this
> : > would probably work...
> : >
> : >    final int[] count = new int[1]
> : >    searcher.search(query, new HitCollector() {
> : >        public void collect(int doc, float score) {
> : >           count[0]++;
> : >        }
> : >     });
> : >     return count[0]
> : >
> : > otherways you might be able to shave time would be...
> : >
> : >   * if your query can be represented as in simple set logic logic (you
> : >     don't seem to be concerned with score) then implimenting it as a
> : >     Filter may be faster becuase it won't do any score calculation, just
> a
> : >     simple match/no-match (which is what you seem to want) ... but it
> will
> : >     definitely take up more memory then a query
> : >
> : >   * if you customize your similarity so that every function returns 0 or
> 1
> : >     you might shave a little bit of time off by skipping some of the
> math
> : >     equations ... but i really doubt it.
> : >
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 00:53:02 2006
Return-Path: <java-user-return-20047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92941 invoked from network); 8 Apr 2006 00:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 00:53:02 -0000
Received: (qmail 79243 invoked by uid 500); 8 Apr 2006 00:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79207 invoked by uid 500); 8 Apr 2006 00:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79193 invoked by uid 99); 8 Apr 2006 00:52:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 17:52:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pepone.onrez@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nproxy.gmail.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Apr 2006 17:52:54 -0700
Received: by nproxy.gmail.com with SMTP id p77so348651nfc
        for <java-user@lucene.apache.org>; Fri, 07 Apr 2006 17:52:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=iqcisZ3cXslSeKAcljnDF2ld74Wsp8r6+1Ap4z6caFjTYoxWW6FGEd5+ahtreNvExFcmP/IL+RW0p6wF00WLE6wMUF12XRbki40Cx7K2X0ABimo/ACNQ1zWPH15GWygeErI3uHF77iQv6K6US8679SpsJPZMiMDwZ6nGPDQGMts=
Received: by 10.49.54.5 with SMTP id g5mr2156120nfk;
        Fri, 07 Apr 2006 17:52:32 -0700 (PDT)
Received: by 10.48.157.2 with HTTP; Fri, 7 Apr 2006 17:52:32 -0700 (PDT)
Message-ID: <198501d60604071752y15867ee9x7296df76457e0bc3@mail.gmail.com>
Date: Sat, 8 Apr 2006 02:52:32 +0200
From: "pepone pepone" <pepone.onrez@gmail.com>
To: java-user@lucene.apache.org
Subject: HOT SPOT VIRTUAL MACHINE aleatory crash while index documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1306_11118366.1144457552897"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1306_11118366.1144457552897
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Lucene experts

I have a program that use lucene to index the content of my objects
Documents, Coments, etc

after index a lot of documents (5000) (12000) is not always at same point i
get this error

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=3D0xb7baa65d, pid=3D8181, tid=3D2697431984
#
# Java VM: Java HotSpot(TM) Client VM (Blackdown-1.4.2-03 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x2865d]
#

---------------  T H R E A D  ---------------

Current thread (0x08090bb0):  VMThread [id=3D8182]

siginfo:si_signo=3D11, si_errno=3D0, si_code=3D1, si_addr=3D0x00000048

Registers:
EAX=3D0x00000000, EBX=3D0xb7e5fe48, ECX=3D0xa2519a28, EDX=3D0x00000000
ESP=3D0xa0c77db0, EBP=3D0xa0c77dc8, ESI=3D0xad5203a0, EDI=3D0xa2509870
EIP=3D0xb7baa65d, CR2=3D0x00000048, EFLAGS=3D0x00010246

Top of Stack: (sp=3D0xa0c77db0)
0xa0c77db0:   ad5203a0 a2519a28 ad5a08c0 b7e5fe48
0xa0c77dc0:   00000008 a2519a28 a0c77e18 b7dcd492
0xa0c77dd0:   a2519a28 ad5203a0 00000008 a0c77e50
0xa0c77de0:   a1fed680 b7e6ce40 b7e6ce40 b7f8a820
0xa0c77df0:   0005c568 a24ed6a0 a1fdec88 a2509870
0xa0c77e00:   a5bbbcb0 a1fed6a0 00000000 b7e5fe48
0xa0c77e10:   0806b490 a0c77e50 a0c77e38 b7cae83f
0xa0c77e20:   0806b490 a0c77e50 a0c77e48 00000000

Instructions: (pc=3D0xb7baa65d)
0xb7baa64d:   5d c3 90 85 d2 78 10 8b 06 89 34 24 89 4c 24 04
0xb7baa65d:   ff 50 48 89 c2 eb e2 8b 41 08 89 d1 f7 d1 89 c2

Stack: [0xa0c06000,0xa0c79000),  sp=3D0xa0c77db0,  free space=3D455k
Native frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code, C=3D=
native
code)
V  [libjvm.so+0x2865d]
V  [libjvm.so+0x24b492]
V  [libjvm.so+0x12c83f]
V  [libjvm.so+0x121b4f]
V  [libjvm.so+0x1227f8]
V  [libjvm.so+0x12cd4b]
V  [libjvm.so+0x26e9e7]
V  [libjvm.so+0x120223]
V  [libjvm.so+0xe939a]
V  [libjvm.so+0x120430]
V  [libjvm.so+0x299c50]
V  [libjvm.so+0x29994f]
V  [libjvm.so+0x298e6c]
V  [libjvm.so+0x2990b1]
V  [libjvm.so+0x298cbf]
V  [libjvm.so+0x221637]
C  [libpthread.so.0+0x5aba]

VM_Operation (0xa03f88e0): generation collection for allocation, mode:
safepoint, requested by thread 0x0819cc78


---------------  P R O C E S S  ---------------

Java Threads: ( =3D> current thread )
  0x081ba170 JavaThread "LuceneServer-Ice.ThreadPool.Client-0"
[_thread_in_native, id=3D8197]
  0x081c3f00 JavaThread "LuceneServer-Ice.ThreadPool.Server-0"
[_thread_in_native, id=3D8196]
  0x0819c840 JavaThread "LuceneServer-Ice.ThreadPool.Client-0"
[_thread_in_native, id=3D8195]
  0x0819cc78 JavaThread "LuceneServer-Ice.ThreadPool.Server-0"
[_thread_blocked, id=3D8194]
  0x08193890 JavaThread "LuceneServer-Ice.ConnectionMonitor"
[_thread_blocked, id=3D8193]
  0x08192740 JavaThread "LuceneServer-Ice.ConnectionMonitor"
[_thread_blocked, id=3D8192]
  0x08097878 JavaThread "CompilerThread0" daemon [_thread_blocked, id=3D818=
7]
  0x08096a88 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
id=3D8186]
  0x08093880 JavaThread "Finalizer" daemon [_thread_blocked, id=3D8184]
  0x08091e10 JavaThread "Reference Handler" daemon [_thread_blocked,
id=3D8183]
  0x0805bf78 JavaThread "main" [_thread_blocked, id=3D8181]

Other Threads:
=3D>0x08090bb0 VMThread [id=3D8182]
  0x080991a8 WatcherThread [id=3D8188]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0805b740/0x0805b770] Threads_lock - owner thread: 0x08090bb0
[0x0805ba70/0x0805ba90] Heap_lock - owner thread: 0x0819cc78

Heap
 def new generation   total 4864K, used 512K [0xa0da0000, 0xa12e0000,
0xa1d00000)
  eden space 4352K,   0% used [0xa0da0000, 0xa0da0000, 0xa11e0000)
  from space 512K, 100% used [0xa11e0000, 0xa1260000, 0xa1260000)
  to   space 512K,   0% used [0xa1260000, 0xa1260000, 0xa12e0000)
 tenured generation   total 64248K, used 64239K [0xa1d00000, 0xa5bbe000,
0xad5a0000)
   the space 64248K,  99% used [0xa1d00000, 0xa5bbbcb0, 0xa1fed800,
0xa5bbe000)
 compacting perm gen  total 4096K, used 3120K [0xad5a0000, 0xad9a0000,
0xb39a0000)
   the space 4096K,  76% used [0xad5a0000, 0xad8ac100, 0xad8ac200,
0xad9a0000)

Dynamic libraries:
08048000-08057000 r-xp 00000000 08:01 741073     /opt/blackdown-jdk-1.4.2.0=
3
/bin/java
08057000-08059000 rwxp 0000e000 08:01 741073     /opt/blackdown-jdk-1.4.2.0=
3
/bin/java
08059000-0835a000 rwxp 08059000 00:00 0          [heap]
a0000000-a0027000 rwxp a0000000 00:00 0
a0027000-a0100000 ---p a0027000 00:00 0
a01f6000-a01f7000 ---p a01f6000 00:00 0
a01f7000-a0204000 rwxp a01f7000 00:00 0
a0204000-a0207000 ---p a0204000 00:00 0
a0207000-a0277000 rwxp a0207000 00:00 0
a0277000-a0278000 ---p a0277000 00:00 0
a0278000-a0285000 rwxp a0278000 00:00 0
a0285000-a0288000 ---p a0285000 00:00 0
a0288000-a02f8000 rwxp a0288000 00:00 0
a02f8000-a02f9000 ---p a02f8000 00:00 0
a02f9000-a0306000 rwxp a02f9000 00:00 0
a0306000-a0309000 ---p a0306000 00:00 0
a0309000-a0379000 rwxp a0309000 00:00 0
a0379000-a037a000 ---p a0379000 00:00 0
a037a000-a0387000 rwxp a037a000 00:00 0
a0387000-a038a000 ---p a0387000 00:00 0
a038a000-a03fa000 rwxp a038a000 00:00 0
a03fa000-a03fb000 ---p a03fa000 00:00 0
a03fb000-a0408000 rwxp a03fb000 00:00 0
a0408000-a040b000 ---p a0408000 00:00 0
a040b000-a047b000 rwxp a040b000 00:00 0
a047b000-a047c000 ---p a047b000 00:00 0
a047c000-a0489000 rwxp a047c000 00:00 0
a0489000-a048c000 ---p a0489000 00:00 0
a048c000-a0541000 rwxp a048c000 00:00 0
a0541000-a0551000 r-xp 00000000 08:01 741334     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libnet.so
a0551000-a0552000 rwxp 0000f000 08:01 741334     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libnet.so
a0552000-a0566000 r-xs 00000000 16:05 292479     /home/pepone/announcements=
-
0.0.3/lib/oz.searchs.jar
a0566000-a0587000 r-xs 00000000 16:05 189505     /home/pepone/announcements=
-
0.0.3/lib/oz.files.jar
a0587000-a05ab000 r-xs 00000000 16:05 292868     /home/pepone/announcements=
-
0.0.3/lib/oz.base.jar
a05ab000-a05ca000 r-xs 00000000 08:01 597633
/opt/proguard3.4/lib/proguardgui.jar
a05ca000-a062f000 r-xs 00000000 08:01 597630
/opt/proguard3.4/lib/proguard.jar
a062f000-a0695000 r-xs 00000000 08:01 176167     /opt/lucene/lucene.jar
a0695000-a06e8000 r-xs 00000000 08:01 596206     /opt/looks-1.3.2/looks-
1.3.2.jar
a06e8000-a06fd000 r-xs 00000000 08:01 594812     /opt/forms-1.0.5/forms-
1.0.5.jar
a06fd000-a07dc000 r-xs 00000000 08:01 88113      /opt/Ice-3.0.1/lib/Ice.jar
a07dc000-a080c000 r-xs 00000000 08:01 123041     /opt/db/lib/db.jar
a080c000-a0828000 r-xs 00000000 08:01 741180     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/ext/sunjce_provider.jar
a0828000-a08e4000 r-xs 00000000 08:01 741295     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/ext/localedata.jar
a08e4000-a08f2000 r-xs 00000000 08:01 741178     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/ext/ldapsec.jar
a08f2000-a08f3000 ---p a08f2000 00:00 0
a08f3000-a0973000 rwxp a08f3000 00:00 0
a0973000-a0974000 ---p a0973000 00:00 0
a0974000-a0981000 rwxp a0974000 00:00 0
a0981000-a0984000 ---p a0981000 00:00 0
a0984000-a09f4000 rwxp a0984000 00:00 0
a09f4000-a09f5000 ---p a09f4000 00:00 0
a09f5000-a0a02000 rwxp a09f5000 00:00 0
a0a02000-a0a05000 ---p a0a02000 00:00 0
a0a05000-a0a75000 rwxp a0a05000 00:00 0
a0a75000-a0a76000 ---p a0a75000 00:00 0
a0a76000-a0af6000 rwxp a0a76000 00:00 0
a0af6000-a0af7000 ---p a0af6000 00:00 0
a0af7000-a0b04000 rwxp a0af7000 00:00 0
a0b04000-a0b07000 ---p a0b04000 00:00 0
a0b07000-a0b77000 rwxp a0b07000 00:00 0
a0b77000-a0b78000 ---p a0b77000 00:00 0
a0b78000-a0b85000 rwxp a0b78000 00:00 0
a0b85000-a0b88000 ---p a0b85000 00:00 0
a0b88000-a0bf8000 rwxp a0b88000 00:00 0
a0bf8000-a0bf9000 ---p a0bf8000 00:00 0
a0bf9000-a0c7c000 rwxp a0bf9000 00:00 0
a0c7c000-a0cac000 rwxp a0c7c000 00:00 0
a0cac000-a0ccc000 rwxp a0cac000 00:00 0
a0ccc000-a0d09000 rwxp a0ccc000 00:00 0
a0d09000-a0d0c000 rwxp a0d09000 00:00 0
a0d0c000-a0d10000 rwxp a0d0c000 00:00 0
a0d10000-a0d31000 rwxp a0d10000 00:00 0
a0d31000-a0d6d000 rwxp a0d31000 00:00 0
a0d6d000-a0d6f000 rwxp a0d6d000 00:00 0
a0d6f000-a0d9f000 rwxp a0d6f000 00:00 0
a0d9f000-a12e0000 rwxp a0d9f000 00:00 0
a12e0000-a1d00000 rwxp a12e0000 00:00 0
a1d00000-a5bbe000 rwxp a1d00000 00:00 0
a5bbe000-ad5a0000 rwxp a5bbe000 00:00 0
ad5a0000-ad9a0000 rwxp ad5a0000 00:00 0
ad9a0000-b39a0000 rwxp ad9a0000 00:00 0
b39a6000-b39d6000 rwxp b39a6000 00:00 0
b39d6000-b3a4e000 rwxp b39d6000 00:00 0
b3a4e000-b3c16000 rwxp b3a4e000 00:00 0
b3c16000-b5a4e000 rwxp b3c16000 00:00 0
b5a4e000-b5ff0000 r-xs 00000000 08:01 741302     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/charsets.jar
b5ff0000-b6002000 r-xs 00000000 08:01 741294     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/jce.jar
b6002000-b60df000 r-xs 00000000 08:01 741691     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/jsse.jar
b60df000-b60f5000 r-xs 00000000 08:01 741303     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/sunrsasign.jar
b60f5000-b613f000 rwxp b60f5000 00:00 0
b613f000-b7ae9000 r-xs 00000000 08:01 741252     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/rt.jar
b7ae9000-b7afa000 r-xp 00000000 08:01 741338     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libzip.so
b7afa000-b7afc000 rwxp 00011000 08:01 741338     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libzip.so
b7afc000-b7b1b000 r-xp 00000000 08:01 741323     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libjava.so
b7b1b000-b7b1c000 rwxp 0001f000 08:01 741323     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libjava.so
b7b1c000-b7b24000 r-xp 00000000 08:01 707624     /lib/libnss_files-2.3.5.so
b7b24000-b7b26000 rwxp 00007000 08:01 707624     /lib/libnss_files-2.3.5.so
b7b26000-b7b2d000 r-xp 00000000 08:01 707273     /lib/libnss_compat-2.3.5.s=
o
b7b2d000-b7b2f000 rwxp 00006000 08:01 707273     /lib/libnss_compat-2.3.5.s=
o
b7b30000-b7b36000 r-xp 00000000 08:01 741335     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libnio.so
b7b36000-b7b37000 rwxp 00006000 08:01 741335     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libnio.so
b7b37000-b7b39000 r-xs 00000000 08:01 597631
/opt/proguard3.4/lib/retrace.jar
b7b39000-b7b4a000 r-xp 00000000 08:01 741337     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libverify.so
b7b4a000-b7b4b000 rwxp 00011000 08:01 741337     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/libverify.so
b7b4b000-b7b6b000 r-xp 00000000 08:01 707646     /lib/libm-2.3.5.so
b7b6b000-b7b6d000 rwxp 0001f000 08:01 707646     /lib/libm-2.3.5.so
b7b6d000-b7b7e000 r-xp 00000000 08:01 707185     /lib/libnsl-2.3.5.so
b7b7e000-b7b80000 rwxp 00010000 08:01 707185     /lib/libnsl-2.3.5.so
b7b80000-b7b82000 rwxp b7b80000 00:00 0
b7b82000-b7e48000 r-xp 00000000 08:01 741223     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/client/libjvm.so
b7e48000-b7e63000 rwxp 002c6000 08:01 741223     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/client/libjvm.so
b7e63000-b7e7b000 rwxp b7e63000 00:00 0
b7e7b000-b7f87000 r-xp 00000000 08:01 707831     /lib/libc-2.3.5.so
b7f87000-b7f88000 r-xp 0010c000 08:01 707831     /lib/libc-2.3.5.so
b7f88000-b7f8b000 rwxp 0010d000 08:01 707831     /lib/libc-2.3.5.so
b7f8b000-b7f8d000 rwxp b7f8b000 00:00 0
b7f8d000-b7f8f000 r-xp 00000000 08:01 707633     /lib/libdl-2.3.5.so
b7f8f000-b7f91000 rwxp 00001000 08:01 707633     /lib/libdl-2.3.5.so
b7f91000-b7f9f000 r-xp 00000000 08:01 707706     /lib/libpthread-2.3.5.so
b7f9f000-b7fa0000 r-xp 0000d000 08:01 707706     /lib/libpthread-2.3.5.so
b7fa0000-b7fa1000 rwxp 0000e000 08:01 707706     /lib/libpthread-2.3.5.so
b7fa1000-b7fa4000 rwxp b7fa1000 00:00 0
b7fa5000-b7fa6000 r-xp b7fa5000 00:00 0
b7fa6000-b7fa9000 r-xs 00000000 08:01 741177     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/ext/dnsns.jar
b7fa9000-b7fad000 rwxs 00000000 08:01 790749     /tmp/hsperfdata_pepone/818=
1
b7fad000-b7fb5000 r-xp 00000000 08:01 707642     /lib/libnss_nis-2.3.5.so
b7fb5000-b7fb7000 rwxp 00007000 08:01 707642     /lib/libnss_nis-2.3.5.so
b7fb7000-b7fbf000 r-xp 00000000 08:01 741119     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/native_threads/libhpi.so
b7fbf000-b7fc0000 rwxp 00007000 08:01 741119     /opt/blackdown-jdk-1.4.2.0=
3
/jre/lib/i386/native_threads/libhpi.so
b7fc0000-b7fd5000 r-xp 00000000 08:01 704920     /lib/ld-2.3.5.so
b7fd5000-b7fd6000 r-xp 00014000 08:01 704920     /lib/ld-2.3.5.so
b7fd6000-b7fd7000 rwxp 00015000 08:01 704920     /lib/ld-2.3.5.so
bf6d6000-bf6e0000 rwxp bf6d6000 00:00 0
bf6e0000-bf6e3000 ---p bf6e0000 00:00 0
bf8bf000-bf8d5000 rwxp bf8bf000 00:00 0          [stack]
ffffe000-fffff000 ---p 00000000 00:00 0          [vdso]

VM Arguments:
jvm_args: -Xmx200m -XX:MaxPermSize=3D100m
java_command: IceBox.Server --
Ice.Config=3D/home/pepone/announcements-0.0.3/DB/icegrid/titanio/servers/Lu=
ceneServer/config/config--
Ice.Default.Locator=3DIceGrid/Locator:tcp -h 192.168.0.197 -p 14000 --
Ice.ServerId=3DLuceneServer
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=3D/opt/blackdown-jdk-1.4.2.03
CLASSPATH=3D/opt/db/lib/db.jar:/opt/Ice-3.0.1/lib/Ice.jar:/opt/forms-1.0.5
/forms-
1.0.5.jar:/opt/looks-1.3.2/looks-1.3.2.jar:/opt/lucene/lucene.jar:/opt/prog=
uard3.4/lib/proguard.jar:/opt/proguard3.4/lib/proguardgui.jar:/opt/proguard=
3.4/lib/retrace.jar:/home/pepone/announcements-0.0.3/lib/oz.base.jar:/home/=
pepone/announcements-0.0.3/lib/oz.files.jar:/home/pepone/announcements-0.0.=
3/lib/oz.announcements.jar:/home/pepone/announcements-0.0.3/lib/oz.searchs.=
jar:
.
PATH=3D/usr/kde/3.5/bin:/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/i686-pc-=
linux-gnu/gcc-bin/3.3.6:/opt/db/bin:/opt/eclipse:/opt/Ice-
3.0.1
/bin:/opt/appweb/bin:/opt/gsasl/bin:/opt/gsoap/bin:/home/pepone/Desktop/Web=
Server/bin:/opt/vmime/bin:/home/pepone/announcements-
0.0.3/bin:/opt/blackdown-jdk-1.4.2.03/bin:/opt/blackdown-jdk-1.4.2.03
/jre/bin:/usr/kde/3.5/bin:/usr/qt/3/bin:/usr/kde/3.4/bin:/var/qmail/bin
LD_LIBRARY_PATH=3D/opt/blackdown-jdk-1.4.2.03
/jre/lib/i386/client:/opt/blackdown-jdk-1.4.2.03
/jre/lib/i386:/opt/blackdown-jdk-1.4.2.03/jre/../lib/i386
SHELL=3D/bin/bash
DISPLAY=3D:0


---------------  S Y S T E M  ---------------

OS:Gentoo Base System version 1.12.0_pre16

uname:Linux 2.6.14-gentoo-r5 #1 SMP PREEMPT Tue Dec 20 16:13:37 Local time
zone must be set-- i686
libc:glibc 2.3.5 NPTL 2.3.5
rlimit: STACK 32768k, CORE 0k, NPROC 7168, NOFILE 10024, AS infinity
load average:0.00 -0.00 -0.00

CPU:total 2 family 15, cmov, cx8, fxsr, mmx, sse, sse2

Memory: 4k page, physical 904980k(19116k free), swap 996020k(996020k free)

vm_info: Java HotSpot(TM) Client VM (Blackdown-1.4.2-03) for linux-x86,
built on Nov 23 2005 20:51:18 by jk with GCC 3.2




Here is the code that I use for index documents


/*
 * Created on Oct 16, 2005
 *
 * TODO To change the template for this generated file go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
package Oz.Searchs;

import java.io.FileReader;
import java.util.Iterator;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import Ice.Current;
import IceUtil.StringUtil;
import Oz.Searchs.ObjectMetadata;

/**
 * @author pepone
 *
 * TODO To change the template for this generated type comment go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
public class IndexerI extends Indexer {

    private IndexReader reader;
    private IndexWriter writer;
    private int optimized;
    private int lastoptimized;
    public IndexerI() throws Exception
    {
        optimized=3D100;
        lastoptimized=3D0;
    }

    public IndexerI(String indexDir)
    {
        this.indexDir=3DindexDir;
        try
        {
            reader=3DIndexReader.open(indexDir);
            PerFieldAnalyzerWrapper analyzerWrapper =3D
                    new PerFieldAnalyzerWrapper(new StandardAnalyzer());
                analyzerWrapper.addAnalyzer("identity",new
KeywordAnalyzer());
                analyzerWrapper.addAnalyzer("type",new KeywordAnalyzer());
                analyzerWrapper.addAnalyzer("name",new KeywordAnalyzer());
                analyzerWrapper.addAnalyzer("path",new KeywordAnalyzer());
                analyzerWrapper.addAnalyzer("parent-id",new
KeywordAnalyzer());
            writer=3Dnew IndexWriter(indexDir,analyzerWrapper,false);
            writer.setUseCompoundFile(false);
            writer.setMaxBufferedDocs(5);
            writer.setMergeFactor(5);
            optimized=3D100;
            lastoptimized=3D0;
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }

    synchronized public void indexObject(ObjectMetadata metadata,Current
current)
    {
        try
        {
            System.out.println("IndexerI.indexObject");
            System.out.println(metadata.objectId);

            reader=3DIndexReader.open(indexDir);
            reader.delete(new Term("identity",metadata.objectId));
            reader.close();
            System.out.println("Reder close");
            Document doc=3Dnew Document();

            doc.add(
                Field.Keyword(
                    "identity",
                    metadata.objectId));

            Iterator it=3Dmetadata.indexedKeys.keySet().iterator();

            while(it.hasNext())
            {
                Object obj=3Dit.next();
                doc.add(
                    Field.Text(
                        (String)obj,
                        (String)metadata.indexedKeys.get(obj)));
            }

            Iterator itStored=3Dmetadata.storedKeys.keySet().iterator();
            while(itStored.hasNext())
            {
                Object objS=3DitStored.next();
                doc.add(
                    Field.Keyword(
                        (String)objS,
                        (String)metadata.storedKeys.get(objS)));
            }

            writer.addDocument(doc);
            if(lastoptimized>=3Doptimized)
            {
                writer.optimize();
                lastoptimized=3D0;
            }
            else
                lastoptimized++;
            writer.close();
        }
        catch(java.io.FileNotFoundException e)
        {
            System.out.println(e.getMessage());
            try
            {
                IndexWriter writer=3Dnew IndexWriter(
                    indexDir,
                    new StandardAnalyzer(),true);
                writer.close();
                indexObject(metadata,current);
            }
            catch(Exception e2)
            {
                System.out.println(e2.getMessage());
            }
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }

    synchronized public void removeObject(Ice.Identity id,Current current)
    {
        try
        {
            IndexReader reader=3DIndexReader.open(indexDir);
            reader.delete(new Term("identity",Ice.Util.identityToString
(id)));
            reader.close();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }
}


Can any of you sayme if there is and evident error in this code, or where
can i found the source of the problem

any ideas or coments are wellcome


--
play tetris http://pepone.on-rez.com/tetris

------=_Part_1306_11118366.1144457552897--

From java-user-return-20048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 08:20:58 2006
Return-Path: <java-user-return-20048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52889 invoked from network); 8 Apr 2006 08:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 08:20:55 -0000
Received: (qmail 38968 invoked by uid 500); 8 Apr 2006 08:20:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38932 invoked by uid 500); 8 Apr 2006 08:20:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38920 invoked by uid 99); 8 Apr 2006 08:20:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 01:20:48 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=BAD_ENC_HEADER,FROM_EXCESS_QP,SUBJECT_EXCESS_QP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.76.63.210] (HELO mailserver.exis.com.gr) (80.76.63.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 01:20:47 -0700
Received: from [192.168.2.32] (helo=clyde.thoukydides.gr)
	by rottweiler.exis.com.gr with esmtp (Exim 4.43)
	id 1FS8g8-0001z7-LH
	for java-user@lucene.apache.org; Sat, 08 Apr 2006 11:20:22 +0300
Received: from localhost ([127.0.0.1] helo=clyde.thoukydides.gr)
	by clyde.thoukydides.gr with esmtp (Exim 4.43)
	id 1FS8eq-0001WV-PO
	for java-user@lucene.apache.org; Sat, 08 Apr 2006 11:19:00 +0300
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-7"
MIME-Version: 1.0
From: =?ISO-8859-7?Q?Marios Skounakis?= <mscoon@exis.com.gr>
To: java-user@lucene.apache.org
Subject: =?ISO-8859-7?Q?Compass Framework?=
Reply-To: mscoon@exis.com.gr
X-Origin: 87.203.185.253
Date: Sat, 08 Apr 2006 11:19:00 +0300
X-Uidl: 114448434058578843
X-Mailer: AtMail 4.03
X-Spam-Score: 0.8 (/)
X-Spam-Report: 	2.3 BAD_ENC_HEADER         Message has bad MIME encoding in the header
	-1.4 ALL_TRUSTED            Passed through trusted hosts only via SMTP
	 0.0 FROM_EXCESS_QP         From: quoted-printable encoded unnecessarily
	 0.0 SUBJECT_EXCESS_QP      Subject: quoted-printable encoded unnecessarily
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060408082048.4B7A210FB008@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=0D
=0D
=0D
Hi all,=0D
=0D
I recently came across the Compass Framework, which is built on top of luce=
ne. I=0D
am interested in it because it stores the lucene index in an RDBMS and prov=
ides=0D
transaction support for index updates (it also has several other features b=
ut=0D
this is the part I'm mostly interested in).=0D
=0D
I wanted to know if any people here have had any experience with compass an=
d what=0D
they think about it. Is the database implementation of the index fast enoug=
h and=0D
does it introduce any additional issues/problems?=0D
=0D
Thanks in advance,=0D
Marios=0D
---- Msg sent via eXis webmail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 08:23:47 2006
Return-Path: <java-user-return-20049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55811 invoked from network); 8 Apr 2006 08:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 08:23:47 -0000
Received: (qmail 42498 invoked by uid 500); 8 Apr 2006 08:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42468 invoked by uid 500); 8 Apr 2006 08:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42457 invoked by uid 99); 8 Apr 2006 08:23:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 01:23:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 01:23:41 -0700
Received: by pproxy.gmail.com with SMTP id m51so668027pye
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 01:23:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WVe7z6FuYRaa7pti1a7w0hfqFpGJCpLiy3AkA5phkayoWMX64Y2wLZO/8/QGODVEnwZY+Ign7dqy8/E62uyxKwNjYq1gGBtXyfPTIHR1r6F+RXuqP8ojjrnuG0jq1sUa6Z0MbNqAjJdYO255ob+asSoVUMqnbzxdSX07TRv/jr0=
Received: by 10.35.66.13 with SMTP id t13mr1519310pyk;
        Sat, 08 Apr 2006 01:23:20 -0700 (PDT)
Received: by 10.35.50.10 with HTTP; Sat, 8 Apr 2006 01:23:20 -0700 (PDT)
Message-ID: <f13b62210604080123m4979d428md94ae62d0001768b@mail.gmail.com>
Date: Sat, 8 Apr 2006 13:53:20 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org, mscoon@exis.com.gr
Subject: Re: Compass Framework
In-Reply-To: <20060408082048.4B7A210FB008@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10774_26864495.1144484600912"
References: <20060408082048.4B7A210FB008@asf.osuosl.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10774_26864495.1144484600912
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Database implementation of the index is always bound to be slow compared to
storing it on the filesystem.

Probably the group which stores indexes into Berkley DB should be able to
give you a performance measuer of what will happen you store indexex in
databases.

Rgds
Prabhu


On 4/8/06, Marios Skounakis <mscoon@exis.com.gr> wrote:
>
>
>
>
> Hi all,
>
> I recently came across the Compass Framework, which is built on top of
> lucene. I
> am interested in it because it stores the lucene index in an RDBMS and
> provides
> transaction support for index updates (it also has several other features
> but
> this is the part I'm mostly interested in).
>
> I wanted to know if any people here have had any experience with compass
> and what
> they think about it. Is the database implementation of the index fast
> enough and
> does it introduce any additional issues/problems?
>
> Thanks in advance,
> Marios
> ---- Msg sent via eXis webmail
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10774_26864495.1144484600912--

From java-user-return-20050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 11:05:36 2006
Return-Path: <java-user-return-20050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14723 invoked from network); 8 Apr 2006 11:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 11:05:35 -0000
Received: (qmail 37946 invoked by uid 500); 8 Apr 2006 11:05:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37909 invoked by uid 500); 8 Apr 2006 11:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37898 invoked by uid 99); 8 Apr 2006 11:05:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 04:05:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 04:05:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E293133D964; Sat,  8 Apr 2006 07:05:07 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id CF48433D963
	for <java-user@lucene.apache.org>; Sat,  8 Apr 2006 07:05:02 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: I just don't get wildcards at all.
Date: Sat, 8 Apr 2006 07:04:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Eric,

Wildcard queries are tricky business.  WildcardQuery by itself  
without leveraging any analysis tricks is what you've got, but you  
may want to consider injecting rotated tokens.  For example, the word  
cat would be indexed as "cat$", "at$c", "t$ca", and "$cat" (all in  
the same position, increment 0).  That's half the equation.  The  
other half is to adjust the queries so that if someone searches for  
c*t that it becomes a WildcardQuery (or PrefixQuery in this case) for  
t$c*, making the search space much smaller.

CSRQ definitely isn't what you want for wildcard queries.  Another  
alternative is to create a custom Filter, if its reasonable to  
extract wildcarded clauses from a query expression, that can  
enumerate terms as efficiently as possible (like WildcardTermEnum  
does) and lights up only the documents that contain matching terms -  
this would eliminate the TooManyClauses headache.

There really isn't anything pre-built that does what you're after any  
better than the suggestions above, I don't think.

	Erik


On Apr 7, 2006, at 10:06 AM, Erick Erickson wrote:

> OK, I know I'm asking you to write my code for me (or at least  
> point me to
> an example), but I'm at my wits end, so please rescue me....
>
> This is a reprise of TooManyClauses. We have a large amount of  
> text, and a
> requirement to do a wildcard query. Of course, it's waaaay too big  
> to use
> Wildcard or the other "expanding" queries. They frighten me  
> anyway.....
>
> y'all pointed me at the ConstantScoreRangeQuery (CSRQ), but  
> actually using
> it is not making sense to me.
>
> I just don't get how, for instance,  CSRQ helps me that much. Say I  
> want to
> search for big*er. I can use a CSRQ to get all the docs that  
> include this
> term, just by using biga and bigz as my min/max terms. But then I'm  
> stuck. I
> could iterate through all the docs returned, but that seems  
> inefficient. Not
> to mention that the HitCollector (?) class warns against this due  
> to "an
> order of magnitude" decrease in response time.
>
> What I *want* is a way to, for each doc in the CSRQ, get to answer  
> whether
> it's a match. Really, on the order of a callback with the value  
> that worked
> for the CSRQ and the ability to return a yes/no or a ranking.  
> Again, I can
> interate all the docs matched, but this seems expensive.
>
> Using filters doesn't really seem to do the trick for me either. If I
> understand them properly, they allow me to set up a bitset for all the
> documents that should be searched. All 1,000,000 of them? Or am I  
> thinking
> about this completely backwards? I have LIA, but I'm also wondering if
> there's something in 1.9 that I haven't found yet.
>
> Now, given how easy the rest of Lucene is to use, I assume that I'm
> approaching this poorly, but I sure am stumped.
>
> All that said, I'm quite Java-naieve, so please bear with me if this
> question demonstrates my ignorance painfully.....
>
> Thanks
> Erick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 11:07:35 2006
Return-Path: <java-user-return-20051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15159 invoked from network); 8 Apr 2006 11:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 11:07:30 -0000
Received: (qmail 40889 invoked by uid 500); 8 Apr 2006 11:07:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40826 invoked by uid 500); 8 Apr 2006 11:07:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40788 invoked by uid 99); 8 Apr 2006 11:07:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 04:07:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 04:07:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E14F433D963; Sat,  8 Apr 2006 07:06:44 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 2A5C533D963
	for <java-user@lucene.apache.org>; Sat,  8 Apr 2006 07:06:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Exception in WildCardQuery
Date: Sat, 8 Apr 2006 07:06:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Feel free to log this as a bug report in our JIRA issue tracker.  It  
seems like a reasonable change to make, such that a WildcardQuery  
without a wildcard character would behave like TermQuery.

	Erik


On Apr 7, 2006, at 10:28 AM, Erick Erickson wrote:

> So I'm trying to do silly stuff, just to poke a bit at wildcard  
> queries. So
> sue me... But I ran across this....
>
> And yes, I know that creating a wildcard query is dangerous and  
> downright
> silly when you don't have a wildcard in the term, but this still  
> seems like
> a case should, say, default to a simple query rather than throw an
> exception....
>
> Lucene 1.9.1
>
> Query q1 = new WildcardQuery(new Term("Text", "a"));
> .
> .
> .
> Hits hits = searcher.search(q1);
>
>
> Caught Exception
> java.lang.StringIndexOutOfBoundsException: String index out of  
> range: -1
>     at java.lang.String.substring(Unknown Source)
>     at org.apache.lucene.search.WildcardTermEnum.<init>(
> WildcardTermEnum.java:65)
>     at org.apache.lucene.search.WildcardQuery.getEnum 
> (WildcardQuery.java:38)
>     at org.apache.lucene.search.MultiTermQuery.rewrite 
> (MultiTermQuery.java
> :54)
>     at org.apache.lucene.search.IndexSearcher.rewrite 
> (IndexSearcher.java
> :137)
>     at org.apache.lucene.search.Query.weight(Query.java:92)
>     at org.apache.lucene.search.Hits.<init>(Hits.java:41)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:44)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:36)
>     at QuickTest.main(QuickTest.java:45)
>
>
>
> FWIW
> Erick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 13:37:31 2006
Return-Path: <java-user-return-20052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85325 invoked from network); 8 Apr 2006 13:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 13:37:30 -0000
Received: (qmail 49654 invoked by uid 500); 8 Apr 2006 13:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49163 invoked by uid 500); 8 Apr 2006 13:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49148 invoked by uid 99); 8 Apr 2006 13:37:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 06:37:24 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 06:37:23 -0700
Received: by pproxy.gmail.com with SMTP id m51so706790pye
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 06:37:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qq++LtfE2bMbBdbbmXkkTFZmlDZDB76y0981yAqVgRm5EzrN57ZR8/uUtmiMHXLCpiasO6S3SV4B4Q02NCprxXipxxPYNMGCUXe83m8Q9hfEWTmQzx1XayXo8z9hU6yBlu/BrsROudkpKgoveXzjswjqBZxWGrg93/UOcPmpAo0=
Received: by 10.35.78.13 with SMTP id f13mr819914pyl;
        Sat, 08 Apr 2006 06:37:02 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 8 Apr 2006 06:37:02 -0700 (PDT)
Message-ID: <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
Date: Sat, 8 Apr 2006 09:37:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14995_12142885.1144503422822"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14995_12142885.1144503422822
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Erik:

Thanks, that helps a lot. I won't waste any more time chasing CSRQ, which i=
s
definitely a plus.

I have to admit that I was hoping for a "RTFM, page ### (Read The FIELD
Manual<G>))" response. Although since I completely missed WildCardTermEnum
maybe I *did* get the response I hoped for. I have go buy frogs (it's a lon=
g
story), so I won't be able to look at this til later.....

If I understand this right, I could build my own BooleanQuery in chunks of,
say, 1,000 terms each by just adding words given me by the WildCardTermEnum=
,
right?

Or I could iterate through the list, recording the "most similar" terms and
only search on those, etc, etc, etc....

And I assume that TermDocs will get me lists of documents associated with
any of the terms I come up with, which will also help...

I'll run some test later today to see what kind of performance I get.

You mean I actually have to *think* about this? Awwwwwwww.

Thanks agein
Erick


P.S. A big thanks for thie resopnse, since I have a self-imposed deadline o=
f
Monday for solving this. We're trying to decide whether to use Lucene or a
horrible old "C" interface to a commercial search engine. The frightening
thing is that I have the skills to go ahead and use the old "C" interface,
but really, really, really would like to use something a little (well, a
lot) more friendly.

------=_Part_14995_12142885.1144503422822--

From java-user-return-20053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 15:55:13 2006
Return-Path: <java-user-return-20053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39029 invoked from network); 8 Apr 2006 15:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 15:55:12 -0000
Received: (qmail 48641 invoked by uid 500); 8 Apr 2006 15:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48301 invoked by uid 500); 8 Apr 2006 15:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48281 invoked by uid 99); 8 Apr 2006 15:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 08:55:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.187] (HELO hnexfe17.hetnet.nl) (195.121.6.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 08:55:04 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe17.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6713);
	 Sat, 8 Apr 2006 17:54:40 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com> <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Exception in WildCardQuery
Date: Sat, 8 Apr 2006 17:57:10 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 08 Apr 2006 15:54:40.0193 (UTC) FILETIME=[BEA2D310:01C65B24]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


8 apr 2006 kl. 13.06 skrev Erik Hatcher:

> Feel free to log this as a bug report in our JIRA issue tracker.   
> It seems like a reasonable change to make, such that a  
> WildcardQuery without a wildcard character would behave like  
> TermQuery.

-1

Even though very few, it is a waste of clockticks. I belive that any  
lib always should try to force the developer to write optimized code.  
If you for some reason need to autotedetect wildcard/term query, the  
developer should write a facade.

Another error message could be good though.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 16:24:27 2006
Return-Path: <java-user-return-20054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52190 invoked from network); 8 Apr 2006 16:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 16:24:25 -0000
Received: (qmail 73378 invoked by uid 500); 8 Apr 2006 16:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73350 invoked by uid 500); 8 Apr 2006 16:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73339 invoked by uid 99); 8 Apr 2006 16:24:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 09:24:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wproxy.gmail.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 09:24:17 -0700
Received: by wproxy.gmail.com with SMTP id i5so805218wra
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 09:23:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PxIoHpAVoIsS+VVbph9XXjtGQ0EruKv7nQo3YDHgngDQHi+dt0PNezPNsADfgCqpRDhxb8mb4wb5frb6nPBkodOKGyPQTUl8xZjPag5DR71WzyxWe78MUv5SfIl7YWANufSDaafU/pSvSbitODjJJNGZ64LflLxEyIhTiQFMfiE=
Received: by 10.65.240.19 with SMTP id s19mr422214qbr;
        Sat, 08 Apr 2006 09:23:55 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Sat, 8 Apr 2006 09:23:55 -0700 (PDT)
Message-ID: <6e3ae6310604080923v2e3f0b67x647c7db5b8932cd8@mail.gmail.com>
Date: Sat, 8 Apr 2006 09:23:55 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Compass Framework
In-Reply-To: <f13b62210604080123m4979d428md94ae62d0001768b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060408082048.4B7A210FB008@asf.osuosl.org>
	 <f13b62210604080123m4979d428md94ae62d0001768b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As far as I know, Compass Framework does not store index into
database. It just index data when data pass Hibernate, iBatis, or
other layer.

So if you use these layers in your code, you can use Compass.

Chris Lu
--------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to setup than reading marketing materials!

On 4/8/06, Raghavendra Prabhu <rrprabhu@gmail.com> wrote:
> Database implementation of the index is always bound to be slow compared =
to
> storing it on the filesystem.
>
> Probably the group which stores indexes into Berkley DB should be able to
> give you a performance measuer of what will happen you store indexex in
> databases.
>
> Rgds
> Prabhu
>
>
> On 4/8/06, Marios Skounakis <mscoon@exis.com.gr> wrote:
> >
> >
> >
> >
> > Hi all,
> >
> > I recently came across the Compass Framework, which is built on top of
> > lucene. I
> > am interested in it because it stores the lucene index in an RDBMS and
> > provides
> > transaction support for index updates (it also has several other featur=
es
> > but
> > this is the part I'm mostly interested in).
> >
> > I wanted to know if any people here have had any experience with compas=
s
> > and what
> > they think about it. Is the database implementation of the index fast
> > enough and
> > does it introduce any additional issues/problems?
> >
> > Thanks in advance,
> > Marios
> > ---- Msg sent via eXis webmail
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 17:04:46 2006
Return-Path: <java-user-return-20055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69475 invoked from network); 8 Apr 2006 17:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 17:04:45 -0000
Received: (qmail 13770 invoked by uid 500); 8 Apr 2006 17:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13358 invoked by uid 500); 8 Apr 2006 17:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13347 invoked by uid 99); 8 Apr 2006 17:04:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 10:04:40 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 10:04:39 -0700
Received: by pproxy.gmail.com with SMTP id m51so736596pye
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 10:04:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AHPFKrcrryCB2Nn6FcqPlRxbEDo94A71gWndBoIBsEtvPLdPe5li2IOwCoBzz+LR+s4g7ecBcpo500lPNLtbCFoiJDklcP0Ed73Jkf9ib7mtQjaW3snCSaminJu6Ooclf+EU/OImXB28EBYsQCMT9N9t4wSFtS1fOnYFqDMvZpU=
Received: by 10.35.119.11 with SMTP id w11mr2407949pym;
        Sat, 08 Apr 2006 10:04:19 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 8 Apr 2006 10:04:19 -0700 (PDT)
Message-ID: <359a92830604081004o55833837ga42becb9da4f30f3@mail.gmail.com>
Date: Sat, 8 Apr 2006 13:04:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception in WildCardQuery
In-Reply-To: <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17398_17046902.1144515859174"
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
	 <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
	 <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17398_17046902.1144515859174
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I have to disagree. Nowhere in the javadoc is this condition noted. There i=
s
no way for a user to know that this is a restriction, and forcing developer=
s
to find this by having a program fail, even with a better error message,
is...er...unfortunate. Even if this were in the javadoc, I still have to
remember it. And my memory isn't what it used to be....

Optimization where it really doesn't count is, in my experience, bad.
Period. I'm making the assumption that setting up the query is a tiny
fraction of the time spent in a search. I'm perfectly willing to lose those
"very few clockticks" in code that accounts for a tiny, tiny fraction of my
search time than I am willing to be surprised by behavior that I have no wa=
y
of anticipating. And spending the developer/customer/company time chasing
such a problem down. So the notion of a library forcing me to optimize wher=
e
*the library writers* think I should raises a red flag right away.

Of course it's a balancing act. I'd also not like the library to get so
concerned with being idiot-proof that it gets noticeably slower. Given all
the time and energy that I expect Lucene to save me, I'm content to let the
Lucene folks make that determination. They are in a far better place to
judge whether this would be worth it or not.

So, I'll put in the bug report and be happy with whatever decision is made
by the Lucene folks.

As you can probably tell, I've spent faaaarrrr too much of my professional
life looking at code that was efficient, complicated, and wrong in some
subtle or not-so-subtle way and caused failures of one sort or another. And
improved execution time by, say, .0001%. I don't accept the efficiency
argument unless it can be shown to matter. The eXtreme Programming folks
have it right, "Make it work, make it right, make it fast". I'd change it a
bit to "make it fast if it matters". Those times it has mattered, my guesse=
s
as to where the time was being wasted have been wrong most of the time.

Ok, now you know where one of my buttons is. I'll get off my soap-box now..=
.

Erick

P.S. I'll be glad to exchange a few e-mail with you if you want to try to
persuade me. We probably shouldn't turn this into a philosophical debate
over optimization, since it *is* a Lucene forum.......

------=_Part_17398_17046902.1144515859174--

From java-user-return-20056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 18:04:08 2006
Return-Path: <java-user-return-20056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97502 invoked from network); 8 Apr 2006 18:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 18:04:08 -0000
Received: (qmail 64719 invoked by uid 500); 8 Apr 2006 18:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64634 invoked by uid 500); 8 Apr 2006 18:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64623 invoked by uid 99); 8 Apr 2006 18:04:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:04:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:04:00 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sat, 8 Apr 2006 20:03:37 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <359a92830604081004o55833837ga42becb9da4f30f3@mail.gmail.com>
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com> <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com> <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net> <359a92830604081004o55833837ga42becb9da4f30f3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <102BCF85-9DB1-499E-9DB0-1FE5EA52F85E@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Exception in WildCardQuery
Date: Sat, 8 Apr 2006 20:06:07 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 08 Apr 2006 18:03:37.0315 (UTC) FILETIME=[C251F330:01C65B36]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


8 apr 2006 kl. 19.04 skrev Erick Erickson:

> I have to disagree.

> Optimization where it really doesn't count is, in my experience, bad.
> Period.

My intent was not to ephasise on optimization. The waste of  
clockticks is just a side effect from what I consider bad design.  
WildcardQuery and TermQuery do diffrent things. If I want to  
encapsulate the functions of both in one class I write a factory.

class TermOrWildcardQuery implements Query {
	private Query factory(Term t) {
		if (t.termText.endsWith("*")) return new WildcardQuery(t); else  
return new TermQuery(t);
	}
}


I have never used such a factory, but my guess is that  
programmatically I would always know If I wanted to use a wildcard or  
not. So only when writing a primitive query parser for human entered  
text could I see the use for such a thing. Perhaps then it is then  
better to write a real parser/lexer using Antlr or JavaCC?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 18:08:43 2006
Return-Path: <java-user-return-20057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99170 invoked from network); 8 Apr 2006 18:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 18:08:42 -0000
Received: (qmail 68309 invoked by uid 500); 8 Apr 2006 18:08:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68279 invoked by uid 500); 8 Apr 2006 18:08:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68268 invoked by uid 99); 8 Apr 2006 18:08:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:08:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:08:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 044CC33D965; Sat,  8 Apr 2006 14:08:14 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 1F97533D963
	for <java-user@lucene.apache.org>; Sat,  8 Apr 2006 14:08:12 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com> <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com> <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D350951-266E-4FB5-AB08-07243B84F1C6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Exception in WildCardQuery
Date: Sat, 8 Apr 2006 14:08:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't mean literally that WildcardQuery would morph into a  
TermQuery, but rather "behave" like it by simply doing what it  
currently does but without the string index exception that currently  
is thrown.  It wouldn't take any additional clockticks, per se, I  
don't think - it'd just behave as most would expect.

	Erik


On Apr 8, 2006, at 11:57 AM, karl wettin wrote:

>
> 8 apr 2006 kl. 13.06 skrev Erik Hatcher:
>
>> Feel free to log this as a bug report in our JIRA issue tracker.   
>> It seems like a reasonable change to make, such that a  
>> WildcardQuery without a wildcard character would behave like  
>> TermQuery.
>
> -1
>
> Even though very few, it is a waste of clockticks. I belive that  
> any lib always should try to force the developer to write optimized  
> code. If you for some reason need to autotedetect wildcard/term  
> query, the developer should write a facade.
>
> Another error message could be good though.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 18:50:54 2006
Return-Path: <java-user-return-20058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15518 invoked from network); 8 Apr 2006 18:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 18:50:54 -0000
Received: (qmail 85114 invoked by uid 500); 8 Apr 2006 18:50:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85072 invoked by uid 500); 8 Apr 2006 18:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85039 invoked by uid 99); 8 Apr 2006 18:50:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:50:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 11:50:48 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 61E9C5B76E; Sat,  8 Apr 2006 11:50:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4E9F97F403
	for <java-user@lucene.apache.org>; Sat,  8 Apr 2006 11:50:18 -0700 (PDT)
Date: Sat, 8 Apr 2006 11:50:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com> 
 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: If I understand this right, I could build my own BooleanQuery in chunks of,
: say, 1,000 terms each by just adding words given me by the WildCardTermEnum,
: right?

if you took that approach, you would avoid getting a TooManyClauses
exception, but you could far more easily avoid it by increaseing the max
allowed clause count.

THe key to the whole issue of query expansion is to understand (1) why
some queries expand, (2) what happens when they expand, and (3) why
BooleanQuery.maxClauseCount exists.

let's answer those slightly out of order...

(2) Queries like PrefixQuery and WildCardQuery expand to a BooleanQuery
containing TermQueries for each of the individual terms in the index
that "match" the prefix or the wildcard pattern.  Each of these
TermQueries has it's own TermWeight and TermScorer -- which means that the
resulting score of a document that contains some terms which match the
orriginal Prefix/WIldCard pattern is determined by the TF and IDF of those
terms (relative the document)

(1) why this happens arguably has two answers:
  a) because that's just the way it was implimented orriginally
  b) because it usually makes sense to work that way.
(a) doesn't really merrit much alaboration, but (b) might make more sense
if you consider what happens when you do a search for the prefix "ca*" ...
if document X contains the text "the cat was in the car" it makes sense
that you want it to score higher then document Y which just contains "the
cat was on the roof".  If the terms "cat" and "car" appear in almost all
of your documents, but some document Z is the only document to contain
the terms "cap" and "can" then it might also make sense that Z should
score high since it not only matches the prefix but it matches it with
unique terms  (you may disagree with this sentiment, but i'm just
expalining the rationale)

(3) so what's the deal with maxClauseCount?   If you have a big index,
with lots of terms then a sufficiently general prefix/wildcard can be
rewritten into a really honking big BooleanQuery, which can take up a lot
of RAM (for all of those TermQueries and TermWeights and TermSCorerers)
and can take a lot of time to execute.  If you've got gobs abd gobs
of RAM, and don't care how long your queries take, then
set the maxClauseCount to MAX_INT and forget about.  maxClauseCount is
just there as a safety valve to protect you.

Which brings us back to your question....

: If I understand this right, I could build my own BooleanQuery in chunks of,
: say, 1,000 terms each by just adding words given me by the WildCardTermEnum,
: right?

if you did that, then the resulting query would take up just as much RAM
(if not more), and it would take just as long to execute (if not more) as
if you called setMaxCLauseCount(MAX_INT) and used a regular WildCardQuery.


Erik suggested two independent ways of addressing your problem, which can
acctually be combined to make things even better -- the first is the
character rotation idea which has been discussed in more detail on the
list in the past (try googling "lucene wildcard rotate")

The second was to build a *Filter* that uses WildcardTermEnum -- not a
Query.  This would benefit you in the same way RangeFilter benefits people
who get TooManyClauses using RangeQuery ... because it's a filter, the
scoring aspects of each document are taken out of the equation -- a
complete set of TermQueries/TermScorers doesn't need to be built in
memory, you can just iterate over the applicable Terms at query time.

Take a look at RangeFilter and (Solr's) PrefixFilter for an example of
whats involved in writing a Filter thta uses Term Enumerators, and then
re-think about Erik's suggestion.  Once you have a "WildcardFilter"
wrapping it in a ConstantScoreQuery would give you a drop in replacement
for WildCardQuery that would sacrifive the TF/IDF scoring factors for
speed and garunteed execution on any pattern in any index regardless of
size.

Personally, i think a generic WildcardFilter would make a great
contribution to the Lucene core.

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/search/RangeFilter.java?view=markup
http://svn.apache.org/viewcvs.cgi/incubator/solr/trunk/src/java/org/apache/solr/search/PrefixFilter.java?view=markup



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 19:10:14 2006
Return-Path: <java-user-return-20059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22730 invoked from network); 8 Apr 2006 19:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 19:10:13 -0000
Received: (qmail 99097 invoked by uid 500); 8 Apr 2006 19:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99067 invoked by uid 500); 8 Apr 2006 19:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99050 invoked by uid 99); 8 Apr 2006 19:10:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 12:10:07 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 12:10:05 -0700
Received: by pproxy.gmail.com with SMTP id m51so751007pye
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 12:09:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qWIvjm9+EmyElyYfkbLP5qUK3vB+SRShW69d6aU96Vf2W8dFt3eOk2iqQp9WQFDiszqu8+JzV2MIvQGtcDy8OWiwEWIXRtkzdcBI9NDvlGha/5DljBj7LyWjMxk2fDXfIgS5z3LFTwSmIMhlP6n+XUsiMUYpRVcJryg1NafIMT0=
Received: by 10.35.131.4 with SMTP id i4mr1254954pyn;
        Sat, 08 Apr 2006 12:09:44 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 8 Apr 2006 12:09:44 -0700 (PDT)
Message-ID: <359a92830604081209m35e8f56bnf8f72c31db85a1cb@mail.gmail.com>
Date: Sat, 8 Apr 2006 15:09:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception in WildCardQuery
In-Reply-To: <8D350951-266E-4FB5-AB08-07243B84F1C6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19005_15809127.1144523384562"
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
	 <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
	 <C70288EC-1034-4F9E-B77B-736BCA01EB2F@snigel.net>
	 <8D350951-266E-4FB5-AB08-07243B84F1C6@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19005_15809127.1144523384562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

OK, I get it now. Obviously I didn't read your response as you meant it and
was focusing on the optimization part.

I'd also agree that using the most specific tool for the task is better
design. There's also an argument that "I'd rather have a library fail than
do something non-obvious". I'll leave it to Erik whether this would be an
'obvious' behavior <G>...

Thanks for clarifying.

Best
Erick

------=_Part_19005_15809127.1144523384562--

From java-user-return-20060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 19:28:26 2006
Return-Path: <java-user-return-20060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36337 invoked from network); 8 Apr 2006 19:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 19:28:25 -0000
Received: (qmail 11750 invoked by uid 500); 8 Apr 2006 19:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11722 invoked by uid 500); 8 Apr 2006 19:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11711 invoked by uid 99); 8 Apr 2006 19:28:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 12:28:20 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 12:28:19 -0700
Received: by pproxy.gmail.com with SMTP id m51so752888pye
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 12:27:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sVfGLwGEJytjwbuFb34iBS6IOrZL0jxO9FcTW7ofeaeJb6fsXu4hnjkO0IHHW9fIwcUipCIPijbuJHetBZpRSBRcsfeQb70+Ne2nwNmSVicQ53tSiYT/fh4WmHV5WXdI12hAhc4iamU4cmWIxo530W0z2fCcs+8SWDWDy7MJLz8=
Received: by 10.35.50.9 with SMTP id c9mr2265448pyk;
        Sat, 08 Apr 2006 12:27:58 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 8 Apr 2006 12:27:58 -0700 (PDT)
Message-ID: <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
Date: Sat, 8 Apr 2006 15:27:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19193_9548864.1144524478737"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
	 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
	 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19193_9548864.1144524478737
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris:

Thanks for that exposition, that helps me greatly.  I didn't mention that I
tried increasing the MaxAllowedClause count and ran out of memory. And that
I don't trust those kinds of tweaks anyway. They'll blow up sometime,
somewhere and I'll get a phone call because our product is offline and
customers are screaming. Been there, done that, don't want to do it again
<G>.

I'm reluctant to do the wildcard rotation thing, b/c I assume it'll increas=
e
my index size, but that's just an uninformed assumption. I'll look in the
places you indicated and re-think that. My index is already 3G, most all of
it in the field I have to search via wildcards....

And I wasn't really proposing my own chunked boolean query. In fact I hadn'=
t
thought much about what I was *really* going to do, had to go buy frogs.
Mostly, I was seeing if I understood what a WildcardTermEnum did. But given
that it seems to have prompted you to write some of my code for me, or at
least point me at a place where I can steal some, I'm glad I wrote a
half-baked response.

But right now I have to go deal with the pond and the fish. Which is
entirely unrelated to the frogs......

Thanks again for taking the time to explain this to me (and others out
there). It's a great help.

Erick

------=_Part_19193_9548864.1144524478737--

From java-user-return-20061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 23:20:07 2006
Return-Path: <java-user-return-20061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10847 invoked from network); 8 Apr 2006 23:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 23:20:06 -0000
Received: (qmail 1555 invoked by uid 500); 8 Apr 2006 23:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1095 invoked by uid 500); 8 Apr 2006 23:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1069 invoked by uid 99); 8 Apr 2006 23:20:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 16:20:00 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.127.200.81] (HELO sccrmhc11.comcast.net) (204.127.200.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 16:20:00 -0700
Received: from [192.168.1.100] (c-24-99-72-157.hsd1.ga.comcast.net[24.99.72.157])
          by comcast.net (sccrmhc11) with ESMTP
          id <2006040823193901100fa7mre>; Sat, 8 Apr 2006 23:19:39 +0000
Message-ID: <44384508.2000102@comcast.net>
Date: Sat, 08 Apr 2006 19:19:36 -0400
From: Berlin Brown <bigbinc097@comcast.net>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene and top words query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I noticed when using the Luke tool that I it provides a set of top words 
from an index.  What is a programmatic way of doing this?

-- 
Berlin Brown
(ramaza3 on freenode)
http://www.newspiritcompany.com
also checkout alpha version of botverse: 
http://www.newspiritcompany.com:8086/universe_home


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 08 23:43:32 2006
Return-Path: <java-user-return-20062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19421 invoked from network); 8 Apr 2006 23:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Apr 2006 23:43:32 -0000
Received: (qmail 17647 invoked by uid 500); 8 Apr 2006 23:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17621 invoked by uid 500); 8 Apr 2006 23:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17610 invoked by uid 99); 8 Apr 2006 23:43:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 16:43:25 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pepone.onrez@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nproxy.gmail.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 16:43:23 -0700
Received: by nproxy.gmail.com with SMTP id c29so513673nfb
        for <java-user@lucene.apache.org>; Sat, 08 Apr 2006 16:43:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oY1cPVBPxUmPt88KC/rnTKi0pZtw1m0v0lGQyaoBnJ1aD37iowcRnmVeCLE38gj+MUBK2JW94hp1R1cMtpIV9uawAC6E/Lnl2VVmqQh5RZb3mTxN/AXC4vmYd0/5uJqpTG6lYPMIaRjiHqCQwPzPh1sD+juZaQzbhjcEgbcMKeU=
Received: by 10.49.64.20 with SMTP id r20mr2244048nfk;
        Sat, 08 Apr 2006 16:43:02 -0700 (PDT)
Received: by 10.48.157.2 with HTTP; Sat, 8 Apr 2006 16:43:02 -0700 (PDT)
Message-ID: <198501d60604081643n46724866y1484965e86ef8c8a@mail.gmail.com>
Date: Sun, 9 Apr 2006 01:43:02 +0200
From: "pepone pepone" <pepone.onrez@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: HOT SPOT VIRTUAL MACHINE aleatory crash while index documents
In-Reply-To: <198501d60604081642i603c6a59s7ec7a6955d5b9246@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1272_3757052.1144539782012"
References: <198501d60604071752y15867ee9x7296df76457e0bc3@mail.gmail.com>
	 <200604081305.24453@danielnaber.de>
	 <198501d60604081642i603c6a59s7ec7a6955d5b9246@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1272_3757052.1144539782012
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

---------- Forwarded message ----------
From: pepone pepone <pepone.onrez@gmail.com>
Date: Apr 9, 2006 1:42 AM
Subject: Re: HOT SPOT VIRTUAL MACHINE aleatory crash while index documents
To: Daniel Naber <lucenelist2005@danielnaber.de>


i change to Sun JVM but crash persist the crass is a lot aleatory and
occurrs after index and search thowsands of objets

last crash while searching using this code when call is.search()

synchronized public ResultSet search(
        String q,
        int page,
        Current current)

    {
        PerFieldAnalyzerWrapper analyzerWrapper =3D
            new PerFieldAnalyzerWrapper(new StandardAnalyzer());
        analyzerWrapper.addAnalyzer ("identity",new KeywordAnalyzer());
        analyzerWrapper.addAnalyzer("type",new KeywordAnalyzer());
        analyzerWrapper.addAnalyzer("name",new KeywordAnalyzer());
        analyzerWrapper.addAnalyzer ("path",new KeywordAnalyzer());
        analyzerWrapper.addAnalyzer("parent-id",new KeywordAnalyzer());
        System.out.println("Query: "+q);
        int resultsPerPage=3D15;
        ResultSet resultSet=3Dnew ResultSet();
        resultSet.query=3Dq;
        resultSet.page=3Dpage;
        resultSet.results=3Dnew ArrayList();
        System.out.println("resultset build OK");
        Directory fsDir=3Dnull;
        IndexSearcher is=3Dnull;
        try
        {
            fsDir=3DFSDirectory.getDirectory(indexDir,false);
            System.out.println("FSDirectory build OK");
            is=3Dnew IndexSearcher(fsDir);
            System.out.println ("IndexSearcher build OK");
            QueryParser parser=3Dnew QueryParser("contents",analyzerWrapper=
);
            System.out.println("Query build OK");
            Query query=3Dparser.parse (q);
            System.out.println("Query parse OK");
            long start=3Dnew Date().getTime();
            Hits hits=3Dis.search(query);
            long end=3Dnew Date().getTime();

            System.out.println("Found " +
                    hits.length() +
                    " document(s) in " +
                    (end-start) +
                    " milliseconds");

            resultSet.pages=3Dhits.length()/resultsPerPage;
            if((hits.length()%resultsPerPage)>0)
            {
                resultSet.pages++;
            }
            resultSet.size=3Dhits.length ();
            int firstResult=3D(page*resultsPerPage);
            for(
                int i=3DfirstResult;
                    (i<hits.length()) &&
                    (i<firstResult+resultsPerPage);
                i++)
            {
                ObjectMetadata metadata=3Dnew ObjectMetadataI();
                Document doc=3Dhits.doc(i);
                metadata.objectId=3Ddoc.get("identity");
                resultSet.results.add(metadata);
            }
            is.close();
            fsDir.close();
        }
        catch(Exception e)
        {
            try
            {
                e.printStackTrace();
                if(is!=3Dnull)
                    is.close();
                if(fsDir!=3Dnull)
                    fsDir.close();
            }
            catch(java.io.IOException ex)
            {
                ex.printStackTrace();
            }
        }
        return resultSet;

    }




#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=3D0xb7c78c59, pid=3D12714, tid=3D2695793584
#
# Java VM: Java HotSpot(TM) Client VM (1.4.2_10-b03 compiled mode)
# Problematic frame:
# V  [libjvm.so+0x285c59]

#

---------------  T H R E A D  ---------------

Current thread (0x08090c88):  VMThread [id=3D12714]

siginfo:si_signo=3D11, si_errno=3D0, si_code=3D1, si_addr=3D0x887d647b

Registers:
EAX=3D0x887d641b, EBX=3D0xb7e1bef0, ECX=3D0x00000001, EDX=3D0xad6664f8
ESP=3D0xa0ae7fc0, EBP=3D0xa0ae7fd8, ESI=3D0xa529ba28, EDI=3D0xa1badb80
EIP=3D0xb7c78c59, CR2=3D0x887d647b, EFLAGS=3D0x00010246

Top of Stack: (sp=3D0xa0ae7fc0)
0xa0ae7fc0:   ad6664f8 a529ba28 b7e1bef0 00000001
0xa0ae7fd0:   a0ae8078 a5f56e00 a0ae7fe8 b7cceb60
0xa0ae7fe0:   0806b450 b7e1bef0 a0ae7ffc b7b7a581
0xa0ae7ff0:   a0ae8014 0806b450 b7e1bef0 a0ae801c
0xa0ae8000:   b7b7a9c2 0806b330 a0ae8014 00000001
0xa0ae8010:   b7e1bef0 a0ae8034 b7e19908 a0ae802c
0xa0ae8020:   b7cce4a2 0806b330 b7e1bef0 a0ae8050
0xa0ae8030:   b7b726bf a0ae8078 0806b330 b7e1bef0

Instructions: (pc=3D0xb7c78c59)
0xb7c78c49:   83 f8 03 75 18 8b 46 04 8d 50 08 8b 40 08 56 52
0xb7c78c59:   8b 40 60 ff d0 83 c4 08 8d 34 86 eb 07 8b 06 89

Stack: [0xa0a76000,0xa0ae9000),  sp=3D0xa0ae7fc0,  free space=3D455k

Native frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code, C=3D=
native
code)
V  [libjvm.so+0x285c59]
V  [libjvm.so+0x2dbb60]
V  [libjvm.so+0x187581]
V  [libjvm.so+0x1879c2]
V  [libjvm.so+0x2db4a2]
V  [libjvm.so+0x17f6bf]
V  [libjvm.so+0x181008]
V  [libjvm.so+0x180b5d]
V  [libjvm.so+0x187908]
V  [libjvm.so+0x2a4ab4]
V  [libjvm.so+0x17e5bd]
V  [libjvm.so+0x1548dd]
V  [libjvm.so+0x1805e3]
V  [libjvm.so+0x2cb695 ]
V  [libjvm.so+0x2cb5cd]
V  [libjvm.so+0x2ca867]
V  [libjvm.so+0x2cab01]
V  [libjvm.so+0x2ca72a]
V  [libjvm.so+0x260113]

C  [libpthread.so.0+0x5aba]

VM_Operation (0x9fefca50): generation collection for allocation, mode:
safepoint, requested by thread 0x0812e670



---------------  P R O C E S S  ---------------

Java Threads: ( =3D> current thread )
  0x0812ef08 JavaThread "LuceneServer-Ice.ThreadPool.Client-0"
[_thread_in_native, id=3D12714]
  0x0812ed10 JavaThread " LuceneServer-Ice.ThreadPool.Server-0"
[_thread_in_native, id=3D12714]
  0x0813a1d0 JavaThread "LuceneServer-Ice.ThreadPool.Client-0"
[_thread_in_native, id=3D12714]
  0x0812e670 JavaThread "LuceneServer-Ice.ThreadPool.Server-0 "
[_thread_blocked, id=3D12714]
  0x0812c7b8 JavaThread "LuceneServer-Ice.ConnectionMonitor"
[_thread_blocked, id=3D12714]
  0x080c8248 JavaThread "LuceneServer-Ice.ConnectionMonitor"
[_thread_blocked, id=3D12714]
  0x08097a80 JavaThread "CompilerThread0" daemon [_thread_blocked, id=3D127=
14]
  0x08096c98 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
id=3D12714]
  0x08093960 JavaThread "Finalizer" daemon [_thread_blocked, id=3D12714]
  0x08091ef0 JavaThread "Reference Handler" daemon [_thread_blocked,
id=3D12714]
  0x0805bdc0 JavaThread "main" [_thread_blocked, id=3D12714]

Other Threads:
=3D>0x08090c88 VMThread [id=3D12714]
  0x08099518 WatcherThread [id=3D12714]


VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0805b588/0x0805b5b8] Threads_lock - owner thread: 0x08090c88
[0x0805b8b8/0x0805b8d8] Heap_lock - owner thread: 0x0812e670

Heap
 def new generation   total 5184K, used 575K [0xa0c10000, 0xa11b0000,
0xa1b70000)
  eden space 4608K,   0% used [0xa0c10000, 0xa0c10000, 0xa1090000)
  from space 576K,  99% used [0xa1090000, 0xa111fff8, 0xa1120000)
  to   space 576K,   0% used [0xa1120000, 0xa1120000, 0xa11b0000)
 tenured generation   total 69628K, used 69531K [0xa1b70000, 0xa5f6f000,
0xad410000)
   the space 69628K,  99% used [0xa1b70000, 0xa5f56e00, 0xa3040c00,
0xa5f6f000)
 compacting perm gen  total 4096K, used 3136K [0xad410000, 0xad810000,
0xb3810000)
   the space 4096K,  76% used [0xad410000, 0xad7203a0, 0xad720400,
0xad810000)

Dynamic libraries:
08048000-08056000 r-xp 00000000 08:01 223622     /opt/sun-jdk-1.4.2.10
/bin/java
08056000-08059000 rwxp 0000d000 08:01 223622     /opt/sun-jdk-1.4.2.10
/bin/java
08059000-08176000 rwxp 08059000 00:00 0          [heap]
9fa00000-9fa21000 rwxp 9fa00000 00:00 0
9fa21000-9fb00000 ---p 9fa21000 00:00 0
9fb7d000-9fb7e000 ---p 9fb7d000 00:00 0
9fb7e000-9fb8b000 rwxp 9fb7e000 00:00 0
9fb8b000-9fb8e000 ---p 9fb8b000 00:00 0
9fb8e000-9fbfe000 rwxp 9fb8e000 00:00 0
9fbfe000-9fbff000 ---p 9fbfe000 00:00 0
9fbff000-9fc0c000 rwxp 9fbff000 00:00 0
9fc0c000-9fc0f000 ---p 9fc0c000 00:00 0
9fc0f000-9fc7f000 rwxp 9fc0f000 00:00 0
9fc7f000-9fc80000 ---p 9fc7f000 00:00 0
9fc80000-9fc8d000 rwxp 9fc80000 00:00 0
9fc8d000-9fc90000 ---p 9fc8d000 00:00 0
9fc90000-9fe00000 rwxp 9fc90000 00:00 0
9fe7d000-9fe7e000 ---p 9fe7d000 00:00 0
9fe7e000-9fe8b000 rwxp 9fe7e000 00:00 0
9fe8b000-9fe8e000 ---p 9fe8b000 00:00 0
9fe8e000-9fefe000 rwxp 9fe8e000 00:00 0
9fefe000-9feff000 ---p 9fefe000 00:00 0
9feff000-9ff0c000 rwxp 9feff000 00:00 0
9ff0c000-9ff0f000 ---p 9ff0c000 00:00 0
9ff0f000-9ff7f000 rwxp 9ff0f000 00:00 0
9ff7f000-9ff80000 ---p 9ff7f000 00:00 0
9ff80000-9ff8d000 rwxp 9ff80000 00:00 0
9ff8d000-9ff90000 ---p 9ff8d000 00:00 0
9ff90000-a00fe000 rwxp 9ff90000 00:00 0
a00fe000-a0100000 ---p a00fe000 00:00 0
a0156000-a019b000 rwxp a0156000 00:00 0
a019b000-a01ac000 r-xp 00000000 08:01 791440     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libnet.so
a01ac000-a01ad000 rwxp 00010000 08:01 791440   =20
/opt/sun-jdk-1.4.2.10/jre/lib/i386/libnet.so

a01ad000-a01c1000 r-xs 00000000 16:05 292394     /home/pepone/announcements=
-
0.0.3/lib/oz.searchs.jar
a01c1000-a01e2000 r-xs 00000000 16:05 189505     /home/pepone/announcements=
-
0.0.3/lib/oz.files.jar
a01e2000-a0247000 r-xs 00000000 08:01 597630
/opt/proguard3.4/lib/proguard.jar
a0247000-a02ad000 r-xs 00000000 08:01 176167     /opt/lucene/lucene.jar
a02ad000-a0300000 r-xs 00000000 08:01 596206     /opt/looks-1.3.2/looks-
1.3.2.jar
a0300000-a03ff000 rwxp a0300000 00:00 0
a03ff000-a0400000 ---p a03ff000 00:00 0
a040b000-a042f000 r-xs 00000000 16:05 292395     /home/pepone/announcements=
-
0.0.3/lib/oz.base.jar
a042f000-a044e000 r-xs 00000000 08:01 597633
/opt/proguard3.4/lib/proguardgui.jar
a044e000-a0463000 r-xs 00000000 08:01 594812     /opt/forms- 1.0.5/forms-
1.0.5.jar
a0463000-a0542000 r-xs 00000000 08:01 88113      /opt/Ice-3.0.1/lib/Ice.jar
a0542000-a05fe000 r-xs 00000000 08:01 790968     /opt/sun-jdk-1.4.2.10
/jre/lib/ext/localedata.jar
a05fe000-a05ff000 ---p a05fe000 00:00 0
a05ff000-a067f000 rwxp a05ff000 00:00 0
a067f000-a0680000 ---p a067f000 00:00 0
a0680000-a068d000 rwxp a0680000 00:00 0
a068d000-a0690000 ---p a068d000 00:00 0
a0690000-a07fe000 rwxp a0690000 00:00 0
a07fe000-a0800000 ---p a07fe000 00:00 0
a080b000-a083b000 r-xs 00000000 08:01 123041     /opt/db/lib/db.jar
a083b000-a0857000 r-xs 00000000 08:01 790969     /opt/sun-jdk-1.4.2.10
/jre/lib/ext/sunjce_provider.jar
a0857000-a0864000 r-xs 00000000 08:01 790967     /opt/sun-jdk-1.4.2.10
/jre/lib/ext/ldapsec.jar
a0864000-a0865000 ---p a0864000 00:00 0
a0865000-a0872000 rwxp a0865000 00:00 0
a0872000-a0875000 ---p a0872000 00:00 0
a0875000-a08e5000 rwxp a0875000 00:00 0
a08e5000-a08e6000 ---p a08e5000 00:00 0
a08e6000-a0966000 rwxp a08e6000 00:00 0
a0966000-a0967000 ---p a0966000 00:00 0
a0967000-a0974000 rwxp a0967000 00:00 0
a0974000-a0977000 ---p a0974000 00:00 0
a0977000-a09e7000 rwxp a0977000 00:00 0
a09e7000-a09e8000 ---p a09e7000 00:00 0
a09e8000-a09f5000 rwxp a09e8000 00:00 0
a09f5000-a09f8000 ---p a09f5000 00:00 0
a09f8000-a0a68000 rwxp a09f8000 00:00 0
a0a68000-a0a69000 ---p a0a68000 00:00 0
a0a69000-a0aec000 rwxp a0a69000 00:00 0
a0aec000-a0b1c000 rwxp a0aec000 00:00 0
a0b1c000-a0b3e000 rwxp a0b1c000 00:00 0
a0b3e000-a0b79000 rwxp a0b3e000 00:00 0
a0b79000-a0b7c000 rwxp a0b79000 00:00 0
a0b7c000-a0b80000 rwxp a0b7c000 00:00 0
a0b80000-a0ba3000 rwxp a0b80000 00:00 0
a0ba3000-a0bdd000 rwxp a0ba3000 00:00 0
a0bdd000-a0bdf000 rwxp a0bdd000 00:00 0
a0bdf000-a0c0f000 rwxp a0bdf000 00:00 0
a0c0f000-a11b0000 rwxp a0c0f000 00:00 0
a11b0000-a1b70000 rwxp a11b0000 00:00 0
a1b70000-a5f6f000 rwxp a1b70000 00:00 0
a5f6f000-ad410000 rwxp a5f6f000 00:00 0
ad410000-ad810000 rwxp ad410000 00:00 0
ad810000-b3810000 rwxp ad810000 00:00 0
b3812000-b384b000 rwxp b3812000 00:00 0
b384b000-b38ba000 rwxp b384b000 00:00 0
b38ba000-b3cf2000 rwxp b38ba000 00:00 0
b3cf2000-b58ba000 rwxp b3cf2000 00:00 0
b58ba000-b5e5c000 r-xs 00000000 08:01 577820     /opt/sun- jdk-1.4.2.10
/jre/lib/charsets.jar
b5e5c000-b5e6e000 r-xs 00000000 08:01 578049     /opt/sun-jdk-1.4.2.10
/jre/lib/jce.jar
b5e6e000-b5f4b000 r-xs 00000000 08:01 578050     /opt/sun-jdk-1.4.2.10
/jre/lib/jsse.jar
b5f4b000-b5f61000 r-xs 00000000 08:01 578058     /opt/sun- jdk-1.4.2.10
/jre/lib/sunrsasign.jar
b5f61000-b5fab000 rwxp b5f61000 00:00 0
b5fab000-b7954000 r-xs 00000000 08:01 578057     /opt/sun-jdk-1.4.2.10
/jre/lib/rt.jar
b7954000-b7968000 r-xp 00000000 08:01 791444     /opt/sun- jdk-1.4.2.10
/jre/lib/i386/libzip.so
b7968000-b796b000 rwxp 00013000 08:01 791444     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libzip.so
b796b000-b798b000 r-xp 00000000 08:01 790998   =20
/opt/sun-jdk-1.4.2.10/jre/lib/i386/libjava.so

b798b000-b798d000 rwxp 0001f000 08:01 790998     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libjava.so
b798d000-b7995000 r-xp 00000000 08:01 707624     /lib/libnss_files-2.3.5.so
b7995000-b7997000 rwxp 00007000 08:01 707624     /lib/libnss_files- 2.3.5.s=
o
b7997000-b799e000 r-xp 00000000 08:01 707273     /lib/libnss_compat-2.3.5.s=
o
b799e000-b79a0000 rwxp 00006000 08:01 707273     /lib/libnss_compat-2.3.5.s=
o
b79a1000-b79a7000 r-xp 00000000 08:01 791441     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libnio.so
b79a7000-b79a8000 rwxp 00005000 08:01 791441     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libnio.so
b79a8000-b79aa000 r-xs 00000000 08:01 597631
/opt/proguard3.4/lib/retrace.jar
b79aa000-b79ba000 r-xp 00000000 08:01 791443     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libverify.so
b79ba000-b79bc000 rwxp 0000f000 08:01 791443     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/libverify.so
b79bc000-b79dc000 r-xp 00000000 08:01 707646     /lib/libm- 2.3.5.so
b79dc000-b79de000 rwxp 0001f000 08:01 707646     /lib/libm-2.3.5.so
b79de000-b79ef000 r-xp 00000000 08:01 707185     /lib/libnsl- 2.3.5.so
b79ef000-b79f1000 rwxp 00010000 08:01 707185     /lib/libnsl-2.3.5.so
b79f1000-b79f3000 rwxp b79f1000 00:00 0
b79f3000-b7e03000 r-xp 00000000 08:01 791390     /opt/sun- jdk-1.4.2.10
/jre/lib/i386/client/libjvm.so
b7e03000-b7e1f000 rwxp 0040f000 08:01 791390     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/client/libjvm.so
b7e1f000-b7e33000 rwxp b7e1f000 00:00 0
b7e33000-b7f3f000 r-xp 00000000 08:01 707831     /lib/libc- 2.3.5.so
b7f3f000-b7f40000 r-xp 0010c000 08:01 707831     /lib/libc-2.3.5.so
b7f40000-b7f43000 rwxp 0010d000 08:01 707831     /lib/libc- 2.3.5.so
b7f43000-b7f45000 rwxp b7f43000 00:00 0
b7f45000-b7f47000 r-xp 00000000 08:01 707633     /lib/libdl-2.3.5.so
b7f47000-b7f49000 rwxp 00001000 08:01 707633     /lib/libdl- 2.3.5.so
b7f49000-b7f57000 r-xp 00000000 08:01 707706     /lib/libpthread-2.3.5.so
b7f57000-b7f58000 r-xp 0000d000 08:01 707706     /lib/libpthread- 2.3.5.so
b7f58000-b7f59000 rwxp 0000e000 08:01 707706     /lib/libpthread-2.3.5.so
b7f59000-b7f5c000 rwxp b7f59000 00:00 0
b7f5d000-b7f5e000 r-xp b7f5d000 00:00 0
b7f5e000-b7f61000 r-xs 00000000 08:01 790966     /opt/sun- jdk-1.4.2.10
/jre/lib/ext/dnsns.jar
b7f61000-b7f65000 rwxs 00000000 08:01 778127
/tmp/hsperfdata_pepone/12714
b7f65000-b7f6d000 r-xp 00000000 08:01 707642     /lib/libnss_nis-2.3.5.so
b7f6d000-b7f6f000 rwxp 00007000 08:01 707642     /lib/libnss_nis-2.3.5.so
b7f6f000-b7f77000 r-xp 00000000 08:01 791445     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/native_threads/libhpi.so
b7f77000-b7f78000 rwxp 00007000 08:01 791445     /opt/sun-jdk-1.4.2.10
/jre/lib/i386/native_threads/libhpi.so
b7f78000-b7f8d000 r-xp 00000000 08:01 704920     /lib/ld-2.3.5.so
b7f8d000-b7f8e000 r-xp 00014000 08:01 704920     /lib/ld- 2.3.5.so
b7f8e000-b7f8f000 rwxp 00015000 08:01 704920     /lib/ld-2.3.5.so
bfb8e000-bfb98000 rwxp bfb8e000 00:00 0
bfb98000-bfb9b000 ---p bfb98000 00:00 0
bfd77000-bfd8d000 rwxp bfd77000 00:00 0          [stack]

ffffe000-fffff000 ---p 00000000 00:00 0          [vdso]

VM Arguments:
jvm_args: -Xmx200m -XX:MaxPermSize=3D100m -Xcomp -Xbatch

java_command: IceBox.Server --
Ice.Config=3D/home/pepone/announcements-0.0.3/DB/icegrid/titanio/servers/Lu=
ceneServer/config/config--
Ice.Default.Locator=3DIceGrid/Locator:tcp -h 192.168.0.197 -p 14000 --
Ice.ServerId=3DLuceneServer
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=3D/opt/sun-jdk-1.4.2.10

CLASSPATH=3D/opt/db/lib/db.jar:/opt/Ice-3.0.1/lib/Ice.jar:/opt/forms-1.0.5
/forms-
1.0.5.jar:/opt/looks-1.3.2/looks-1.3.2.jar:/opt/lucene/lucene.jar:/opt/prog=
uard3.4/lib/proguard.jar:/opt/proguard3.4/lib/proguardgui.jar:/opt/proguard=
3.4/lib/retrace.jar:/home/pepone/announcements-0.0.3/lib/oz.base.jar:/home/=
pepone/announcements-0.0.3/lib/oz.files.jar:/home/pepone/announcements-0.0.=
3/lib/oz.announcements.jar:/home/pepone/announcements-0.0.3/lib/oz.searchs.=
jar:.
PATH=3D/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/i686-pc-linux-gnu/gcc-bin=
/3.3.6:/opt/db/bin:/opt/eclipse:/opt/Ice-
3.0.1/bin:/opt/appweb/bin:/opt/gsasl/bin:/opt/gsoap/bin:/home/pepone/Deskto=
p/WebServer/bin:/opt/vmime/bin:/home/pepone/announcements-
0.0.3/bin:/opt/sun-jdk-1.4.2.10/bin:/opt/sun-jdk-1.4.2.10/jre/bin:/opt/sun-
jdk-1.4.2.10
/jre/javaws:/usr/kde/3.5/bin:/usr/qt/3/bin:/usr/kde/3.4/bin:/var/qmail/bin
LD_LIBRARY_PATH=3D/opt/sun-jdk-1.4.2.10/jre/lib/i386/client:/opt/sun-
jdk-1.4.2.10/jre/lib/i386:/opt/sun-jdk-1.4.2.10/jre/../lib/i386

SHELL=3D/bin/bash
DISPLAY=3D:0


---------------  S Y S T E M  ---------------

OS:Gentoo Base System version 1.12.0_pre16

uname:Linux 2.6.14-gentoo-r5 #1 SMP PREEMPT Tue Dec 20 16:13:37 Local time
zone must be set-- i686
libc:glibc 2.3.5 NPTL 2.3.5
rlimit: STACK 32768k, CORE 0k, NPROC 7168, NOFILE 10024, AS infinity
load average:0.00
892338971626530206183588671196832984722633621788130331215102205300636246640=
167087065942207599803945680832970646747816151778492312448389372426194099437=
193226531085000112530071242553314017682228799604587721985114735591151212779=
7013084664802923604216905728.00
930350597881250712022081369897603199290916760268293156580364459530023160813=
685328236632860246669793401328290751418966613683928528746119457619528329061=
56194444428204035693455802740152193580485809537024.00


CPU:total 2 family 15, cmov, cx8, fxsr, mmx, sse, sse2

Memory: 4k page, physical 904980k(26148k free), swap 996020k(841876k free)

vm_info: Java HotSpot(TM) Client VM (1.4.2_10-b03) for linux-x86, built on
Oct 10 2005 15:31:45 by unknown with unknown compiler



On 4/8/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
>
> On Samstag 08 April 2006 02:52, pepone pepone wrote:
>
> > # Java VM: Java HotSpot(TM) Client VM (Blackdown-1.4.2-03 mixed mode)
>
> You should try using the original JVM from Sun.
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>



--
play tetris http://pepone.on-rez.com/tetris


--
play tetris http://pepone.on-rez.com/tetris

------=_Part_1272_3757052.1144539782012--

From java-user-return-20063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 00:50:33 2006
Return-Path: <java-user-return-20063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45067 invoked from network); 9 Apr 2006 00:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 00:50:33 -0000
Received: (qmail 43890 invoked by uid 500); 9 Apr 2006 00:50:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43863 invoked by uid 500); 9 Apr 2006 00:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43852 invoked by uid 99); 9 Apr 2006 00:50:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 17:50:28 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DATE_IN_PAST_12_24,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Apr 2006 17:50:27 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1FSO7u-0007Rj-7B
	for java-user@lucene.apache.org; Sun, 09 Apr 2006 02:50:02 +0200
Received: from pool-70-110-232-221.phil.east.verizon.net ([70.110.232.221])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 09 Apr 2006 02:50:02 +0200
Received: from arturo by pool-70-110-232-221.phil.east.verizon.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 09 Apr 2006 02:50:02 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Perez <arturo@ethicist.net>
Subject:  Exact date search doesn't work with 1.9.1?
Date:  Fri, 07 Apr 2006 22:45:08 -0400
Lines: 18
Message-ID:  <arturo-8A840C.22450807042006@sea.gmane.org>
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: pool-70-110-232-221.phil.east.verizon.net
User-Agent: MT-NewsWatcher/3.4 (PPC Mac OS X)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have a document with a date in it and I put it into a field like so:
DateTools.dateToString(theDate, Resolution.DAY), 
Field.Index.UN_TOKENIZED.

What I find is that a range query works:
[20060131 TO 20060601] and wildcard works e.g.
2006*
but exact matches do not work e.g.
20060130

Any ideas on how I am misusing the API?

This is 1.9.1.

tia,
-arturo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 09:27:05 2006
Return-Path: <java-user-return-20064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93660 invoked from network); 9 Apr 2006 09:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 09:27:05 -0000
Received: (qmail 74951 invoked by uid 500); 9 Apr 2006 09:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74380 invoked by uid 500); 9 Apr 2006 09:26:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74369 invoked by uid 99); 9 Apr 2006 09:26:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 02:26:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 02:26:57 -0700
Received: (qmail 17743 invoked from network); 9 Apr 2006 09:26:29 -0000
Received: from unknown (HELO p5496f96e.dip.t-dialin.net) ([pbs]695637@[84.150.249.110])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 Apr 2006 09:26:29 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Exact date search doesn't work with 1.9.1?
Date: Sun, 9 Apr 2006 11:26:37 +0200
User-Agent: KMail/1.8.2
References: <arturo-8A840C.22450807042006@sea.gmane.org>
In-Reply-To: <arturo-8A840C.22450807042006@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604091126.37680@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Samstag 08 April 2006 04:45, Perez wrote:

> Any ideas on how I am misusing the API?

Please use Luke to check what's in the index and if that doesn't help, post 
a small self-contained code snippet here.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 12:02:55 2006
Return-Path: <java-user-return-20065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35574 invoked from network); 9 Apr 2006 12:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 12:02:55 -0000
Received: (qmail 61773 invoked by uid 500); 9 Apr 2006 12:02:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61660 invoked by uid 500); 9 Apr 2006 12:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61621 invoked by uid 99); 9 Apr 2006 12:02:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 05:02:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 05:02:44 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k39C2MOn199936
	for <java-user@lucene.apache.org>; Sun, 9 Apr 2006 12:02:22 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k39C3DDe240608
	for <java-user@lucene.apache.org>; Sun, 9 Apr 2006 14:03:13 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k39C2L5I031920
	for <java-user@lucene.apache.org>; Sun, 9 Apr 2006 14:02:21 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k39C2LvE031914
	for <java-user@lucene.apache.org>; Sun, 9 Apr 2006 14:02:21 +0200
Subject: solution: RangeQuery with floating point numbers
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 August 18, 2005
Message-ID: <OFF47D56FA.099F2973-ONC225714B.003F4EB8-C225714B.00415323@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Sun, 9 Apr 2006 14:53:31 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 09/04/2006 15:03:12
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all,

As Lucene's documentation explain, RangeQuery (and ConstantScoreRangeQuery)
require their key to be strings which are lexicographically
(alphabetically) ordered.
"Lucene in Action", section 6.3.3 ("Handling numeric field-range queries")
explains
what to do when you need to range search in positive integers: in that
case,
you have to pad the numbers with leading zeros, so they all have the same
length and sort correctly.
Other people on this list suggested how to extend this trick for when you
have
signed integers.

But I wanted to go all the way to general "double"s, and do a RangeQuery
on them. Converting doubles into strings which sort in the correct
order is a non-trivial exercise, but is in fact doable. To prevent others
from needing to repeat this exercise, here is an example code that I wrote,
that does this. The code below isn't as long as it looks: most of it is
comments
which hopefull explain what I've done.

By the way, it is worth repeating the warning that appears everywhere
(including Lucene In Action): while this sort of trick works, RangeQuery
is extremely inefficient (and might not even work) when the number of
different values that are included in the range is very large.
ConstantScoreRangeQuery is better, but also inefficient. My code allows
you to use these queries for floating point values, but in no way makes this
use efficient :-(

P.S. I wonder if anyone can suggest an alternative implementation for
mantissaFormat() below, which doesn't require a DecimalFormat
object creation.


/**
 *  The doubleToSortableString function does a transformation which is
 *  currently necessary for implementing Range Constaints using Lucene's
 *  RangeQuery. This function converts floating-point numbers into strings
 *  which can be sorted in lexicographical order.
 *
 *  This conversion is easy for positive integers (which can be padded
 *  with leading zero), but much more complicated to do right for doubles
 *  which can be positive or negative, and have large ranges (1e-74 and
 *  1e74 are both perfectly fine as doubles, and we should handle them).
 *  We correctly handle numbers in double's entire range, but limit
 *  precision to 10 significant digits (this was a deliberate choice - 10
 *  decimal digits is enough to distinguish between 32 bit integers).
 *
 *  Unfortunately, we are not aware of a way of doing this sort of
 *  conversion while keeping the numbers readable. The result of the
 *  conversion (even for positive integers) will be unreadable to casual
 *  readers. It is therefore recommended to "STORE" the original number
 *  in the index, rather than the result of this conversion. It is
 *  possible to do this with the aid of a special Analyzer, which will
 *  carry out this conversion for the purpose of indexing (but will
 *  leave the un-analyzed value STOREd).
 *
 *  The conversion we carry out is one-to-one (up to the 10 decimal
 *  significant digits of precision), and it should be easy to carry
 *  out the reverse conversion. However, we haven't implmented this yet
 *  (because it shouldn't be necessary).
 */

/* Our string representation of a floating point number will look as
 * follows:
 *   SEEENN...
 * Where:
 *  1. S is the sign of the number, "n" for negative, "p" for positive.
 *     This ensures that all negative numbers come before all positive
 *     numbers. (In the alphabet, "n" comes before "p").
 *  2. EEE is the base-10 exponent leaving a mantissa between >=0.1, <1.0.
 *     We add 500 to it, to get all the negative and positive exponents
 *     into 3 digits (typically, a double's exponent can be between -308
 *     and 308). For negative numbers, we negate their exponent first.
 *     The idea is that positive numbers with lower exponent come before
 *     (are less) than those with higher exponent (1e-1 is smaller than
 *     1e2) and for negative numbers, this is reversed (-1e-1 is larger
 *     than -1e2).
 *     We assume that for Java doubles, the maximum exponent is around 300,
 *     so our addition of 500 is more than enough, and ensures that the
 *     result doesn't even need padding with zeros.
 *  3. NN... is the mantissa, >=0.1 and <1.0. When the original number is
 *     positive, we output the mantissa as a base 10 floating point without
 *     the initial "0.". For negative numbers, 1 minus the mantissa is
 *     printed instead (the result is <=0.9, >0). The mantissa is printed
 *     with a certain precision (up to 15 digits makes sense on most
 *     computers, but we don't need this sort of precision and we'll settle
 *     with 10 - enough for accurate representation of Java ints).
 *     Trailing zeros are not printed, which is ok, because "0.1" is
 *     lexicographically before "0.11".
 * Positive and negative Infinities are also supported, and generate
 * strings "pinf" and "n-inf", respectively, which sort after and before
 * all numbers, respectively. NaNs (Not-a-Number) are not supported,
 * because their sorting order relative to other numbers is undefined.
 *
 * Note that we chose base 10 representation because it was more convinient
 * to code and debug, as well as giving a shorter representation for
 * floating point numbers with a short decimal representation (say, 0.12).
 * However, using a larger base would have yielded a more compact
 * representation. It particular, it should be easy to half the length
 * of this function's output by converting its output to base 100.
 */
public static String doubleToSortableString(double d){
      boolean negative = d<0;
      if(negative)
            d= -d; // continue to work on the positive number
      int exponent = (int)Math.floor(Math.log(d)/log10 + 1);
      double mantissa = d * Math.exp(-exponent * log10);

      // If the exponent is very negative, we're at 0 - just print "p0",
      // which will sort before any positive number, but after every
      // negative number.
      if(exponent <= -400)
            return "p0";
      // If the exponent is too high, we're at infinity, either positive
      // or negative. Print "n-inf" (sorts before all negative numbers we
      // print) or "pinf" (sorts after all positive numbers we print).
      if(exponent >= 400)
            return negative ? "n-inf" : "pinf";

      if(negative)
            exponent = -exponent;
      exponent += 500;

      if(negative)
            return "n"+Integer.toString(exponent)+
                  mantissaFormat(1.0-mantissa);
      else
            return "p"+Integer.toString(exponent)+
                  mantissaFormat(mantissa);
}
private static final double log10 = Math.log(10);
// This function limits the number's precision to 10 significant decimal
// digits. See comment above for the rationale for this choice.
private static String mantissaFormat(double m){
      // Unfortunately, we need to create a new "DecimalFormat" object
      // every time, because that object is not thread safe. This may
      // be a performance bottleneck.
      DecimalFormat mantFormatter = new DecimalFormat(".##########");
                                                                          //  1234567890
      String result = mantFormatter.format(m);
      if(result.charAt(0)=='.')
            return result.substring(1); // remove initial "."
      else // 0.999.. was printed as 1.0. We don't want that.
            return "9999999999"; // we could have also printed "x" or anything that comes after all numbers.
                 // 1234567890
}



--
Nadav Har'El
nyh@il.ibm.com
+972-4-829-6326


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 14:16:30 2006
Return-Path: <java-user-return-20066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74475 invoked from network); 9 Apr 2006 14:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 14:16:30 -0000
Received: (qmail 16963 invoked by uid 500); 9 Apr 2006 14:16:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16932 invoked by uid 500); 9 Apr 2006 14:16:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16919 invoked by uid 99); 9 Apr 2006 14:16:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 07:16:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 07:16:23 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2011A33CA83; Sun,  9 Apr 2006 10:16:03 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9DF7733CA82
	for <java-user@lucene.apache.org>; Sun,  9 Apr 2006 10:16:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <arturo-8A840C.22450807042006@sea.gmane.org>
References: <arturo-8A840C.22450807042006@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Exact date search doesn't work with 1.9.1?
Date: Sun, 9 Apr 2006 10:15:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This could be a case of your QueryParser analyzer eating a number.   
Range queries and prefix/wildcard query terms are not analyzed.

Besides the great suggestion to use Luke, also try a TermQuery if you  
happen to be using QueryParser to create your Query currently.

	Erik


On Apr 7, 2006, at 10:45 PM, Perez wrote:

> Hi all,
>
> I have a document with a date in it and I put it into a field like so:
> DateTools.dateToString(theDate, Resolution.DAY),
> Field.Index.UN_TOKENIZED.
>
> What I find is that a range query works:
> [20060131 TO 20060601] and wildcard works e.g.
> 2006*
> but exact matches do not work e.g.
> 20060130
>
> Any ideas on how I am misusing the API?
>
> This is 1.9.1.
>
> tia,
> -arturo
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 14:30:50 2006
Return-Path: <java-user-return-20067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79498 invoked from network); 9 Apr 2006 14:30:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 14:30:50 -0000
Received: (qmail 26142 invoked by uid 500); 9 Apr 2006 14:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25695 invoked by uid 500); 9 Apr 2006 14:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25684 invoked by uid 99); 9 Apr 2006 14:30:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 07:30:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 07:30:44 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.6/8.13.6) with ESMTP id k39EUL8m075073
	for <java-user@lucene.apache.org>; Sun, 9 Apr 2006 16:30:22 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: solution: RangeQuery with floating point numbers
Date: Sun, 9 Apr 2006 16:30:20 +0200
User-Agent: KMail/1.8.2
References: <OFF47D56FA.099F2973-ONC225714B.003F4EB8-C225714B.00415323@il.ibm.com>
In-Reply-To: <OFF47D56FA.099F2973-ONC225714B.003F4EB8-C225714B.00415323@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604091630.20950.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sunday 09 April 2006 13:53, Nadav Har'El wrote:
> 
> Hi all,
> 
...
> 
> By the way, it is worth repeating the warning that appears everywhere
> (including Lucene In Action): while this sort of trick works, RangeQuery
> is extremely inefficient (and might not even work) when the number of
> different values that are included in the range is very large.
> ConstantScoreRangeQuery is better, but also inefficient. My code allows
> you to use these queries for floating point values, but in no way makes this
> use efficient :-(
> 
> P.S. I wonder if anyone can suggest an alternative implementation for
> mantissaFormat() below, which doesn't require a DecimalFormat
> object creation.
>
... 
> 
> /* Our string representation of a floating point number will look as
>  * follows:
>  *   SEEENN...

One can speed this up by also indexing prefixes as partial numbers in a
separate field, for example:
S
SE
SEE
SEEEN
SEEENN
SEEENNN
and adapt the numeric range search to use only the shortest 
ones needed. Iirc using base 3 for the digits N minimizes the
number of terms used for a range search in this case, but it's
quite a while ago that I did the math for this, and I did not include
the exponent digits E at the time...

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 19:04:00 2006
Return-Path: <java-user-return-20068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47680 invoked from network); 9 Apr 2006 19:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 19:04:00 -0000
Received: (qmail 97073 invoked by uid 500); 9 Apr 2006 19:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97045 invoked by uid 500); 9 Apr 2006 19:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97033 invoked by uid 99); 9 Apr 2006 19:03:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 12:03:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 12:03:53 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1FSfBi-0007oi-Uq
	for java-user@lucene.apache.org; Sun, 09 Apr 2006 21:03:06 +0200
Received: from pool-70-110-232-221.phil.east.verizon.net ([70.110.232.221])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 09 Apr 2006 21:03:06 +0200
Received: from arturo by pool-70-110-232-221.phil.east.verizon.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 09 Apr 2006 21:03:06 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Perez <arturo@ethicist.net>
Subject:  Re: Exact date search doesn't work with 1.9.1?
Date:  Sun, 09 Apr 2006 15:02:54 -0400
Lines: 47
Message-ID:  <arturo-3453B0.15024809042006@sea.gmane.org>
References:  <arturo-8A840C.22450807042006@sea.gmane.org> <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com>
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: pool-70-110-232-221.phil.east.verizon.net
User-Agent: MT-NewsWatcher/3.4 (PPC Mac OS X)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In article 
<008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com>,
 Erik Hatcher <erik@ehatchersolutions.com> wrote:

> This could be a case of your QueryParser analyzer eating a number.   
> Range queries and prefix/wildcard query terms are not analyzed.
> 
> Besides the great suggestion to use Luke, also try a TermQuery if you  
> happen to be using QueryParser to create your Query currently.
> 
> 	Erik
> 

Actually, that's another problem I have.  I can't search for numbers at 
all no how.  But the analyzer is just PorterStemmer(Lowercase(Stop))).

Can you tell me where the analyzer is eating numbers? 

tia,
arturo

> 
> On Apr 7, 2006, at 10:45 PM, Perez wrote:
> 
> > Hi all,
> >
> > I have a document with a date in it and I put it into a field like so:
> > DateTools.dateToString(theDate, Resolution.DAY),
> > Field.Index.UN_TOKENIZED.
> >
> > What I find is that a range query works:
> > [20060131 TO 20060601] and wildcard works e.g.
> > 2006*
> > but exact matches do not work e.g.
> > 20060130
> >
> > Any ideas on how I am misusing the API?
> >
> > This is 1.9.1.
> >
> > tia,
> > -arturo
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 20:04:30 2006
Return-Path: <java-user-return-20069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71720 invoked from network); 9 Apr 2006 20:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 20:04:23 -0000
Received: (qmail 33181 invoked by uid 500); 9 Apr 2006 20:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33152 invoked by uid 500); 9 Apr 2006 20:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33141 invoked by uid 99); 9 Apr 2006 20:04:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 13:04:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 13:04:02 -0700
Received: (qmail 20050 invoked from network); 9 Apr 2006 20:03:40 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]686638@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 9 Apr 2006 20:03:40 -0000
Message-ID: <4439689C.3050601@artnology.com>
Date: Sun, 09 Apr 2006 22:03:40 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Fetch Documents Without Retrieveing All Fields
References: <arturo-8A840C.22450807042006@sea.gmane.org> <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com> <arturo-3453B0.15024809042006@sea.gmane.org>
In-Reply-To: <arturo-3453B0.15024809042006@sea.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I found a interesting point mentioned in 
http://www.cs.cmu.edu/~shashank/htmlfiles/hacks/lucene.html by Shashank.

Of course there is no doubt that search in Lucene index is faster but 
sometimes the retrieving the hitDocs is slower(for Ex. when we try to 
retrieve more than 10000 documents  from hits). May be my scenario is a 
special case but I find the option mentioned in the article can be 
optional functionality in future release of lucene.

Small example based on the my integration of lucene in the project ..

I have integrated lucene search engine for one of our project in the 
company, there I have a book index with each document has more than 15 
fields to do speific search, but out of that after I do the search I 
just want to retrieve the value of one field named "DBID" which is the 
database table column id and for rendering in the frontend I retrieve 
the data from database. In this case I really don't require all the 
field values form the document. Also sometimes I get a OutOfMemorry 
Error when I try to retriev more than 10000 documents at once.

The advantage I found after I try to implement the above idea, the 
performance improved a lot and also I don't get any OutOfMemory error.

Just a small idea which is not entirely mine but I feel its a good option.

With Regards,
supriya

-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 22:42:54 2006
Return-Path: <java-user-return-20070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24270 invoked from network); 9 Apr 2006 22:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 22:42:54 -0000
Received: (qmail 22702 invoked by uid 500); 9 Apr 2006 22:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22665 invoked by uid 500); 9 Apr 2006 22:42:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22654 invoked by uid 99); 9 Apr 2006 22:42:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 15:42:48 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 15:42:47 -0700
Received: by pproxy.gmail.com with SMTP id m51so920865pye
        for <java-user@lucene.apache.org>; Sun, 09 Apr 2006 15:42:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i7tfuUvgHU6RuHIOg/1b9Wyb/qm41qT0DO1Z6u3btMt9yV6YkoBSsCgct+j3FgevrfMn1lqK3wcUNgvv4Jux7iQVx7AutN7zlG/b4kglk8znyByar/8m8QahU2AtPMpDS0EjTrrGZZZe1zscNcdgSn4NAgHsilcL63RzoTj1mWk=
Received: by 10.35.36.13 with SMTP id o13mr891786pyj;
        Sun, 09 Apr 2006 15:42:27 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sun, 9 Apr 2006 15:42:27 -0700 (PDT)
Message-ID: <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
Date: Sun, 9 Apr 2006 18:42:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32307_32360002.1144622547123"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
	 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
	 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
	 <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32307_32360002.1144622547123
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I think I'm almost there, thanks y'all have been a great help. Here are, I
hope, my last questions and I'll be all done beating on this....

Let's claim that all my clauses contain wildcards. What I *think* that mean=
s
is that I can't very well use a filter "the normal way" since seachers
require a query. And I don't want a query with a wildcard term.

So here's what I worked out today....

Postulate 3 clauses, all with wildcards. I'm returning the top 250 matches.
NOTE: the point of my tests is to see if I can break Lucene. So far I've
only been able to make it go slow. Very cool.

There are 1M docs. The index is 3G. I'm wildcarding over the field (not
stored) that, when stored, accounted for, 70% of the size of the index (the
index was 10G when storing this field).

It's easy enough (and I'm still stunned at how fast it happens) to construc=
t
a filter that aggregates the three clauses using WildcardTermEnum. I found
the MatchAllQuery, and tried using that and passing it the filter I
constructed to the searcher, something like...

searcher.search(new MatchAllDocsQuery(), mynewfilter);

This is painfully slow. So I got clever and just iterated through the bitse=
t
in mynewfilter, pulling out the chunk of docs I wanted by putting the
following in a loop.

doc =3D indexreader.document(next set bit in the bitset);
<extract the relevant info and package it up>

This runs about 40 times faster.

So here are my questions:
1> Did I misuse/misunderstand MatchAllDocs? What's it for anyway if not
this?
2> Since all the terms have wildcards, I don't get ranking etc. anyway.
right? So I'm not losing anything by messing with the bitset myself, right?
3> I should create a BooleanQuery (or equivalent) on any terms that do NOT
have wildcards and pass the filter to the searcher in order to get some
rankings/relevance. And one expects that to perform substantially better
than using MatchAllDocs. Yes? No?
4> In my specific case, I don't believe caching filters helps me because th=
e
chances of any of my search terms being the same across requests is small.
Given that, is there anything but convenience to using a ChainedFilter? In
my crude testing, I just declared another bitset, populated it and then
anded/ored/andnoted it to the bitset returned from my filter. Don't worry,
I'm going to chain them, I'm just checking my understanding.

Thanks again for all your patience. I'm more impressed than ever. My target
qps is 2. I'm hitting 11. And that's not even claiming the other 3 machines
that I can have if I want <GGGGG>.

Erick Erickson

------=_Part_32307_32360002.1144622547123--

From java-user-return-20071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 23:08:00 2006
Return-Path: <java-user-return-20071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30861 invoked from network); 9 Apr 2006 23:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 23:07:59 -0000
Received: (qmail 35467 invoked by uid 500); 9 Apr 2006 23:07:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35433 invoked by uid 500); 9 Apr 2006 23:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35422 invoked by uid 99); 9 Apr 2006 23:07:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:07:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:07:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D8C3D5B76E; Sun,  9 Apr 2006 16:07:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D04BE7F403
	for <java-user@lucene.apache.org>; Sun,  9 Apr 2006 16:07:25 -0700 (PDT)
Date: Sun, 9 Apr 2006 16:07:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene and top words query
In-Reply-To: <44384508.2000102@comcast.net>
Message-ID: <Pine.LNX.4.58.0604091605000.15082@hal.rescomp.berkeley.edu>
References: <44384508.2000102@comcast.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I noticed when using the Luke tool that I it provides a set of top words
: from an index.  What is a programmatic way of doing this?

I'm not intimately familar with Luke, so i'm not sure what you mean by
"top words" but this utility class might be what you are refering to...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/HighFreqTerms.java?view=markup

..if not, i would download the Luke source and poke arround in their to
see if you can find the functionality you are looking for.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 23:22:15 2006
Return-Path: <java-user-return-20072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34361 invoked from network); 9 Apr 2006 23:22:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 23:22:15 -0000
Received: (qmail 44343 invoked by uid 500); 9 Apr 2006 23:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44303 invoked by uid 500); 9 Apr 2006 23:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44292 invoked by uid 99); 9 Apr 2006 23:22:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:22:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:22:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AC1865B76E; Sun,  9 Apr 2006 16:21:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A239A7F403
	for <java-user@lucene.apache.org>; Sun,  9 Apr 2006 16:21:43 -0700 (PDT)
Date: Sun, 9 Apr 2006 16:21:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Fetch Documents Without Retrieveing All Fields
In-Reply-To: <4439689C.3050601@artnology.com>
Message-ID: <Pine.LNX.4.58.0604091610030.15082@hal.rescomp.berkeley.edu>
References: <arturo-8A840C.22450807042006@sea.gmane.org>
 <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com>
 <arturo-3453B0.15024809042006@sea.gmane.org> <4439689C.3050601@artnology.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


first off, i only skimmed the url you posted. i may have missed the point,
but it appears to be a description of how to add restricted stored field
loading.

secondly...

: Of course there is no doubt that search in Lucene index is faster but
: sometimes the retrieving the hitDocs is slower(for Ex. when we try to
: retrieve more than 10000 documents  from hits). May be my scenario is a

...you most certainly do *NOT* want to use the Hits class if you are
access more then a few hundrad of the "first" results (be it by score, or
by some sorting option).  Hits will re-execute your search many times as
you walk farther down the results (it is designed for a simplified use
case which you certainly do not meet)

you most likely want to use one of the "Expert" methods ... either TopDocs
or TopFieldDocs if you are sing sorting, or a HitCollector if you can get
away with it.


Third...

: I have integrated lucene search engine for one of our project in the
: company, there I have a book index with each document has more than 15
: fields to do speific search, but out of that after I do the search I
: just want to retrieve the value of one field named "DBID" which is the
: database table column id and for rendering in the frontend I retrieve
: the data from database. In this case I really don't require all the

1) if the only field you ever need *after* a search is the DBID field,
then make sure you aren't STOREing any fields but that one -- it will make
your index smaller.

2) your use case sounds like it could best be served by leveraging the
FieldCache -- as long as each document contains only one value for the
DBID field, and as long as you index the DBID field, you can use the
FieldCache for that field (along with a HitCollector, or
TopDocs/TopFieldDocs) to access the DBID of every doc much faster then you
can get the stored value.


I am 99.999% certain that using the FieldCache to get the one indexed
field valueyou want is going to be faster then any approach you might take
which relies on the stored field value -- without or without the
modifications described in that URL.  (and this way, you don't need to
manually patch your version of Lucene in a way that will be hard to
support in the future)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 09 23:33:03 2006
Return-Path: <java-user-return-20073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38402 invoked from network); 9 Apr 2006 23:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Apr 2006 23:33:03 -0000
Received: (qmail 48891 invoked by uid 500); 9 Apr 2006 23:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48861 invoked by uid 500); 9 Apr 2006 23:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48844 invoked by uid 99); 9 Apr 2006 23:32:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:32:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 16:32:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D46A45B76E; Sun,  9 Apr 2006 16:32:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CACA27F403
	for <java-user@lucene.apache.org>; Sun,  9 Apr 2006 16:32:36 -0700 (PDT)
Date: Sun, 9 Apr 2006 16:32:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: solution: RangeQuery with floating point numbers
In-Reply-To: <OFF47D56FA.099F2973-ONC225714B.003F4EB8-C225714B.00415323@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0604091625010.15082@hal.rescomp.berkeley.edu>
References: <OFF47D56FA.099F2973-ONC225714B.003F4EB8-C225714B.00415323@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


you may want to look into the way Solr deals with
sortable ints/longs/floats/doubles...

http://svn.apache.org/viewcvs.cgi/incubator/solr/trunk/src/java/org/apache/solr/util/NumberUtils.java?view=markup

...it leverages the fact that Java will give you the raw bits of a
double/float as an long/int, and from there some (obscure) bitwise
operations make sure they sort properly.


: Date: Sun, 9 Apr 2006 14:53:31 +0300
: From: Nadav Har'El <NYH@il.ibm.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: solution: RangeQuery with floating point numbers
:
:
: Hi all,
:
: As Lucene's documentation explain, RangeQuery (and ConstantScoreRangeQuery)
: require their key to be strings which are lexicographically
: (alphabetically) ordered.
: "Lucene in Action", section 6.3.3 ("Handling numeric field-range queries")
: explains
: what to do when you need to range search in positive integers: in that
: case,
: you have to pad the numbers with leading zeros, so they all have the same
: length and sort correctly.
: Other people on this list suggested how to extend this trick for when you
: have
: signed integers.
:
: But I wanted to go all the way to general "double"s, and do a RangeQuery
: on them. Converting doubles into strings which sort in the correct
: order is a non-trivial exercise, but is in fact doable. To prevent others
: from needing to repeat this exercise, here is an example code that I wrote,
: that does this. The code below isn't as long as it looks: most of it is
: comments
: which hopefull explain what I've done.
:
: By the way, it is worth repeating the warning that appears everywhere
: (including Lucene In Action): while this sort of trick works, RangeQuery
: is extremely inefficient (and might not even work) when the number of
: different values that are included in the range is very large.
: ConstantScoreRangeQuery is better, but also inefficient. My code allows
: you to use these queries for floating point values, but in no way makes this
: use efficient :-(
:
: P.S. I wonder if anyone can suggest an alternative implementation for
: mantissaFormat() below, which doesn't require a DecimalFormat
: object creation.
:
:
: /**
:  *  The doubleToSortableString function does a transformation which is
:  *  currently necessary for implementing Range Constaints using Lucene's
:  *  RangeQuery. This function converts floating-point numbers into strings
:  *  which can be sorted in lexicographical order.
:  *
:  *  This conversion is easy for positive integers (which can be padded
:  *  with leading zero), but much more complicated to do right for doubles
:  *  which can be positive or negative, and have large ranges (1e-74 and
:  *  1e74 are both perfectly fine as doubles, and we should handle them).
:  *  We correctly handle numbers in double's entire range, but limit
:  *  precision to 10 significant digits (this was a deliberate choice - 10
:  *  decimal digits is enough to distinguish between 32 bit integers).
:  *
:  *  Unfortunately, we are not aware of a way of doing this sort of
:  *  conversion while keeping the numbers readable. The result of the
:  *  conversion (even for positive integers) will be unreadable to casual
:  *  readers. It is therefore recommended to "STORE" the original number
:  *  in the index, rather than the result of this conversion. It is
:  *  possible to do this with the aid of a special Analyzer, which will
:  *  carry out this conversion for the purpose of indexing (but will
:  *  leave the un-analyzed value STOREd).
:  *
:  *  The conversion we carry out is one-to-one (up to the 10 decimal
:  *  significant digits of precision), and it should be easy to carry
:  *  out the reverse conversion. However, we haven't implmented this yet
:  *  (because it shouldn't be necessary).
:  */
:
: /* Our string representation of a floating point number will look as
:  * follows:
:  *   SEEENN...
:  * Where:
:  *  1. S is the sign of the number, "n" for negative, "p" for positive.
:  *     This ensures that all negative numbers come before all positive
:  *     numbers. (In the alphabet, "n" comes before "p").
:  *  2. EEE is the base-10 exponent leaving a mantissa between >=0.1, <1.0.
:  *     We add 500 to it, to get all the negative and positive exponents
:  *     into 3 digits (typically, a double's exponent can be between -308
:  *     and 308). For negative numbers, we negate their exponent first.
:  *     The idea is that positive numbers with lower exponent come before
:  *     (are less) than those with higher exponent (1e-1 is smaller than
:  *     1e2) and for negative numbers, this is reversed (-1e-1 is larger
:  *     than -1e2).
:  *     We assume that for Java doubles, the maximum exponent is around 300,
:  *     so our addition of 500 is more than enough, and ensures that the
:  *     result doesn't even need padding with zeros.
:  *  3. NN... is the mantissa, >=0.1 and <1.0. When the original number is
:  *     positive, we output the mantissa as a base 10 floating point without
:  *     the initial "0.". For negative numbers, 1 minus the mantissa is
:  *     printed instead (the result is <=0.9, >0). The mantissa is printed
:  *     with a certain precision (up to 15 digits makes sense on most
:  *     computers, but we don't need this sort of precision and we'll settle
:  *     with 10 - enough for accurate representation of Java ints).
:  *     Trailing zeros are not printed, which is ok, because "0.1" is
:  *     lexicographically before "0.11".
:  * Positive and negative Infinities are also supported, and generate
:  * strings "pinf" and "n-inf", respectively, which sort after and before
:  * all numbers, respectively. NaNs (Not-a-Number) are not supported,
:  * because their sorting order relative to other numbers is undefined.
:  *
:  * Note that we chose base 10 representation because it was more convinient
:  * to code and debug, as well as giving a shorter representation for
:  * floating point numbers with a short decimal representation (say, 0.12).
:  * However, using a larger base would have yielded a more compact
:  * representation. It particular, it should be easy to half the length
:  * of this function's output by converting its output to base 100.
:  */
: public static String doubleToSortableString(double d){
:       boolean negative = d<0;
:       if(negative)
:             d= -d; // continue to work on the positive number
:       int exponent = (int)Math.floor(Math.log(d)/log10 + 1);
:       double mantissa = d * Math.exp(-exponent * log10);
:
:       // If the exponent is very negative, we're at 0 - just print "p0",
:       // which will sort before any positive number, but after every
:       // negative number.
:       if(exponent <= -400)
:             return "p0";
:       // If the exponent is too high, we're at infinity, either positive
:       // or negative. Print "n-inf" (sorts before all negative numbers we
:       // print) or "pinf" (sorts after all positive numbers we print).
:       if(exponent >= 400)
:             return negative ? "n-inf" : "pinf";
:
:       if(negative)
:             exponent = -exponent;
:       exponent += 500;
:
:       if(negative)
:             return "n"+Integer.toString(exponent)+
:                   mantissaFormat(1.0-mantissa);
:       else
:             return "p"+Integer.toString(exponent)+
:                   mantissaFormat(mantissa);
: }
: private static final double log10 = Math.log(10);
: // This function limits the number's precision to 10 significant decimal
: // digits. See comment above for the rationale for this choice.
: private static String mantissaFormat(double m){
:       // Unfortunately, we need to create a new "DecimalFormat" object
:       // every time, because that object is not thread safe. This may
:       // be a performance bottleneck.
:       DecimalFormat mantFormatter = new DecimalFormat(".##########");
:                                                                           //  1234567890
:       String result = mantFormatter.format(m);
:       if(result.charAt(0)=='.')
:             return result.substring(1); // remove initial "."
:       else // 0.999.. was printed as 1.0. We don't want that.
:             return "9999999999"; // we could have also printed "x" or anything that comes after all numbers.
:                  // 1234567890
: }
:
:
:
: --
: Nadav Har'El
: nyh@il.ibm.com
: +972-4-829-6326
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 01:20:40 2006
Return-Path: <java-user-return-20074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70626 invoked from network); 10 Apr 2006 01:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 01:20:39 -0000
Received: (qmail 19094 invoked by uid 500); 10 Apr 2006 01:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19070 invoked by uid 500); 10 Apr 2006 01:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19059 invoked by uid 99); 10 Apr 2006 01:20:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 18:20:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Apr 2006 18:20:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AD3E133CA94; Sun,  9 Apr 2006 21:20:11 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B91B333CA93
	for <java-user@lucene.apache.org>; Sun,  9 Apr 2006 21:20:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <arturo-3453B0.15024809042006@sea.gmane.org>
References: <arturo-8A840C.22450807042006@sea.gmane.org> <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com> <arturo-3453B0.15024809042006@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <16E18315-5F32-4025-B72D-60357450C041@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Exact date search doesn't work with 1.9.1?
Date: Sun, 9 Apr 2006 21:20:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 9, 2006, at 3:02 PM, Perez wrote:
> In article
> <008EAB35-C40D-4F4B-8C05-B02BB07C2B18@ehatchersolutions.com>,
>  Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>> This could be a case of your QueryParser analyzer eating a number.
>> Range queries and prefix/wildcard query terms are not analyzed.
>>
>> Besides the great suggestion to use Luke, also try a TermQuery if you
>> happen to be using QueryParser to create your Query currently.
>>
>> 	Erik
>>
>
> Actually, that's another problem I have.  I can't search for  
> numbers at
> all no how.  But the analyzer is just PorterStemmer(Lowercase(Stop))).
>
> Can you tell me where the analyzer is eating numbers?

What is the tokenizer you're using deeper below the "Stop" you  
mentioned?  The StopAnalyzer itself uses a LetterTokenizer, so  
numbers get removed and only letters remain.

Check out the "analysis paralysis" article I did at java.net and the  
AnalyzerDemo (or is it AnalysisDemo?) in the Lucene in Action  
codebase - it'll shed a lot of light on analyzers.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 08:36:54 2006
Return-Path: <java-user-return-20075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35328 invoked from network); 10 Apr 2006 08:36:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 08:36:53 -0000
Received: (qmail 63218 invoked by uid 500); 10 Apr 2006 08:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63188 invoked by uid 500); 10 Apr 2006 08:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63156 invoked by uid 99); 10 Apr 2006 08:36:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 01:36:45 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wproxy.gmail.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 01:36:44 -0700
Received: by wproxy.gmail.com with SMTP id i30so800975wra
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 01:36:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Lj6K6ciKep9z919XpOxkj+qj3YUKLbcSx+Cf0MvxLD/WxsCBlymHWGAqrUPCL4BG/vNJG4xGLkfwR5le/O7NEpSUewAASu1DVxgg6TfSGg8xuhhAUHbpwn4OarpEzPNgL3bwbMD5hDdLNVf0kjPia1YnFnN7G50YvkbP98T6io0=
Received: by 10.64.196.5 with SMTP id t5mr3820836qbf;
        Mon, 10 Apr 2006 01:36:23 -0700 (PDT)
Received: by 10.65.216.10 with HTTP; Mon, 10 Apr 2006 01:36:23 -0700 (PDT)
Message-ID: <4f2c7c9b0604100136m912c3den40ce277b11d28d1d@mail.gmail.com>
Date: Mon, 10 Apr 2006 16:36:23 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: What is the retrieval modle for lucene?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18733_26741760.1144658183492"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18733_26741760.1144658183492
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I have seen in some documents that there are three kinds of retrieval modle
which are used often: Boolean,  vector space and probability.
So I want to which is it that used by lucene. Thank you in advance

------=_Part_18733_26741760.1144658183492--

From java-user-return-20076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 10:03:23 2006
Return-Path: <java-user-return-20076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72440 invoked from network); 10 Apr 2006 10:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 10:03:23 -0000
Received: (qmail 34822 invoked by uid 500); 10 Apr 2006 10:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34789 invoked by uid 500); 10 Apr 2006 10:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34778 invoked by uid 99); 10 Apr 2006 10:03:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 03:03:15 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=HTML_MESSAGE,RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.130 as permitted sender)
Received: from [152.163.225.130] (HELO omr-r02.mail.aol.com) (152.163.225.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 03:03:14 -0700
Received: from aol.com (10.146.145.194)
  by omr-r02.mail.aol.com with ESMTP; 10 Apr 2006 06:02:53 -0400
Message-ID: <443A2D4B.1040804@aol.com>
Date: Mon, 10 Apr 2006 15:32:51 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc4 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Data structure of a Lucene Index
References: <442A13D3.7080500@aol.com> <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C19@ehost011-3.exch011.intermedia.net>
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C19@ehost011-3.exch011.intermedia.net>
Content-Type: multipart/alternative;
 boundary="------------020705020502010704080508"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------020705020502010704080508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I think Doug's paper ( specifically the Seek and Transfer section ) is 
the closest I could get. A little bit detailed explanation can be found 
in Yates' book on Information-Retreival.  I agree with Dimitry, a 
detailed explanation (or even pointers to some existing arcticle would 
be beneficial to all of us).

--prasen

------------------------------------------------------------


I talked about this a bit in a presentation at Haifa last year:

http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf

See the section on "Seek versus Transfer".

Doug


Dmitry Goldenberg wrote:

>Ideally, I'd love to see an article explaining both in detail: the index structure as well as the merge algorithm...
>
>________________________________
>
>From: Prasenjit Mukherjee [mailto:prasenjitm@aol.com]
>Sent: Tue 3/28/2006 11:57 PM
>To: java-user@lucene.apache.org
>Subject: Data structure of a Lucene Index
>
>
>
>It seems to me that lucene doesn't use B-tree for its indexing storage.
>Any paper/article which explains the theory behind data-structure of 
>single index(segment).  I am not referring to the merge algorithm, I am
>curious to know the storage structure of a single optimized lucene index.
>
>Any pointer is greatly appreciated.
>--Prasen
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>


--------------020705020502010704080508--

From java-user-return-20077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 14:40:10 2006
Return-Path: <java-user-return-20077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37130 invoked from network); 10 Apr 2006 14:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 14:40:10 -0000
Received: (qmail 40355 invoked by uid 500); 10 Apr 2006 14:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40299 invoked by uid 500); 10 Apr 2006 14:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40262 invoked by uid 99); 10 Apr 2006 14:40:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 07:40:02 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pepone.onrez@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nproxy.gmail.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 07:40:01 -0700
Received: by nproxy.gmail.com with SMTP id c29so714268nfb
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 07:39:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=AQYyXGLU2D5zlgK9RzxQYQ2dK3ZGgNKwlfnvk59xYyOiCpjBeDRrArNMxkqtsOtVd2B4CuqHCFquD4IW0fv1LfZD/0BbPb9LassD1qNl/X085TASLZDTpVi4BHg51HzN6aw6A8PGGGqWXoS0nA/83IKp54g5PvhDIXri4bJNick=
Received: by 10.49.27.1 with SMTP id e1mr2091453nfj;
        Mon, 10 Apr 2006 07:39:39 -0700 (PDT)
Received: by 10.48.157.2 with HTTP; Mon, 10 Apr 2006 07:39:39 -0700 (PDT)
Message-ID: <198501d60604100739p4b520daep2937f9060725cf41@mail.gmail.com>
Date: Mon, 10 Apr 2006 16:39:39 +0200
From: "pepone pepone" <pepone.onrez@gmail.com>
To: java-user@lucene.apache.org
Subject: Retrive terms with more frequence
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4577_24342286.1144679979671"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4577_24342286.1144679979671
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all

I interesting in know if is posible to make a query that retrives the terms
in a field with more frequence in the index or better all terms in this
field shorted by frequence.

thanks in advance

--
play tetris http://pepone.on-rez.com/tetris
run gentoo http://gentoo-notes.blogspot.com/

------=_Part_4577_24342286.1144679979671--

From java-user-return-20078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 16:12:34 2006
Return-Path: <java-user-return-20078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87100 invoked from network); 10 Apr 2006 16:12:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 16:12:34 -0000
Received: (qmail 46985 invoked by uid 500); 10 Apr 2006 16:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46953 invoked by uid 500); 10 Apr 2006 16:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46942 invoked by uid 99); 10 Apr 2006 16:12:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 09:12:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wproxy.gmail.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 09:12:26 -0700
Received: by wproxy.gmail.com with SMTP id i20so827445wra
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 09:12:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Mw9ClM+AnvO3TMF1cK7ZQxhBxFQ94eNQhZcdGH2o3eEOtVRVU7EXbPnhway5hxlBYgqyW0t/qZ8S11h0bFJv0pTvTSTIM3FDfAhx+5TqMsMZAzh+OkK5fLYg6250aKOqqQ3m9nCMVCLsYM6B7iWE0vwAcDfqNjX/YRkdtlzZ+1A=
Received: by 10.65.196.7 with SMTP id y7mr4275600qbp;
        Mon, 10 Apr 2006 09:12:05 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Mon, 10 Apr 2006 09:12:05 -0700 (PDT)
Message-ID: <f742a72b0604100912i5b877c3etb32882c61dbaaa56@mail.gmail.com>
Date: Mon, 10 Apr 2006 12:12:05 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Calculating term and document frequency for multiple word terms
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I was wondering how I can get the document frequency and term
frequency of a phrase in a corpus. I am currently  using


IndexReader rd =3D IndexReader.open("C:\\Documents and
Settings\\Owner\\My Documents\\Thesis\\luceneTest\\index");
Term t1 =3D new Term("contents","\"increases aesthetic\"");
TermDocs  tdTest2=3D rd.termDocs(t1);
while(tdTest2.next() )
=09=09{

=09=09System.out.println(tdTest2.freq()  ) ;=09=09
=09=09}=09
=09=09



This seems to work for a single word term such as "increases", but not
for multiple word terms such as "increases aesthetic".

Any suggestions would be greatly appreciated.


Kind Regards
Vishal Bathija
=09=09
=09=09

--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 18:08:59 2006
Return-Path: <java-user-return-20079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50367 invoked from network); 10 Apr 2006 18:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 18:08:58 -0000
Received: (qmail 20746 invoked by uid 500); 10 Apr 2006 18:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20690 invoked by uid 500); 10 Apr 2006 18:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20678 invoked by uid 99); 10 Apr 2006 18:08:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:08:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:08:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3368A5B76E; Mon, 10 Apr 2006 11:08:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2F3E37F403
	for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 11:08:29 -0700 (PDT)
Date: Mon, 10 Apr 2006 11:08:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu>
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com> 
 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com> 
 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com> 
 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu> 
 <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
 <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Let's claim that all my clauses contain wildcards. What I *think* that means
: is that I can't very well use a filter "the normal way" since seachers
: require a query. And I don't want a query with a wildcard term.

the bueaty of ConstantScoreQuery is that it can wrap any filter ... so you
can execute your Filter as a normal search, even without any other
"scoring" clauses to your query.


: a filter that aggregates the three clauses using WildcardTermEnum. I found
: the MatchAllQuery, and tried using that and passing it the filter I
: constructed to the searcher, something like...
:
: searcher.search(new MatchAllDocsQuery(), mynewfilter);
:
: This is painfully slow. So I got clever and just iterated through the bitset

that method returns a Hits obejct correct? ... as mentioned many times
before, using the Hits class is not recommended when you are dealing with
more then then just the first 100 or so results of a search... i seem to
recall that you said your searches typically result in thousands of
documents, nad you need data from all of them correct?

use one of the methods that returns TopDocs (or TopFieldDocs).

: 1> Did I misuse/misunderstand MatchAllDocs? What's it for anyway if not
: this?

you understood it, i just don't think you need it in this case.  I also
dont' think it's really the cause of the speed differneces you saw, that's
most likely caused by the way the Hits class works (reexecuting your
search over and over as you iterate through the results)

: 2> Since all the terms have wildcards, I don't get ranking etc. anyway.
: right? So I'm not losing anything by messing with the bitset myself, right?

That's true.  in fact if you know that you are never going to want
ranking/scoring info, and if you know that you are allways going to be
using Filter classes (and never Query classes) then there's no reason not
to just call the Filter.bits(IndexReader) and then use the BitSet anyway
you see fit.

: 3> I should create a BooleanQuery (or equivalent) on any terms that do NOT
: have wildcards and pass the filter to the searcher in order to get some
: rankings/relevance. And one expects that to perform substantially better
: than using MatchAllDocs. Yes? No?

Hard to say ... the way Filters are currently implimented, they have no
means of 'skipping' documents that don't match the query.  so the amount
of time spent executing your Filter.bits method will be the same.  but the
other clauses will help eliminate documents during hte search (using
indexed fields which are fast), which will save you from ever seeing them
when you iterate over your TopDocs (so you'll never call the doc(i) method
on them, and never waste anytime with their stored fields which are slow)

: 4> In my specific case, I don't believe caching filters helps me because the
: chances of any of my search terms being the same across requests is small.
: Given that, is there anything but convenience to using a ChainedFilter? In
: my crude testing, I just declared another bitset, populated it and then
: anded/ored/andnoted it to the bitset returned from my filter. Don't worry,
: I'm going to chain them, I'm just checking my understanding.

ChainedFilter is certainly there for convincience.  if there is
notadvantage to you (caching or otherwise) to keeping the various bits of
logic you've got in seperate Filters, then there's no reason to use
ChainedFilter ... jsut combine all of hte logic into one Filter.

(this has hte added bonus of only ever needing to allocate one huge
BitSet, instead of anding/oring multiple big BitSets.)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 18:45:10 2006
Return-Path: <java-user-return-20080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67041 invoked from network); 10 Apr 2006 18:45:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 18:45:09 -0000
Received: (qmail 56711 invoked by uid 500); 10 Apr 2006 18:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56687 invoked by uid 500); 10 Apr 2006 18:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56675 invoked by uid 99); 10 Apr 2006 18:45:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:45:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jloramas@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wproxy.gmail.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:45:02 -0700
Received: by wproxy.gmail.com with SMTP id 68so871906wra
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 11:44:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=b95rcJ0odycYXZVx+AarCTCUON1ckV8LM/6LroM1PIbEeQgkwpWNd2E8kCrfywBTZnfdLu3DLTgMLwJv/bvWgTIBck9qur36EQCgxAHKq5JbLj1uRGoYQze3KK6W501u2WLTvlQJw/KlIAyTJ0uBbp61jyRbgd2x9tg5CnyZqMY=
Received: by 10.54.92.4 with SMTP id p4mr1423884wrb;
        Mon, 10 Apr 2006 11:44:42 -0700 (PDT)
Received: by 10.54.121.7 with HTTP; Mon, 10 Apr 2006 11:44:42 -0700 (PDT)
Message-ID: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
Date: Mon, 10 Apr 2006 20:44:42 +0200
From: "=?ISO-8859-1?Q?oramas_mart=EDn?=" <jloramas@gmail.com>
To: java-user@lucene.apache.org
Subject: MultiReader and MultiSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4972_4720664.1144694682097"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4972_4720664.1144694682097
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Is there any performance (or other) difference between using an
IndexSearcher initialized with a MultiReader instead of using a
MultiSearcher?

Thanks,
Jose L. Oramas

------=_Part_4972_4720664.1144694682097--

From java-user-return-20081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 18:48:00 2006
Return-Path: <java-user-return-20081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68319 invoked from network); 10 Apr 2006 18:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 18:48:00 -0000
Received: (qmail 60908 invoked by uid 500); 10 Apr 2006 18:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60884 invoked by uid 500); 10 Apr 2006 18:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60864 invoked by uid 99); 10 Apr 2006 18:47:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:47:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.205.194.4] (HELO dit.unitn.it) (193.205.194.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 11:47:54 -0700
Received: from ict2011 (ict20-11.science.unitn.it [192.168.233.111])
	by dit.unitn.it (8.12.11.20060308/8.12.11) with SMTP id k3AIlUwp014187
	for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 20:47:30 +0200
Message-ID: <022f01c65ccf$0c7e0950$6fe9a8c0@ict2011>
From: "Maxym Mykhalchuk" <maxym@dit.unitn.it>
To: <java-user@lucene.apache.org>
Subject: Small field indexing and ranking
Date: Mon, 10 Apr 2006 20:46:16 +0200
Organization: DIT
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_022C_01C65CDF.CFFAF270"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_022C_01C65CDF.CFFAF270
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: quoted-printable

Hi All,

I've tried to search for the topic, but to no avail so far... Sorry if =
it's been raised before.

Here's the issue: All my "documents" will be having a few (2-3: title, =
short description) short fields. You see, it's rare that the same word =
is repeated several times in a title, so will Lucene be able to give me =
a decent ranking, or will it be able to tell me "oh, yes, this term is =
in the following 300 titles".

On what I've read on the topic so far, it seems that inverted indexes do =
work good on big texts, as they are able to exploit the repetition of =
words to do ranking.

Will it work for small fields?

Sincere,
Maxym
P.S. If you have links to good reading on inverted indexes, I'll =
appreciate that too.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D
Maxym Mykhalchuk
(+39) 320 8593170
PhD student at University of Trento, ITALY
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D
------=_NextPart_000_022C_01C65CDF.CFFAF270--


From java-user-return-20082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 19:03:33 2006
Return-Path: <java-user-return-20082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75167 invoked from network); 10 Apr 2006 19:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 19:03:32 -0000
Received: (qmail 86486 invoked by uid 500); 10 Apr 2006 19:03:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86464 invoked by uid 500); 10 Apr 2006 19:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86448 invoked by uid 99); 10 Apr 2006 19:03:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 12:03:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 12:03:25 -0700
Received: by pproxy.gmail.com with SMTP id m51so1154749pye
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 12:03:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mmZqPm56m3eLayOvCBNuBUYtT243szUWoOY1tF5g6qCIKJmqxF4N/GORG7BVp0or5EAgVLB1IypacZRiPEeBgAw6VPtcAo3VsEujoHCaHcPrkuNRk76CtlfqEfkhVNdS+wIzH5Gw0OywCsnUTV/fOMVry1CDmtZjg2tenRD+Q8o=
Received: by 10.35.40.10 with SMTP id s10mr37815pyj;
        Mon, 10 Apr 2006 12:03:05 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Mon, 10 Apr 2006 12:03:05 -0700 (PDT)
Message-ID: <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
Date: Mon, 10 Apr 2006 15:03:05 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/10/06, oramas mart=EDn <jloramas@gmail.com> wrote:
> Is there any performance (or other) difference between using an
> IndexSearcher initialized with a MultiReader instead of using a
> MultiSearcher?

Yes, the IndexSearcher(MultiReader) solution will be faster.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 19:58:41 2006
Return-Path: <java-user-return-20083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8347 invoked from network); 10 Apr 2006 19:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 19:58:36 -0000
Received: (qmail 66182 invoked by uid 500); 10 Apr 2006 19:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66125 invoked by uid 500); 10 Apr 2006 19:58:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65807 invoked by uid 99); 10 Apr 2006 19:58:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 12:58:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 12:58:23 -0700
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3AJw5YC013479
	for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 15:58:10 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout6-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id k3AJvlEe219816;
	Mon, 10 Apr 2006 15:57:52 -0400
Message-ID: <443AB8BA.6050004@apache.org>
Date: Mon, 10 Apr 2006 12:57:46 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene.. - clustering as a requirement
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com><fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com><FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net> <88c6a6720604061255w48c690ebyd7a2892aae772798@mail.gmail.com> <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net>
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dmitry Goldenberg wrote:
> For an enterprise-level application, Lucene appears too file-system and 
too byte-sequence-centric a technology.  Just my opinion.  The Directory 
API is just too low-level.

There are good reasons why Lucene is not built on top of a RDBMS.  An 
inverted index is not efficiently maintained in a B-Tree, and B-Trees 
are the foundation of RDBMSes.

http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf

> I'd be OK with an RDBMS-based Directory implementation I could take and use.  But generally, I think the Lucene authors might like to take a step back and consider splitting off the repository and making it more extensible and high-level.  Perhaps something like JSR-170 (Java repository API) may be a good route to go....

If you have concrete ideas for an improvements to Lucene's Directory 
interface, please propose them to the java-dev mailing list, ideally as 
a patch.

Cheers,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 20:20:31 2006
Return-Path: <java-user-return-20084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19591 invoked from network); 10 Apr 2006 20:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 20:20:31 -0000
Received: (qmail 461 invoked by uid 500); 10 Apr 2006 20:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 439 invoked by uid 500); 10 Apr 2006 20:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 428 invoked by uid 99); 10 Apr 2006 20:20:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:20:24 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:20:24 -0700
Received: by pproxy.gmail.com with SMTP id m51so1172339pye
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 13:20:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B0BpW6ygkVda3jRiTSsBMS/cORPOwIiuQMAbwxre1FOk4eY3wm2VLqAmgxsKMWIt55c7MsmfU1zqQ/usM36J9z2ay+HvBhaizJCqfOy5JgLZ7eSA34ZKog1Ys9nmu4GJ6ScA8RldgWX1UD1pBYBElykV5V49dH3mXjb1OAM4QxY=
Received: by 10.35.81.10 with SMTP id i10mr1238429pyl;
        Mon, 10 Apr 2006 13:20:03 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Mon, 10 Apr 2006 13:20:03 -0700 (PDT)
Message-ID: <359a92830604101320n4630d3b8xe0f2adedf6074a59@mail.gmail.com>
Date: Mon, 10 Apr 2006 16:20:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15046_17317233.1144700403684"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
	 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
	 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
	 <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
	 <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
	 <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15046_17317233.1144700403684
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris:

Again, many thanks. Of course only *after* you mentioned that Hits is not
entirely efficient when looking at many docs did I remember TopDocs and
TopFieldDocs had been mentioned. Senior moments and all that....

I completely missed the fact that ConstantScoreQuery doesn't take a query.
I'll betchya anything you want it does what I was doing, only more
efficiently <G>...

Thanks again for all your help, I may actually go away and not bother folks
for a while. I'm supposed to have answers to the question "should we use
Lucene" by Wednesday, after that the pace will slow a bit as I write real
code rather than proof-of-concept - AKA throw-away code, and take
considerably more care <G>.

Erick

------=_Part_15046_17317233.1144700403684--

From java-user-return-20085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 20:20:52 2006
Return-Path: <java-user-return-20085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19700 invoked from network); 10 Apr 2006 20:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 20:20:52 -0000
Received: (qmail 1776 invoked by uid 500); 10 Apr 2006 20:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1751 invoked by uid 500); 10 Apr 2006 20:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1740 invoked by uid 99); 10 Apr 2006 20:20:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:20:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:20:44 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 689AE33CA83; Mon, 10 Apr 2006 16:20:24 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id BB2FC33CA7D
	for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 16:20:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <f742a72b0604100912i5b877c3etb32882c61dbaaa56@mail.gmail.com>
References: <f742a72b0604100912i5b877c3etb32882c61dbaaa56@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <76F497B5-61C4-4B93-B326-FF11CC9D748C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Calculating term and document frequency for multiple word terms
Date: Mon, 10 Apr 2006 16:20:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have a look at using SpanNearQuery for phrases, and walking the spans  
(via getSpans, I believe).

	Erik


On Apr 10, 2006, at 12:12 PM, Vishal Bathija wrote:

> Hi,
> I was wondering how I can get the document frequency and term
> frequency of a phrase in a corpus. I am currently  using
>
>
> IndexReader rd = IndexReader.open("C:\\Documents and
> Settings\\Owner\\My Documents\\Thesis\\luceneTest\\index");
> Term t1 = new Term("contents","\"increases aesthetic\"");
> TermDocs  tdTest2= rd.termDocs(t1);
> while(tdTest2.next() )
> 		{
>
> 		System.out.println(tdTest2.freq()  ) ;		
> 		}	
> 		
>
>
>
> This seems to work for a single word term such as "increases", but not
> for multiple word terms such as "increases aesthetic".
>
> Any suggestions would be greatly appreciated.
>
>
> Kind Regards
> Vishal Bathija
> 		
> 		
>
> --
> Vishal Bathija
> Graduate Student
> Department of Computer Science & Systems Analysis
> Miami University
> Oxford,Ohio
> Phone: (513)-461-9239
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 20:49:05 2006
Return-Path: <java-user-return-20086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36121 invoked from network); 10 Apr 2006 20:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 20:49:04 -0000
Received: (qmail 43394 invoked by uid 500); 10 Apr 2006 20:48:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43369 invoked by uid 500); 10 Apr 2006 20:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43358 invoked by uid 99); 10 Apr 2006 20:48:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:48:58 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 13:48:57 -0700
Received: by pproxy.gmail.com with SMTP id m51so1178758pye
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 13:48:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R0aI6esm4QBDhx0uR3wdTxrNpQqqNxSQ6n0PmuDAEYMpSC0MwGTZTNwnF+UGXXXPCIOk9PD2o66GgMdh5svUNiShnsYp8W6ZY8RU844OP2CS5+lKA2BNTd8UK208r5yRlN5+4PY9O8GAKgU68at5dTjZrjkUEKRqzzEq6PjhmEs=
Received: by 10.35.100.6 with SMTP id c6mr55255pym;
        Mon, 10 Apr 2006 13:48:37 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Mon, 10 Apr 2006 13:48:37 -0700 (PDT)
Message-ID: <359a92830604101348w245aed04he4355ed11d1e71fe@mail.gmail.com>
Date: Mon, 10 Apr 2006 16:48:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Exception in WildCardQuery
In-Reply-To: <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15738_2239793.1144702117059"
References: <359a92830604070728q5f2781f4m7767ae3d59e8d99d@mail.gmail.com>
	 <F2799976-3244-4F56-A42E-62F5717B03B6@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15738_2239793.1144702117059
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

It took me a couple of days, but this is added to JIRA

Erick

------=_Part_15738_2239793.1144702117059--

From java-user-return-20087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 22:14:56 2006
Return-Path: <java-user-return-20087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87482 invoked from network); 10 Apr 2006 22:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 22:14:55 -0000
Received: (qmail 83656 invoked by uid 500); 10 Apr 2006 22:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83630 invoked by uid 500); 10 Apr 2006 22:14:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83619 invoked by uid 99); 10 Apr 2006 22:14:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 15:14:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 15:14:48 -0700
Received: from mkhumri.allegro.med [10.50.1.40]
	by exchange.allegromedical.com
	with XWall v3.35 ;
	Mon, 10 Apr 2006 15:14:26 -0700
Message-ID: <443AD8AA.1010707@allegromedical.com>
Date: Mon, 10 Apr 2006 15:14:02 -0700
From: Mufaddal Khumri <mkhumri@allegromedical.com>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Tuning Indexing performance question ..
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com> <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
In-Reply-To: <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am using a multi threaded app to index a bunch of Data. The app spawns 
X number of threads. Each thread writes to a RAMDirectory. When thread 
finishes it work, the contents from the RAMDirectory are written into 
the FSDirectory. All threads are passed an instance of the FSWriter when 
they are created.

Now, reading the Lucened docs, I understand the indexing performance can 
be further tweaked by playing with mergeFactor, maxMergeDocs and 
minMergeDocs. Am I understanding this right that these three parameters 
effect the writing of the index to the FSDirectory and not to the 
RAMDirectory (Since a RAMDirectory exists entirely in memory)? In other 
words, does tweaking the three parameters - mergeFactor, maxMergeDocs 
and minMergeDocs effect the performance of writing to the RAMDirectory?

-Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 10 22:35:24 2006
Return-Path: <java-user-return-20088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98931 invoked from network); 10 Apr 2006 22:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Apr 2006 22:35:24 -0000
Received: (qmail 5953 invoked by uid 500); 10 Apr 2006 22:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5921 invoked by uid 500); 10 Apr 2006 22:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5910 invoked by uid 99); 10 Apr 2006 22:35:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 15:35:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Apr 2006 15:35:18 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <175008(1)>; Mon, 10 Apr 2006 15:34:37 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58633>; Mon, 10 Apr 2006 15:34:30 PDT
To: java-user@lucene.apache.org
Subject: Re: Fetch Documents Without Retrieveing All Fields 
In-Reply-To: Your message of "Sun, 09 Apr 2006 16:21:43 PDT."
             <Pine.LNX.4.58.0604091610030.15082@hal.rescomp.berkeley.edu> 
Date: Mon, 10 Apr 2006 15:34:29 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <06Apr10.153430pdt."58633"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In case anyone else was wondering:

I got curious about how one would replace FieldCache, and discovered
that you can create an instance of a class which implements
FieldCache, and then simply assign it to
org.apache.lucene.search.FieldCache.DEFAULT.

> 2) your use case sounds like it could best be served by leveraging the
> FieldCache -- as long as each document contains only one value for the
> DBID field, and as long as you index the DBID field, you can use the
> FieldCache for that field (along with a HitCollector, or
> TopDocs/TopFieldDocs) to access the DBID of every doc much faster then you
> can get the stored value.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 04:12:33 2006
Return-Path: <java-user-return-20089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24690 invoked from network); 11 Apr 2006 04:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 04:12:33 -0000
Received: (qmail 94539 invoked by uid 500); 11 Apr 2006 04:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94490 invoked by uid 500); 11 Apr 2006 04:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94479 invoked by uid 99); 11 Apr 2006 04:12:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 21:12:28 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of get.sameer@gmail.com designates 66.249.82.204 as permitted sender)
Received: from [66.249.82.204] (HELO xproxy.gmail.com) (66.249.82.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 21:12:27 -0700
Received: by xproxy.gmail.com with SMTP id i26so683983wxd
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 21:12:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WzKCwbPrSIqwtrOGG68rNkqVqeVjvMHsgxklF1wFpArWCJqPFVH8xrGi5I89zIe4D2cygpaxIaJxnn7BdF+5m+OXPgJQh8hyYABkiai4FBE8tLhFmipCqcaa6iDcX8rFyVxkaQ1lft8QuYpdNKZqYekTlzkJ/e98fz6ZJKui4I0=
Received: by 10.70.30.19 with SMTP id d19mr5073070wxd;
        Mon, 10 Apr 2006 21:12:04 -0700 (PDT)
Received: by 10.70.16.4 with HTTP; Mon, 10 Apr 2006 21:12:04 -0700 (PDT)
Message-ID: <9ce5095c0604102112l6dc1500aif8770b5f5561f020@mail.gmail.com>
Date: Tue, 11 Apr 2006 09:42:04 +0530
From: "Sameer Shisodia" <get.sameer@gmail.com>
To: java-user@lucene.apache.org
Subject: hit.doc, hit.score and FSDir performance
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_582_4895379.1144728724914"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_582_4895379.1144728724914
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi All.

I am using Lucene as the backbone of a 'Smart Search'.

I have a layer over search that extensively analyzes results at runtime to
bucket them. I do trim the resultset, but only after this procesing since
their are non document weights that are combined with the result scores, an=
d
the hits are then reordered/modified.

This needs to essentially get all docs (cause there's some field level
analysis), and the score for each upfront, and it seems to be taking foreve=
r
to do for a large no of hits. The documents themselves are tiny - less than
half a k usually.  Hit.doc() and .score() seem to be where its taking time =
-
quite as cautioned in the javadocs.

Another peculiarity : the query is basically "keywords" which hits all
fields, and you can additionally make it more precise by certain fields as
field:value. For the latter case, for a similar number of hits, the same
iteration above is much quicker than in the case where a similar number of
hits is found by the keywords hitting all fields. The query is NOT visibly
slower - but the iteration is. Something to do with how spread out across
the index the hits are ?

Is there a possible workaround for the .doc()/.score() access ? Can
RAMDirectory be used only for searches over a "regular" FSDirectory index -
and is it usable when the index size is a multiple of available RAM (this i=
s
on RH9 or fedora core) ?

Thanks in advance,
Sameer

--
Sameer Shisodia  Bangalore
get.sameer@gmail.com

------=_Part_582_4895379.1144728724914--

From java-user-return-20090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 04:49:46 2006
Return-Path: <java-user-return-20090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43166 invoked from network); 11 Apr 2006 04:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 04:49:44 -0000
Received: (qmail 36515 invoked by uid 500); 11 Apr 2006 04:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36487 invoked by uid 500); 11 Apr 2006 04:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36475 invoked by uid 99); 11 Apr 2006 04:49:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 21:49:39 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tonyqian@hotmail.com designates 65.54.229.44 as permitted sender)
Received: from [65.54.229.44] (HELO hotmail.com) (65.54.229.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 21:49:38 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 10 Apr 2006 21:49:17 -0700
Message-ID: <BAY110-F344917CA897A25743FEC0AD4CD0@phx.gbl>
Received: from 65.54.229.220 by by110fd.bay110.hotmail.msn.com with HTTP;
	Tue, 11 Apr 2006 04:49:15 GMT
X-Originating-IP: [24.33.231.193]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: full text search using Lucene
Date: Tue, 11 Apr 2006 04:49:15 +0000
X-Priority: 5
Importance: Low
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 11 Apr 2006 04:49:17.0932 (UTC) FILETIME=[4A5A7AC0:01C65D23]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

I'm working on a project which requires full text search on multiple tables 
in MySql database. Although, MySql supports full text search, it only 
supports full text search on signle table. I'm wondering if Lucene can help 
me to do full text search against MySql database. (I noticed that DBSight is 
built on top of Lucene.)

Any suggestion and links pointing to examples and tutorial are appreaciated.

Tony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 05:19:12 2006
Return-Path: <java-user-return-20091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50157 invoked from network); 11 Apr 2006 05:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 05:19:11 -0000
Received: (qmail 53921 invoked by uid 500); 11 Apr 2006 05:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53890 invoked by uid 500); 11 Apr 2006 05:19:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53879 invoked by uid 99); 11 Apr 2006 05:19:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 22:19:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wproxy.gmail.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 22:19:05 -0700
Received: by wproxy.gmail.com with SMTP id i5so1247399wra
        for <java-user@lucene.apache.org>; Mon, 10 Apr 2006 22:18:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sPNkODRW8Fo/87IVZswA7fL1bQN+lGUfhWECKLih9DdLntstGlUcjA0Gwk+PxFXapn9CeRfp0S8DcW7A0xvOem776a/EqQOliKJEB4nBHTQ320kCiIRRu+ArMF6O36mrLEfc8tQ/5jI4C0RUPvG8AvEBnZtK0d/e9Kz8JGEOVyo=
Received: by 10.65.122.16 with SMTP id z16mr2627629qbm;
        Mon, 10 Apr 2006 22:18:44 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Mon, 10 Apr 2006 22:18:44 -0700 (PDT)
Message-ID: <6e3ae6310604102218m63ee159ao278f164df4746714@mail.gmail.com>
Date: Mon, 10 Apr 2006 22:18:44 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: full text search using Lucene
In-Reply-To: <BAY110-F344917CA897A25743FEC0AD4CD0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BAY110-F344917CA897A25743FEC0AD4CD0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Tony,

DBSight, like SearchBlox, Nutch, Solr, is using Lcuene to search. It
just makes it super easy and flexible to create a search on any
databases. Lucene's implementation is far more superior and flexible
to MySql's full text search.

Try it and you will know what I am talking about. Actually, I think
it'll be faster to setup DBSight, have it running, see the results,
than reading through marketing materials. :)

Right now, no funding for us. We need to sell it at a meager price.
Otherwise, we would be very willing to donate it to open source.

Chris Lu
-----------------------------------------
Full-Text Search on Any Databases
http://www.dbsight.net
Faster to setup than reading marketing materials.

On 4/10/06, Tony Qian <tonyqian@hotmail.com> wrote:
> All,
>
> I'm working on a project which requires full text search on multiple tabl=
es
> in MySql database. Although, MySql supports full text search, it only
> supports full text search on signle table. I'm wondering if Lucene can he=
lp
> me to do full text search against MySql database. (I noticed that DBSight=
 is
> built on top of Lucene.)
>
> Any suggestion and links pointing to examples and tutorial are appreaciat=
ed.
>
> Tony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 06:46:08 2006
Return-Path: <java-user-return-20092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91983 invoked from network); 11 Apr 2006 06:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 06:46:07 -0000
Received: (qmail 18008 invoked by uid 500); 11 Apr 2006 06:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17506 invoked by uid 500); 11 Apr 2006 06:46:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17495 invoked by uid 99); 11 Apr 2006 06:46:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 23:46:01 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.129 as permitted sender)
Received: from [152.163.225.129] (HELO omr-r01.mail.aol.com) (152.163.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Apr 2006 23:46:00 -0700
Received: from aol.com (10.146.145.194)
  by omr-r01.mail.aol.com with ESMTP; 11 Apr 2006 02:45:40 -0400
Message-ID: <443B5092.5030005@aol.com>
Date: Tue, 11 Apr 2006 12:15:38 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc4 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Distributed Lucene.. - clustering as a requirement
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com><fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com><FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net> <88c6a6720604061255w48c690ebyd7a2892aae772798@mail.gmail.com> <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net> <443AB8BA.6050004@apache.org>
In-Reply-To: <443AB8BA.6050004@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Agreed, an inverted index cannot be efficiently maintained in a 
B-tree(hence RDBMS).  But I think we can(or should)  have the option of 
a  B-tree based storage for unindexed fields, whereas for indexed fields 
we can use the existing lucene's architecture.

prasen

cutting@apache.org wrote:

> Dmitry Goldenberg wrote:
>
>> For an enterprise-level application, Lucene appears too file-system and 
>
> too byte-sequence-centric a technology.  Just my opinion.  The 
> Directory API is just too low-level.
>
> There are good reasons why Lucene is not built on top of a RDBMS.  An 
> inverted index is not efficiently maintained in a B-Tree, and B-Trees 
> are the foundation of RDBMSes.
>
> http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf
>
>> I'd be OK with an RDBMS-based Directory implementation I could take 
>> and use.  But generally, I think the Lucene authors might like to 
>> take a step back and consider splitting off the repository and making 
>> it more extensible and high-level.  Perhaps something like JSR-170 
>> (Java repository API) may be a good route to go....
>
>
> If you have concrete ideas for an improvements to Lucene's Directory 
> interface, please propose them to the java-dev mailing list, ideally 
> as a patch.
>
> Cheers,
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 08:43:18 2006
Return-Path: <java-user-return-20093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60426 invoked from network); 11 Apr 2006 08:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 08:43:18 -0000
Received: (qmail 59156 invoked by uid 500); 11 Apr 2006 08:43:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59131 invoked by uid 500); 11 Apr 2006 08:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59113 invoked by uid 99); 11 Apr 2006 08:43:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 01:43:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 01:43:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.6/8.13.6) with ESMTP id k3B8gm4Q116344
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 08:42:48 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k3B8hfUJ232482
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:43:41 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k3B8gmxY008604
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:42:48 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k3B8gmv0008599
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:42:48 +0200
In-Reply-To: <022f01c65ccf$0c7e0950$6fe9a8c0@ict2011>
Subject: Re: Small field indexing and ranking
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF2E77F57F.F815FAE9-ONC225714D.002CF00C-C225714D.002F009F@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Tue, 11 Apr 2006 11:33:23 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 11/04/2006 11:43:40
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Maxym Mykhalchuk" <maxym@dit.unitn.it> wrote on 10/04/2006 09:46:16 PM:
> Here's the issue: All my "documents" will be having a few (2-3:
> title, short description) short fields. You see, it's rare that the
> same word is repeated several times in a title, so will Lucene be
> able to give me a decent ranking, or will it be able to tell me "oh,
> yes, this term is in the following 300 titles".
>
> On what I've read on the topic so far, it seems that inverted
> indexes do work good on big texts, as they are able to exploit the
> repetition of words to do ranking.

Lucene is no psychic. If you're looking for "dog", and the document
contains two short documents, actually titles:
      "Sparky the Fire Dog"
and   "Dog Hause Home Page"
(just two silly titles from Google's top 10 results for "dog"...)
Then there's hardly any way for Lucene to determine which document
should be ranked higher.

For single word queries in a situation like this, you might want
to help Lucene learn the "good" ranking. One way is to use
Document.setBoost() (or Field.setBoost) to pre-determine which
document is more "important" regardless of its text (e.g.,
using some sort of link analysis, or whatever trick that is
applicable in your situation). Another way is to override
Lucene's relevance ranking with some other type of sorting
(see the Sort class) - for example, to sort all the matching
results by date, to get the newer matching results first.
In many applications, you might want to let your users control
this sort order; For example, in a shopping site (where product
names are the very short "documents"), you might want to let
the user sort the results by price, by popularity, by release
date, by users' ranking, and so on.

For multi-word queries, it is actually possible to improve
on Lucene's standard ranking. For example, let's say you
have the two titles
      "Hot Dog on a Stick"
      "Your Dog in Hot Weather"
And get a query "hot dog" (without quotation marks).
Using QueryParser, Lucene will normally rank the two titles
more or less the same. However, the first one is probably
much better because the words "hot" and "dog", don't just
appear there, they actually appear very close, and in this
case even in order.

This sort of proximity-influenced scoring is missing from
Lucene's QueryParser, and I've been wondering recently
on how it is best to add it, and whether it is possible to
easily do it with existing Lucene machinary, like the
SpanQuery class. Has anyone ever tried to do something
like this before, and can tell us their experience?

Good Luck,
Nadav.

--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 08:53:56 2006
Return-Path: <java-user-return-20094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65343 invoked from network); 11 Apr 2006 08:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 08:53:55 -0000
Received: (qmail 71786 invoked by uid 500); 11 Apr 2006 08:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71766 invoked by uid 500); 11 Apr 2006 08:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71755 invoked by uid 99); 11 Apr 2006 08:53:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 01:53:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.205.194.4] (HELO dit.unitn.it) (193.205.194.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 01:53:46 -0700
Received: from ict2011 (ict20-11.science.unitn.it [192.168.233.111])
	by dit.unitn.it (8.12.11.20060308/8.12.11) with SMTP id k3B8rMm3020381
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:53:22 +0200
Message-ID: <008501c65d45$36b27730$6fe9a8c0@ict2011>
From: "Maxym Mykhalchuk" <maxym@dit.unitn.it>
To: <java-user@lucene.apache.org>
References: <OF2E77F57F.F815FAE9-ONC225714D.002CF00C-C225714D.002F009F@il.ibm.com>
Subject: Re: Small field indexing and ranking
Date: Tue, 11 Apr 2006 10:52:07 +0200
Organization: DIT
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Nadav,

Thanks for suggestions.

As for improving multi-word queries, Doug Cutting recently posted a link to 
his presentation, 
http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf, 
just scroll down to Nutch N-Grams there, and you'll see the answer.
Basically, "Buffy the Vampire" is indexed as buffy, buffy-the+0, the, 
the-vampire+0, vampire; but that's only for common terms like "the", "www" 
etc. I wander if it's possible to use the same technique to store phrases...

Maxym

==================================
Maxym Mykhalchuk
(+39) 320 8593170
PhD student at University of Trento, ITALY
==================================
----- Original Message ----- 
From: "Nadav Har'El" <NYH@il.ibm.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, April 11, 2006 10:33 AM
Subject: Re: Small field indexing and ranking


> "Maxym Mykhalchuk" <maxym@dit.unitn.it> wrote on 10/04/2006 09:46:16 PM:
>> Here's the issue: All my "documents" will be having a few (2-3:
>> title, short description) short fields. You see, it's rare that the
>> same word is repeated several times in a title, so will Lucene be
>> able to give me a decent ranking, or will it be able to tell me "oh,
>> yes, this term is in the following 300 titles".
>>
>> On what I've read on the topic so far, it seems that inverted
>> indexes do work good on big texts, as they are able to exploit the
>> repetition of words to do ranking.
>
> Lucene is no psychic. If you're looking for "dog", and the document
> contains two short documents, actually titles:
>      "Sparky the Fire Dog"
> and   "Dog Hause Home Page"
> (just two silly titles from Google's top 10 results for "dog"...)
> Then there's hardly any way for Lucene to determine which document
> should be ranked higher.
>
> For single word queries in a situation like this, you might want
> to help Lucene learn the "good" ranking. One way is to use
> Document.setBoost() (or Field.setBoost) to pre-determine which
> document is more "important" regardless of its text (e.g.,
> using some sort of link analysis, or whatever trick that is
> applicable in your situation). Another way is to override
> Lucene's relevance ranking with some other type of sorting
> (see the Sort class) - for example, to sort all the matching
> results by date, to get the newer matching results first.
> In many applications, you might want to let your users control
> this sort order; For example, in a shopping site (where product
> names are the very short "documents"), you might want to let
> the user sort the results by price, by popularity, by release
> date, by users' ranking, and so on.
>
> For multi-word queries, it is actually possible to improve
> on Lucene's standard ranking. For example, let's say you
> have the two titles
>      "Hot Dog on a Stick"
>      "Your Dog in Hot Weather"
> And get a query "hot dog" (without quotation marks).
> Using QueryParser, Lucene will normally rank the two titles
> more or less the same. However, the first one is probably
> much better because the words "hot" and "dog", don't just
> appear there, they actually appear very close, and in this
> case even in order.
>
> This sort of proximity-influenced scoring is missing from
> Lucene's QueryParser, and I've been wondering recently
> on how it is best to add it, and whether it is possible to
> easily do it with existing Lucene machinary, like the
> SpanQuery class. Has anyone ever tried to do something
> like this before, and can tell us their experience?
>
> Good Luck,
> Nadav.
>
> --
> Nadav Har'El
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 09:21:56 2006
Return-Path: <java-user-return-20095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82890 invoked from network); 11 Apr 2006 09:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 09:21:54 -0000
Received: (qmail 8310 invoked by uid 500); 11 Apr 2006 09:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7827 invoked by uid 500); 11 Apr 2006 09:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7816 invoked by uid 99); 11 Apr 2006 09:21:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:21:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:21:47 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.6/8.13.6) with ESMTP id k3B9LM9A078018
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 09:21:22 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k3B9MFUJ243102
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 11:22:15 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k3B9LLW2021410
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 11:21:21 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k3B9LLfX021388
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 11:21:21 +0200
In-Reply-To: <008501c65d45$36b27730$6fe9a8c0@ict2011>
Subject: Re: Small field indexing and ranking
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF420F078F.3DA6D072-ONC225714D.0030B900-C225714D.00328D74@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Tue, 11 Apr 2006 12:12:10 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 11/04/2006 12:22:14
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Maxym Mykhalchuk" <maxym@dit.unitn.it> wrote on 11/04/2006 11:52:07 AM:
> As for improving multi-word queries, Doug Cutting recently posted a link
to
> his presentation,
> http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf,

> just scroll down to Nutch N-Grams there, and you'll see the answer.
> Basically, "Buffy the Vampire" is indexed as buffy, buffy-the+0, the,
> the-vampire+0, vampire; but that's only for common terms like "the",
"www"
> etc. I wander if it's possible to use the same technique to store
phrases...

The method you propose has been known for a long time, and sometimes called
"Lexical Affinities".
For example, http://trec.nist.gov/pubs/trec10/papers/JuruAtTrec.pdf
explains:

   "Lexical affinities (LAs) were first introduced by Saussure in 1947
    to represent the correlation between words co-occurring in a given
    language and then restricted to a given document for IR purposes.
    LAs are identified by looking at pairs of words found in close
    proximity to each other. It has been described elsewhere how LAs,
    when used as indexing units, improve precision of search by
    disambiguating terms."

A paper from SIGIR from as back as 1989
http://widit.slis.indiana.edu/irpub/SIGIR/1989/cite21.htm
makes use of this technique.

However, I'm not sure that this technique is still considered the
best one. It can have a large impact on the index size, and it may
be possible to get similar results with no impact on index size
and just a small run-time slowdown by using something like
SpanNearQuery, or a variation on this idea. Again, I didn't yet
try to do this myself, so I'm not sure how successful that would
be.

--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 09:38:51 2006
Return-Path: <java-user-return-20096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93956 invoked from network); 11 Apr 2006 09:38:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 09:38:46 -0000
Received: (qmail 26325 invoked by uid 500); 11 Apr 2006 09:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26248 invoked by uid 500); 11 Apr 2006 09:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26133 invoked by uid 99); 11 Apr 2006 09:38:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:38:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:38:32 -0700
Received: (qmail 6870 invoked from network); 11 Apr 2006 09:38:09 -0000
Received: from unknown (HELO p5496f59f.dip.t-dialin.net) ([pbs]695637@[84.150.245.159])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 11 Apr 2006 09:38:09 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Small field indexing and ranking
Date: Tue, 11 Apr 2006 11:38:28 +0200
User-Agent: KMail/1.8.2
References: <OF2E77F57F.F815FAE9-ONC225714D.002CF00C-C225714D.002F009F@il.ibm.com>
In-Reply-To: <OF2E77F57F.F815FAE9-ONC225714D.002CF00C-C225714D.002F009F@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604111138.28995@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Dienstag 11 April 2006 10:33, Nadav Har'El wrote:

> This sort of proximity-influenced scoring is missing from
> Lucene's QueryParser, and I've been wondering recently
> on how it is best to add it, and whether it is possible to
> easily do it with existing Lucene machinary, like the
> SpanQuery class.

Nutch uses a boost someway like this:

Query: hot dog

Rewritten query: +hot +dog "hot dog"^1000

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 09:42:30 2006
Return-Path: <java-user-return-20097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95548 invoked from network); 11 Apr 2006 09:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 09:42:29 -0000
Received: (qmail 34928 invoked by uid 500); 11 Apr 2006 09:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34595 invoked by uid 500); 11 Apr 2006 09:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34584 invoked by uid 99); 11 Apr 2006 09:42:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:42:23 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=BLANK_LINES_70_80,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 02:42:23 -0700
Received: from anton.ipt ([192.168.0.177] helo=anton)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1FTFNn-0006XZ-4O
	for java-user@lucene.apache.org; Tue, 11 Apr 2006 13:41:59 +0400
From: <anton@orbita1.ru>
To: <java-user@lucene.apache.org>
Subject: Clusterization of searching
Date: Tue, 11 Apr 2006 13:41:30 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
In-Reply-To: <443B5092.5030005@aol.com>
Thread-Index: AcZdM5536BTaYVqRQ8e9sPkJAX0IRQAGC1ag
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060411094223.4CA9A10FB006@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What be way for clusterizations of searching?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 12:57:40 2006
Return-Path: <java-user-return-20098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18986 invoked from network); 11 Apr 2006 12:57:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 12:57:39 -0000
Received: (qmail 47649 invoked by uid 500); 11 Apr 2006 12:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47629 invoked by uid 500); 11 Apr 2006 12:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47617 invoked by uid 99); 11 Apr 2006 12:57:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 05:57:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wproxy.gmail.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 05:57:31 -0700
Received: by wproxy.gmail.com with SMTP id 68so1022568wra
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 05:57:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MtZUgilnJ7xXPoAwkwQlz/f2GEKYfGEmIqCrVCKspVeD+MeRX+w6i3KCcUr3u6Gh0SuDe1zKMyzTbr1cX/LVS2fO8UuioSAnIp5LBheg4UNsvlYdDbiUHu0cbWNldqic8F+vsaa3/Xb+Xcby2h0Kdjj5iRyjpJFzXA+Fn6J/Kco=
Received: by 10.54.67.11 with SMTP id p11mr4555159wra;
        Tue, 11 Apr 2006 05:57:10 -0700 (PDT)
Received: by 10.54.114.15 with HTTP; Tue, 11 Apr 2006 05:57:10 -0700 (PDT)
Message-ID: <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
Date: Tue, 11 Apr 2006 08:57:10 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2581_609100.1144760230824"
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2581_609100.1144760230824
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yonik,

Could you explain why an IndexSearcher constructed from multiple readers is
faster than a MultiSearcher constructed from same readers?

Thanks,
Peter



On 4/10/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> On 4/10/06, oramas mart=EDn <jloramas@gmail.com> wrote:
> > Is there any performance (or other) difference between using an
> > IndexSearcher initialized with a MultiReader instead of using a
> > MultiSearcher?
>
> Yes, the IndexSearcher(MultiReader) solution will be faster.
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search
> Server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2581_609100.1144760230824--

From java-user-return-20099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 14:47:15 2006
Return-Path: <java-user-return-20099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3455 invoked from network); 11 Apr 2006 14:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 14:46:55 -0000
Received: (qmail 54299 invoked by uid 500); 11 Apr 2006 14:46:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54131 invoked by uid 500); 11 Apr 2006 14:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53634 invoked by uid 99); 11 Apr 2006 14:46:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 07:46:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 07:46:40 -0700
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 11 Apr 2006 07:45:33 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C65D76.944DC395"
Subject: RE: Distributed Lucene.. - clustering as a requirement
Date: Tue, 11 Apr 2006 07:45:06 -0700
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C2C@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C2C@ehost011-3.exch011.intermedia.net>
Thread-Topic: Distributed Lucene.. - clustering as a requirement
Thread-Index: AcZdM37K2JNIN135QfaLY6bXubp2eQAQweSS
References: <39B0FB508E5D7540ACA5AD57225E150D392040@xmail.me.corp.entopia.com><fed285090603060705i3ad408b0j94473b62df9b8bbe@mail.gmail.com><FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1D@ehost011-3.exch011.intermedia.net> <88c6a6720604061255w48c690ebyd7a2892aae772798@mail.gmail.com> <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C1E@ehost011-3.exch011.intermedia.net> <443AB8BA.6050004@apache.org> <443B5092.5030005@aol.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Apr 2006 14:45:33.0392 (UTC) FILETIME=[96307500:01C65D76]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C65D76.944DC395
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I guess Compass is probably the way to go - =
http://www.opensymphony.com/compass/

________________________________

From: Prasenjit Mukherjee [mailto:prasenjitm@aol.com]
Sent: Tue 4/11/2006 2:45 AM
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene.. - clustering as a requirement



Agreed, an inverted index cannot be efficiently maintained in a
B-tree(hence RDBMS).  But I think we can(or should)  have the option of
a  B-tree based storage for unindexed fields, whereas for indexed fields
we can use the existing lucene's architecture.

prasen

cutting@apache.org wrote:

> Dmitry Goldenberg wrote:
>
>> For an enterprise-level application, Lucene appears too file-system =
and
>
> too byte-sequence-centric a technology.  Just my opinion.  The
> Directory API is just too low-level.
>
> There are good reasons why Lucene is not built on top of a RDBMS.  An
> inverted index is not efficiently maintained in a B-Tree, and B-Trees
> are the foundation of RDBMSes.
>
> =
http://www.haifa.ibm.com/Workshops/ir2005/papers/DougCutting-Haifa05.pdf
>
>> I'd be OK with an RDBMS-based Directory implementation I could take
>> and use.  But generally, I think the Lucene authors might like to
>> take a step back and consider splitting off the repository and making
>> it more extensible and high-level.  Perhaps something like JSR-170
>> (Java repository API) may be a good route to go....
>
>
> If you have concrete ideas for an improvements to Lucene's Directory
> interface, please propose them to the java-dev mailing list, ideally
> as a patch.
>
> Cheers,
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C65D76.944DC395
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C65D76.944DC395--

From java-user-return-20100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 15:10:45 2006
Return-Path: <java-user-return-20100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18994 invoked from network); 11 Apr 2006 15:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 15:10:38 -0000
Received: (qmail 92877 invoked by uid 500); 11 Apr 2006 15:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92824 invoked by uid 500); 11 Apr 2006 15:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92751 invoked by uid 99); 11 Apr 2006 15:10:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 08:10:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 08:10:28 -0700
Received: by pproxy.gmail.com with SMTP id m51so1393513pye
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 08:10:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=M/5CWMsVSJOXK3t6or36U5i6NsjTU/0POj/i/niBGudcyLKOABktHaMph1mcN0Pp/EoyFJYJg6c2O+Og6imuaxiSe4gdtuK6tS5yUKs2b+da5na/Hw0U1ZJWAXAPrgE6P9xbUqACg6344TRnJYCtOaBeNm94VjxkITGYeDZswpU=
Received: by 10.35.82.15 with SMTP id j15mr208615pyl;
        Tue, 11 Apr 2006 08:10:08 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 11 Apr 2006 08:10:08 -0700 (PDT)
Message-ID: <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
Date: Tue, 11 Apr 2006 11:10:08 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/11/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Could you explain why an IndexSearcher constructed from multiple readers =
is
> faster than a MultiSearcher constructed from same readers?

The "convergence layer" is a level lower for a MultiReader vs a MultiSearch=
er.

A MultiReader is an IndexReader, and Queries (Scorers) run directly
against it since it has efficient TermEnum and TermDocs
implementations.

A MultiSearcher must do independent searches against subsearchers
retrieving the top "n" matches, and maintain an additional priority
queue to merge the results to get the global top "n" matches.  The
implemetation of createWeight is also heavier (heh..)

I've never measured the performance difference, and it's probably
relatively small for most queries.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 15:58:57 2006
Return-Path: <java-user-return-20101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54028 invoked from network); 11 Apr 2006 15:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 15:58:55 -0000
Received: (qmail 98466 invoked by uid 500); 11 Apr 2006 15:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98421 invoked by uid 500); 11 Apr 2006 15:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98407 invoked by uid 99); 11 Apr 2006 15:58:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 08:58:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wproxy.gmail.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 08:58:41 -0700
Received: by wproxy.gmail.com with SMTP id i20so1037305wra
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 08:58:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JQnvfFTRHppZRh2DWX5Z+Jd3H2vF4BGfEpZ7L+JJBb+W1sl4bvd+Nq+XlGTFvISHaNryHVUWGj+HWfgHpQ0svcKa1pdehNzm/Kve2OZQyP8/RZxcyv1Au3wJKHolV8vvkShdVVJrFkjFoj5d5BS5I6N1lMHbaLdBHazRQqSGcqk=
Received: by 10.65.196.7 with SMTP id y7mr5189636qbp;
        Tue, 11 Apr 2006 08:58:20 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Tue, 11 Apr 2006 08:58:20 -0700 (PDT)
Message-ID: <f742a72b0604110858s43e985h9722f962799642e1@mail.gmail.com>
Date: Tue, 11 Apr 2006 11:58:20 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: getting frequency of a phrase within documents
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am using phraseQuery to get the number of documents that the query
appers in using the hits. I would like to know if there is any way in
which i can get the number of times a phrase appears within each
document.

I am currently  using  searching for the phrase "avoids deadlock"

phraseQuery query =3Dnew PhraseQuery();
searcher =3D new IndexSearcher(rd);
String temp =3D"avoids";
String temp2 =3D"deadlock";
Term synset2 =3D new Term("contents",temp);
Term ss =3D new Term("contents",temp2);
query.add(synset2);
query.add( ss);
Hits hits =3D searcher.search(query);
System.out.println("number of hits=3D"+((HitIterator)hits.iterator()).lengt=
h() );

Any help would be greatly appreciated.




--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 17:11:42 2006
Return-Path: <java-user-return-20102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2562 invoked from network); 11 Apr 2006 17:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 17:11:41 -0000
Received: (qmail 21412 invoked by uid 500); 11 Apr 2006 17:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21388 invoked by uid 500); 11 Apr 2006 17:11:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21377 invoked by uid 99); 11 Apr 2006 17:11:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:11:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nproxy.gmail.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:11:31 -0700
Received: by nproxy.gmail.com with SMTP id c29so951145nfb
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:11:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WLfOLrgRUE6aA2n6d2k2BdmegM15D8mDuUSg5ZGp1AQ8JYlXXKRfVqr9ycDo2H65GDP8IYLj/Yo0BsUWoresMtcs8s46/OVPr656VcDSWsgYjnBzr+mScI29mv/kqLdt1p6jb+B3nWxmvqF71EmNjHERFFvFfyQGT9Qc6vPI9RI=
Received: by 10.48.215.3 with SMTP id n3mr2261062nfg;
        Tue, 11 Apr 2006 10:11:10 -0700 (PDT)
Received: by 10.48.47.6 with HTTP; Tue, 11 Apr 2006 10:11:10 -0700 (PDT)
Message-ID: <88c6a6720604111011q7e3f3445x4ddaf5a23de153c@mail.gmail.com>
Date: Tue, 11 Apr 2006 12:11:10 -0500
From: "Chris Lamprecht" <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What is the retrieval modle for lucene?
In-Reply-To: <4f2c7c9b0604100136m912c3den40ce277b11d28d1d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4f2c7c9b0604100136m912c3den40ce277b11d28d1d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It uses a combination of boolean, to get the set of matching
documents, and vector space (by default) to rank them.  Or one might
say it uses the vector space model, and only returns nonzero scoring
documents.

On 4/10/06, hu andy <andyhugb@gmail.com> wrote:
> I have seen in some documents that there are three kinds of retrieval mod=
le
> which are used often: Boolean,  vector space and probability.
> So I want to which is it that used by lucene. Thank you in advance
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 17:46:56 2006
Return-Path: <java-user-return-20103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30929 invoked from network); 11 Apr 2006 17:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 17:46:55 -0000
Received: (qmail 90313 invoked by uid 500); 11 Apr 2006 17:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90005 invoked by uid 500); 11 Apr 2006 17:46:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89994 invoked by uid 99); 11 Apr 2006 17:46:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:46:49 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sun_miki@hotmail.com designates 65.54.174.36 as permitted sender)
Received: from [65.54.174.36] (HELO hotmail.com) (65.54.174.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:46:49 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 11 Apr 2006 10:46:28 -0700
Message-ID: <BAY103-F2674DC5CF1D05CB0A5F995FECD0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Tue, 11 Apr 2006 17:46:25 GMT
X-Originating-IP: [193.63.235.40]
X-Originating-Email: [sun_miki@hotmail.com]
X-Sender: sun_miki@hotmail.com
In-Reply-To: <Pine.LNX.4.58.0604061455250.1987@hal.rescomp.berkeley.edu>
From: "miki sun" <sun_miki@hotmail.com>
To: java-user@lucene.apache.org
Subject: search.Similarity
Date: Tue, 11 Apr 2006 17:46:25 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 11 Apr 2006 17:46:28.0667 (UTC) FILETIME=[DC6FF8B0:01C65D8F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there

Is there any theory behind the similarity measure of Lucene?

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html

Thanks

Miki



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 17:54:43 2006
Return-Path: <java-user-return-20104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35612 invoked from network); 11 Apr 2006 17:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 17:54:42 -0000
Received: (qmail 2120 invoked by uid 500); 11 Apr 2006 17:54:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1501 invoked by uid 500); 11 Apr 2006 17:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1489 invoked by uid 99); 11 Apr 2006 17:54:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:54:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 10:54:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AC21D5B775; Tue, 11 Apr 2006 10:54:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9E7167F403
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 10:54:05 -0700 (PDT)
Date: Tue, 11 Apr 2006 10:54:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: getting frequency of a phrase within documents
In-Reply-To: <f742a72b0604110858s43e985h9722f962799642e1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604111042200.30357@hal.rescomp.berkeley.edu>
References: <f742a72b0604110858s43e985h9722f962799642e1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


if you use a custom SImilarity class, the tf(float) function is used for
phrases to determine how the score should be determined based on the
number of times the phrase qppears in the documents.

if you make it an identity function, and modify the other functions in the
Similarity to be (mostly) constant values, then youcan peobably make a
Similarity class in which the score of each document is the number of time
the Phrase appears.

NOTE: this will really only work with exact phrases ... for inexact phrase
matches the value passed to tf is a sum that has already lost information
... the input might be "1.5" but you have no way of knowing if that's two
sloppy maches with a "freq" of 0.75" each, or 3 sloppy matches with of
"0.5" each.

You might be better off using the SpanNear class and the getSpans method.



: Date: Tue, 11 Apr 2006 11:58:20 -0400
: From: Vishal Bathija <vishalbathija@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: getting frequency of a phrase within documents
:
: Hi,
: I am using phraseQuery to get the number of documents that the query
: appers in using the hits. I would like to know if there is any way in
: which i can get the number of times a phrase appears within each
: document.
:
: I am currently  using  searching for the phrase "avoids deadlock"
:
: phraseQuery query =new PhraseQuery();
: searcher = new IndexSearcher(rd);
: String temp ="avoids";
: String temp2 ="deadlock";
: Term synset2 = new Term("contents",temp);
: Term ss = new Term("contents",temp2);
: query.add(synset2);
: query.add( ss);
: Hits hits = searcher.search(query);
: System.out.println("number of hits="+((HitIterator)hits.iterator()).length() );
:
: Any help would be greatly appreciated.
:
:
:
:
: --
: Vishal Bathija
: Graduate Student
: Department of Computer Science & Systems Analysis
: Miami University
: Oxford,Ohio
: Phone: (513)-461-9239
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 18:07:21 2006
Return-Path: <java-user-return-20105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43649 invoked from network); 11 Apr 2006 18:07:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 18:07:20 -0000
Received: (qmail 22645 invoked by uid 500); 11 Apr 2006 18:07:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22396 invoked by uid 500); 11 Apr 2006 18:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22385 invoked by uid 99); 11 Apr 2006 18:07:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 11:07:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 11:07:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B3CC333C048; Tue, 11 Apr 2006 14:06:52 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id C567C33C047
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 14:06:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <BAY103-F2674DC5CF1D05CB0A5F995FECD0@phx.gbl>
References: <BAY103-F2674DC5CF1D05CB0A5F995FECD0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9CAF5F88-9B15-4F22-AC26-8AE7064BC5EB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search.Similarity
Date: Tue, 11 Apr 2006 14:06:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Apr 11, 2006, at 1:46 PM, miki sun wrote:
> Is there any theory behind the similarity measure of Lucene?
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
> Similarity.html

No, Doug just made it up with some random mathematical formulas, just  
for fun :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 18:12:29 2006
Return-Path: <java-user-return-20106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46182 invoked from network); 11 Apr 2006 18:12:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 18:12:25 -0000
Received: (qmail 28584 invoked by uid 500); 11 Apr 2006 18:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28557 invoked by uid 500); 11 Apr 2006 18:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28546 invoked by uid 99); 11 Apr 2006 18:12:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 11:12:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 11:12:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3110633C048; Tue, 11 Apr 2006 14:11:57 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 26FA733C045
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 14:11:56 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <9CAF5F88-9B15-4F22-AC26-8AE7064BC5EB@ehatchersolutions.com>
References: <BAY103-F2674DC5CF1D05CB0A5F995FECD0@phx.gbl> <9CAF5F88-9B15-4F22-AC26-8AE7064BC5EB@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <54DA065D-153F-48E2-9F79-DFFE09BD18DF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search.Similarity
Date: Tue, 11 Apr 2006 14:11:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In case anyone misses the smiley, I'm just teasing.  Yes, there are  
years of research and heavy duty experience that are behind Lucene.   
There are quite a number of research documents and books that  
describe information retrieval theory and practice, several of them  
linked here:

	<http://wiki.apache.org/jakarta-lucene/InformationRetrieval>


On Apr 11, 2006, at 2:06 PM, Erik Hatcher wrote:

> On Apr 11, 2006, at 1:46 PM, miki sun wrote:
>> Is there any theory behind the similarity measure of Lucene?
>>
>> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
>> Similarity.html
>
> No, Doug just made it up with some random mathematical formulas,  
> just for fun :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 19:16:18 2006
Return-Path: <java-user-return-20107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86042 invoked from network); 11 Apr 2006 19:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 19:16:13 -0000
Received: (qmail 42181 invoked by uid 500); 11 Apr 2006 19:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42140 invoked by uid 500); 11 Apr 2006 19:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42119 invoked by uid 99); 11 Apr 2006 19:15:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 12:15:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 12:15:57 -0700
Received: by wproxy.gmail.com with SMTP id i4so1006339wra
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 12:15:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T8JD4rieRZAL3hBb8rSRbQbubSx6V8+EImvCzKNlY/3l4EOS34Emc8NC4fsz2gXGz+tNP4HzHiadoWf/yl2t7pbBknD14MibJk6eVR6PzHZ+1hdqmx1KxC8ucJZ8uqWby8V5a8tvEucSJKkiAot+9EnvUJyVC//exqf98G3IgSo=
Received: by 10.54.93.7 with SMTP id q7mr1172255wrb;
        Tue, 11 Apr 2006 12:15:35 -0700 (PDT)
Received: by 10.54.114.15 with HTTP; Tue, 11 Apr 2006 12:15:35 -0700 (PDT)
Message-ID: <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
Date: Tue, 11 Apr 2006 15:15:35 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6074_14570142.1144782935155"
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6074_14570142.1144782935155
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Does this mean that MultiReader doesn't merge the search results and sort
the results as if there was only one index? If not, does it  simply
concatenate the results?

Peter



On 4/11/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> On 4/11/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > Could you explain why an IndexSearcher constructed from multiple reader=
s
> is
> > faster than a MultiSearcher constructed from same readers?
>
> The "convergence layer" is a level lower for a MultiReader vs a
> MultiSearcher.
>
> A MultiReader is an IndexReader, and Queries (Scorers) run directly
> against it since it has efficient TermEnum and TermDocs
> implementations.
>
> A MultiSearcher must do independent searches against subsearchers
> retrieving the top "n" matches, and maintain an additional priority
> queue to merge the results to get the global top "n" matches.  The
> implemetation of createWeight is also heavier (heh..)
>
> I've never measured the performance difference, and it's probably
> relatively small for most queries.
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search
> Server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6074_14570142.1144782935155--

From java-user-return-20108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 19:50:40 2006
Return-Path: <java-user-return-20108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10988 invoked from network); 11 Apr 2006 19:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 19:50:28 -0000
Received: (qmail 80314 invoked by uid 500); 11 Apr 2006 19:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80138 invoked by uid 500); 11 Apr 2006 19:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80115 invoked by uid 99); 11 Apr 2006 19:50:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 12:50:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 12:50:04 -0700
Received: by pproxy.gmail.com with SMTP id m51so1464403pye
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 12:49:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Pb8zdRfPycHH2QpDTGltPhwHqhK0nJvXbH+i6IOoCPjn3ELeMlaXdnKB+SnC+DRbcyBGaiLdJ06UhIO32ANzrTfqpI/ob8XXgiujfDXptQz3adVXFS2FGdoM6+pwP2Afmx1nM8bdFtoQGK38qkdgUJjaf4RW1lskOevxBoaKVHI=
Received: by 10.35.81.10 with SMTP id i10mr370579pyl;
        Tue, 11 Apr 2006 12:49:43 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 11 Apr 2006 12:49:43 -0700 (PDT)
Message-ID: <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com>
Date: Tue, 11 Apr 2006 15:49:43 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
	 <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/11/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Does this mean that MultiReader doesn't merge the search results and sort
> the results as if there was only one index?

Correct, it doesn't.  It supports the lower level primitives like
TermEnum and TermDocs that searches use to run.  A term query is run
exactly the same way on a MultiReader as it is on a single segment
IndexReader.  In fact, if you open up an IndexReader on an index with
multiple segments, it constructs a MultiReader under-the-covers.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 20:22:00 2006
Return-Path: <java-user-return-20109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29195 invoked from network); 11 Apr 2006 20:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 20:22:00 -0000
Received: (qmail 43541 invoked by uid 500); 11 Apr 2006 20:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43519 invoked by uid 500); 11 Apr 2006 20:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43508 invoked by uid 99); 11 Apr 2006 20:21:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 13:21:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 13:21:53 -0700
Received: by wproxy.gmail.com with SMTP id 37so1195810wra
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 13:21:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aZpYbVobYddSwC1yvgA+P1m8iADAk0JDDRMCgUYvaVjJltOwpGoQJBTm5YZfi+h6PEyPywvd1R0f77Dy5jikavjcYl8cjJhZSOMl8hJJrSJD4X644nu8kdd0kwUM9euSwxaOsiq6K59YnaWeIoLd4jSTY7OBeueukJiFllUmAyA=
Received: by 10.54.72.15 with SMTP id u15mr690559wra;
        Tue, 11 Apr 2006 13:21:15 -0700 (PDT)
Received: by 10.54.114.15 with HTTP; Tue, 11 Apr 2006 13:21:15 -0700 (PDT)
Message-ID: <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
Date: Tue, 11 Apr 2006 16:21:15 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6666_24473018.1144786875278"
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
	 <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
	 <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6666_24473018.1144786875278
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Oops. I meant to say: Does this mean that an IndexSearcher constructed from
a MultiReader doesn't merge the search results and sort the results as if
there was only one index?

A quick test indicates that it does merge the results properly, however
there is a difference in the order of documents with equal score. The
MultiSearcher returns the higher doc first, but the IndexSearcher returns
the lowest doc first. I think docs of equal score are supposed to be
returned in the order they were indexed (lower doc id first).

Peter




On 4/11/06, Yonik Seeley <yseeley@gmail.com> wrote:
>
> On 4/11/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > Does this mean that MultiReader doesn't merge the search results and
> sort
> > the results as if there was only one index?
>
> Correct, it doesn't.  It supports the lower level primitives like
> TermEnum and TermDocs that searches use to run.  A term query is run
> exactly the same way on a MultiReader as it is on a single segment
> IndexReader.  In fact, if you open up an IndexReader on an index with
> multiple segments, it constructs a MultiReader under-the-covers.
>
> -Yonik
> http://incubator.apache.org/solr Solr, The Open Source Lucene Search
> Server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6666_24473018.1144786875278--

From java-user-return-20110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 21:12:00 2006
Return-Path: <java-user-return-20110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55746 invoked from network); 11 Apr 2006 21:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 21:12:00 -0000
Received: (qmail 14734 invoked by uid 500); 11 Apr 2006 21:11:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14713 invoked by uid 500); 11 Apr 2006 21:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14702 invoked by uid 99); 11 Apr 2006 21:11:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:11:54 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:11:53 -0700
Received: by pproxy.gmail.com with SMTP id m51so1481789pye
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 14:11:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BO6b25CcWHyS+NqMYfOGznV7FlPYZl/UaJXvv1bqskzfYBQGATTxEefSz2UOu//FO+tIKhx5i62EyrhurLPPFqrSlBqp93Hsbcovx+omy9braK1ADkATnCnlFSi2U8ysMb8Y06FiFXmk1H0SigkTV41Gvov+vakS8t2L74ZMq60=
Received: by 10.35.99.5 with SMTP id b5mr222396pym;
        Tue, 11 Apr 2006 14:11:32 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 11 Apr 2006 14:11:32 -0700 (PDT)
Message-ID: <c68e39170604111411w42e68348ncbbdb264bf50860b@mail.gmail.com>
Date: Tue, 11 Apr 2006 17:11:32 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
	 <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
	 <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com>
	 <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/11/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Oops. I meant to say: Does this mean that an IndexSearcher constructed fr=
om
> a MultiReader doesn't merge the search results and sort the results as if
> there was only one index?

That's how I answered it.
A single search is done... the "merging" of the different indexes is
done at a lower level than "search()"

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 21:14:17 2006
Return-Path: <java-user-return-20111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57758 invoked from network); 11 Apr 2006 21:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 21:14:15 -0000
Received: (qmail 20176 invoked by uid 500); 11 Apr 2006 21:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20154 invoked by uid 500); 11 Apr 2006 21:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20143 invoked by uid 99); 11 Apr 2006 21:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:14:08 -0700
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3BLDoBf012667
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 17:13:51 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout6-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3BLDfJI224336;
	Tue, 11 Apr 2006 17:13:44 -0400
Message-ID: <443C1C05.8000207@apache.org>
Date: Tue, 11 Apr 2006 14:13:41 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>	 <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>	 <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com> <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
In-Reply-To: <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter Keegan wrote:
> Oops. I meant to say: Does this mean that an IndexSearcher constructed from
> a MultiReader doesn't merge the search results and sort the results as if
> there was only one index?

It doesn't have to, since a MultiReader *is* a single index.

> A quick test indicates that it does merge the results properly, however
> there is a difference in the order of documents with equal score. The
> MultiSearcher returns the higher doc first, but the IndexSearcher returns
> the lowest doc first. I think docs of equal score are supposed to be
> returned in the order they were indexed (lower doc id first).

If that's the case it is a bug.  If you can reproduce this in a 
standalone test, please submit it to Jira.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 21:19:56 2006
Return-Path: <java-user-return-20112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59908 invoked from network); 11 Apr 2006 21:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 21:19:53 -0000
Received: (qmail 32054 invoked by uid 500); 11 Apr 2006 21:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32034 invoked by uid 500); 11 Apr 2006 21:19:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32023 invoked by uid 99); 11 Apr 2006 21:19:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:19:47 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wproxy.gmail.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 14:19:46 -0700
Received: by wproxy.gmail.com with SMTP id 67so1028044wri
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 14:19:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BDSmj7zTD8PrFkF56cADjHiZZymlxlMrejKeXte/nMgo34YlyXkHu1sJexNWQv4yyeKx5RlLXrUvf8HhWaS0z7C3yZXjbFUJzD6CLcSGvISjBB81RDqCjXjXBzSPhW3lxOOAVKeyvPnNXlJzIDfSP6U7dWZ/v9pXZBxo7j/azOM=
Received: by 10.64.250.12 with SMTP id x12mr3165379qbh;
        Tue, 11 Apr 2006 14:19:25 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Tue, 11 Apr 2006 14:19:25 -0700 (PDT)
Message-ID: <ad681e7f0604111419j34e0a433w6e5c04ea54c4c778@mail.gmail.com>
Date: Tue, 11 Apr 2006 17:19:25 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Seaches VS. Relational database Queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13665_23135080.1144790365649"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13665_23135080.1144790365649
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

H,
 We have made documents out of the rows in our database and one of the team
is suggesting that we abandon some of our database queries and instead use
lucene. I think there are some fundamental problems with this especially
when it comes to association tables (where there is a 1 one to many
relation, we basically take all the values in the associated table and stor=
e
them in one field).  One of the problems I see would be with values that
over lap (Example, name where one name is Jason Bateman, and one is Jason
Bateman Black, and it would be hard to replicate the Discrete Search for
Jason Bateman. Also I think there would be some issues with insuring that
all updates, adds and deletes were properly synced with the index, as well
as the possibility of duplicate rows in the index. Can people out there hel=
p
with any other pros and cons to this approach?

--
Ananth T Sarathy

------=_Part_13665_23135080.1144790365649--

From java-user-return-20113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 11 22:42:11 2006
Return-Path: <java-user-return-20113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7434 invoked from network); 11 Apr 2006 22:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Apr 2006 22:42:11 -0000
Received: (qmail 64800 invoked by uid 500); 11 Apr 2006 22:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64764 invoked by uid 500); 11 Apr 2006 22:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64753 invoked by uid 99); 11 Apr 2006 22:42:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 15:42:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 15:42:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 352BD5B764; Tue, 11 Apr 2006 15:41:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 29ED47F403
	for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 15:41:37 -0700 (PDT)
Date: Tue, 11 Apr 2006 15:41:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604111419j34e0a433w6e5c04ea54c4c778@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604111517560.9140@hal.rescomp.berkeley.edu>
References: <ad681e7f0604111419j34e0a433w6e5c04ea54c4c778@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) An inverted full text index is not a replacment for a relational
database.

2) many people think they need a relational database, when all they really
need is a well designed full text index.

To get to some of your specific questions...

: them in one field).  One of the problems I see would be with values that
: over lap (Example, name where one name is Jason Bateman, and one is Jason
: Bateman Black, and it would be hard to replicate the Discrete Search for

they way field values are "analyzed" is extremely configurable -- down to
the individual field level.  Which means that while you can have an actor
field where you can do loose text searching for "bateman" and get back
movies staring "Jason Bateman" and "Jason Bateman Black" (and even Guido
Batemans" if you use stemming) you can also have another field using a
KeywordAnalyzer such that a record with teh values "Jason Bateman" and
"Jack Black" will only be matched if hte user searches for "Jason Bateman"
or "Jack Black" ... searching for "Bateman Jack" or "Black Jason" will not
work.

furthermore, as you learn more about lucene you'll find things like
positionIncrimentGap, PhraseQueries and "slop" which will show you how you
can support queries like "Jason Black" matching movies staring "Jason
Bateman Black" or "Jason Black" but not movies staring both "Jason
Bateman" and "Jack Black" (unless you want them to)

: Jason Bateman. Also I think there would be some issues with insuring that
: all updates, adds and deletes were properly synced with the index, as well
: as the possibility of duplicate rows in the index. Can people out there help
: with any other pros and cons to this approach?

concern about replication is a perfectly valid one ... but it's an issue
that also plauges RDBMs ... i've yet to see a database that could garuntee
100% that every slave would surface newly repliated data from the master
at the *exact* same time.

I would suggest you take a look at the Solr project...

	http://incubator.apache.org/solr/

...it's very easy to get the demo up and running and to play with things
like positionIncrimentGap and various analyzers (all without ever writting
any lines of code) and Solr has scripts to make master=>slave replication
easy on machines that support rsync and hard links (ie: Unix/Linux)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 12 04:12:26 2006
Return-Path: <java-user-return-20114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39744 invoked from network); 12 Apr 2006 04:12:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2006 04:12:25 -0000
Received: (qmail 29817 invoked by uid 500); 12 Apr 2006 04:12:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29207 invoked by uid 500); 12 Apr 2006 04:12:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29196 invoked by uid 99); 12 Apr 2006 04:12:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 21:12:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 21:12:19 -0700
Received: by pproxy.gmail.com with SMTP id m51so1553883pye
        for <java-user@lucene.apache.org>; Tue, 11 Apr 2006 21:11:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IY8BbIFajIPVeh9fwWi28aja5TbyLRCCgOp1VY3AF12f7jS2gBCr3pZGBE1adiPAmJXWUUNbqtYZA8TsjLmJ0Uw/A/J0MQVDNmghcxRLzV2ah9nygRgYsRIVCYBuCPojK5FBX5QdZ3he8h5wLFc/JWnFgu4vyajeGrFc8uPOqRQ=
Received: by 10.35.54.20 with SMTP id g20mr2002977pyk;
        Tue, 11 Apr 2006 21:11:58 -0700 (PDT)
Received: by 10.35.50.10 with HTTP; Tue, 11 Apr 2006 21:11:58 -0700 (PDT)
Message-ID: <f13b62210604112111w1ccae71dq29906277aee0954a@mail.gmail.com>
Date: Wed, 12 Apr 2006 09:41:58 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Subject: analyser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22631_16655575.1144815118817"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22631_16655575.1144815118817
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

While Indexing, I use a different Analyser

While searching, I use a simple standard Analyzer

Will this prevent me from getting the same best fragments when i do a searc=
h
for two terms say term1 and term2

Rgds
Prabhu

------=_Part_22631_16655575.1144815118817--

From java-user-return-20115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 12 04:17:23 2006
Return-Path: <java-user-return-20115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41483 invoked from network); 12 Apr 2006 04:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2006 04:17:22 -0000
Received: (qmail 34081 invoked by uid 500); 12 Apr 2006 04:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34052 invoked by uid 500); 12 Apr 2006 04:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34041 invoked by uid 99); 12 Apr 2006 04:17:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 21:17:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Apr 2006 21:17:16 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 665D1B7BFD
	for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 14:16:48 +1000 (EST)
Message-ID: <443C7FCB.5080606@nuix.com.au>
Date: Wed, 12 Apr 2006 14:19:23 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: analyser
References: <f13b62210604112111w1ccae71dq29906277aee0954a@mail.gmail.com>
In-Reply-To: <f13b62210604112111w1ccae71dq29906277aee0954a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Raghavendra Prabhu wrote:
> While Indexing, I use a different Analyser
> 
> While searching, I use a simple standard Analyzer
> 
> Will this prevent me from getting the same best fragments when i do a search
> for two terms say term1 and term2

It depends on the differences, but in general you will always get 
inconsistent results unless you use the same analyser for both.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 12 07:16:46 2006
Return-Path: <java-user-return-20116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19576 invoked from network); 12 Apr 2006 07:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2006 07:16:44 -0000
Received: (qmail 80795 invoked by uid 500); 12 Apr 2006 07:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80772 invoked by uid 500); 12 Apr 2006 07:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80760 invoked by uid 99); 12 Apr 2006 07:16:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Apr 2006 00:16:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of NYH@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Apr 2006 00:16:35 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k3C7GDcn086744
	for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 07:16:13 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.12.10/NCO/VER6.8) with ESMTP id k3C7H7Cw203942
	for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 09:17:07 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.13.3) with ESMTP id k3C7GDMK031838
	for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 09:16:13 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11/8.12.11) with ESMTP id k3C7GCw8031824
	for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 09:16:12 +0200
In-Reply-To: <Pine.LNX.4.58.0604111517560.9140@hal.rescomp.berkeley.edu>
Subject: Re: Lucene Seaches VS. Relational database Queries
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1F126187.FB480636-ONC225714E.002440B0-C225714E.00270FD3@il.ibm.com>
From: "Nadav Har'El" <NYH@il.ibm.com>
Date: Wed, 12 Apr 2006 10:06:39 +0300
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0HF90 | November 16, 2005) at
 12/04/2006 10:17:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006 01:41:37 AM:
> : them in one field).  One of the problems I see would be with values
that
> : over lap (Example, name where one name is Jason Bateman, and one is
Jason
> : Bateman Black, and it would be hard to replicate the Discrete Search
for
>
> they way field values are "analyzed" is extremely configurable -- down to
> the individual field level.  Which means that while you can have an actor
> field where you can do loose text searching for "bateman" and get back
> movies staring "Jason Bateman" and "Jason Bateman Black" (and even Guido
> Batemans" if you use stemming) you can also have another field using a
> KeywordAnalyzer such that a record with teh values "Jason Bateman" and
> "Jack Black" will only be matched if hte user searches for "Jason
Bateman"
> or "Jack Black" ... searching for "Bateman Jack" or "Black Jason" will
not
> work.

Another possible trick is to have one field, but mark its end with special
tokens, say "^" and "$", so that "Jason Bateman" gets indexed as four
tokens:
      ^ Jason Bateman $
Then, if you want to search for the name Jason Bateman and that name only,
just search for the phrase "^ Jason Bateman $" - and only this entry will
match. (you can also continue to search this field normally)

If you'll think about this, you'll notice that you don't actually need
the beginning-of-field marker ("^") because it's easy to recognize the
beginning of a field because the position there is 0. Unfortunately,
I don't know how to match position 0 using the standard QueryParser,
but you can do it with the SpanFirstQuery: for example if we index
Jason Bateman as the three tokens
      Jason Bateman $
then we can search for it using something like
      SpanQuery[] terms = {
            new SpanTermQuery(new Term("actor", "Jason")),
            new SpanTermQuery(new Term("actor", "Bateman")),
            new SpanTermQuery(new Term("actor", "$")) };
      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
(or something like that... I didn't test this)


--
Nadav Har'El


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 12 13:08:15 2006
Return-Path: <java-user-return-20117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6659 invoked from network); 12 Apr 2006 13:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2006 13:08:14 -0000
Received: (qmail 65429 invoked by uid 500); 12 Apr 2006 13:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65266 invoked by uid 500); 12 Apr 2006 13:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65255 invoked by uid 99); 12 Apr 2006 13:08:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Apr 2006 06:08:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.49.195] (HELO web54705.mail.yahoo.com) (206.190.49.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Apr 2006 06:08:07 -0700
Received: (qmail 77892 invoked by uid 60001); 12 Apr 2006 13:07:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ez5Cg/tnFu95nHYzPyYfSh94Z7E4j7tB5wsOw6uvOeTPMIkR1tPZu3AJApzGq0qeVdepgrcozS3hx1PTfNKUDdX0L7aFsOfrZy1Mxy/ywwArvct2mztWxnyn/jFqWy1KO93MD7PhOEwDfSh9LbH5y9miljHRXoa9LRKDljZ3Ew8=  ;
Message-ID: <20060412130746.77889.qmail@web54705.mail.yahoo.com>
Received: from [70.83.4.60] by web54705.mail.yahoo.com via HTTP; Wed, 12 Apr 2006 06:07:46 PDT
Date: Wed, 12 Apr 2006 06:07:46 -0700 (PDT)
From: Oscar Picasso <oscgoogle@yahoo.com>
Subject: Using lucene to speed up queries on a relational db
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1576153713-1144847266=:77105"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1576153713-1144847266=:77105
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I have a postgresql table which expects to have around 20 millions rows.

- The structure is the following;

code int              -- can take one of 100 values
property varchar(250) -- can take one of 5000 values
param01 char(10)      -- can take one of 10 values
param02 char(10)      -- can take one of 10 values
...
[ 20 similar columns }
...
parama20 char(10)     -- can take one of 10 values
kewords text          -- 0 to 15 keywords (any word from a human language like english can be a keyword)

- The queries will involve 1 to all the columns of table with an AND operator.

I find it very difficult to optimize this kind of queries in the relational database because there are too many possible field combinaisons to create useful indexes.

As the columns use a small set of values I tought that it would be more efficient to use Lucene to perform this kind of query.

Initial tests with around 200000 documents/rows are good.

But here is my concern.

What would be the performance for queries over 20 million documents/rows using up to 20 fields in the boolean query (with Occur.MUST)?.

Any idea?

Thanks

Oscar




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1576153713-1144847266=:77105--

From java-user-return-20118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 12 15:22:00 2006
Return-Path: <java-user-return-20118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3684 invoked from network); 12 Apr 2006 15:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Apr 2006 15:21:59 -0000
Received: (qmail 39810 invoked by uid 500); 12 Apr 2006 15:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39769 invoked by uid 500); 12 Apr 2006 15:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39758 invoked by uid 99); 12 Apr 2006 15:21:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Apr 2006 08:21:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wproxy.gmail.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Apr 2006 08:21:53 -0700
Received: by wproxy.gmail.com with SMTP id 37so1372560wra
        for <java-user@lucene.apache.org>; Wed, 12 Apr 2006 08:21:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qQ60//c+6JRtUuPPM2aEdX2VD7/6P52Av2j1AkcbVVb8noh+rVT4oz8h9j9l4h932GUZ2SDbGcDvnp0UrGU1AlpTdrurN3iyCw2wiGbfu3AELlEG+y7ROmxJF77R8/rDzEs1mAYda5+kB1V2uJSxzVjeqc845Q9XT3eRI0xe2RY=
Received: by 10.54.72.15 with SMTP id u15mr1659196wra;
        Wed, 12 Apr 2006 08:21:32 -0700 (PDT)
Received: by 10.54.114.15 with HTTP; Wed, 12 Apr 2006 08:21:32 -0700 (PDT)
Message-ID: <e994873a0604120821r47e4bda3ie8b54823ac652c4d@mail.gmail.com>
Date: Wed, 12 Apr 2006 11:21:32 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiReader and MultiSearcher
In-Reply-To: <443C1C05.8000207@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2450_13661774.1144855292590"
References: <e71b9bb40604101144s48f0ed49r77734da70a073e33@mail.gmail.com>
	 <c68e39170604101203x71256010q4aeedf2d3d3f892a@mail.gmail.com>
	 <e994873a0604110557v6d203177qe6e01ebf333567ad@mail.gmail.com>
	 <c68e39170604110810v46c21b2bga75d72666050865b@mail.gmail.com>
	 <e994873a0604111215o78c2d3d6l50b2d029a3d86789@mail.gmail.com>
	 <c68e39170604111249p14ab14b0s88ee584a6ee7d396@mail.gmail.com>
	 <e994873a0604111321x7dcb235fkd8a3b75607f9ddf@mail.gmail.com>
	 <443C1C05.8000207@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2450_13661774.1144855292590
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Correction: the doc order is fine. My test was based on the existing
'TestMultiSearcher', and I hadn't noticed the swapping of the index order
here:

        // VITAL STEP:adding the searcher for the empty index first, before
the searcher for the populated index
        searchers[0] =3D new IndexSearcher(indexStoreB);
        searchers[1] =3D new IndexSearcher(indexStoreA);

Sorry about that,
Peter



On 4/11/06, Doug Cutting <cutting@apache.org> wrote:
>
> Peter Keegan wrote:
> > Oops. I meant to say: Does this mean that an IndexSearcher constructed
> from
> > a MultiReader doesn't merge the search results and sort the results as
> if
> > there was only one index?
>
> It doesn't have to, since a MultiReader *is* a single index.
>
> > A quick test indicates that it does merge the results properly, however
> > there is a difference in the order of documents with equal score. The
> > MultiSearcher returns the higher doc first, but the IndexSearcher
> returns
> > the lowest doc first. I think docs of equal score are supposed to be
> > returned in the order they were indexed (lower doc id first).
>
> If that's the case it is a bug.  If you can reproduce this in a
> standalone test, please submit it to Jira.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2450_13661774.1144855292590--

From java-user-return-20119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 07:49:39 2006
Return-Path: <java-user-return-20119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88051 invoked from network); 13 Apr 2006 07:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 07:49:39 -0000
Received: (qmail 38030 invoked by uid 500); 13 Apr 2006 07:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37984 invoked by uid 500); 13 Apr 2006 07:49:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37973 invoked by uid 99); 13 Apr 2006 07:49:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 00:49:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 00:49:28 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FTwZf-0000kb-Fd
	for java-user@lucene.apache.org; Thu, 13 Apr 2006 00:49:07 -0700
Message-ID: <3896122.post@talk.nabble.com>
Date: Thu, 13 Apr 2006 00:49:07 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Lucene Help
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all,

i am new to Lucene. i want to work indexing for PDF,word,txt files. can any
one tell me how to dun indexing by Lucene. please give some informetion.

Thanking you
shaik
--
View this message in context: http://www.nabble.com/Lucene-Help-t1442764.html#a3896122
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 08:00:45 2006
Return-Path: <java-user-return-20120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93583 invoked from network); 13 Apr 2006 08:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 08:00:44 -0000
Received: (qmail 52773 invoked by uid 500); 13 Apr 2006 08:00:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52718 invoked by uid 500); 13 Apr 2006 08:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52644 invoked by uid 99); 13 Apr 2006 08:00:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 01:00:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 01:00:33 -0700
Received: from mshyd2.hyd.deshaw.com (mshyd2.hyd.deshaw.com [149.77.160.27])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k3D806R8018854
 for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 13:30:09 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Lucene Help
Date: Thu, 13 Apr 2006 13:30:05 +0530
Message-ID: <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Help
Thread-Index: AcZezudQ/d8aISCgRSq/GKXTJaTiZgAAGNQA
From: "Krovi, DVSR_Sarma" <DVSR.Sarma.Krovi@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use text extractors for the document formats you mentioned.
Lucene as such does not deal with this text extraction process.
Following are the extractors we generally use:
PDF 		-> PDFBox: Java API to read PDF documents
http://www.pdfbox.org.
WORD		-> Antiword: http://www.winfield.demon.nl/
TXT		-> You can read the content using Java IO classes and
index them.
MSG		-> We currently using strings utility in Solaris that
reads printable characters from files.
XLS		-> Apache POI utils has classes to read Excel files. so
you can use that.
PPT/PPS	-> Apache POI's PowerPointExtractor
RTF		-> Java Swing has RTFEditorKit which we use to read RTF
documents.

Krovi.

-----Original Message-----
From: Shajahan [mailto:shaikshajahansha@yahoo.co.in]=20
Sent: Thursday, April 13, 2006 1:19 PM
To: java-user@lucene.apache.org
Subject: Lucene Help



Hi all,

i am new to Lucene. i want to work indexing for PDF,word,txt files. can
any
one tell me how to dun indexing by Lucene. please give some informetion.

Thanking you
shaik
--
View this message in context:
http://www.nabble.com/Lucene-Help-t1442764.html#a3896122
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 09:55:32 2006
Return-Path: <java-user-return-20121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45440 invoked from network); 13 Apr 2006 09:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 09:55:30 -0000
Received: (qmail 75160 invoked by uid 500); 13 Apr 2006 09:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74344 invoked by uid 500); 13 Apr 2006 09:55:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74333 invoked by uid 99); 13 Apr 2006 09:55:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 02:55:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kvelentz@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nproxy.gmail.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 02:55:19 -0700
Received: by nproxy.gmail.com with SMTP id x4so1102712nfb
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 02:54:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KmcGRbHKsj/KQW/vADXl5l57VIcQ3kJ3KtZLgC2xjPdLY/ncslE1OWUCj73xvetCKbCyzsKGzg5wwbhwc3X6Ez3vFnPjmX6UqpKZ8nv5plp48szWcr6buBxwwL21TlRjXl/SZb5saB5r53Xq1guIG0pWk/DxgnYC1it1egAkK94=
Received: by 10.48.231.3 with SMTP id d3mr105306nfh;
        Thu, 13 Apr 2006 02:54:58 -0700 (PDT)
Received: by 10.49.63.8 with HTTP; Thu, 13 Apr 2006 02:54:57 -0700 (PDT)
Message-ID: <1e357f20604130254w68191b55gbd52de31539bc528@mail.gmail.com>
Date: Thu, 13 Apr 2006 12:54:57 +0300
From: "Kostas Vel" <kvelentz@gmail.com>
To: java-user@lucene.apache.org
Subject: Index all the files in a directory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7421_2705532.1144922097991"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7421_2705532.1144922097991
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, I have a problem that has to do more with java than with lucene.
I have a folder that has about 524 text files (.txt) that I want to index.
I have made a program that works very well. It does indexing searching
etc...
          ...
          IndexWriter writer;
          GreekAnalyzer anal =3D new GreekAnalyzer();
          try {
            writer =3D new IndexWriter(indexPath,anal, true);
            for (int i =3D 1; i <=3D524; i++) {

              File indexFile =3D new File("/database/" +i+ ".txt");
              InputStream fis =3D new FileInputStream(indexFile);
              /*
               * We use a Document with four fields: the file path, the las=
t
modified date
               * the length of the file  and one the file's contents.
               */
              Document doc =3D new Document();

              doc.add(Field.UnIndexed("path", indexFile.getPath()));
              doc.add(Field.UnIndexed("length",Long.toString(
indexFile.length())));
              doc.add(Field.UnIndexed("modified",new Date(
indexFile.lastModified()).toString()));
              doc.add(Field.Text("text", (Reader) new
InputStreamReader(fis)));

                writer.addDocument(doc);
              fis.close();
            }
            ....
My problem is that I want to delete the for loop and write the program in a
way to read all the files I want to index and there are in a folder.
I have other folders as well that have txt files as well but they are not
524 so I can not use the for loop.
I hope that you understand what I mean because I don't use the English
language very well.

Thank you very much
Kostas

------=_Part_7421_2705532.1144922097991--

From java-user-return-20122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 10:08:20 2006
Return-Path: <java-user-return-20122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51110 invoked from network); 13 Apr 2006 10:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 10:08:19 -0000
Received: (qmail 91829 invoked by uid 500); 13 Apr 2006 10:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91801 invoked by uid 500); 13 Apr 2006 10:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91790 invoked by uid 99); 13 Apr 2006 10:08:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 03:08:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nick@neoworks.com designates 80.168.17.114 as permitted sender)
Received: from [80.168.17.114] (HELO hermes.neoworks.co.uk) (80.168.17.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 03:08:11 -0700
Received: from kronos.neoworks.co.uk (kronos.neoworks.co.uk [10.0.0.132])
	by hermes.neoworks.co.uk (8.13.1/8.13.1) with ESMTP id k3D9qIA0001561
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 10:52:18 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index all the files in a directory
Date: Thu, 13 Apr 2006 11:07:46 +0100
Message-ID: <DDEB64C8619AC64DBC074208B046611C852C22@kronos.neoworks.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index all the files in a directory
Thread-Index: AcZe4GiMkl565ujkS1ybC+mX2TgrHQAAPWvg
From: "Nick Vincent" <nick@neoworks.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Kostas,

I am assuming you need to find all of the text files in the directory.
Assuming you're using JDK1.5 you need to do something like this:

File directory =3D new File("c:\my\directory");
FilenameFilter findTextFiles =3D new FilenameFilter() {
	public boolean accept(File dir, String name)
	{
		return name.endsWith(".txt");
	}
}
for( File indexFile : directory.listFiles(findTextFiles) )
{
	...do Lucene indexing
}

If you are using JDK1.5 you can do the same using normal for loops.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 12:11:33 2006
Return-Path: <java-user-return-20123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6643 invoked from network); 13 Apr 2006 12:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 12:11:33 -0000
Received: (qmail 52786 invoked by uid 500); 13 Apr 2006 12:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52762 invoked by uid 500); 13 Apr 2006 12:11:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52750 invoked by uid 99); 13 Apr 2006 12:11:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 05:11:26 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO pproxy.gmail.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 05:11:25 -0700
Received: by pproxy.gmail.com with SMTP id m51so2211896pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 05:11:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LiU5pdrBUV57jqQRJ05hpf5LIvU4K17sPNWTDnT5snhy2K42Cj2BjTZ/79IqMwyD2dB2+3/ApGcD3sQvRYAjbIvwwzkgIEmMWnRAGd60U1Fi2O0MWbhbr+VKWtkw6CEBvWre2Ld8lhFN8tPZt5qC+FfObcPfSUto8hQNwX0P6hI=
Received: by 10.35.18.4 with SMTP id v4mr89552pyi;
        Thu, 13 Apr 2006 05:11:04 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 05:11:04 -0700 (PDT)
Message-ID: <359a92830604130511y7e22ac49k37e1f447b5096177@mail.gmail.com>
Date: Thu, 13 Apr 2006 08:11:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Help
In-Reply-To: <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24212_26029508.1144930264480"
References: <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24212_26029508.1144930264480
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I really, really recommend buying a copy of "Lucene In Action", especially
if you don't already have a good grasp of what indexing and searching is al=
l
about. It's well worth the effort to read. Sure, you'll have a ton of
questions after you're done with it (I certainly had/do), but at least
you'll have a better context...

In your case, it would be worth the cost of the book, oh, about 1,000 times
over just for Chapter 7, titled "parsing common document formats"  which
shows how to index XML, PDF, HTML, Word, RTF and plain text documents.

The folks on this list have been extraordinarily generous with their time
and advice, but I have to think it's more fun for them when they can answer
as specific a question as possible, and you'll have much more specific
questions after reading the manual.

Best
Erick Erickson

------=_Part_24212_26029508.1144930264480--

From java-user-return-20124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 15:52:03 2006
Return-Path: <java-user-return-20124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96205 invoked from network); 13 Apr 2006 15:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 15:30:54 -0000
Received: (qmail 49925 invoked by uid 500); 13 Apr 2006 15:22:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49677 invoked by uid 500); 13 Apr 2006 15:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49666 invoked by uid 99); 13 Apr 2006 15:22:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 08:22:29 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 08:22:28 -0700
Received: by pproxy.gmail.com with SMTP id m51so2293578pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 08:22:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XAr5he7KtesaTm1wG51/9OEOy1QIAM9vwsCJhkaYpr58fvratA9SSuNVG/sXfP2Tf38472FSi+izyg3Nsaqs54IrVUerUXxfcT1zXtBD3V4vyws2kL9MqkAW7B5+GqHOWuVUwqEHRNrDr9eD3peJ1GLG/KsnHTNBWPaXydiHOA8=
Received: by 10.35.51.6 with SMTP id d6mr920013pyk;
        Thu, 13 Apr 2006 08:22:07 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 08:22:07 -0700 (PDT)
Message-ID: <359a92830604130822j787ff34eme0bd064e7e014efb@mail.gmail.com>
Date: Thu, 13 Apr 2006 11:22:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <359a92830604101320n4630d3b8xe0f2adedf6074a59@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28371_26854892.1144941727793"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
	 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
	 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
	 <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
	 <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
	 <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu>
	 <359a92830604101320n4630d3b8xe0f2adedf6074a59@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28371_26854892.1144941727793
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

More of the same....

So, now all I want to do is a SpanNearQuery on a wildcard. No problem if I
can use a wildcard query, but I can't because of the "TooManyClauses" issue=
.

We have two types of wildcards, truncation (which I can handle by indexing
successively shorter terms and a special character at the end. i.e. cat$ ca=
$
c$). This is neat, it gives me relevance, speed, all the virtues.

The second is a??b????c. Which I don't see any clever indexing schemes to
handle, but let me think about that more at lunch <G>.

Without asking you to write *too* much for me, what should I look at in
order to make this work with SpanNear? I'm guessing that I have to iterate
the wildcard terms, collect a filter for documents "close enough" and use
that filtered query (again thanks for all your help figuring this out) to
restrict the returned documents.

What I have in mind is enumerating over the first wildcard term. For each
successive term, ask if other terms are "close enough" and using that answe=
r
to possibly turn off that document in the filter. Eventually I'll have a
filter that is what I want.

Now, this all seems expensive and complex. If the answer is "don't go there=
,
use clever indexing or don't try it with very many documents because it'll
take forever", then that in intself would save me a bunch of work.

Thanks again
Erick

------=_Part_28371_26854892.1144941727793--

From java-user-return-20125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 15:53:22 2006
Return-Path: <java-user-return-20125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98958 invoked from network); 13 Apr 2006 15:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 15:34:32 -0000
Received: (qmail 74635 invoked by uid 500); 13 Apr 2006 15:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74602 invoked by uid 500); 13 Apr 2006 15:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74587 invoked by uid 99); 13 Apr 2006 15:34:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 08:34:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wproxy.gmail.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 08:34:04 -0700
Received: by wproxy.gmail.com with SMTP id 55so221468wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 08:33:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VVL0f9eVvLpoJU/NjRSZwHWLSPhuwI3dwBT+tX8eoSg/Ijua0vE0Suy3njtYcqgYfK4IgdKoJAAN5F2ye3hLB+ObDDNLoOee5Cl2gXAWJBjI6g6Mkq2y93nIa7VYd5lD2vxJOTrIlvqcKmSyFtY2GbS1dCpenZB8gHA/icfNwKk=
Received: by 10.64.178.16 with SMTP id a16mr416079qbf;
        Thu, 13 Apr 2006 08:33:44 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 08:33:44 -0700 (PDT)
Message-ID: <ad681e7f0604130833i1cec5119s443b1aca9b476930@mail.gmail.com>
Date: Thu, 13 Apr 2006 11:33:44 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <OF1F126187.FB480636-ONC225714E.002440B0-C225714E.00270FD3@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20721_31536729.1144942424020"
References: <Pine.LNX.4.58.0604111517560.9140@hal.rescomp.berkeley.edu>
	 <OF1F126187.FB480636-ONC225714E.002440B0-C225714E.00270FD3@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20721_31536729.1144942424020
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok,
 Some of the stuff makes  some sense. I was a little loopy from lack of
sleep and some of these solutions don't really cover my concerns....


Let's take this movie example. If each member of a production Crew can have
multiple titles that come from a lookup table of Distinct Jobs

Titles
Assistant Producer
Producer
Executive Producer
Director
Director Trainee
Stunt Director

In the Database there would be a Assocation Table Linking each Crew member
the titles they had

Crew_Titles
Crew_ID   Title
1             Producer
1

On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
>
> Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006 01:41:37
> AM:
> > : them in one field).  One of the problems I see would be with values
> that
> > : over lap (Example, name where one name is Jason Bateman, and one is
> Jason
> > : Bateman Black, and it would be hard to replicate the Discrete Search
> for
> >
> > they way field values are "analyzed" is extremely configurable -- down
> to
> > the individual field level.  Which means that while you can have an
> actor
> > field where you can do loose text searching for "bateman" and get back
> > movies staring "Jason Bateman" and "Jason Bateman Black" (and even Guid=
o
> > Batemans" if you use stemming) you can also have another field using a
> > KeywordAnalyzer such that a record with teh values "Jason Bateman" and
> > "Jack Black" will only be matched if hte user searches for "Jason
> Bateman"
> > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason" will
> not
> > work.
>
> Another possible trick is to have one field, but mark its end with specia=
l
> tokens, say "^" and "$", so that "Jason Bateman" gets indexed as four
> tokens:
>      ^ Jason Bateman $
> Then, if you want to search for the name Jason Bateman and that name only=
,
> just search for the phrase "^ Jason Bateman $" - and only this entry will
> match. (you can also continue to search this field normally)
>
> If you'll think about this, you'll notice that you don't actually need
> the beginning-of-field marker ("^") because it's easy to recognize the
> beginning of a field because the position there is 0. Unfortunately,
> I don't know how to match position 0 using the standard QueryParser,
> but you can do it with the SpanFirstQuery: for example if we index
> Jason Bateman as the three tokens
>      Jason Bateman $
> then we can search for it using something like
>      SpanQuery[] terms =3D {
>            new SpanTermQuery(new Term("actor", "Jason")),
>            new SpanTermQuery(new Term("actor", "Bateman")),
>            new SpanTermQuery(new Term("actor", "$")) };
>      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> (or something like that... I didn't test this)
>
>
> --
> Nadav Har'El
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Ananth T Sarathy

------=_Part_20721_31536729.1144942424020--

From java-user-return-20126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:14:49 2006
Return-Path: <java-user-return-20126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56176 invoked from network); 13 Apr 2006 16:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:14:31 -0000
Received: (qmail 56964 invoked by uid 500); 13 Apr 2006 16:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56939 invoked by uid 500); 13 Apr 2006 16:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56927 invoked by uid 99); 13 Apr 2006 16:13:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:13:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wproxy.gmail.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:13:53 -0700
Received: by wproxy.gmail.com with SMTP id 55so234601wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 09:13:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ij9DcF9TzDntdu470oJAyKiHFpIKFhM3dhbe3I7aL/XTChLrhNfEJlVbmXwK9lHDGpvaTf0BWO/4XF+FCnLbQ0FaDwUGnmVRw7d7Sp128oo4hJ2gB8Bm7wIA4xLJ/G450LnskiyvilD9nXarfczf+36xuiIfQb/MnSUotrRv6TA=
Received: by 10.64.10.16 with SMTP id 16mr444739qbj;
        Thu, 13 Apr 2006 09:13:04 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 09:13:04 -0700 (PDT)
Message-ID: <ad681e7f0604130913s75cd72cby912c62073f4e8d07@mail.gmail.com>
Date: Thu, 13 Apr 2006 12:13:04 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604130833i1cec5119s443b1aca9b476930@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21237_16136039.1144944784077"
References: <Pine.LNX.4.58.0604111517560.9140@hal.rescomp.berkeley.edu>
	 <OF1F126187.FB480636-ONC225714E.002440B0-C225714E.00270FD3@il.ibm.com>
	 <ad681e7f0604130833i1cec5119s443b1aca9b476930@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21237_16136039.1144944784077
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Sorry, hit submit in mid email

Ok,
 Some of the stuff makes  some sense. I was a little loopy from lack of
sleep and some of these solutions don't really cover my concerns....


Let's take this movie example. If each member of a production Crew can have
multiple titles that come from a lookup table of Distinct Jobs

Titles
Assistant Producer
Producer
Executive Producer
Director
Director Trainee
Stunt Director

In the Database there would be an Association Table Linking each Crew membe=
r
to the titles they had

Crew_Titles
Crew_ID   Title
1             Director
 1             Producer
1             Director
2             Stunt Director
2             Producer
3             Director Trainee
3             Assistant Producer
4             Producer
5             Executive Producer

So when I turn a Crew Member into a java object, each producer has a
collection of Titles. I want one field that is searchable so if I am lookin=
g
for "Director" all directors. I take the collection of title and make a
String out of them so for Crew Member 1 the Title String will "Executive
Producer Director". This is so that on an Text Search box people can find
Crew Members by title with a natural language search.

Now, what we want to do is switch to out a database Query to Lucene Search.
Is there anyway to get the Equivalent of
select count(distinct Crew_ID) from Crew_TItles where Title=3D"Producer" wh=
ich
would give you a result of 3

If you do that as a Lucene Search You will get hits for  Producer,Executive
Producer, and Assistant Producer. You would get 5 hits instead of three.  W=
e
can't make it a key word field since it is a multi value field, and we need
all the values searchable (IE Producer Director should return for a search
of Producer or Director).  Also we can't really add Special Characters the
Certain Titles that are contained in other titles since we want to use it a=
s
a query field for users searching for Crew Members. We use the hits to get
Counts of unique Crew Members, and then Use a Stored Field called Crew_ID t=
o
pull the appropriate Crew Member from the Database.

Also, I assume this wouldn't be a problem if all titles were Unique in a wa=
y
that none are contained in other Title (I.E If there is A Title Director,
there would be Director Trainee or Stunt Director).

Also, I assume that I would have to be Responsible to ensure that the Index
Contained one and only one Document per Crew ID, as well as ensuring
Crew_IDs that were not in the Database anymore were removed from the Index.
Now, we have been Using Lucene for over two years and I am aware of most of
the things in regards to creating and maintaining the Index. My Issue is
that I have never seen Lucene as a replacement for a Database, but rather a
supplemental tool that allows for better native language search.   We have
had some performance issues with our Database, and thus the Discussion of
changing it out to use Lucene. I am of the Opinion that the Database and
Lucene are two separate things, and that The Database is always going to be
accurately reflect whatever data we have (whether or not the data is correc=
t
it's still what we would use) and the Lucene Index, no matter what steps yo=
u
take to ensure synchronization can be incorrect and there for the most
accurate results will always come from the DB, and we need to continue
trying to performance tune the DB.

Other issues I would see that wouldn't allow for replacing of DB queries
would include multi sort (IE order by Date1, Date2, Name), as well as range
searches, unless the Too ManyOpenClauses has been fixed in 1.9.

Hopefully this explains what we are trying to do here. Please let me know
where I have gone wrong and what else I have missed (pros and con)

Much Thanks,
Ananth




On 4/13/06, Ananth T. Sarathy <ananth.t.sarathy@gmail.com> wrote:
>
>  Ok,
>  Some of the stuff makes  some sense. I was a little loopy from lack of
> sleep and some of these solutions don't really cover my concerns....
>
>
> Let's take this movie example. If each member of a production Crew can
> have multiple titles that come from a lookup table of Distinct Jobs
>
> Titles
> Assistant Producer
> Producer
> Executive Producer
> Director
> Director Trainee
> Stunt Director
>
> In the Database there would be a Assocation Table Linking each Crew membe=
r
> the titles they had
>
> Crew_Titles
> Crew_ID   Title
> 1             Producer
> 1
>
>  On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> >
> > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006 01:41:37
> > AM:
> > > : them in one field).  One of the problems I see would be with values
> > that
> > > : over lap (Example, name where one name is Jason Bateman, and one is
> > Jason
> > > : Bateman Black, and it would be hard to replicate the Discrete Searc=
h
> >
> > for
> > >
> > > they way field values are "analyzed" is extremely configurable -- dow=
n
> > to
> > > the individual field level.  Which means that while you can have an
> > actor
> > > field where you can do loose text searching for "bateman" and get bac=
k
> >
> > > movies staring "Jason Bateman" and "Jason Bateman Black" (and even
> > Guido
> > > Batemans" if you use stemming) you can also have another field using =
a
> > > KeywordAnalyzer such that a record with teh values "Jason Bateman" an=
d
> >
> > > "Jack Black" will only be matched if hte user searches for "Jason
> > Bateman"
> > > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason" wil=
l
> > not
> > > work.
> >
> > Another possible trick is to have one field, but mark its end with
> > special
> > tokens, say "^" and "$", so that "Jason Bateman" gets indexed as four
> > tokens:
> >      ^ Jason Bateman $
> > Then, if you want to search for the name Jason Bateman and that name
> > only,
> > just search for the phrase "^ Jason Bateman $" - and only this entry
> > will
> > match. (you can also continue to search this field normally)
> >
> > If you'll think about this, you'll notice that you don't actually need
> > the beginning-of-field marker ("^") because it's easy to recognize the
> > beginning of a field because the position there is 0. Unfortunately,
> > I don't know how to match position 0 using the standard QueryParser,
> > but you can do it with the SpanFirstQuery: for example if we index
> > Jason Bateman as the three tokens
> >      Jason Bateman $
> > then we can search for it using something like
> >      SpanQuery[] terms =3D {
> >            new SpanTermQuery(new Term("actor", "Jason")),
> >            new SpanTermQuery(new Term("actor", "Bateman")),
> >            new SpanTermQuery(new Term("actor", "$")) };
> >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > (or something like that... I didn't test this)
> >
> >
> > --
> > Nadav Har'El
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
>
> Ananth T Sarathy
>



--
Ananth T Sarathy

------=_Part_21237_16136039.1144944784077--

From java-user-return-20127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:17:09 2006
Return-Path: <java-user-return-20127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57405 invoked from network); 13 Apr 2006 16:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:15:46 -0000
Received: (qmail 59673 invoked by uid 500); 13 Apr 2006 16:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59590 invoked by uid 500); 13 Apr 2006 16:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59538 invoked by uid 99); 13 Apr 2006 16:15:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:15:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:15:23 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k3DGExR8018508
 for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 21:44:59 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Lucene Seaches VS. Relational database Queries
Date: Thu, 13 Apr 2006 21:44:58 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Seaches VS. Relational database Queries
Thread-Index: AcZfD9h3Ww6NlAoiTYOgZujdxaeqJAAA/HTA
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think you are asking if we can retain 1:n relationships in lucene.

Ok, I'll go out on a limb and give my solution. Say you have a table A
and table B with B having multiple rows associated to each row in A.
Also your documents are centered around A, i.e. all your queries return
some row(s) of A, not B, but you should be able to query on fields in B.


In such a case, you need to have multiple documents for each row in A.
To be more specific, if a row in A has 5 corresponding rows in B, then
there must be 5 Documents in lucene index corresponding to A. In other
words, each lucene Document corresponds to a row in 'A join B'.

I am not sure of this scheme. If there are more tables, then this
quickly explodes the no. of documents. We'll have as many documents as
will be there in {A join B join C join D.. }. Plus, we'll need to remove
Documents which correspond logically to the same row in A from the Hits.

Is there a better way to do this? Or I don't make sense?


-----Original Message-----
From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]=20
Sent: Thursday, April 13, 2006 9:04 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries


Ok,
 Some of the stuff makes  some sense. I was a little loopy from lack of
sleep and some of these solutions don't really cover my concerns....


Let's take this movie example. If each member of a production Crew can
have
multiple titles that come from a lookup table of Distinct Jobs

Titles
Assistant Producer
Producer
Executive Producer
Director
Director Trainee
Stunt Director

In the Database there would be a Assocation Table Linking each Crew
member
the titles they had

Crew_Titles
Crew_ID   Title
1             Producer
1

On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
>
> Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
01:41:37
> AM:
> > : them in one field).  One of the problems I see would be with
values
> that
> > : over lap (Example, name where one name is Jason Bateman, and one
is
> Jason
> > : Bateman Black, and it would be hard to replicate the Discrete
Search
> for
> >
> > they way field values are "analyzed" is extremely configurable --
down
> to
> > the individual field level.  Which means that while you can have an
> actor
> > field where you can do loose text searching for "bateman" and get
back
> > movies staring "Jason Bateman" and "Jason Bateman Black" (and even
Guido
> > Batemans" if you use stemming) you can also have another field using
a
> > KeywordAnalyzer such that a record with teh values "Jason Bateman"
and
> > "Jack Black" will only be matched if hte user searches for "Jason
> Bateman"
> > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason"
will
> not
> > work.
>
> Another possible trick is to have one field, but mark its end with
special
> tokens, say "^" and "$", so that "Jason Bateman" gets indexed as four
> tokens:
>      ^ Jason Bateman $
> Then, if you want to search for the name Jason Bateman and that name
only,
> just search for the phrase "^ Jason Bateman $" - and only this entry
will
> match. (you can also continue to search this field normally)
>
> If you'll think about this, you'll notice that you don't actually need
> the beginning-of-field marker ("^") because it's easy to recognize the
> beginning of a field because the position there is 0. Unfortunately,
> I don't know how to match position 0 using the standard QueryParser,
> but you can do it with the SpanFirstQuery: for example if we index
> Jason Bateman as the three tokens
>      Jason Bateman $
> then we can search for it using something like
>      SpanQuery[] terms =3D {
>            new SpanTermQuery(new Term("actor", "Jason")),
>            new SpanTermQuery(new Term("actor", "Bateman")),
>            new SpanTermQuery(new Term("actor", "$")) };
>      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> (or something like that... I didn't test this)
>
>
> --
> Nadav Har'El
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Ananth T Sarathy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:20:22 2006
Return-Path: <java-user-return-20128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60545 invoked from network); 13 Apr 2006 16:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:20:15 -0000
Received: (qmail 67193 invoked by uid 500); 13 Apr 2006 16:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67160 invoked by uid 500); 13 Apr 2006 16:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67147 invoked by uid 99); 13 Apr 2006 16:20:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:20:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wproxy.gmail.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:20:08 -0700
Received: by wproxy.gmail.com with SMTP id 55so236491wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 09:19:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r6spmDGWVNylqp+seqFgkNPSKQ4Gi4fEterAYXe7TWy71HntBkpiamX0HDqGljSp0efmi2ntX0aHZvOsT8GK6Tvre77X5qfAD3bVzQaiAyLlD7l1Bb0bIyew/9qfpK8AAqxRWt+ood6BztBohZDD/s0OSZpAIPfjblqzDOSy1bA=
Received: by 10.65.11.16 with SMTP id o16mr448554qbi;
        Thu, 13 Apr 2006 09:19:47 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 09:19:47 -0700 (PDT)
Message-ID: <ad681e7f0604130919l710486f7y11b747ee56b6712f@mail.gmail.com>
Date: Thu, 13 Apr 2006 12:19:47 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21337_6236980.1144945187017"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21337_6236980.1144945187017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yes, this is pretty much what I was trying to do. I am not sure how you
solve this with out he maintenance and the removal of duplicate hits logic
taking up so much time that any performance benefit from querying lucene is
lost.

On 4/13/06, Satuluri, Venu_Madhav <Venu.Madhav.Satuluri@deshaw.com> wrote:
>
> I think you are asking if we can retain 1:n relationships in lucene.
>
> Ok, I'll go out on a limb and give my solution. Say you have a table A
> and table B with B having multiple rows associated to each row in A.
> Also your documents are centered around A, i.e. all your queries return
> some row(s) of A, not B, but you should be able to query on fields in B.
>
>
> In such a case, you need to have multiple documents for each row in A.
> To be more specific, if a row in A has 5 corresponding rows in B, then
> there must be 5 Documents in lucene index corresponding to A. In other
> words, each lucene Document corresponds to a row in 'A join B'.
>
> I am not sure of this scheme. If there are more tables, then this
> quickly explodes the no. of documents. We'll have as many documents as
> will be there in {A join B join C join D.. }. Plus, we'll need to remove
> Documents which correspond logically to the same row in A from the Hits.
>
> Is there a better way to do this? Or I don't make sense?
>
>
> -----Original Message-----
> From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> Sent: Thursday, April 13, 2006 9:04 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Seaches VS. Relational database Queries
>
>
> Ok,
> Some of the stuff makes  some sense. I was a little loopy from lack of
> sleep and some of these solutions don't really cover my concerns....
>
>
> Let's take this movie example. If each member of a production Crew can
> have
> multiple titles that come from a lookup table of Distinct Jobs
>
> Titles
> Assistant Producer
> Producer
> Executive Producer
> Director
> Director Trainee
> Stunt Director
>
> In the Database there would be a Assocation Table Linking each Crew
> member
> the titles they had
>
> Crew_Titles
> Crew_ID   Title
> 1             Producer
> 1
>
> On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> >
> > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> 01:41:37
> > AM:
> > > : them in one field).  One of the problems I see would be with
> values
> > that
> > > : over lap (Example, name where one name is Jason Bateman, and one
> is
> > Jason
> > > : Bateman Black, and it would be hard to replicate the Discrete
> Search
> > for
> > >
> > > they way field values are "analyzed" is extremely configurable --
> down
> > to
> > > the individual field level.  Which means that while you can have an
> > actor
> > > field where you can do loose text searching for "bateman" and get
> back
> > > movies staring "Jason Bateman" and "Jason Bateman Black" (and even
> Guido
> > > Batemans" if you use stemming) you can also have another field using
> a
> > > KeywordAnalyzer such that a record with teh values "Jason Bateman"
> and
> > > "Jack Black" will only be matched if hte user searches for "Jason
> > Bateman"
> > > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason"
> will
> > not
> > > work.
> >
> > Another possible trick is to have one field, but mark its end with
> special
> > tokens, say "^" and "$", so that "Jason Bateman" gets indexed as four
> > tokens:
> >      ^ Jason Bateman $
> > Then, if you want to search for the name Jason Bateman and that name
> only,
> > just search for the phrase "^ Jason Bateman $" - and only this entry
> will
> > match. (you can also continue to search this field normally)
> >
> > If you'll think about this, you'll notice that you don't actually need
> > the beginning-of-field marker ("^") because it's easy to recognize the
> > beginning of a field because the position there is 0. Unfortunately,
> > I don't know how to match position 0 using the standard QueryParser,
> > but you can do it with the SpanFirstQuery: for example if we index
> > Jason Bateman as the three tokens
> >      Jason Bateman $
> > then we can search for it using something like
> >      SpanQuery[] terms =3D {
> >            new SpanTermQuery(new Term("actor", "Jason")),
> >            new SpanTermQuery(new Term("actor", "Bateman")),
> >            new SpanTermQuery(new Term("actor", "$")) };
> >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > (or something like that... I didn't test this)
> >
> >
> > --
> > Nadav Har'El
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Ananth T Sarathy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Ananth T Sarathy

------=_Part_21337_6236980.1144945187017--

From java-user-return-20129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:35:00 2006
Return-Path: <java-user-return-20129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73073 invoked from network); 13 Apr 2006 16:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:34:25 -0000
Received: (qmail 96943 invoked by uid 500); 13 Apr 2006 16:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96881 invoked by uid 500); 13 Apr 2006 16:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96869 invoked by uid 99); 13 Apr 2006 16:34:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:34:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:34:12 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k3DGXkQl001419
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 18:33:49 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200604131633.k3DGXkQl001419@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene Seaches VS. Relational database Queries
Date: Thu, 13 Apr 2006 18:33:41 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
thread-index: AcZfD9h3Ww6NlAoiTYOgZujdxaeqJAAA/HTAAADjA6A=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
X-Scanned-By: MIMEDefang 2.52 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No.. I don't see your solution is performant..
If each lucene Document corresponds to a row in 'A join B' then Index
explodes..
Index size drastically increases. 

Why not then creating two indexs A and B.
And search for A and then from obtained A documents information search in B.

It seems for me more performant than indexing all 'A join B' documents.

Any commenters?

Jelda

> -----Original Message-----
> From: Satuluri, Venu_Madhav [mailto:Venu.Madhav.Satuluri@deshaw.com] 
> Sent: Thursday, April 13, 2006 6:15 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene Seaches VS. Relational database Queries
> 
> I think you are asking if we can retain 1:n relationships in lucene.
> 
> Ok, I'll go out on a limb and give my solution. Say you have 
> a table A and table B with B having multiple rows associated 
> to each row in A.
> Also your documents are centered around A, i.e. all your 
> queries return some row(s) of A, not B, but you should be 
> able to query on fields in B.
> 
> 
> In such a case, you need to have multiple documents for each row in A.
> To be more specific, if a row in A has 5 corresponding rows 
> in B, then there must be 5 Documents in lucene index 
> corresponding to A. In other words, each lucene Document 
> corresponds to a row in 'A join B'.
> 
> I am not sure of this scheme. If there are more tables, then 
> this quickly explodes the no. of documents. We'll have as 
> many documents as will be there in {A join B join C join D.. 
> }. Plus, we'll need to remove Documents which correspond 
> logically to the same row in A from the Hits.
> 
> Is there a better way to do this? Or I don't make sense?
> 
> 
> -----Original Message-----
> From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> Sent: Thursday, April 13, 2006 9:04 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Seaches VS. Relational database Queries
> 
> 
> Ok,
>  Some of the stuff makes  some sense. I was a little loopy 
> from lack of
> sleep and some of these solutions don't really cover my concerns....
> 
> 
> Let's take this movie example. If each member of a production Crew can
> have
> multiple titles that come from a lookup table of Distinct Jobs
> 
> Titles
> Assistant Producer
> Producer
> Executive Producer
> Director
> Director Trainee
> Stunt Director
> 
> In the Database there would be a Assocation Table Linking each Crew
> member
> the titles they had
> 
> Crew_Titles
> Crew_ID   Title
> 1             Producer
> 1
> 
> On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> >
> > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> 01:41:37
> > AM:
> > > : them in one field).  One of the problems I see would be with
> values
> > that
> > > : over lap (Example, name where one name is Jason Bateman, and one
> is
> > Jason
> > > : Bateman Black, and it would be hard to replicate the Discrete
> Search
> > for
> > >
> > > they way field values are "analyzed" is extremely configurable --
> down
> > to
> > > the individual field level.  Which means that while you 
> can have an
> > actor
> > > field where you can do loose text searching for "bateman" and get
> back
> > > movies staring "Jason Bateman" and "Jason Bateman Black" (and even
> Guido
> > > Batemans" if you use stemming) you can also have another 
> field using
> a
> > > KeywordAnalyzer such that a record with teh values "Jason Bateman"
> and
> > > "Jack Black" will only be matched if hte user searches for "Jason
> > Bateman"
> > > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason"
> will
> > not
> > > work.
> >
> > Another possible trick is to have one field, but mark its end with
> special
> > tokens, say "^" and "$", so that "Jason Bateman" gets 
> indexed as four
> > tokens:
> >      ^ Jason Bateman $
> > Then, if you want to search for the name Jason Bateman and that name
> only,
> > just search for the phrase "^ Jason Bateman $" - and only this entry
> will
> > match. (you can also continue to search this field normally)
> >
> > If you'll think about this, you'll notice that you don't 
> actually need
> > the beginning-of-field marker ("^") because it's easy to 
> recognize the
> > beginning of a field because the position there is 0. Unfortunately,
> > I don't know how to match position 0 using the standard QueryParser,
> > but you can do it with the SpanFirstQuery: for example if we index
> > Jason Bateman as the three tokens
> >      Jason Bateman $
> > then we can search for it using something like
> >      SpanQuery[] terms = {
> >            new SpanTermQuery(new Term("actor", "Jason")),
> >            new SpanTermQuery(new Term("actor", "Bateman")),
> >            new SpanTermQuery(new Term("actor", "$")) };
> >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > (or something like that... I didn't test this)
> >
> >
> > --
> > Nadav Har'El
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> Ananth T Sarathy
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:51:59 2006
Return-Path: <java-user-return-20130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83549 invoked from network); 13 Apr 2006 16:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:51:58 -0000
Received: (qmail 24407 invoked by uid 500); 13 Apr 2006 16:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24331 invoked by uid 500); 13 Apr 2006 16:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24304 invoked by uid 99); 13 Apr 2006 16:51:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:51:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wproxy.gmail.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:51:49 -0700
Received: by wproxy.gmail.com with SMTP id 55so246579wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 09:51:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Vdbii0Hx8teVJ2R8nfGCc9e93P+l6+Ib4AtJiNoJK5VVqhPUVx/aXPPka9tYvx8wsNTY218hPgfueKUl7ZtWs11L7InU/JfA+3gpNUwbO43BOwgOoGlqtuzqKrLp7fqiYJMoyqcYKfNXqK09VFcuADCjmpkA12AomoO7wuyMuN8=
Received: by 10.65.182.6 with SMTP id j6mr481186qbp;
        Thu, 13 Apr 2006 09:51:27 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Thu, 13 Apr 2006 09:51:27 -0700 (PDT)
Message-ID: <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
Date: Thu, 13 Apr 2006 09:51:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <200604131633.k3DGXkQl001419@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I agree with Jelda.

Lucene is more document-centric. Storing the relationship is not a
good idea. It's better to simply have 2 indexes. Usually when users
search, they can choose which index they want.

Of course, building the indexes will take more time to process-data.

Lucene can not replace relational DB altogether. One reason is Lucene
is more like object-oriented.

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!

On 4/13/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> No.. I don't see your solution is performant..
> If each lucene Document corresponds to a row in 'A join B' then Index
> explodes..
> Index size drastically increases.
>
> Why not then creating two indexs A and B.
> And search for A and then from obtained A documents information search in=
 B.
>
> It seems for me more performant than indexing all 'A join B' documents.
>
> Any commenters?
>
> Jelda
>
> > -----Original Message-----
> > From: Satuluri, Venu_Madhav [mailto:Venu.Madhav.Satuluri@deshaw.com]
> > Sent: Thursday, April 13, 2006 6:15 PM
> > To: java-user@lucene.apache.org
> > Subject: RE: Lucene Seaches VS. Relational database Queries
> >
> > I think you are asking if we can retain 1:n relationships in lucene.
> >
> > Ok, I'll go out on a limb and give my solution. Say you have
> > a table A and table B with B having multiple rows associated
> > to each row in A.
> > Also your documents are centered around A, i.e. all your
> > queries return some row(s) of A, not B, but you should be
> > able to query on fields in B.
> >
> >
> > In such a case, you need to have multiple documents for each row in A.
> > To be more specific, if a row in A has 5 corresponding rows
> > in B, then there must be 5 Documents in lucene index
> > corresponding to A. In other words, each lucene Document
> > corresponds to a row in 'A join B'.
> >
> > I am not sure of this scheme. If there are more tables, then
> > this quickly explodes the no. of documents. We'll have as
> > many documents as will be there in {A join B join C join D..
> > }. Plus, we'll need to remove Documents which correspond
> > logically to the same row in A from the Hits.
> >
> > Is there a better way to do this? Or I don't make sense?
> >
> >
> > -----Original Message-----
> > From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> > Sent: Thursday, April 13, 2006 9:04 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene Seaches VS. Relational database Queries
> >
> >
> > Ok,
> >  Some of the stuff makes  some sense. I was a little loopy
> > from lack of
> > sleep and some of these solutions don't really cover my concerns....
> >
> >
> > Let's take this movie example. If each member of a production Crew can
> > have
> > multiple titles that come from a lookup table of Distinct Jobs
> >
> > Titles
> > Assistant Producer
> > Producer
> > Executive Producer
> > Director
> > Director Trainee
> > Stunt Director
> >
> > In the Database there would be a Assocation Table Linking each Crew
> > member
> > the titles they had
> >
> > Crew_Titles
> > Crew_ID   Title
> > 1             Producer
> > 1
> >
> > On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> > >
> > > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> > 01:41:37
> > > AM:
> > > > : them in one field).  One of the problems I see would be with
> > values
> > > that
> > > > : over lap (Example, name where one name is Jason Bateman, and one
> > is
> > > Jason
> > > > : Bateman Black, and it would be hard to replicate the Discrete
> > Search
> > > for
> > > >
> > > > they way field values are "analyzed" is extremely configurable --
> > down
> > > to
> > > > the individual field level.  Which means that while you
> > can have an
> > > actor
> > > > field where you can do loose text searching for "bateman" and get
> > back
> > > > movies staring "Jason Bateman" and "Jason Bateman Black" (and even
> > Guido
> > > > Batemans" if you use stemming) you can also have another
> > field using
> > a
> > > > KeywordAnalyzer such that a record with teh values "Jason Bateman"
> > and
> > > > "Jack Black" will only be matched if hte user searches for "Jason
> > > Bateman"
> > > > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason"
> > will
> > > not
> > > > work.
> > >
> > > Another possible trick is to have one field, but mark its end with
> > special
> > > tokens, say "^" and "$", so that "Jason Bateman" gets
> > indexed as four
> > > tokens:
> > >      ^ Jason Bateman $
> > > Then, if you want to search for the name Jason Bateman and that name
> > only,
> > > just search for the phrase "^ Jason Bateman $" - and only this entry
> > will
> > > match. (you can also continue to search this field normally)
> > >
> > > If you'll think about this, you'll notice that you don't
> > actually need
> > > the beginning-of-field marker ("^") because it's easy to
> > recognize the
> > > beginning of a field because the position there is 0. Unfortunately,
> > > I don't know how to match position 0 using the standard QueryParser,
> > > but you can do it with the SpanFirstQuery: for example if we index
> > > Jason Bateman as the three tokens
> > >      Jason Bateman $
> > > then we can search for it using something like
> > >      SpanQuery[] terms =3D {
> > >            new SpanTermQuery(new Term("actor", "Jason")),
> > >            new SpanTermQuery(new Term("actor", "Bateman")),
> > >            new SpanTermQuery(new Term("actor", "$")) };
> > >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > > (or something like that... I didn't test this)
> > >
> > >
> > > --
> > > Nadav Har'El
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Ananth T Sarathy
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 16:55:06 2006
Return-Path: <java-user-return-20131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87117 invoked from network); 13 Apr 2006 16:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 16:55:05 -0000
Received: (qmail 35476 invoked by uid 500); 13 Apr 2006 16:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35452 invoked by uid 500); 13 Apr 2006 16:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35437 invoked by uid 99); 13 Apr 2006 16:54:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:54:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 09:54:57 -0700
Received: by wproxy.gmail.com with SMTP id 55so247555wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 09:54:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bn9BpnMABj95G+6N9NrcIp/6B+I8R177AnoNgULD2dlmpIxzphpJqzz4dUSiDJB+rjaabDmoYRIaE/UYNditKX0zMzsNqvP5pmQ7pEFuODGpPlEgtAI1CSrsDjvx/ejpyNoEcwQB+RAupq/rS6BdpygN/Whc2rVahZUGJHZ/K0M=
Received: by 10.65.192.17 with SMTP id u17mr488564qbp;
        Thu, 13 Apr 2006 09:54:34 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 09:54:34 -0700 (PDT)
Message-ID: <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
Date: Thu, 13 Apr 2006 12:54:34 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21905_8181049.1144947274037"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21905_8181049.1144947274037
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

How would a second index solve the 1:N relationship issue? For the record I
agree that Lucene is Document Centric.

On 4/13/06, Chris Lu <chris.lu@gmail.com> wrote:
>
> I agree with Jelda.
>
> Lucene is more document-centric. Storing the relationship is not a
> good idea. It's better to simply have 2 indexes. Usually when users
> search, they can choose which index they want.
>
> Of course, building the indexes will take more time to process-data.
>
> Lucene can not replace relational DB altogether. One reason is Lucene
> is more like object-oriented.
>
> Chris Lu
> ---------------------------------------
> Full-Text Lucene Search on Any Databases
> http://www.dbsight.net
> Faster to Setup than reading marketing materials!
>
> On 4/13/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > No.. I don't see your solution is performant..
> > If each lucene Document corresponds to a row in 'A join B' then Index
> > explodes..
> > Index size drastically increases.
> >
> > Why not then creating two indexs A and B.
> > And search for A and then from obtained A documents information search
> in B.
> >
> > It seems for me more performant than indexing all 'A join B' documents.
> >
> > Any commenters?
> >
> > Jelda
> >
> > > -----Original Message-----
> > > From: Satuluri, Venu_Madhav [mailto:Venu.Madhav.Satuluri@deshaw.com]
> > > Sent: Thursday, April 13, 2006 6:15 PM
> > > To: java-user@lucene.apache.org
> > > Subject: RE: Lucene Seaches VS. Relational database Queries
> > >
> > > I think you are asking if we can retain 1:n relationships in lucene.
> > >
> > > Ok, I'll go out on a limb and give my solution. Say you have
> > > a table A and table B with B having multiple rows associated
> > > to each row in A.
> > > Also your documents are centered around A, i.e. all your
> > > queries return some row(s) of A, not B, but you should be
> > > able to query on fields in B.
> > >
> > >
> > > In such a case, you need to have multiple documents for each row in A=
.
> > > To be more specific, if a row in A has 5 corresponding rows
> > > in B, then there must be 5 Documents in lucene index
> > > corresponding to A. In other words, each lucene Document
> > > corresponds to a row in 'A join B'.
> > >
> > > I am not sure of this scheme. If there are more tables, then
> > > this quickly explodes the no. of documents. We'll have as
> > > many documents as will be there in {A join B join C join D..
> > > }. Plus, we'll need to remove Documents which correspond
> > > logically to the same row in A from the Hits.
> > >
> > > Is there a better way to do this? Or I don't make sense?
> > >
> > >
> > > -----Original Message-----
> > > From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> > > Sent: Thursday, April 13, 2006 9:04 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Lucene Seaches VS. Relational database Queries
> > >
> > >
> > > Ok,
> > >  Some of the stuff makes  some sense. I was a little loopy
> > > from lack of
> > > sleep and some of these solutions don't really cover my concerns....
> > >
> > >
> > > Let's take this movie example. If each member of a production Crew ca=
n
> > > have
> > > multiple titles that come from a lookup table of Distinct Jobs
> > >
> > > Titles
> > > Assistant Producer
> > > Producer
> > > Executive Producer
> > > Director
> > > Director Trainee
> > > Stunt Director
> > >
> > > In the Database there would be a Assocation Table Linking each Crew
> > > member
> > > the titles they had
> > >
> > > Crew_Titles
> > > Crew_ID   Title
> > > 1             Producer
> > > 1
> > >
> > > On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> > > >
> > > > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> > > 01:41:37
> > > > AM:
> > > > > : them in one field).  One of the problems I see would be with
> > > values
> > > > that
> > > > > : over lap (Example, name where one name is Jason Bateman, and on=
e
> > > is
> > > > Jason
> > > > > : Bateman Black, and it would be hard to replicate the Discrete
> > > Search
> > > > for
> > > > >
> > > > > they way field values are "analyzed" is extremely configurable --
> > > down
> > > > to
> > > > > the individual field level.  Which means that while you
> > > can have an
> > > > actor
> > > > > field where you can do loose text searching for "bateman" and get
> > > back
> > > > > movies staring "Jason Bateman" and "Jason Bateman Black" (and eve=
n
> > > Guido
> > > > > Batemans" if you use stemming) you can also have another
> > > field using
> > > a
> > > > > KeywordAnalyzer such that a record with teh values "Jason Bateman=
"
> > > and
> > > > > "Jack Black" will only be matched if hte user searches for "Jason
> > > > Bateman"
> > > > > or "Jack Black" ... searching for "Bateman Jack" or "Black Jason"
> > > will
> > > > not
> > > > > work.
> > > >
> > > > Another possible trick is to have one field, but mark its end with
> > > special
> > > > tokens, say "^" and "$", so that "Jason Bateman" gets
> > > indexed as four
> > > > tokens:
> > > >      ^ Jason Bateman $
> > > > Then, if you want to search for the name Jason Bateman and that nam=
e
> > > only,
> > > > just search for the phrase "^ Jason Bateman $" - and only this entr=
y
> > > will
> > > > match. (you can also continue to search this field normally)
> > > >
> > > > If you'll think about this, you'll notice that you don't
> > > actually need
> > > > the beginning-of-field marker ("^") because it's easy to
> > > recognize the
> > > > beginning of a field because the position there is 0. Unfortunately=
,
> > > > I don't know how to match position 0 using the standard QueryParser=
,
> > > > but you can do it with the SpanFirstQuery: for example if we index
> > > > Jason Bateman as the three tokens
> > > >      Jason Bateman $
> > > > then we can search for it using something like
> > > >      SpanQuery[] terms =3D {
> > > >            new SpanTermQuery(new Term("actor", "Jason")),
> > > >            new SpanTermQuery(new Term("actor", "Bateman")),
> > > >            new SpanTermQuery(new Term("actor", "$")) };
> > > >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > > > (or something like that... I didn't test this)
> > > >
> > > >
> > > > --
> > > > Nadav Har'El
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Ananth T Sarathy
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Ananth T Sarathy

------=_Part_21905_8181049.1144947274037--

From java-user-return-20132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 17:22:54 2006
Return-Path: <java-user-return-20132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8287 invoked from network); 13 Apr 2006 17:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 17:22:52 -0000
Received: (qmail 5479 invoked by uid 500); 13 Apr 2006 17:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5367 invoked by uid 500); 13 Apr 2006 17:22:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5248 invoked by uid 99); 13 Apr 2006 17:22:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:22:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:22:41 -0700
Received: from mshydpub1.hyd.deshaw.com (mshydpub1.hyd.deshaw.com [149.77.160.67])
 by master.hyd.deshaw.com (8.12.7/8.12.7/2.0.kim.desco.357) with ESMTP id k3DHMFR8003989
 for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 22:52:17 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Lucene Seaches VS. Relational database Queries
Date: Thu, 13 Apr 2006 22:52:15 +0530
Message-ID: <E817F096B8D59B4E9D1E437917B1083107D19D@mshydpub1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Seaches VS. Relational database Queries
Thread-Index: AcZfGq0tvfIONOpWTwa/qVB04WBuBgAAtSrw
From: "Satuluri, Venu_Madhav" <Venu.Madhav.Satuluri@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not sure having an index each for each table solves the problem.

(Going by the schema I put in the earlier mail)
You have an index each for tables A, B and C. What is the
lucene-equivalent of the db query=20
A.field1 =3D=3D value1 and B.field2 =3D=3D value2 and C.field3 =3D=3D =
value3.

You cant use MultiSearcher as MultiSearcher executes the same query
across all indexes. Its not going to return any results.

The remaining alternative is to split the query ourselves into 3 parts,
one for each index and then do the AND-operation in our program.
Needless to say, this can get terribly inefficient as query size and
nesting increases.


-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Thursday, April 13, 2006 10:21 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries


I agree with Jelda.

Lucene is more document-centric. Storing the relationship is not a
good idea. It's better to simply have 2 indexes. Usually when users
search, they can choose which index they want.

Of course, building the indexes will take more time to process-data.

Lucene can not replace relational DB altogether. One reason is Lucene
is more like object-oriented.

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!

On 4/13/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> No.. I don't see your solution is performant..
> If each lucene Document corresponds to a row in 'A join B' then Index
> explodes..
> Index size drastically increases.
>
> Why not then creating two indexs A and B.
> And search for A and then from obtained A documents information search
in B.
>
> It seems for me more performant than indexing all 'A join B'
documents.
>
> Any commenters?
>
> Jelda
>
> > -----Original Message-----
> > From: Satuluri, Venu_Madhav [mailto:Venu.Madhav.Satuluri@deshaw.com]
> > Sent: Thursday, April 13, 2006 6:15 PM
> > To: java-user@lucene.apache.org
> > Subject: RE: Lucene Seaches VS. Relational database Queries
> >
> > I think you are asking if we can retain 1:n relationships in lucene.
> >
> > Ok, I'll go out on a limb and give my solution. Say you have
> > a table A and table B with B having multiple rows associated
> > to each row in A.
> > Also your documents are centered around A, i.e. all your
> > queries return some row(s) of A, not B, but you should be
> > able to query on fields in B.
> >
> >
> > In such a case, you need to have multiple documents for each row in
A.
> > To be more specific, if a row in A has 5 corresponding rows
> > in B, then there must be 5 Documents in lucene index
> > corresponding to A. In other words, each lucene Document
> > corresponds to a row in 'A join B'.
> >
> > I am not sure of this scheme. If there are more tables, then
> > this quickly explodes the no. of documents. We'll have as
> > many documents as will be there in {A join B join C join D..
> > }. Plus, we'll need to remove Documents which correspond
> > logically to the same row in A from the Hits.
> >
> > Is there a better way to do this? Or I don't make sense?
> >
> >
> > -----Original Message-----
> > From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> > Sent: Thursday, April 13, 2006 9:04 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene Seaches VS. Relational database Queries
> >
> >
> > Ok,
> >  Some of the stuff makes  some sense. I was a little loopy
> > from lack of
> > sleep and some of these solutions don't really cover my concerns....
> >
> >
> > Let's take this movie example. If each member of a production Crew
can
> > have
> > multiple titles that come from a lookup table of Distinct Jobs
> >
> > Titles
> > Assistant Producer
> > Producer
> > Executive Producer
> > Director
> > Director Trainee
> > Stunt Director
> >
> > In the Database there would be a Assocation Table Linking each Crew
> > member
> > the titles they had
> >
> > Crew_Titles
> > Crew_ID   Title
> > 1             Producer
> > 1
> >
> > On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> > >
> > > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> > 01:41:37
> > > AM:
> > > > : them in one field).  One of the problems I see would be with
> > values
> > > that
> > > > : over lap (Example, name where one name is Jason Bateman, and
one
> > is
> > > Jason
> > > > : Bateman Black, and it would be hard to replicate the Discrete
> > Search
> > > for
> > > >
> > > > they way field values are "analyzed" is extremely configurable
--
> > down
> > > to
> > > > the individual field level.  Which means that while you
> > can have an
> > > actor
> > > > field where you can do loose text searching for "bateman" and
get
> > back
> > > > movies staring "Jason Bateman" and "Jason Bateman Black" (and
even
> > Guido
> > > > Batemans" if you use stemming) you can also have another
> > field using
> > a
> > > > KeywordAnalyzer such that a record with teh values "Jason
Bateman"
> > and
> > > > "Jack Black" will only be matched if hte user searches for
"Jason
> > > Bateman"
> > > > or "Jack Black" ... searching for "Bateman Jack" or "Black
Jason"
> > will
> > > not
> > > > work.
> > >
> > > Another possible trick is to have one field, but mark its end with
> > special
> > > tokens, say "^" and "$", so that "Jason Bateman" gets
> > indexed as four
> > > tokens:
> > >      ^ Jason Bateman $
> > > Then, if you want to search for the name Jason Bateman and that
name
> > only,
> > > just search for the phrase "^ Jason Bateman $" - and only this
entry
> > will
> > > match. (you can also continue to search this field normally)
> > >
> > > If you'll think about this, you'll notice that you don't
> > actually need
> > > the beginning-of-field marker ("^") because it's easy to
> > recognize the
> > > beginning of a field because the position there is 0.
Unfortunately,
> > > I don't know how to match position 0 using the standard
QueryParser,
> > > but you can do it with the SpanFirstQuery: for example if we index
> > > Jason Bateman as the three tokens
> > >      Jason Bateman $
> > > then we can search for it using something like
> > >      SpanQuery[] terms =3D {
> > >            new SpanTermQuery(new Term("actor", "Jason")),
> > >            new SpanTermQuery(new Term("actor", "Bateman")),
> > >            new SpanTermQuery(new Term("actor", "$")) };
> > >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > > (or something like that... I didn't test this)
> > >
> > >
> > > --
> > > Nadav Har'El
> > >
> > >
> > >
> >
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Ananth T Sarathy
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 17:30:55 2006
Return-Path: <java-user-return-20133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14912 invoked from network); 13 Apr 2006 17:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 17:30:54 -0000
Received: (qmail 25908 invoked by uid 500); 13 Apr 2006 17:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25883 invoked by uid 500); 13 Apr 2006 17:30:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25872 invoked by uid 99); 13 Apr 2006 17:30:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:30:48 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:30:47 -0700
Received: by pproxy.gmail.com with SMTP id m51so2348715pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 10:30:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=otmKED0voNadgaf04LG1cG+HafCmxQEcq4tQ1zeozTVgQsV2Od9lHxKe/k1wJTMAC+XEUXoxQDWJ8MpUVreOyDulzZkZXB4mzpcPaEmjI0uL+avZwdb5JxqCPnoy8W9Nu8dbIxu2sGsTNY85aPgCUmKnha7QR9H8Y8A2OUySR/0=
Received: by 10.35.98.6 with SMTP id a6mr1203433pym;
        Thu, 13 Apr 2006 10:30:27 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 10:30:27 -0700 (PDT)
Message-ID: <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
Date: Thu, 13 Apr 2006 13:30:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30858_19071728.1144949427146"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30858_19071728.1144949427146
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Warning: I'm quite new to lucene, so this may not be very accurate....

What analyzers are you using for indexing and searching? StandardAnalyzer
(like in most of the examples)? Because it looks like you're having a
tokenizer problem. That is, when you index "Assistant producer", you
actually index two tokens, "assistant" and "producer". This is the default
behavior for the stock analyzers, see page 119 of "Lucene in Action". So,
when you search your index, you hit on "producer" in "assistant producer".

A quick test of this would be to munge your input and search terms to
include an underscore for terms like "assistant producer" (that is, index
and search for "assistant_producer"), AND use WhitespaceAnalyzer for BOTH
indexing and searching. This should (if I understand your problem
correctly), fix the example above. If you use any of the other stock
analyzers (Simple, Stop or Standard), they'll split your terms at the
underscore. And if you use one analyzer for indexing and a different one fo=
r
searching, the results are, er, interesting and confusing.

Now, your query select count(distinct Crew_ID) from Crew_TItles where
Title=3D"Producer" should produce the same results as searching your index =
for
producer and the Hits object should contain 3 docs.

P.S. Watch capitalization. the StandardAnalyzer and StopAnalyzer both
lowercase automatically, but WhitespaceAnalyzer does NOT.

If that works, then you will probably want to create your own Analyzer that
recognizes your special terms and deals with them as you see fit. This work=
s
well with PerFieldAnalyzerWrapper to allow you to use your own special
analyzer for one field in your index and other analyzers for other fields,
as appropriate.

Like I say, I'm new here, but this is a possibility I thought I'd mention.

Erick

------=_Part_30858_19071728.1144949427146--

From java-user-return-20134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 17:34:00 2006
Return-Path: <java-user-return-20134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16814 invoked from network); 13 Apr 2006 17:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 17:33:57 -0000
Received: (qmail 33724 invoked by uid 500); 13 Apr 2006 17:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33699 invoked by uid 500); 13 Apr 2006 17:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33688 invoked by uid 99); 13 Apr 2006 17:33:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:33:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wproxy.gmail.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:33:37 -0700
Received: by wproxy.gmail.com with SMTP id 55so259933wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 10:33:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pccABnTP2ix+UvOW/6Ka3veL0Ge/V4OSMBm2nq1KKKSve4vQ3fpKPifQGo+VB+lVttGUztPAKdked3v2+GS3/OkZaoq5tQnHavUAktBKrbCz0fLT/kIciraAjAcGzhxSYgWNh7/B83n89AFWGQYq5vKtRy58XJq2eaejeM7hgto=
Received: by 10.64.250.10 with SMTP id x10mr514034qbh;
        Thu, 13 Apr 2006 10:33:15 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 10:33:15 -0700 (PDT)
Message-ID: <ad681e7f0604131033j29b2b25co38140c0f41dd3a74@mail.gmail.com>
Date: Thu, 13 Apr 2006 13:33:15 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <E817F096B8D59B4E9D1E437917B1083107D19D@mshydpub1.hyd.deshaw.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22566_17562609.1144949595518"
References: <E817F096B8D59B4E9D1E437917B1083107D19D@mshydpub1.hyd.deshaw.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22566_17562609.1144949595518
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Also we need to address the Join Between A and B and C, which I don't know
see how with out taking out values out of the hit list.




On 4/13/06, Satuluri, Venu_Madhav <Venu.Madhav.Satuluri@deshaw.com> wrote:
>
> I am not sure having an index each for each table solves the problem.
>
> (Going by the schema I put in the earlier mail)
> You have an index each for tables A, B and C. What is the
> lucene-equivalent of the db query
> A.field1 =3D=3D value1 and B.field2 =3D=3D value2 and C.field3 =3D=3D val=
ue3.
>
> You cant use MultiSearcher as MultiSearcher executes the same query
> across all indexes. Its not going to return any results.
>
> The remaining alternative is to split the query ourselves into 3 parts,
> one for each index and then do the AND-operation in our program.
> Needless to say, this can get terribly inefficient as query size and
> nesting increases.
>
>
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Thursday, April 13, 2006 10:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Seaches VS. Relational database Queries
>
>
> I agree with Jelda.
>
> Lucene is more document-centric. Storing the relationship is not a
> good idea. It's better to simply have 2 indexes. Usually when users
> search, they can choose which index they want.
>
> Of course, building the indexes will take more time to process-data.
>
> Lucene can not replace relational DB altogether. One reason is Lucene
> is more like object-oriented.
>
> Chris Lu
> ---------------------------------------
> Full-Text Lucene Search on Any Databases
> http://www.dbsight.net
> Faster to Setup than reading marketing materials!
>
> On 4/13/06, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > No.. I don't see your solution is performant..
> > If each lucene Document corresponds to a row in 'A join B' then Index
> > explodes..
> > Index size drastically increases.
> >
> > Why not then creating two indexs A and B.
> > And search for A and then from obtained A documents information search
> in B.
> >
> > It seems for me more performant than indexing all 'A join B'
> documents.
> >
> > Any commenters?
> >
> > Jelda
> >
> > > -----Original Message-----
> > > From: Satuluri, Venu_Madhav [mailto:Venu.Madhav.Satuluri@deshaw.com]
> > > Sent: Thursday, April 13, 2006 6:15 PM
> > > To: java-user@lucene.apache.org
> > > Subject: RE: Lucene Seaches VS. Relational database Queries
> > >
> > > I think you are asking if we can retain 1:n relationships in lucene.
> > >
> > > Ok, I'll go out on a limb and give my solution. Say you have
> > > a table A and table B with B having multiple rows associated
> > > to each row in A.
> > > Also your documents are centered around A, i.e. all your
> > > queries return some row(s) of A, not B, but you should be
> > > able to query on fields in B.
> > >
> > >
> > > In such a case, you need to have multiple documents for each row in
> A.
> > > To be more specific, if a row in A has 5 corresponding rows
> > > in B, then there must be 5 Documents in lucene index
> > > corresponding to A. In other words, each lucene Document
> > > corresponds to a row in 'A join B'.
> > >
> > > I am not sure of this scheme. If there are more tables, then
> > > this quickly explodes the no. of documents. We'll have as
> > > many documents as will be there in {A join B join C join D..
> > > }. Plus, we'll need to remove Documents which correspond
> > > logically to the same row in A from the Hits.
> > >
> > > Is there a better way to do this? Or I don't make sense?
> > >
> > >
> > > -----Original Message-----
> > > From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com]
> > > Sent: Thursday, April 13, 2006 9:04 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Lucene Seaches VS. Relational database Queries
> > >
> > >
> > > Ok,
> > >  Some of the stuff makes  some sense. I was a little loopy
> > > from lack of
> > > sleep and some of these solutions don't really cover my concerns....
> > >
> > >
> > > Let's take this movie example. If each member of a production Crew
> can
> > > have
> > > multiple titles that come from a lookup table of Distinct Jobs
> > >
> > > Titles
> > > Assistant Producer
> > > Producer
> > > Executive Producer
> > > Director
> > > Director Trainee
> > > Stunt Director
> > >
> > > In the Database there would be a Assocation Table Linking each Crew
> > > member
> > > the titles they had
> > >
> > > Crew_Titles
> > > Crew_ID   Title
> > > 1             Producer
> > > 1
> > >
> > > On 4/12/06, Nadav Har'El <NYH@il.ibm.com> wrote:
> > > >
> > > > Chris Hostetter <hossman_lucene@fucit.org> wrote on 12/04/2006
> > > 01:41:37
> > > > AM:
> > > > > : them in one field).  One of the problems I see would be with
> > > values
> > > > that
> > > > > : over lap (Example, name where one name is Jason Bateman, and
> one
> > > is
> > > > Jason
> > > > > : Bateman Black, and it would be hard to replicate the Discrete
> > > Search
> > > > for
> > > > >
> > > > > they way field values are "analyzed" is extremely configurable
> --
> > > down
> > > > to
> > > > > the individual field level.  Which means that while you
> > > can have an
> > > > actor
> > > > > field where you can do loose text searching for "bateman" and
> get
> > > back
> > > > > movies staring "Jason Bateman" and "Jason Bateman Black" (and
> even
> > > Guido
> > > > > Batemans" if you use stemming) you can also have another
> > > field using
> > > a
> > > > > KeywordAnalyzer such that a record with teh values "Jason
> Bateman"
> > > and
> > > > > "Jack Black" will only be matched if hte user searches for
> "Jason
> > > > Bateman"
> > > > > or "Jack Black" ... searching for "Bateman Jack" or "Black
> Jason"
> > > will
> > > > not
> > > > > work.
> > > >
> > > > Another possible trick is to have one field, but mark its end with
> > > special
> > > > tokens, say "^" and "$", so that "Jason Bateman" gets
> > > indexed as four
> > > > tokens:
> > > >      ^ Jason Bateman $
> > > > Then, if you want to search for the name Jason Bateman and that
> name
> > > only,
> > > > just search for the phrase "^ Jason Bateman $" - and only this
> entry
> > > will
> > > > match. (you can also continue to search this field normally)
> > > >
> > > > If you'll think about this, you'll notice that you don't
> > > actually need
> > > > the beginning-of-field marker ("^") because it's easy to
> > > recognize the
> > > > beginning of a field because the position there is 0.
> Unfortunately,
> > > > I don't know how to match position 0 using the standard
> QueryParser,
> > > > but you can do it with the SpanFirstQuery: for example if we index
> > > > Jason Bateman as the three tokens
> > > >      Jason Bateman $
> > > > then we can search for it using something like
> > > >      SpanQuery[] terms =3D {
> > > >            new SpanTermQuery(new Term("actor", "Jason")),
> > > >            new SpanTermQuery(new Term("actor", "Bateman")),
> > > >            new SpanTermQuery(new Term("actor", "$")) };
> > > >      new SpanFirstQuery(new SpanNearQuery(terms, 0, true), 3);
> > > > (or something like that... I didn't test this)
> > > >
> > > >
> > > > --
> > > > Nadav Har'El
> > > >
> > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Ananth T Sarathy
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Ananth T Sarathy

------=_Part_22566_17562609.1144949595518--

From java-user-return-20135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 17:40:20 2006
Return-Path: <java-user-return-20135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21457 invoked from network); 13 Apr 2006 17:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 17:40:16 -0000
Received: (qmail 50729 invoked by uid 500); 13 Apr 2006 17:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50708 invoked by uid 500); 13 Apr 2006 17:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50697 invoked by uid 99); 13 Apr 2006 17:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:40:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wproxy.gmail.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:40:03 -0700
Received: by wproxy.gmail.com with SMTP id 55so261892wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 10:39:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=grMzwf/mbKaawDxpRg6CnEF34Jw+bZQvpepKfRbeg/+epHYGoeTefoiY+1VPkdJLLI9N+vTsKAEsgifkZyJw4AdmWkySOX6cu5XhrvAv+1e52Xcrg50gwm2ZR+FvXLH6pwX83Tf14zCCPI6nvl+1Ry9bdFnldxjJCSA55kWpkKU=
Received: by 10.65.188.1 with SMTP id q1mr527453qbp;
        Thu, 13 Apr 2006 10:39:43 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 10:39:43 -0700 (PDT)
Message-ID: <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
Date: Thu, 13 Apr 2006 13:39:43 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22682_8931776.1144949983064"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22682_8931776.1144949983064
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

How would that work is some on a form
type Assistant Producer? How would that match the indexed Field if the valu=
e
added is Assistant_Producer?

On 4/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Warning: I'm quite new to lucene, so this may not be very accurate....
>
> What analyzers are you using for indexing and searching? StandardAnalyzer
> (like in most of the examples)? Because it looks like you're having a
> tokenizer problem. That is, when you index "Assistant producer", you
> actually index two tokens, "assistant" and "producer". This is the defaul=
t
> behavior for the stock analyzers, see page 119 of "Lucene in Action". So,
> when you search your index, you hit on "producer" in "assistant producer"=
.
>
> A quick test of this would be to munge your input and search terms to
> include an underscore for terms like "assistant producer" (that is, index
> and search for "assistant_producer"), AND use WhitespaceAnalyzer for BOTH
> indexing and searching. This should (if I understand your problem
> correctly), fix the example above. If you use any of the other stock
> analyzers (Simple, Stop or Standard), they'll split your terms at the
> underscore. And if you use one analyzer for indexing and a different one
> for
> searching, the results are, er, interesting and confusing.
>
> Now, your query select count(distinct Crew_ID) from Crew_TItles where
> Title=3D"Producer" should produce the same results as searching your inde=
x
> for
> producer and the Hits object should contain 3 docs.
>
> P.S. Watch capitalization. the StandardAnalyzer and StopAnalyzer both
> lowercase automatically, but WhitespaceAnalyzer does NOT.
>
> If that works, then you will probably want to create your own Analyzer
> that
> recognizes your special terms and deals with them as you see fit. This
> works
> well with PerFieldAnalyzerWrapper to allow you to use your own special
> analyzer for one field in your index and other analyzers for other fields=
,
> as appropriate.
>
> Like I say, I'm new here, but this is a possibility I thought I'd mention=
.
>
> Erick
>
>


--
Ananth T Sarathy

------=_Part_22682_8931776.1144949983064--

From java-user-return-20136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 17:42:37 2006
Return-Path: <java-user-return-20136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23296 invoked from network); 13 Apr 2006 17:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 17:42:36 -0000
Received: (qmail 55900 invoked by uid 500); 13 Apr 2006 17:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55874 invoked by uid 500); 13 Apr 2006 17:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55863 invoked by uid 99); 13 Apr 2006 17:42:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:42:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 10:42:29 -0700
Received: from bizhan.fors.com ([213.234.218.76] helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1FU5pT-0007E7-Hl
	for java-user@lucene.apache.org; Thu, 13 Apr 2006 12:42:03 -0500
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene Seaches VS. Relational database Queries
Date: Thu, 13 Apr 2006 21:49:35 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
Thread-Index: AcZfGv3jiVrZYHi9QTq2UmQf+j5oJgABbbtg
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060413174230.31C1810FB028@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Ananth T. Sarathy [mailto:ananth.t.sarathy@gmail.com] 
> 
> How would a second index solve the 1:N relationship issue? 
> For the record I agree that Lucene is Document Centric.

Why Lucene should solve this problem? What is your search document?
Or what is your search result? What are you going to display as result to
user?
What will your users search for? 

> Is there anyway to get the Equivalent of select count(distinct Crew_ID)
from 
> Crew_TItles where Title="Producer" which would give you a result of 3

The such query is not a full-text search query. 

For example, the query:

	select titles, yesr, etc from titles where 'Assistant Producer' like
'%....%.

is full-text search query. And Lucene can help you in this case.

Pasha Bizhan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 19:06:52 2006
Return-Path: <java-user-return-20137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89160 invoked from network); 13 Apr 2006 19:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 19:06:51 -0000
Received: (qmail 65183 invoked by uid 500); 13 Apr 2006 19:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65151 invoked by uid 500); 13 Apr 2006 19:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65140 invoked by uid 99); 13 Apr 2006 19:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:06:43 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:06:43 -0700
Received: by pproxy.gmail.com with SMTP id m51so2389506pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 12:06:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aI+8L1kQXW5AeKaG0UDtr6LNSRGKra53lG97rjcV7IcrZQOJQFVlzsXz5EJI0K/CV+liAI8gMvZQi0zk092SXyt/hrQAMeaOPJMOqZAgUSurYhTXDth4ZnB5y9EC5laVir799TvIXv/tC7EqoWkxE0AYnpbc6DbH+CAPiVymZfA=
Received: by 10.35.54.20 with SMTP id g20mr291561pyk;
        Thu, 13 Apr 2006 12:06:22 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 12:06:22 -0700 (PDT)
Message-ID: <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
Date: Thu, 13 Apr 2006 15:06:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32943_3411817.1144955182610"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
	 <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32943_3411817.1144955182610
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, that's a problem you must already be solving. Somewhere, you have to
construct your DB query and recognize what constitutes a "term". From your
previous mail, you imply you can construct this query...

select count(distinct Crew_ID) from Crew_TItles where Title=3D"Producer"

Where did you get "Producer"? Presumably you have some rules for turning th=
e
form-entered data into a SQL query, I assume just the contents of the entry
box. So I don't see why it's at all hard to replace all spaces with
underscores and send the result term to Lucene. Whatever your process, you
have to decide what user entries you use for Title=3D"blah". When you've
isolated the "blah", just do the substitution.

Or I completely misunderstand your problem, which is entirely possible.

Best
Erick

------=_Part_32943_3411817.1144955182610--

From java-user-return-20138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 19:10:25 2006
Return-Path: <java-user-return-20138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90666 invoked from network); 13 Apr 2006 19:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 19:10:19 -0000
Received: (qmail 70084 invoked by uid 500); 13 Apr 2006 19:10:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70059 invoked by uid 500); 13 Apr 2006 19:10:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70048 invoked by uid 99); 13 Apr 2006 19:10:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:10:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:10:02 -0700
Received: by pproxy.gmail.com with SMTP id m51so2391033pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 12:09:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dpi8Y01Q2hgDblQ9oQtu3EOSBqjcCppCPFApvYNIpbwDTDG1e+RNOCg9JY0qxsAF0xjlRc3brjxSBnGYaAx+pzoNwjJvIw/zMBWFwWbi1fXO/FD6qSLGFwsSoGPAtnP8iErgn3k1nz/wNauoL+k/Gjcd5lNZsnGuuowSHkaKeT4=
Received: by 10.35.51.6 with SMTP id d6mr1322208pyk;
        Thu, 13 Apr 2006 12:09:41 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 12:09:41 -0700 (PDT)
Message-ID: <359a92830604131209n60c59fdobb18256da01874d8@mail.gmail.com>
Date: Thu, 13 Apr 2006 15:09:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I just don't get wildcards at all.
In-Reply-To: <359a92830604130822j787ff34eme0bd064e7e014efb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33007_8328459.1144955381787"
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com>
	 <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com>
	 <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com>
	 <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu>
	 <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com>
	 <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com>
	 <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu>
	 <359a92830604101320n4630d3b8xe0f2adedf6074a59@mail.gmail.com>
	 <359a92830604130822j787ff34eme0bd064e7e014efb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33007_8328459.1144955381787
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

OK, we've defined the problem away for the present. Which is probably a ver=
y
good thing. Scratch that, there's no doubt that it's a very good thing <G>.

I'm still interested in anything you have to say, of course, but for now I'=
m
off and running....

Thanks again for all your help
Erick

------=_Part_33007_8328459.1144955381787--

From java-user-return-20139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 19:55:26 2006
Return-Path: <java-user-return-20139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23335 invoked from network); 13 Apr 2006 19:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 19:55:24 -0000
Received: (qmail 49803 invoked by uid 500); 13 Apr 2006 19:55:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49781 invoked by uid 500); 13 Apr 2006 19:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49769 invoked by uid 99); 13 Apr 2006 19:55:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:55:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wproxy.gmail.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 12:55:16 -0700
Received: by wproxy.gmail.com with SMTP id 55so303207wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 12:54:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tVGA7AqAGFf7cSR8OJMEt8yeF0NPpACdBbz86N021GShLj/pEWOzI2SDtdcw8QjqJhrhQxwcnK83uxGH2K/rJIXAW6nCyzy4EJk3l4x5L2pYVsJVExv2rjyERETo94XXFvCN8W4pAh24ETqb1cK0Irc/CIRXHy8ScBmzeHRMj2A=
Received: by 10.64.250.9 with SMTP id x9mr108444qbh;
        Thu, 13 Apr 2006 12:54:50 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 12:54:50 -0700 (PDT)
Message-ID: <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
Date: Thu, 13 Apr 2006 15:54:50 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24496_15725787.1144958090191"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
	 <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
	 <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24496_15725787.1144958090191
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

No we do have drop downs selects that would allow for the substitution, but
we also have a free text fields to allow the user to search. That solution
would I think work for the DB query replacement, but you would need a
regular non underscored field to allow for free text.

On 4/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, that's a problem you must already be solving. Somewhere, you have t=
o
> construct your DB query and recognize what constitutes a "term". From you=
r
> previous mail, you imply you can construct this query...
>
> select count(distinct Crew_ID) from Crew_TItles where Title=3D"Producer"
>
> Where did you get "Producer"? Presumably you have some rules for turning
> the
> form-entered data into a SQL query, I assume just the contents of the
> entry
> box. So I don't see why it's at all hard to replace all spaces with
> underscores and send the result term to Lucene. Whatever your process, yo=
u
> have to decide what user entries you use for Title=3D"blah". When you've
> isolated the "blah", just do the substitution.
>
> Or I completely misunderstand your problem, which is entirely possible.
>
> Best
> Erick
>
>


--
Ananth T Sarathy

------=_Part_24496_15725787.1144958090191--

From java-user-return-20140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 20:34:48 2006
Return-Path: <java-user-return-20140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45820 invoked from network); 13 Apr 2006 20:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 20:34:47 -0000
Received: (qmail 16179 invoked by uid 500); 13 Apr 2006 20:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16144 invoked by uid 500); 13 Apr 2006 20:34:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16132 invoked by uid 99); 13 Apr 2006 20:34:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 13:34:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 13:34:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 218265B76E; Thu, 13 Apr 2006 13:34:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 17D877F403
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 13:34:15 -0700 (PDT)
Date: Thu, 13 Apr 2006 13:34:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604131033j29b2b25co38140c0f41dd3a74@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604131321570.10035@hal.rescomp.berkeley.edu>
References: <E817F096B8D59B4E9D1E437917B1083107D19D@mshydpub1.hyd.deshaw.com>
 <ad681e7f0604131033j29b2b25co38140c0f41dd3a74@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Also we need to address the Join Between A and B and C, which I don't know
: see how with out taking out values out of the hit list.

When discussing Index structure strategies, speaking in generalities like
A B and C is hard .. because there is no 100% generaic solution about how
to "join" X and Y in lucuen ... lucene isn't a relational database, it's
not designed to be a relational database, you shouldn't try to map
relational data concepts directly to lucene.

instead, the questions you should ask yourself are:
  1) what kinds of objects are my users going to want ot search for?
  2) how are they going to want to search for each of those types objects?

The answer to question #1 determines what your Documents should be.  If
you have more then one type of object, you will have more then one type of
document -- wether or not you put those different types of documents in
one index, or seperate indexes is up to you, there are pros and cons for
both cases.  The answer to question #2 determins what you should put in
the indexed fields for each type of Document.

lets assume a simple case where you have the following answers...
  1) Movies, and People
  2) Movies: movie's name, movie's description, cast/crew names/titles
     People: person's name, names of movies person has worked on

...then you have two types of documents.

For documents relating to movies, you have a "name" field, and a
"desciption" field and a "crew" field where you put everyone that worked
on the film, and a "cast" field where you put everyone that appeared on
screen, and then for "key" positions you make specific named fields...
"directory", "producer", "art_director", "best_boy".   And another field
htat every movie has called "doctype" with the value "movie".

For documents relating to people, you use "doctype":"person", You give
them a "first_name" and a "last_name", anda "movies" field where you list
them all.

when someone wants to search for movies with names like "Shining" you
search for "+doctype:movie +name:shining"  when they wnat to search for
people named bob, you search for "+doctype:person +first_name:bob"

	Have you denormalized your data?  Yes.
	Is this bad?  No.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 21:38:39 2006
Return-Path: <java-user-return-20141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77997 invoked from network); 13 Apr 2006 21:38:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 21:38:38 -0000
Received: (qmail 11177 invoked by uid 500); 13 Apr 2006 21:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11145 invoked by uid 500); 13 Apr 2006 21:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11133 invoked by uid 99); 13 Apr 2006 21:38:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 14:38:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 14:38:31 -0700
Received: by wproxy.gmail.com with SMTP id 55so333907wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 14:38:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LjSxZJ8W/wgW/WjssSKtWM681hTdhvaXIfE08x2DRKi/969/luZajpgrXmE/4CLRljYLLW83aw0uvQykz3gEFX1v5bGmvZCyxTjkG9w6WjLo3E3Uprp2EJaxHz4EEkUFvzx9f9a/hJWh35qSibk9FsgmfSKlqwwlFHPgxdYInOw=
Received: by 10.65.239.10 with SMTP id q10mr4550qbr;
        Thu, 13 Apr 2006 14:37:48 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Thu, 13 Apr 2006 14:37:48 -0700 (PDT)
Message-ID: <6e3ae6310604131437k9925f52pcf44c689ec5d07b6@mail.gmail.com>
Date: Thu, 13 Apr 2006 14:37:48 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
	 <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
	 <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
	 <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Depending on what you are trying to search. Let's say your table A is
the table with the "real" content, and B and C are your lookup table.

You should build one index in this case. And select A's content
together with B and C's lookup value into the documents.

I strongly recommend you take a look at DBSight. You can create the
index or several different index super easily. And you can test with
different index structure with out any coding.

BTW: It's not really user friendly to let users choose a drop-down.
You can try DBSight's narrowBy feature. Like the one you will see
here, http://search.dbsight.com

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!


On 4/13/06, Ananth T. Sarathy <ananth.t.sarathy@gmail.com> wrote:
> No we do have drop downs selects that would allow for the substitution, b=
ut
> we also have a free text fields to allow the user to search. That solutio=
n
> would I think work for the DB query replacement, but you would need a
> regular non underscored field to allow for free text.
>
> On 4/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Well, that's a problem you must already be solving. Somewhere, you have=
 to
> > construct your DB query and recognize what constitutes a "term". From y=
our
> > previous mail, you imply you can construct this query...
> >
> > select count(distinct Crew_ID) from Crew_TItles where Title=3D"Producer=
"
> >
> > Where did you get "Producer"? Presumably you have some rules for turnin=
g
> > the
> > form-entered data into a SQL query, I assume just the contents of the
> > entry
> > box. So I don't see why it's at all hard to replace all spaces with
> > underscores and send the result term to Lucene. Whatever your process, =
you
> > have to decide what user entries you use for Title=3D"blah". When you'v=
e
> > isolated the "blah", just do the substitution.
> >
> > Or I completely misunderstand your problem, which is entirely possible.
> >
> > Best
> > Erick
> >
> >
>
>
> --
> Ananth T Sarathy
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 22:14:50 2006
Return-Path: <java-user-return-20142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99564 invoked from network); 13 Apr 2006 22:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 22:14:50 -0000
Received: (qmail 80276 invoked by uid 500); 13 Apr 2006 22:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80245 invoked by uid 500); 13 Apr 2006 22:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80233 invoked by uid 99); 13 Apr 2006 22:14:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 15:14:44 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 15:14:42 -0700
Received: by pproxy.gmail.com with SMTP id m51so2461252pye
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 15:14:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i4RiHYWAfJmgOi9wmSa0/vvKUL3fJ4wMevrOWhXkJvuqZZhn1hHonayD76J2SVEJ3Q/FH+1HhxGVjjhk5LuJm6xXDWlyapHbvxP+qpaWi44LIN/na7R3wduyUPA/uawUBteOK+vYTc2+bSqvnsuwy7Ehl8Fjm7ZQX94LCgtnopM=
Received: by 10.35.51.6 with SMTP id d6mr1617720pyk;
        Thu, 13 Apr 2006 15:14:22 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Thu, 13 Apr 2006 15:14:22 -0700 (PDT)
Message-ID: <359a92830604131514r626fcf54ue51e226b35c80ed8@mail.gmail.com>
Date: Thu, 13 Apr 2006 18:14:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_699_11108220.1144966462267"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
	 <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
	 <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
	 <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_699_11108220.1144966462267
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 4/13/06, Ananth T. Sarathy <ananth.t.sarathy@gmail.com> wrote:
>
> No we do have drop downs selects that would allow for the substitution,
> but
> we also have a free text fields to allow the user to search. That solutio=
n
> would I think work for the DB query replacement, but you would need a
> regular non underscored field to allow for free text.
>
>
Well, as I say, you've solved that problem already. Somewhere, somehow, you
have to decide what to do with the "free text" data. Somewhere, somehow,
you've got to decide whether "stunt director trainee" means "stunt director=
"
+ trainee, stunt + "director trainee", or stunt + director + trainee. Or
else you can't form your SQL in the first place. And the query doesn't
produce reasonable results if you *do* form the query.

If you can form your SQL with distinct "Title =3D 'blah'" clauses, you can
substitute underscores for spaces in the terms. If you can do that, you can
ask Lucene to find the terms you indexed with underscores. And if you can't
form your SQL queries in the first place, the question is irrelevant.

All that said, perhaps a better question is "why is your SQL slow?".
Relational databases are really good at this sort of thing. Many smart
people have put many, many developer years into making relational databases
deal with joins efficiently. Assuming you have the proper indexes etc.

As much as I've been impressed with Lucene, I have to ask whether it's
relevant to your problem. I have no clue what database you're using, how
it's set up, or whether the examples you've given are simplified enough tha=
t
I don't understand what the *real* problem is. But if your issue isn't
really dealing with a full text search, your relational DB should be able t=
o
handle it, given the proper wherewithal. Have you done "explain plan" or it=
s
equivalent in your DB? Have you tried adding indexes to avoid full table
scans? In short, have you fully convinced yourself that your RDB can't
handle the problem?

I'm *extremely* leery of introducing another "moving part" into a product
without fully exhausting the current parts. It's *never* a good thing to ad=
d
a new step into the process unless you can convince yourself that it solves
more problems than it introduces. You've already alluded to keeping the DB
and the Lucene indexes in synch. I *guarantee* that there will be other
issues that rise up and bite you. *Count* on whatever you think you'll spen=
d
in introducing Lucene into your mix (say effort X) costing you *at least* 2=
X
more time/energy than you think. I'd actually give it a multiplier closer t=
o
4X.

This is NOT a slam on lucene. But developers often miss the bigger picture.
What processes are you going to put in place to keep the Lucene part of the
product up to date? How much is it going to cost your company to
troubleshoot the Lucene portion? How many company resources are going to be
spent answering customer complaints? What is the ongoing maintenance
requirement?

I like Lucene. I've just persuaded my company to use it in our next product=
.
I've been incredibly impressed with it's architeture and implementation. Bu=
t
it's a text search engine, and shouldn't be confused with a RDB. *Assuming*
that the RDB is an integral part of your product, I'd spend a lot of time
making that do what I needed before I'd introduce another moving part.

All for what it's worth, from an old "C" programmer <G>..

Best
Erick

------=_Part_699_11108220.1144966462267--

From java-user-return-20143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 22:58:50 2006
Return-Path: <java-user-return-20143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26749 invoked from network); 13 Apr 2006 22:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 22:58:50 -0000
Received: (qmail 48902 invoked by uid 500); 13 Apr 2006 22:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48441 invoked by uid 500); 13 Apr 2006 22:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48427 invoked by uid 99); 13 Apr 2006 22:58:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 15:58:44 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wproxy.gmail.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 15:58:43 -0700
Received: by wproxy.gmail.com with SMTP id 55so354970wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 15:58:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pbalBsm2dVJm9yeyy61aSdA4t9zxpW6NGoB0RyIR4CVku9wJAL02zCTlbw8o48SAMjd/vRuFj478XxigQewlLQtMAMJu9Ad+7VwopYi6B1fnd3IVivQ55ba1xqv/Yzu/V1EopMsEFEafxSLqoBb/Q3dcOgUN2/9oS8ZEUDeBOsE=
Received: by 10.65.205.5 with SMTP id h5mr731379qbq;
        Thu, 13 Apr 2006 15:58:22 -0700 (PDT)
Received: by 10.65.188.3 with HTTP; Thu, 13 Apr 2006 15:58:22 -0700 (PDT)
Message-ID: <ad681e7f0604131558w58724240xd9b88c23a12ec819@mail.gmail.com>
Date: Thu, 13 Apr 2006 18:58:22 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <359a92830604131514r626fcf54ue51e226b35c80ed8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26508_5663141.1144969102673"
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com>
	 <200604131633.k3DGXkQl001419@pigeon.ciao.com>
	 <6e3ae6310604130951y4f107de5u1f8a72ea11d3b547@mail.gmail.com>
	 <ad681e7f0604130954v7b26a8f0tb91ba166302648f@mail.gmail.com>
	 <359a92830604131030j366a8fd0n1e260170b2e55e27@mail.gmail.com>
	 <ad681e7f0604131039r4807a298k2f156f4ab27808c@mail.gmail.com>
	 <359a92830604131206s3c2fac4cp97a84a613503b68b@mail.gmail.com>
	 <ad681e7f0604131254h21fe66f3t8410402a1e93774@mail.gmail.com>
	 <359a92830604131514r626fcf54ue51e226b35c80ed8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26508_5663141.1144969102673
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Erick,
Don't get me wrong. I agree with you 100 percent on everything you just
said, and have been advocating what you are saying. I turned to the forum t=
o
get other peoples thoughts on the issue, feeling that my perspective may be
a little warped, and wanted to see what the community thinks. I think there
is a performance issue with or DB that I have never experienced in any othe=
r
project I have worked on, which needs someone with more specific domain
knowledge to fix.  I think Lucene is fantastic for what we are already usin=
g
it for (searching contents of HTML, colliding the values of database rows t=
o
make them free text searchable). We have been using it for over 2 years, an=
d
with very good results (once we got a hang of it).

  I for one think that native language searches are fundamentally different
than Discrete Database queries, I am just having a problem trying to explai=
n
this to some of the people on my team, and wanted to see if there wer eothe=
r
POV out there.

Ananth

On 4/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> On 4/13/06, Ananth T. Sarathy <ananth.t.sarathy@gmail.com> wrote:
> >
> > No we do have drop downs selects that would allow for the substitution,
> > but
> > we also have a free text fields to allow the user to search. That
> solution
> > would I think work for the DB query replacement, but you would need a
> > regular non underscored field to allow for free text.
> >
> >
> Well, as I say, you've solved that problem already. Somewhere, somehow,
> you
> have to decide what to do with the "free text" data. Somewhere, somehow,
> you've got to decide whether "stunt director trainee" means "stunt
> director"
> + trainee, stunt + "director trainee", or stunt + director + trainee. Or
> else you can't form your SQL in the first place. And the query doesn't
> produce reasonable results if you *do* form the query.
>
> If you can form your SQL with distinct "Title =3D 'blah'" clauses, you ca=
n
> substitute underscores for spaces in the terms. If you can do that, you
> can
> ask Lucene to find the terms you indexed with underscores. And if you
> can't
> form your SQL queries in the first place, the question is irrelevant.
>
> All that said, perhaps a better question is "why is your SQL slow?".
> Relational databases are really good at this sort of thing. Many smart
> people have put many, many developer years into making relational
> databases
> deal with joins efficiently. Assuming you have the proper indexes etc.
>
> As much as I've been impressed with Lucene, I have to ask whether it's
> relevant to your problem. I have no clue what database you're using, how
> it's set up, or whether the examples you've given are simplified enough
> that
> I don't understand what the *real* problem is. But if your issue isn't
> really dealing with a full text search, your relational DB should be able
> to
> handle it, given the proper wherewithal. Have you done "explain plan" or
> its
> equivalent in your DB? Have you tried adding indexes to avoid full table
> scans? In short, have you fully convinced yourself that your RDB can't
> handle the problem?
>
> I'm *extremely* leery of introducing another "moving part" into a product
> without fully exhausting the current parts. It's *never* a good thing to
> add
> a new step into the process unless you can convince yourself that it
> solves
> more problems than it introduces. You've already alluded to keeping the D=
B
> and the Lucene indexes in synch. I *guarantee* that there will be other
> issues that rise up and bite you. *Count* on whatever you think you'll
> spend
> in introducing Lucene into your mix (say effort X) costing you *at least*
> 2X
> more time/energy than you think. I'd actually give it a multiplier closer
> to
> 4X.
>
> This is NOT a slam on lucene. But developers often miss the bigger
> picture.
> What processes are you going to put in place to keep the Lucene part of
> the
> product up to date? How much is it going to cost your company to
> troubleshoot the Lucene portion? How many company resources are going to
> be
> spent answering customer complaints? What is the ongoing maintenance
> requirement?
>
> I like Lucene. I've just persuaded my company to use it in our next
> product.
> I've been incredibly impressed with it's architeture and implementation.
> But
> it's a text search engine, and shouldn't be confused with a RDB.
> *Assuming*
> that the RDB is an integral part of your product, I'd spend a lot of time
> making that do what I needed before I'd introduce another moving part.
>
> All for what it's worth, from an old "C" programmer <G>..
>
> Best
> Erick
>
>


--
Ananth T Sarathy

------=_Part_26508_5663141.1144969102673--

From java-user-return-20144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 23:33:15 2006
Return-Path: <java-user-return-20144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41726 invoked from network); 13 Apr 2006 23:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 23:33:15 -0000
Received: (qmail 74735 invoked by uid 500); 13 Apr 2006 23:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74298 invoked by uid 500); 13 Apr 2006 23:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 12971 invoked by uid 99); 13 Apr 2006 22:30:27 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Boosting Fields (in index) or Queries
Date: Thu, 13 Apr 2006 16:29:55 -0600
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a situation where I'm indexing database entries and have  
fields such as:

name
sku
model
category name
description
features
specifications

I am trying to set a priority higher for the name, category name, and  
description.

I've tried setting the fields' boost values as I've indexed the db  
and it seemed to have little or no result.

When I tried to do the queries, I started using the  
MultiFieldQueryParser but found that those don't have priority or  
boost values you can set on any of the Fields at query time.  Then I  
tried to have separate query parsers - one for each field.  That way  
I could set a boost level for each of the queries created by those  
query parsers.  I joined them together with a BooleanQuery and all of  
them set to BooleanQuery.Occur.SHOULD.  I ended up setting the  
features, specifications, and description to default to  
Query.Operator.AND and that helped, but the boost value seems to do  
nothing.

I try to set the categoryParser's query boost to 4.0f, then 8.0f,  
then 20.0f and have tried downgrading other queries, but the results  
don't change at all in their order.

I am using 1.9.1 and for my database I'm using hibernate to mysql 5  
and ArrayLists with the bag mapping in hibernate.

Does anyone have any thoughts or suggestions?

Thanks!

Jeremy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 13 23:56:11 2006
Return-Path: <java-user-return-20145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53518 invoked from network); 13 Apr 2006 23:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Apr 2006 23:56:10 -0000
Received: (qmail 9296 invoked by uid 500); 13 Apr 2006 23:53:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9251 invoked by uid 500); 13 Apr 2006 23:53:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9227 invoked by uid 99); 13 Apr 2006 23:53:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 16:53:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.97] (HELO smtpout.mac.com) (17.250.248.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 16:52:59 -0700
Received: from mac.com (smtpin04-en2 [10.13.10.149])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k3DNqbUs008441
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 16:52:37 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin04/MantshX 4.0) with ESMTP id k3DNqaSJ018467
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 16:52:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <4B90485C-D203-42A6-894A-8111C207B6D6@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Boosting Fields (in index) or Queries
Date: Thu, 13 Apr 2006 17:52:32 -0600
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a situation where I'm indexing database entries and have  
fields such as:

name
sku
model
category name
description
features
specifications

I am trying to set a priority higher for the name, category name, and  
description.

I've tried setting the fields' boost values as I've indexed the db  
and it seemed to have little or no result.

When I tried to do the queries, I started using the  
MultiFieldQueryParser but found that those don't have priority or  
boost values you can set on any of the Fields at query time.  Then I  
tried to have separate query parsers - one for each field.  That way  
I could set a boost level for each of the queries created by those  
query parsers.  I joined them together with a BooleanQuery and all of  
them set to BooleanQuery.Occur.SHOULD.  I ended up setting the  
features, specifications, and description to default to  
Query.Operator.AND and that helped, but the boost value seems to do  
nothing.

I try to set the categoryParser's query boost to 4.0f, then 8.0f,  
then 20.0f and have tried downgrading other queries, but the results  
don't change at all in their order.

I am using 1.9.1 and for my database I'm using hibernate to mysql 5  
and ArrayLists with the bag mapping in hibernate.

Does anyone have any thoughts or suggestions?

Thanks!

Jeremy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 00:18:33 2006
Return-Path: <java-user-return-20146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59828 invoked from network); 14 Apr 2006 00:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 00:18:32 -0000
Received: (qmail 43096 invoked by uid 500); 14 Apr 2006 00:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43072 invoked by uid 500); 14 Apr 2006 00:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43061 invoked by uid 99); 14 Apr 2006 00:18:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 17:18:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 17:18:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DB78533CAA5; Thu, 13 Apr 2006 20:18:04 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3ED3033C108
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 20:18:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Thu, 13 Apr 2006 20:17:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The best recommendation is to have a look at the Explanation returned  
from IndexSearcher.explain() for a specific query and document to  
trace how things are being scored.  Is it possible you're boosting  
all documents by the same amount?

	Erik


On Apr 13, 2006, at 6:29 PM, Jeremy Hanna wrote:

> I have a situation where I'm indexing database entries and have  
> fields such as:
>
> name
> sku
> model
> category name
> description
> features
> specifications
>
> I am trying to set a priority higher for the name, category name,  
> and description.
>
> I've tried setting the fields' boost values as I've indexed the db  
> and it seemed to have little or no result.
>
> When I tried to do the queries, I started using the  
> MultiFieldQueryParser but found that those don't have priority or  
> boost values you can set on any of the Fields at query time.  Then  
> I tried to have separate query parsers - one for each field.  That  
> way I could set a boost level for each of the queries created by  
> those query parsers.  I joined them together with a BooleanQuery  
> and all of them set to BooleanQuery.Occur.SHOULD.  I ended up  
> setting the features, specifications, and description to default to  
> Query.Operator.AND and that helped, but the boost value seems to do  
> nothing.
>
> I try to set the categoryParser's query boost to 4.0f, then 8.0f,  
> then 20.0f and have tried downgrading other queries, but the  
> results don't change at all in their order.
>
> I am using 1.9.1 and for my database I'm using hibernate to mysql 5  
> and ArrayLists with the bag mapping in hibernate.
>
> Does anyone have any thoughts or suggestions?
>
> Thanks!
>
> Jeremy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 00:56:15 2006
Return-Path: <java-user-return-20147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88916 invoked from network); 14 Apr 2006 00:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 00:56:14 -0000
Received: (qmail 72270 invoked by uid 500); 14 Apr 2006 00:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71960 invoked by uid 500); 14 Apr 2006 00:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71949 invoked by uid 99); 14 Apr 2006 00:56:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 17:56:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.71] (HELO smtpout.mac.com) (17.250.248.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 17:56:08 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout14/MantshX 4.0) with ESMTP id k3E0tjuv013724
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 17:55:46 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k3E0ti3F011701
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 17:55:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--834786945
Message-Id: <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com>
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Thu, 13 Apr 2006 18:55:37 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1--834786945
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Thanks for the tip.  I'm trying to decipher what the explanation  
tells me right now.

Btw, here is the code that I'm currently running:

////////

QueryParser nameParser = new QueryParser("name", analyzer);
QueryParser categoryParser = new QueryParser("category", analyzer);
QueryParser descriptionParser = new QueryParser("description",  
analyzer);
QueryParser featuresParser = new QueryParser("features", analyzer);
QueryParser specificationsParser = new QueryParser("specifications",  
analyzer);
QueryParser skuParser = new QueryParser("sku", analyzer);
QueryParser modelParser = new QueryParser("model", analyzer);

descriptionParser.setDefaultOperator(QueryParser.Operator.AND);
featuresParser.setDefaultOperator(QueryParser.Operator.AND);
specificationsParser.setDefaultOperator(QueryParser.Operator.AND);

BooleanQuery booleanQuery = new BooleanQuery();
Query current = null;

current = categoryParser.parse(queryString);
current.setBoost(20.0f);
booleanQuery.add(current, BooleanClause.Occur.SHOULD);

booleanQuery.add(nameParser.parse(queryString),  
BooleanClause.Occur.SHOULD);
booleanQuery.add(descriptionParser.parse(queryString),  
BooleanClause.Occur.SHOULD);
booleanQuery.add(featuresParser.parse(queryString),  
BooleanClause.Occur.SHOULD);
booleanQuery.add(specificationsParser.parse(queryString),  
BooleanClause.Occur.SHOULD);
booleanQuery.add(skuParser.parse(queryString),  
BooleanClause.Occur.SHOULD);
booleanQuery.add(modelParser.parse(queryString),  
BooleanClause.Occur.SHOULD);


hits = indexSearcher.search(booleanQuery);
hits = indexSearcher.search(booleanQuery, Sort.RELEVANCE);

////////

Looking at the results, the first document in the results should  
hopefully be near the bottom and the Explanation for this document  
has a Description/Details (using the toString() on the Explanation) of:

product of:
   0.0 = sum of:
   0.0 = coord(0/7)

So I'm kind of at a loss as to what's going on.  Am I just doing  
something crazy weird in my code?  I didn't find that many examples  
out there, so I'm kind of winging it according to what I've read in  
the javadocs and what examples I could find.

Thanks,
Jeremy

On Apr 13, 2006, at 6:17 PM, Erik Hatcher wrote:

> The best recommendation is to have a look at the Explanation  
> returned from IndexSearcher.explain() for a specific query and  
> document to trace how things are being scored.  Is it possible  
> you're boosting all documents by the same amount?
>
> 	Erik
>
>
> On Apr 13, 2006, at 6:29 PM, Jeremy Hanna wrote:
>
>> I have a situation where I'm indexing database entries and have  
>> fields such as:
>>
>> name
>> sku
>> model
>> category name
>> description
>> features
>> specifications
>>
>> I am trying to set a priority higher for the name, category name,  
>> and description.
>>
>> I've tried setting the fields' boost values as I've indexed the db  
>> and it seemed to have little or no result.
>>
>> When I tried to do the queries, I started using the  
>> MultiFieldQueryParser but found that those don't have priority or  
>> boost values you can set on any of the Fields at query time.  Then  
>> I tried to have separate query parsers - one for each field.  That  
>> way I could set a boost level for each of the queries created by  
>> those query parsers.  I joined them together with a BooleanQuery  
>> and all of them set to BooleanQuery.Occur.SHOULD.  I ended up  
>> setting the features, specifications, and description to default  
>> to Query.Operator.AND and that helped, but the boost value seems  
>> to do nothing.
>>
>> I try to set the categoryParser's query boost to 4.0f, then 8.0f,  
>> then 20.0f and have tried downgrading other queries, but the  
>> results don't change at all in their order.
>>
>> I am using 1.9.1 and for my database I'm using hibernate to mysql  
>> 5 and ArrayLists with the bag mapping in hibernate.
>>
>> Does anyone have any thoughts or suggestions?
>>
>> Thanks!
>>
>> Jeremy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-1--834786945--

From java-user-return-20148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 01:14:27 2006
Return-Path: <java-user-return-20148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95334 invoked from network); 14 Apr 2006 01:14:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 01:14:27 -0000
Received: (qmail 90349 invoked by uid 500); 14 Apr 2006 01:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90321 invoked by uid 500); 14 Apr 2006 01:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90310 invoked by uid 99); 14 Apr 2006 01:14:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 18:14:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 18:14:21 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0DFA333CAAB; Thu, 13 Apr 2006 21:14:01 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 13ED633CA7B
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 21:14:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Thu, 13 Apr 2006 21:13:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 13, 2006, at 8:55 PM, Jeremy Hanna wrote:
> Looking at the results, the first document in the results should  
> hopefully be near the bottom and the Explanation for this document  
> has a Description/Details (using the toString() on the Explanation)  
> of:
>
> product of:
>   0.0 = sum of:
>   0.0 = coord(0/7)
>
> So I'm kind of at a loss as to what's going on.  Am I just doing  
> something crazy weird in my code?  I didn't find that many examples  
> out there, so I'm kind of winging it according to what I've read in  
> the javadocs and what examples I could find.

Be sure to pass the document id, not the hit number, to explain().   
Looks like you passed an id of an unmatched document.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 01:20:31 2006
Return-Path: <java-user-return-20149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97351 invoked from network); 14 Apr 2006 01:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 01:20:30 -0000
Received: (qmail 93940 invoked by uid 500); 14 Apr 2006 01:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93916 invoked by uid 500); 14 Apr 2006 01:20:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93905 invoked by uid 99); 14 Apr 2006 01:20:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 18:20:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 18:20:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 917B533CAAD; Thu, 13 Apr 2006 21:20:04 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9009133CAA6
	for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 21:20:01 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <359a92830604130822j787ff34eme0bd064e7e014efb@mail.gmail.com>
References: <359a92830604070706g6ac37100g786cf05ed8b118f@mail.gmail.com> <56557336-C93C-4224-9AEE-74E3E18EEB62@ehatchersolutions.com> <359a92830604080637t5317f14dnee4a5510bcb3a05d@mail.gmail.com> <Pine.LNX.4.58.0604081116020.17751@hal.rescomp.berkeley.edu> <359a92830604081227udf1c3c0la51c0069915744ed@mail.gmail.com> <359a92830604091542i5679fe63w96c7f1e406ca16f5@mail.gmail.com> <Pine.LNX.4.58.0604101055380.6512@hal.rescomp.berkeley.edu> <359a92830604101320n4630d3b8xe0f2adedf6074a59@mail.gmail.com> <359a92830604130822j787ff34eme0bd064e7e014efb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41DEA804-35DE-4AB8-BE8D-5FCE7F519201@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: I just don't get wildcards at all.
Date: Thu, 13 Apr 2006 21:19:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wildcard stuff gets fun and interesting.  Have a look at  
SpanRegexQuery in the contrib/regex codebase.  It is a more  
generalized version of WildcardQuery, but within the SpanQuery family.

	Erik


On Apr 13, 2006, at 11:22 AM, Erick Erickson wrote:

> More of the same....
>
> So, now all I want to do is a SpanNearQuery on a wildcard. No  
> problem if I
> can use a wildcard query, but I can't because of the  
> "TooManyClauses" issue.
>
> We have two types of wildcards, truncation (which I can handle by  
> indexing
> successively shorter terms and a special character at the end. i.e.  
> cat$ ca$
> c$). This is neat, it gives me relevance, speed, all the virtues.
>
> The second is a??b????c. Which I don't see any clever indexing  
> schemes to
> handle, but let me think about that more at lunch <G>.
>
> Without asking you to write *too* much for me, what should I look  
> at in
> order to make this work with SpanNear? I'm guessing that I have to  
> iterate
> the wildcard terms, collect a filter for documents "close enough"  
> and use
> that filtered query (again thanks for all your help figuring this  
> out) to
> restrict the returned documents.
>
> What I have in mind is enumerating over the first wildcard term.  
> For each
> successive term, ask if other terms are "close enough" and using  
> that answer
> to possibly turn off that document in the filter. Eventually I'll  
> have a
> filter that is what I want.
>
> Now, this all seems expensive and complex. If the answer is "don't  
> go there,
> use clever indexing or don't try it with very many documents  
> because it'll
> take forever", then that in intself would save me a bunch of work.
>
> Thanks again
> Erick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 03:05:59 2006
Return-Path: <java-user-return-20150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47292 invoked from network); 14 Apr 2006 03:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 03:05:58 -0000
Received: (qmail 60083 invoked by uid 500); 14 Apr 2006 03:05:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60055 invoked by uid 500); 14 Apr 2006 03:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60043 invoked by uid 99); 14 Apr 2006 03:05:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 20:05:50 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tonyqian@hotmail.com designates 65.54.229.31 as permitted sender)
Received: from [65.54.229.31] (HELO hotmail.com) (65.54.229.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 20:05:48 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 13 Apr 2006 20:05:28 -0700
Message-ID: <BAY110-F2187C83870E62CAAFF7C11D4C00@phx.gbl>
Received: from 65.54.229.220 by by110fd.bay110.hotmail.msn.com with HTTP;
	Fri, 14 Apr 2006 03:05:25 GMT
X-Originating-IP: [24.33.231.193]
X-Originating-Email: [tonyqian@hotmail.com]
X-Sender: tonyqian@hotmail.com
From: "Tony Qian" <tonyqian@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: full text search using Lucene
Date: Fri, 14 Apr 2006 03:05:25 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 14 Apr 2006 03:05:28.0445 (UTC) FILETIME=[488772D0:01C65F70]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

Thanks for your reply. I'm currently evaluating different products for full 
text search. I visited DBSight web site briefly. Basically, I have a main 
table which has a number of fields for Ids from look-up tables, for example 
category_id, brand_id, product_id etc. Main table also has a description and 
detail columns. After user types a number of keywords in a text box. My 
query needs to search category table, brand table, product table, main table 
etc. to see if anything matches. If matching, need to retrieve the record 
from main table.

I didn't see this kind of example at DBsight web site. I'm just wondering if 
DBSight can do that.

Thanks,
Tony




>From: "Chris Lu" <chris.lu@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: full text search using Lucene
>Date: Mon, 10 Apr 2006 22:18:44 -0700
>
>Hi, Tony,
>
>DBSight, like SearchBlox, Nutch, Solr, is using Lcuene to search. It
>just makes it super easy and flexible to create a search on any
>databases. Lucene's implementation is far more superior and flexible
>to MySql's full text search.
>
>Try it and you will know what I am talking about. Actually, I think
>it'll be faster to setup DBSight, have it running, see the results,
>than reading through marketing materials. :)
>
>Right now, no funding for us. We need to sell it at a meager price.
>Otherwise, we would be very willing to donate it to open source.
>
>Chris Lu
>-----------------------------------------
>Full-Text Search on Any Databases
>http://www.dbsight.net
>Faster to setup than reading marketing materials.
>
>On 4/10/06, Tony Qian <tonyqian@hotmail.com> wrote:
> > All,
> >
> > I'm working on a project which requires full text search on multiple 
>tables
> > in MySql database. Although, MySql supports full text search, it only
> > supports full text search on signle table. I'm wondering if Lucene can 
>help
> > me to do full text search against MySql database. (I noticed that 
>DBSight is
> > built on top of Lucene.)
> >
> > Any suggestion and links pointing to examples and tutorial are 
>appreaciated.
> >
> > Tony
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 04:29:04 2006
Return-Path: <java-user-return-20151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79289 invoked from network); 14 Apr 2006 04:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 04:29:04 -0000
Received: (qmail 10653 invoked by uid 500); 14 Apr 2006 04:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10618 invoked by uid 500); 14 Apr 2006 04:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10603 invoked by uid 99); 14 Apr 2006 04:28:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 21:28:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Apr 2006 21:28:58 -0700
Received: by wproxy.gmail.com with SMTP id 55so426931wri
        for <java-user@lucene.apache.org>; Thu, 13 Apr 2006 21:28:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Odu6j+u8g2zNvhTDtUOXqpwvNpg5TbV0wYmrbd54c5PVJbRrPZzR/sRY6diOWisQRtMbV18Kmc2ycQsIlGwiwLbjZMNBkhncBVKdmv8X1hKliNfsXYocpN1yXc0roHRebn5vA3u7NHFBlYGvyrlxQMZoEOICOW0uwO5TWvYCHCc=
Received: by 10.65.250.1 with SMTP id c1mr839374qbs;
        Thu, 13 Apr 2006 21:28:36 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Thu, 13 Apr 2006 21:28:36 -0700 (PDT)
Message-ID: <6e3ae6310604132128x6635deb6l2ab7bdc6f9507e5c@mail.gmail.com>
Date: Thu, 13 Apr 2006 21:28:36 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: full text search using Lucene
In-Reply-To: <BAY110-F2187C83870E62CAAFF7C11D4C00@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BAY110-F2187C83870E62CAAFF7C11D4C00@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't want to advertise DBSight there to polute the mailing list.
But this recurring lucene database question often comes out. So here
is the reply. And Tony, these questions you can contact us directly
later.

What you asked is exactly what DBSight does. And all you need to do to
get it up and running is to write simply SQL selects.

Your main table is a fact table, formed a list of Documents in
Lucene's term. You write your SQL to select all main table records,
and other SQLs to retreive data from all other lookup tables. DBSight
will retrieve all the data, create an lucene index.

Check the step by step example and you will understand more.
http://wiki.dbsight.com/index.php?title=3DStep_by_step

And you can use DBSight to schedule data sync, configure search result
templates, and much more. That's another story.

It's easier to have DBSight setup, create your index, have your
content website up and running like Google or Yahoo search, than
reading all the marketing materials.

Chris Lu
-----------------------------------------
Full-Text Search on Any Databases
http://www.dbsight.net
Faster to setup than reading marketing materials.

On 4/13/06, Tony Qian <tonyqian@hotmail.com> wrote:
> Chris,
>
> Thanks for your reply. I'm currently evaluating different products for fu=
ll
> text search. I visited DBSight web site briefly. Basically, I have a main
> table which has a number of fields for Ids from look-up tables, for examp=
le
> category_id, brand_id, product_id etc. Main table also has a description =
and
> detail columns. After user types a number of keywords in a text box. My
> query needs to search category table, brand table, product table, main ta=
ble
> etc. to see if anything matches. If matching, need to retrieve the record
> from main table.
>
> I didn't see this kind of example at DBsight web site. I'm just wondering=
 if
> DBSight can do that.
>
> Thanks,
> Tony
>
>
>
>
> >From: "Chris Lu" <chris.lu@gmail.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: full text search using Lucene
> >Date: Mon, 10 Apr 2006 22:18:44 -0700
> >
> >Hi, Tony,
> >
> >DBSight, like SearchBlox, Nutch, Solr, is using Lcuene to search. It
> >just makes it super easy and flexible to create a search on any
> >databases. Lucene's implementation is far more superior and flexible
> >to MySql's full text search.
> >
> >Try it and you will know what I am talking about. Actually, I think
> >it'll be faster to setup DBSight, have it running, see the results,
> >than reading through marketing materials. :)
> >
> >Right now, no funding for us. We need to sell it at a meager price.
> >Otherwise, we would be very willing to donate it to open source.
> >
> >Chris Lu
> >-----------------------------------------
> >Full-Text Search on Any Databases
> >http://www.dbsight.net
> >Faster to setup than reading marketing materials.
> >
> >On 4/10/06, Tony Qian <tonyqian@hotmail.com> wrote:
> > > All,
> > >
> > > I'm working on a project which requires full text search on multiple
> >tables
> > > in MySql database. Although, MySql supports full text search, it only
> > > supports full text search on signle table. I'm wondering if Lucene ca=
n
> >help
> > > me to do full text search against MySql database. (I noticed that
> >DBSight is
> > > built on top of Lucene.)
> > >
> > > Any suggestion and links pointing to examples and tutorial are
> >appreaciated.
> > >
> > > Tony
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 09:22:32 2006
Return-Path: <java-user-return-20152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3199 invoked from network); 14 Apr 2006 09:22:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 09:22:30 -0000
Received: (qmail 54628 invoked by uid 500); 14 Apr 2006 09:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54577 invoked by uid 500); 14 Apr 2006 09:22:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54566 invoked by uid 99); 14 Apr 2006 09:22:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 02:22:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 02:22:24 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3E9M2a5015237
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 11:22:03 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
Date: Fri, 14 Apr 2006 11:22:01 +0200
User-Agent: KMail/1.8.2
References: <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com> <359a92830604131514r626fcf54ue51e226b35c80ed8@mail.gmail.com> <ad681e7f0604131558w58724240xd9b88c23a12ec819@mail.gmail.com>
In-Reply-To: <ad681e7f0604131558w58724240xd9b88c23a12ec819@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604141122.02195.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Gentlemen,

A join like operation between Lucene indexes can be done with
(at least) reasonable performance by using a few standard
methods from RDB's: sort before going to disk, and cache
whenever possible. The steps are:
- query the first Lucene index with the low level search API to get the
  Lucene doc nrs. (using HitCollector or TermDocs).
- retrieve the key field values for the second index from the first
  in doc number order. This step will perform better when
  there is as less data stored in the first index. This is normally
  the most performance critical step. (IndexReader.document(n))
- Sort these key values and use them, again with low level API
  to get the doc numbers for the second Lucene index.
  (using TermDocs).
- Build a Filter for the second index from these doc numbers,
  this step usually implies some sorting of document numbers,
  for example by collecting them in a BitSet.
- Use this filter for a text search in the second index.

On Friday 14 April 2006 00:58, Ananth T. Sarathy wrote:
> Erick,
> Don't get me wrong. I agree with you 100 percent on everything you just
> said, and have been advocating what you are saying. I turned to the forum to
> get other peoples thoughts on the issue, feeling that my perspective may be
> a little warped, and wanted to see what the community thinks. I think there
> is a performance issue with or DB that I have never experienced in any other
> project I have worked on, which needs someone with more specific domain
> knowledge to fix.  I think Lucene is fantastic for what we are already using
> it for (searching contents of HTML, colliding the values of database rows to
> make them free text searchable). We have been using it for over 2 years, and
> with very good results (once we got a hang of it).
> 
>   I for one think that native language searches are fundamentally different
> than Discrete Database queries, I am just having a problem trying to explain
> this to some of the people on my team, and wanted to see if there wer eother
> POV out there.

The first step above can start from the results of an RDB query.
Usually, the last text search step is more interactive (fundamentally
different?) than earlier steps, so a filter is used to cache the join result.
If the join needs to be changed slightly it is also quite effective to
cache the retrieved key values from the first index and the retrieved
fields from the second  index.
For the last step (and earlier ones), when two successive searches
retrieve a somewhat overlapping document set, one might also want to
avoid using  the Hits class, because it only caches results for a single
search.
Instead, some LRU caches for retrieved documents and for filters can
be quite effective. The caches can have the index version in their keys to
keep things in sync.

Enough RAM should be available so that the indexes can be accessed
without alternating between them.
Also the disk head should not do anything else when it is using
the sorted inputs to minimize the total seek time.
When the filters start taking too much RAM, have a look here:
http://issues.apache.org/jira/browse/LUCENE-328

Regards,
Paul Elschot


> 
> Ananth
> 
> On 4/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > On 4/13/06, Ananth T. Sarathy <ananth.t.sarathy@gmail.com> wrote:
> > >
> > > No we do have drop downs selects that would allow for the substitution,
> > > but
> > > we also have a free text fields to allow the user to search. That
> > solution
> > > would I think work for the DB query replacement, but you would need a
> > > regular non underscored field to allow for free text.
> > >
> > >
> > Well, as I say, you've solved that problem already. Somewhere, somehow,
> > you
> > have to decide what to do with the "free text" data. Somewhere, somehow,
> > you've got to decide whether "stunt director trainee" means "stunt
> > director"
> > + trainee, stunt + "director trainee", or stunt + director + trainee. Or
> > else you can't form your SQL in the first place. And the query doesn't
> > produce reasonable results if you *do* form the query.
> >
> > If you can form your SQL with distinct "Title = 'blah'" clauses, you can
> > substitute underscores for spaces in the terms. If you can do that, you
> > can
> > ask Lucene to find the terms you indexed with underscores. And if you
> > can't
> > form your SQL queries in the first place, the question is irrelevant.
> >
> > All that said, perhaps a better question is "why is your SQL slow?".
> > Relational databases are really good at this sort of thing. Many smart
> > people have put many, many developer years into making relational
> > databases
> > deal with joins efficiently. Assuming you have the proper indexes etc.
> >
> > As much as I've been impressed with Lucene, I have to ask whether it's
> > relevant to your problem. I have no clue what database you're using, how
> > it's set up, or whether the examples you've given are simplified enough
> > that
> > I don't understand what the *real* problem is. But if your issue isn't
> > really dealing with a full text search, your relational DB should be able
> > to
> > handle it, given the proper wherewithal. Have you done "explain plan" or
> > its
> > equivalent in your DB? Have you tried adding indexes to avoid full table
> > scans? In short, have you fully convinced yourself that your RDB can't
> > handle the problem?
> >
> > I'm *extremely* leery of introducing another "moving part" into a product
> > without fully exhausting the current parts. It's *never* a good thing to
> > add
> > a new step into the process unless you can convince yourself that it
> > solves
> > more problems than it introduces. You've already alluded to keeping the DB
> > and the Lucene indexes in synch. I *guarantee* that there will be other
> > issues that rise up and bite you. *Count* on whatever you think you'll
> > spend
> > in introducing Lucene into your mix (say effort X) costing you *at least*
> > 2X
> > more time/energy than you think. I'd actually give it a multiplier closer
> > to
> > 4X.
> >
> > This is NOT a slam on lucene. But developers often miss the bigger
> > picture.
> > What processes are you going to put in place to keep the Lucene part of
> > the
> > product up to date? How much is it going to cost your company to
> > troubleshoot the Lucene portion? How many company resources are going to
> > be
> > spent answering customer complaints? What is the ongoing maintenance
> > requirement?
> >
> > I like Lucene. I've just persuaded my company to use it in our next
> > product.
> > I've been incredibly impressed with it's architeture and implementation.
> > But
> > it's a text search engine, and shouldn't be confused with a RDB.
> > *Assuming*
> > that the RDB is an integral part of your product, I'd spend a lot of time
> > making that do what I needed before I'd introduce another moving part.
> >
> > All for what it's worth, from an old "C" programmer <G>..
> >
> > Best
> > Erick
> >
> >
> 
> 
> --
> Ananth T Sarathy
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 10:30:54 2006
Return-Path: <java-user-return-20153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35626 invoked from network); 14 Apr 2006 10:30:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 10:30:53 -0000
Received: (qmail 15319 invoked by uid 500); 14 Apr 2006 10:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15292 invoked by uid 500); 14 Apr 2006 10:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15281 invoked by uid 99); 14 Apr 2006 10:30:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 03:30:47 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.216.176.206] (HELO vsmtp12.tin.it) (212.216.176.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 03:30:46 -0700
Received: from CICO (213.140.19.126) by vsmtp12.tin.it (7.2.072.1) (authenticated as casacicognani@tin.it)
        id 443F5D0600017215 for java-user@lucene.apache.org; Fri, 14 Apr 2006 12:31:29 +0200
From: "Danilo Cicognani" <d.cicognani@tinfo.it>
To: <java-user@lucene.apache.org>
Subject: Max Frequency and Tf/Idf
Date: Fri, 14 Apr 2006 12:31:13 +0200
Message-ID: <001301c65fae$8ea230a0$4a04a8c0@CICO>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcZfro2v9YDnJInjR1yhPQG48X64mg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everybody.
We are building a complex automatic classification system using Lucene.
We need to manage normalized Tf/Idf (Term Frequency / Inverse Document
Frequency).
We understood that Lucene can give us Tf and Df and we are using these
values to calculate the normalized Tf/Idf but we would like to optimize this
calculation for better performance.
Is there any way to expose the maximum term frequency in a document from
Lucene, and maybe to obtain the normalized Tf/Idf from Lucene?
There aren't a public methods to get these values, but maybe Lucene holds
these informations privately and with a modify on Lucene source we could
have the work done to fasten the system.

P.S. Sorry for MY English: I hope I explained clearly my question.

**** 1000 KBye ****

 [) /\ |\| | |_ ()

web: www.ciconet.it
Web Portal Now: www.webportalnow.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 11:31:30 2006
Return-Path: <java-user-return-20154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62718 invoked from network); 14 Apr 2006 11:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 11:31:02 -0000
Received: (qmail 65707 invoked by uid 500); 14 Apr 2006 11:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65684 invoked by uid 500); 14 Apr 2006 11:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65673 invoked by uid 99); 14 Apr 2006 11:30:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 04:30:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 04:30:51 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.151EE63E@mailer.syr.edu>; Fri, 14 Apr 2006 7:30:30 -0400
Message-ID: <443F87D7.50201@syr.edu>
Date: Fri, 14 Apr 2006 07:30:31 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Max Frequency and Tf/Idf
References: <001301c65fae$8ea230a0$4a04a8c0@CICO>
In-Reply-To: <001301c65fae$8ea230a0$4a04a8c0@CICO>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The Term Vector code can be used to get the term frequencies from a 
specific document.  Search this list, see the Lucene In Action book or 
look at http://www.cnlp.org/apachecon2005 for examples on how to use 
Term Vectors

Danilo Cicognani wrote:
> Hello everybody.
> We are building a complex automatic classification system using Lucene.
> We need to manage normalized Tf/Idf (Term Frequency / Inverse Document
> Frequency).
> We understood that Lucene can give us Tf and Df and we are using these
> values to calculate the normalized Tf/Idf but we would like to optimize this
> calculation for better performance.
> Is there any way to expose the maximum term frequency in a document from
> Lucene, and maybe to obtain the normalized Tf/Idf from Lucene?
> There aren't a public methods to get these values, but maybe Lucene holds
> these informations privately and with a modify on Lucene source we could
> have the work done to fasten the system.
>
> P.S. Sorry for MY English: I hope I explained clearly my question.
>
> **** 1000 KBye ****
>
>  [) /\ |\| | |_ ()
>
> web: www.ciconet.it
> Web Portal Now: www.webportalnow.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 14:26:32 2006
Return-Path: <java-user-return-20155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51236 invoked from network); 14 Apr 2006 14:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 14:25:40 -0000
Received: (qmail 61351 invoked by uid 500); 14 Apr 2006 14:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61326 invoked by uid 500); 14 Apr 2006 14:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61313 invoked by uid 99); 14 Apr 2006 14:25:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:25:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.177] (HELO hnexfe11.hetnet.nl) (195.121.6.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:25:33 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe11.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 16:25:06 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5DA383B8-C7C4-460B-A4D7-AA2834D38384@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <kalle@snigel.net>
Subject: query analysis
Date: Fri, 14 Apr 2006 16:27:15 +0200
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 14:25:09.0137 (UTC) FILETIME=[3BB73810:01C65FCF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello list,

I want to know if a human written query passed through the  
QueryParser is "clean" from fields, boolean clauses and query  
indicators. Easy way out would of course to add a boolean that resets  
at ReInit(), but maybe there is a smart way to do it. Perhaps it is  
possible to treat the retuned Query as a composite pattern (i.e.  
query.iterateNonRewrittenParts())?

The plan is to avoid making suggestions on meta data in the query.  
"+name:foo" should suggest on "foo" only, and not "+name:foo". I  
initially tried to work the enumerateTerms, but realised this is  
hopeless(?) as a rewritten query looks quite different.

Perhaps I'm attacking this from the wrong angle?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 14:38:53 2006
Return-Path: <java-user-return-20156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59174 invoked from network); 14 Apr 2006 14:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 14:37:40 -0000
Received: (qmail 78704 invoked by uid 500); 14 Apr 2006 14:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78322 invoked by uid 500); 14 Apr 2006 14:37:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78311 invoked by uid 99); 14 Apr 2006 14:37:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:37:28 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.198 as permitted sender)
Received: from [66.249.82.198] (HELO xproxy.gmail.com) (66.249.82.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:37:27 -0700
Received: by xproxy.gmail.com with SMTP id i26so136123wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 07:37:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=SzgmaZxsL1xvW8MEs8+O13xMfLM6k+YGqzjdlVrVmLN9xirJrbTU9O+KR4MEWcPOD5eJpc4NEVUZGq8K6ltu4Vrx0b/Ac6Mz2PbY4ThoGFnAcvJk5ourjOjSEAmhm2eRe/q95rzaFEWBI2d001EU45XNv1+8jwRHD9zbdubwU3Q=
Received: by 10.70.115.9 with SMTP id n9mr746538wxc;
        Fri, 14 Apr 2006 07:37:06 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 07:37:06 -0700 (PDT)
Message-ID: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
Date: Fri, 14 Apr 2006 10:37:06 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Syntax help
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30821_21677488.1145025426777"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30821_21677488.1145025426777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

We am using Lucene to facilitate searching of our applications log files. I
am noticing some inconsistencies in result sets when searching on certain
fields.

One field we index is the file path. I am using a simple query like
"location:Z:\logs\someLogFile.log". However, I can never get path searches
like this to come back with any results. Tried escaping the backslashes and
colon. Nothing seems to work. I missing something here in my syntax?

We also index the file name. However, on file names that have mixed case or
multiple extensions (logfile.D20060303.T234234) I cannot get results either=
.
Weird.

I haven't worked with Lucene very long, so I expect I am missing something
simple here.

If you need more info, let me know!
Many Thanks!

--Bill

------=_Part_30821_21677488.1145025426777--

From java-user-return-20157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 14:43:39 2006
Return-Path: <java-user-return-20157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61642 invoked from network); 14 Apr 2006 14:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 14:43:33 -0000
Received: (qmail 85940 invoked by uid 500); 14 Apr 2006 14:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85478 invoked by uid 500); 14 Apr 2006 14:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85467 invoked by uid 99); 14 Apr 2006 14:43:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:43:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wproxy.gmail.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:43:26 -0700
Received: by wproxy.gmail.com with SMTP id 55so558035wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 07:43:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kH4HY2H4wsFdGKynSB67xcf/yJyAnhHpr3HlgHKbeewETkKSyWAG7Z8mWEYkCY4KYBmYTiQGX3zFViBfTXLMmBqTjDIKyZvQhm7HnEujaUanJvPEGZ0SoboDxTFZ74hvJyb6/D8cB3z73QxIFcPog2L70edb0CNQ+2JEdahbQ9k=
Received: by 10.65.160.18 with SMTP id m18mr976763qbo;
        Fri, 14 Apr 2006 07:43:05 -0700 (PDT)
Received: by 10.65.248.6 with HTTP; Fri, 14 Apr 2006 07:43:05 -0700 (PDT)
Message-ID: <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
Date: Fri, 14 Apr 2006 09:43:05 -0500
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27934_2408218.1145025785386"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27934_2408218.1145025785386
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

It would be helpful to download Luke (http://www.getopt.org/luke/) and
analyze whats getting indexed. Have you tried that?

On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
>
> Hello,
>
> We am using Lucene to facilitate searching of our applications log files.
> I
> am noticing some inconsistencies in result sets when searching on certain
> fields.
>
> One field we index is the file path. I am using a simple query like
> "location:Z:\logs\someLogFile.log". However, I can never get path searche=
s
> like this to come back with any results. Tried escaping the backslashes
> and
> colon. Nothing seems to work. I missing something here in my syntax?
>
> We also index the file name. However, on file names that have mixed case
> or
> multiple extensions (logfile.D20060303.T234234) I cannot get results
> either.
> Weird.
>
> I haven't worked with Lucene very long, so I expect I am missing somethin=
g
> simple here.
>
> If you need more info, let me know!
> Many Thanks!
>
> --Bill
>
>

------=_Part_27934_2408218.1145025785386--

From java-user-return-20158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 14:47:32 2006
Return-Path: <java-user-return-20158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63609 invoked from network); 14 Apr 2006 14:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 14:47:17 -0000
Received: (qmail 92627 invoked by uid 500); 14 Apr 2006 14:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92594 invoked by uid 500); 14 Apr 2006 14:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92580 invoked by uid 99); 14 Apr 2006 14:47:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:47:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.187] (HELO hnexfe17.hetnet.nl) (195.121.6.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:47:05 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe17.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 14 Apr 2006 16:46:42 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <089ED07C-A313-4E9B-8650-BFBCC8BD7F9C@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Syntax help
Date: Fri, 14 Apr 2006 16:49:04 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 14:46:42.0465 (UTC) FILETIME=[3E996910:01C65FD2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 16.37 skrev Bill Snyder:
>
> One field we index is the file path. I am using a simple query like
> "location:Z:\logs\someLogFile.log". However, I can never get path  
> searches
> like this to come back with any results. Tried escaping the  
> backslashes and
> colon. Nothing seems to work. I missing something here in my syntax?

Can you open your index with Luke and see what the index looks like?

If it looks right, what does the code look like that retrieve the  
field value?
If not, what does the code look like that set the field value?

In case everything seems fine, do some debugging and report what values
you send to Lucene and what you get out.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 14:49:45 2006
Return-Path: <java-user-return-20159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66117 invoked from network); 14 Apr 2006 14:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 14:49:44 -0000
Received: (qmail 99306 invoked by uid 500); 14 Apr 2006 14:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99280 invoked by uid 500); 14 Apr 2006 14:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99267 invoked by uid 99); 14 Apr 2006 14:49:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:49:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.195 as permitted sender)
Received: from [66.249.82.195] (HELO xproxy.gmail.com) (66.249.82.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 07:49:36 -0700
Received: by xproxy.gmail.com with SMTP id i26so139424wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 07:49:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ohyUlJkcYTSNXiJ0cK8mZ4jtn5PAd+qpZylUCISKCjgEUMt6egtRutq/LiL++K0MPrdOWCOYbTKLlg/BYzkPx0xM/x51XGC/FVcDzi9e3dmjYYjNzs50qzzDZZqBwmXWuzqS+f6EV2ao0ySZsWbNMmevhNIzIb7JrM+FJSXBS9M=
Received: by 10.70.115.2 with SMTP id n2mr1821255wxc;
        Fri, 14 Apr 2006 07:49:13 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 07:49:13 -0700 (PDT)
Message-ID: <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
Date: Fri, 14 Apr 2006 10:49:13 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30881_18134676.1145026153340"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30881_18134676.1145026153340
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Oh, cool. Look at that. A neat tool made with thinlets. I had not heard of
this...I'll see if it helps me figure out whats going on.

--Bill

On 4/14/06, Rajesh Munavalli <findmath@gmail.com> wrote:
>
> It would be helpful to download Luke (http://www.getopt.org/luke/) and
> analyze whats getting indexed. Have you tried that?
>
> On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
> >
> > Hello,
> >
> > We am using Lucene to facilitate searching of our applications log
> files.
> > I
> > am noticing some inconsistencies in result sets when searching on
> certain
> > fields.
> >
> > One field we index is the file path. I am using a simple query like
> > "location:Z:\logs\someLogFile.log". However, I can never get path
> searches
> > like this to come back with any results. Tried escaping the backslashes
> > and
> > colon. Nothing seems to work. I missing something here in my syntax?
> >
> > We also index the file name. However, on file names that have mixed cas=
e
> > or
> > multiple extensions (logfile.D20060303.T234234) I cannot get results
> > either.
> > Weird.
> >
> > I haven't worked with Lucene very long, so I expect I am missing
> something
> > simple here.
> >
> > If you need more info, let me know!
> > Many Thanks!
> >
> > --Bill
> >
> >
>
>

------=_Part_30881_18134676.1145026153340--

From java-user-return-20160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:11:36 2006
Return-Path: <java-user-return-20160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77097 invoked from network); 14 Apr 2006 15:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:11:34 -0000
Received: (qmail 37342 invoked by uid 500); 14 Apr 2006 15:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37295 invoked by uid 500); 14 Apr 2006 15:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37284 invoked by uid 99); 14 Apr 2006 15:11:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:11:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:11:28 -0700
Received: by xproxy.gmail.com with SMTP id i26so146286wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:11:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=axalY+/S9uBLdiRUUf560YT3UTIQqt250mGYC0uuNAa7l650QxF7ac0DSpOlAbdpqPX3YL9GbCT2tXRzV90PCL8nEFlQFoYnPYYXQE1Y2qMOaM3PePOVRT/WxdgX103E0vslEx5kwR6DVpvOopoynwb548RY3VPlAxpflaX0MgI=
Received: by 10.70.59.17 with SMTP id h17mr2133628wxa;
        Fri, 14 Apr 2006 08:11:07 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 08:11:07 -0700 (PDT)
Message-ID: <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
Date: Fri, 14 Apr 2006 11:11:07 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31229_4425824.1145027467781"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31229_4425824.1145027467781
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

AHA!  I am using the Search tab and have enteres the query :

location:Z:\install\logs\archive.log.D20060406.T141958

the query details says the query was parsed to

location:z

so if I escape the colon I see the new parsed query as

location:"z installlogsarchive.log.d20060406.t141958"

So, lucence does not store the file path exactly?! It converts it all lower
case! Is there some property I should turn on?

Plus, it is not storing the backslash. Should I be escaping these in the
index before storing them? It seems so.

-Bill

On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
>
> Oh, cool. Look at that. A neat tool made with thinlets. I had not heard o=
f
> this...I'll see if it helps me figure out whats going on.
>
> --Bill
>
>
> On 4/14/06, Rajesh Munavalli <findmath@gmail.com> wrote:
> >
> > It would be helpful to download Luke (http://www.getopt.org/luke/) and
> > analyze whats getting indexed. Have you tried that?
> >
> > On 4/14/06, Bill Snyder < wsnyder6@gmail.com> wrote:
> > >
> > > Hello,
> > >
> > > We am using Lucene to facilitate searching of our applications log
> > files.
> > > I
> > > am noticing some inconsistencies in result sets when searching on
> > certain
> > > fields.
> > >
> > > One field we index is the file path. I am using a simple query like
> > > "location:Z:\logs\someLogFile.log". However, I can never get path
> > searches
> > > like this to come back with any results. Tried escaping the
> > backslashes
> > > and
> > > colon. Nothing seems to work. I missing something here in my syntax?
> > >
> > > We also index the file name. However, on file names that have mixed
> > case
> > > or
> > > multiple extensions (logfile.D20060303.T234234 ) I cannot get results
> > > either.
> > > Weird.
> > >
> > > I haven't worked with Lucene very long, so I expect I am missing
> > something
> > > simple here.
> > >
> > > If you need more info, let me know!
> > > Many Thanks!
> > >
> > > --Bill
> > >
> > >
> >
> >
>

------=_Part_31229_4425824.1145027467781--

From java-user-return-20161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:20:22 2006
Return-Path: <java-user-return-20161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80631 invoked from network); 14 Apr 2006 15:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:20:22 -0000
Received: (qmail 51290 invoked by uid 500); 14 Apr 2006 15:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51265 invoked by uid 500); 14 Apr 2006 15:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51254 invoked by uid 99); 14 Apr 2006 15:20:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:20:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.174] (HELO hnexfe08.hetnet.nl) (195.121.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:20:15 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe08.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 17:19:53 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com> <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com> <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com> <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Syntax help
Date: Fri, 14 Apr 2006 17:22:15 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:19:53.0325 (UTC) FILETIME=[E13E89D0:01C65FD6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.11 skrev Bill Snyder:

>
> so if I escape the colon I see the new parsed query as
>
> location:"z installlogsarchive.log.d20060406.t141958"
>
> So, lucence does not store the file path exactly?! It converts it  
> all lower
> case! Is there some property I should turn on?

It is the Analyzer that does that. Try creating your IndexSearcher  
with a KeywordAnalyzer (it think).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:20:35 2006
Return-Path: <java-user-return-20162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80858 invoked from network); 14 Apr 2006 15:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:20:31 -0000
Received: (qmail 52460 invoked by uid 500); 14 Apr 2006 15:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52409 invoked by uid 500); 14 Apr 2006 15:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52379 invoked by uid 99); 14 Apr 2006 15:20:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:20:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wproxy.gmail.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:20:20 -0700
Received: by wproxy.gmail.com with SMTP id 55so567391wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:20:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K073BZoT8BbjVNLKX2xLZOZ0JIjBB3XTdpkQcXd66Feg8aEDHS9q0Fi9GeOicrY3nfu2NfDVKWSSfZwLDkaNEgOY3vkxyUGi0/FjOHptTZ8fpFW9iHZVLqoRX2vjLAIWP0Y8Fq5lnHavkVV/mgwJGRgJ5WhFwoU769+OP1N/4b4=
Received: by 10.65.126.6 with SMTP id d6mr984328qbn;
        Fri, 14 Apr 2006 08:19:59 -0700 (PDT)
Received: by 10.65.248.6 with HTTP; Fri, 14 Apr 2006 08:19:59 -0700 (PDT)
Message-ID: <abe188f20604140819w47197ef7q36be6bb2720413b1@mail.gmail.com>
Date: Fri, 14 Apr 2006 10:19:59 -0500
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28266_7717975.1145027999643"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
	 <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28266_7717975.1145027999643
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
>
> AHA!  I am using the Search tab and have enteres the query :
>
> location:Z:\install\logs\archive.log.D20060406.T141958
>
> the query details says the query was parsed to
>
> location:z
>
> so if I escape the colon I see the new parsed query as
>
> location:"z installlogsarchive.log.d20060406.t141958"
>
> So, lucence does not store the file path exactly?! It converts it all
> lower
> case! Is there some property I should turn on?


In the StandardAnalyzer, the LowerCaseFilter converts everything into lower
case. You can skip that step.

Plus, it is not storing the backslash. Should I be escaping these in the
> index before storing them? It seems so.

Yes

-Bill

On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
>
> Oh, cool. Look at that. A neat tool made with thinlets. I had not heard o=
f
> this...I'll see if it helps me figure out whats going on.
>
> --Bill
>
>
> On 4/14/06, Rajesh Munavalli <findmath@gmail.com> wrote:
> >
> > It would be helpful to download Luke (http://www.getopt.org/luke/) and
> > analyze whats getting indexed. Have you tried that?
> >
> > On 4/14/06, Bill Snyder < wsnyder6@gmail.com> wrote:
> > >
> > > Hello,
> > >
> > > We am using Lucene to facilitate searching of our applications log
> > files.
> > > I
> > > am noticing some inconsistencies in result sets when searching on
> > certain
> > > fields.
> > >
> > > One field we index is the file path. I am using a simple query like
> > > "location:Z:\logs\someLogFile.log". However, I can never get path
> > searches
> > > like this to come back with any results. Tried escaping the
> > backslashes
> > > and
> > > colon. Nothing seems to work. I missing something here in my syntax?
> > >
> > > We also index the file name. However, on file names that have mixed
> > case
> > > or
> > > multiple extensions (logfile.D20060303.T234234 ) I cannot get results
> > > either.
> > > Weird.
> > >
> > > I haven't worked with Lucene very long, so I expect I am missing
> > something
> > > simple here.
> > >
> > > If you need more info, let me know!
> > > Many Thanks!
> > >
> > > --Bill
> > >
> > >
> >
> >
>

------=_Part_28266_7717975.1145027999643--

From java-user-return-20163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:38:24 2006
Return-Path: <java-user-return-20163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91606 invoked from network); 14 Apr 2006 15:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:38:24 -0000
Received: (qmail 92361 invoked by uid 500); 14 Apr 2006 15:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92170 invoked by uid 500); 14 Apr 2006 15:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92158 invoked by uid 99); 14 Apr 2006 15:38:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:38:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.174] (HELO hnexfe08.hetnet.nl) (195.121.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:38:17 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe08.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 17:37:54 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
Content-Transfer-Encoding: 7bit
Message-Id: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <kalle@snigel.net>
Subject: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 17:40:12 +0200
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:37:54.0408 (UTC) FILETIME=[659EB680:01C65FD9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would like to store all in my application rather than using the  
Lucene persistency mechanism for tokens. I only want the search  
mechanism. I do not need the IndexReader and IndexWriter as that will  
be a natural part of my application. I only want to use the Searchable.

So I looked at extending my own. Tried to follow the code. Is there  
UML or something that describes the code and the process? Would very  
much appreciate someone telling me what I need to do :-)

Perhaps there is some implementation I should take a look at?

Memory consumption is not an issue. What do I need to consider for  
the CPU?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:40:10 2006
Return-Path: <java-user-return-20164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92346 invoked from network); 14 Apr 2006 15:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:40:08 -0000
Received: (qmail 95624 invoked by uid 500); 14 Apr 2006 15:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95600 invoked by uid 500); 14 Apr 2006 15:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95589 invoked by uid 99); 14 Apr 2006 15:40:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:40:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:40:00 -0700
Received: by xproxy.gmail.com with SMTP id i26so154101wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:39:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DkXKMLyBkZoKVPXejtqkiVKoQTqbQ96zgJW5IToSdO29ybec1yBuiDZ/2Uns9XouT8hhNJEQiAYcFsubIc4IzVIlWP3RB6/A5qFn9TvT5IAy6uIW6YzOw3mXkva5pJda9PwwffanPKpgMJO0wOSScnWgF6Di7LJPQBc4Po6SEvc=
Received: by 10.70.65.11 with SMTP id n11mr590529wxa;
        Fri, 14 Apr 2006 08:39:39 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 08:39:39 -0700 (PDT)
Message-ID: <e465bf5d0604140839k683cb59dk2dc3ee6dc8085eca@mail.gmail.com>
Date: Fri, 14 Apr 2006 11:39:39 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <abe188f20604140819w47197ef7q36be6bb2720413b1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31642_10515159.1145029179744"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
	 <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
	 <abe188f20604140819w47197ef7q36be6bb2720413b1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31642_10515159.1145029179744
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks! OK, how do I get the file separator to be part of the term? Luke
shows the parsed query as ignoring the file separator.

so location:Z\:\\/install/logs\\jetspeedservices.log

becomes location:"z install logs jetspeedservices.log"

--Bill



On 4/14/06, Rajesh Munavalli <findmath@gmail.com> wrote:
>
> On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
> >
> > AHA!  I am using the Search tab and have enteres the query :
> >
> > location:Z:\install\logs\archive.log.D20060406.T141958
> >
> > the query details says the query was parsed to
> >
> > location:z
> >
> > so if I escape the colon I see the new parsed query as
> >
> > location:"z installlogsarchive.log.d20060406.t141958"
> >
> > So, lucence does not store the file path exactly?! It converts it all
> > lower
> > case! Is there some property I should turn on?
>
>
> In the StandardAnalyzer, the LowerCaseFilter converts everything into
> lower
> case. You can skip that step.
>
> Plus, it is not storing the backslash. Should I be escaping these in the
> > index before storing them? It seems so.
>
> Yes
>
> -Bill
>
> On 4/14/06, Bill Snyder <wsnyder6@gmail.com> wrote:
> >
> > Oh, cool. Look at that. A neat tool made with thinlets. I had not heard
> of
> > this...I'll see if it helps me figure out whats going on.
> >
> > --Bill
> >
> >
> > On 4/14/06, Rajesh Munavalli <findmath@gmail.com> wrote:
> > >
> > > It would be helpful to download Luke (http://www.getopt.org/luke/) an=
d
> > > analyze whats getting indexed. Have you tried that?
> > >
> > > On 4/14/06, Bill Snyder < wsnyder6@gmail.com> wrote:
> > > >
> > > > Hello,
> > > >
> > > > We am using Lucene to facilitate searching of our applications log
> > > files.
> > > > I
> > > > am noticing some inconsistencies in result sets when searching on
> > > certain
> > > > fields.
> > > >
> > > > One field we index is the file path. I am using a simple query like
> > > > "location:Z:\logs\someLogFile.log". However, I can never get path
> > > searches
> > > > like this to come back with any results. Tried escaping the
> > > backslashes
> > > > and
> > > > colon. Nothing seems to work. I missing something here in my syntax=
?
> > > >
> > > > We also index the file name. However, on file names that have mixed
> > > case
> > > > or
> > > > multiple extensions (logfile.D20060303.T234234 ) I cannot get
> results
> > > > either.
> > > > Weird.
> > > >
> > > > I haven't worked with Lucene very long, so I expect I am missing
> > > something
> > > > simple here.
> > > >
> > > > If you need more info, let me know!
> > > > Many Thanks!
> > > >
> > > > --Bill
> > > >
> > > >
> > >
> > >
> >
>
>

------=_Part_31642_10515159.1145029179744--

From java-user-return-20165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:42:18 2006
Return-Path: <java-user-return-20165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93078 invoked from network); 14 Apr 2006 15:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:42:18 -0000
Received: (qmail 98861 invoked by uid 500); 14 Apr 2006 15:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98647 invoked by uid 500); 14 Apr 2006 15:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98627 invoked by uid 99); 14 Apr 2006 15:42:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:42:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wproxy.gmail.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:42:10 -0700
Received: by wproxy.gmail.com with SMTP id 55so573599wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:41:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=K2Rn5nsNXioUr0EUaRXx+eJFQu24WRAsriLNgDKvfYBDQ7+AiR1yFohtdAxrYriLD3iNDZHgRrh7SxSGt5uz0t9Hdy5ij9iqUpkiRAM/eCEGSGh4bpU1VZEm2+IyEpIrbV7EvMrKACWgNIcR1zKtFG7gGGYFJLAesfQW5YKjTI8=
Received: by 10.65.194.11 with SMTP id w11mr365652qbp;
        Fri, 14 Apr 2006 08:41:49 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Fri, 14 Apr 2006 08:41:49 -0700 (PDT)
Message-ID: <6e3ae6310604140841i35c61700va4b6041f350614d6@mail.gmail.com>
Date: Fri, 14 Apr 2006 08:41:49 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query analysis
In-Reply-To: <5DA383B8-C7C4-460B-A4D7-AA2834D38384@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5DA383B8-C7C4-460B-A4D7-AA2834D38384@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

tried MultiFieldQueryParser?

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!

On 4/14/06, karl wettin <kalle@snigel.net> wrote:
> Hello list,
>
> I want to know if a human written query passed through the
> QueryParser is "clean" from fields, boolean clauses and query
> indicators. Easy way out would of course to add a boolean that resets
> at ReInit(), but maybe there is a smart way to do it. Perhaps it is
> possible to treat the retuned Query as a composite pattern (i.e.
> query.iterateNonRewrittenParts())?
>
> The plan is to avoid making suggestions on meta data in the query.
> "+name:foo" should suggest on "foo" only, and not "+name:foo". I
> initially tried to work the enumerateTerms, but realised this is
> hopeless(?) as a rewritten query looks quite different.
>
> Perhaps I'm attacking this from the wrong angle?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:42:39 2006
Return-Path: <java-user-return-20166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93167 invoked from network); 14 Apr 2006 15:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:42:35 -0000
Received: (qmail 247 invoked by uid 500); 14 Apr 2006 15:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 214 invoked by uid 500); 14 Apr 2006 15:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 203 invoked by uid 99); 14 Apr 2006 15:42:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:42:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:42:28 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 17:42:06 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com> <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com> <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com> <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com> <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F7D8F7C8-ABE5-458D-938F-357B15AC621D@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Syntax help
Date: Fri, 14 Apr 2006 17:44:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:42:06.0428 (UTC) FILETIME=[FBD5E9C0:01C65FD9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.22 skrev karl wettin:
>
> It is the Analyzer that does that. Try creating your IndexSearcher  
> with a KeywordAnalyzer (it think).

err

It is the Analyzer that does that. Try using a KeywordAnalyzer (it  
think).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:46:33 2006
Return-Path: <java-user-return-20167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96783 invoked from network); 14 Apr 2006 15:46:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:46:31 -0000
Received: (qmail 9815 invoked by uid 500); 14 Apr 2006 15:46:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9783 invoked by uid 500); 14 Apr 2006 15:46:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9772 invoked by uid 99); 14 Apr 2006 15:46:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:46:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:46:24 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 17:46:02 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <6e3ae6310604140841i35c61700va4b6041f350614d6@mail.gmail.com>
References: <5DA383B8-C7C4-460B-A4D7-AA2834D38384@snigel.net> <6e3ae6310604140841i35c61700va4b6041f350614d6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <27AEE8C2-2BC0-4A42-951A-EB4D230971BA@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: query analysis
Date: Fri, 14 Apr 2006 17:48:24 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:46:02.0895 (UTC) FILETIME=[88C7E9F0:01C65FDA]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.41 skrev Chris Lu:
>
> On 4/14/06, karl wettin <kalle@snigel.net> wrote:

>> I want to know if a human written query passed through the
>> QueryParser is "clean" from fields, boolean clauses and query
>> indicators. Easy way out would of course to add a boolean that resets
>> at ReInit(), but maybe there is a smart way to do it. Perhaps it is
>> possible to treat the retuned Query as a composite pattern (i.e.
>> query.iterateNonRewrittenParts())?

> tried MultiFieldQueryParser?

How do you mean that it can help? I'm not sure if you understood my  
question or if MultiFieldQueryParser has some features I'm unaware of. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:46:39 2006
Return-Path: <java-user-return-20168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96898 invoked from network); 14 Apr 2006 15:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:46:36 -0000
Received: (qmail 11037 invoked by uid 500); 14 Apr 2006 15:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10949 invoked by uid 500); 14 Apr 2006 15:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10914 invoked by uid 99); 14 Apr 2006 15:46:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:46:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wproxy.gmail.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:46:29 -0700
Received: by wproxy.gmail.com with SMTP id 55so574793wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:46:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YALi1uF5JTTQ83JylEkRVf9NPLKpwcp8qcThpXKcHZHqtjPYvjQDGtaS+bET7Y+Mww7eHjsh9lQm8KvzNdjf+pKEEosETGrmsi94eMMq7wxKuf+XjMfgkBlpllWU4se248ohKmBz+J9G8WkXgE/FMtACaK+BV1PY/mEYnU/+BhE=
Received: by 10.65.237.16 with SMTP id o16mr1007535qbr;
        Fri, 14 Apr 2006 08:46:08 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Fri, 14 Apr 2006 08:46:08 -0700 (PDT)
Message-ID: <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com>
Date: Fri, 14 Apr 2006 08:46:08 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
In-Reply-To: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

use Store.NO when creating Field

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!


On 4/14/06, karl wettin <kalle@snigel.net> wrote:
> I would like to store all in my application rather than using the
> Lucene persistency mechanism for tokens. I only want the search
> mechanism. I do not need the IndexReader and IndexWriter as that will
> be a natural part of my application. I only want to use the Searchable.
>
> So I looked at extending my own. Tried to follow the code. Is there
> UML or something that describes the code and the process? Would very
> much appreciate someone telling me what I need to do :-)
>
> Perhaps there is some implementation I should take a look at?
>
> Memory consumption is not an issue. What do I need to consider for
> the CPU?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:49:51 2006
Return-Path: <java-user-return-20169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98142 invoked from network); 14 Apr 2006 15:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:49:50 -0000
Received: (qmail 16008 invoked by uid 500); 14 Apr 2006 15:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15923 invoked by uid 500); 14 Apr 2006 15:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15911 invoked by uid 99); 14 Apr 2006 15:49:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:49:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.187] (HELO hnexfe17.hetnet.nl) (195.121.6.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:49:43 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe17.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 14 Apr 2006 17:49:21 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 17:51:43 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:49:21.0903 (UTC) FILETIME=[FF661FF0:01C65FDA]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.46 skrev Chris Lu:
>
> On 4/14/06, karl wettin <kalle@snigel.net> wrote:
>> I would like to store all in my application rather than using the
>> Lucene persistency mechanism for tokens. I only want the search
>> mechanism. I do not need the IndexReader and IndexWriter as that will
>> be a natural part of my application. I only want to use the  
>> Searchable.

> use Store.NO when creating Field

You missunderstand all my questions.

But it's OK.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:52:06 2006
Return-Path: <java-user-return-20170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 271 invoked from network); 14 Apr 2006 15:52:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:52:05 -0000
Received: (qmail 22395 invoked by uid 500); 14 Apr 2006 15:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22370 invoked by uid 500); 14 Apr 2006 15:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22359 invoked by uid 99); 14 Apr 2006 15:51:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:51:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.204.178.22] (HELO Speedbird.local) (209.204.178.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:51:59 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by Speedbird.local (Postfix) with ESMTP id 513925C1920
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:51:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BAA26168-8D01-4607-8746-12D502D485C3@blowfish.com>
Content-Transfer-Encoding: 7bit
From: Christophe <fox@blowfish.com>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 08:51:32 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 14 Apr 2006, at 08:51, karl wettin wrote:
> You missunderstand all my questions.

I must admit I was not sure I understood your question, either.  In  
order to search, Lucene needs an index.  That index is maintained by  
the IndexReader and IndexWriter classes.  Are you contemplating  
having your own index and index format?  In that case, it's not clear  
to me how much leverage you will be getting using Lucene at all.   
Could you explain in more detail what you are trying to do?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:53:32 2006
Return-Path: <java-user-return-20171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 835 invoked from network); 14 Apr 2006 15:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:53:31 -0000
Received: (qmail 24961 invoked by uid 500); 14 Apr 2006 15:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24669 invoked by uid 500); 14 Apr 2006 15:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24658 invoked by uid 99); 14 Apr 2006 15:53:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:53:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:53:24 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 17:53:00 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <06A3AC56-A34D-4DB0-86B3-3F578C16A9F6@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 17:55:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:53:00.0986 (UTC) FILETIME=[81FB89A0:01C65FDB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.51 skrev karl wettin:

>
> 14 apr 2006 kl. 17.46 skrev Chris Lu:
>>
>> On 4/14/06, karl wettin <kalle@snigel.net> wrote:
>>> I would like to store all in my application rather than using the
>>> Lucene persistency mechanism for tokens. I only want the search
>>> mechanism. I do not need the IndexReader and IndexWriter as that  
>>> will
>>> be a natural part of my application. I only want to use the  
>>> Searchable.
>
>> use Store.NO when creating Field
>
> You missunderstand all my questions.

I'll clarify though.

I don't want to use Lucene for persistence. I do not want to store  
tokens nor field text in a FSDirectory or in a RAMDirectory. I want  
to take store the the tokens in my application.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:54:53 2006
Return-Path: <java-user-return-20172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1248 invoked from network); 14 Apr 2006 15:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:54:53 -0000
Received: (qmail 26170 invoked by uid 500); 14 Apr 2006 15:54:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26136 invoked by uid 500); 14 Apr 2006 15:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26124 invoked by uid 99); 14 Apr 2006 15:54:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:54:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.187] (HELO hnexfe17.hetnet.nl) (195.121.6.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:54:46 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe17.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 14 Apr 2006 17:54:25 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <BAA26168-8D01-4607-8746-12D502D485C3@blowfish.com>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net> <BAA26168-8D01-4607-8746-12D502D485C3@blowfish.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3459B94A-1D03-4650-9801-F27656F27DA2@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 17:56:47 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 15:54:25.0262 (UTC) FILETIME=[B43708E0:01C65FDB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.51 skrev Christophe:

> Are you contemplating having your own index and index format?  In  
> that case, it's not clear to me how much leverage you will be  
> getting using Lucene at all.  Could you explain in more detail what  
> you are trying to do?

I want to use the parts of Lucene built to query an index, not the  
part that persists an index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 15:57:50 2006
Return-Path: <java-user-return-20173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2611 invoked from network); 14 Apr 2006 15:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 15:57:50 -0000
Received: (qmail 30448 invoked by uid 500); 14 Apr 2006 15:57:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30420 invoked by uid 500); 14 Apr 2006 15:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30409 invoked by uid 99); 14 Apr 2006 15:57:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:57:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 08:57:44 -0700
Received: by xproxy.gmail.com with SMTP id i31so70488wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 08:57:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VAjpIXeIM0a7chklUDaf35OCUxSMGkI9z0Gcn3G6R18dXJDe8a0XPhlFBeObvKm5tjr+XEY4DojSMNQVsGFR/yamtfEJ56E810np8wG6ESS9lnaxN8SKcRF0tbAuBBxZbWirAbE8KhmHzR2XWwUX8zq+//qnjAqYQplTtsdZfdw=
Received: by 10.70.116.10 with SMTP id o10mr2170207wxc;
        Fri, 14 Apr 2006 08:57:23 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 08:57:23 -0700 (PDT)
Message-ID: <e465bf5d0604140857u148b8152gfca558d2f6f07857@mail.gmail.com>
Date: Fri, 14 Apr 2006 11:57:23 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <F7D8F7C8-ABE5-458D-938F-357B15AC621D@snigel.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31878_9967939.1145030243528"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
	 <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
	 <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
	 <F7D8F7C8-ABE5-458D-938F-357B15AC621D@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31878_9967939.1145030243528
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

oops, thought that you were just referring to the lowercase...
:)

On 4/14/06, karl wettin <kalle@snigel.net> wrote:
>
>
> 14 apr 2006 kl. 17.22 skrev karl wettin:
> >
> > It is the Analyzer that does that. Try creating your IndexSearcher
> > with a KeywordAnalyzer (it think).
>
> err
>
> It is the Analyzer that does that. Try using a KeywordAnalyzer (it
> think).
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31878_9967939.1145030243528--

From java-user-return-20174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:01:37 2006
Return-Path: <java-user-return-20174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3940 invoked from network); 14 Apr 2006 16:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:01:36 -0000
Received: (qmail 33099 invoked by uid 500); 14 Apr 2006 16:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33075 invoked by uid 500); 14 Apr 2006 16:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33064 invoked by uid 99); 14 Apr 2006 16:01:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:01:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.204.178.22] (HELO Speedbird.local) (209.204.178.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:01:30 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by Speedbird.local (Postfix) with ESMTP id 9C01B5C1958
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 09:01:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <06A3AC56-A34D-4DB0-86B3-3F578C16A9F6@snigel.net>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net> <06A3AC56-A34D-4DB0-86B3-3F578C16A9F6@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <191BA5CD-6AA4-496B-9A4F-2F8399906F42@blowfish.com>
Content-Transfer-Encoding: 7bit
From: Christophe <fox@blowfish.com>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 09:01:08 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 14 Apr 2006, at 08:55, karl wettin wrote:

> I don't want to use Lucene for persistence. I do not want to store  
> tokens nor field text in a FSDirectory or in a RAMDirectory. I want  
> to take store the the tokens in my application.

If I understand your question, I think that the first answer was  
exactly correct.

You don't need to use Lucene for persistence in order to use it for  
searching.  By setting the fields to be non-stored, Lucene only  
constructs the index for those fields, and doesn't save the full text  
of the field.  For example, we store the text we are searching in an  
RDBMS, and only use Lucene for the full-text index.  When we need to  
retrieve the actual document, we don't go to Lucene; we go to the RDBMS.

This doesn't require any code changes at all; you just set the fields  
to non-stored when you index the documents.

Lucene still does need an index, somewhere, in order to search, and  
Lucene manages the format of the index, so you will still need to use  
IndexWriter and IndexReader, and some Directory subclass, in order  
for Lucene to have a place to store its index.  You can create a new  
flavor of Directory if you want Lucene to store its index files  
somewhere more exotic than the standard classes allow.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:05:43 2006
Return-Path: <java-user-return-20175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7173 invoked from network); 14 Apr 2006 16:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:05:21 -0000
Received: (qmail 40610 invoked by uid 500); 14 Apr 2006 16:05:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40583 invoked by uid 500); 14 Apr 2006 16:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40572 invoked by uid 99); 14 Apr 2006 16:05:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:05:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wproxy.gmail.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:05:07 -0700
Received: by wproxy.gmail.com with SMTP id 55so579617wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 09:04:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YN8osxgPbadlUJsX3QK8YJYpmIZsntsNX9OwfTGmTdzcHvRC1oSuProhCPT7tbpoc8S/8Hy3i8LuPQiJ67j7UzDCz/+3ndm4taBD90w52OwFPoM6p5vzF7edY2mK4qIUkJAADG9CXTkDd57yp873o3zDktjE267KDqAG5sRZIwU=
Received: by 10.65.250.1 with SMTP id c1mr1024331qbs;
        Fri, 14 Apr 2006 09:04:46 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Fri, 14 Apr 2006 09:04:46 -0700 (PDT)
Message-ID: <6e3ae6310604140904u1d014f77v2278a86251754fb4@mail.gmail.com>
Date: Fri, 14 Apr 2006 09:04:46 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query analysis
In-Reply-To: <27AEE8C2-2BC0-4A42-951A-EB4D230971BA@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <5DA383B8-C7C4-460B-A4D7-AA2834D38384@snigel.net>
	 <6e3ae6310604140841i35c61700va4b6041f350614d6@mail.gmail.com>
	 <27AEE8C2-2BC0-4A42-951A-EB4D230971BA@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, really misunderstood you. And you already know Lucene a lot. :)

Basically you want to restore the original query from the Query
object. But it may have already passed a lot of composition, like
Boolean, Span, Wildcard.

I don't feel it's possible to reconstruct the original human query.

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!


On 4/14/06, karl wettin <kalle@snigel.net> wrote:
>
> 14 apr 2006 kl. 17.41 skrev Chris Lu:
> >
> > On 4/14/06, karl wettin <kalle@snigel.net> wrote:
>
> >> I want to know if a human written query passed through the
> >> QueryParser is "clean" from fields, boolean clauses and query
> >> indicators. Easy way out would of course to add a boolean that resets
> >> at ReInit(), but maybe there is a smart way to do it. Perhaps it is
> >> possible to treat the retuned Query as a composite pattern (i.e.
> >> query.iterateNonRewrittenParts())?
>
> > tried MultiFieldQueryParser?
>
> How do you mean that it can help? I'm not sure if you understood my
> question or if MultiFieldQueryParser has some features I'm unaware of.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:10:50 2006
Return-Path: <java-user-return-20176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11083 invoked from network); 14 Apr 2006 16:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:10:48 -0000
Received: (qmail 54971 invoked by uid 500); 14 Apr 2006 16:10:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54778 invoked by uid 500); 14 Apr 2006 16:10:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54764 invoked by uid 99); 14 Apr 2006 16:10:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:10:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:10:41 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 18:10:18 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <3459B94A-1D03-4650-9801-F27656F27DA2@snigel.net>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net> <BAA26168-8D01-4607-8746-12D502D485C3@blowfish.com> <3459B94A-1D03-4650-9801-F27656F27DA2@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E74B89D-6633-4EF9-8138-E583CC80CA03@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 18:12:40 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 16:10:19.0058 (UTC) FILETIME=[ECB8C120:01C65FDD]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 17.56 skrev karl wettin:

>
> 14 apr 2006 kl. 17.51 skrev Christophe:
>
>> Are you contemplating having your own index and index format?  In  
>> that case, it's not clear to me how much leverage you will be  
>> getting using Lucene at all.  Could you explain in more detail  
>> what you are trying to do?
>
> I want to use the parts of Lucene built to query an index, not the  
> part that persists an index.

Sorry for flooding. Here is a class diagram (go fixed size font) of  
what I want to do:

[MyTokenizedClass](field)-- {0..*} | {0..1} --[Token]<- - - <<query>>  
- -[Searchable]
                                    |
                                    \---[Offset]

I want to store all the tokens in the realm of my application. I do  
not want to use the IndexWriter to analyze and tokenize my fields.  I  
do that my self.

I only want the query mechanism of Lucene.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:12:13 2006
Return-Path: <java-user-return-20177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11773 invoked from network); 14 Apr 2006 16:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:12:12 -0000
Received: (qmail 58361 invoked by uid 500); 14 Apr 2006 16:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58334 invoked by uid 500); 14 Apr 2006 16:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58323 invoked by uid 99); 14 Apr 2006 16:12:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:12:07 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wproxy.gmail.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:12:05 -0700
Received: by wproxy.gmail.com with SMTP id 55so581597wri
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 09:11:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RDolEkYn0XKQeU0LNgJKE6snP7fXDT3pv0znauEaZoCZuN+ZqefiybI2O2Vp+rW1NzovVYMQDnY8BVQ+W2aPNgBmLF50k7XRDCjzxD1ZEmT/4ls06LufPV0RKefnisYXu4LdjlJSZO9g3lQ0IAVxSUL9K5siiUy/bLlmy6TxZgw=
Received: by 10.65.160.18 with SMTP id m18mr1015913qbo;
        Fri, 14 Apr 2006 09:11:44 -0700 (PDT)
Received: by 10.65.93.17 with HTTP; Fri, 14 Apr 2006 09:11:44 -0700 (PDT)
Message-ID: <6e3ae6310604140911q774debb7i9c274cc934004907@mail.gmail.com>
Date: Fri, 14 Apr 2006 09:11:44 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
In-Reply-To: <191BA5CD-6AA4-496B-9A4F-2F8399906F42@blowfish.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
	 <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com>
	 <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net>
	 <06A3AC56-A34D-4DB0-86B3-3F578C16A9F6@snigel.net>
	 <191BA5CD-6AA4-496B-9A4F-2F8399906F42@blowfish.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Christophe.

Hi, Kevin,

I think your question means you want to store the Analyzed tokens yourself?
If so, you can use Analyzer to directly process the text, and save the
analyzed results in your application, maybe later use it in some
RDBMS? or BerkelyDB?

Chris Lu
---------------------------------------
Full-Text Lucene Search on Any Databases
http://www.dbsight.net
Faster to Setup than reading marketing materials!

On 4/14/06, Christophe <fox@blowfish.com> wrote:
> On 14 Apr 2006, at 08:55, karl wettin wrote:
>
> > I don't want to use Lucene for persistence. I do not want to store
> > tokens nor field text in a FSDirectory or in a RAMDirectory. I want
> > to take store the the tokens in my application.
>
> If I understand your question, I think that the first answer was
> exactly correct.
>
> You don't need to use Lucene for persistence in order to use it for
> searching.  By setting the fields to be non-stored, Lucene only
> constructs the index for those fields, and doesn't save the full text
> of the field.  For example, we store the text we are searching in an
> RDBMS, and only use Lucene for the full-text index.  When we need to
> retrieve the actual document, we don't go to Lucene; we go to the RDBMS.
>
> This doesn't require any code changes at all; you just set the fields
> to non-stored when you index the documents.
>
> Lucene still does need an index, somewhere, in order to search, and
> Lucene manages the format of the index, so you will still need to use
> IndexWriter and IndexReader, and some Directory subclass, in order
> for Lucene to have a place to store its index.  You can create a new
> flavor of Directory if you want Lucene to store its index files
> somewhere more exotic than the standard classes allow.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:22:01 2006
Return-Path: <java-user-return-20178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18674 invoked from network); 14 Apr 2006 16:21:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:21:55 -0000
Received: (qmail 79215 invoked by uid 500); 14 Apr 2006 16:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79192 invoked by uid 500); 14 Apr 2006 16:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79180 invoked by uid 99); 14 Apr 2006 16:21:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:21:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:21:43 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 18:21:21 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <191BA5CD-6AA4-496B-9A4F-2F8399906F42@blowfish.com>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <6e3ae6310604140846u36f086bcjb3197973ae627054@mail.gmail.com> <EFDB123E-450F-404E-BCE6-AEB5589DBD73@snigel.net> <06A3AC56-A34D-4DB0-86B3-3F578C16A9F6@snigel.net> <191BA5CD-6AA4-496B-9A4F-2F8399906F42@blowfish.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BBE9A82B-2E62-422D-9170-D27B1E6FB7D8@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 18:23:42 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 16:21:21.0839 (UTC) FILETIME=[77C51BF0:01C65FDF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 18.01 skrev Christophe:

> On 14 Apr 2006, at 08:55, karl wettin wrote:
>
>> I don't want to use Lucene for persistence. I do not want to store  
>> tokens nor field text in a FSDirectory or in a RAMDirectory. I  
>> want to take store the the tokens in my application.
>
> If I understand your question, I think that the first answer was  
> exactly correct.
>
> You don't need to use Lucene for persistence in order to use it for  
> searching.  By setting the fields to be non-stored, Lucene only  
> constructs the index

You speak of storing field values in the Lucene index. I speak of not  
using a Lucene index at all, to only use the query mechanism. All  
data Lucene need (the index) would be supplied from my application.  
Not from the Lucene Directory implementation.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:31:37 2006
Return-Path: <java-user-return-20179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25734 invoked from network); 14 Apr 2006 16:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:31:36 -0000
Received: (qmail 1969 invoked by uid 500); 14 Apr 2006 16:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1940 invoked by uid 500); 14 Apr 2006 16:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1928 invoked by uid 99); 14 Apr 2006 16:31:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:31:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.202] (HELO smtp812.mail.ukl.yahoo.com) (217.12.12.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Apr 2006 09:31:28 -0700
Received: (qmail 51961 invoked from network); 14 Apr 2006 16:31:07 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@86.132.236.162 with login)
  by smtp812.mail.ukl.yahoo.com with SMTP; 14 Apr 2006 16:31:06 -0000
Message-ID: <022201c65fe0$d4bcbdd0$0401a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
Subject: Lucene probabilistic
Date: Fri, 14 Apr 2006 17:31:06 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_021F_01C65FE9.364CA850"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_021F_01C65FE9.364CA850
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi all,
I came across an old mail list item from 2003 exploring the =
possibilities of a more probabilistic approach to using Lucene. Do the =
online experts know if anyone achieved this since?
Thanks for any advice,
Malc
------=_NextPart_000_021F_01C65FE9.364CA850--


From java-user-return-20180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 16:32:05 2006
Return-Path: <java-user-return-20180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26138 invoked from network); 14 Apr 2006 16:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 16:32:02 -0000
Received: (qmail 5039 invoked by uid 500); 14 Apr 2006 16:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4962 invoked by uid 500); 14 Apr 2006 16:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4913 invoked by uid 99); 14 Apr 2006 16:31:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:31:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.60] (HELO ylpvm29.prodigy.net) (207.115.57.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 09:31:47 -0700
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net [207.115.4.21])
	by ylpvm29.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3EGUjbk017261
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 12:30:45 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout5-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3EGVGYA135468;
	Fri, 14 Apr 2006 12:31:21 -0400
Message-ID: <443FCE53.9050707@apache.org>
Date: Fri, 14 Apr 2006 09:31:15 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
In-Reply-To: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> I would like to store all in my application rather than using the  
> Lucene persistency mechanism for tokens. I only want the search  
> mechanism. I do not need the IndexReader and IndexWriter as that will  
> be a natural part of my application. I only want to use the Searchable.

Implement the IndexReader API, overriding all of the abstract methods. 
That will enable you to search your index using Lucene's search code.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 17:16:37 2006
Return-Path: <java-user-return-20181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44427 invoked from network); 14 Apr 2006 17:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 17:16:35 -0000
Received: (qmail 64018 invoked by uid 500); 14 Apr 2006 17:16:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63987 invoked by uid 500); 14 Apr 2006 17:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63974 invoked by uid 99); 14 Apr 2006 17:16:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:16:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.86] (HELO smtpout.mac.com) (17.250.248.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:16:29 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout04/MantshX 4.0) with ESMTP id k3EHG7pb016263
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 10:16:07 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id k3EHG4T9006349
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 10:16:07 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com> <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DD7662C3-20A8-4380-87C8-17AD5385BEB0@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Fri, 14 Apr 2006 11:15:59 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wow, I finally found out why I was getting results in the wrong order  
- I got the results in the correct order from the Lucene index.  I  
got the explanation of each of the results along with their database  
id and found the ordering mismatch.
The problem is in the database call.  I am calling:

select * from product where id in (444, 333, 555, 888);

and the ordering that comes back is not preserved.  So the results  
are correct but the ordering and hence all of the relevancy is out  
the window.  So that at least leads me to the actual problem.  Now I  
have to figure out how I'll approach reordering the results because I  
don't believe that there's any way to force the ordering of a list  
and I don't want to call a separate database query for each id (lots  
of database round-trips).

Thanks for the help Erik!

On Apr 13, 2006, at 7:13 PM, Erik Hatcher wrote:

>
> On Apr 13, 2006, at 8:55 PM, Jeremy Hanna wrote:
>> Looking at the results, the first document in the results should  
>> hopefully be near the bottom and the Explanation for this document  
>> has a Description/Details (using the toString() on the  
>> Explanation) of:
>>
>> product of:
>>   0.0 = sum of:
>>   0.0 = coord(0/7)
>>
>> So I'm kind of at a loss as to what's going on.  Am I just doing  
>> something crazy weird in my code?  I didn't find that many  
>> examples out there, so I'm kind of winging it according to what  
>> I've read in the javadocs and what examples I could find.
>
> Be sure to pass the document id, not the hit number, to explain().   
> Looks like you passed an id of an unmatched document.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 17:23:40 2006
Return-Path: <java-user-return-20182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47443 invoked from network); 14 Apr 2006 17:23:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 17:23:35 -0000
Received: (qmail 77293 invoked by uid 500); 14 Apr 2006 17:23:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77055 invoked by uid 500); 14 Apr 2006 17:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77044 invoked by uid 99); 14 Apr 2006 17:23:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:23:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.175] (HELO hnexfe09.hetnet.nl) (195.121.6.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:23:24 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe09.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 14 Apr 2006 19:23:01 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <443FCE53.9050707@apache.org>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <439444CE-7B85-40B6-A151-6B43B1E6BEAF@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Fri, 14 Apr 2006 19:25:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 14 Apr 2006 17:23:01.0728 (UTC) FILETIME=[15135E00:01C65FE8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 18.31 skrev Doug Cutting:

> karl wettin wrote:
>> I would like to store all in my application rather than using the   
>> Lucene persistency mechanism for tokens. I only want the search   
>> mechanism. I do not need the IndexReader and IndexWriter as that  
>> will  be a natural part of my application. I only want to use the  
>> Searchable.
>
> Implement the IndexReader API, overriding all of the abstract  
> methods. That will enable you to search your index using Lucene's  
> search code.

Aha, thanks.

Do I have to worry about passing a null Directory to the default  
constructor?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 17:40:41 2006
Return-Path: <java-user-return-20183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57566 invoked from network); 14 Apr 2006 17:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 17:40:37 -0000
Received: (qmail 6443 invoked by uid 500); 14 Apr 2006 17:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6421 invoked by uid 500); 14 Apr 2006 17:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6410 invoked by uid 99); 14 Apr 2006 17:40:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:40:20 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=RCVD_DOUBLE_IP_SPAM
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [208.253.57.99] (HELO uwamail.unitedway.org) (208.253.57.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Apr 2006 10:40:18 -0700
Received: from [10.100.8.1] by 10.100.8.99 with StormMail ESMTP id 14394.1575569382;
	Fri, 14 Apr 2006 13:22:02 -0400 (EDT)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Boosting Fields (in index) or Queries
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Date: Fri, 14 Apr 2006 13:39:56 -0400
Message-ID: <2911FD5311EEF04EABA7B8DAC518C1F60B9B11F4@uwamail.unitedway.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boosting Fields (in index) or Queries
Thread-Index: AcZf50MMO0zIosmcQeW/KbcBjwASmQAAsp0E
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com> <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com> <DD7662C3-20A8-4380-87C8-17AD5385BEB0@mac.com>
From: "Bryzek.Michael" <Michael.Bryzek@uwa.unitedway.org>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We tried two approaches:

  1) Pull data from the db in arbitrary order and then sort in the =
application  AFTER the retrieve. This will require two passes over the =
results.

  2) Add an order by clause to the select. In Oracle, you could do =
something like "order by decode(444,1,333,2,555,3,888,4,...)". This will =
force the order you want in the query from the db.

FWIW, after trying both of the above in production, we changed our =
strategy to avoid the db hit altogether, storing everything we needed =
for presentation within the Lucene index. We saw a net performance =
increase AND simpler code when we did this.

-Mike

-----Original Message-----
From:	Jeremy Hanna [mailto:jeremy_hanna@mac.com]
Sent:	Fri 4/14/06 1:15 PM
To:	java-user@lucene.apache.org
Cc:=09
Subject:	Re: Boosting Fields (in index) or Queries

Wow, I finally found out why I was getting results in the wrong order =20
- I got the results in the correct order from the Lucene index.  I =20
got the explanation of each of the results along with their database =20
id and found the ordering mismatch.
The problem is in the database call.  I am calling:

select * from product where id in (444, 333, 555, 888);

and the ordering that comes back is not preserved.  So the results =20
are correct but the ordering and hence all of the relevancy is out =20
the window.  So that at least leads me to the actual problem.  Now I =20
have to figure out how I'll approach reordering the results because I =20
don't believe that there's any way to force the ordering of a list =20
and I don't want to call a separate database query for each id (lots =20
of database round-trips).

Thanks for the help Erik!

On Apr 13, 2006, at 7:13 PM, Erik Hatcher wrote:

>
> On Apr 13, 2006, at 8:55 PM, Jeremy Hanna wrote:
>> Looking at the results, the first document in the results should =20
>> hopefully be near the bottom and the Explanation for this document =20
>> has a Description/Details (using the toString() on the =20
>> Explanation) of:
>>
>> product of:
>>   0.0 =3D sum of:
>>   0.0 =3D coord(0/7)
>>
>> So I'm kind of at a loss as to what's going on.  Am I just doing =20
>> something crazy weird in my code?  I didn't find that many =20
>> examples out there, so I'm kind of winging it according to what =20
>> I've read in the javadocs and what examples I could find.
>
> Be sure to pass the document id, not the hit number, to explain().  =20
> Looks like you passed an id of an unmatched document.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 17:42:30 2006
Return-Path: <java-user-return-20184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58543 invoked from network); 14 Apr 2006 17:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 17:42:30 -0000
Received: (qmail 10620 invoked by uid 500); 14 Apr 2006 17:42:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10590 invoked by uid 500); 14 Apr 2006 17:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10577 invoked by uid 99); 14 Apr 2006 17:42:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:42:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 10:42:24 -0700
Received: by pproxy.gmail.com with SMTP id m51so290072pye
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 10:42:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=c6VrPb2M5sFcmpvcIbCn0bDwXj8Fey7mpX/ic90iUTJ6auOi2eY41V9USNYpHZP2+OYSpDYGjbN1EM71wmVme7T77P9+iaDGaOgKSZEFcdSqmKZ+wjIgd/aHcFbm9LvEAIWuhnRZcMW3WBf0z4vX8BD9e/t7egW8mD9G6hMSC1w=
Received: by 10.35.34.18 with SMTP id m18mr1897677pyj;
        Fri, 14 Apr 2006 10:42:00 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Fri, 14 Apr 2006 10:42:00 -0700 (PDT)
Message-ID: <c68e39170604141042i4275683ag61808f55f2ae7f20@mail.gmail.com>
Date: Fri, 14 Apr 2006 13:42:00 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
In-Reply-To: <439444CE-7B85-40B6-A151-6B43B1E6BEAF@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net>
	 <443FCE53.9050707@apache.org>
	 <439444CE-7B85-40B6-A151-6B43B1E6BEAF@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/14/06, karl wettin <kalle@snigel.net> wrote:
> Do I have to worry about passing a null Directory to the default
> constructor?

That's not an easy road you are trying to take, but it should be doable.
There are some final methods you can't override, but just set
directoryOwner=3Dfalse and closeDirectory=3Dfalse, and that code shoudn't
touch the directory you set to null.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 18:05:47 2006
Return-Path: <java-user-return-20185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68665 invoked from network); 14 Apr 2006 18:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 18:05:46 -0000
Received: (qmail 49166 invoked by uid 500); 14 Apr 2006 18:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48677 invoked by uid 500); 14 Apr 2006 18:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48666 invoked by uid 99); 14 Apr 2006 18:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:05:40 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:05:40 -0700
Received: by pproxy.gmail.com with SMTP id m51so300421pye
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 11:05:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sFhnR1lhf/wLs/xqwrz750F3Szd02oH7KoNNYBYzs5lSYZ0sMCgO2A7qJJ6nuWIxVzYRjp7P4PSRXktT9D9fGsJed5KE2zrc5eZWIjH+REbsQLg0FJ/uOq6gZ46XJmjcVZ1Wv2cAHUN6wnfKhEiAL9XSu9qFO8bVsQS1Nl2qmYE=
Received: by 10.35.119.11 with SMTP id w11mr1040115pym;
        Fri, 14 Apr 2006 11:05:19 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Fri, 14 Apr 2006 11:05:19 -0700 (PDT)
Message-ID: <359a92830604141105p2d3faca9r5e32085e9dc9f682@mail.gmail.com>
Date: Fri, 14 Apr 2006 14:05:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <e465bf5d0604140857u148b8152gfca558d2f6f07857@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13217_30202203.1145037919403"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
	 <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
	 <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
	 <F7D8F7C8-ABE5-458D-938F-357B15AC621D@snigel.net>
	 <e465bf5d0604140857u148b8152gfca558d2f6f07857@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13217_30202203.1145037919403
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Something that took me a while to get was that the analyzer is important
BOTH in the indexing phase and in the searching phase (assuming you're usin=
g
the QueryParser). For you experiment, you probably want to use the
WhitespaceAnalyzer. See page 119 of "Lucene in Action".

The other three most-common analyzers divide text at nonletter characters,
which will do bad things to your path names.....

Also note that you can use the PerFieldAnalyzerWrapper to use, say, the
WhitespaceAnalyzer on the file-path field and other analyzers on other
fields, you're not locked into using the same analyzer for all fields.

Best
Erick


BTW, I really recommend a copy of "Lucene in Action"......

------=_Part_13217_30202203.1145037919403--

From java-user-return-20186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 18:16:44 2006
Return-Path: <java-user-return-20186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74353 invoked from network); 14 Apr 2006 18:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 18:16:33 -0000
Received: (qmail 70510 invoked by uid 500); 14 Apr 2006 18:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70486 invoked by uid 500); 14 Apr 2006 18:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70467 invoked by uid 99); 14 Apr 2006 18:15:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:15:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:15:57 -0700
Received: by xproxy.gmail.com with SMTP id i26so202694wxd
        for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 11:15:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yn4gDvmUShN6xKcrTDN+p/jHxzk71HSiJb60RKuo2xMI478QTRCMyblpqD/wfSx6bl9xpI2epkIsq4dC55Qw43yTLfmqR62nIRve0peBrfDa+M0Y3AZ4jFIgH/CBmYhSnKfn+87R1oE6sixkrqdaEUM+rI9v9G0+3RFjkKpI2iM=
Received: by 10.70.110.3 with SMTP id i3mr2366734wxc;
        Fri, 14 Apr 2006 11:15:36 -0700 (PDT)
Received: by 10.70.77.10 with HTTP; Fri, 14 Apr 2006 11:15:36 -0700 (PDT)
Message-ID: <e465bf5d0604141115j13eb00fau6b2320a8e1ef54d0@mail.gmail.com>
Date: Fri, 14 Apr 2006 14:15:36 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Syntax help
In-Reply-To: <359a92830604141105p2d3faca9r5e32085e9dc9f682@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_605_27129998.1145038536432"
References: <e465bf5d0604140737l26a230c2ga38c4becc6f6631c@mail.gmail.com>
	 <abe188f20604140743m2705a013k5714cc231c23c231@mail.gmail.com>
	 <e465bf5d0604140749y476715a9v3b1c4c64b878b980@mail.gmail.com>
	 <e465bf5d0604140811j305534e4ye4859d4f7ea8139e@mail.gmail.com>
	 <2D94A333-AF33-467E-9F6C-4C009B156FD5@snigel.net>
	 <F7D8F7C8-ABE5-458D-938F-357B15AC621D@snigel.net>
	 <e465bf5d0604140857u148b8152gfca558d2f6f07857@mail.gmail.com>
	 <359a92830604141105p2d3faca9r5e32085e9dc9f682@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_605_27129998.1145038536432
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 4/14/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Something that took me a while to get was that the analyzer is important
> BOTH in the indexing phase and in the searching phase (assuming you're
> using
> the QueryParser). For you experiment, you probably want to use the
> WhitespaceAnalyzer. See page 119 of "Lucene in Action".

The other three most-common analyzers divide text at nonletter characters,
> which will do bad things to your path names.....
>
> Also note that you can use the PerFieldAnalyzerWrapper to use, say, the
> WhitespaceAnalyzer on the file-path field and other analyzers on other
> fields, you're not locked into using the same analyzer for all fields.
>
> Best
> Erick
>
>
> BTW, I really recommend a copy of "Lucene in Action"......


PerFieldAnalyzerWrapper looks like what I want!

I've heard nothing but good things about the book and will have to pick it
up!

Thanks for the help everyone!

------=_Part_605_27129998.1145038536432--

From java-user-return-20187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 18:32:07 2006
Return-Path: <java-user-return-20187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86348 invoked from network); 14 Apr 2006 18:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 18:32:06 -0000
Received: (qmail 94641 invoked by uid 500); 14 Apr 2006 18:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94093 invoked by uid 500); 14 Apr 2006 18:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94080 invoked by uid 99); 14 Apr 2006 18:32:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:32:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.87] (HELO smtpout.mac.com) (17.250.248.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 11:31:59 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k3EIVatt005792
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 11:31:37 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k3EIVYqu024761
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 11:31:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <2911FD5311EEF04EABA7B8DAC518C1F60B9B11F4@uwamail.unitedway.org>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com> <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com> <DD7662C3-20A8-4380-87C8-17AD5385BEB0@mac.com> <2911FD5311EEF04EABA7B8DAC518C1F60B9B11F4@uwamail.unitedway.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5DF5DE32-C290-4679-A52F-D5032F59741B@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Fri, 14 Apr 2006 12:31:29 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would use a database function to force the ordering like the one  
your provided that works in Oracle, but it doesn't look like mysql 5  
supports that.  If anyone else knows of a way to force the ordering  
using mysql 5 queries, please respond.  I think I'll just resort them  
when they get back though.
Thanks!

On Apr 14, 2006, at 11:39 AM, Bryzek.Michael wrote:

> We tried two approaches:
>
>   1) Pull data from the db in arbitrary order and then sort in the  
> application  AFTER the retrieve. This will require two passes over  
> the results.
>
>   2) Add an order by clause to the select. In Oracle, you could do  
> something like "order by decode(444,1,333,2,555,3,888,4,...)". This  
> will force the order you want in the query from the db.
>
> FWIW, after trying both of the above in production, we changed our  
> strategy to avoid the db hit altogether, storing everything we  
> needed for presentation within the Lucene index. We saw a net  
> performance increase AND simpler code when we did this.
>
> -Mike
>
> -----Original Message-----
> From:	Jeremy Hanna [mailto:jeremy_hanna@mac.com]
> Sent:	Fri 4/14/06 1:15 PM
> To:	java-user@lucene.apache.org
> Cc:	
> Subject:	Re: Boosting Fields (in index) or Queries
>
> Wow, I finally found out why I was getting results in the wrong order
> - I got the results in the correct order from the Lucene index.  I
> got the explanation of each of the results along with their database
> id and found the ordering mismatch.
> The problem is in the database call.  I am calling:
>
> select * from product where id in (444, 333, 555, 888);
>
> and the ordering that comes back is not preserved.  So the results
> are correct but the ordering and hence all of the relevancy is out
> the window.  So that at least leads me to the actual problem.  Now I
> have to figure out how I'll approach reordering the results because I
> don't believe that there's any way to force the ordering of a list
> and I don't want to call a separate database query for each id (lots
> of database round-trips).
>
> Thanks for the help Erik!
>
> On Apr 13, 2006, at 7:13 PM, Erik Hatcher wrote:
>
>>
>> On Apr 13, 2006, at 8:55 PM, Jeremy Hanna wrote:
>>> Looking at the results, the first document in the results should
>>> hopefully be near the bottom and the Explanation for this document
>>> has a Description/Details (using the toString() on the
>>> Explanation) of:
>>>
>>> product of:
>>>   0.0 = sum of:
>>>   0.0 = coord(0/7)
>>>
>>> So I'm kind of at a loss as to what's going on.  Am I just doing
>>> something crazy weird in my code?  I didn't find that many
>>> examples out there, so I'm kind of winging it according to what
>>> I've read in the javadocs and what examples I could find.
>>
>> Be sure to pass the document id, not the hit number, to explain().
>> Looks like you passed an id of an unmatched document.
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 19:41:33 2006
Return-Path: <java-user-return-20188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16808 invoked from network); 14 Apr 2006 19:41:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 19:41:29 -0000
Received: (qmail 88647 invoked by uid 500); 14 Apr 2006 19:41:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88614 invoked by uid 500); 14 Apr 2006 19:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88603 invoked by uid 99); 14 Apr 2006 19:41:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 12:41:21 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 12:41:19 -0700
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net [207.115.4.147])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3EJetai003771
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 15:40:56 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout7-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3EJem8F020316;
	Fri, 14 Apr 2006 15:40:53 -0400
Message-ID: <443FFAC0.4000709@apache.org>
Date: Fri, 14 Apr 2006 12:40:48 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org> <439444CE-7B85-40B6-A151-6B43B1E6BEAF@snigel.net>
In-Reply-To: <439444CE-7B85-40B6-A151-6B43B1E6BEAF@snigel.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
> Do I have to worry about passing a null Directory to the default  
> constructor?

A null Directory should not cause you problems.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 19:43:37 2006
Return-Path: <java-user-return-20189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17479 invoked from network); 14 Apr 2006 19:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 19:43:34 -0000
Received: (qmail 91760 invoked by uid 500); 14 Apr 2006 19:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91729 invoked by uid 500); 14 Apr 2006 19:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91716 invoked by uid 99); 14 Apr 2006 19:43:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 12:43:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Apr 2006 12:43:27 -0700
Received: (qmail 2355 invoked from network); 14 Apr 2006 19:44:19 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.21.41.163)
  by ws6-1.us4.outblaze.com with SMTP; 14 Apr 2006 19:44:19 -0000
Message-ID: <443FFB4A.3070806@curtin.com>
Date: Fri, 14 Apr 2006 15:43:06 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Boosting Fields (in index) or Queries
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com> <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com> <DD7662C3-20A8-4380-87C8-17AD5385BEB0@mac.com> <2911FD5311EEF04EABA7B8DAC518C1F60B9B11F4@uwamail.unitedway.org> <5DF5DE32-C290-4679-A52F-D5032F59741B@mac.com>
In-Reply-To: <5DF5DE32-C290-4679-A52F-D5032F59741B@mac.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jeremy Hanna wrote:

> I would use a database function to force the ordering like the one  your 
> provided that works in Oracle, but it doesn't look like mysql 5  
> supports that.  If anyone else knows of a way to force the ordering  
> using mysql 5 queries, please respond.  I think I'll just resort them  
> when they get back though.

If there's nothing in the relational table that specifies the ordering, I'm 
afraid you've probably got similar problems in other places.  RDBMSes don't 
guarantee to return rows in the order they were INSERTed.  Sure, early in the 
life of a table that will tend to happen, but as DELETEs, then UPDATEs and new 
INSERTs get processed, the on-disk order tends to get pretty jumbled.  Note 
that I'm talking about anything that uses the results of your SELECT, not just 
your Lucene-related code.

If ordering of the rows is something your app needs, I recommend adding a 
column that is expressly for ordering.  A one-up integer or something like 
that.  I don't remember what the keyword in MySQL is for that, but I'm pretty 
sure there is one.  Then you can code all your SELECTs with an ORDER BY clause 
that does what you want.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 14 20:49:16 2006
Return-Path: <java-user-return-20190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50548 invoked from network); 14 Apr 2006 20:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Apr 2006 20:49:15 -0000
Received: (qmail 93572 invoked by uid 500); 14 Apr 2006 20:49:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93533 invoked by uid 500); 14 Apr 2006 20:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93521 invoked by uid 99); 14 Apr 2006 20:49:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 13:49:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.45] (HELO smtpout.mac.com) (17.250.248.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 13:49:08 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id k3EKmj2U011542
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 13:48:46 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k3EKmggv012925
	for <java-user@lucene.apache.org>; Fri, 14 Apr 2006 13:48:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <443FFB4A.3070806@curtin.com>
References: <FD3C153E-0DF4-4F0B-9F84-9588E0942529@mac.com> <A91E7AC7-BAF6-4E02-86FC-29AB488E274A@ehatchersolutions.com> <EA520C39-0CF4-489C-8B2F-E4C7BC9E598D@mac.com> <96DBA66E-4ED6-40A3-A779-4086BDE8005C@ehatchersolutions.com> <DD7662C3-20A8-4380-87C8-17AD5385BEB0@mac.com> <2911FD5311EEF04EABA7B8DAC518C1F60B9B11F4@uwamail.unitedway.org> <5DF5DE32-C290-4679-A52F-D5032F59741B@mac.com> <443FFB4A.3070806@curtin.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3C12E3AD-70A3-451F-BFA6-061B4EC4102C@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Boosting Fields (in index) or Queries
Date: Fri, 14 Apr 2006 14:48:37 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I still have a similar problem with the boost factor.  I change the  
name to have the AND operator and set that query's boost to a very  
high value in relation to the others.  I also have a regular OR based  
name so that it doesn't rule those out.  However whenever I change  
the boost values with the queries, nothing, absolutely nothing  
changes with the results.  Besides that - I search for: playstation  
game.  The only value that has both playstation and game in the name  
field is Hit number 20.  That's really why I put the name AND  
operator in there with such a high boost value, to see if it would  
bring that single ANDed record towards the top, but nothing.  Am I  
doing something wrong in all of this?  Am I doing the boost wrong or  
something?

On Apr 14, 2006, at 1:43 PM, Michael D. Curtin wrote:

> Jeremy Hanna wrote:
>
>> I would use a database function to force the ordering like the  
>> one  your provided that works in Oracle, but it doesn't look like  
>> mysql 5  supports that.  If anyone else knows of a way to force  
>> the ordering  using mysql 5 queries, please respond.  I think I'll  
>> just resort them  when they get back though.
>
> If there's nothing in the relational table that specifies the  
> ordering, I'm afraid you've probably got similar problems in other  
> places.  RDBMSes don't guarantee to return rows in the order they  
> were INSERTed.  Sure, early in the life of a table that will tend  
> to happen, but as DELETEs, then UPDATEs and new INSERTs get  
> processed, the on-disk order tends to get pretty jumbled.  Note  
> that I'm talking about anything that uses the results of your  
> SELECT, not just your Lucene-related code.
>
> If ordering of the rows is something your app needs, I recommend  
> adding a column that is expressly for ordering.  A one-up integer  
> or something like that.  I don't remember what the keyword in MySQL  
> is for that, but I'm pretty sure there is one.  Then you can code  
> all your SELECTs with an ORDER BY clause that does what you want.
>
> Good luck!
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 01:48:35 2006
Return-Path: <java-user-return-20191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50315 invoked from network); 15 Apr 2006 01:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 01:48:33 -0000
Received: (qmail 4963 invoked by uid 500); 15 Apr 2006 01:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4921 invoked by uid 500); 15 Apr 2006 01:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4909 invoked by uid 99); 15 Apr 2006 01:48:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 18:48:28 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 18:48:27 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FUZtP-0002xA-50
	for java-user@lucene.apache.org; Fri, 14 Apr 2006 18:48:07 -0700
Message-ID: <3925693.post@talk.nabble.com>
Date: Fri, 14 Apr 2006 18:36:29 -0700 (PDT)
From: Jeryl Cook <twoencore@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
In-Reply-To: <ad681e7f0604130919l710486f7y11b747ee56b6712f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: twoencore@hotmail.com
X-Nabble-From: Jeryl Cook <twoencore@hotmail.com>
References: <ad681e7f0604111419j34e0a433w6e5c04ea54c4c778@mail.gmail.com> <Pine.LNX.4.58.0604111517560.9140@hal.rescomp.berkeley.edu> <OF1F126187.FB480636-ONC225714E.002440B0-C225714E.00270FD3@il.ibm.com> <ad681e7f0604130833i1cec5119s443b1aca9b476930@mail.gmail.com> <ad681e7f0604130913s75cd72cby912c62073f4e8d07@mail.gmail.com> <E817F096B8D59B4E9D1E437917B1083107D19C@mshydpub1.hyd.deshaw.com> <ad681e7f0604130919l710486f7y11b747ee56b6712f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Im the co-worker who suggested to Ananth( I've think we have been debating
this for 3 days now,from the post it seems he is winning :)... )

Anway, as Ananth stated I suggested this because I am wondering if  lucene
could solve a bottle neck query that is taking a deathly long time to
complete(read-only)....and the orginal design actually generated a threaded
60+ queries on the database to return results per userThread who hit our
website for this view..., I know that this will kill our server when
user-load increases...i know that lucene is built for speed and can handle a
very large number of peopel searching(we are using singleton Searcher), and
the (threaded)results will be the "hits" returned from lucene.. , also this
query will NOT be executed by any user in a text field , but rather in our
application code only when user selects differnt parts of the site...if all
values in this 1:n relationship we are trying to query in lucene then the
"application-provided" query will return accurate results.  

we are using Quartz, and not creating threads in servlets...

FINAL SOLUTION MAYBE?:
if our client EVER gives us a requirement that says we must have accurate
text-searching even if somthing on our index for  1:  "Jason" and "Jason
Black" relationship, then we should just simply say we cannot implement this
because  lucene search will yield inaccurate results correct???????

comments?
--
View this message in context: http://www.nabble.com/Lucene-Seaches-VS.-Relational-database-Queries-t1434583.html#a3925693
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 05:01:38 2006
Return-Path: <java-user-return-20192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90146 invoked from network); 15 Apr 2006 05:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 05:01:37 -0000
Received: (qmail 75037 invoked by uid 500); 15 Apr 2006 05:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74963 invoked by uid 500); 15 Apr 2006 05:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74952 invoked by uid 99); 15 Apr 2006 05:01:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 22:01:30 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [144.140.92.155] (HELO omta03sl.mx.bigpond.com) (144.140.92.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Apr 2006 22:01:28 -0700
Received: from biggun ([58.168.134.149]) by omta03sl.mx.bigpond.com
          with ESMTP
          id <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun>
          for <java-user@lucene.apache.org>;
          Sat, 15 Apr 2006 05:01:05 +0000
From: <bb@incani.com>
To: <java-user@lucene.apache.org>
Subject: Catching BooleanQuery.TooManyClauses
Date: Sat, 15 Apr 2006 15:00:57 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcZgSZSxo/DLnfH6Q2a3mqkO3jpY7g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Lucene Users,

I would like to catch BooleanQuery.TooManyClauses exception for certain
wildcard searches and display a 'subset' of results.  I have used the
WildcardTermEnum to give me the first X documents matching the wildcard
query.  Below is the code I use to implement the solution.  

Without any performance concerns is this the best solution?
Or should I just tell the user to refine their query!?

Thanks

Ben

===== QueryParserTest.java ================================================ 
...
public class QueryParserTest extends LuceneTestCase {
	...
	private static int MAX_HITS = 10;
	public void testCatchTooManyClauses() throws Exception {
		reader = IndexReader.open(directory);
		String queryStr = "9*";
		String field = "PART_NBR";
		Hits hits = null;
		Vector docList;
		try {
			System.out.println("query: " + queryStr);
			System.out.println("field: " + field);
			hits =
searcher.search(parser.parse(field+":"+queryStr));
			docList = new Vector(hits.length());
			Iterator docListIt = hits.iterator();
			while(docListIt.hasNext())
	
docList.add(((Hit)docListIt.next()).getDocument());
		}
		catch(BooleanQuery.TooManyClauses ex) {
			System.out.println("catch
BooleanQuery.TooManyClauses, refining query");
			Term term = new Term(field, queryStr);

			WildcardTermEnum wte = new WildcardTermEnum(reader,
term);
			int cnt = 0;
			docList = new Vector(MAX_HITS);
			while(wte.next() && cnt++ < MAX_HITS) {
				term = wte.term();
				TermQuery query = new TermQuery(new
Term(field, term.text()));
				System.out.println("search for " +
query.getTerm().text());
				hits = searcher.search(query);
				Iterator docListIt = hits.iterator();
				while(docListIt.hasNext())
	
docList.add(((Hit)docListIt.next()).getDocument());
			}
		}
		System.out.println("found:" + docList.size());

	}
...
===== QueryParserTest.java ================================================ 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.4.1/312 - Release Date: 14/04/2006
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 07:01:30 2006
Return-Path: <java-user-return-20193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18764 invoked from network); 15 Apr 2006 07:01:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 07:01:30 -0000
Received: (qmail 8140 invoked by uid 500); 15 Apr 2006 07:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7560 invoked by uid 500); 15 Apr 2006 07:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7549 invoked by uid 99); 15 Apr 2006 07:01:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 00:01:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 00:01:19 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FUemA-0006ce-MO
	for java-user@lucene.apache.org; Sat, 15 Apr 2006 00:00:58 -0700
Message-ID: <3927354.post@talk.nabble.com>
Date: Sat, 15 Apr 2006 00:00:58 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: RE: Lucene Help
In-Reply-To: <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
References: <3896122.post@talk.nabble.com> <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
Thank you for your help, i just downloades the lucene-1.4.3 and i want to
run the demo file. if u dontmin please tell me how to run this demo file.

this demo folder contain one Org folder, Search.html & Search.jhtml files.

Thanking you,
Shajahan Shaik.
--
View this message in context: http://www.nabble.com/Lucene-Help-t1442764.html#a3927354
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 09:44:34 2006
Return-Path: <java-user-return-20194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60993 invoked from network); 15 Apr 2006 09:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 09:44:33 -0000
Received: (qmail 87172 invoked by uid 500); 15 Apr 2006 09:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87134 invoked by uid 500); 15 Apr 2006 09:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87123 invoked by uid 99); 15 Apr 2006 09:44:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 02:44:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 02:44:26 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3F9i5Zp096333
	for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 11:44:05 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene Seaches VS. Relational database Queries
Date: Sat, 15 Apr 2006 11:44:04 +0200
User-Agent: KMail/1.8.2
References: <ad681e7f0604111419j34e0a433w6e5c04ea54c4c778@mail.gmail.com> <ad681e7f0604130919l710486f7y11b747ee56b6712f@mail.gmail.com> <3925693.post@talk.nabble.com>
In-Reply-To: <3925693.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604151144.04830.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 15 April 2006 03:36, Jeryl Cook wrote:
> 
> Im the co-worker who suggested to Ananth( I've think we have been debating
> this for 3 days now,from the post it seems he is winning :)... )
> 
> Anway, as Ananth stated I suggested this because I am wondering if  lucene
> could solve a bottle neck query that is taking a deathly long time to
> complete(read-only)....and the orginal design actually generated a threaded
> 60+ queries on the database to return results per userThread who hit our
> website for this view..., I know that this will kill our server when
> user-load increases...i know that lucene is built for speed and can handle a
> very large number of peopel searching(we are using singleton Searcher), and

One way to have more queries per second with a singleton Searcher is
by merging the retrievals of documents for multiple queries.
This will increase query throughput (less disk head movement) but it will
also increase the response time for the individual queries.

> the (threaded)results will be the "hits" returned from lucene.. , also this
> query will NOT be executed by any user in a text field , but rather in our
> application code only when user selects differnt parts of the site...if all
> values in this 1:n relationship we are trying to query in lucene then the
> "application-provided" query will return accurate results.  

To follow 1:n relationships avoid using Hits, use your own HitCollector
instead. From application code, try and use TermDocs from the index
reader.
 
> we are using Quartz, and not creating threads in servlets...
> 
> FINAL SOLUTION MAYBE?:
> if our client EVER gives us a requirement that says we must have accurate
> text-searching even if somthing on our index for  1:  "Jason" and "Jason
> Black" relationship, then we should just simply say we cannot implement this
> because  lucene search will yield inaccurate results correct???????
> 
> comments?

Assuming I understand the problem correctly, one can solve this by
indexing such fields twice: once as keyword to search for the specific
individual, and once with indexed terms to search for name(s). 
In both fields one could use an extra word from a relational db,
for example a client id.

Regards,
Paul Elschot


> View this message in context: 
http://www.nabble.com/Lucene-Seaches-VS.-Relational-database-Queries-t1434583.html#a3925693
> Sent from the Lucene - Java Users forum at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 11:44:50 2006
Return-Path: <java-user-return-20195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 618 invoked from network); 15 Apr 2006 11:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 11:44:48 -0000
Received: (qmail 51673 invoked by uid 500); 15 Apr 2006 11:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51625 invoked by uid 500); 15 Apr 2006 11:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51614 invoked by uid 99); 15 Apr 2006 11:44:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 04:44:41 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 04:44:40 -0700
Received: by pproxy.gmail.com with SMTP id m51so647228pye
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 04:44:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OrSw6TwxfmL8MYoaQFaieSo7YQL3ILQeMbTPi1/t5wjFfrEXRrJ/b7dPOh5zx8LBKleO1iFq1IHIo2Bat0hoZh/kJpvWPP6ycAt8EWK8Uy9y9TtaU/gHqNLMa39A0KriqzIAFsYkOqXreNot/bPPPqvyo3QhA+LYxDFapZVWmhE=
Received: by 10.35.78.13 with SMTP id f13mr675591pyl;
        Sat, 15 Apr 2006 04:44:20 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 15 Apr 2006 04:44:20 -0700 (PDT)
Message-ID: <359a92830604150444w54f1345cl31600ea6cbc73b5a@mail.gmail.com>
Date: Sat, 15 Apr 2006 07:44:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Catching BooleanQuery.TooManyClauses
In-Reply-To: <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19362_10142308.1145101460301"
References: <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19362_10142308.1145101460301
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

With the warning that I'm not the most experienced Lucene user in the
world...

I *think*, that rather than search for each term, it's more efficient to
just use IndexReader.termDocs..... i.e.

Indexreader ir =3D <whatever>;
TermDocs termDocs =3D ir.TermDocs();
WildcardTermEnum wildEnum =3D <whatever>;

for (Term term =3D null; (term =3D wildEnum.term()) !=3D null; wildEnum.nex=
t()) {
      termDocs.seek(term);
      while (termDocs.next()) {
            Document doc =3D reader.document(termDocs.doc())
      }
}

I know that for loop looks odd, but I just peeked at the source code for th=
e
TermEnum classes and see why it works.

One warning, as the folks on the board have pointed out to me is that the
Hits object is not entirely efficient when you fetch lots of docs (more tha=
n
100 has been mentioned) and you should think about TopDocs or some such.

Also, if you can avoid fetching the document (i.e. get everything you want
from the index) you'll add efficiency. I have no clue how much you're
returning to the user, so I don't know whether that would work for you.....

Hope this helps
Erick

P.S. I feel kind of odd writing things like this given that Chris, Yonik,
Erik & etc. are looking over my shoulder, but if I actually offer good
advice, maybe I can save them some time since they've certainly helped me
out. And if they make alternate suggestions, they'll be doing code reviews
for me! Cool!!!!! <G>

------=_Part_19362_10142308.1145101460301--

From java-user-return-20196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 12:08:37 2006
Return-Path: <java-user-return-20196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5393 invoked from network); 15 Apr 2006 12:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 12:08:36 -0000
Received: (qmail 68210 invoked by uid 500); 15 Apr 2006 12:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68176 invoked by uid 500); 15 Apr 2006 12:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68160 invoked by uid 99); 15 Apr 2006 12:08:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 05:08:31 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 05:08:30 -0700
Received: by pproxy.gmail.com with SMTP id m51so655444pye
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 05:08:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I7+OA/zZj7YX8zX5YvVppWrEbsabsz5x5/38GEsKEWOf+CQ0T7lvN2BICykwcPvql1dix9dPVtFJYI7DdEDSXJ6J5lS9f2NJk465yGncmJxPjYS6N2nVOZ5WjT9sf0ksD0ot3vMKh6vn50XN8llDWaaoTxocZ4LZHsuVT6NFndc=
Received: by 10.35.131.4 with SMTP id i4mr220050pyn;
        Sat, 15 Apr 2006 05:08:09 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 15 Apr 2006 05:08:09 -0700 (PDT)
Message-ID: <359a92830604150508l1ab9dd91w89a5c2b2fa033e03@mail.gmail.com>
Date: Sat, 15 Apr 2006 08:08:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Help
In-Reply-To: <3927354.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19534_25613557.1145102889618"
References: <3896122.post@talk.nabble.com>
	 <3DDAD17D2B06D9449D5205F36047B6B6024DA3D1@mshyd2.hyd.deshaw.com>
	 <3927354.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19534_25613557.1145102889618
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

What I did was "create a project from existing source" in Eclipse (gave it
the path to the demo folder), imported the Lucene jar file and ran the
application. As far as I can tell, the only required library is the Lucene
jar file (I was using 1.9, but that shouldn't matter).

I freely admit that the things I don't know about building Java application
are many, but if you're building other Java applications, this should follo=
w
a familiar pattern and build easily in whatever your favorite development
environment is.

Best
Erick

------=_Part_19534_25613557.1145102889618--

From java-user-return-20197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 16:20:30 2006
Return-Path: <java-user-return-20197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94711 invoked from network); 15 Apr 2006 16:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 16:20:30 -0000
Received: (qmail 16699 invoked by uid 500); 15 Apr 2006 16:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16033 invoked by uid 500); 15 Apr 2006 16:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16022 invoked by uid 99); 15 Apr 2006 16:20:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:20:24 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wproxy.gmail.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:20:23 -0700
Received: by wproxy.gmail.com with SMTP id 55so891988wri
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 09:20:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DE0RAMFhml86n8IZ3hVPENVrMqhXcPhoMHzQqzbDrofZ2JoNkm0T75YMg3T4dCq3OLtnelVjmAB3cdVQR+mNQINFOJ4fMLfqFxcNZ1xrTzrQaXwtN4bgDolj43P4Gxs0Lqrc1ArBvGVRvjBKJ9V3zALLdhT31mZ5pNDWqFhAmp8=
Received: by 10.65.233.2 with SMTP id k2mr843855qbr;
        Sat, 15 Apr 2006 09:20:02 -0700 (PDT)
Received: by 10.65.214.4 with HTTP; Sat, 15 Apr 2006 09:20:02 -0700 (PDT)
Message-ID: <50f433360604150920s3ffd74dch1732f91cd4839726@mail.gmail.com>
Date: Sat, 15 Apr 2006 09:20:02 -0700
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Why is BooleanQuery.maxClauseCount static?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1165_14079694.1145118002513"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1165_14079694.1145118002513
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

What was the thinking behind making the BooleanQuery maxClauseCount a
static?  Or, I guess more to the point, why not an instance setting as well=
?

Not trying to point out a flaw, just curious about the original thinking
behind the setting.  I have a situation where I have a set of BooleanQuerie=
s
that use a high number of clauses, but another set that needs a low number
of clauses (different indexes searched, and efficiencies dictate the
high/low clause range.)


cheers,
jeff

------=_Part_1165_14079694.1145118002513--

From java-user-return-20198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 16:33:44 2006
Return-Path: <java-user-return-20198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99022 invoked from network); 15 Apr 2006 16:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 16:33:44 -0000
Received: (qmail 23028 invoked by uid 500); 15 Apr 2006 16:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22990 invoked by uid 500); 15 Apr 2006 16:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22979 invoked by uid 99); 15 Apr 2006 16:33:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:33:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.235.216.135] (HELO host35.ipowerweb.com) (66.235.216.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:33:38 -0700
Received: from [203.90.113.97] (helo=satish)
	by host35.ipowerweb.com with esmtp (Exim 4.52)
	id 1FUni6-00088a-Mv
	for java-user@lucene.apache.org; Sat, 15 Apr 2006 09:33:23 -0700
Reply-To: <satish@better-marketing.com>
From: "satish" <satish@better-marketing.com>
To: <java-user@lucene.apache.org>
Subject: We are looking for Lucene Developer in Pune-India
Date: Sat, 15 Apr 2006 22:03:11 +0530
Organization: Better Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <f13b62210604080123m4979d428md94ae62d0001768b@mail.gmail.com>
Thread-Index: AcZa5cGtO355l8hNQIitgfZ82lvkVAFw9vjg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Antivirus-Scanner: Clean mail though you should still use an Antivirus
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - host35.ipowerweb.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - better-marketing.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060415163339.4D65E10FB00A@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

We are looking forward to add Lucene/J2EE developer to our core engineering
team at Betterlabs, Pune India. Interested one can send your resume to
careers@betterlabs.net. 

Regards
Satish


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 16:49:34 2006
Return-Path: <java-user-return-20199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6653 invoked from network); 15 Apr 2006 16:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 16:49:34 -0000
Received: (qmail 35064 invoked by uid 500); 15 Apr 2006 16:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35036 invoked by uid 500); 15 Apr 2006 16:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35024 invoked by uid 99); 15 Apr 2006 16:49:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:49:28 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of puneet.lakhina@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wproxy.gmail.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:49:28 -0700
Received: by wproxy.gmail.com with SMTP id 55so898055wri
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 09:49:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ih5ej2WTOJVVpLx6G92CoNBZVBmip70TV3KVUYxul3ZsCtuucvrV2QC32ArVb7C7NpdMfbjlw7A99Bx7ltk0PmdfQYAvFaQ8X3kuTQvbBF+AtwbwWvg+UQPGzBfa7X1oCE+IPB7+qhNuCnqu4aDqPikx+F6xxRoaJuWg+xFlT4U=
Received: by 10.65.43.9 with SMTP id v9mr1350394qbj;
        Sat, 15 Apr 2006 09:49:07 -0700 (PDT)
Received: by 10.64.150.20 with HTTP; Sat, 15 Apr 2006 09:49:07 -0700 (PDT)
Message-ID: <ec1c47780604150949u37c5f634pac92750f81a014f0@mail.gmail.com>
Date: Sat, 15 Apr 2006 22:19:07 +0530
From: "Puneet Lakhina" <puneet.lakhina@gmail.com>
To: java-user@lucene.apache.org
Subject: java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41197_11419363.1145119747605"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_41197_11419363.1145119747605
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all,
I am very new to lucene. I am using it in my application to index and serac=
h
through text files. And my program is more or less similar to the demo
privided with lucene distribution.
Initially everything was working fine without any problems. But today while
running the application i have been getting this exception

java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock

whever i try to read or write to the index. I am unable to understand why
this is happening. IS there some mistake I am making in the code.. because =
I
havent changed any code, which was working smoothly up until today!!!

My version of lucene is 1.9.1

I deleted the index directory and tried again and voila now it works again!=
!
But if I am going to be delivering my application I would really like to
know why this was happening to guard against it..

Thanks
--
Puneet

------=_Part_41197_11419363.1145119747605--

From java-user-return-20200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 16:56:30 2006
Return-Path: <java-user-return-20200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10188 invoked from network); 15 Apr 2006 16:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 16:56:29 -0000
Received: (qmail 46648 invoked by uid 500); 15 Apr 2006 16:56:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46627 invoked by uid 500); 15 Apr 2006 16:56:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46616 invoked by uid 99); 15 Apr 2006 16:56:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:56:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 09:56:23 -0700
Received: by pproxy.gmail.com with SMTP id m51so755049pye
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 09:56:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qkiku9Gv4fZPJVGnwk+sBFqabOSDo83xxFIL/yHJ2fGXGDYNpZgyAbZRx6UMzK4etbSJCu3WqlNgylhKX2Ay9zgtfnEnXS6NZFmCkVQnPqkgS9vCh7pQgjGocj49HfC2cKuSBVXr2uFQDw4fW12M/T+XjE0Qm6liK6xtv6edFwY=
Received: by 10.35.60.15 with SMTP id n15mr776216pyk;
        Sat, 15 Apr 2006 09:56:03 -0700 (PDT)
Received: by 10.35.50.10 with HTTP; Sat, 15 Apr 2006 09:56:03 -0700 (PDT)
Message-ID: <f13b62210604150956p446cb789x39608bf8ac470794@mail.gmail.com>
Date: Sat, 15 Apr 2006 22:26:03 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
In-Reply-To: <ec1c47780604150949u37c5f634pac92750f81a014f0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17221_28342742.1145120163183"
References: <ec1c47780604150949u37c5f634pac92750f81a014f0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17221_28342742.1145120163183
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You are creating two IndexWriters on the same directory

I guess that is the reason for the problem and one holds the lock

Rgds
Prabhu


On 4/15/06, Puneet Lakhina <puneet.lakhina@gmail.com> wrote:
>
> Hi all,
> I am very new to lucene. I am using it in my application to index and
> serach
> through text files. And my program is more or less similar to the demo
> privided with lucene distribution.
> Initially everything was working fine without any problems. But today
> while
> running the application i have been getting this exception
>
> java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
> dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
>
> whever i try to read or write to the index. I am unable to understand why
> this is happening. IS there some mistake I am making in the code.. becaus=
e
> I
> havent changed any code, which was working smoothly up until today!!!
>
> My version of lucene is 1.9.1
>
> I deleted the index directory and tried again and voila now it works
> again!!
> But if I am going to be delivering my application I would really like to
> know why this was happening to guard against it..
>
> Thanks
> --
> Puneet
>
>

------=_Part_17221_28342742.1145120163183--

From java-user-return-20201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 17:23:47 2006
Return-Path: <java-user-return-20201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18914 invoked from network); 15 Apr 2006 17:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 17:23:47 -0000
Received: (qmail 59368 invoked by uid 500); 15 Apr 2006 17:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58361 invoked by uid 500); 15 Apr 2006 17:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58350 invoked by uid 99); 15 Apr 2006 17:23:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:23:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.174] (HELO hnexfe08.hetnet.nl) (195.121.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:23:41 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe08.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sat, 15 Apr 2006 19:23:17 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <443FCE53.9050707@apache.org>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <678FBE2D-7BDF-4609-ADF3-4B4BD2844BEB@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Sat, 15 Apr 2006 19:25:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 15 Apr 2006 17:23:17.0462 (UTC) FILETIME=[48DDEF60:01C660B1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


14 apr 2006 kl. 18.31 skrev Doug Cutting:

> karl wettin wrote:
>> I would like to store all in my application rather than using the   
>> Lucene persistency mechanism for tokens. I only want the search   
>> mechanism. I do not need the IndexReader and IndexWriter as that  
>> will  be a natural part of my application. I only want to use the  
>> Searchable.
>
> Implement the IndexReader API, overriding all of the abstract  
> methods. That will enable you to search your index using Lucene's  
> search code.

This was not even half as tough I thought it would be. I'm however  
not certain about a couple of methods:

1. TermPositions. It returns the next position of *what* in the  
document? It would make sence to me if it returned a start/end  
offset, but this just confuses me.

implements TermPositions {
         /** Returns next position in the current document.  It is an  
error to call
          this more than {@link #freq()} times
          without calling {@link #next()}<p> This is
          invalid until {@link #next()} is called for
          the first time.
          */
         public int nextPosition() throws IOException {
             return 0; // todo
         }


2. Norms. I've been looking in other code, but I honestly don't  
understand what data they are storing, thus it's really hard for me  
to implement :-) I read it as it contains the boost of each document  
per field? So what does the byte represent then?

          /** Returns the byte-encoded normalization factor for the  
named field of
          * every document.  This is used by the search code to score  
documents.
          * @see org.apache.lucene.document.Field#setBoost(float)
          */
         public byte[] norms(String field) {
            return null; // todo
         }

         /** Reads the byte-encoded normalization factor for the  
named field of every
          *  document.  This is used by the search code to score  
documents.
          * @see org.apache.lucene.document.Field#setBoost(float)
          */
         public void norms(String field, byte[] bytes, int offset)  
throws IOException {
             // todo
         }

         /** Implements setNorm in subclass.*/
         protected void doSetNorm(int doc, String field, byte value)  
throws IOException {
             // todo
         }

3. I presume I can just ignore the following methods:

         /** Implements deletion of the document numbered  
<code>docNum</code>.
          * Applications should call {@link #delete(int)} or {@link  
#delete(org.apache.lucene.index.Term)}.
          */
         protected void doDelete(int docNum) {

         }

         /** Implements actual undeleteAll() in subclass. */
         protected void doUndeleteAll() {

         }

         /** Implements commit. */
         protected void doCommit() {

         }

         /** Implements close. */
         protected void doClose() {

         }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 17:43:20 2006
Return-Path: <java-user-return-20202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24897 invoked from network); 15 Apr 2006 17:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 17:43:20 -0000
Received: (qmail 65844 invoked by uid 500); 15 Apr 2006 17:43:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65822 invoked by uid 500); 15 Apr 2006 17:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65811 invoked by uid 99); 15 Apr 2006 17:43:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:43:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:43:14 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sat, 15 Apr 2006 19:42:52 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <f13b62210604150956p446cb789x39608bf8ac470794@mail.gmail.com>
References: <ec1c47780604150949u37c5f634pac92750f81a014f0@mail.gmail.com> <f13b62210604150956p446cb789x39608bf8ac470794@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F6BE8824-C6FF-47C4-B557-2AD5D030942B@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
Date: Sat, 15 Apr 2006 19:45:11 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 15 Apr 2006 17:42:52.0227 (UTC) FILETIME=[0514D930:01C660B4]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could it just be that the application was not shut down properly? If  
you dare, check for locks and remove them when you start your  
application.

Note that both IndexReader and IndexWriter can produce a write-lock.

15 apr 2006 kl. 18.56 skrev Raghavendra Prabhu:

> You are creating two IndexWriters on the same directory
>
> I guess that is the reason for the problem and one holds the lock
>
> Rgds
> Prabhu
>
>
> On 4/15/06, Puneet Lakhina <puneet.lakhina@gmail.com> wrote:
>>
>> Hi all,
>> I am very new to lucene. I am using it in my application to index and
>> serach
>> through text files. And my program is more or less similar to the  
>> demo
>> privided with lucene distribution.
>> Initially everything was working fine without any problems. But today
>> while
>> running the application i have been getting this exception
>>
>> java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
>> dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
>>
>> whever i try to read or write to the index. I am unable to  
>> understand why
>> this is happening. IS there some mistake I am making in the code..  
>> because
>> I
>> havent changed any code, which was working smoothly up until today!!!
>>
>> My version of lucene is 1.9.1
>>
>> I deleted the index directory and tried again and voila now it works
>> again!!
>> But if I am going to be delivering my application I would really  
>> like to
>> know why this was happening to guard against it..
>>
>> Thanks
>> --
>> Puneet
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 17:49:35 2006
Return-Path: <java-user-return-20203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26181 invoked from network); 15 Apr 2006 17:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 17:49:34 -0000
Received: (qmail 69609 invoked by uid 500); 15 Apr 2006 17:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69246 invoked by uid 500); 15 Apr 2006 17:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69235 invoked by uid 99); 15 Apr 2006 17:49:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:49:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 10:49:29 -0700
Received: by pproxy.gmail.com with SMTP id m51so771648pye
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 10:49:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SMYJuyuL1vEJKZ+IyIlnQLx6fmk12X+q8xfzPlLYBw7oBNG/kRYLmlgldh3EBRT0T977+iM5hHOPFpgg0trrJ1Zc8KEUL4EHPKqh3erP1hlinHoNMSSotwIWnilmvSWl3heqNrlNJR9Kz8UZlgiKOk+GjLGQlMuOIdBxfo/jXaU=
Received: by 10.35.121.2 with SMTP id y2mr2261734pym;
        Sat, 15 Apr 2006 10:49:07 -0700 (PDT)
Received: by 10.35.50.10 with HTTP; Sat, 15 Apr 2006 10:49:07 -0700 (PDT)
Message-ID: <f13b62210604151049k775a3a3bw684490eebb850051@mail.gmail.com>
Date: Sat, 15 Apr 2006 23:19:07 +0530
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
In-Reply-To: <F6BE8824-C6FF-47C4-B557-2AD5D030942B@snigel.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17421_3096142.1145123347816"
References: <ec1c47780604150949u37c5f634pac92750f81a014f0@mail.gmail.com>
	 <f13b62210604150956p446cb789x39608bf8ac470794@mail.gmail.com>
	 <F6BE8824-C6FF-47C4-B557-2AD5D030942B@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17421_3096142.1145123347816
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Deleting the lock file when you startup the application sounds like a
workaround to the issue.

But still then lucene should have removed it if the close operations for
both the IndexReader and IndexWriter had been called properly

As karl wettin said maybe the application is not closed properly leading to
persistence of lock files

Rgds
PRabhu


On 4/15/06, karl wettin <kalle@snigel.net> wrote:
>
> Could it just be that the application was not shut down properly? If
> you dare, check for locks and remove them when you start your
> application.
>
> Note that both IndexReader and IndexWriter can produce a write-lock.
>
> 15 apr 2006 kl. 18.56 skrev Raghavendra Prabhu:
>
> > You are creating two IndexWriters on the same directory
> >
> > I guess that is the reason for the problem and one holds the lock
> >
> > Rgds
> > Prabhu
> >
> >
> > On 4/15/06, Puneet Lakhina <puneet.lakhina@gmail.com> wrote:
> >>
> >> Hi all,
> >> I am very new to lucene. I am using it in my application to index and
> >> serach
> >> through text files. And my program is more or less similar to the
> >> demo
> >> privided with lucene distribution.
> >> Initially everything was working fine without any problems. But today
> >> while
> >> running the application i have been getting this exception
> >>
> >> java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
> >> dcc982e203ef1d2aebb5d8a4b55b3a60-write.lock
> >>
> >> whever i try to read or write to the index. I am unable to
> >> understand why
> >> this is happening. IS there some mistake I am making in the code..
> >> because
> >> I
> >> havent changed any code, which was working smoothly up until today!!!
> >>
> >> My version of lucene is 1.9.1
> >>
> >> I deleted the index directory and tried again and voila now it works
> >> again!!
> >> But if I am going to be delivering my application I would really
> >> like to
> >> know why this was happening to guard against it..
> >>
> >> Thanks
> >> --
> >> Puneet
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17421_3096142.1145123347816--

From java-user-return-20204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 19:13:40 2006
Return-Path: <java-user-return-20204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49137 invoked from network); 15 Apr 2006 19:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 19:13:39 -0000
Received: (qmail 6017 invoked by uid 500); 15 Apr 2006 19:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5993 invoked by uid 500); 15 Apr 2006 19:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5977 invoked by uid 99); 15 Apr 2006 19:13:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:13:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:13:34 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3FJDCXD016601
	for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 21:13:13 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Catching BooleanQuery.TooManyClauses
Date: Sat, 15 Apr 2006 21:13:11 +0200
User-Agent: KMail/1.8.2
References: <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun> <359a92830604150444w54f1345cl31600ea6cbc73b5a@mail.gmail.com>
In-Reply-To: <359a92830604150444w54f1345cl31600ea6cbc73b5a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604152113.12183.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 15 April 2006 13:44, Erick Erickson wrote:
> With the warning that I'm not the most experienced Lucene user in the
> world...
> 
> I *think*, that rather than search for each term, it's more efficient to
> just use IndexReader.termDocs..... i.e.
> 
> Indexreader ir = <whatever>;
> TermDocs termDocs = ir.TermDocs();
> WildcardTermEnum wildEnum = <whatever>;
> 
> for (Term term = null; (term = wildEnum.term()) != null; wildEnum.next()) {
>       termDocs.seek(term);

This avoids the buffer space needed for each TermDocs by using each term
separately. A BooleanQuery over all the terms will use the termDocs.next() and
termDocs.doc() for all terms at the same time. It has to, because more terms
might match each document and it has to compute the query score for each
document.

>       while (termDocs.next()) {
>             Document doc = reader.document(termDocs.doc())

The methods termDocs.next() and reader.document()
go to different places in the Lucene index (see the index format),
so this will send the disk head up and down.
It's better to collect the termDocs.doc() values first,  for example in a
BitSet, and then retrieve the Document's in numerical order.
Btw., this is what the ConstantScoreRangeQuery does to avoid using all terms
at the same time.

>       }
> }
> 
> I know that for loop looks odd, but I just peeked at the source code for the
> TermEnum classes and see why it works.
> 
> One warning, as the folks on the board have pointed out to me is that the
> Hits object is not entirely efficient when you fetch lots of docs (more than
> 100 has been mentioned) and you should think about TopDocs or some such.
> 
> Also, if you can avoid fetching the document (i.e. get everything you want
> from the index) you'll add efficiency. I have no clue how much you're
> returning to the user, so I don't know whether that would work for you.....

In other words, one can use the above BitSet in a Filter lateron
during an IndexSearcher.search() (or in a ConstantScoreQuery),
and use Hits or TopDocs for document retrieval.

Regards,
Paul Elschot.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 19:24:10 2006
Return-Path: <java-user-return-20205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58687 invoked from network); 15 Apr 2006 19:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 19:24:09 -0000
Received: (qmail 11249 invoked by uid 500); 15 Apr 2006 19:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11216 invoked by uid 500); 15 Apr 2006 19:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11205 invoked by uid 99); 15 Apr 2006 19:24:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:24:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:24:04 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3FJNhxh088466
	for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 21:23:43 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Why is BooleanQuery.maxClauseCount static?
Date: Sat, 15 Apr 2006 21:23:42 +0200
User-Agent: KMail/1.8.2
References: <50f433360604150920s3ffd74dch1732f91cd4839726@mail.gmail.com>
In-Reply-To: <50f433360604150920s3ffd74dch1732f91cd4839726@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604152123.42575.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 15 April 2006 18:20, Jeff Rodenburg wrote:
> What was the thinking behind making the BooleanQuery maxClauseCount a
> static?  Or, I guess more to the point, why not an instance setting as well?
> 
> Not trying to point out a flaw, just curious about the original thinking
> behind the setting.  I have a situation where I have a set of BooleanQueries
> that use a high number of clauses, but another set that needs a low number
> of clauses (different indexes searched, and efficiencies dictate the
> high/low clause range.)

The reason is to have simplicity in dealing with the case of a single
BooleanQuery using many terms. This was done to avoid spurious
OutOfMemory problems for queries that happen to expand to a lot
of terms, and for that it works well.

With nested BooleanQuerys it wouldn't even make sence to have an
instance setting, because in that case the maximum number of clauses
should be associated with the top level query only.

Regards,
Paul Elschot.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 19:32:46 2006
Return-Path: <java-user-return-20206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63362 invoked from network); 15 Apr 2006 19:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 19:32:46 -0000
Received: (qmail 18592 invoked by uid 500); 15 Apr 2006 19:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18565 invoked by uid 500); 15 Apr 2006 19:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18554 invoked by uid 99); 15 Apr 2006 19:32:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:32:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 12:32:40 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3FJWIPw003720
	for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 21:32:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Sat, 15 Apr 2006 21:32:18 +0200
User-Agent: KMail/1.8.2
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org> <678FBE2D-7BDF-4609-ADF3-4B4BD2844BEB@snigel.net>
In-Reply-To: <678FBE2D-7BDF-4609-ADF3-4B4BD2844BEB@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604152132.18437.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 15 April 2006 19:25, karl wettin wrote:
> 
> 14 apr 2006 kl. 18.31 skrev Doug Cutting:
> 
> > karl wettin wrote:
> >> I would like to store all in my application rather than using the   
> >> Lucene persistency mechanism for tokens. I only want the search   
> >> mechanism. I do not need the IndexReader and IndexWriter as that  
> >> will  be a natural part of my application. I only want to use the  
> >> Searchable.
> >
> > Implement the IndexReader API, overriding all of the abstract  
> > methods. That will enable you to search your index using Lucene's  
> > search code.
> 
> This was not even half as tough I thought it would be. I'm however  
> not certain about a couple of methods:
> 
> 1. TermPositions. It returns the next position of *what* in the  
> document? It would make sence to me if it returned a start/end  
> offset, but this just confuses me.
> 
> implements TermPositions {
>          /** Returns next position in the current document.  It is an  
> error to call
>           this more than {@link #freq()} times
>           without calling {@link #next()}<p> This is
>           invalid until {@link #next()} is called for
>           the first time.
>           */
>          public int nextPosition() throws IOException {
>              return 0; // todo
>          }

This enumerates all positions of the Term in the document
as returned by the Tokenizer used by the Analyzer (as normally
used by IndexWriter). The Tokenizer provides all terms as
analyzed, but here only the position of one term are enumerated.
Btw. this is why the index is called an inverted term index.

> 
> 
> 2. Norms. I've been looking in other code, but I honestly don't  
> understand what data they are storing, thus it's really hard for me  
> to implement :-) I read it as it contains the boost of each document  
> per field? So what does the byte represent then?

What is stored is a byte representing the inverse of the number of
indexed terms in a field of a document, as returned by a Tokenizer.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 20:18:40 2006
Return-Path: <java-user-return-20207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72194 invoked from network); 15 Apr 2006 20:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 20:18:40 -0000
Received: (qmail 35899 invoked by uid 500); 15 Apr 2006 20:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35825 invoked by uid 500); 15 Apr 2006 20:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35814 invoked by uid 99); 15 Apr 2006 20:18:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 13:18:35 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 13:18:34 -0700
Received: by pproxy.gmail.com with SMTP id m51so821950pye
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 13:18:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=urXCwNJ3ry2l0u7w4OU+H6KIEGmi6gqTWvAg2cFonBxAcRI8b9lTj5MNBjsQDghjAFKwH7JYcuSN6dC5C0SXIDNxR3a5Mo/a5ZG4ejDhv4VJDUe/7yL9N4plSxwWKNSHkRKu1eNZUsz0x51sEdWCEix1YV1YMW3rdYExKv2xx9Y=
Received: by 10.35.37.18 with SMTP id p18mr1461638pyj;
        Sat, 15 Apr 2006 13:18:14 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Sat, 15 Apr 2006 13:18:14 -0700 (PDT)
Message-ID: <359a92830604151318x12ec1691w9683571448a6df93@mail.gmail.com>
Date: Sat, 15 Apr 2006 16:18:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Catching BooleanQuery.TooManyClauses
In-Reply-To: <200604152113.12183.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22583_25996030.1145132294227"
References: <20060415050105.NUGQ1358.omta03sl.mx.bigpond.com@biggun>
	 <359a92830604150444w54f1345cl31600ea6cbc73b5a@mail.gmail.com>
	 <200604152113.12183.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22583_25996030.1145132294227
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Cool, thanks for the clarification...

Erick

------=_Part_22583_25996030.1145132294227--

From java-user-return-20208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 15 20:20:07 2006
Return-Path: <java-user-return-20208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72566 invoked from network); 15 Apr 2006 20:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Apr 2006 20:20:06 -0000
Received: (qmail 39009 invoked by uid 500); 15 Apr 2006 20:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38696 invoked by uid 500); 15 Apr 2006 20:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38685 invoked by uid 99); 15 Apr 2006 20:20:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 13:20:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wproxy.gmail.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Apr 2006 13:20:00 -0700
Received: by wproxy.gmail.com with SMTP id 55so944376wri
        for <java-user@lucene.apache.org>; Sat, 15 Apr 2006 13:19:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bXb3ARa7onXy6XC2zmhtbDNsWxJIvhOzEx3y/iaAOM1TllWnR70cIe0/ugCHgqulGinw9Y4yHa60+J/MiYeEsw3a1mgIkj0cK2IaHmNeJJXHEDMwSMcyIu7/uz+j89RexBsDB4EFeC0nldKJP4HjmwVjcaOX34o56OlmHhRAEKs=
Received: by 10.65.210.20 with SMTP id m20mr528364qbq;
        Sat, 15 Apr 2006 13:19:39 -0700 (PDT)
Received: by 10.65.214.4 with HTTP; Sat, 15 Apr 2006 13:19:39 -0700 (PDT)
Message-ID: <50f433360604151319w35012f12t819a47580883e8c8@mail.gmail.com>
Date: Sat, 15 Apr 2006 13:19:39 -0700
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is BooleanQuery.maxClauseCount static?
In-Reply-To: <200604152123.42575.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2421_27220383.1145132379909"
References: <50f433360604150920s3ffd74dch1732f91cd4839726@mail.gmail.com>
	 <200604152123.42575.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2421_27220383.1145132379909
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks Paul.  In my case, I don't have nested queries but rather separate
queries running against different indexes -- some with very high clause
counts, and some with very low clause counts.  These are executing in a web
environment with the same memory space and process, so concurrency can
sometimes cause problems when both types of queries need to execute
simultaneously.

-- j

On 4/15/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Saturday 15 April 2006 18:20, Jeff Rodenburg wrote:
> > What was the thinking behind making the BooleanQuery maxClauseCount a
> > static?  Or, I guess more to the point, why not an instance setting as
> well?
> >
> > Not trying to point out a flaw, just curious about the original thinkin=
g
> > behind the setting.  I have a situation where I have a set of
> BooleanQueries
> > that use a high number of clauses, but another set that needs a low
> number
> > of clauses (different indexes searched, and efficiencies dictate the
> > high/low clause range.)
>
> The reason is to have simplicity in dealing with the case of a single
> BooleanQuery using many terms. This was done to avoid spurious
> OutOfMemory problems for queries that happen to expand to a lot
> of terms, and for that it works well.
>
> With nested BooleanQuerys it wouldn't even make sence to have an
> instance setting, because in that case the maximum number of clauses
> should be associated with the top level query only.
>
> Regards,
> Paul Elschot.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2421_27220383.1145132379909--

From java-user-return-20209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 12:53:39 2006
Return-Path: <java-user-return-20209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44678 invoked from network); 16 Apr 2006 12:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 12:53:39 -0000
Received: (qmail 92606 invoked by uid 500); 16 Apr 2006 12:53:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92579 invoked by uid 500); 16 Apr 2006 12:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92568 invoked by uid 99); 16 Apr 2006 12:53:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 05:53:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 05:53:31 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FV6kZ-0005Xz-4l
	for java-user@lucene.apache.org; Sun, 16 Apr 2006 05:53:11 -0700
Message-ID: <3939235.post@talk.nabble.com>
Date: Sun, 16 Apr 2006 05:53:11 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: demo example
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
any one tell me how to install and run the lucene-1.4.3 demo and
lucene-1.9.1-src demo.
--
View this message in context: http://www.nabble.com/demo-example-t1457642.html#a3939235
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 14:05:18 2006
Return-Path: <java-user-return-20210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66376 invoked from network); 16 Apr 2006 14:05:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 14:05:17 -0000
Received: (qmail 34271 invoked by uid 500); 16 Apr 2006 14:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34246 invoked by uid 500); 16 Apr 2006 14:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34235 invoked by uid 99); 16 Apr 2006 14:05:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 07:05:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 07:05:11 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FV7ru-00062g-RY
	for java-user@lucene.apache.org; Sun, 16 Apr 2006 07:04:50 -0700
Message-ID: <3939711.post@talk.nabble.com>
Date: Sun, 16 Apr 2006 07:04:50 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: search pdf
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
can i use Lucene for searching text in PDF.


--
View this message in context: http://www.nabble.com/search-pdf-t1457831.html#a3939711
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 14:20:48 2006
Return-Path: <java-user-return-20211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69135 invoked from network); 16 Apr 2006 14:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 14:20:48 -0000
Received: (qmail 42019 invoked by uid 500); 16 Apr 2006 14:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41987 invoked by uid 500); 16 Apr 2006 14:20:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41969 invoked by uid 99); 16 Apr 2006 14:20:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 07:20:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.198] (HELO smtp808.mail.ukl.yahoo.com) (217.12.12.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Apr 2006 07:20:41 -0700
Received: (qmail 3558 invoked from network); 16 Apr 2006 14:20:19 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@86.132.165.11 with login)
  by smtp808.mail.ukl.yahoo.com with SMTP; 16 Apr 2006 14:20:19 -0000
Message-ID: <000901c66160$e4b96db0$0401a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <3939711.post@talk.nabble.com>
Subject: Re: search pdf
Date: Sun, 16 Apr 2006 15:20:20 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
You have to parse/index the PDF files and then you can search  the index 
with Lucene.
Have a look at Lucene in Action and the source code which comes with 
it.There is a good demo which parses common formats such as PDF,Word XML 
etc.
Cheers,
MC 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 14:22:33 2006
Return-Path: <java-user-return-20212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70319 invoked from network); 16 Apr 2006 14:22:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 14:22:32 -0000
Received: (qmail 45906 invoked by uid 500); 16 Apr 2006 14:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45876 invoked by uid 500); 16 Apr 2006 14:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45865 invoked by uid 99); 16 Apr 2006 14:22:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 07:22:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 07:22:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5A36333C0FD; Sun, 16 Apr 2006 10:22:05 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 786A033C0FD
	for <java-user@lucene.apache.org>; Sun, 16 Apr 2006 10:22:04 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <3939711.post@talk.nabble.com>
References: <3939711.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <00350F5F-DE2B-4215-89BD-D134C0F91E2E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search pdf
Date: Sun, 16 Apr 2006 10:22:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 16, 2006, at 10:04 AM, Shajahan wrote:
> can i use Lucene for searching text in PDF.
>

Yes, indirectly.  The PDF must be parsed into the text to be indexed  
first.  PDFBox does this nicely.  Check the Lucene in Action codebase  
for examples.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 15:03:42 2006
Return-Path: <java-user-return-20213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85407 invoked from network); 16 Apr 2006 15:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 15:03:42 -0000
Received: (qmail 72406 invoked by uid 500); 16 Apr 2006 15:03:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71927 invoked by uid 500); 16 Apr 2006 15:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71916 invoked by uid 99); 16 Apr 2006 15:03:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 08:03:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 08:03:36 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FV8mR-0005tG-8x
	for java-user@lucene.apache.org; Sun, 16 Apr 2006 08:03:15 -0700
Message-ID: <3940183.post@talk.nabble.com>
Date: Sun, 16 Apr 2006 08:03:15 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: search pdf
In-Reply-To: <000901c66160$e4b96db0$0401a8c0@MalcolmPC>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
References: <3939711.post@talk.nabble.com> <000901c66160$e4b96db0$0401a8c0@MalcolmPC>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
Thank you for your replay.i am new to this Lucene & PDF. if u dontmin please
tell me where i can get the demo file. please give me the URL.

and please tell me the Instaletion of that Lucene

Thankingyor,
Shajahan
--
View this message in context: http://www.nabble.com/search-pdf-t1457831.html#a3940183
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 17:17:12 2006
Return-Path: <java-user-return-20214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24412 invoked from network); 16 Apr 2006 17:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 17:17:11 -0000
Received: (qmail 44629 invoked by uid 500); 16 Apr 2006 17:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44604 invoked by uid 500); 16 Apr 2006 17:17:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44593 invoked by uid 99); 16 Apr 2006 17:17:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 10:17:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 10:17:05 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sun, 16 Apr 2006 19:16:44 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <200604152132.18437.paul.elschot@xs4all.nl>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org> <678FBE2D-7BDF-4609-ADF3-4B4BD2844BEB@snigel.net> <200604152132.18437.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <230F88BC-DC49-4128-9303-DE2FE4E2FED8@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Sun, 16 Apr 2006 19:18:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 16 Apr 2006 17:16:44.0103 (UTC) FILETIME=[88D1DD70:01C66179]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


15 apr 2006 kl. 21.32 skrev Paul Elschot:
>>
>> implements TermPositions {
>>          public int nextPosition() throws IOException {
>
> This enumerates all positions of the Term in the document
> as returned by the Tokenizer used by the Analyzer

Aha. And I didn't see the TermPositionVector until now.

This leads me to a new question. How is multiple fields with the same  
name treated? Are the positions concated or in a "z-axis"? I see  
SpanQuery-troubles with both.

Concated renders SpanFirst unusable on fields n > 0
	[hello,0] [world,1] [foo,2] [bar,3]

"Z-axis" mess up SpanNear, as "hello bar" is correct.
	[hello,0] [world,1]
	[foo,0] [bar,1]

Hmm.. (with double semantics, as this would mean I can't use the term  
positions to train my hidden markov models).

Thanks for explaining!

For any interested party, I do this because I have a fairly small  
corpus with very heavy load. I think there is a lot to win by not  
creating new instances of what not, seeking in the file-centric  
Directory, parsing pseudo-UTF8, et.c. at query time. I simply store  
all instance of everything (the index in a bunch of Lists and Maps.  
Bits are cheaper than ticks. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 18:05:08 2006
Return-Path: <java-user-return-20215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46317 invoked from network); 16 Apr 2006 18:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 18:05:08 -0000
Received: (qmail 73408 invoked by uid 500); 16 Apr 2006 18:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73378 invoked by uid 500); 16 Apr 2006 18:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73367 invoked by uid 99); 16 Apr 2006 18:05:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 11:05:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.177] (HELO hnexfe11.hetnet.nl) (195.121.6.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 11:05:01 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe11.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sun, 16 Apr 2006 20:04:37 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <3940183.post@talk.nabble.com>
References: <3939711.post@talk.nabble.com> <000901c66160$e4b96db0$0401a8c0@MalcolmPC> <3940183.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <622E87E0-1849-4D6A-8705-6107F441501C@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: search pdf
Date: Sun, 16 Apr 2006 20:06:55 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 16 Apr 2006 18:04:37.0282 (UTC) FILETIME=[395E3020:01C66180]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


16 apr 2006 kl. 17.03 skrev Shajahan:

> Thank you for your replay.i am new to this Lucene & PDF. if u  
> dontmin please
> tell me where i can get the demo file. please give me the URL.

http://lucenebook.com/

> and please tell me the Instaletion of that Lucene

I'm not sure I understand your question. How to install Lucene?  
Lucene is not something you install and run. It is an API and you  
have to do a bit of coding in order for Lucene to do something.  
Perhaps Egothor (another open search engine written in Java) suits  
better if you just want it working out of the box.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 18:33:57 2006
Return-Path: <java-user-return-20216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56078 invoked from network); 16 Apr 2006 18:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 18:33:57 -0000
Received: (qmail 82862 invoked by uid 500); 16 Apr 2006 18:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82831 invoked by uid 500); 16 Apr 2006 18:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82819 invoked by uid 99); 16 Apr 2006 18:33:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 11:33:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.196] (HELO smtp806.mail.ukl.yahoo.com) (217.12.12.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Apr 2006 11:33:50 -0700
Received: (qmail 91743 invoked from network); 16 Apr 2006 18:33:29 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@81.154.106.198 with login)
  by smtp806.mail.ukl.yahoo.com with SMTP; 16 Apr 2006 18:33:29 -0000
Message-ID: <001d01c66184$422ab3f0$0401a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <3939711.post@talk.nabble.com> <000901c66160$e4b96db0$0401a8c0@MalcolmPC> <3940183.post@talk.nabble.com>
Subject: Re: search pdf
Date: Sun, 16 Apr 2006 19:33:29 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

URL for all the source code:

http://www.lucenebook.com/LuceneInAction.zip

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 16 23:04:10 2006
Return-Path: <java-user-return-20217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35758 invoked from network); 16 Apr 2006 23:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Apr 2006 23:04:10 -0000
Received: (qmail 5497 invoked by uid 500); 16 Apr 2006 23:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5465 invoked by uid 500); 16 Apr 2006 23:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5454 invoked by uid 99); 16 Apr 2006 23:03:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 16:03:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 16:03:54 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3GN3WIP074449
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 01:03:32 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Mon, 17 Apr 2006 01:03:30 +0200
User-Agent: KMail/1.8.2
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <200604152132.18437.paul.elschot@xs4all.nl> <230F88BC-DC49-4128-9303-DE2FE4E2FED8@snigel.net>
In-Reply-To: <230F88BC-DC49-4128-9303-DE2FE4E2FED8@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604170103.31441.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sunday 16 April 2006 19:18, karl wettin wrote:
> 
> 15 apr 2006 kl. 21.32 skrev Paul Elschot:
> >>
> >> implements TermPositions {
> >>          public int nextPosition() throws IOException {
> >
> > This enumerates all positions of the Term in the document
> > as returned by the Tokenizer used by the Analyzer
> 
> Aha. And I didn't see the TermPositionVector until now.
> 
> This leads me to a new question. How is multiple fields with the same  
> name treated? Are the positions concated or in a "z-axis"? I see  
> SpanQuery-troubles with both.
> 
> Concated renders SpanFirst unusable on fields n > 0
> 	[hello,0] [world,1] [foo,2] [bar,3]
> 
> "Z-axis" mess up SpanNear, as "hello bar" is correct.
> 	[hello,0] [world,1]
> 	[foo,0] [bar,1]
> 
> Hmm.. (with double semantics, as this would mean I can't use the term  
> positions to train my hidden markov models).

Sorry, no new dimension. The token position just increases at each new
field with the same name. But multiple stored fields with the same field name
can be retrieved iirc.
It is possible to index a larger position gap between two such fields to avoid
query distance matching over the gaps.
Extra dimensions can be had by indexing term tags (as terms) at the same
positions as their corresponding terms.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 05:35:03 2006
Return-Path: <java-user-return-20218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56022 invoked from network); 17 Apr 2006 05:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 05:35:02 -0000
Received: (qmail 11397 invoked by uid 500); 17 Apr 2006 05:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11365 invoked by uid 500); 17 Apr 2006 05:34:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11354 invoked by uid 99); 17 Apr 2006 05:34:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 22:34:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 22:34:55 -0700
Received: by nz-out-0102.google.com with SMTP id 18so738153nzp
        for <java-user@lucene.apache.org>; Sun, 16 Apr 2006 22:34:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sgHCBbGkfYV7hVZL4alBjINhHzD2HlyfxJ+3cSYss9YFSfq7XYG/TKMlCBWqUdH6gCG3jSkXYVQB+d5BmkPR996Pmyj9ImYqh71A0zx1iUTtr4FpKrYE6rR2P/Iln6wRaAoOXQQUnn2JBXXFWsc+DTwVbhPXudYQP2f17EfMfko=
Received: by 10.65.115.12 with SMTP id s12mr226571qbm;
        Sun, 16 Apr 2006 22:34:35 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Sun, 16 Apr 2006 22:34:34 -0700 (PDT)
Message-ID: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com>
Date: Mon, 17 Apr 2006 01:34:35 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Not able to retrieve hits for a phrase
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am not able to retrieve the number of hits for a particular phrase .
The code below retrieves the hits only for certain phrases. The code
snippet that I use is

rd=3D IndexReader.open("C:\\Documents and Settings\\Owner\\My
Documents\\Thesis\\luceneTest\\index");
PhraseQuery query =3Dnew PhraseQuery();=09=09=09
searcher =3D new IndexSearcher(rd);=09=09=09
Term[] phrTerm=3Dnew Term[phraseTerms.length];
for(int u=3D0; u<phraseTerms.length;u++)
 {
  phrTerm[u]=3Dnew Term("contents",phraseTerms[u]);
 query.add(phrTerm[u]);=09=09=09
  }

System.out.println("Query"+query.toString() );
Hits hits =3D searcher.search(query);=09
System.out.println("Number of hits :"+hits.length());

Number of hits is 0 for some phrases even though the phrase is present
in some of the documents.

This retrieves the hits for certain phrases such as

"avoids deadlock" but it does not work for a phrase such as
"Prevents Data Loss"


I am not sure what the problem could be as none of these phrases have
any special characters.  Do I need to use any other type of query?


Regards
Vishal
--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 06:14:19 2006
Return-Path: <java-user-return-20219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69226 invoked from network); 17 Apr 2006 06:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 06:14:19 -0000
Received: (qmail 36901 invoked by uid 500); 17 Apr 2006 06:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36866 invoked by uid 500); 17 Apr 2006 06:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36835 invoked by uid 99); 17 Apr 2006 06:14:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:14:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:14:12 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Mon, 17 Apr 2006 08:13:47 +0200
In-Reply-To: <230F88BC-DC49-4128-9303-DE2FE4E2FED8@snigel.net>
References: <53423917-9808-4EA8-996A-95F7CD6218FD@snigel.net> <443FCE53.9050707@apache.org> <678FBE2D-7BDF-4609-ADF3-4B4BD2844BEB@snigel.net> <200604152132.18437.paul.elschot@xs4all.nl> <230F88BC-DC49-4128-9303-DE2FE4E2FED8@snigel.net>
Mime-Version: 1.0 (Apple Message framework v746.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <58912026-8F34-4D9D-80B7-13D89CC16591@snigel.net>
Cc: java-dev@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Using Lucene for searching tokens, not storing them.
Date: Mon, 17 Apr 2006 08:16:04 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 17 Apr 2006 06:13:47.0415 (UTC) FILETIME=[167AB270:01C661E6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


16 apr 2006 kl. 19.18 skrev karl wettin:

> For any interested party, I do this because I have a fairly small  
> corpus with very heavy load. I think there is a lot to win by not  
> creating new instances of what not, seeking in the file-centric  
> Directory, parsing pseudo-UTF8, et.c. at query time. I simply store  
> all instance of everything (the index in a bunch of Lists and Maps.  
> Bits are cheaper than ticks.

I will most definitely follow this path.

My tests used the IMDB tv-series as corpus. It contains about 45 000  
documents and has plenty of unique terms.

On my G4 the 190 000 queries took:
193 476 milliseconds on a RAMDirectory
123 193 milliseconds with my code branch.

That is about 40% less time. The code contains lots of things that  
can be optimized for both memory and CPU. Pretty sure it can be  
cranked down to use a fraction of the ticks spent by a RAMDirectory.  
I aim at 1/3.

The FSDirectory take 5MB with no fields stored. My implementation  
occupies about 100MB RAM, but that includes me treating all fields as  
Store.YES so it is not comparable at this stage.

I did not time the indexing, but it felt as it was about three to  
five times as fast.

Personally I'll be using Prevayler for persistence  
(java.io.Serializable with transactions).


Basically, this is what I did:

public final class Document implements java.io.Serializable {
     private static final long serialVersionUID = 1l;

     private Integer documentNumber;
     private Map<Term, int[]> termsPositions;
     private Map<String, TermFreqVector> termFrequecyVectorsByField;
     private TermFreqVector[] termFrequencyVectors;


public final class Term implements Comparable, java.io.Serializable {
     private static final long serialVersionUID = 1l;

     private int orderIndex;
     private ArrayList<Document> documents;


public class MemImplManager implements Serializable {
     private static final long serialVersionUID = 1l;

     private transient Map<String, byte[]> normsByFieldCache;
     private Map<String, ArrayList<Byte>> normsByField;

     private ArrayList<Term> orderedTerms;
     private ArrayList<Document> documents;

     private Map<String, Map<String, Term>> termsByFieldAndName;

     private class MemImplReader extends IndexReader {
         ...


So far everything is not fully implemented yet, hence my test only  
contains SpanQueries.

	for (int i = 0; i < 10000; i++) {
             placeQuery(new String[]{"csi", "ny"});
             placeQuery(new String[]{"csi", "new", "york"});
             placeQuery(new String[]{"star", "trek", "enterprise"});
             placeQuery(new String[]{"star", "trek", "deep", "space"});
             placeQuery(new String[]{"lust", "in", "space"});
             placeQuery(new String[]{"lost", "in", "space"});
             placeQuery(new String[]{"lost"});
             placeQuery(new String[]{"that", "70", "show"});
             placeQuery(new String[]{"the", "y-files"});
             placeQuery(new String[]{"csi", "las", "vegas"});
             placeQuery(new String[]{"stargate", "sg-1"});
             placeQuery(new String[]{"stargate", "atlantis"});
             placeQuery(new String[]{"miami", "vice"});
             placeQuery(new String[]{"miami", "voice"});
             placeQuery(new String[]{"big", "brother"});
             placeQuery(new String[]{"my", "name", "is", "earl"});
             placeQuery(new String[]{"falcon", "crest"});
             placeQuery(new String[]{"dallas"});
             placeQuery(new String[]{"v"});
         }


protected Query buildQuery(String[] nameTokens) {

         BooleanQuery q = new BooleanQuery();
         BooleanQuery bqStrategies = new BooleanQuery();

         /**name ^10 */
         {
             SpanQuery[] spanQueries = new SpanQuery[nameTokens.length];
             for (int i = 0; i < spanQueries.length; i++) {
                 spanQueries[i] = new SpanTermQuery(new Term("name",  
nameTokens[i]));
             }
             SpanQuery nameQuery = new SpanNearQuery(spanQueries, 0,  
true);
             nameQuery.setBoost(10);
             bqStrategies.add(new BooleanClause(nameQuery,  
BooleanClause.Occur.SHOULD));
         }

         /** aka name in order ^1 */
         {
             SpanQuery[] spanQueries = new SpanQuery[nameTokens.length];
             for (int i = 0; i < spanQueries.length; i++) {
                 spanQueries[i] = new SpanTermQuery(new Term 
("akaName", nameTokens[i]));
             }
             SpanQuery nameQuery = new SpanNearQuery(spanQueries, 0,  
true);
             nameQuery.setBoost(1);
             bqStrategies.add(new BooleanClause(nameQuery,  
BooleanClause.Occur.SHOULD));
         }


         q.add(new BooleanClause(bqStrategies,  
BooleanClause.Occur.MUST));

         return q;
     }




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 06:22:14 2006
Return-Path: <java-user-return-20220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72802 invoked from network); 17 Apr 2006 06:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 06:22:14 -0000
Received: (qmail 48256 invoked by uid 500); 17 Apr 2006 06:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48126 invoked by uid 500); 17 Apr 2006 06:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48114 invoked by uid 99); 17 Apr 2006 06:22:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:22:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:22:06 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FVN7H-00020a-TJ
	for java-user@lucene.apache.org; Sun, 16 Apr 2006 23:21:45 -0700
Message-ID: <3946467.post@talk.nabble.com>
Date: Sun, 16 Apr 2006 23:21:43 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: search pdf
In-Reply-To: <001d01c66184$422ab3f0$0401a8c0@MalcolmPC>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
References: <3939711.post@talk.nabble.com> <000901c66160$e4b96db0$0401a8c0@MalcolmPC> <3940183.post@talk.nabble.com> <001d01c66184$422ab3f0$0401a8c0@MalcolmPC>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
thankyou for your replay.
i am very sorry for asking again, but i am new to this Lucene. please tell
me how to run this code. i downloaded this LuceneInAction zip file. and i
didnot find any readme file for instructions. and i am also downloaded the
lucene-1.4.3 also.

so please tell me how to run this code.

thanking you,
Shajahan
--
View this message in context: http://www.nabble.com/search-pdf-t1457831.html#a3946467
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 06:25:17 2006
Return-Path: <java-user-return-20221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75567 invoked from network); 17 Apr 2006 06:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 06:25:17 -0000
Received: (qmail 50751 invoked by uid 500); 17 Apr 2006 06:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50448 invoked by uid 500); 17 Apr 2006 06:25:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50437 invoked by uid 99); 17 Apr 2006 06:25:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:25:11 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.122.139.27] (HELO rodin.i2r.a-star.edu.sg) (192.122.139.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:25:09 -0700
Received: from rodin.i2r.a-star.edu.sg (localhost [127.0.0.1])
	by rodin.i2r.a-star.edu.sg (8.13.1/8.13.1) with ESMTP id k3H6OfDL011292
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 14:24:41 +0800 (SGT)
Received: from newmailhost.i2r.a-star.edu.sg ([192.122.134.76])by 
	rodin.i2r.a-star.edu.sg (8.13.1/8.13.1) with ESMTP id k3H6OfYt011287for 
	<java-user@lucene.apache.org>; Mon, 17 Apr 2006 14:24:41 +0800 (SGT)
Received: from icsdtemp (elephants.i2r.a-star.edu.sg [192.168.136.116])by 
	mailhost.lit.org.sg(Sun Java System Messaging Server 6.1 HotFix 0.06 (built
	 Nov 11 2004))with ESMTP id <0IXU00125SH8W600@mailhost.lit.org.sg> 
	forjava-user@lucene.apache.org; Mon, 17 Apr 2006 14:24:45 +0800 (SGT)
Date: Mon, 17 Apr 2006 14:27:59 +0800
From: Aditya Liviandi <adityal@i2r.a-star.edu.sg>
Subject: RE: search pdf
In-reply-to: <3946467.post@talk.nabble.com>
To: java-user@lucene.apache.org
Message-id: <007901c661e8$12d3b890$7488a8c0@icsdtemp>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Mailer: Microsoft Outlook, Build 10.0.4024
Content-type: text/plain;
	charset=us-ascii
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-imss-version: 2.038
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14386.003)
X-imss-scores: Clean:99.90000 C:2 M:3 S:5 R:5
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Please take a moment to learn java and how to use java APIs.

After that, re-read the emails you just sent us, and answer your own
question.

-----Original Message-----
From: Shajahan [mailto:shaikshajahansha@yahoo.co.in] 
Sent: Monday, April 17, 2006 2:22 PM
To: java-user@lucene.apache.org
Subject: Re: search pdf


Hi,
thankyou for your replay.
i am very sorry for asking again, but i am new to this Lucene. please
tell
me how to run this code. i downloaded this LuceneInAction zip file. and
i
didnot find any readme file for instructions. and i am also downloaded
the
lucene-1.4.3 also.

so please tell me how to run this code.

thanking you,
Shajahan
--
View this message in context:
http://www.nabble.com/search-pdf-t1457831.html#a3946467
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


------------ Institute For Infocomm Research - Disclaimer -------------
This email is confidential and may be privileged.  If you are not the intended recipient, please delete it and notify us immediately. Please do not copy or use it for any purpose, or disclose its contents to any other person. Thank you.
--------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 06:55:29 2006
Return-Path: <java-user-return-20222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89263 invoked from network); 17 Apr 2006 06:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 06:55:29 -0000
Received: (qmail 69454 invoked by uid 500); 17 Apr 2006 06:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69421 invoked by uid 500); 17 Apr 2006 06:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69410 invoked by uid 99); 17 Apr 2006 06:55:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:55:24 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of foxwu718@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO uproxy.gmail.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Apr 2006 23:55:23 -0700
Received: by uproxy.gmail.com with SMTP id u40so1021905ugc
        for <java-user@lucene.apache.org>; Sun, 16 Apr 2006 23:55:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZxhYjPjQoiFcGbV+GD7Z97hifB4Wqcm60D6haOh6reAXTeoDxaLsy+YdZCGC2kNzUvEXTRTFbiX5I/z1prozyGWS6xIXv63hahdwDFzmtiwbXBEB7Kq4cSS1cJSGOs2/e42diSdatllDZ6x4US3pheArMbrqrr6SKqyr1BStfyE=
Received: by 10.78.47.15 with SMTP id u15mr4672huu;
        Sun, 16 Apr 2006 23:55:00 -0700 (PDT)
Received: by 10.78.30.9 with HTTP; Sun, 16 Apr 2006 23:55:00 -0700 (PDT)
Message-ID: <9e7ba420604162355q388cfb28p3baf13da63ec48b7@mail.gmail.com>
Date: Mon, 17 Apr 2006 14:55:00 +0800
From: "wu fox" <foxwu718@gmail.com>
To: java-user@lucene.apache.org
Subject: How lucene search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14963_30560590.1145256900455"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14963_30560590.1145256900455
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

IEhpIGFsbDoKICAgIFNvbWVib2R5IHRvbGQgbWUgcmVjZW50bHkgdGhhdCB3aGVuIGx1Y2VuZSBz
ZWFyY2ggYSBxdWVyeSB3aGljaCBjb250YWluCmEgZmV3IG9mIGNsYXVzZXMgLGZvciBleGFtcGxl
IGEgcXVlcnk6IHRpdGxlOiJsdWNlbmUgaW5hIGFjdGlvbiIgQU5ECnB1Ymxpc2hlcjptYW5uaW5n
ICxsdWNlbmUgZmlyc3Qgc2VhcmNoOiAgK3RpdGxlOiJsdWNlbmUgaW4gYWN0aW9uIiAsdGhlbgpz
ZWFyY2ggK3B1Ymxpc2hlcjptYW5uaW5nICBhbmQgY29tYmluZSB0aGUgcmVzdWx0cyBvZiB0d28g
c2VhcmNoIHByb2Nlc3MuIElzCml0IHRydWUgdGhhdCBsdWNlbmUgZG8gc2VhcmNoIHRoaXMgd2F5
IGFuZCBpZiBzbyxob3cgbHVjZW5lIGNvbWJpbmUgdGhlCnJlc3VsdHMgb2YgZWFjaCBzZWFyY2gg
cHJvY2Vzcz8gdGhhbmsgeW91CgotLQqwrsn6u+6jrLCuRk9YCg==
------=_Part_14963_30560590.1145256900455--

From java-user-return-20223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 10:59:00 2006
Return-Path: <java-user-return-20223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79540 invoked from network); 17 Apr 2006 10:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 10:59:00 -0000
Received: (qmail 54325 invoked by uid 500); 17 Apr 2006 10:58:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53781 invoked by uid 500); 17 Apr 2006 10:58:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53769 invoked by uid 99); 17 Apr 2006 10:58:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 03:58:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 03:58:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3576633CAE4; Mon, 17 Apr 2006 06:58:33 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B13BD33CAE3
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 06:58:28 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <3946467.post@talk.nabble.com>
References: <3939711.post@talk.nabble.com> <000901c66160$e4b96db0$0401a8c0@MalcolmPC> <3940183.post@talk.nabble.com> <001d01c66184$422ab3f0$0401a8c0@MalcolmPC> <3946467.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <89A0535D-CA00-4779-B790-F399F532D706@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search pdf
Date: Mon, 17 Apr 2006 06:58:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There _is_ a README file at the root of the unzipped Lucene In Action  
code.   It does require some basic Java and Ant know-how.

	Erik


On Apr 17, 2006, at 2:21 AM, Shajahan wrote:

>
> Hi,
> thankyou for your replay.
> i am very sorry for asking again, but i am new to this Lucene.  
> please tell
> me how to run this code. i downloaded this LuceneInAction zip file.  
> and i
> didnot find any readme file for instructions. and i am also  
> downloaded the
> lucene-1.4.3 also.
>
> so please tell me how to run this code.
>
> thanking you,
> Shajahan
> --
> View this message in context: http://www.nabble.com/search-pdf- 
> t1457831.html#a3946467
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 12:33:48 2006
Return-Path: <java-user-return-20224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28909 invoked from network); 17 Apr 2006 12:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 12:33:47 -0000
Received: (qmail 44632 invoked by uid 500); 17 Apr 2006 12:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44608 invoked by uid 500); 17 Apr 2006 12:33:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44597 invoked by uid 99); 17 Apr 2006 12:33:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 05:33:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 05:33:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6698433C0F0; Mon, 17 Apr 2006 08:33:16 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id E83E533C022
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 08:33:13 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com>
References: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Not able to retrieve hits for a phrase
Date: Mon, 17 Apr 2006 08:33:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This could be related to the analyzer you used during indexing.  Be  
aware that matches are *exact* including case.

	Erik

On Apr 17, 2006, at 1:34 AM, Vishal Bathija wrote:

> Hi,
> I am not able to retrieve the number of hits for a particular phrase .
> The code below retrieves the hits only for certain phrases. The code
> snippet that I use is
>
> rd= IndexReader.open("C:\\Documents and Settings\\Owner\\My
> Documents\\Thesis\\luceneTest\\index");
> PhraseQuery query =new PhraseQuery();			
> searcher = new IndexSearcher(rd);			
> Term[] phrTerm=new Term[phraseTerms.length];
> for(int u=0; u<phraseTerms.length;u++)
>  {
>   phrTerm[u]=new Term("contents",phraseTerms[u]);
>  query.add(phrTerm[u]);			
>   }
>
> System.out.println("Query"+query.toString() );
> Hits hits = searcher.search(query);	
> System.out.println("Number of hits :"+hits.length());
>
> Number of hits is 0 for some phrases even though the phrase is present
> in some of the documents.
>
> This retrieves the hits for certain phrases such as
>
> "avoids deadlock" but it does not work for a phrase such as
> "Prevents Data Loss"
>
>
> I am not sure what the problem could be as none of these phrases have
> any special characters.  Do I need to use any other type of query?
>
>
> Regards
> Vishal
> --
> Vishal Bathija
> Graduate Student
> Department of Computer Science & Systems Analysis
> Miami University
> Oxford,Ohio
> Phone: (513)-461-9239
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 12:46:38 2006
Return-Path: <java-user-return-20225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33118 invoked from network); 17 Apr 2006 12:46:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 12:46:38 -0000
Received: (qmail 57793 invoked by uid 500); 17 Apr 2006 12:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57746 invoked by uid 500); 17 Apr 2006 12:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57735 invoked by uid 99); 17 Apr 2006 12:46:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 05:46:17 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [144.140.83.154] (HELO omta02ps.mx.bigpond.com) (144.140.83.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 05:46:15 -0700
Received: from biggun ([58.168.134.149]) by omta02ps.mx.bigpond.com
          with ESMTP
          id <20060417124552.CXYF3168.omta02ps.mx.bigpond.com@biggun>
          for <java-user@lucene.apache.org>;
          Mon, 17 Apr 2006 12:45:52 +0000
From: <bb@incani.com>
To: <java-user@lucene.apache.org>
Subject: RE: Catching BooleanQuery.TooManyClauses
Date: Mon, 17 Apr 2006 22:45:44 +1000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <200604152113.12183.paul.elschot@xs4all.nl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcZgwaWbG4qQtLJeS0m33xEEI5h3ogBWothg
Message-Id: <20060417124552.CXYF3168.omta02ps.mx.bigpond.com@biggun>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erick & Paul,

I also found a great example of a custom filter in LIA (6.4 Using a custom
filter)

Here's my updated testcase if anybody is interested...

===== QueryParserTest.java ================================================ 
...
public class QueryParserTest extends LuceneTestCase {
	...
	private static int MAX_HITS = 10;

	public void testCatchTooManyClauses() throws Exception {
		System.out.println("===>testCatchTooManyClauses");
		Vector docList = null;
		try {
			causeTooManyClauses();
		}
		catch(BooleanQuery.TooManyClauses ex) {
			Term term = new Term(field, queryStr);
			final BitSet bs = new BitSet(reader.maxDoc());
			TermDocs termDocs = reader.termDocs();
			WildcardTermEnum wte = new WildcardTermEnum(reader,
term);
			int cnt = 0;
			docList = new Vector(MAX_HITS);
			/*
			the methods termDocs.next() and reader.document() go
to different places in 
			the Lucene index so this will send the disk head up
and down.
			see
http://lucene.apache.org/java/docs/fileformats.html
			*/
			for (term = null; (term = wte.term()) != null && cnt
< MAX_HITS; wte.next()) {
				// get doc ids from .frq file
				termDocs.seek(term);
				while (termDocs.next() && cnt++ < MAX_HITS)
{
					bs.set(termDocs.doc());
				}
			}
			termDocs.close();
			// retrieve the Document's in numerical order
			for(int i=bs.nextSetBit(0); i>=0;
i=bs.nextSetBit(i+1)) {
				docList.add(reader.document(i));
			}
		}
		System.out.println("found:" + docList.size());
		assertTrue(docList.size() == MAX_HITS);
	} 
...
===== QueryParserTest.java ================================================
 

> -----Original Message-----
> From: Paul Elschot [mailto:paul.elschot@xs4all.nl] 
> Sent: Sunday, 16 April 2006 5:13 AM
> To: java-user@lucene.apache.org
> Subject: Re: Catching BooleanQuery.TooManyClauses
> 
> 
> On Saturday 15 April 2006 13:44, Erick Erickson wrote:
> > With the warning that I'm not the most experienced Lucene 
> user in the
> > world...
> > 
> > I *think*, that rather than search for each term, it's more 
> efficient to
> > just use IndexReader.termDocs..... i.e.
> > 
> > Indexreader ir = <whatever>;
> > TermDocs termDocs = ir.TermDocs();
> > WildcardTermEnum wildEnum = <whatever>;
> > 
> > for (Term term = null; (term = wildEnum.term()) != null; 
> wildEnum.next()) {
> >       termDocs.seek(term);
> 
> This avoids the buffer space needed for each TermDocs by 
> using each term
> separately. A BooleanQuery over all the terms will use the 
> termDocs.next() and
> termDocs.doc() for all terms at the same time. It has to, 
> because more terms
> might match each document and it has to compute the query 
> score for each
> document.
> 
> >       while (termDocs.next()) {
> >             Document doc = reader.document(termDocs.doc())
> 
> The methods termDocs.next() and reader.document()
> go to different places in the Lucene index (see the index format),
> so this will send the disk head up and down.
> It's better to collect the termDocs.doc() values first,  for 
> example in a
> BitSet, and then retrieve the Document's in numerical order.
> Btw., this is what the ConstantScoreRangeQuery does to avoid 
> using all terms
> at the same time.
> 
> >       }
> > }
> > 
> > I know that for loop looks odd, but I just peeked at the 
> source code for the
> > TermEnum classes and see why it works.
> > 
> > One warning, as the folks on the board have pointed out to 
> me is that the
> > Hits object is not entirely efficient when you fetch lots 
> of docs (more than
> > 100 has been mentioned) and you should think about TopDocs 
> or some such.
> > 
> > Also, if you can avoid fetching the document (i.e. get 
> everything you want
> > from the index) you'll add efficiency. I have no clue how 
> much you're
> > returning to the user, so I don't know whether that would 
> work for you.....
> 
> In other words, one can use the above BitSet in a Filter lateron
> during an IndexSearcher.search() (or in a ConstantScoreQuery),
> and use Hits or TopDocs for document retrieval.
> 
> Regards,
> Paul Elschot.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> -- 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.385 / Virus Database: 268.4.1/313 - Release 
> Date: 15/04/2006
>  
> 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.4.2/314 - Release Date: 16/04/2006
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 13:39:48 2006
Return-Path: <java-user-return-20226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59373 invoked from network); 17 Apr 2006 13:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 13:39:47 -0000
Received: (qmail 21795 invoked by uid 500); 17 Apr 2006 13:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21771 invoked by uid 500); 17 Apr 2006 13:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21760 invoked by uid 99); 17 Apr 2006 13:39:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 06:39:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 06:39:41 -0700
Received: by nz-out-0102.google.com with SMTP id 18so852456nzp
        for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 06:39:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E2KeDYSCqDR6ooAaQPe6NqjGrGzPZ6s7cGh63ooBi38cpRAnqPUxcXDZ1CqTs1a/cgqG9qscDJtgSqH8HyqDbscgDfjLVvb5fAZ3SP6ynhC3eB/nWDth7mhGVGmBLmB+Ig6SQvTMAiVcyq9Vq5e5CKatI/Jm4lH6dq5nZ9I4oS8=
Received: by 10.65.52.4 with SMTP id e4mr503064qbk;
        Mon, 17 Apr 2006 06:39:20 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Mon, 17 Apr 2006 06:39:20 -0700 (PDT)
Message-ID: <f742a72b0604170639x66d94296ub586975278307e35@mail.gmail.com>
Date: Mon, 17 Apr 2006 09:39:20 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Not able to retrieve hits for a phrase
In-Reply-To: <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com>
	 <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I currently use
writer =3D new IndexWriter("index", new StandardAnalyzer(),true);
=09=09=09
Should I use any other analyzer. Yes I am aware that the matches are
case sensitive.

Regards
Vishal

On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> This could be related to the analyzer you used during indexing.  Be
> aware that matches are *exact* including case.
>
>        Erik
>
> On Apr 17, 2006, at 1:34 AM, Vishal Bathija wrote:
>
> > Hi,
> > I am not able to retrieve the number of hits for a particular phrase .
> > The code below retrieves the hits only for certain phrases. The code
> > snippet that I use is
> >
> > rd=3D IndexReader.open("C:\\Documents and Settings\\Owner\\My
> > Documents\\Thesis\\luceneTest\\index");
> > PhraseQuery query =3Dnew PhraseQuery();
> > searcher =3D new IndexSearcher(rd);
> > Term[] phrTerm=3Dnew Term[phraseTerms.length];
> > for(int u=3D0; u<phraseTerms.length;u++)
> >  {
> >   phrTerm[u]=3Dnew Term("contents",phraseTerms[u]);
> >  query.add(phrTerm[u]);
> >   }
> >
> > System.out.println("Query"+query.toString() );
> > Hits hits =3D searcher.search(query);
> > System.out.println("Number of hits :"+hits.length());
> >
> > Number of hits is 0 for some phrases even though the phrase is present
> > in some of the documents.
> >
> > This retrieves the hits for certain phrases such as
> >
> > "avoids deadlock" but it does not work for a phrase such as
> > "Prevents Data Loss"
> >
> >
> > I am not sure what the problem could be as none of these phrases have
> > any special characters.  Do I need to use any other type of query?
> >
> >
> > Regards
> > Vishal
> > --
> > Vishal Bathija
> > Graduate Student
> > Department of Computer Science & Systems Analysis
> > Miami University
> > Oxford,Ohio
> > Phone: (513)-461-9239
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 14:47:54 2006
Return-Path: <java-user-return-20227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97593 invoked from network); 17 Apr 2006 14:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 14:47:54 -0000
Received: (qmail 28624 invoked by uid 500); 17 Apr 2006 14:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28592 invoked by uid 500); 17 Apr 2006 14:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28581 invoked by uid 99); 17 Apr 2006 14:47:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 07:47:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 07:47:47 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BA34C33CAEA; Mon, 17 Apr 2006 10:47:26 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 955D833CAD8
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 10:47:25 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <f742a72b0604170639x66d94296ub586975278307e35@mail.gmail.com>
References: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com> <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com> <f742a72b0604170639x66d94296ub586975278307e35@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5604FF82-50A1-4A78-A2C8-2E94C5B12F89@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Not able to retrieve hits for a phrase
Date: Mon, 17 Apr 2006 10:47:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are the terms you're adding to PhraseQuery lowercased?  If not, then  
that is most likely the issue.

	Erik


On Apr 17, 2006, at 9:39 AM, Vishal Bathija wrote:

> I currently use
> writer = new IndexWriter("index", new StandardAnalyzer(),true);
> 			
> Should I use any other analyzer. Yes I am aware that the matches are
> case sensitive.
>
> Regards
> Vishal
>
> On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> This could be related to the analyzer you used during indexing.  Be
>> aware that matches are *exact* including case.
>>
>>        Erik
>>
>> On Apr 17, 2006, at 1:34 AM, Vishal Bathija wrote:
>>
>>> Hi,
>>> I am not able to retrieve the number of hits for a particular  
>>> phrase .
>>> The code below retrieves the hits only for certain phrases. The code
>>> snippet that I use is
>>>
>>> rd= IndexReader.open("C:\\Documents and Settings\\Owner\\My
>>> Documents\\Thesis\\luceneTest\\index");
>>> PhraseQuery query =new PhraseQuery();
>>> searcher = new IndexSearcher(rd);
>>> Term[] phrTerm=new Term[phraseTerms.length];
>>> for(int u=0; u<phraseTerms.length;u++)
>>>  {
>>>   phrTerm[u]=new Term("contents",phraseTerms[u]);
>>>  query.add(phrTerm[u]);
>>>   }
>>>
>>> System.out.println("Query"+query.toString() );
>>> Hits hits = searcher.search(query);
>>> System.out.println("Number of hits :"+hits.length());
>>>
>>> Number of hits is 0 for some phrases even though the phrase is  
>>> present
>>> in some of the documents.
>>>
>>> This retrieves the hits for certain phrases such as
>>>
>>> "avoids deadlock" but it does not work for a phrase such as
>>> "Prevents Data Loss"
>>>
>>>
>>> I am not sure what the problem could be as none of these phrases  
>>> have
>>> any special characters.  Do I need to use any other type of query?
>>>
>>>
>>> Regards
>>> Vishal
>>> --
>>> Vishal Bathija
>>> Graduate Student
>>> Department of Computer Science & Systems Analysis
>>> Miami University
>>> Oxford,Ohio
>>> Phone: (513)-461-9239
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Vishal Bathija
> Graduate Student
> Department of Computer Science & Systems Analysis
> Miami University
> Oxford,Ohio
> Phone: (513)-461-9239
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 15:30:58 2006
Return-Path: <java-user-return-20228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24970 invoked from network); 17 Apr 2006 15:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 15:30:57 -0000
Received: (qmail 3110 invoked by uid 500); 17 Apr 2006 15:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3088 invoked by uid 500); 17 Apr 2006 15:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3077 invoked by uid 99); 17 Apr 2006 15:30:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 08:30:51 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jloramas@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wproxy.gmail.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 08:30:49 -0700
Received: by wproxy.gmail.com with SMTP id 68so620357wri
        for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 08:30:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DxOsLmN3VfBgXQa6QlKi36yHv+Ib52nEBT0QlywfPD6sXuGPO81/iaW1/u7KIHVPI1YvTrQuQSymf6JUkGX01IJFVq9NS5xHGulcQbTd6PqugrQuyZciS966sLgUyV/K7vFwdyZRt4btCBHnlZTolgY+gChVYWLSy3IMhyLtON4=
Received: by 10.54.114.11 with SMTP id m11mr1407320wrc;
        Mon, 17 Apr 2006 08:30:29 -0700 (PDT)
Received: by 10.54.121.7 with HTTP; Mon, 17 Apr 2006 08:30:29 -0700 (PDT)
Message-ID: <e71b9bb40604170830m1d681812s3517ce073c832d3a@mail.gmail.com>
Date: Mon, 17 Apr 2006 17:30:29 +0200
From: "=?ISO-8859-1?Q?oramas_mart=EDn?=" <jloramas@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Reordering elements in a PriorityQueue
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4959_8879018.1145287829153"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4959_8879018.1145287829153
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all,

I would like to insert elements in a PriorityQueue where the value returned
by the 'lessThan' method for the same both objects can change over the time=
.
Just to clarify my problem, I would like to insert PriorityQueue objects in
the main PriorityQueue, so the 'lessThan' method from the main queue will
compare the top objects of the inserted priority queues.

So I would like to reorder an alement already in the queue, each time it is
detected a change in its value. AFAIK, it can not be done with the current
PriorityQueue implementation, so I have, apparently, two ways of doing it,
one can be remove the affected element and reinsert it, and the other is to
implement a reorder method. In either case I have to implement a new method=
,
but my understanding of the queue implementation is too low to decide what
of them is a better approach. =BFCan somebody points me in the right
direccion, explaining a bit how the queue works (upHeap and downHeap) or ho=
w
to implement the methods I need?

Thanks for your help,
Jos=E9.

------=_Part_4959_8879018.1145287829153--

From java-user-return-20229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 15:33:47 2006
Return-Path: <java-user-return-20229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26581 invoked from network); 17 Apr 2006 15:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 15:33:46 -0000
Received: (qmail 7093 invoked by uid 500); 17 Apr 2006 15:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7073 invoked by uid 500); 17 Apr 2006 15:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7062 invoked by uid 99); 17 Apr 2006 15:33:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 08:33:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 08:33:37 -0700
Received: by nz-out-0102.google.com with SMTP id 18so885906nzp
        for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 08:33:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HGVTVD9cnH0HTGePoOg7IjWVaZPSLBrmkUWfTu+XLFpFqxsx2LERdtAqPbBeT/fc9lyd/UViAZecVs0WaIgKEEUhNs6TXFZ14HWrRp6SkderTujN1REtghgXbg1LKgZsy6Hos0KUCmIbI+tOY5SAPIlYqGWAGklpT9Uvd6dqkSE=
Received: by 10.65.113.11 with SMTP id q11mr557163qbm;
        Mon, 17 Apr 2006 08:33:16 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Mon, 17 Apr 2006 08:33:16 -0700 (PDT)
Message-ID: <f742a72b0604170833r1927a369habcb51806aa4c93@mail.gmail.com>
Date: Mon, 17 Apr 2006 11:33:16 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Not able to retrieve hits for a phrase
In-Reply-To: <5604FF82-50A1-4A78-A2C8-2E94C5B12F89@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com>
	 <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com>
	 <f742a72b0604170639x66d94296ub586975278307e35@mail.gmail.com>
	 <5604FF82-50A1-4A78-A2C8-2E94C5B12F89@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,
Thanks, that seemed to have solved the problem. Can you please
elaborate on the kind of input PhraseQuery takes in. Am I supposed to
add only lowercased terms to PhraseQuery. Is it possible to search for
a phrase that is not case sensitive?

Regards
Vishal

On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> Are the terms you're adding to PhraseQuery lowercased?  If not, then
> that is most likely the issue.
>
>        Erik
>
>
> On Apr 17, 2006, at 9:39 AM, Vishal Bathija wrote:
>
> > I currently use
> > writer =3D new IndexWriter("index", new StandardAnalyzer(),true);
> >
> > Should I use any other analyzer. Yes I am aware that the matches are
> > case sensitive.
> >
> > Regards
> > Vishal
> >
> > On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >> This could be related to the analyzer you used during indexing.  Be
> >> aware that matches are *exact* including case.
> >>
> >>        Erik
> >>
> >> On Apr 17, 2006, at 1:34 AM, Vishal Bathija wrote:
> >>
> >>> Hi,
> >>> I am not able to retrieve the number of hits for a particular
> >>> phrase .
> >>> The code below retrieves the hits only for certain phrases. The code
> >>> snippet that I use is
> >>>
> >>> rd=3D IndexReader.open("C:\\Documents and Settings\\Owner\\My
> >>> Documents\\Thesis\\luceneTest\\index");
> >>> PhraseQuery query =3Dnew PhraseQuery();
> >>> searcher =3D new IndexSearcher(rd);
> >>> Term[] phrTerm=3Dnew Term[phraseTerms.length];
> >>> for(int u=3D0; u<phraseTerms.length;u++)
> >>>  {
> >>>   phrTerm[u]=3Dnew Term("contents",phraseTerms[u]);
> >>>  query.add(phrTerm[u]);
> >>>   }
> >>>
> >>> System.out.println("Query"+query.toString() );
> >>> Hits hits =3D searcher.search(query);
> >>> System.out.println("Number of hits :"+hits.length());
> >>>
> >>> Number of hits is 0 for some phrases even though the phrase is
> >>> present
> >>> in some of the documents.
> >>>
> >>> This retrieves the hits for certain phrases such as
> >>>
> >>> "avoids deadlock" but it does not work for a phrase such as
> >>> "Prevents Data Loss"
> >>>
> >>>
> >>> I am not sure what the problem could be as none of these phrases
> >>> have
> >>> any special characters.  Do I need to use any other type of query?
> >>>
> >>>
> >>> Regards
> >>> Vishal
> >>> --
> >>> Vishal Bathija
> >>> Graduate Student
> >>> Department of Computer Science & Systems Analysis
> >>> Miami University
> >>> Oxford,Ohio
> >>> Phone: (513)-461-9239
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Vishal Bathija
> > Graduate Student
> > Department of Computer Science & Systems Analysis
> > Miami University
> > Oxford,Ohio
> > Phone: (513)-461-9239
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 16:56:54 2006
Return-Path: <java-user-return-20230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71209 invoked from network); 17 Apr 2006 16:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 16:56:53 -0000
Received: (qmail 53354 invoked by uid 500); 17 Apr 2006 16:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53294 invoked by uid 500); 17 Apr 2006 16:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53260 invoked by uid 99); 17 Apr 2006 16:56:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 09:56:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 09:56:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CBB1833C06A; Mon, 17 Apr 2006 12:56:19 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 9238533C049
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 12:56:18 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <f742a72b0604170833r1927a369habcb51806aa4c93@mail.gmail.com>
References: <f742a72b0604162234p28cf3421pefcc96015c6c405a@mail.gmail.com> <532B4F7B-7E9F-4A13-BD53-4A17132FD0CB@ehatchersolutions.com> <f742a72b0604170639x66d94296ub586975278307e35@mail.gmail.com> <5604FF82-50A1-4A78-A2C8-2E94C5B12F89@ehatchersolutions.com> <f742a72b0604170833r1927a369habcb51806aa4c93@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <66987F3B-A795-4E25-8D57-F1E8639229A8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Not able to retrieve hits for a phrase
Date: Mon, 17 Apr 2006 12:56:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

PhraseQuery needs terms that match what got indexed, simple as that.   
QueryParser does this for you by using the specified analyzer on the  
"phrase text" within double quotes and creating a PhraseQuery out of  
the tokens.  When you're creating a PhraseQuery directly with the  
API, you need to be aware of how things are indexed in order to  
ensure that any normalization, such as lowercasing, that occurs  
during indexing also occurs on the text you're searching with.

Most frequently, to search without case sensitivity the text is  
lowercased during indexing, and also during searching.   
StandardAnalyzer lowercases, as do almost all analyzers you'll find  
in the core (except WhiteSpaceAnalyzer).

	Erik


On Apr 17, 2006, at 11:33 AM, Vishal Bathija wrote:

> Hi Erik,
> Thanks, that seemed to have solved the problem. Can you please
> elaborate on the kind of input PhraseQuery takes in. Am I supposed to
> add only lowercased terms to PhraseQuery. Is it possible to search for
> a phrase that is not case sensitive?
>
> Regards
> Vishal
>
> On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> Are the terms you're adding to PhraseQuery lowercased?  If not, then
>> that is most likely the issue.
>>
>>        Erik
>>
>>
>> On Apr 17, 2006, at 9:39 AM, Vishal Bathija wrote:
>>
>>> I currently use
>>> writer = new IndexWriter("index", new StandardAnalyzer(),true);
>>>
>>> Should I use any other analyzer. Yes I am aware that the matches are
>>> case sensitive.
>>>
>>> Regards
>>> Vishal
>>>
>>> On 4/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>>> This could be related to the analyzer you used during indexing.  Be
>>>> aware that matches are *exact* including case.
>>>>
>>>>        Erik
>>>>
>>>> On Apr 17, 2006, at 1:34 AM, Vishal Bathija wrote:
>>>>
>>>>> Hi,
>>>>> I am not able to retrieve the number of hits for a particular
>>>>> phrase .
>>>>> The code below retrieves the hits only for certain phrases. The  
>>>>> code
>>>>> snippet that I use is
>>>>>
>>>>> rd= IndexReader.open("C:\\Documents and Settings\\Owner\\My
>>>>> Documents\\Thesis\\luceneTest\\index");
>>>>> PhraseQuery query =new PhraseQuery();
>>>>> searcher = new IndexSearcher(rd);
>>>>> Term[] phrTerm=new Term[phraseTerms.length];
>>>>> for(int u=0; u<phraseTerms.length;u++)
>>>>>  {
>>>>>   phrTerm[u]=new Term("contents",phraseTerms[u]);
>>>>>  query.add(phrTerm[u]);
>>>>>   }
>>>>>
>>>>> System.out.println("Query"+query.toString() );
>>>>> Hits hits = searcher.search(query);
>>>>> System.out.println("Number of hits :"+hits.length());
>>>>>
>>>>> Number of hits is 0 for some phrases even though the phrase is
>>>>> present
>>>>> in some of the documents.
>>>>>
>>>>> This retrieves the hits for certain phrases such as
>>>>>
>>>>> "avoids deadlock" but it does not work for a phrase such as
>>>>> "Prevents Data Loss"
>>>>>
>>>>>
>>>>> I am not sure what the problem could be as none of these phrases
>>>>> have
>>>>> any special characters.  Do I need to use any other type of query?
>>>>>
>>>>>
>>>>> Regards
>>>>> Vishal
>>>>> --
>>>>> Vishal Bathija
>>>>> Graduate Student
>>>>> Department of Computer Science & Systems Analysis
>>>>> Miami University
>>>>> Oxford,Ohio
>>>>> Phone: (513)-461-9239
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> --
>>>>> -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> Vishal Bathija
>>> Graduate Student
>>> Department of Computer Science & Systems Analysis
>>> Miami University
>>> Oxford,Ohio
>>> Phone: (513)-461-9239
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Vishal Bathija
> Graduate Student
> Department of Computer Science & Systems Analysis
> Miami University
> Oxford,Ohio
> Phone: (513)-461-9239
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 17:00:55 2006
Return-Path: <java-user-return-20231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72837 invoked from network); 17 Apr 2006 17:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 17:00:55 -0000
Received: (qmail 59854 invoked by uid 500); 17 Apr 2006 17:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59734 invoked by uid 500); 17 Apr 2006 17:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59723 invoked by uid 99); 17 Apr 2006 17:00:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 10:00:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 10:00:48 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C66240.42C8EE32"
Subject: hypens
Date: Mon, 17 Apr 2006 11:59:15 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B291F3F8F@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: hypens
Thread-Index: AcZiQEIXZ7AKJQo3Q8CZUE9AXvYSUA==
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C66240.42C8EE32
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

If I have a user search for "b-trunk"  I would like them to be able to

find "b-trunk" (with hypen).   I would also like someone searching for

"b trunk" to also find "b-trunk".

=20

On the other side, if someone searches for 12412 I would like them to be

able to find 12412-235, 12412-121, 12412-etc...      as well as letting

someone type in 12412-235 directly and get a good result list: the one
item would be best, but a larger list with that one on top is good too.

=20

So for now I am using the standardanalyzer.   I do a search for what

they give me in quotes on all fields as well as the same thing w/o
quotes.  When I print out the final query the half of the overall query
in quotes seems to have the hypens stripped out, but the w/o quotes

version doesn't...so this lets me find what I want.   But I have each

search phrase in the final query twice now.    it seems to work fine,

but it seems pretty inelegant--unelegant even.  =20

=20

It seems like I can't just strip out the hypens, nor keep them.    I am

storing the name as keyword, but everything else as Text.   I thought

that would matter but a description or keyword or other field may have
something like "this also relates to 23523-235"  so if someone was
searching for 23523 I would also want this in the list... and if they

searched for the 23523-235 then I would also want this still.    So I

don't know if its solvable by the type of field I use to index it.   Or

do I have to store each field twice with different analyzer?  That seems
just as clumsy as my double-search solution. =20

=20

Any thoughts?

=20


------_=_NextPart_001_01C66240.42C8EE32--

From java-user-return-20232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 18:18:05 2006
Return-Path: <java-user-return-20232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10902 invoked from network); 17 Apr 2006 18:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 18:18:05 -0000
Received: (qmail 85115 invoked by uid 500); 17 Apr 2006 18:18:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84790 invoked by uid 500); 17 Apr 2006 18:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 75515 invoked by uid 99); 17 Apr 2006 18:12:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6624A.786FE73C"
Subject: how to match Documents from Hits with Documents from Query Spans?
Date: Mon, 17 Apr 2006 11:12:04 -0700
Message-ID: <117A6478DABB1D4E9509EA7F413AE789467D51@CTMAIL2.calltower.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to match Documents from Hits with Documents from Query Spans?
Thread-Index: AcZiSm6WJGyCF1kPQ3yONjSIVBs8nQ==
From: "Boris Galitsky" <bgalitsky@loglogic.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6624A.786FE73C
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hello

=20

I am using span queries to get hits (Documents) and occurrences
(positions) of search terms within these documents.

For some reason, there is a disagreement between the order the Documents
are returned in hits, and the Documents are referenced (via order
number, starting from 0) in the Spans?

=20

The problem is depicted at the diagram below

=20

=20

Query =3D> Lucene =3D> hits ->Documents

|                                                               |

Spans -> doc(), start(), end()                       |

                 \-----------------------------????????----

                       =20

=20

Lucene gets a Query and gives away hits with resultant Documents, and
the occurrences of search expression are obtained form the Query. Why is
there such an odd logic? Again, how to match Documents from Hits with
Documents from Query Spans?

=20

Regards

Boris


------_=_NextPart_001_01C6624A.786FE73C--

From java-user-return-20233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 20:53:58 2006
Return-Path: <java-user-return-20233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86741 invoked from network); 17 Apr 2006 20:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 20:53:58 -0000
Received: (qmail 27544 invoked by uid 500); 17 Apr 2006 20:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27093 invoked by uid 500); 17 Apr 2006 20:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27082 invoked by uid 99); 17 Apr 2006 20:53:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 13:53:52 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.22] (HELO web36605.mail.mud.yahoo.com) (209.191.85.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Apr 2006 13:53:50 -0700
Received: (qmail 10738 invoked by uid 60001); 17 Apr 2006 20:53:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Cdk7gLzGRDUUllDKYzep9GIEdbt1POGAsBmxdtJ3zVjb9OUAI7KjaLMuAZ8s9xf421eKnUtvx9GN+cQubbqXiJgbzUR/61JeFhUhZx4qCsQjN2fxBfKZ9X6+5zCzi/C8mYVT9rPkdF5Ks8mswp+y0I0PztK6F4vanIVkSJoALC4=  ;
Message-ID: <20060417205326.10736.qmail@web36605.mail.mud.yahoo.com>
Received: from [86.139.50.86] by web36605.mail.mud.yahoo.com via HTTP; Mon, 17 Apr 2006 21:53:26 BST
Date: Mon, 17 Apr 2006 21:53:26 +0100 (BST)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: Indexing - scheduled batch process or server?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everyone,

I'm currently designing a Lucene search system and i'm
considering the indexing side of things.

Just wondered what kind of architecture people have
adopted for indexing - are CHRON jobs sufficient for
high volume drip feed indexing or has anyone
implemented a more sophisticated solution with web
services to index on demand?  

And has anyone used Quartz to schedule Lucene index
updates?  Sounds like an interesting product in this
context.

Many thanks


Marc Dauncey


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 21:08:14 2006
Return-Path: <java-user-return-20234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91475 invoked from network); 17 Apr 2006 21:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 21:08:14 -0000
Received: (qmail 46625 invoked by uid 500); 17 Apr 2006 21:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46508 invoked by uid 500); 17 Apr 2006 21:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46497 invoked by uid 99); 17 Apr 2006 21:08:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 14:08:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 14:08:08 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id k3HL7kUJ014108
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 14:07:46 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k3HL7gns000344
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 14:07:43 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060417205326.10736.qmail@web36605.mail.mud.yahoo.com>
References: <20060417205326.10736.qmail@web36605.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EAE1D77F-CE14-4A75-BD07-B655646BF860@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Indexing - scheduled batch process or server?
Date: Mon, 17 Apr 2006 15:07:38 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm pretty new with this, but with my index for a database, I'm using  
a Quartz scheduler.  Also at the end of the index update, I set my  
singleton of IndexSearcher to null.  That way the index searcher will  
be using the latest information.  That bit as well as setting it to  
null and not closing it I found searching around on forums.  The  
reason given for not closing it is to allow searches currently using  
the index searches to finish using it.
Anyway, I hope this helps.
Jeremy

On Apr 17, 2006, at 2:53 PM, Marc Dauncey wrote:

> Hi everyone,
>
> I'm currently designing a Lucene search system and i'm
> considering the indexing side of things.
>
> Just wondered what kind of architecture people have
> adopted for indexing - are CHRON jobs sufficient for
> high volume drip feed indexing or has anyone
> implemented a more sophisticated solution with web
> services to index on demand?
>
> And has anyone used Quartz to schedule Lucene index
> updates?  Sounds like an interesting product in this
> context.
>
> Many thanks
>
>
> Marc Dauncey
>
>
> 	
> 	
> 		
> ___________________________________________________________
> Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide  
> with voicemail http://uk.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 22:35:54 2006
Return-Path: <java-user-return-20235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28926 invoked from network); 17 Apr 2006 22:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 22:35:53 -0000
Received: (qmail 58110 invoked by uid 500); 17 Apr 2006 22:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58052 invoked by uid 500); 17 Apr 2006 22:35:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57986 invoked by uid 99); 17 Apr 2006 22:35:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 15:35:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.58] (HELO exprod8og16.obsmtp.com) (64.18.3.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Apr 2006 15:35:46 -0700
Received: from source ([205.180.14.155]) by exprod8ob16.obsmtp.com ([64.18.7.12]) with SMTP;
	Mon, 17 Apr 2006 15:21:44 PDT
Received: from us-hqmail1.ariba.com ([10.10.10.196]) by us-hqmail1.ariba.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 17 Apr 2006 15:28:03 -0700
Received: from us-hqmail2.ariba.com ([10.10.10.192]) by us-hqmail1.ariba.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 17 Apr 2006 15:28:03 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6626E.310D0803"
Subject: Technical Lead - Search
Date: Mon, 17 Apr 2006 15:28:03 -0700
Message-ID: <40D30D99949893468C5BD4686B1A6C1D062161D7@us-hqmail2.ariba.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Technical Lead - Search
Thread-Index: AcZibj7bH9DdDb0rSISSqrLCtJpswA==
From: "Joe Taylor" <JTaylor@ariba.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Apr 2006 22:28:03.0595 (UTC) FILETIME=[3113E5B0:01C6626E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6626E.310D0803
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

All-

=20

We are looking for someone with search experience (we leverage Lucene)
to lead a small team of developers as described below. If you are
interested, send your resume to tmusharbash@ariba.com. Thanks.

=20

Joe

=20

Job Title: Technical Lead/Engineering Manager - Ariba Content

Summary:

Ariba Spend Management provides a functionally rich solution that
empowers businesses to quickly and securely engage all users, suppliers,
and systems; efficiently manage every aspect of their enterprise-wide
spend; and rapidly leverage their spend to obtain exceptional bottom
line savings.  The Ariba Procure to Pay and Content solutions are key
parts of the Ariba Spend Management solution.  This position is within
the Procurement Engineering organization and is responsible for leading,
developing and supporting the Ariba Content and catalog solutions by
driving industry leading edge e-commerce search usability and
scalability. The candidate must be able to work with product management,
quality assurance, UI development and documentation to develop and
architect complete, high quality application features.

=20

Duties and Responsibilities:

This technical manager will be responsible for the architecture,
development, implementation and support of the Ariba Content solution.
The candidate must be an energetic leader with a customer/application
focus and a passion for shipping innovative, highly scalable and high
quality software on time.

Knowledge and Skills:
Management Qualifications

*	Ability to lead a project and inspire others to deliver high
quality work on time
*	Demonstrated ability to take initiative, develop and implement
new processes
*	Hands on technical design and implementation (~70% of time)
*	Excellent verbal and written communication skills
*	Mentoring and coaching team members

Technical Qualifications=20

*        BS or MS in computer science with 8+ years of experience=20

*        Experience in search engine, content presentation or
information retrieval technologies

*        Solid command of OOD principles with skills in Java=20

*        Experience working in a complex commercial product development
environment

Desirable=20

*        Experience with Lucene/Nutch or other high performance search
technologies

*        Experience interfacing with customers and technical support=20

*        Database experience: SQL, schema design, query optimization,
migration=20

*        Domain experience in web based software, enterprise software or
eCommerce solutions

*        Knowledge of HTML, JavaScript, CSS

=20

Job Requisition ID:=20
Location: USA - Sunnyvale CA=20
Job Category: Full Time Professional=20
Job Type: Product Development/Engineering=20
Travel Required: No

=20


------_=_NextPart_001_01C6626E.310D0803--

From java-user-return-20236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 22:49:32 2006
Return-Path: <java-user-return-20236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38568 invoked from network); 17 Apr 2006 22:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 22:49:32 -0000
Received: (qmail 78480 invoked by uid 500); 17 Apr 2006 22:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78457 invoked by uid 500); 17 Apr 2006 22:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78446 invoked by uid 99); 17 Apr 2006 22:49:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 15:49:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 15:49:25 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Tue, 18 Apr 2006 00:49:01 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291F3F8F@bettylou.configureone.net>
References: <F9E303076B72074AB76B2C8F78952B291F3F8F@bettylou.configureone.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <884A76C3-6F26-408E-9C67-6FBD31376299@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: hypens
Date: Tue, 18 Apr 2006 00:51:17 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 17 Apr 2006 22:49:01.0914 (UTC) FILETIME=[1F1823A0:01C66271]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


17 apr 2006 kl. 18.59 skrev John Powers:

> Hello,
>
> If I have a user search for "b-trunk"  I would like them to be able to
> find "b-trunk" (with hypen).   I would also like someone searching for
> "b trunk" to also find "b-trunk".

If you don't care about spans, make a filter that rebuilds the token  
at index time. It's a bit quick and dirty, but I do things like this  
in some cases without any major problems.

Below code builds [btrunk] [b-trunk] [b] [trunk].

I would not recommend you to do this without considering what you do.



public class LowASCIIDashWordFilter extends TokenFilter {

     private static Pattern p = Pattern.compile("(\\w+)-(\\w+)");

     /** Construct a token stream filtering the given input. */
     public LowASCIIDashWordFilter(TokenStream input) {
         super(input);
     }

     private LinkedList<Token> buf;

     /** Returns the next token in the stream, or null at EOS. */
     public Token next() throws IOException {
         Token next;
         if (buf == null) {
             buf = new LinkedList<Token>();
             next = input.next();
             while (next != null) {
                 Matcher m = p.matcher(next.termText());
                 if (m.matches()) {
                     buf.add(new Token(m.group(1) + m.group(2),  
m.start(1), m.end(2), "composite dashword"));
                     buf.add(new Token(m.group(1), m.start(1), m.end 
(1), "left dashword"));
                     buf.add(new Token(m.group(2), m.start(2), m.end 
(2), "right dashword"));
                 }
                 next = input.next();
             }
         }

         if (buf.size() > 0) {
             return buf.removeFirst();
         } else {
             return null;
         }
     }

}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 22:59:40 2006
Return-Path: <java-user-return-20237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42865 invoked from network); 17 Apr 2006 22:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 22:59:40 -0000
Received: (qmail 92823 invoked by uid 500); 17 Apr 2006 22:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92793 invoked by uid 500); 17 Apr 2006 22:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92782 invoked by uid 99); 17 Apr 2006 22:59:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 15:59:35 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ananth.t.sarathy@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 15:59:34 -0700
Received: by nz-out-0102.google.com with SMTP id 18so1014617nzp
        for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 15:59:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rc+AGDdbqzDVQoRY7A3sQDokYvcmcCGe6c9QhTv/2jtApGDcU6aP8P7efq5oDi+AnRKcHdEL/5SuIouT3yjnqA1bQm1ODyy1mNuVmdy8OJgdmGdF/jkbHpv5pYKqlqpQ/xwed098mpTW2Z1alh8WaxcyuJ6HGQCvHOUZpvP5djw=
Received: by 10.65.163.17 with SMTP id q17mr2230623qbo;
        Mon, 17 Apr 2006 15:59:13 -0700 (PDT)
Received: by 10.65.188.2 with HTTP; Mon, 17 Apr 2006 15:59:13 -0700 (PDT)
Message-ID: <ad681e7f0604171559q7f0e36e3gf9eff681a7b442af@mail.gmail.com>
Date: Mon, 17 Apr 2006 18:59:13 -0400
From: "Ananth T. Sarathy" <ananth.t.sarathy@gmail.com>
To: java-user@lucene.apache.org
Subject: Maximum Length of String for a Field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1119_24614898.1145314753934"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1119_24614898.1145314753934
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Is there maximum length to a string that is analazyed and put into a field?
IE if the String is 1 billion characters and analyzed, tokenized, and the
last word in the string only appears once at the end, would searching for
that last word against that field end with a hit for that document?

--
Ananth T Sarathy

------=_Part_1119_24614898.1145314753934--

From java-user-return-20238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 17 23:12:49 2006
Return-Path: <java-user-return-20238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46710 invoked from network); 17 Apr 2006 23:12:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Apr 2006 23:12:49 -0000
Received: (qmail 9106 invoked by uid 500); 17 Apr 2006 23:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9078 invoked by uid 500); 17 Apr 2006 23:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9067 invoked by uid 99); 17 Apr 2006 23:12:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 16:12:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.93.161.132] (HELO mail1.zvents.com) (216.93.161.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 16:12:42 -0700
Received: from Oblong.zvents.com (c-71-198-187-222.hsd1.ca.comcast.net [71.198.187.222])
	by mail1.zvents.com (Postfix) with ESMTP id 0E84D9BBCA
	for <java-user@lucene.apache.org>; Mon, 17 Apr 2006 16:12:18 -0700 (PDT)
Message-Id: <6.2.3.4.0.20060417161012.01e07610@mail1.zvents.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Mon, 17 Apr 2006 16:11:58 -0700
To: java-user@lucene.apache.org
From: Tom Hill <lucene-list@zvents.com>
Subject: Maximum Length of String for a Field
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>Is there maximum length to a string that is analazyed and put into a field?
>IE if the String is 1 billion characters and analyzed, tokenized, and the
>last word in the string only appears once at the end, would searching for
>that last word against that field end with a hit for that document?

Note that I'm relatively new here, too.

But I think the answer to your question is "no", based on 
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#setMaxFieldLength(int)


>public void setMaxFieldLength(int maxFieldLength)
>The maximum number of terms that will be indexed for a single field 
>in a document. This limits the amount of memory required for 
>indexing, so that collections with very large files will not crash 
>the indexing process by running out of memory.
>Note that this effectively truncates large documents, excluding from 
>the index terms that occur further in the document. If you know your 
>source documents are large, be sure to set this value high enough to 
>accomodate the expected size. If you set it to Integer.MAX_VALUE, 
>then the only limit is your memory, but you should anticipate an 
>OutOfMemoryError.
>By default, no more than 10,000 terms will be indexed for a field.
Tom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 04:36:29 2006
Return-Path: <java-user-return-20239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61098 invoked from network); 18 Apr 2006 04:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 04:36:27 -0000
Received: (qmail 30415 invoked by uid 500); 18 Apr 2006 04:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30371 invoked by uid 500); 18 Apr 2006 04:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30360 invoked by uid 500); 18 Apr 2006 04:36:20 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 30356 invoked by uid 99); 18 Apr 2006 04:36:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 21:36:20 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pksunilpk@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Apr 2006 21:36:19 -0700
Received: by nz-out-0102.google.com with SMTP id x3so651321nzd
        for <lucene-user@jakarta.apache.org>; Mon, 17 Apr 2006 21:35:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=U3oGc46E4AecGV6jV/8ZxigSTmWImZWiBU2apXiA8zGk2ePh9NnIzIF/IutXLnLd4rMd9IfG3bl6t1vpkBaHbst7nkrzfkldidW9IxQaqAPucoBG681Z+nOCeaEE99aUfTnE9/tSIoG8271lQA10hbrw9SC+51g6jPGtb+yUn+4=
Received: by 10.36.58.17 with SMTP id g17mr7432649nza;
        Mon, 17 Apr 2006 21:35:59 -0700 (PDT)
Received: by 10.36.79.2 with HTTP; Mon, 17 Apr 2006 21:35:59 -0700 (PDT)
Message-ID: <a9893f800604172135m7ac668d2t7006b7f6a7a61f02@mail.gmail.com>
Date: Tue, 18 Apr 2006 10:05:59 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Subscribe me
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1453_23941244.1145334959367"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1453_23941244.1145334959367
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline



------=_Part_1453_23941244.1145334959367--

From java-user-return-20240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 08:45:40 2006
Return-Path: <java-user-return-20240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79709 invoked from network); 18 Apr 2006 08:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 08:45:35 -0000
Received: (qmail 66345 invoked by uid 500); 18 Apr 2006 08:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66298 invoked by uid 500); 18 Apr 2006 08:45:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66287 invoked by uid 99); 18 Apr 2006 08:45:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 01:45:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 01:45:24 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k3I8j1pI052112
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 10:45:01 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200604180845.k3I8j1pI052112@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: hypens
Date: Tue, 18 Apr 2006 10:44:56 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291F3F8F@bettylou.configureone.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcZiQEIXZ7AKJQo3Q8CZUE9AXvYSUAAg6hYw
X-Scanned-By: MIMEDefang 2.52 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Hi,
I would use index & search analyzers in this case..
"b-trunk" is analyzed & indexed as b,btrunk,trunk
Search term "b-trunk" is anlayzed using search analyzer as "btrunk" and
searched. U will find the result..

Similarly for 12412-235, 12412-121, 12412-etc , indexed as
12412,12412235,235 etc....
So obviously it will find 12412 search term.


Good luck,
Jelda


> -----Original Message-----
> From: John Powers [mailto:jpowers@configureone.com] 
> Sent: Monday, April 17, 2006 6:59 PM
> To: java-user@lucene.apache.org
> Subject: hypens
> 
> Hello,
> 
>  
> 
> If I have a user search for "b-trunk"  I would like them to be able to
> 
> find "b-trunk" (with hypen).   I would also like someone searching for
> 
> "b trunk" to also find "b-trunk".
> 
>  
> 
> On the other side, if someone searches for 12412 I would like 
> them to be
> 
> able to find 12412-235, 12412-121, 12412-etc...      as well 
> as letting
> 
> someone type in 12412-235 directly and get a good result 
> list: the one item would be best, but a larger list with that 
> one on top is good too.
> 
>  
> 
> So for now I am using the standardanalyzer.   I do a search for what
> 
> they give me in quotes on all fields as well as the same 
> thing w/o quotes.  When I print out the final query the half 
> of the overall query in quotes seems to have the hypens 
> stripped out, but the w/o quotes
> 
> version doesn't...so this lets me find what I want.   But I have each
> 
> search phrase in the final query twice now.    it seems to work fine,
> 
> but it seems pretty inelegant--unelegant even.   
> 
>  
> 
> It seems like I can't just strip out the hypens, nor keep 
> them.    I am
> 
> storing the name as keyword, but everything else as Text.   I thought
> 
> that would matter but a description or keyword or other field 
> may have something like "this also relates to 23523-235"  so 
> if someone was searching for 23523 I would also want this in 
> the list... and if they
> 
> searched for the 23523-235 then I would also want this still.    So I
> 
> don't know if its solvable by the type of field I use to 
> index it.   Or
> 
> do I have to store each field twice with different analyzer?  
> That seems just as clumsy as my double-search solution.  
> 
>  
> 
> Any thoughts?
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 09:45:13 2006
Return-Path: <java-user-return-20241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8214 invoked from network); 18 Apr 2006 09:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 09:45:13 -0000
Received: (qmail 41177 invoked by uid 500); 18 Apr 2006 09:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41103 invoked by uid 500); 18 Apr 2006 09:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40929 invoked by uid 99); 18 Apr 2006 09:45:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 02:45:02 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.216.176.118] (HELO vsmtp14.tin.it) (212.216.176.118)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 02:45:01 -0700
Received: from CICO (213.140.19.126) by vsmtp14.tin.it (7.2.072.1) (authenticated as casacicognani@tin.it)
        id 44417DA1000FF9B1 for java-user@lucene.apache.org; Tue, 18 Apr 2006 11:45:52 +0200
From: "Danilo Cicognani" <d.cicognani@tinfo.it>
To: <java-user@lucene.apache.org>
Subject: Re: Max Frequency and Tf/Idf
Date: Tue, 18 Apr 2006 11:45:38 +0200
Message-ID: <008101c662cc$d9693900$4a04a8c0@CICO>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <443F87D7.50201@syr.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Thread-Index: AcZf2bbKRDToxfLFSBWUPOhfy3M6qgC8jbyQ
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Grant Ingersoll and everybody.

> The Term Vector code can be used to get the term frequencies from a
> specific document.  Search this list, see the Lucene In
> Action book or
> look at http://www.cnlp.org/apachecon2005 for examples on how to use
> Term Vectors 

Maybe I didn't explain well my question.
Following is the code we are using now: we was considering the possiblity to
have more informations from Lucene (for example the maximum term frequency
in one document) to optimized the calculations.
The first method is the one that start the calculation of Tf/Idf using the
class TTfIdf whose constructor is reported below.

public TTfIdf getFieldTfIdf(long tid, long aid, String field) throws 
RisorseMultipleException, IOException, RisorsaNonTrovataException, 
TTfIdfException {
		reader= IndexReader.open(indexDir);
		int id=getDocumentId(tid,aid);
		TermFreqVector tfv = reader.getTermFreqVector(id,field);
		int[] freqs=tfv.getTermFrequencies();
		String[] terms=tfv.getTerms();
		int[] df=new int[terms.length];
		for(int i=0;i<df.length;i++)
			df[i]=reader.docFreq(new Term(field,terms[i]));
		TTfIdf tfidf = new TTfIdf(terms,freqs,df,reader.numDocs());
		reader.close();
		return tfidf;
	}

public TTfIdf(String[] terms,int[] freqs, int[] df,int docs) throws 
TTfIdfException{
		if(terms.length!=freqs.length||terms.length!=df.length)
throw new 
TTfIdfException("I vettori dei termini e delle frequenze sono di diversa 
lunghezza!");
		this.terms=terms;
		int l=freqs.length;
		int maxfreq=0;
		for(int i=0;i<l;i++){	// CAN BE OPTIMIZED IN SOME WAY?
			if(freqs[i]>maxfreq) maxfreq=freqs[i];
		}
		this.freqs=new double[l];
		double tf;
		double idf;
		for(int i=0;i<l;i++){	// CAN BE OPTIMIZED IN SOME WAY?
			tf=(double)freqs[i]/(double)maxfreq;
			idf=Math.log((double)docs/(double)df[i]);
			this.freqs[i]=tf*idf;
		}
	}

Have you got some suggestions?

**** 1000 KBye ****

 [) /\ |\| | |_ ()

web: www.ciconet.it
Web Portal Now: www.webportalnow.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 09:58:30 2006
Return-Path: <java-user-return-20242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13982 invoked from network); 18 Apr 2006 09:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 09:58:29 -0000
Received: (qmail 61757 invoked by uid 500); 18 Apr 2006 09:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61733 invoked by uid 500); 18 Apr 2006 09:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61722 invoked by uid 99); 18 Apr 2006 09:58:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 02:58:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 02:58:22 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Tue, 18 Apr 2006 11:57:58 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <008101c662cc$d9693900$4a04a8c0@CICO>
References: <008101c662cc$d9693900$4a04a8c0@CICO>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <952A7F45-FB89-49A5-8968-E892ED6D9B37@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Max Frequency and Tf/Idf
Date: Tue, 18 Apr 2006 12:00:14 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 18 Apr 2006 09:57:58.0635 (UTC) FILETIME=[9271BBB0:01C662CE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


18 apr 2006 kl. 11.45 skrev Danilo Cicognani:

> Following is the code we are using now: we was considering the  
> possiblity to
> have more informations from Lucene (for example the maximum term  
> frequency
> in one document) to optimized the calculations.
> The first method is the one that start the calculation of Tf/Idf  
> using the
> class TTfIdf whose constructor is reported below.
>
> 		for(int i=0;i<l;i++){	// CAN BE OPTIMIZED IN SOME WAY?
> 			if(freqs[i]>maxfreq) maxfreq=freqs[i];
> 		}
> 		this.freqs=new double[l];
> 		double tf;
> 		double idf;
> 		for(int i=0;i<l;i++){	// CAN BE OPTIMIZED IN SOME WAY?
> 			tf=(double)freqs[i]/(double)maxfreq;
> 			idf=Math.log((double)docs/(double)df[i]);
> 			this.freqs[i]=tf*idf;
> 		}

Not quite sure what you do above, but I guess you could caclulate the  
information at index time. To persist it in the index, extend/hack  
TermFreqVector and related IO-classes.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 13:39:00 2006
Return-Path: <java-user-return-20243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37712 invoked from network); 18 Apr 2006 13:38:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 13:38:59 -0000
Received: (qmail 32093 invoked by uid 500); 18 Apr 2006 13:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31632 invoked by uid 500); 18 Apr 2006 13:38:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31614 invoked by uid 99); 18 Apr 2006 13:38:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 06:38:37 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.27] (HELO web36610.mail.mud.yahoo.com) (209.191.85.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Apr 2006 06:38:35 -0700
Received: (qmail 22567 invoked by uid 60001); 18 Apr 2006 13:38:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EuOjHqcmvmDcRqTPu1kI9osLJKLTXta+Vbh26LuSBtWEsHBf04osD1o3SUFqpPfYFlQkfWdshkQxGiayhG6p3cOmTdbRbauB8nf7ygtrFKW3pHgme17PyERmWVhBNiCD5LrV7WRQ6bilISAp88wbLMlt0FEGUIjBQMwch0zZGfg=  ;
Message-ID: <20060418133811.22565.qmail@web36610.mail.mud.yahoo.com>
Received: from [193.130.68.19] by web36610.mail.mud.yahoo.com via HTTP; Tue, 18 Apr 2006 14:38:11 BST
Date: Tue, 18 Apr 2006 14:38:11 +0100 (BST)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: Re: Indexing - scheduled batch process or server?
To: java-user@lucene.apache.org
In-Reply-To: <EAE1D77F-CE14-4A75-BD07-B655646BF860@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the response, Jeremy.

Quartz seems like a great solution - are you running
it within the app server?

I think the benefits of doing this would be
convenience of messaging the search server to pick up
fresh indexes. Previously I considered a CRON job and
was thinking of making a web services call to achieve
the same thing.

The only thing that concerns me (and this is maybe a
question for the Quartz mailing list rather than this
one) is the spawning of user threads issue. That kind
of thing makes me nervous in an app server context,
but lots of people use Quartz for J2EE scheduling so
it must be fairly stable.

What was your experience of it?

Many thanks

Marc


--- Jeremy Hanna <jeremy_hanna@mac.com> wrote:

> I'm pretty new with this, but with my index for a
> database, I'm using  
> a Quartz scheduler.  Also at the end of the index
> update, I set my  
> singleton of IndexSearcher to null.  That way the
> index searcher will  
> be using the latest information.  That bit as well
> as setting it to  
> null and not closing it I found searching around on
> forums.  The  
> reason given for not closing it is to allow searches
> currently using  
> the index searches to finish using it.
> Anyway, I hope this helps.
> Jeremy
> 
> On Apr 17, 2006, at 2:53 PM, Marc Dauncey wrote:
> 
> > Hi everyone,
> >
> > I'm currently designing a Lucene search system and
> i'm
> > considering the indexing side of things.
> >
> > Just wondered what kind of architecture people
> have
> > adopted for indexing - are CHRON jobs sufficient
> for
> > high volume drip feed indexing or has anyone
> > implemented a more sophisticated solution with web
> > services to index on demand?
> >
> > And has anyone used Quartz to schedule Lucene
> index
> > updates?  Sounds like an interesting product in
> this
> > context.
> >
> > Many thanks
> >
> >
> > Marc Dauncey
> >
> >
> > 	
> > 	
> > 		
> >
>
___________________________________________________________
> > Yahoo! Messenger - NEW crystal clear PC to PC
> calling worldwide  
> > with voicemail http://uk.messenger.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
___________________________________________________________ 
24 FIFA World Cup tickets to be won with Yahoo! Mail http://uk.mail.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 15:07:06 2006
Return-Path: <java-user-return-20246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75368 invoked from network); 18 Apr 2006 14:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 14:59:05 -0000
Received: (qmail 83667 invoked by uid 500); 18 Apr 2006 14:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83399 invoked by uid 500); 18 Apr 2006 14:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83386 invoked by uid 99); 18 Apr 2006 14:57:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:57:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ramana.jelda@ciao-group.com designates 194.112.113.90 as permitted sender)
Received: from [194.112.113.90] (HELO pigeon.ciao.com) (194.112.113.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:57:48 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id k3IEvPYq022637
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 16:57:25 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200604181457.k3IEvPYq022637@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: hypens
Date: Tue, 18 Apr 2006 16:57:20 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291F3FF8@bettylou.configureone.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcZixEfNUGm1E+oRTS6YbBcM2gqQKwAM2VzgAAAhQ8A=
X-Scanned-By: MIMEDefang 2.52 on 194.112.113.90
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I mean, using separate analyzers for indexing & searching..

I will not use any standard analyzers provided by lucene rather implement a
custom anaylzer which is not so difficult.


Jelda

> -----Original Message-----
> From: John Powers [mailto:jpowers@configureone.com] 
> Sent: Tuesday, April 18, 2006 4:53 PM
> To: java-user@lucene.apache.org
> Subject: RE: hypens
> 
> What do you mean by "use index and search analyzers".  Don't 
> you always
> have to pass in an analyzer?   I am using the standardanalyzer in both
> cases.
> 
> Which analyzer are you recommending I use for this?   
> 
> -----Original Message-----
> From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]
> Sent: Tuesday, April 18, 2006 3:45 AM
> To: java-user@lucene.apache.org
> Subject: RE: hypens
> 
>  Hi,
> I would use index & search analyzers in this case..
> "b-trunk" is analyzed & indexed as b,btrunk,trunk Search term 
> "b-trunk" is anlayzed using search analyzer as "btrunk" and 
> searched. U will find the result..
> 
> Similarly for 12412-235, 12412-121, 12412-etc , indexed as
> 12412,12412235,235 etc....
> So obviously it will find 12412 search term.
> 
> 
> Good luck,
> Jelda
> 
> 
> > -----Original Message-----
> > From: John Powers [mailto:jpowers@configureone.com]
> > Sent: Monday, April 17, 2006 6:59 PM
> > To: java-user@lucene.apache.org
> > Subject: hypens
> > 
> > Hello,
> > 
> >  
> > 
> > If I have a user search for "b-trunk"  I would like them to 
> be able to
> > 
> > find "b-trunk" (with hypen).   I would also like someone 
> searching for
> > 
> > "b trunk" to also find "b-trunk".
> > 
> >  
> > 
> > On the other side, if someone searches for 12412 I would 
> like them to 
> > be
> > 
> > able to find 12412-235, 12412-121, 12412-etc...      as well 
> > as letting
> > 
> > someone type in 12412-235 directly and get a good result
> > list: the one item would be best, but a larger list with 
> that one on 
> > top is good too.
> > 
> >  
> > 
> > So for now I am using the standardanalyzer.   I do a search for what
> > 
> > they give me in quotes on all fields as well as the same thing w/o 
> > quotes.  When I print out the final query the half of the overall 
> > query in quotes seems to have the hypens stripped out, but the w/o 
> > quotes
> > 
> > version doesn't...so this lets me find what I want.   But I 
> have each
> > 
> > search phrase in the final query twice now.    it seems to 
> work fine,
> > 
> > but it seems pretty inelegant--unelegant even.   
> > 
> >  
> > 
> > It seems like I can't just strip out the hypens, nor keep 
> > them.    I am
> > 
> > storing the name as keyword, but everything else as Text.   
> I thought
> > 
> > that would matter but a description or keyword or other 
> field may have 
> > something like "this also relates to 23523-235"  so if someone was 
> > searching for 23523 I would also want this in the list... 
> and if they
> > 
> > searched for the 23523-235 then I would also want this 
> still.    So I
> > 
> > don't know if its solvable by the type of field I use to 
> > index it.   Or
> > 
> > do I have to store each field twice with different analyzer?  
> > That seems just as clumsy as my double-search solution.  
> > 
> >  
> > 
> > Any thoughts?
> > 
> >  
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 15:12:25 2006
Return-Path: <java-user-return-20245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78308 invoked from network); 18 Apr 2006 15:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 15:02:59 -0000
Received: (qmail 76376 invoked by uid 500); 18 Apr 2006 14:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76343 invoked by uid 500); 18 Apr 2006 14:54:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76332 invoked by uid 99); 18 Apr 2006 14:54:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:54:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:54:32 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: hypens
Date: Tue, 18 Apr 2006 09:52:58 -0500
Message-ID: <F9E303076B72074AB76B2C8F78952B291F3FF8@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: hypens
Thread-Index: AcZixEfNUGm1E+oRTS6YbBcM2gqQKwAM2Vzg
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What do you mean by "use index and search analyzers".  Don't you always
have to pass in an analyzer?   I am using the standardanalyzer in both
cases.

Which analyzer are you recommending I use for this?  =20

-----Original Message-----
From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]=20
Sent: Tuesday, April 18, 2006 3:45 AM
To: java-user@lucene.apache.org
Subject: RE: hypens

 Hi,
I would use index & search analyzers in this case..
"b-trunk" is analyzed & indexed as b,btrunk,trunk
Search term "b-trunk" is anlayzed using search analyzer as "btrunk" and
searched. U will find the result..

Similarly for 12412-235, 12412-121, 12412-etc , indexed as
12412,12412235,235 etc....
So obviously it will find 12412 search term.


Good luck,
Jelda


> -----Original Message-----
> From: John Powers [mailto:jpowers@configureone.com]=20
> Sent: Monday, April 17, 2006 6:59 PM
> To: java-user@lucene.apache.org
> Subject: hypens
>=20
> Hello,
>=20
> =20
>=20
> If I have a user search for "b-trunk"  I would like them to be able to
>=20
> find "b-trunk" (with hypen).   I would also like someone searching for
>=20
> "b trunk" to also find "b-trunk".
>=20
> =20
>=20
> On the other side, if someone searches for 12412 I would like=20
> them to be
>=20
> able to find 12412-235, 12412-121, 12412-etc...      as well=20
> as letting
>=20
> someone type in 12412-235 directly and get a good result=20
> list: the one item would be best, but a larger list with that=20
> one on top is good too.
>=20
> =20
>=20
> So for now I am using the standardanalyzer.   I do a search for what
>=20
> they give me in quotes on all fields as well as the same=20
> thing w/o quotes.  When I print out the final query the half=20
> of the overall query in quotes seems to have the hypens=20
> stripped out, but the w/o quotes
>=20
> version doesn't...so this lets me find what I want.   But I have each
>=20
> search phrase in the final query twice now.    it seems to work fine,
>=20
> but it seems pretty inelegant--unelegant even.  =20
>=20
> =20
>=20
> It seems like I can't just strip out the hypens, nor keep=20
> them.    I am
>=20
> storing the name as keyword, but everything else as Text.   I thought
>=20
> that would matter but a description or keyword or other field=20
> may have something like "this also relates to 23523-235"  so=20
> if someone was searching for 23523 I would also want this in=20
> the list... and if they
>=20
> searched for the 23523-235 then I would also want this still.    So I
>=20
> don't know if its solvable by the type of field I use to=20
> index it.   Or
>=20
> do I have to store each field twice with different analyzer? =20
> That seems just as clumsy as my double-search solution. =20
>=20
> =20
>=20
> Any thoughts?
>=20
> =20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 15:16:36 2006
Return-Path: <java-user-return-20247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84127 invoked from network); 18 Apr 2006 15:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 15:07:57 -0000
Received: (qmail 87176 invoked by uid 500); 18 Apr 2006 14:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87142 invoked by uid 500); 18 Apr 2006 14:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87131 invoked by uid 99); 18 Apr 2006 14:59:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:59:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:59:40 -0700
Received: by pproxy.gmail.com with SMTP id m51so2434455pye
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 07:59:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qwhshUldBGFO2uvrXFPbIEK6cuzx9v6Hb393UQdxp8hpHsqN+jYQbBEM6Lz75YQchpqpJmYrvwPWRTeURz5IqajF62s+JqwGNFjDsX5iVJFioNZncZoSuWcUIdM1fMdD5nTfFCniVW27XN/OOxm2MSP+7/RK/Tp3S33rIhBx0co=
Received: by 10.35.77.18 with SMTP id e18mr1328568pyl;
        Tue, 18 Apr 2006 07:59:18 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 18 Apr 2006 07:59:18 -0700 (PDT)
Message-ID: <c68e39170604180759v17e6e9d2u4246fbf0a9f179b2@mail.gmail.com>
Date: Tue, 18 Apr 2006 10:59:18 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: hypens
In-Reply-To: <F9E303076B72074AB76B2C8F78952B291F3FF8@bettylou.configureone.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <F9E303076B72074AB76B2C8F78952B291F3FF8@bettylou.configureone.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/18/06, John Powers <jpowers@configureone.com> wrote:
> What do you mean by "use index and search analyzers".  Don't you always
> have to pass in an analyzer?   I am using the standardanalyzer in both
> cases.

I think he means a different analyzer for search than is used for
indexing.  It can make sense in certain cases.

Solr has a WordDelimiterFilter that handles hyphen (and many other)
cases like this.
It can make wi-fi match a query of wifi or "wi fi" or "WiFi".  Solr
also allows easy specification of different analyzers for index vs
query time.

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters


-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 15:20:55 2006
Return-Path: <java-user-return-20244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97119 invoked from network); 18 Apr 2006 15:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 15:18:03 -0000
Received: (qmail 67851 invoked by uid 500); 18 Apr 2006 14:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67795 invoked by uid 500); 18 Apr 2006 14:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67784 invoked by uid 99); 18 Apr 2006 14:48:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:48:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 07:48:33 -0700
Received: by pproxy.gmail.com with SMTP id m51so2429891pye
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 07:48:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HmJ8mOYdJHr12gyXN4iLV04Z7jo9409zA3xLomKolyHUxYlLE9tz3Ac+6tRwoSK5yE6JbkCQS+FcCim9yzIP5MVdfTK4+GTj11oQoI6Q0QThp2vg/vXboO6AI3Pi61yCV4/nm0bdIpha7oEq9xwvvhw9vhIRzXOfk8YmFbGZoh0=
Received: by 10.35.14.1 with SMTP id r1mr1312350pyi;
        Tue, 18 Apr 2006 07:48:12 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 18 Apr 2006 07:48:12 -0700 (PDT)
Message-ID: <c68e39170604180748h37bdaa98m15f3f47d8d0ba79a@mail.gmail.com>
Date: Tue, 18 Apr 2006 10:48:12 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing - scheduled batch process or server?
In-Reply-To: <20060417205326.10736.qmail@web36605.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060417205326.10736.qmail@web36605.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/17/06, Marc Dauncey <marc_dauncey@yahoo.com> wrote:
> or has anyone
> implemented a more sophisticated solution with web
> services to index on demand?

In Solr, documents (XML versions of Lucene Documents) are POSTed to the ser=
ver.
There are explicit <commit/> commands that cause an new IndexReader to
be opened and warmed in the background.

-Yonik
http://incubator.apache.org/solr Solr, The Open Source Lucene Search Server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 17:43:31 2006
Return-Path: <java-user-return-20248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91062 invoked from network); 18 Apr 2006 17:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 17:43:31 -0000
Received: (qmail 29865 invoked by uid 500); 18 Apr 2006 17:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29653 invoked by uid 500); 18 Apr 2006 17:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29642 invoked by uid 99); 18 Apr 2006 17:43:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 10:43:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 10:43:22 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k3IHh0lw010984
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 10:43:01 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k3IHgwkO018979
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 10:43:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060418133811.22565.qmail@web36610.mail.mud.yahoo.com>
References: <20060418133811.22565.qmail@web36610.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <195FA0BA-0211-411B-8C3D-4B40B0729FFB@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Indexing - scheduled batch process or server?
Date: Tue, 18 Apr 2006 11:42:53 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Marc,

I am using it within the web app.  I use Spring and there are ways to  
throttle a call down to one thread with Spring, if you're worried  
about overloading the server when you update the index.  I'm not sure  
about Quartz and its ability to set a priority or limit the number of  
threads or how to use a thread pool or have load-balancing.  I did a  
quick search on the Quartz user forum and found a lot of discussion  
on Java threads though, so that might be promising (http:// 
forums.opensymphony.com/search.jspa?objID=f6&q=thread).

Anyway, Quartz has seemed to work for what I'm doing - I inherited  
using it from the previous developer and it's had a good history of  
being reliable for our stuff.

Jeremy

On Apr 18, 2006, at 7:38 AM, Marc Dauncey wrote:

> Thanks for the response, Jeremy.
>
> Quartz seems like a great solution - are you running
> it within the app server?
>
> I think the benefits of doing this would be
> convenience of messaging the search server to pick up
> fresh indexes. Previously I considered a CRON job and
> was thinking of making a web services call to achieve
> the same thing.
>
> The only thing that concerns me (and this is maybe a
> question for the Quartz mailing list rather than this
> one) is the spawning of user threads issue. That kind
> of thing makes me nervous in an app server context,
> but lots of people use Quartz for J2EE scheduling so
> it must be fairly stable.
>
> What was your experience of it?
>
> Many thanks
>
> Marc
>
>
> --- Jeremy Hanna <jeremy_hanna@mac.com> wrote:
>
>> I'm pretty new with this, but with my index for a
>> database, I'm using
>> a Quartz scheduler.  Also at the end of the index
>> update, I set my
>> singleton of IndexSearcher to null.  That way the
>> index searcher will
>> be using the latest information.  That bit as well
>> as setting it to
>> null and not closing it I found searching around on
>> forums.  The
>> reason given for not closing it is to allow searches
>> currently using
>> the index searches to finish using it.
>> Anyway, I hope this helps.
>> Jeremy
>>
>> On Apr 17, 2006, at 2:53 PM, Marc Dauncey wrote:
>>
>>> Hi everyone,
>>>
>>> I'm currently designing a Lucene search system and
>> i'm
>>> considering the indexing side of things.
>>>
>>> Just wondered what kind of architecture people
>> have
>>> adopted for indexing - are CHRON jobs sufficient
>> for
>>> high volume drip feed indexing or has anyone
>>> implemented a more sophisticated solution with web
>>> services to index on demand?
>>>
>>> And has anyone used Quartz to schedule Lucene
>> index
>>> updates?  Sounds like an interesting product in
>> this
>>> context.
>>>
>>> Many thanks
>>>
>>>
>>> Marc Dauncey
>>>
>>>
>>> 	
>>> 	
>>> 		
>>>
>>
> ___________________________________________________________
>>> Yahoo! Messenger - NEW crystal clear PC to PC
>> calling worldwide
>>> with voicemail http://uk.messenger.yahoo.com
>>>
>>>
>>
> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>>
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
>
>
> 		
> ___________________________________________________________
> 24 FIFA World Cup tickets to be won with Yahoo! Mail http:// 
> uk.mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 18:11:15 2006
Return-Path: <java-user-return-20249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3292 invoked from network); 18 Apr 2006 18:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 18:11:15 -0000
Received: (qmail 76786 invoked by uid 500); 18 Apr 2006 18:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76759 invoked by uid 500); 18 Apr 2006 18:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76748 invoked by uid 99); 18 Apr 2006 18:11:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 11:11:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.172] (HELO smtpout.mac.com) (17.250.248.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 11:11:08 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout02/MantshX 4.0) with ESMTP id k3IIAkQr005214
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 11:10:47 -0700 (PDT)
Received: from [131.111.248.102] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k3IIAisR013303
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 11:10:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <4D75C95B-A176-4998-932A-23B78C773FA3@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Mailing List <java-user@lucene.apache.org>
From: Michael Dodson <mgdodson@mac.com>
Subject: wildcards with SpanQuery
Date: Tue, 18 Apr 2006 19:10:43 +0100
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is it possible to use wildcards with SpanNearQuery?

For example, if the user enters "fast car" with a slop of 1 things  
like "fast cars" "faster cars" "fast brown cars" etc would be found?

Thanks,
Mike 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 18:32:09 2006
Return-Path: <java-user-return-20250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16412 invoked from network); 18 Apr 2006 18:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 18:32:07 -0000
Received: (qmail 17655 invoked by uid 500); 18 Apr 2006 18:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17603 invoked by uid 500); 18 Apr 2006 18:32:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17554 invoked by uid 99); 18 Apr 2006 18:32:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 11:32:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.174] (HELO hnexfe08.hetnet.nl) (195.121.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 11:32:00 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe08.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Tue, 18 Apr 2006 20:31:33 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <4D75C95B-A176-4998-932A-23B78C773FA3@mac.com>
References: <4D75C95B-A176-4998-932A-23B78C773FA3@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A1633A6B-7280-46E7-9D1B-8EC5A465CDFA@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: wildcards with SpanQuery
Date: Tue, 18 Apr 2006 20:33:45 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 18 Apr 2006 18:31:33.0158 (UTC) FILETIME=[5154CC60:01C66316]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


18 apr 2006 kl. 20.10 skrev Michael Dodson:

> Is it possible to use wildcards with SpanNearQuery?
>
> For example, if the user enters "fast car" with a slop of 1 things  
> like "fast cars" "faster cars" "fast brown cars" etc would be found?

You might be looking for stem-analysis? You can, for instance, take a  
look at the snowball stemmers.

Wildcards would be if the user enters 'fast* car'.

But to answer your question, there is no SpanWildcardQuery as far as  
I know. You could make one though. And I can imagine it would, just  
as SpanFuzzyQuery, be really slow and virtually unusable in the hand  
of the users.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 19:46:59 2006
Return-Path: <java-user-return-20251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69846 invoked from network); 18 Apr 2006 19:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 19:46:58 -0000
Received: (qmail 53111 invoked by uid 500); 18 Apr 2006 19:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52905 invoked by uid 500); 18 Apr 2006 19:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52894 invoked by uid 99); 18 Apr 2006 19:46:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:46:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.140.8.220] (HELO nemausa.cc.emory.edu) (170.140.8.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:46:51 -0700
Received: from localhost (localhost [127.0.0.1])
	by nemausa.cc.emory.edu (8.13.6/8.13.6) with SMTP id k3IJkRD8016827
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 15:46:27 -0400 (EDT)
Received: from metascholar3.library.emory.edu(metascholar3.library.emory.edu
	 [170.140.210.99]) bywebmail.service.emory.edu (Horde MIME library) with 
	HTTP; Tue, 18 Apr 200615:46:18 -0400
Message-ID: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu>
Date: Tue, 18 Apr 2006 15:46:18 -0400
From: Urvashi Gadi <ugadi@emory.edu>
To: java-user@lucene.apache.org
Subject: using custom sort method
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-imss-version: 2.038
X-imss-result: Passed
X-imss-approveListMatch: *@emory.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello All,

My requirement is to combine 2 or more fields using some critera (for 
example weighted average) and sort the search results based on the 
combined fields.

I am looking at DistanceComparatorSource class to implement custom sort 
but it takes only one field for calculation and then sorts the result. 
Is there a way to use more than one field? I looked in sorts in 
succession by the criteria in each SortField class but this doesn't 
fulfill my requirement.

Please suggest.

Urvashi





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 19:47:38 2006
Return-Path: <java-user-return-20252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70041 invoked from network); 18 Apr 2006 19:47:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 19:47:37 -0000
Received: (qmail 54332 invoked by uid 500); 18 Apr 2006 19:47:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54307 invoked by uid 500); 18 Apr 2006 19:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54296 invoked by uid 99); 18 Apr 2006 19:47:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:47:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:47:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D36CE33C697; Tue, 18 Apr 2006 15:47:08 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 5509133C0F9
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 15:47:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <A1633A6B-7280-46E7-9D1B-8EC5A465CDFA@snigel.net>
References: <4D75C95B-A176-4998-932A-23B78C773FA3@mac.com> <A1633A6B-7280-46E7-9D1B-8EC5A465CDFA@snigel.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <374AA440-EA6C-4475-9599-8116F54A8D97@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: wildcards with SpanQuery
Date: Tue, 18 Apr 2006 15:47:03 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There isn't a SpanWildcardQuery, per se, but there is a SpanRegexQuery:

	<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/regex/src/ 
java/org/apache/lucene/search/regex/>

It can be used to achieve the same sort of thing, only using standard  
regex syntax like fast.* (instead of fast*)

But, stemming should be considered as well.  It'd certainly be more  
performant using a regular PhraseQuery with terms analyzed and  
stemmed, matching terms analyzed the same way during indexing.

	Erik


On Apr 18, 2006, at 2:33 PM, karl wettin wrote:

>
> 18 apr 2006 kl. 20.10 skrev Michael Dodson:
>
>> Is it possible to use wildcards with SpanNearQuery?
>>
>> For example, if the user enters "fast car" with a slop of 1 things  
>> like "fast cars" "faster cars" "fast brown cars" etc would be found?
>
> You might be looking for stem-analysis? You can, for instance, take  
> a look at the snowball stemmers.
>
> Wildcards would be if the user enters 'fast* car'.
>
> But to answer your question, there is no SpanWildcardQuery as far  
> as I know. You could make one though. And I can imagine it would,  
> just as SpanFuzzyQuery, be really slow and virtually unusable in  
> the hand of the users.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 19:50:11 2006
Return-Path: <java-user-return-20253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70804 invoked from network); 18 Apr 2006 19:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 19:50:10 -0000
Received: (qmail 56572 invoked by uid 500); 18 Apr 2006 19:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56540 invoked by uid 500); 18 Apr 2006 19:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56529 invoked by uid 99); 18 Apr 2006 19:50:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:50:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 12:50:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BA3B433CA80; Tue, 18 Apr 2006 15:49:43 -0400 (EDT)
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 8503133CA7C
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 15:49:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu>
References: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E78DA396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using custom sort method
Date: Tue, 18 Apr 2006 15:49:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could your computation be done at indexing time rather than at search  
time?  If so, pre-compute the value and index that into a single field.

	Erik


On Apr 18, 2006, at 3:46 PM, Urvashi Gadi wrote:

> Hello All,
>
> My requirement is to combine 2 or more fields using some critera  
> (for example weighted average) and sort the search results based on  
> the combined fields.
>
> I am looking at DistanceComparatorSource class to implement custom  
> sort but it takes only one field for calculation and then sorts the  
> result. Is there a way to use more than one field? I looked in  
> sorts in succession by the criteria in each SortField class but  
> this doesn't fulfill my requirement.
>
> Please suggest.
>
> Urvashi
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 18 23:59:54 2006
Return-Path: <java-user-return-20254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86010 invoked from network); 18 Apr 2006 23:59:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Apr 2006 23:59:53 -0000
Received: (qmail 85455 invoked by uid 500); 18 Apr 2006 23:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85421 invoked by uid 500); 18 Apr 2006 23:59:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85409 invoked by uid 99); 18 Apr 2006 23:59:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 16:59:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.140.8.221] (HELO pales.cc.emory.edu) (170.140.8.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 16:59:46 -0700
Received: from localhost (localhost [127.0.0.1])
	by pales.cc.emory.edu (8.13.6/8.13.6) with ESMTP id k3INxNwW007587
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 19:59:23 -0400 (EDT)
Received: from 
	adsl-145-208-254.asm.bellsouth.net(adsl-145-208-254.asm.bellsouth.net 
	[72.145.208.254]) bywebmail.service.emory.edu (Horde MIME library) with 
	HTTP; Tue, 18 Apr 200619:59:23 -0400
Message-ID: <20060418195923.njbskaif40ggkccg@webmail.service.emory.edu>
Date: Tue, 18 Apr 2006 19:59:23 -0400
From: Urvashi Gadi <ugadi@emory.edu>
To: java-user@lucene.apache.org
Subject: Re: using custom sort method
References: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu><E78D
	A396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com>
In-Reply-To: <E78DA396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-imss-version: 2.038
X-imss-result: Passed
X-imss-approveListMatch: *@emory.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No...the information is available only at search time

Quoting Erik Hatcher <erik@ehatchersolutions.com>:

> Could your computation be done at indexing time rather than at search 
>  time?  If so, pre-compute the value and index that into a single 
> field.
>
> 	Erik
>
>
> On Apr 18, 2006, at 3:46 PM, Urvashi Gadi wrote:
>
>> Hello All,
>>
>> My requirement is to combine 2 or more fields using some critera  
>> (for example weighted average) and sort the search results based on  
>> the combined fields.
>>
>> I am looking at DistanceComparatorSource class to implement custom  
>> sort but it takes only one field for calculation and then sorts the  
>> result. Is there a way to use more than one field? I looked in  
>> sorts in succession by the criteria in each SortField class but  
>> this doesn't fulfill my requirement.
>>
>> Please suggest.
>>
>> Urvashi
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 02:00:35 2006
Return-Path: <java-user-return-20255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32859 invoked from network); 19 Apr 2006 02:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 02:00:34 -0000
Received: (qmail 72429 invoked by uid 500); 19 Apr 2006 02:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72393 invoked by uid 500); 19 Apr 2006 02:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72382 invoked by uid 99); 19 Apr 2006 02:00:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 19:00:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 19:00:27 -0700
Received: by nz-out-0102.google.com with SMTP id 18so1466543nzp
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 19:00:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fFFb5ESTRMh8ChjFJ6YJFryMTKc5+YqO/mbCOIcQA8YNlnIPsPuvYjmtJfVA/tQpgXWxybHkNQx2z5aSEADznV0TtFSJNcXdTdy/cPoxkjHeNcIklZwfyt2KenuU+au23I5UaC/DHn412CGI2EkU5+xg1WTsG5CUJ7l8m2NteWI=
Received: by 10.65.84.17 with SMTP id m17mr743231qbl;
        Tue, 18 Apr 2006 19:00:07 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Tue, 18 Apr 2006 19:00:07 -0700 (PDT)
Message-ID: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
Date: Tue, 18 Apr 2006 22:00:07 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: using boolean operators with the PhraseQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am trying to find the number of hits for a phrase using the
PhraseQuery. I would like to know how I could seach for 2 phrases at
the same time using the boolean operators OR, AND. The code snippet
that I use to seach for one phrase is

String test =3D"avoids deadlock"
String[] phraseTerms =3D test.split( " ");
PhraseQuery query =3Dnew PhraseQuery();=09=09=09
searcher =3D new IndexSearcher(rd);=09=09=09
Term[] phrTerm=3Dnew Term[phraseTerms.length];
for(int u=3D0; u<phraseTerms.length;u++)
{
phrTerm[u]=3Dnew Term("contents",phraseTerms[u]);
query.add(phrTerm[u]);
}

Hits hits =3D searcher.search(query);=09

How can I extend this to search for multiple phrases?

Regards
Vishal
--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 02:58:48 2006
Return-Path: <java-user-return-20256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58353 invoked from network); 19 Apr 2006 02:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 02:58:48 -0000
Received: (qmail 18210 invoked by uid 500); 19 Apr 2006 02:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17733 invoked by uid 500); 19 Apr 2006 02:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17722 invoked by uid 99); 19 Apr 2006 02:58:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 19:58:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 19:58:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8124A33CA7C; Tue, 18 Apr 2006 22:58:20 -0400 (EDT)
Received: from [172.16.1.102] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id D29FD33CA7C
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 22:58:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2986E7C0-82E1-42D8-A164-5DACEE09BA52@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: using boolean operators with the PhraseQuery
Date: Tue, 18 Apr 2006 22:58:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wrap the PhraseQuery's inside a BooleanQuery to achieve AND/OR.

	Erik


On Apr 18, 2006, at 10:00 PM, Vishal Bathija wrote:

> Hi,
> I am trying to find the number of hits for a phrase using the
> PhraseQuery. I would like to know how I could seach for 2 phrases at
> the same time using the boolean operators OR, AND. The code snippet
> that I use to seach for one phrase is
>
> String test ="avoids deadlock"
> String[] phraseTerms = test.split( " ");
> PhraseQuery query =new PhraseQuery();			
> searcher = new IndexSearcher(rd);			
> Term[] phrTerm=new Term[phraseTerms.length];
> for(int u=0; u<phraseTerms.length;u++)
> {
> phrTerm[u]=new Term("contents",phraseTerms[u]);
> query.add(phrTerm[u]);
> }
>
> Hits hits = searcher.search(query);	
>
> How can I extend this to search for multiple phrases?
>
> Regards
> Vishal
> --
> Vishal Bathija
> Graduate Student
> Department of Computer Science & Systems Analysis
> Miami University
> Oxford,Ohio
> Phone: (513)-461-9239
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 03:44:42 2006
Return-Path: <java-user-return-20257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72709 invoked from network); 19 Apr 2006 03:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 03:44:42 -0000
Received: (qmail 55451 invoked by uid 500); 19 Apr 2006 03:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55424 invoked by uid 500); 19 Apr 2006 03:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55413 invoked by uid 99); 19 Apr 2006 03:44:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 20:44:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 20:44:36 -0700
Received: by nz-out-0102.google.com with SMTP id 18so1494985nzp
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 20:44:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LUHt4ccs3xCiOicj+hNcVm5ptKHtS2ameVpUUilH9HaaYHmJ38f0Bq2C+P7pokfFruHRzhdAIURWC4xSgIuDi1DGfvxgSkW7vD4OKy+YhJdDigVEB3RVVj6SgM+aj+pB1JM10L3/V1h17uIK8BxPqDflbz+0jRiF4N32yCYwWa0=
Received: by 10.65.177.17 with SMTP id e17mr2899534qbp;
        Tue, 18 Apr 2006 20:44:13 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Tue, 18 Apr 2006 20:44:13 -0700 (PDT)
Message-ID: <f742a72b0604182044g50164c43ne1f08a61679b0e6f@mail.gmail.com>
Date: Tue, 18 Apr 2006 23:44:13 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
In-Reply-To: <2986E7C0-82E1-42D8-A164-5DACEE09BA52@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
	 <2986E7C0-82E1-42D8-A164-5DACEE09BA52@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not sure if I understand you.  Do I add the terms for the second
phrase immediately after I add the terms for the first phrase. When do
i wrap the PhraseQuery I construct into a BooleanQuery.

For instance
String newTerm1=3D "avoids deadlock";
String newTerm2=3D "reduces cost";
PhraseQuery query =3Dnew PhraseQuery();=09

String[] phraseTerms1 =3D newTerm1.split( " ");
Term[] phrTerm1=3Dnew Term[phraseTerms1.length];

for(int u=3D0; u<phraseTerms1.length;u++)
{
=09=09=09=09=09=09=09phrTerm1[u]=3Dnew Term("contents",phraseTerms1[u]);
=09query.add(phrTerm1[u]);
}

String[] phraseTerms2 =3D newTerm2.split( " ");=09=09=09
Term[] phrTerm2=3Dnew Term[phraseTerms2.length];

for(int u=3D0; u<phraseTerms2.length;u++)
{
=09=09=09=09=09=09=09phrTerm2[u]=3Dnew Term("contents",phraseTerms2[u]);
=09query.add(phrTerm2[u]);
=09=09=09=09=09=09
}
Hits hits =3D searcher.search(query);=09=09
=09=09=09=09=09=09=09=09=09The code above just adds the terms of phrase2 fo=
llowing the
terms  for phrase1.
Can you give me an example building a BooleanQuery OR  for the
newTerm1 and newTerm2.

Thanks again
Vishal



On 4/18/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> Wrap the PhraseQuery's inside a BooleanQuery to achieve AND/OR.
>
>        Erik
>
>
> On Apr 18, 2006, at 10:00 PM, Vishal Bathija wrote:
>
> > Hi,
> > I am trying to find the number of hits for a phrase using the
> > PhraseQuery. I would like to know how I could seach for 2 phrases at
> > the same time using the boolean operators OR, AND. The code snippet
> > that I use to seach for one phrase is
> >
> > String test =3D"avoids deadlock"
> > String[] phraseTerms =3D test.split( " ");
> > PhraseQuery query =3Dnew PhraseQuery();
> > searcher =3D new IndexSearcher(rd);
> > Term[] phrTerm=3Dnew Term[phraseTerms.length];
> > for(int u=3D0; u<phraseTerms.length;u++)
> > {
> > phrTerm[u]=3Dnew Term("contents",phraseTerms[u]);
> > query.add(phrTerm[u]);
> > }
> >
> > Hits hits =3D searcher.search(query);
> >
> > How can I extend this to search for multiple phrases?
> >
> > Regards
> > Vishal
> > --
> > Vishal Bathija
> > Graduate Student
> > Department of Computer Science & Systems Analysis
> > Miami University
> > Oxford,Ohio
> > Phone: (513)-461-9239
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 04:06:17 2006
Return-Path: <java-user-return-20258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78153 invoked from network); 19 Apr 2006 04:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 04:06:16 -0000
Received: (qmail 75439 invoked by uid 500); 19 Apr 2006 04:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75410 invoked by uid 500); 19 Apr 2006 04:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75399 invoked by uid 99); 19 Apr 2006 04:06:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:06:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.203.135.180] (HELO exfe02.ist.local) (130.203.135.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:06:10 -0700
Received: from [192.168.2.11] ([64.178.96.57]) by exfe02.ist.local with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Apr 2006 00:05:49 -0400
Message-ID: <4445B71D.1000406@ist.psu.edu>
Date: Wed, 19 Apr 2006 00:05:49 -0400
From: Yang Sun <ysun@ist.psu.edu>
User-Agent: Mozilla Thunderbird 1.0.2-6 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: using custom sort method
References: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu><E78DA396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com> <20060418195923.njbskaif40ggkccg@webmail.service.emory.edu>
In-Reply-To: <20060418195923.njbskaif40ggkccg@webmail.service.emory.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 19 Apr 2006 04:05:49.0201 (UTC) FILETIME=[8ABBB810:01C66366]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have asked the exact same question a few weeks ago. I just follow the 
customized distance example and loop the results again to get another 
field and compute the scores. It will be painful if you need more than 3 
fields. So far I didn't find any other way to do it. Hope we can see 
some new classes to address the problem. To be able to customize ranking 
is very important to a search engine.

Yang

Urvashi Gadi wrote:

> No...the information is available only at search time
>
> Quoting Erik Hatcher <erik@ehatchersolutions.com>:
>
>> Could your computation be done at indexing time rather than at search 
>>  time?  If so, pre-compute the value and index that into a single field.
>>
>>     Erik
>>
>>
>> On Apr 18, 2006, at 3:46 PM, Urvashi Gadi wrote:
>>
>>> Hello All,
>>>
>>> My requirement is to combine 2 or more fields using some critera  
>>> (for example weighted average) and sort the search results based on  
>>> the combined fields.
>>>
>>> I am looking at DistanceComparatorSource class to implement custom  
>>> sort but it takes only one field for calculation and then sorts the  
>>> result. Is there a way to use more than one field? I looked in  
>>> sorts in succession by the criteria in each SortField class but  
>>> this doesn't fulfill my requirement.
>>>
>>> Please suggest.
>>>
>>> Urvashi
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 04:27:36 2006
Return-Path: <java-user-return-20259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86311 invoked from network); 19 Apr 2006 04:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 04:27:35 -0000
Received: (qmail 96794 invoked by uid 500); 19 Apr 2006 04:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96769 invoked by uid 500); 19 Apr 2006 04:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96758 invoked by uid 99); 19 Apr 2006 04:27:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:27:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:27:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A3C715B776; Tue, 18 Apr 2006 21:27:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 982C27F403
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 21:27:00 -0700 (PDT)
Date: Tue, 18 Apr 2006 21:27:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
In-Reply-To: <f742a72b0604182044g50164c43ne1f08a61679b0e6f@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604182125070.13302@hal.rescomp.berkeley.edu>
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com> 
 <2986E7C0-82E1-42D8-A164-5DACEE09BA52@ehatchersolutions.com>
 <f742a72b0604182044g50164c43ne1f08a61679b0e6f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The code above just adds the terms of phrase2 following the
: terms  for phrase1.
: Can you give me an example building a BooleanQuery OR  for the
: newTerm1 and newTerm2.

At no point does your code use a BooleanQuery ... have you looked at the
javadocs for the BooleanQuery class?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 04:38:06 2006
Return-Path: <java-user-return-20260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89618 invoked from network); 19 Apr 2006 04:38:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 04:38:05 -0000
Received: (qmail 15328 invoked by uid 500); 19 Apr 2006 04:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15158 invoked by uid 500); 19 Apr 2006 04:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15147 invoked by uid 99); 19 Apr 2006 04:37:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:37:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pksunilpk@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:37:58 -0700
Received: by nz-out-0102.google.com with SMTP id 13so203509nzn
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 21:37:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=THeAPmAjIrAvJ/tm7RkM81QmnTyyq6h2+OWFJGpmg76vBPfZoHtO3FsfPYl4FX+HYy2Hg8CXllv90j4qiqF9UGEE9yC/m9zMFYeTcpcAUYOZrgOutsYloNYxv9OnE/1075cr1p9udz61LdyOlW+kLoem7KRvsWDHN5Y2fApp8ig=
Received: by 10.36.251.62 with SMTP id y62mr911817nzh;
        Tue, 18 Apr 2006 21:37:38 -0700 (PDT)
Received: by 10.36.79.2 with HTTP; Tue, 18 Apr 2006 21:37:38 -0700 (PDT)
Message-ID: <a9893f800604182137l71e5cfbet7ab6620f258398ba@mail.gmail.com>
Date: Wed, 19 Apr 2006 10:07:38 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: "java user" <java-user@lucene.apache.org>
Subject: Remote Parallel MultiSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_263_21907598.1145421458186"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_263_21907598.1145421458186
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi All,

What I have understood from Lucene Remote Parallel Multi Searcher Search
Procedure is first compute the weight for the Query in each Index
sequentially (one by one, eg: - calculate "query weight" of index1 first an=
d
then index2) and then perform searching of each index one by one and merge
the results.

I want to know is there any possibility or method to merge the weight
calculation of index1 and its search in a single RPC instead of doing the
both function in separate steps.

Another query I have to clear is In RemoteParallelMultiSearcher the method
"docFreq (Term term)" is not parallelized, why it is not
parallelized, and please specify any reason for that.

I am waiting for your feed back .

SuniL

------=_Part_263_21907598.1145421458186--

From java-user-return-20261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 04:39:13 2006
Return-Path: <java-user-return-20261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90241 invoked from network); 19 Apr 2006 04:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 04:39:13 -0000
Received: (qmail 19541 invoked by uid 500); 19 Apr 2006 04:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19310 invoked by uid 500); 19 Apr 2006 04:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19299 invoked by uid 99); 19 Apr 2006 04:39:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:39:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 21:39:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 599405B776; Tue, 18 Apr 2006 21:38:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4D9767F403
	for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 21:38:45 -0700 (PDT)
Date: Tue, 18 Apr 2006 21:38:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: using custom sort method
In-Reply-To: <4445B71D.1000406@ist.psu.edu>
Message-ID: <Pine.LNX.4.58.0604182129150.13302@hal.rescomp.berkeley.edu>
References: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu><E78DA396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com>
 <20060418195923.njbskaif40ggkccg@webmail.service.emory.edu>
 <4445B71D.1000406@ist.psu.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have asked the exact same question a few weeks ago. I just follow the
: customized distance example and loop the results again to get another
: field and compute the scores. It will be painful if you need more than 3
: fields. So far I didn't find any other way to do it. Hope we can see

It's not clear to me what exactly you've tried so far, and what it doesn't
do that you want it to ... can you post some code demonstrating your
problem?

: some new classes to address the problem. To be able to customize ranking
: is very important to a search engine.

Customizing ranking/scoring is not exactly the same thing as defining your
own sort -- there are lots of ways to customize the scoring of your
queries: doc boosts, field boosts, query boosts, customomized Similarity ...

you should also take a look at the FunctionQueries available in Solr, they
allow you to define custom functions that are factoried into the total
score of your query...

http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/package-summary.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 05:25:54 2006
Return-Path: <java-user-return-20262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11348 invoked from network); 19 Apr 2006 05:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 05:25:54 -0000
Received: (qmail 45306 invoked by uid 500); 19 Apr 2006 05:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44928 invoked by uid 500); 19 Apr 2006 05:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44911 invoked by uid 99); 19 Apr 2006 05:25:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 22:25:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 22:25:47 -0700
Received: by nz-out-0102.google.com with SMTP id 18so1520956nzp
        for <java-user@lucene.apache.org>; Tue, 18 Apr 2006 22:25:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FrLshabJC5we0Dr5nC/CEfSCi300Gc8YP/79yr8qv/zonYi6JW4qUeCBTvL9rFu2VufxCyBzr5+HczZAa/pmteFeLtJ6EDVoDWyOH0GGYoneNwWgiNX3eXRY55xSVnKsGRMYDvnT1Uwd1Qwd5CxGmmUjn77L7Z8boLiBJZ/utqE=
Received: by 10.65.51.19 with SMTP id d19mr661673qbk;
        Tue, 18 Apr 2006 22:25:24 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Tue, 18 Apr 2006 22:25:24 -0700 (PDT)
Message-ID: <f742a72b0604182225h3475469cq1c739ed48481a867@mail.gmail.com>
Date: Wed, 19 Apr 2006 01:25:24 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
In-Reply-To: <Pine.LNX.4.58.0604182125070.13302@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
	 <2986E7C0-82E1-42D8-A164-5DACEE09BA52@ehatchersolutions.com>
	 <f742a72b0604182044g50164c43ne1f08a61679b0e6f@mail.gmail.com>
	 <Pine.LNX.4.58.0604182125070.13302@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I tried using the boolean query to perform an OR  as below
BooleanQuery b1 =3D new BooleanQuery();
 b1.add(query,BooleanClause .Occur .SHOULD  );
 b1.add(query2,BooleanClause .Occur .SHOULD );
Hits hits =3D searcher.search(b1);=09=09


System.out.println("Query=3D "+b1.toString() );

gave me
Query=3D contents:"provides  distribution" contents:"supports  distribution=
"

This returns 0 hits.

I am not sure why it returns 0, when I have both phrases present in the doc=
s.


Vishal
On 4/19/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : The code above just adds the terms of phrase2 following the
> : terms  for phrase1.
> : Can you give me an example building a BooleanQuery OR  for the
> : newTerm1 and newTerm2.
>
> At no point does your code use a BooleanQuery ... have you looked at the
> javadocs for the BooleanQuery class?
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 06:06:45 2006
Return-Path: <java-user-return-20263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32977 invoked from network); 19 Apr 2006 06:06:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 06:06:42 -0000
Received: (qmail 81743 invoked by uid 500); 19 Apr 2006 06:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81720 invoked by uid 500); 19 Apr 2006 06:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81709 invoked by uid 99); 19 Apr 2006 06:06:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 23:06:29 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.129 as permitted sender)
Received: from [152.163.225.129] (HELO omr-r01.mail.aol.com) (152.163.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Apr 2006 23:06:28 -0700
Received: from aol.com (10.146.145.194)
  by omr-r01.mail.aol.com with ESMTP; 19 Apr 2006 02:06:07 -0400
Message-ID: <4445D34D.1070306@aol.com>
Date: Wed, 19 Apr 2006 11:36:05 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc4 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Any storage initatives for optimized indexing/searching
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems that the performance aspects of any indexing/searching 
algorithm is very much dependent upon the disk-access-technologies.  
Just curious, anybody know of any company working(mostly storage 
companies)  in improving their storage/disk access technology  to make  
indexing/searching efficient by optimizing  k-way merges/sorts ?

prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 07:32:05 2006
Return-Path: <java-user-return-20264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84666 invoked from network); 19 Apr 2006 07:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 07:32:05 -0000
Received: (qmail 86680 invoked by uid 500); 19 Apr 2006 07:31:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86599 invoked by uid 500); 19 Apr 2006 07:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86547 invoked by uid 99); 19 Apr 2006 07:31:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 00:31:57 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 68.142.198.212 is neither permitted nor denied by domain of canovaj@gmail.com)
Received: from [68.142.198.212] (HELO smtp113.sbc.mail.mud.yahoo.com) (68.142.198.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Apr 2006 00:31:56 -0700
Received: (qmail 3605 invoked from network); 19 Apr 2006 07:31:35 -0000
Received: from unknown (HELO gmail.com) (anjun.chen@sbcglobal.net@68.124.18.151 with plain)
  by smtp113.sbc.mail.mud.yahoo.com with SMTP; 19 Apr 2006 07:31:35 -0000
Message-ID: <4445E75D.6060504@gmail.com>
Date: Wed, 19 Apr 2006 00:31:41 -0700
From: AJ Chen <canovaj@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene user <java-user@lucene.apache.org>
Subject: dump lucene index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How to dump the whole index in lucene to file? 
Thanks.
AJ


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 09:28:32 2006
Return-Path: <java-user-return-20265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46189 invoked from network); 19 Apr 2006 09:28:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 09:28:32 -0000
Received: (qmail 232 invoked by uid 500); 19 Apr 2006 09:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 203 invoked by uid 500); 19 Apr 2006 09:28:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 192 invoked by uid 99); 19 Apr 2006 09:28:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 02:28:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 02:28:23 -0700
Received: (qmail 16254 invoked from network); 19 Apr 2006 09:28:00 -0000
Received: from unknown (HELO pd9fcb65c.dip.t-dialin.net) ([pbs]695637@[217.252.182.92])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 19 Apr 2006 09:28:00 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
Date: Wed, 19 Apr 2006 11:28:55 +0200
User-Agent: KMail/1.8.2
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com> <Pine.LNX.4.58.0604182125070.13302@hal.rescomp.berkeley.edu> <f742a72b0604182225h3475469cq1c739ed48481a867@mail.gmail.com>
In-Reply-To: <f742a72b0604182225h3475469cq1c739ed48481a867@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200604191128.55250@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 19 April 2006 07:25, Vishal Bathija wrote:

> Query=3D contents:"provides =C2=A0distribution" contents:"supports
> =C2=A0distribution"

Why are there two spaces between those words?

> I am not sure why it returns 0, when I have both phrases present in the
> docs.

See
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc=
022d889484a9248b71

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 12:43:30 2006
Return-Path: <java-user-return-20266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63683 invoked from network); 19 Apr 2006 12:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 12:43:10 -0000
Received: (qmail 72913 invoked by uid 500); 19 Apr 2006 12:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72888 invoked by uid 500); 19 Apr 2006 12:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72877 invoked by uid 99); 19 Apr 2006 12:42:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 05:42:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.175] (HELO hnexfe09.hetnet.nl) (195.121.6.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 05:42:56 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe09.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Wed, 19 Apr 2006 14:42:32 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <4445E75D.6060504@gmail.com>
References: <4445E75D.6060504@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0D77AD66-8D72-4DE6-99A0-28E4424DB192@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: dump lucene index
Date: Wed, 19 Apr 2006 14:44:46 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 19 Apr 2006 12:42:33.0002 (UTC) FILETIME=[BA7050A0:01C663AE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


19 apr 2006 kl. 09.31 skrev AJ Chen:

> How to dump the whole index in lucene to file? Thanks.

Use FSDirectory instead of RAMDirectory.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 14:56:02 2006
Return-Path: <java-user-return-20267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61333 invoked from network); 19 Apr 2006 14:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 14:55:44 -0000
Received: (qmail 63034 invoked by uid 500); 19 Apr 2006 14:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62976 invoked by uid 500); 19 Apr 2006 14:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62965 invoked by uid 99); 19 Apr 2006 14:55:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 07:55:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.140.8.221] (HELO pales.cc.emory.edu) (170.140.8.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 07:55:17 -0700
Received: from localhost (localhost [127.0.0.1])
	by pales.cc.emory.edu (8.13.6/8.13.6) with ESMTP id k3JEsq0r008642
	for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 10:54:54 -0400 (EDT)
Received: from metascholar3.library.emory.edu(metascholar3.library.emory.edu
	 [170.140.210.99]) bywebmail.service.emory.edu (Horde MIME library) with 
	HTTP; Wed, 19 Apr 200610:54:52 -0400
Message-ID: <20060419105452.rgwrk3i34c8wow80@webmail.service.emory.edu>
Date: Wed, 19 Apr 2006 10:54:52 -0400
From: Urvashi Gadi <ugadi@emory.edu>
To: java-user@lucene.apache.org
Subject: Re: using custom sort method
References: <20060418154618.8hu1kvk2oko0oos8@webmail.service.emory.edu><E78D
	A396-8ACA-4F3D-9E3E-E119036DA7F2@ehatchersolutions.com><20060418195923.njbs
	kaif40ggkccg@webmail.service.emory.edu><4445B71D.1000406@ist.psu.edu>
In-Reply-To: <4445B71D.1000406@ist.psu.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.0.4)
X-imss-version: 2.038
X-imss-result: Passed
X-imss-approveListMatch: *@emory.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yang,

If you could send some more details...it would be really helpful.

Thanks


Quoting Yang Sun <ysun@ist.psu.edu>:

> I have asked the exact same question a few weeks ago. I just follow 
> the customized distance example and loop the results again to get 
> another field and compute the scores. It will be painful if you need 
> more than 3 fields. So far I didn't find any other way to do it. Hope 
> we can see some new classes to address the problem. To be able to 
> customize ranking is very important to a search engine.
>
> Yang
>
> Urvashi Gadi wrote:
>
>> No...the information is available only at search time
>>
>> Quoting Erik Hatcher <erik@ehatchersolutions.com>:
>>
>>> Could your computation be done at indexing time rather than at 
>>> search  time?  If so, pre-compute the value and index that into a 
>>> single field.
>>>
>>>     Erik
>>>
>>>
>>> On Apr 18, 2006, at 3:46 PM, Urvashi Gadi wrote:
>>>
>>>> Hello All,
>>>>
>>>> My requirement is to combine 2 or more fields using some critera  
>>>> (for example weighted average) and sort the search results based 
>>>> on  the combined fields.
>>>>
>>>> I am looking at DistanceComparatorSource class to implement custom 
>>>>  sort but it takes only one field for calculation and then sorts 
>>>> the  result. Is there a way to use more than one field? I looked 
>>>> in  sorts in succession by the criteria in each SortField class 
>>>> but  this doesn't fulfill my requirement.
>>>>
>>>> Please suggest.
>>>>
>>>> Urvashi
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 18:10:20 2006
Return-Path: <java-user-return-20268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87864 invoked from network); 19 Apr 2006 18:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 18:10:19 -0000
Received: (qmail 16031 invoked by uid 500); 19 Apr 2006 18:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15668 invoked by uid 500); 19 Apr 2006 18:10:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15657 invoked by uid 99); 19 Apr 2006 18:10:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 11:10:11 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kvelentz@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nproxy.gmail.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 11:10:09 -0700
Received: by nproxy.gmail.com with SMTP id c29so932416nfb
        for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 11:09:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole:message-id;
        b=FpL16+qsQRkq2Ij9li3TI3MvjHyMm6CBk5aAzliMyUI4OBui4ARSb29gYumVtWYYIxmfHAE9P+X/6w3j2zEazpUVbX6VFxSViNs9f77AxjmBlZs2F/XCP9GGRefa0a9nbCa9yL9xfJLocigQ/vb1BFgA91jZZxRVn+rfHVShykE=
Received: by 10.49.71.9 with SMTP id y9mr3559213nfk;
        Wed, 19 Apr 2006 11:09:47 -0700 (PDT)
Received: from frozenhell ( [62.1.249.240])
        by mx.gmail.com with ESMTP id m16sm78078nfc.2006.04.19.11.09.43;
        Wed, 19 Apr 2006 11:09:47 -0700 (PDT)
From: "Kostas V." <kvelentz@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index all the files in a directory
Date: Wed, 19 Apr 2006 21:09:38 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcZe4GiMkl565ujkS1ybC+mX2TgrHQAAPWvgAT4dkZA=
In-Reply-To: <DDEB64C8619AC64DBC074208B046611C852C22@kronos.neoworks.co.uk>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-ID: <44467ceb.718c776c.5cb1.1b82@mx.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Nick,
Thank you for your reply, but I still face some problems.
I saw the API for FilenameFilter... but I can't instantiate it because it's
abstract.

The accept method has a parameter name? Where is this? And how I call this
method? Finally what are those  " : "  in the for loop.
Sorry but if you could be more specific you could help me a lot.

Thank you in advance

Kostas 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 19:06:34 2006
Return-Path: <java-user-return-20269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27940 invoked from network); 19 Apr 2006 19:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 19:06:34 -0000
Received: (qmail 18215 invoked by uid 500); 19 Apr 2006 19:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18194 invoked by uid 500); 19 Apr 2006 19:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18182 invoked by uid 99); 19 Apr 2006 19:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 12:06:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 12:06:27 -0700
Received: by pproxy.gmail.com with SMTP id m51so3123166pye
        for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 12:06:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NvcQ30EOCv61kwipArXisSg+HttBiAMsoEtkHKTsvNqlPwlvngfr6zSUm6kF8szYLM5qeyi1TGpk2TNiOYl/hkPM5r3Db1FV8UW7eptwPPqaCuXMBvNi/0YZQuRT3JNK+mgHDy0af225MijkbJhddi9r39sCZIigccO+Dlha22c=
Received: by 10.35.126.7 with SMTP id d7mr1906955pyn;
        Wed, 19 Apr 2006 12:06:06 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Wed, 19 Apr 2006 12:06:06 -0700 (PDT)
Message-ID: <359a92830604191206n50ec0bddkc0e93b3b6bb9dca7@mail.gmail.com>
Date: Wed, 19 Apr 2006 15:06:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index all the files in a directory
In-Reply-To: <44467ceb.718c776c.5cb1.1b82@mx.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5017_10825393.1145473566041"
References: <DDEB64C8619AC64DBC074208B046611C852C22@kronos.neoworks.co.uk>
	 <44467ceb.718c776c.5cb1.1b82@mx.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5017_10825393.1145473566041
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Maybe something like this will work.... It just recursively descends from
the root passed to parseAll, processing each .txt file it finds.


    // Parameter is just the file path of the parent directory.
    public void parseAll(String sParentDir) throws Exception {
        indexTree(new File(sParentDir));
    }

    private void indexTree(File file) throws Exception {
        if (file.canRead()) {
            if (file.isDirectory()) {
                String[] files =3D file.list();
                if (files !=3D null) {
                    for (int idx =3D 0; idx < files.length; idx++) {
                        indexTree(new File(file, files[idx]));
                    }
                }
            } else {
                if (file.getName().toLowerCase().indexOf(".txt") =3D=3D -1)
                    return;
                try {
                    index your file here.
                } catch (Exception e) {
                    handle error here.
            }
        }
    }



Erick

------=_Part_5017_10825393.1145473566041--

From java-user-return-20270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 19:07:49 2006
Return-Path: <java-user-return-20270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28733 invoked from network); 19 Apr 2006 19:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 19:07:49 -0000
Received: (qmail 21169 invoked by uid 500); 19 Apr 2006 19:07:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21146 invoked by uid 500); 19 Apr 2006 19:07:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21135 invoked by uid 99); 19 Apr 2006 19:07:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 12:07:43 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 12:07:42 -0700
Received: by pproxy.gmail.com with SMTP id m51so3123751pye
        for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 12:07:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J0rPTYoP9QiXYzBTlR65kHjLJNl082NMGt7qGetBkTPjxqAmU7k1o4EZoj5BKrl9rOSm1fbaQ1Dc7drNe3/8Qat9q0tt30fcBV/zyl0igUE/ka2jQ+SbTQYmDaRcUCFlsYEyNRBxJsD2yzZpCxxfwAfzWEz+zH11iQ/vYXPrlFk=
Received: by 10.35.76.9 with SMTP id d9mr169575pyl;
        Wed, 19 Apr 2006 12:07:21 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Wed, 19 Apr 2006 12:07:21 -0700 (PDT)
Message-ID: <359a92830604191207h451a3eb0w5d21a5a60f22c20f@mail.gmail.com>
Date: Wed, 19 Apr 2006 15:07:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index all the files in a directory
In-Reply-To: <359a92830604191206n50ec0bddkc0e93b3b6bb9dca7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5070_21256030.1145473641500"
References: <DDEB64C8619AC64DBC074208B046611C852C22@kronos.neoworks.co.uk>
	 <44467ceb.718c776c.5cb1.1b82@mx.gmail.com>
	 <359a92830604191206n50ec0bddkc0e93b3b6bb9dca7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5070_21256030.1145473641500
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

P.S.

if you're not using 1.5......

------=_Part_5070_21256030.1145473641500--

From java-user-return-20271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 20:12:53 2006
Return-Path: <java-user-return-20271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76533 invoked from network); 19 Apr 2006 20:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 20:12:52 -0000
Received: (qmail 58938 invoked by uid 500); 19 Apr 2006 20:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58914 invoked by uid 500); 19 Apr 2006 20:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58903 invoked by uid 99); 19 Apr 2006 20:12:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 13:12:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of flavio@bs2.com.br designates 200.203.183.32 as permitted sender)
Received: from [200.203.183.32] (HELO srv-03.bs2.com.br) (200.203.183.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 13:12:44 -0700
Received: from localhost (localhost.bs2.com.br [127.0.0.1])
	by srv-03.bs2.com.br (Postfix) with ESMTP id A74584B386
	for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 17:16:21 -0300 (BRT)
Received: from webmail.bs2.com.br (srv-01-j01.bs2.com.br [200.203.183.38])
	by srv-03.bs2.com.br (Postfix) with ESMTP id E35F04B3FA
	for <java-user@lucene.apache.org>; Wed, 19 Apr 2006 17:16:20 -0300 (BRT)
Received: from 32.104.18.240
        (SquirrelMail authenticated user flavio@bs2.com.br)
        by webmail.bs2.com.br with HTTP;
        Wed, 19 Apr 2006 17:10:24 -0300 (BRT)
Message-ID: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
Date: Wed, 19 Apr 2006 17:10:24 -0300 (BRT)
Subject: BooleanQuery$TooManyClauses
From: =?iso-8859-1?Q?Fl=E1vio_Marim?= <flavio@bs2.com.br>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi there.
I am a new Lucene user and I have been searching the group archives but
couldn't solve the problem. I have just joined a project that uses Lucene.

We get an error when we issue some of our wildcard text searches.

We use the StandardAnalyzer for indexing our documents and our query is as
follows when we issue a search string of s1* for example:  (+(identity:s1*
 keywords:s1* {title:s1* {body:s1* {description:s1* searchterms:s1*
{abstract:s1* creatoremail:s1* authornameS:s1* {reviewername:s1*
metadata:s1* {authorname:s1*) +all:all)

Anyone have any ideas on how to debug this or how we can fix it?

We are using Lucene version 1.4.3 and the error appears as follows:

2006-04-06 13:43:20,928 [Servlet.Engine.Transports : 0] ERROR -
org.apache.lucene.search.BooleanQuery$TooManyClauses
        at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(CompiledCode))
        at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(Inlined
Compiled Code))
        at
org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java(Compiled Code))
        at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
Code))
        at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
Code))
        at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java(Inlined
Compiled Code))
        at org.apache.lucene.search.Query.weight(Query.java(Inlined
Compiled Code))
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java(Compiled
Code))
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java(Compiled
Code))
        at org.apache.lucene.search.Hits.<init>(Hits.java(Inlined Compiled
Code))
        at org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
Compiled Code))
        at org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
Compiled Code))
        at
com.ibm.services.salesone.fsearch.search.FacetedSearchImpl.getFacetCountsWithText(FacetedSearchImpl.java(Compiled
Code))
  	...... <truncated to limit size of this email>

-- 
Marim

"Only reading is really difficult to learn. All the rest is written
somewhere"



-- 
Marim

"Difcil  aprender a ler. O resto est escrito."


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 19 22:23:06 2006
Return-Path: <java-user-return-20272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47840 invoked from network); 19 Apr 2006 22:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Apr 2006 22:23:05 -0000
Received: (qmail 1374 invoked by uid 500); 19 Apr 2006 22:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1351 invoked by uid 500); 19 Apr 2006 22:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1340 invoked by uid 99); 19 Apr 2006 22:22:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 15:22:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Apr 2006 15:22:57 -0700
Received: (qmail 19456 invoked from network); 19 Apr 2006 22:22:35 -0000
Received: from unknown (HELO pd9fcb7c9.dip.t-dialin.net) ([pbs]695637@[217.252.183.201])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 19 Apr 2006 22:22:35 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery$TooManyClauses
Date: Thu, 20 Apr 2006 00:23:32 +0200
User-Agent: KMail/1.8.2
References: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
In-Reply-To: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200604200023.32793@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 19 April 2006 22:10, Fl=C3=A1vio Marim wrote:

> I am a new Lucene user and I have been searching the group archives but
> couldn't solve the problem.

see
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-06fafb5d19e786a50fb3df=
b8821a6af9f37aa831

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 20 09:50:47 2006
Return-Path: <java-user-return-20273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72426 invoked from network); 20 Apr 2006 09:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2006 09:50:46 -0000
Received: (qmail 98737 invoked by uid 500); 20 Apr 2006 09:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98707 invoked by uid 500); 20 Apr 2006 09:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98696 invoked by uid 99); 20 Apr 2006 09:50:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 02:50:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 02:50:37 -0700
Received: (qmail 4246 invoked from network); 20 Apr 2006 09:50:13 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]739730@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 20 Apr 2006 09:50:13 -0000
Message-ID: <44475958.3060109@artnology.com>
Date: Thu, 20 Apr 2006 11:50:16 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: BooleanQuery$TooManyClauses
References: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
In-Reply-To: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Normally the default setup for BooleanCluase count is 1024, may be your 
query produce more query than 1024, one work around is that you set the 
BooleanCluase count to more than 1024. You can do that by just invoking 
the static method
BooleanQuery.setMaxClauseCount(2048);

supriya

Flvio Marim wrote:
> Hi there.
> I am a new Lucene user and I have been searching the group archives but
> couldn't solve the problem. I have just joined a project that uses Lucene.
>
> We get an error when we issue some of our wildcard text searches.
>
> We use the StandardAnalyzer for indexing our documents and our query is as
> follows when we issue a search string of s1* for example:  (+(identity:s1*
>  keywords:s1* {title:s1* {body:s1* {description:s1* searchterms:s1*
> {abstract:s1* creatoremail:s1* authornameS:s1* {reviewername:s1*
> metadata:s1* {authorname:s1*) +all:all)
>
> Anyone have any ideas on how to debug this or how we can fix it?
>
> We are using Lucene version 1.4.3 and the error appears as follows:
>
> 2006-04-06 13:43:20,928 [Servlet.Engine.Transports : 0] ERROR -
> org.apache.lucene.search.BooleanQuery$TooManyClauses
>         at
> org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(CompiledCode))
>         at
> org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(Inlined
> Compiled Code))
>         at
> org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java(Compiled Code))
>         at
> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
> Code))
>         at
> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
> Code))
>         at
> org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java(Inlined
> Compiled Code))
>         at org.apache.lucene.search.Query.weight(Query.java(Inlined
> Compiled Code))
>         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java(Compiled
> Code))
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java(Compiled
> Code))
>         at org.apache.lucene.search.Hits.<init>(Hits.java(Inlined Compiled
> Code))
>         at org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
> Compiled Code))
>         at org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
> Compiled Code))
>         at
> com.ibm.services.salesone.fsearch.search.FacetedSearchImpl.getFacetCountsWithText(FacetedSearchImpl.java(Compiled
> Code))
>   	...... <truncated to limit size of this email>
>
>   


-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 20 11:35:10 2006
Return-Path: <java-user-return-20274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31591 invoked from network); 20 Apr 2006 11:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2006 11:35:04 -0000
Received: (qmail 34914 invoked by uid 500); 20 Apr 2006 11:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34883 invoked by uid 500); 20 Apr 2006 11:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34872 invoked by uid 99); 20 Apr 2006 11:34:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 04:34:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 04:34:52 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 5AFD31BB51
	for <java-user@lucene.apache.org>; Thu, 20 Apr 2006 13:34:27 +0200 (CEST)
Message-ID: <444771C3.2040303@fib.upc.edu>
Date: Thu, 20 Apr 2006 13:34:27 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Most used words
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.298
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.298 tagged_above=-999 required=3.5
 tests=[ALL_TRUSTED=-1.8, AWL=0.101, BAYES_00=-2.599]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,
I have a simple question for you. How do you do to obtain the most used 
words of  and Index?
In my case I want to obtain the 10 most used words in a group. I thinked 
in use a TreeSet with all words and their frequencies of hits (whit the 
restriction of GROUPID).
Someone have any idea? Thks for any reply.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 20 14:52:40 2006
Return-Path: <java-user-return-20275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52739 invoked from network); 20 Apr 2006 14:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2006 14:50:07 -0000
Received: (qmail 62505 invoked by uid 500); 20 Apr 2006 14:49:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62195 invoked by uid 500); 20 Apr 2006 14:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62184 invoked by uid 99); 20 Apr 2006 14:49:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 07:49:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.239.116.71] (HELO mail01.bassnet.biz) (212.239.116.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 07:49:37 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail01.bassnet.biz (Postfix) with ESMTP id 6C8F630E0
	for <java-user@lucene.apache.org>; Thu, 20 Apr 2006 16:48:01 +0200 (CEST)
Received: from mail01.bassnet.biz ([127.0.0.1])
	by localhost (urano [127.0.0.1]) (amavisd-new, port 10024) with LMTP
	id 25046-01-3 for <java-user@lucene.apache.org>;
	Thu, 20 Apr 2006 16:48:01 +0200 (CEST)
Received: from [192.168.136.123] (unknown [192.168.136.123])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail01.bassnet.biz (Postfix) with ESMTP id 1BD6F30DC
	for <java-user@lucene.apache.org>; Thu, 20 Apr 2006 16:48:01 +0200 (CEST)
Message-ID: <4447A003.1070309@bassnet.biz>
Date: Thu, 20 Apr 2006 14:51:47 +0000
From: Lorenzo Di Gaetano <lorenzo.digaetano@bassnet.biz>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Accept-Language: it, it-it, en-us, en
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Indexing with SnowballAnalyzer and multiple languages in a single
 index
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at bassnet.biz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I'm working at the search api of a multi language CMS, and I'm using the 
latest Lucene release. I'm using the SnowballAnalyzer in order to have 
stemmers for various languages. I know that I must use the same analyzer 
for indexing and searching, in order to obtain correct hits, but can I 
index contents for various languages (passing the name of the language 
to the SnowballAnalyzer's constructor) into the same index and then 
searching specifiyng the language to the SnowballAnalyzer's constructor?

Or it's better to have one single index per language (in different 
directories)?

Thank you in advance.

Lorenzo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 20 16:38:12 2006
Return-Path: <java-user-return-20276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18575 invoked from network); 20 Apr 2006 16:38:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2006 16:38:12 -0000
Received: (qmail 85836 invoked by uid 500); 20 Apr 2006 16:38:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85374 invoked by uid 500); 20 Apr 2006 16:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85363 invoked by uid 99); 20 Apr 2006 16:38:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 09:38:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.175] (HELO hnexfe09.hetnet.nl) (195.121.6.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 09:38:05 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe09.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 20 Apr 2006 18:37:42 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <444771C3.2040303@fib.upc.edu>
References: <444771C3.2040303@fib.upc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <24787014-1860-4714-AF48-C0C87109859C@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Most used words
Date: Thu, 20 Apr 2006 18:39:51 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 20 Apr 2006 16:37:42.0732 (UTC) FILETIME=[BEE800C0:01C66498]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


20 apr 2006 kl. 13.34 skrev Daniel Cortes:

> How do you do to obtain the most used words of  and Index?

Use the  terms() and termDocs() from IndexReader. Or if available,  
use the term frequency vectors.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 20 17:55:17 2006
Return-Path: <java-user-return-20277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54468 invoked from network); 20 Apr 2006 17:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Apr 2006 17:55:17 -0000
Received: (qmail 10265 invoked by uid 500); 20 Apr 2006 17:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9768 invoked by uid 500); 20 Apr 2006 17:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9757 invoked by uid 99); 20 Apr 2006 17:55:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 10:55:10 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=BIZ_TLD,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.22.58.18] (HELO mail.dicarta.com) (12.22.58.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Apr 2006 10:55:10 -0700
Received: from corpx.corp.dicarta.com (corpx.dicarta.com [10.1.8.35])
	by mail.dicarta.com  with ESMTP id k3KHsgv00960
	for <java-user@lucene.apache.org>; Thu, 20 Apr 2006 10:54:42 -0700 (PDT)
From: jwang@dicarta.com
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing with SnowballAnalyzer and multiple languages in a single index
Date: Thu, 20 Apr 2006 10:54:49 -0700
Message-ID: <9778DA4F3D53D04B9AE80AC64AC073A305745B4D@corpx.corp.dicarta.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing with SnowballAnalyzer and multiple languages in a single index
Thread-Index: AcZkian4MS70twTBT5K4OP1rZs7vIwAGSy4w
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can have multiple languages in the same index.  Just make sure that
your language identification process is consistent.

You might still get some false positives, for example, if there's a
German root that has the same letters as a French root, but means
something different, then it might still show up.  Personally, I don't
really know how many times that actually happens.

Lucene treats all _post-analyze_ tokens the same, it is pretty much
language ignorant, so as long as the UTF characters are the same, it
treats the tokens as the same.

Jeff Wang
diCarta, Inc.
-----Original Message-----
From: Lorenzo Di Gaetano [mailto:lorenzo.digaetano@bassnet.biz]=20
Sent: Thursday, April 20, 2006 7:52 AM
To: Lucene Mailing List
Subject: [SPAM] - Indexing with SnowballAnalyzer and multiple languages
in a single index - Sender is forged (SPF Fail)

Hi all,

I'm working at the search api of a multi language CMS, and I'm using the

latest Lucene release. I'm using the SnowballAnalyzer in order to have=20
stemmers for various languages. I know that I must use the same analyzer

for indexing and searching, in order to obtain correct hits, but can I=20
index contents for various languages (passing the name of the language=20
to the SnowballAnalyzer's constructor) into the same index and then=20
searching specifiyng the language to the SnowballAnalyzer's constructor?

Or it's better to have one single index per language (in different=20
directories)?

Thank you in advance.

Lorenzo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 10:20:08 2006
Return-Path: <java-user-return-20278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97915 invoked from network); 21 Apr 2006 10:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 10:20:07 -0000
Received: (qmail 13054 invoked by uid 500); 21 Apr 2006 10:19:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12934 invoked by uid 500); 21 Apr 2006 10:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12891 invoked by uid 99); 21 Apr 2006 10:19:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 03:19:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [203.92.45.238] (HELO noidagw01.naukri.com) (203.92.45.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 03:19:53 -0700
Received: from [192.168.2.168] ([192.168.2.168])
	by noidagw01.naukri.com (8.13.4/8.13.4) with ESMTP id k3LA6RIw027553
	for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 15:36:28 +0530
Message-ID: <4448B1C8.2080304@naukri.com>
Date: Fri, 21 Apr 2006 15:49:52 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Mozilla Thunderbird 1.0.2-6 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Most used words
References: <444771C3.2040303@fib.upc.edu>
In-Reply-To: <444771C3.2040303@fib.upc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
If I have correctly understood your question, you want the terms in a 
field with the maximum number of occurences.
Try luke [www.getopt.org/*luke*/].
Or else in case you are not able to initialize graphical content on your 
system.
You may use the following script.
src/org/getopt/luke/HighFreqTerms.java
get it from the luke source code.
Regards,
kapilChhabra

Daniel Cortes wrote:

> Hi everybody,
> I have a simple question for you. How do you do to obtain the most 
> used words of  and Index?
> In my case I want to obtain the 10 most used words in a group. I 
> thinked in use a TreeSet with all words and their frequencies of hits 
> (whit the restriction of GROUPID).
> Someone have any idea? Thks for any reply.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 10:52:41 2006
Return-Path: <java-user-return-20279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14175 invoked from network); 21 Apr 2006 10:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 10:52:40 -0000
Received: (qmail 70678 invoked by uid 500); 21 Apr 2006 10:52:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70650 invoked by uid 500); 21 Apr 2006 10:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70636 invoked by uid 99); 21 Apr 2006 10:52:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 03:52:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 03:52:33 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 8534A1BB43
	for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 12:52:07 +0200 (CEST)
Message-ID: <4448B957.20200@fib.upc.edu>
Date: Fri, 21 Apr 2006 12:52:07 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Most used words
References: <444771C3.2040303@fib.upc.edu> <4448B1C8.2080304@naukri.com>
In-Reply-To: <4448B1C8.2080304@naukri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.282
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.282 tagged_above=-999 required=3.5
 tests=[ALL_TRUSTED=-1.8, AWL=0.117, BAYES_00=-2.599]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thks for the reply, perhaps to use something like in Luke is the best 
option.
My idea to do is a TAGcloud (see the example in this page) for every 
group(field group with the id) and every portal (with the id).
The problem is that I think do reader.terms() is not the best option in 
my case, because I have a lot of groups and I want the tagcloud of an 
specific group (for example "luceners")
I thinked in do a search WHERE field GROUP is "luceners" and order my 
hits in ordered by Date. For this reason i can obtain something like 
"Racently we talk about .." and show words used in the last days in this 
groups.
What do you think?



Kapil Chhabra wrote:

> Hi,
> If I have correctly understood your question, you want the terms in a 
> field with the maximum number of occurences.
> Try luke [www.getopt.org/*luke*/].
> Or else in case you are not able to initialize graphical content on 
> your system.
> You may use the following script.
> src/org/getopt/luke/HighFreqTerms.java
> get it from the luke source code.
> Regards,
> kapilChhabra
>
> Daniel Cortes wrote:
>
>> Hi everybody,
>> I have a simple question for you. How do you do to obtain the most 
>> used words of  and Index?
>> In my case I want to obtain the 10 most used words in a group. I 
>> thinked in use a TreeSet with all words and their frequencies of hits 
>> (whit the restriction of GROUPID).
>> Someone have any idea? Thks for any reply.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 11:24:53 2006
Return-Path: <java-user-return-20280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26205 invoked from network); 21 Apr 2006 11:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 11:24:28 -0000
Received: (qmail 97632 invoked by uid 500); 21 Apr 2006 11:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97591 invoked by uid 500); 21 Apr 2006 11:24:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97580 invoked by uid 99); 21 Apr 2006 11:24:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 04:24:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 04:24:15 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FWtjr-0003vG-CD
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 04:23:51 -0700
Message-ID: <4024568.post@talk.nabble.com>
Date: Fri, 21 Apr 2006 04:23:51 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Lucene - FileFormat
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Im trying to construct a plaintext parser for different file formats like ms
word, excel, powerpoint, rich text format, plain text, html, pdf etc.

I use the known libraries PDFBox, POI and some parts from AtLeap...and now I
should support the OpenOffice formats and the more important msg-fromat (MS
outlook message format).

Does someone know how I can simply (like POI) extract plaint text from msg?
Probably there exists an open source library like for pdf or ms office
files?

I need the plain text because the only way for me seems to extract all the
plain text from every single document, and then add it to my lucene
index...this is necessary to get the best excerpt from highlighter...

Thx

Simon Dietschi
--
View this message in context: http://www.nabble.com/Lucene---FileFormat-t1485959.html#a4024568
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 13:49:18 2006
Return-Path: <java-user-return-20281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3476 invoked from network); 21 Apr 2006 13:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 13:49:11 -0000
Received: (qmail 91557 invoked by uid 500); 21 Apr 2006 13:49:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91526 invoked by uid 500); 21 Apr 2006 13:49:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91504 invoked by uid 99); 21 Apr 2006 13:49:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 06:49:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [152.2.1.139] (HELO smtp.unc.edu) (152.2.1.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 06:49:01 -0700
Received: from [152.2.190.32] (batmanuel.its.unc.edu [152.2.190.32])
	(authenticated bits=0)
	by smtp.unc.edu (8.13.4/8.13.4) with ESMTP id k3LDmaY2008037
	for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 09:48:36 -0400 (EDT)
Message-ID: <4448E2B5.10607@unc.edu>
Date: Fri, 21 Apr 2006 09:48:37 -0400
From: Adam Constabaris <adamc@unc.edu>
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: similar ArrayIndexOutOfBoundsException on searching and optimizing
Content-Type: multipart/mixed;
 boundary="------------000206080904080104080802"
X-Scanned-By: ITS Messaging Systems (outgoing) on 152.2.1.139
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000206080904080104080802
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

This is a puzzler, I'm not sure if I'm doing something wrong or whether 
I have a poisoned document, a corrupted index (failing to close my 
IndexModifier properly?) or what.  The setup is this: I have two 
processes (the backend and frontend of a CMS) that run in two different 
VMs -- both use Lucene 1.9.1 with the PorterStemmerAnalyzer wrapper over 
the StandardAnalyzer (from lucene-memory AnalyzerUtils).

The backend is responsible for index creation, updates, etc., while the 
frontend process uses the created index.  What's puzzling is that some 
queries will die with an ArrayIndexOutOfBoundsException being thrown out 
of the BitVector class:

Caused by: java.lang.ArrayIndexOutOfBoundsException: 240
         at org.apache.lucene.util.BitVector.get(BitVector.java:63)
         at 
org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
         at org.apache.lucene.search.TermScorer.next(TermScorer.java:105)
         at 
org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java:151)
         at 
org.apache.lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:125)
         at 
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:290)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:132) 
      at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:99)
         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)
         at org.apache.lucene.search.Hits.<init>(Hits.java:44)
         at org.apache.lucene.search.Searcher.search(Searcher.java:44)
         at org.apache.lucene.search.Searcher.search(Searcher.java:36)

The only pattern I've been able to discern in queries that cause this 
problem is that (a) they search the "contents" field (tokenized, 
unstored, TermVector.YES), and (b) it *seems* that it mostly happens 
with longer terms in the query.  Although the frontend defaults to a 
multifield query, the same happens when I use "contents:<<term>>" and 
does not happen if I specify <<term>> and any other of the default 
fields used by the MultiFieldQueryParser.

Here's where it gets interesting: I've noticed that calling optimize() 
on the index as it's created by the server process is also throwing a 
hissy fit, with an *eerily similar* index:

java.lang.ArrayIndexOutOfBoundsException: 239
         at org.apache.lucene.util.BitVector.get(BitVector.java:63)
         at 
org.apache.lucene.index.SegmentReader.isDeleted(SegmentReader.java:288)
         at 
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:185)
         at 
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)
         at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:681)
         at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:658)
         at 
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:517)
         at 
org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:553)

Does anybody have any ideas about what I might be doing wrong, or if 
I've possibly uncovered a bug?  I'm too new to the scene to know where I 
ought to start with this.






--------------000206080904080104080802
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------000206080904080104080802--

From java-user-return-20282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 15:36:54 2006
Return-Path: <java-user-return-20282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75496 invoked from network); 21 Apr 2006 15:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 15:36:54 -0000
Received: (qmail 42875 invoked by uid 500); 21 Apr 2006 15:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42751 invoked by uid 500); 21 Apr 2006 15:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42720 invoked by uid 99); 21 Apr 2006 15:36:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 08:36:43 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.191.87.126] (HELO web37813.mail.mud.yahoo.com) (209.191.87.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Apr 2006 08:36:41 -0700
Received: (qmail 35183 invoked by uid 60001); 21 Apr 2006 15:36:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.vn;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5vMPB/u2v9Hj7PY9iqh7fwHfZ+kMJKVERGzOhpZiEI7ICU3IJ/xT8V9R0ue31BEUmDkP+QfUY//99bsRIjtG5xaO3h268C2oA19Y21vvoaR0YSWu3xXyLEgixURjsDg5i53hpNwTA7dqcenITz9IGkzXyDq0CXpFxWcjt1nRFK4=  ;
Message-ID: <20060421153620.35181.qmail@web37813.mail.mud.yahoo.com>
Received: from [193.49.172.146] by web37813.mail.mud.yahoo.com via HTTP; Fri, 21 Apr 2006 22:36:20 ICT
Date: Fri, 21 Apr 2006 22:36:20 +0700 (ICT)
From: thanh nguyen <ngay01032006@yahoo.com.vn>
Subject: Lucene, TREC, and WT10G 
To: java-user@lucene.apache.org
In-Reply-To: <4024568.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

Did anyone use Lucene to index WT10G? Can it index
WT10G in compressed format (.gz) or we have to unzip
it first?

Further more, does Lucene support TREC format? I mean
can it receive a topic file like "<TOP> <NUM> 1
<TITLE>  abc def </TOP>" and produce a results file
which we can use  with trec_eval program?

Any help will be appretiated,
Thanh



	


	
		
________________________________________________________ 
Bn c s dng Yahoo! khng? 
Hy xem th trang ch Yahoo! Vit Nam! 
http://vn.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 16:14:33 2006
Return-Path: <java-user-return-20283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93380 invoked from network); 21 Apr 2006 16:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 16:14:31 -0000
Received: (qmail 27410 invoked by uid 500); 21 Apr 2006 16:14:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27384 invoked by uid 500); 21 Apr 2006 16:14:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27373 invoked by uid 99); 21 Apr 2006 16:14:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 09:14:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 09:14:24 -0700
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 21 Apr 2006 09:13:03 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C6655E.73EA4D39"
Subject: RE: Lucene - FileFormat
Date: Fri, 21 Apr 2006 09:08:52 -0700
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C5D@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F6877010B2C4C5D@ehost011-3.exch011.intermedia.net>
Thread-Topic: Lucene - FileFormat
Thread-Index: AcZlNf/p52bQU8CEQG+fCQVH3XElbwAJ+IJM
References: <4024568.post@talk.nabble.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Apr 2006 16:13:03.0776 (UTC) FILETIME=[77CAFA00:01C6655E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6655E.73EA4D39
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Simon,
=20
I wonder if using Zoe might do the trick - =
http://guests.evectors.it/zoe/
Have you tried it?
=20
- Dmitry

________________________________

From: Fisheye [mailto:dessan@gmx.ch]
Sent: Fri 4/21/2006 7:23 AM
To: java-user@lucene.apache.org
Subject: Lucene - FileFormat




Im trying to construct a plaintext parser for different file formats =
like ms
word, excel, powerpoint, rich text format, plain text, html, pdf etc.

I use the known libraries PDFBox, POI and some parts from AtLeap...and =
now I
should support the OpenOffice formats and the more important msg-fromat =
(MS
outlook message format).

Does someone know how I can simply (like POI) extract plaint text from =
msg?
Probably there exists an open source library like for pdf or ms office
files?

I need the plain text because the only way for me seems to extract all =
the
plain text from every single document, and then add it to my lucene
index...this is necessary to get the best excerpt from highlighter...

Thx

Simon Dietschi
--
View this message in context: =
http://www.nabble.com/Lucene---FileFormat-t1485959.html#a4024568
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C6655E.73EA4D39
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C6655E.73EA4D39--

From java-user-return-20284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 17:31:39 2006
Return-Path: <java-user-return-20284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36316 invoked from network); 21 Apr 2006 17:31:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 17:31:37 -0000
Received: (qmail 66609 invoked by uid 500); 21 Apr 2006 17:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66473 invoked by uid 500); 21 Apr 2006 17:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66435 invoked by uid 99); 21 Apr 2006 17:31:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:31:25 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.167.1.4] (HELO marmot.shef.ac.uk) (143.167.1.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:31:24 -0700
Received: from drake.shef.ac.uk ([143.167.2.64])
	by marmot.shef.ac.uk with esmtp (Exim 4.52)
	id 1FWzTC-0005EA-Tu
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 18:31:02 +0100
Received: from http by drake.shef.ac.uk with local (Exim 4.42)
	id 1FWzTC-0004mX-Rd
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 18:31:02 +0100
Received: from drake.shef.ac.uk (drake.shef.ac.uk [143.167.2.64]) 
	by 143.167.2.64 (IMP) with HTTP 
	for <acp05tm@localhost>; Fri, 21 Apr 2006 18:31:02 +0100
Message-ID: <1145640662.444916d6c79fb@webmail.shef.ac.uk>
Date: Fri, 21 Apr 2006 18:31:02 +0100
From: trupti mulajkar <acp05tm@sheffield.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Lucene, TREC, and WT10G 
References: <20060421153620.35181.qmail@web37813.mail.mud.yahoo.com>
In-Reply-To: <20060421153620.35181.qmail@web37813.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
Organization: University of Sheffield
X-Originating-IP: 143.167.2.64
X-S0phie-Scan: no
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene can index the trec documents, but depends how you want to index them.
If you want to index the sub files in the TREC DAtA then you have to modify the
IndexFiles.java to read the tags else you can index them normally.
 
cheers,
trupti mulajkar

Quoting thanh nguyen <ngay01032006@yahoo.com.vn>:

> Hi all,
> 
> Did anyone use Lucene to index WT10G? Can it index
> WT10G in compressed format (.gz) or we have to unzip
> it first?
> 
> Further more, does Lucene support TREC format? I mean
> can it receive a topic file like "<TOP> <NUM> 1
> <TITLE>  abc def </TOP>" and produce a results file
> which we can use  with trec_eval program?
> 
> Any help will be appretiated,
> Thanh
> 
> 
> 
> 	
> 
> 
> 	
> 		
> ________________________________________________________ 
> Bn c s dng Yahoo! khng? 
> Hy xem th trang ch Yahoo! Vit Nam! 
> http://vn.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 17:37:15 2006
Return-Path: <java-user-return-20285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38615 invoked from network); 21 Apr 2006 17:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 17:37:15 -0000
Received: (qmail 77675 invoked by uid 500); 21 Apr 2006 17:37:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77652 invoked by uid 500); 21 Apr 2006 17:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77639 invoked by uid 99); 21 Apr 2006 17:37:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:37:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.167.1.4] (HELO marmot.shef.ac.uk) (143.167.1.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:37:08 -0700
Received: from drake.shef.ac.uk ([143.167.2.64])
	by marmot.shef.ac.uk with esmtp (Exim 4.52)
	id 1FWzYl-0005QX-Pn
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 18:36:47 +0100
Received: from http by drake.shef.ac.uk with local (Exim 4.42)
	id 1FWzYl-0005Cs-N3
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 18:36:47 +0100
Received: from drake.shef.ac.uk (drake.shef.ac.uk [143.167.2.64]) 
	by 143.167.2.64 (IMP) with HTTP 
	for <acp05tm@localhost>; Fri, 21 Apr 2006 18:36:47 +0100
Message-ID: <1145641007.4449182fa514a@webmail.shef.ac.uk>
Date: Fri, 21 Apr 2006 18:36:47 +0100
From: trupti mulajkar <acp05tm@sheffield.ac.uk>
To: java-user@lucene.apache.org
Subject: generating document vectors
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
Organization: University of Sheffield
X-Originating-IP: 143.167.2.64
X-S0phie-Scan: no
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi 
can anyone suggest how to can generate document and query vectors containing the
term frequency from Lucene index.
i need it to implement vector space model using Wordnet.

cheers,
trupti mulajkar
MSc Advanced Computer Science




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 17:43:06 2006
Return-Path: <java-user-return-20286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41780 invoked from network); 21 Apr 2006 17:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 17:43:05 -0000
Received: (qmail 87926 invoked by uid 500); 21 Apr 2006 17:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87889 invoked by uid 500); 21 Apr 2006 17:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87876 invoked by uid 99); 21 Apr 2006 17:43:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:43:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:42:58 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1525570A@mailer.syr.edu>; Fri, 21 Apr 2006 13:42:37 -0400
Message-ID: <4449198D.5090406@syr.edu>
Date: Fri, 21 Apr 2006 13:42:37 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: generating document vectors
References: <1145641007.4449182fa514a@webmail.shef.ac.uk>
In-Reply-To: <1145641007.4449182fa514a@webmail.shef.ac.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See  the "Lucene In Action" book or my ApacheCon talk at 
http://www.cnlp.org/apachecon2005.  Both of these have examples.

trupti mulajkar wrote:
> hi 
> can anyone suggest how to can generate document and query vectors containing the
> term frequency from Lucene index.
> i need it to implement vector space model using Wordnet.
>
> cheers,
> trupti mulajkar
> MSc Advanced Computer Science
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 17:49:15 2006
Return-Path: <java-user-return-20287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45629 invoked from network); 21 Apr 2006 17:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 17:49:15 -0000
Received: (qmail 98884 invoked by uid 500); 21 Apr 2006 17:49:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98528 invoked by uid 500); 21 Apr 2006 17:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98517 invoked by uid 99); 21 Apr 2006 17:49:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:49:09 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 64.4.18.70 as permitted sender)
Received: from [64.4.18.70] (HELO hotmail.com) (64.4.18.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 10:49:08 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 21 Apr 2006 10:48:47 -0700
Message-ID: <BAY24-F206C5E8D205120691B75C2B9BB0@phx.gbl>
Received: from 206.35.175.10 by by24fd.bay24.hotmail.msn.com with HTTP;
	Fri, 21 Apr 2006 17:48:45 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Synonyms ...
Date: Fri, 21 Apr 2006 13:48:45 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 21 Apr 2006 17:48:47.0935 (UTC) FILETIME=[D79414F0:01C6656B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

What is the best way to implement the following?

Document 1 contains the following text:
  "THE CZECH REPUBLIC ORGANIZATION"

Document 2 contains the following text:
  "THE CZE ORGANISATION"

Synonym rules:
  (1) CZECH REPUBLIC --> CZE
  (2) CZE --> CZECH REPUBLIC
  (3) ORGANIZATION --> ORG, ORGANISATION

All of the following phrase searches must match BOTH documents:
  "CZECH REPUBLIC ORGANIZATION"
  "CZECH REPUBLIC ORGANISATION"
  "CZECH REPUBLIC ORG"
  "CZE ORGANIZATION"
  "CZE ORGANISATION"
  "CZE ORG"

I don't think the SynonymAnalyzer described in LIA would work because
some of my "synonyms" contain multiple words.  Thank you.

_________________________________________________________________
Dont just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 18:57:20 2006
Return-Path: <java-user-return-20288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86349 invoked from network); 21 Apr 2006 18:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 18:57:19 -0000
Received: (qmail 31672 invoked by uid 500); 21 Apr 2006 18:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31645 invoked by uid 500); 21 Apr 2006 18:57:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31634 invoked by uid 99); 21 Apr 2006 18:57:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 11:57:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.196] (HELO smtp806.mail.ukl.yahoo.com) (217.12.12.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Apr 2006 11:57:11 -0700
Received: (qmail 38136 invoked from network); 21 Apr 2006 18:56:48 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@86.132.232.32 with login)
  by smtp806.mail.ukl.yahoo.com with SMTP; 21 Apr 2006 18:56:48 -0000
Message-ID: <004801c66575$58364b10$0401a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
Subject: Reuters
Date: Fri, 21 Apr 2006 19:56:48 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0045_01C6657D.B9BF09A0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0045_01C6657D.B9BF09A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi all,
I didn't know whether to add this to the thread asking about TREC =
indexing or start a new one.
Anyway, has anyone attempted to index/search the Reuters collection =
which consists of SGML?
Mine seems to run through the process okay but alas I'm left with =
nothing in the index when I check with Luke or my own Search Engine.
Anyone got any hints (apart from don't do it)?
cheers,
MC
------=_NextPart_000_0045_01C6657D.B9BF09A0--


From java-user-return-20289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 19:05:36 2006
Return-Path: <java-user-return-20289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91264 invoked from network); 21 Apr 2006 19:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 19:05:34 -0000
Received: (qmail 44225 invoked by uid 500); 21 Apr 2006 19:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44202 invoked by uid 500); 21 Apr 2006 19:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44191 invoked by uid 99); 21 Apr 2006 19:05:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:05:28 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lorenzo.viscanti@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO uproxy.gmail.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:05:27 -0700
Received: by uproxy.gmail.com with SMTP id u40so862042ugc
        for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 12:05:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BVZM2sfb/EI8+nt+9ImYlMsgsLCINkmsePm6PFGo9/6u1m5MjFoXVdHjilK3xJe6VqjP+bn9HC7oi9jYPS9N0OY1y+sltqYlTvEjCLCqmniFXFK7+KvcISafE/BBa/g+gw4S5d2feWpNPnkcKyQczcmwxoI64mU+duGqQ7Vr+Ns=
Received: by 10.78.58.11 with SMTP id g11mr106106hua;
        Fri, 21 Apr 2006 12:05:06 -0700 (PDT)
Received: by 10.78.56.11 with HTTP; Fri, 21 Apr 2006 12:05:06 -0700 (PDT)
Message-ID: <e72c67f70604211205x40341831hfec30beba0ad990@mail.gmail.com>
Date: Fri, 21 Apr 2006 21:05:06 +0200
From: "Lorenzo Viscanti" <lorenzo.viscanti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reuters
In-Reply-To: <004801c66575$58364b10$0401a8c0@MalcolmPC>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46805_12233796.1145646306238"
References: <004801c66575$58364b10$0401a8c0@MalcolmPC>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_46805_12233796.1145646306238
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Some months ago I created an index from the reuters collection. I converted
the SGML files to XML using a tool that I've found somewhere on the net
(just google for it), then I parsed the files to create the index, using a
standard DOM parser. If you have problems parsing the SGML files I think yo=
u
should consider converting the files to XML. Otherwise post a sketch of you=
r
indexing code to get some help.

Lorenzo

On 4/21/06, Malcolm Clark <malcyclark@btinternet.com> wrote:
>
> Hi all,
> I didn't know whether to add this to the thread asking about TREC indexin=
g
> or start a new one.
> Anyway, has anyone attempted to index/search the Reuters collection which
> consists of SGML?
> Mine seems to run through the process okay but alas I'm left with nothing
> in the index when I check with Luke or my own Search Engine.
> Anyone got any hints (apart from don't do it)?
> cheers,
> MC
>

------=_Part_46805_12233796.1145646306238--

From java-user-return-20290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 19:07:57 2006
Return-Path: <java-user-return-20290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92226 invoked from network); 21 Apr 2006 19:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 19:07:57 -0000
Received: (qmail 49330 invoked by uid 500); 21 Apr 2006 19:07:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49305 invoked by uid 500); 21 Apr 2006 19:07:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49294 invoked by uid 99); 21 Apr 2006 19:07:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:07:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.198] (HELO smtp808.mail.ukl.yahoo.com) (217.12.12.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Apr 2006 12:07:50 -0700
Received: (qmail 23781 invoked from network); 21 Apr 2006 19:07:29 -0000
Received: from unknown (HELO MalcolmPC) (malcyclark@btinternet.com@86.132.232.32 with login)
  by smtp808.mail.ukl.yahoo.com with SMTP; 21 Apr 2006 19:07:29 -0000
Message-ID: <006001c66576$d600f0d0$0401a8c0@MalcolmPC>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <004801c66575$58364b10$0401a8c0@MalcolmPC> <e72c67f70604211205x40341831hfec30beba0ad990@mail.gmail.com>
Subject: Re: Reuters
Date: Fri, 21 Apr 2006 20:07:26 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Okay converting to XML sounds like a great option.
Thanks,
Malcolm

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 19:12:18 2006
Return-Path: <java-user-return-20291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96230 invoked from network); 21 Apr 2006 19:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 19:12:17 -0000
Received: (qmail 60782 invoked by uid 500); 21 Apr 2006 19:12:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60751 invoked by uid 500); 21 Apr 2006 19:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60740 invoked by uid 99); 21 Apr 2006 19:12:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:12:10 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:12:09 -0700
Received: by nz-out-0102.google.com with SMTP id n29so473429nzf
        for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 12:11:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kih6UvquPhBHMZezzNProKkcDH9e8c47wbxbOCDaM215nVJvnscp9l74XKemeFuf1wsPM551F4P2vvFIUTJUIEOegZESNzc3T9gPGTDky5AqBuJn35xULrgJYatONoyi0Qcn++p2L2kPTP72Nt1p/BxdMY7tabhm6BC1f+SNBsQ=
Received: by 10.65.151.3 with SMTP id d3mr420938qbo;
        Fri, 21 Apr 2006 12:11:49 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Fri, 21 Apr 2006 12:11:49 -0700 (PDT)
Message-ID: <f742a72b0604211211v2badcc76p212cd41439a7f864@mail.gmail.com>
Date: Fri, 21 Apr 2006 15:11:49 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
In-Reply-To: <200604191128.55250@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
	 <Pine.LNX.4.58.0604182125070.13302@hal.rescomp.berkeley.edu>
	 <f742a72b0604182225h3475469cq1c739ed48481a867@mail.gmail.com>
	 <200604191128.55250@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am trying to get the frequency of a phrase using the SpanNearQuery.
How can I use SpanNearQuery for boolean queries. The code I have is
for a single query. How can I extend this for multiple queries

SpanTermQuery[] phrase =3D new SpanTermQuery[phraseTerms.length];=09
for(int termCount=3D0; termCount<phraseTerms.length ;termCount++)
{

phrase[termCount] =3D new SpanTermQuery(new Term("contents", phraseTerm
termCount]));
}
SpanQuery [] clauses =3D new SpanQuery[phraseTerms.length];

for(int count =3D0; count<phraseTerms.length ; count++)
{
=09clauses[count]=3Dphrase[count];=09
}
SpanNearQuery near =3D new SpanNearQuery(clauses, 0, true);
Spans spans =3D near.getSpans(rd);=09=09




Regards
Vishal


On 4/19/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
> On Mittwoch 19 April 2006 07:25, Vishal Bathija wrote:
>
> > Query=3D contents:"provides distribution" contents:"supports
> > distribution"
>
> Why are there two spaces between those words?
>
> > I am not sure why it returns 0, when I have both phrases present in the
> > docs.
>
> See
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80=
fc022d889484a9248b71
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 19:17:13 2006
Return-Path: <java-user-return-20292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98241 invoked from network); 21 Apr 2006 19:17:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 19:17:03 -0000
Received: (qmail 69645 invoked by uid 500); 21 Apr 2006 19:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69617 invoked by uid 500); 21 Apr 2006 19:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69606 invoked by uid 99); 21 Apr 2006 19:16:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:16:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 12:16:55 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1FX1ei-000JJo-ND
	for java-user@lucene.apache.org; Fri, 21 Apr 2006 12:51:04 -0700
In-Reply-To: <004801c66575$58364b10$0401a8c0@MalcolmPC>
References: <004801c66575$58364b10$0401a8c0@MalcolmPC>
Mime-Version: 1.0 (Apple Message framework v749.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0997739D-C06E-4054-B682-41BDF72187E6@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Reuters
Date: Fri, 21 Apr 2006 12:16:31 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 21, 2006, at 11:56 AM, Malcolm Clark wrote:

> has anyone attempted to index/search the Reuters collection which  
> consists of SGML?
> Mine seems to run through the process okay but alas I'm left with  
> nothing in the index when I check with Luke or my own Search Engine.
> Anyone got any hints (apart from don't do it)?

The problem is clearly in whatever parser you're using.  I used  
Reuters 21578 as a corpus for a benchmarking suite; since all I cared  
about was title and body, I wrote a quick-n-dirty regex-based parser  
in Perl that extracted the docs from the SGML out onto the file  
system.  You'll find it at <http://www.rectangular.com/svn/kinosearch/ 
trunk/t/benchmarks/extract_reuters.plx>.

Best,

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 21 21:52:53 2006
Return-Path: <java-user-return-20293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72561 invoked from network); 21 Apr 2006 21:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Apr 2006 21:52:53 -0000
Received: (qmail 76852 invoked by uid 500); 21 Apr 2006 21:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76824 invoked by uid 500); 21 Apr 2006 21:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76811 invoked by uid 99); 21 Apr 2006 21:52:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 14:52:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 14:52:46 -0700
Received: by pproxy.gmail.com with SMTP id m51so1132163pye
        for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 14:52:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aZ83J0ho8aBf3n63V+8RGY1FpFJcySHq5ZwcNimdzv+kLm56jVagczn9mqdY1XVcBjzXWa33y1Eu0LVlXpmNGeEFYnFUQ70Oia0IFd1LcbO54u6hY2A+WZKlw70zvntFTNvPdvXlXZRPiv3TZhXI0mA8TMUOeW/CDkfV77FW290=
Received: by 10.35.60.15 with SMTP id n15mr219393pyk;
        Fri, 21 Apr 2006 14:52:25 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Fri, 21 Apr 2006 14:52:25 -0700 (PDT)
Message-ID: <c68e39170604211452q77d867bu355edaf700bcd44e@mail.gmail.com>
Date: Fri, 21 Apr 2006 17:52:25 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms ...
In-Reply-To: <BAY24-F206C5E8D205120691B75C2B9BB0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BAY24-F206C5E8D205120691B75C2B9BB0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/21/06, Dragon Fly <dragon-fly999@hotmail.com> wrote:
> I don't think the SynonymAnalyzer described in LIA would work because
> some of my "synonyms" contain multiple words.

The SynonymFilter in Solr can handle multi-word synonyms.

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
http://incubator.apache.org/solr/docs/api/org/apache/solr/analysis/SynonymF=
ilter.html

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 06:57:13 2006
Return-Path: <java-user-return-20294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61626 invoked from network); 22 Apr 2006 06:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 06:57:12 -0000
Received: (qmail 2283 invoked by uid 500); 22 Apr 2006 06:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2251 invoked by uid 500); 22 Apr 2006 06:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2240 invoked by uid 99); 22 Apr 2006 06:57:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 23:57:06 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of zhousen.zju@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Apr 2006 23:57:05 -0700
Received: by pproxy.gmail.com with SMTP id m51so1261391pye
        for <java-user@lucene.apache.org>; Fri, 21 Apr 2006 23:56:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:in-reply-to:x-mimeole:thread-index;
        b=Y/wlz+V5KTnWSGraPnWU2fKOfeRwM4NGAOKkV+X8hgAVbasZwGlN3RTu6nSIjdMbNNtGl91LPZvP6PyPAg79vLwsbtDJCF9j6qrgCdRja34pJzBXeFUM+XFj3ftO50bx3YqU8rRFcApVa++lNR0wVigZbaYzcK6hyWe/rsxBYq4=
Received: by 10.35.131.4 with SMTP id i4mr2771171pyn;
        Fri, 21 Apr 2006 23:56:45 -0700 (PDT)
Received: from zhousen ( [60.191.58.178])
        by mx.gmail.com with ESMTP id t5sm368571pyc.2006.04.21.23.56.43;
        Fri, 21 Apr 2006 23:56:45 -0700 (PDT)
From: "Sen Zhou" <zhousen.zju@gmail.com>
To: <java-user@lucene.apache.org>
Subject: about the performance of search with filter
Date: Sat, 22 Apr 2006 14:56:42 +0800
Message-ID: <001401c665d9$ebf2bbe0$7d50a8c0@zhousen>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e72c67f70604211205x40341831hfec30beba0ad990@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcZldpBpmG2nHPz5TsyaSCKe2rifTAAYucWA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, all
  I want to know the different between the search without rangefilter and
the search with rangefilter. Is the letter more slow than the latter? 

Thanks
    Sen Zhou


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 07:24:48 2006
Return-Path: <java-user-return-20295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75222 invoked from network); 22 Apr 2006 07:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 07:24:47 -0000
Received: (qmail 15168 invoked by uid 500); 22 Apr 2006 07:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15131 invoked by uid 500); 22 Apr 2006 07:24:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15119 invoked by uid 99); 22 Apr 2006 07:24:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 00:24:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 00:24:40 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Sat, 22 Apr 2006 09:24:16 +0200
Mime-Version: 1.0 (Apple Message framework v746.3)
In-Reply-To: <001401c665d9$ebf2bbe0$7d50a8c0@zhousen>
References: <001401c665d9$ebf2bbe0$7d50a8c0@zhousen>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BC90FACB-C2B5-4336-A3DF-B6346A760141@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: about the performance of search with filter
Date: Sat, 22 Apr 2006 09:26:53 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.3)
X-OriginalArrivalTime: 22 Apr 2006 07:24:17.0086 (UTC) FILETIME=[C3A005E0:01C665DD]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


22 apr 2006 kl. 08.56 skrev Sen Zhou:

> Hi, all
>   I want to know the different between the search without  
> rangefilter and
> the search with rangefilter. Is the letter more slow than the latter?

Adding more data processing usually consume more clock ticks. But you  
won't know until you test. Write a loop that places a couple of  
hundred thousand queries, with and without the filter. Compare the  
time spent. Feel free to report the outcome.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 08:29:03 2006
Return-Path: <java-user-return-20296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89432 invoked from network); 22 Apr 2006 08:29:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 08:29:03 -0000
Received: (qmail 49242 invoked by uid 500); 22 Apr 2006 08:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48627 invoked by uid 500); 22 Apr 2006 08:28:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48612 invoked by uid 99); 22 Apr 2006 08:28:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 01:28:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 01:28:55 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3M8SYYQ059484
	for <java-user@lucene.apache.org>; Sat, 22 Apr 2006 10:28:34 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
Date: Sat, 22 Apr 2006 10:28:33 +0200
User-Agent: KMail/1.8.2
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com> <200604191128.55250@danielnaber.de> <f742a72b0604211211v2badcc76p212cd41439a7f864@mail.gmail.com>
In-Reply-To: <f742a72b0604211211v2badcc76p212cd41439a7f864@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604221028.33146.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 21 April 2006 21:11, Vishal Bathija wrote:
> Hi,
> I am trying to get the frequency of a phrase using the SpanNearQuery.
> How can I use SpanNearQuery for boolean queries. The code I have is
> for a single query. How can I extend this for multiple queries

You can use SpanNearQuery as a clause (subquery) in a BooleanQuery
or in a SpanOrQuery.
See BooleanQuery.add() and the constructor of SpanOrQuery.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 10:36:48 2006
Return-Path: <java-user-return-20297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29191 invoked from network); 22 Apr 2006 10:36:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 10:36:48 -0000
Received: (qmail 14384 invoked by uid 500); 22 Apr 2006 10:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13402 invoked by uid 500); 22 Apr 2006 10:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 62918 invoked by uid 99); 22 Apr 2006 02:18:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
X-Server-Uuid: 7829E76E-BB9E-4995-8473-3C0929DF7DD1
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Synonyms ...
Date: Fri, 21 Apr 2006 22:17:42 -0400
Message-ID: <DAE04D9F6FD21448A220918A522FB60E1F1B96@MI8NYCMAIL15.Mi8.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Synonyms ...
Thread-Index: AcZlbCR55VMtfDocTd2XEjrB/SrzeQAQ804A
From: "Colin Young" <colin.young@travelgator.com>
To: java-user@lucene.apache.org
X-OriginalArrivalTime: 22 Apr 2006 02:17:36.0987 (UTC)
 FILETIME=[EC4FBAB0:01C665B2]
X-WSS-ID: 68574DCA2XS50272622-01-01
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The mock synonym code in LIA will work just fine with multiple words,
but you need to pass them to the synonym engine as a single string
containing multiple words, which means treating some phrases in the
input text as single tokens, and that's likely where you'll have to put
in the work.

I think you will need to create a custom tokenizer to deal with phrases
you'd like to keep together. I have done something similar (e.g. United
Kingdom has Britain, England and UK as synonyms), but in my case I'm
indexing only one or two word "documents" not huge blocks of text, so it
was very simple to implement a tokenizer.

Hope this is some help.

Colin


-----Original Message-----
From: Dragon Fly [mailto:dragon-fly999@hotmail.com]=20
Sent: 21 April, 2006 13:49
To: java-user@lucene.apache.org
Subject: Synonyms ...

Hi,

What is the best way to implement the following?

Document 1 contains the following text:
  "THE CZECH REPUBLIC ORGANIZATION"

Document 2 contains the following text:
  "THE CZE ORGANISATION"

Synonym rules:
  (1) CZECH REPUBLIC --> CZE
  (2) CZE --> CZECH REPUBLIC
  (3) ORGANIZATION --> ORG, ORGANISATION

All of the following phrase searches must match BOTH documents:
  "CZECH REPUBLIC ORGANIZATION"
  "CZECH REPUBLIC ORGANISATION"
  "CZECH REPUBLIC ORG"
  "CZE ORGANIZATION"
  "CZE ORGANISATION"
  "CZE ORG"

I don't think the SynonymAnalyzer described in LIA would work because
some of my "synonyms" contain multiple words.  Thank you.

_________________________________________________________________
Don't just search. Find. Check out the new MSN Search!=20
http://search.msn.click-url.com/go/onm00200636ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 12:34:08 2006
Return-Path: <java-user-return-20298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65642 invoked from network); 22 Apr 2006 12:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 12:34:07 -0000
Received: (qmail 83466 invoked by uid 500); 22 Apr 2006 12:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83307 invoked by uid 500); 22 Apr 2006 12:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83243 invoked by uid 99); 22 Apr 2006 12:33:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 05:33:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 05:33:56 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FXHIq-00079u-IN
	for java-user@lucene.apache.org; Sat, 22 Apr 2006 05:33:32 -0700
Message-ID: <4040415.post@talk.nabble.com>
Date: Sat, 22 Apr 2006 05:33:32 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: demo example
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
just know i am executed the index.jsp file in the demo directory. i am
gettind NUll,Null values for Url and title. can u please tell me why i am
getting these null values.

Thanking you,
Shajahan 
--
View this message in context: http://www.nabble.com/demo-example-t1491088.html#a4040415
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 22 18:17:14 2006
Return-Path: <java-user-return-20299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43597 invoked from network); 22 Apr 2006 18:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Apr 2006 18:17:14 -0000
Received: (qmail 54944 invoked by uid 500); 22 Apr 2006 18:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54894 invoked by uid 500); 22 Apr 2006 18:17:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54882 invoked by uid 99); 22 Apr 2006 18:17:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 11:17:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 11:17:07 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15260E4E@mailer.syr.edu>; Sat, 22 Apr 2006 14:16:46 -0400
Message-ID: <444A730E.1030004@syr.edu>
Date: Sat, 22 Apr 2006 14:16:46 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: demo example
References: <4040415.post@talk.nabble.com>
In-Reply-To: <4040415.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Shajahan,

Did you create the index first?  Please provide more information on the 
error and the steps you took to setup the demo.

-Grant

Shajahan wrote:
> Hi,
> just know i am executed the index.jsp file in the demo directory. i am
> gettind NUll,Null values for Url and title. can u please tell me why i am
> getting these null values.
>
> Thanking you,
> Shajahan 
> --
> View this message in context: http://www.nabble.com/demo-example-t1491088.html#a4040415
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 04:25:58 2006
Return-Path: <java-user-return-20300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16719 invoked from network); 23 Apr 2006 04:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 04:25:58 -0000
Received: (qmail 62200 invoked by uid 500); 23 Apr 2006 04:25:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62170 invoked by uid 500); 23 Apr 2006 04:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62159 invoked by uid 99); 23 Apr 2006 04:25:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 21:25:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Apr 2006 21:25:49 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FXWA4-0008Mt-5O
	for java-user@lucene.apache.org; Sat, 22 Apr 2006 21:25:28 -0700
Message-ID: <4047840.post@talk.nabble.com>
Date: Sat, 22 Apr 2006 21:25:28 -0700 (PDT)
From: Shajahan <shaikshajahansha@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: demo example
In-Reply-To: <444A730E.1030004@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: shaikshajahansha@yahoo.co.in
X-Nabble-From: Shajahan <shaikshajahansha@yahoo.co.in>
References: <4040415.post@talk.nabble.com> <444A730E.1030004@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
Thankyou for your replay, 
ya i created the index. and i specify that indexLocation(index directory
path) in the configuration.jsp file.
my demo application contains
Configuration.jsp,footer.jsp,header.jsp,index.jsp,results.jsp and i copy the
lucene-demos-1.4.3.jar file into the lib folder. and i specify the classpath
for lucene1.4.3 & lucenedemo1.4.3 also.

can i copy the index folder into my application, or any thing else please
give some informetion.

thanking you,
shajahan
--
View this message in context: http://www.nabble.com/demo-example-t1491088.html#a4047840
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 13:48:58 2006
Return-Path: <java-user-return-20301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86045 invoked from network); 23 Apr 2006 13:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 13:48:58 -0000
Received: (qmail 31005 invoked by uid 500); 23 Apr 2006 13:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30959 invoked by uid 500); 23 Apr 2006 13:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30945 invoked by uid 99); 23 Apr 2006 13:48:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 06:48:51 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paige.john@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 06:48:51 -0700
Received: by pproxy.gmail.com with SMTP id m51so1590854pye
        for <java-user@lucene.apache.org>; Sun, 23 Apr 2006 06:48:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FPXKdse1Mpt0Cnrxed1dpwVFMtsMbdsfoj3h+NazubV6ONXlwIp+lcMJhP5Imb5NFRVJvOcIPQlq28CkGECLIDDLlHXhh8MmjkL3n2+7V4KAiTkJqwtIENCs9SFagdamGc195NpDwzr77QLlj8ll+YDTlo9xuLkXx6JzlVkpHYQ=
Received: by 10.35.100.6 with SMTP id c6mr2421830pym;
        Sun, 23 Apr 2006 06:48:30 -0700 (PDT)
Received: by 10.35.116.20 with HTTP; Sun, 23 Apr 2006 06:48:30 -0700 (PDT)
Message-ID: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com>
Date: Sun, 23 Apr 2006 09:48:30 -0400
From: "John Paige" <paige.john@gmail.com>
To: java-user@lucene.apache.org
Subject: Segments creation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21042_29115150.1145800110504"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21042_29115150.1145800110504
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello all,
   In my application it is required to build an index for each user. We nee=
d
to add documents to the existing index frequently.
We cannot use RAMDirectory to create a RAM index and merge it with the
FSDirectory index later on based on the mergefactor. We need to add each
document in the FSDirectory based index.
We are afraid of getting into the "out of file descriptors" issue , so my
question is, does lucene create a segment for each document that gets added
to the FS based index i.e. will adding 10 documents to the existing index
create 10 segments?

Thanks,
John

------=_Part_21042_29115150.1145800110504--

From java-user-return-20302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 14:47:00 2006
Return-Path: <java-user-return-20302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3456 invoked from network); 23 Apr 2006 14:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 14:46:59 -0000
Received: (qmail 64891 invoked by uid 500); 23 Apr 2006 14:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64869 invoked by uid 500); 23 Apr 2006 14:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64857 invoked by uid 99); 23 Apr 2006 14:46:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 07:46:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 07:46:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E775333CA9A; Sun, 23 Apr 2006 10:46:32 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5496B33CA9A
	for <java-user@lucene.apache.org>; Sun, 23 Apr 2006 10:46:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com>
References: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Segments creation
Date: Sun, 23 Apr 2006 10:46:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you use the compound index file format (the default since Lucene  
1.4) you'll avoid the file descriptors issue.  If you add 10  
documents at one time with a single IndexWriter, you will not create  
10 segments, only one segment (generally speaking, based on the  
default segment factors).

	Erik


On Apr 23, 2006, at 9:48 AM, John Paige wrote:

> Hello all,
>    In my application it is required to build an index for each  
> user. We need
> to add documents to the existing index frequently.
> We cannot use RAMDirectory to create a RAM index and merge it with the
> FSDirectory index later on based on the mergefactor. We need to add  
> each
> document in the FSDirectory based index.
> We are afraid of getting into the "out of file descriptors" issue ,  
> so my
> question is, does lucene create a segment for each document that  
> gets added
> to the FS based index i.e. will adding 10 documents to the existing  
> index
> create 10 segments?
>
> Thanks,
> John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 18:13:36 2006
Return-Path: <java-user-return-20303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59962 invoked from network); 23 Apr 2006 18:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 18:13:36 -0000
Received: (qmail 4170 invoked by uid 500); 23 Apr 2006 18:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4061 invoked by uid 500); 23 Apr 2006 18:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4043 invoked by uid 99); 23 Apr 2006 18:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 11:13:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paige.john@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 11:13:29 -0700
Received: by pproxy.gmail.com with SMTP id m51so1630118pye
        for <java-user@lucene.apache.org>; Sun, 23 Apr 2006 11:13:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=N2xFCQ9ffRJ0ID/ZncXyzmjmiuO2LzhwJOzgDiaizjZQHu2Hh5yXmG+Wn+2DkT7TBYufryLB5Y2gRhn1ZFGbp4XJPks0KprouoXDqVMjELHW4/cpEoIcFrDX1ZpaZEKvcx28qEFfcZQuQKaZ8U8imE/u1yVuexXFPnKZhXjG3O4=
Received: by 10.35.34.20 with SMTP id m20mr2787671pyj;
        Sun, 23 Apr 2006 11:13:07 -0700 (PDT)
Received: by 10.35.116.20 with HTTP; Sun, 23 Apr 2006 11:13:07 -0700 (PDT)
Message-ID: <40d07eb40604231113s74508a77sb444cfd2ed061e53@mail.gmail.com>
Date: Sun, 23 Apr 2006 14:13:07 -0400
From: "John Paige" <paige.john@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Segments creation
In-Reply-To: <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23215_11308852.1145815987124"
References: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com>
	 <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23215_11308852.1145815987124
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

So, if I use one indexwriter instance to index one document, will it create
a segment per document?
How many files per segment get added if I use compound index file format?

Thanks,
John

On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> If you use the compound index file format (the default since Lucene
> 1.4) you'll avoid the file descriptors issue.  If you add 10
> documents at one time with a single IndexWriter, you will not create
> 10 segments, only one segment (generally speaking, based on the
> default segment factors).
>
>         Erik
>
>
> On Apr 23, 2006, at 9:48 AM, John Paige wrote:
>
> > Hello all,
> >    In my application it is required to build an index for each
> > user. We need
> > to add documents to the existing index frequently.
> > We cannot use RAMDirectory to create a RAM index and merge it with the
> > FSDirectory index later on based on the mergefactor. We need to add
> > each
> > document in the FSDirectory based index.
> > We are afraid of getting into the "out of file descriptors" issue ,
> > so my
> > question is, does lucene create a segment for each document that
> > gets added
> > to the FS based index i.e. will adding 10 documents to the existing
> > index
> > create 10 segments?
> >
> > Thanks,
> > John
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23215_11308852.1145815987124--

From java-user-return-20304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 18:48:21 2006
Return-Path: <java-user-return-20304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71586 invoked from network); 23 Apr 2006 18:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 18:48:20 -0000
Received: (qmail 24740 invoked by uid 500); 23 Apr 2006 18:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24716 invoked by uid 500); 23 Apr 2006 18:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24705 invoked by uid 99); 23 Apr 2006 18:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 11:48:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of anton.feldmann@uni-bielefeld.de designates 129.70.4.98 as permitted sender)
Received: from [129.70.4.98] (HELO smtp-relay2.uni-bielefeld.de) (129.70.4.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 11:48:14 -0700
Received: from pmxchannel-daemon.mail2.hrz.uni-bielefeld.de by
 mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 id <0IY600K01UVTE8@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Sun, 23 Apr 2006 20:47:53 +0200 (MEST)
Received: from [212.201.80.104] ([212.201.80.104])
 by mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 with ESMTPPA id <0IY600G5IUVSF3@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Sun, 23 Apr 2006 20:47:52 +0200 (MEST)
Date: Sun, 23 Apr 2006 20:47:44 +0200
From: anton feldmann <anton.feldmann@uni-bielefeld.de>
Subject: How to serach in sentence and dispaly the whole sentence
To: java-user@lucene.apache.org
Message-id: <444BCBD0.3000609@uni-bielefeld.de>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
X-Spam-Level:
X-UniBi-Spam-Level: , 7%
X-UniBi-Spam-Rules: __CP_NOT_1 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0,
 __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0,
 __USER_AGENT 0
X-UniBi-Deliver: Tag
X-UniBi-EnvFrom: anton.feldmann@uni-bielefeld.de
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1,
 Antispam-Data: 2006.4.23.113109, vscan2.hrz.uni-bielefeld.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I intend, to make a search, to find a word or a word pair
in  a sentence or a paragraph. But then the sentence should be indicated
as a whole. The question relates to the fact, that I need to extend Lucene
in such a way that this is possible. But where to I make a start, because
I have no idea, how I have to change the IndexFile, whether that 
conforms with the Lucene Team.

cheers

anton feldmann


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 20:37:09 2006
Return-Path: <java-user-return-20305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4343 invoked from network); 23 Apr 2006 20:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 20:37:08 -0000
Received: (qmail 75946 invoked by uid 500); 23 Apr 2006 20:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75915 invoked by uid 500); 23 Apr 2006 20:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75904 invoked by uid 99); 23 Apr 2006 20:37:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 13:37:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 13:37:02 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1526BBA0@mailer.syr.edu>; 23 Apr 2006 16:36:41 -0400
Message-ID: <444BE559.4080804@syr.edu>
Date: Sun, 23 Apr 2006 16:36:41 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to serach in sentence and dispaly the whole sentence
References: <444BCBD0.3000609@uni-bielefeld.de>
In-Reply-To: <444BCBD0.3000609@uni-bielefeld.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anton,

I think there are at least a couple of ways of doing this.  I assume you 
have a program that does sentence detection already, as Lucene does not 
provide this.  If not, I am sure a search of the web will find one that 
has high accuracy.
You can:
1. Index each sentence as a separate Document.  You will need a field on 
the Document relating it back to the overall file so you can reconstruct it.
2. As you index, insert sentence/paragraph boundary markers into your 
index and then use the SpanQuery functionality.  Search this mail 
archive for sentence boundary detection and Span Query (try the dev list 
too).  I think there was a discussion between me, Doug and Hoss on how 
to do this.
3. Do search as you do now and then post process to figure out what 
sentence it came from.  This will be inefficient, but I don't know what 
your requirements are that way, so it may work for you.

There are probably other ways too.

anton feldmann wrote:
> I intend, to make a search, to find a word or a word pair
> in  a sentence or a paragraph. But then the sentence should be indicated
> as a whole. The question relates to the fact, that I need to extend 
> Lucene
> in such a way that this is possible. But where to I make a start, because
> I have no idea, how I have to change the IndexFile, whether that 
> conforms with the Lucene Team.
>
> cheers
>
> anton feldmann
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 20:44:48 2006
Return-Path: <java-user-return-20306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6123 invoked from network); 23 Apr 2006 20:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 20:44:47 -0000
Received: (qmail 82430 invoked by uid 500); 23 Apr 2006 20:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82402 invoked by uid 500); 23 Apr 2006 20:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82391 invoked by uid 99); 23 Apr 2006 20:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 13:44:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 13:44:42 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1526BC6D@mailer.syr.edu>; 23 Apr 2006 16:44:21 -0400
Message-ID: <444BE725.50603@syr.edu>
Date: Sun, 23 Apr 2006 16:44:21 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: demo example
References: <4040415.post@talk.nabble.com> <444A730E.1030004@syr.edu> <4047840.post@talk.nabble.com>
In-Reply-To: <4047840.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Did you follow the directions at 
http://lucene.apache.org/java/docs/gettingstarted.html

There is an ANT task that creates a WAR file for the Demo (called 
luceneweb.war), so I don't think you should have to do any copying of 
jar files.  You should be able to copy this to Tomcat or whatever 
servlet contiainer you are using.

Also, verify your Index is correct by using Luke: 
http://www.getopt.org/luke/



Shajahan wrote:
> Hi,
> Thankyou for your replay, 
> ya i created the index. and i specify that indexLocation(index directory
> path) in the configuration.jsp file.
> my demo application contains
> Configuration.jsp,footer.jsp,header.jsp,index.jsp,results.jsp and i copy the
> lucene-demos-1.4.3.jar file into the lib folder. and i specify the classpath
> for lucene1.4.3 & lucenedemo1.4.3 also.
>
> can i copy the index folder into my application, or any thing else please
> give some informetion.
>
> thanking you,
> shajahan
> --
> View this message in context: http://www.nabble.com/demo-example-t1491088.html#a4047840
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 23 22:26:46 2006
Return-Path: <java-user-return-20307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35792 invoked from network); 23 Apr 2006 22:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Apr 2006 22:26:46 -0000
Received: (qmail 41245 invoked by uid 500); 23 Apr 2006 22:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41215 invoked by uid 500); 23 Apr 2006 22:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41204 invoked by uid 99); 23 Apr 2006 22:26:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 15:26:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 15:26:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E64A133CAD0; Sun, 23 Apr 2006 18:26:19 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3568233CAC9
	for <java-user@lucene.apache.org>; Sun, 23 Apr 2006 18:26:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <40d07eb40604231113s74508a77sb444cfd2ed061e53@mail.gmail.com>
References: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com> <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com> <40d07eb40604231113s74508a77sb444cfd2ed061e53@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E84CF0AC-CF08-48B9-B4F4-14F44DAB8BC4@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Segments creation
Date: Sun, 23 Apr 2006 18:26:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you use the compound format, all "files" are kept inside a single  
filesystem file.

	Erik


On Apr 23, 2006, at 2:13 PM, John Paige wrote:

> So, if I use one indexwriter instance to index one document, will  
> it create
> a segment per document?
> How many files per segment get added if I use compound index file  
> format?
>
> Thanks,
> John
>
> On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> If you use the compound index file format (the default since Lucene
>> 1.4) you'll avoid the file descriptors issue.  If you add 10
>> documents at one time with a single IndexWriter, you will not create
>> 10 segments, only one segment (generally speaking, based on the
>> default segment factors).
>>
>>         Erik
>>
>>
>> On Apr 23, 2006, at 9:48 AM, John Paige wrote:
>>
>>> Hello all,
>>>    In my application it is required to build an index for each
>>> user. We need
>>> to add documents to the existing index frequently.
>>> We cannot use RAMDirectory to create a RAM index and merge it  
>>> with the
>>> FSDirectory index later on based on the mergefactor. We need to add
>>> each
>>> document in the FSDirectory based index.
>>> We are afraid of getting into the "out of file descriptors" issue ,
>>> so my
>>> question is, does lucene create a segment for each document that
>>> gets added
>>> to the FS based index i.e. will adding 10 documents to the existing
>>> index
>>> create 10 segments?
>>>
>>> Thanks,
>>> John
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 01:47:34 2006
Return-Path: <java-user-return-20308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92122 invoked from network); 24 Apr 2006 01:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 01:47:34 -0000
Received: (qmail 71616 invoked by uid 500); 24 Apr 2006 01:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71588 invoked by uid 500); 24 Apr 2006 01:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71575 invoked by uid 99); 24 Apr 2006 01:47:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 18:47:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paige.john@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO pproxy.gmail.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 18:47:27 -0700
Received: by pproxy.gmail.com with SMTP id m51so1695707pye
        for <java-user@lucene.apache.org>; Sun, 23 Apr 2006 18:47:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VZOa4ntSQOziFz5gaOVirodtwlusvlJDsNK6iauYHHpPmdWkvEOAqQS478dEJjFQxPDzOUiOV8zvoCGxvXEdjoQbhMdVdhHakQObqtDH5qk5B+6YaSMVw/Z/FduiBJfkjCMsoOsusifhrGJB0jE8rXQ+foANgua6LxyuX+g7TwI=
Received: by 10.35.34.18 with SMTP id m18mr37869pyj;
        Sun, 23 Apr 2006 18:47:04 -0700 (PDT)
Received: by 10.35.116.20 with HTTP; Sun, 23 Apr 2006 18:47:04 -0700 (PDT)
Message-ID: <40d07eb40604231847o50ad0c44k153988a5e5f8ac2c@mail.gmail.com>
Date: Sun, 23 Apr 2006 21:47:04 -0400
From: "John Paige" <paige.john@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Segments creation
In-Reply-To: <E84CF0AC-CF08-48B9-B4F4-14F44DAB8BC4@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27671_5867615.1145843224204"
References: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com>
	 <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com>
	 <40d07eb40604231113s74508a77sb444cfd2ed061e53@mail.gmail.com>
	 <E84CF0AC-CF08-48B9-B4F4-14F44DAB8BC4@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27671_5867615.1145843224204
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks for the responses. For fault tolerance, we have decided to set the
"mergeFactor" to 1, ie, we want to update the on-disk index every time a
document is added via addDocument(). My question was that will this create =
a
new segment every time? Or is there a separate "segmentFactor", such that a=
n
incremental index update updates an existing segment *on disk*, only
starting a new segment once a given number of documents have been added to
the index?

Thanks,
John

On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> If you use the compound format, all "files" are kept inside a single
> filesystem file.
>
>         Erik
>
>
> On Apr 23, 2006, at 2:13 PM, John Paige wrote:
>
> > So, if I use one indexwriter instance to index one document, will
> > it create
> > a segment per document?
> > How many files per segment get added if I use compound index file
> > format?
> >
> > Thanks,
> > John
> >
> > On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >>
> >> If you use the compound index file format (the default since Lucene
> >> 1.4) you'll avoid the file descriptors issue.  If you add 10
> >> documents at one time with a single IndexWriter, you will not create
> >> 10 segments, only one segment (generally speaking, based on the
> >> default segment factors).
> >>
> >>         Erik
> >>
> >>
> >> On Apr 23, 2006, at 9:48 AM, John Paige wrote:
> >>
> >>> Hello all,
> >>>    In my application it is required to build an index for each
> >>> user. We need
> >>> to add documents to the existing index frequently.
> >>> We cannot use RAMDirectory to create a RAM index and merge it
> >>> with the
> >>> FSDirectory index later on based on the mergefactor. We need to add
> >>> each
> >>> document in the FSDirectory based index.
> >>> We are afraid of getting into the "out of file descriptors" issue ,
> >>> so my
> >>> question is, does lucene create a segment for each document that
> >>> gets added
> >>> to the FS based index i.e. will adding 10 documents to the existing
> >>> index
> >>> create 10 segments?
> >>>
> >>> Thanks,
> >>> John
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27671_5867615.1145843224204--

From java-user-return-20309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 04:48:17 2006
Return-Path: <java-user-return-20309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53256 invoked from network); 24 Apr 2006 04:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 04:48:17 -0000
Received: (qmail 17927 invoked by uid 500); 24 Apr 2006 04:48:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17886 invoked by uid 500); 24 Apr 2006 04:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17875 invoked by uid 99); 24 Apr 2006 04:48:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 21:48:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [203.92.45.238] (HELO noidagw01.naukri.com) (203.92.45.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Apr 2006 21:48:10 -0700
Received: from [192.168.2.168] ([192.168.2.168])
	by noidagw01.naukri.com (8.13.4/8.13.4) with ESMTP id k3O4YSTl006181
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 10:04:29 +0530
Message-ID: <444C5867.3070407@naukri.com>
Date: Mon, 24 Apr 2006 10:17:35 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Mozilla Thunderbird 1.0.2-6 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Most used words
References: <444771C3.2040303@fib.upc.edu> <4448B1C8.2080304@naukri.com> <4448B957.20200@fib.upc.edu>
In-Reply-To: <4448B957.20200@fib.upc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Its a good idea.
src/org/getopt/luke/HighFreqTerms.java should definately help.
You may also control the number of terms[tags in your case] required as 
the output.
Do you have a demo URL for your appl.?

Regards,
kapilChhabra

Daniel Cortes wrote:

> Thks for the reply, perhaps to use something like in Luke is the best 
> option.
> My idea to do is a TAGcloud (see the example in this page) for every 
> group(field group with the id) and every portal (with the id).
> The problem is that I think do reader.terms() is not the best option 
> in my case, because I have a lot of groups and I want the tagcloud of 
> an specific group (for example "luceners")
> I thinked in do a search WHERE field GROUP is "luceners" and order my 
> hits in ordered by Date. For this reason i can obtain something like 
> "Racently we talk about .." and show words used in the last days in 
> this groups.
> What do you think?
>
>
>
> Kapil Chhabra wrote:
>
>> Hi,
>> If I have correctly understood your question, you want the terms in a 
>> field with the maximum number of occurences.
>> Try luke [www.getopt.org/*luke*/].
>> Or else in case you are not able to initialize graphical content on 
>> your system.
>> You may use the following script.
>> src/org/getopt/luke/HighFreqTerms.java
>> get it from the luke source code.
>> Regards,
>> kapilChhabra
>>
>> Daniel Cortes wrote:
>>
>>> Hi everybody,
>>> I have a simple question for you. How do you do to obtain the most 
>>> used words of  and Index?
>>> In my case I want to obtain the 10 most used words in a group. I 
>>> thinked in use a TreeSet with all words and their frequencies of 
>>> hits (whit the restriction of GROUPID).
>>> Someone have any idea? Thks for any reply.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 07:57:42 2006
Return-Path: <java-user-return-20310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52462 invoked from network); 24 Apr 2006 07:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 07:57:42 -0000
Received: (qmail 10215 invoked by uid 500); 24 Apr 2006 07:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10184 invoked by uid 500); 24 Apr 2006 07:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10173 invoked by uid 99); 24 Apr 2006 07:57:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 00:57:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 00:57:34 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id DB2A11BB43
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 09:57:06 +0200 (CEST)
Message-ID: <444C84D2.7040205@fib.upc.edu>
Date: Mon, 24 Apr 2006 09:57:06 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Most used words
References: <444771C3.2040303@fib.upc.edu> <4448B1C8.2080304@naukri.com> <4448B957.20200@fib.upc.edu> <444C5867.3070407@naukri.com>
In-Reply-To: <444C5867.3070407@naukri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.27
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.27 tagged_above=-999 required=3.5
 tests=[ALL_TRUSTED=-1.8, AWL=0.129, BAYES_00=-2.599]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not now, but When I finished the app I showed in the list.

Kapil Chhabra wrote:

> Its a good idea.
> src/org/getopt/luke/HighFreqTerms.java should definately help.
> You may also control the number of terms[tags in your case] required 
> as the output.
> Do you have a demo URL for your appl.?
>
> Regards,
> kapilChhabra
>
> Daniel Cortes wrote:
>
>> Thks for the reply, perhaps to use something like in Luke is the best 
>> option.
>> My idea to do is a TAGcloud (see the example in this page) for every 
>> group(field group with the id) and every portal (with the id).
>> The problem is that I think do reader.terms() is not the best option 
>> in my case, because I have a lot of groups and I want the tagcloud of 
>> an specific group (for example "luceners")
>> I thinked in do a search WHERE field GROUP is "luceners" and order my 
>> hits in ordered by Date. For this reason i can obtain something like 
>> "Racently we talk about .." and show words used in the last days in 
>> this groups.
>> What do you think?
>>
>>
>>
>> Kapil Chhabra wrote:
>>
>>> Hi,
>>> If I have correctly understood your question, you want the terms in 
>>> a field with the maximum number of occurences.
>>> Try luke [www.getopt.org/*luke*/].
>>> Or else in case you are not able to initialize graphical content on 
>>> your system.
>>> You may use the following script.
>>> src/org/getopt/luke/HighFreqTerms.java
>>> get it from the luke source code.
>>> Regards,
>>> kapilChhabra
>>>
>>> Daniel Cortes wrote:
>>>
>>>> Hi everybody,
>>>> I have a simple question for you. How do you do to obtain the most 
>>>> used words of  and Index?
>>>> In my case I want to obtain the 10 most used words in a group. I 
>>>> thinked in use a TreeSet with all words and their frequencies of 
>>>> hits (whit the restriction of GROUPID).
>>>> Someone have any idea? Thks for any reply.
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 08:39:24 2006
Return-Path: <java-user-return-20311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75991 invoked from network); 24 Apr 2006 08:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 08:39:23 -0000
Received: (qmail 47527 invoked by uid 500); 24 Apr 2006 08:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47159 invoked by uid 500); 24 Apr 2006 08:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47148 invoked by uid 99); 24 Apr 2006 08:39:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 01:39:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 01:39:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F0E2C33CAE3; Mon, 24 Apr 2006 04:38:56 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B1B9033CAE1
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 04:38:52 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <40d07eb40604231847o50ad0c44k153988a5e5f8ac2c@mail.gmail.com>
References: <40d07eb40604230648t2a82b6a0tfad0eab36f28e0aa@mail.gmail.com> <F2E46843-19A2-4216-A0D1-AA60D893E384@ehatchersolutions.com> <40d07eb40604231113s74508a77sb444cfd2ed061e53@mail.gmail.com> <E84CF0AC-CF08-48B9-B4F4-14F44DAB8BC4@ehatchersolutions.com> <40d07eb40604231847o50ad0c44k153988a5e5f8ac2c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3D0E0CE-3280-4F67-AEDE-68C434C00332@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Segments creation
Date: Mon, 24 Apr 2006 04:38:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

To be honest, I have to look up what has been written on this topic  
to get the answer right myself.  Otis did a thorough write-up in  
"Lucene in Action".  Lucene's javadocs also cover these factors here:

	<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexWriter.html>

look at the setters, particularly setMaxMergeDocs.

	Erik


On Apr 23, 2006, at 9:47 PM, John Paige wrote:

> Thanks for the responses. For fault tolerance, we have decided to  
> set the
> "mergeFactor" to 1, ie, we want to update the on-disk index every  
> time a
> document is added via addDocument(). My question was that will this  
> create a
> new segment every time? Or is there a separate "segmentFactor",  
> such that an
> incremental index update updates an existing segment *on disk*, only
> starting a new segment once a given number of documents have been  
> added to
> the index?
>
> Thanks,
> John
>
> On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> If you use the compound format, all "files" are kept inside a single
>> filesystem file.
>>
>>         Erik
>>
>>
>> On Apr 23, 2006, at 2:13 PM, John Paige wrote:
>>
>>> So, if I use one indexwriter instance to index one document, will
>>> it create
>>> a segment per document?
>>> How many files per segment get added if I use compound index file
>>> format?
>>>
>>> Thanks,
>>> John
>>>
>>> On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>>>
>>>> If you use the compound index file format (the default since Lucene
>>>> 1.4) you'll avoid the file descriptors issue.  If you add 10
>>>> documents at one time with a single IndexWriter, you will not  
>>>> create
>>>> 10 segments, only one segment (generally speaking, based on the
>>>> default segment factors).
>>>>
>>>>         Erik
>>>>
>>>>
>>>> On Apr 23, 2006, at 9:48 AM, John Paige wrote:
>>>>
>>>>> Hello all,
>>>>>    In my application it is required to build an index for each
>>>>> user. We need
>>>>> to add documents to the existing index frequently.
>>>>> We cannot use RAMDirectory to create a RAM index and merge it
>>>>> with the
>>>>> FSDirectory index later on based on the mergefactor. We need to  
>>>>> add
>>>>> each
>>>>> document in the FSDirectory based index.
>>>>> We are afraid of getting into the "out of file descriptors"  
>>>>> issue ,
>>>>> so my
>>>>> question is, does lucene create a segment for each document that
>>>>> gets added
>>>>> to the FS based index i.e. will adding 10 documents to the  
>>>>> existing
>>>>> index
>>>>> create 10 segments?
>>>>>
>>>>> Thanks,
>>>>> John
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 13:40:53 2006
Return-Path: <java-user-return-20312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36152 invoked from network); 24 Apr 2006 13:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 13:40:53 -0000
Received: (qmail 41588 invoked by uid 500); 24 Apr 2006 13:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41561 invoked by uid 500); 24 Apr 2006 13:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41536 invoked by uid 99); 24 Apr 2006 13:40:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 06:40:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of flavio@bs2.com.br designates 200.203.183.32 as permitted sender)
Received: from [200.203.183.32] (HELO srv-03.bs2.com.br) (200.203.183.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 06:40:45 -0700
Received: from localhost (localhost.bs2.com.br [127.0.0.1])
	by srv-03.bs2.com.br (Postfix) with ESMTP id 26EFB4AF27
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 10:44:26 -0300 (BRT)
Received: from webmail.bs2.com.br (srv-01-j01.bs2.com.br [200.203.183.38])
	by srv-03.bs2.com.br (Postfix) with ESMTP id BE48A4AE51
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 10:44:25 -0300 (BRT)
Received: from 32.104.18.240
        (SquirrelMail authenticated user flavio@bs2.com.br)
        by webmail.bs2.com.br with HTTP;
        Mon, 24 Apr 2006 10:38:21 -0300 (BRT)
Message-ID: <38639.32.104.18.240.1145885901.squirrel@webmail.bs2.com.br>
In-Reply-To: <44475958.3060109@artnology.com>
References: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
    <44475958.3060109@artnology.com>
Date: Mon, 24 Apr 2006 10:38:21 -0300 (BRT)
Subject: Re: BooleanQuery$TooManyClauses
From: =?iso-8859-1?Q?Fl=E1vio_Marim?= <flavio@bs2.com.br>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks friends. The problem was solved. I used
BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE) because the value was
really big and so variable that I couldn't determine a consistent top
value.

--
Marim

Supriya Kumar Shyamal disse:
> Normally the default setup for BooleanCluase count is 1024, may be your
> query produce more query than 1024, one work around is that you set the
> BooleanCluase count to more than 1024. You can do that by just invoking
> the static method
> BooleanQuery.setMaxClauseCount(2048);
>
> supriya
>
> Flvio Marim wrote:
>> Hi there.
>> I am a new Lucene user and I have been searching the group archives but
>> couldn't solve the problem. I have just joined a project that uses
>> Lucene.
>>
>> We get an error when we issue some of our wildcard text searches.
>>
>> We use the StandardAnalyzer for indexing our documents and our query is
>> as
>> follows when we issue a search string of s1* for example:
>> (+(identity:s1*
>>  keywords:s1* {title:s1* {body:s1* {description:s1* searchterms:s1*
>> {abstract:s1* creatoremail:s1* authornameS:s1* {reviewername:s1*
>> metadata:s1* {authorname:s1*) +all:all)
>>
>> Anyone have any ideas on how to debug this or how we can fix it?
>>
>> We are using Lucene version 1.4.3 and the error appears as follows:
>>
>> 2006-04-06 13:43:20,928 [Servlet.Engine.Transports : 0] ERROR -
>> org.apache.lucene.search.BooleanQuery$TooManyClauses
>>         at
>> org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(CompiledCode))
>>         at
>> org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java(Inlined
>> Compiled Code))
>>         at
>> org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java(Compiled
>> Code))
>>         at
>> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
>> Code))
>>         at
>> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java(Compiled
>> Code))
>>         at
>> org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java(Inlined
>> Compiled Code))
>>         at org.apache.lucene.search.Query.weight(Query.java(Inlined
>> Compiled Code))
>>         at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java(Compiled
>> Code))
>>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java(Compiled
>> Code))
>>         at org.apache.lucene.search.Hits.<init>(Hits.java(Inlined
>> Compiled
>> Code))
>>         at
>> org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
>> Compiled Code))
>>         at
>> org.apache.lucene.search.Searcher.search(Searcher.java(Inlined
>> Compiled Code))
>>         at
>> com.ibm.services.salesone.fsearch.search.FacetedSearchImpl.getFacetCountsWithText(FacetedSearchImpl.java(Compiled
>> Code))
>>   	...... <truncated to limit size of this email>
>>
>>
>
>
> --
> Mit freundlichen Gren / Regards
>
> Supriya Kumar Shyamal
>
> Software Developer
> tel +49 (30) 443 50 99 -22
> fax +49 (30) 443 50 99 -99
> email supriya.shyamal@artnology.com
> ___________________________
> artnology GmbH
> Milastr. 4
> 10437 Berlin
> ___________________________
>
> http://www.artnology.com
> __________________________________________________________________________
>
>  News / Aktuelle Projekte:
>  * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
>    Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
>    Kunstwerke zur kulturellen Reprsentation des Bundes.
>
>  Projektreferenzen:
>  * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
>  * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
>  * Service-Center-Plattform fr Biogen: www.ms-life.de
>  * eCRM-System fr Grnenthal: www.gruenenthal.com
>
> ___________________________________________________________________________
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 14:27:23 2006
Return-Path: <java-user-return-20313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72614 invoked from network); 24 Apr 2006 14:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 14:25:03 -0000
Received: (qmail 31373 invoked by uid 500); 24 Apr 2006 14:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31345 invoked by uid 500); 24 Apr 2006 14:24:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31334 invoked by uid 99); 24 Apr 2006 14:24:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 07:24:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vishalbathija@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 07:24:41 -0700
Received: by nz-out-0102.google.com with SMTP id n29so1040983nzf
        for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 07:24:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EB7OVAKfSqXzljIcAeMtPvtdOb0wW6aybroVtoNlp/liX31NzgJ3X69PbW2GGhhqq/Im0pMktm5AWiW1EoKctNeUg3z8Z4M9mzMRIgfumu8lHVRqGhG0oFFJiDgpd48SJ9JikS3AI71zmm7mNYEzzuQH61Hckfc5kroQvGse+j8=
Received: by 10.65.141.20 with SMTP id t20mr994705qbn;
        Mon, 24 Apr 2006 07:24:20 -0700 (PDT)
Received: by 10.65.203.19 with HTTP; Mon, 24 Apr 2006 07:24:20 -0700 (PDT)
Message-ID: <f742a72b0604240724t5bb9578brd27cf4cf44cdf53@mail.gmail.com>
Date: Mon, 24 Apr 2006 10:24:20 -0400
From: "Vishal Bathija" <vishalbathija@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
In-Reply-To: <200604221028.33146.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com>
	 <200604191128.55250@danielnaber.de>
	 <f742a72b0604211211v2badcc76p212cd41439a7f864@mail.gmail.com>
	 <200604221028.33146.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How do I get the spans (getSpans()) if I use the SpanNearQuery as a
clause (subquery) in a BooleanQuery

I currently have

SpanQuery [] clauses1 =3D new SpanQuery[phraseTerms1.length];
for(int count =3D0; count< phraseTerms1.length; count++)
{
clauses1[count]=3Dphrase1[count];
}
SpanQuery [] clauses2 =3D new SpanQuery[phraseTerms2.length];
for(int count =3D0; count< phraseTerms2.length; count++)
{
clauses2[count]=3Dphrase2[count];
}
SpanNearQuery near1 =3D new SpanNearQuery(clauses1, 0, true);
SpanNearQuery near2 =3D new SpanNearQuery(clauses2, 0, true);
=09=09=09=09=09=09
I need the spans of either clause1 or clause2.

Vishal

On 4/22/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Friday 21 April 2006 21:11, Vishal Bathija wrote:
> > Hi,
> > I am trying to get the frequency of a phrase using the SpanNearQuery.
> > How can I use SpanNearQuery for boolean queries. The code I have is
> > for a single query. How can I extend this for multiple queries
>
> You can use SpanNearQuery as a clause (subquery) in a BooleanQuery
> or in a SpanOrQuery.
> See BooleanQuery.add() and the constructor of SpanOrQuery.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Vishal Bathija
Graduate Student
Department of Computer Science & Systems Analysis
Miami University
Oxford,Ohio
Phone: (513)-461-9239

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 14:42:14 2006
Return-Path: <java-user-return-20314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77952 invoked from network); 24 Apr 2006 14:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 14:35:37 -0000
Received: (qmail 63306 invoked by uid 500); 24 Apr 2006 14:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63249 invoked by uid 500); 24 Apr 2006 14:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63196 invoked by uid 99); 24 Apr 2006 14:35:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 07:35:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 07:35:18 -0700
Received: by pproxy.gmail.com with SMTP id m51so1853163pye
        for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 07:34:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PPEsB58DEzbcEpE87pSsR1NwwpGivl6LnmGwpd71pzgSjZwPZcBSEQA4QzSGjBUTgWlW+OYTG7SseTBRorYXy4vwZLhcF3x4Cy7t34kz6ldHHUoccPQZ9/YvlE2KmeX58X4ivMr+XidupoXXL2a+NbPJZuDS8oQOq+W57jJgevA=
Received: by 10.35.103.12 with SMTP id f12mr926836pym;
        Mon, 24 Apr 2006 07:34:57 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Mon, 24 Apr 2006 07:34:57 -0700 (PDT)
Message-ID: <359a92830604240734u3f30155crcecb87f4ec20340b@mail.gmail.com>
Date: Mon, 24 Apr 2006 10:34:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery$TooManyClauses
In-Reply-To: <38639.32.104.18.240.1145885901.squirrel@webmail.bs2.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7184_20750485.1145889297872"
References: <39163.32.104.18.240.1145477424.squirrel@webmail.bs2.com.br>
	 <44475958.3060109@artnology.com>
	 <38639.32.104.18.240.1145885901.squirrel@webmail.bs2.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7184_20750485.1145889297872
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Be careful, especially if you have some test data that you're using to prov=
e
things out and only later will you use the "real" (and usually much larger)
data set. There are two problems that I know of with bumping the clauses to
MAX_VALUE.

1> you can run out of memory.
2> it might take a long time. A really long time.

If either of these things happens, you may have to deal with filters and
cleverness. The guys were very kind with their explanations of wildcard
issues, see the thread titled "*I just don't get wildcards at all."

*Best
Erick*

*

------=_Part_7184_20750485.1145889297872--

From java-user-return-20315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 17:52:16 2006
Return-Path: <java-user-return-20315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 339 invoked from network); 24 Apr 2006 17:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 17:52:07 -0000
Received: (qmail 28883 invoked by uid 500); 24 Apr 2006 17:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28790 invoked by uid 500); 24 Apr 2006 17:51:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28750 invoked by uid 99); 24 Apr 2006 17:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 10:51:30 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Apr 2006 10:51:28 -0700
Received: (qmail 47172 invoked by uid 60001); 24 Apr 2006 17:51:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=0t6u4H1Aqvq+0/IeGrS9RHb5K9EZlCNimw99De4HqrA4RMT8xSlCE4yeczL/IxLHMAXnc0x/SgBmCmJDtY1VOSUiugjpmRIqfsaqiIYDBTXQRgXCCWqSaSKZTiF8xB7Uk/s8xMsSS1KIbMsIJrfVc1jlzmdTPp45W9vYFrZ2GPI=  ;
Message-ID: <20060424175107.47170.qmail@web50307.mail.yahoo.com>
Date: Mon, 24 Apr 2006 10:51:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Segments creation
To: java-user@lucene.apache.org
In-Reply-To: <A3D0E0CE-3280-4F67-AEDE-68C434C00332@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I, too, can never remember the exact formula, so I always have to look it up in Lucene in Action.  If you have LIA, look at the "Tuning indexing performance" section (2.7.1, page 42): http://www.lucenebook.com/search?query=segment+merge+files

Otis

----- Original Message ----
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
Sent: Monday, April 24, 2006 4:38:48 AM
Subject: Re: Segments creation

To be honest, I have to look up what has been written on this topic  
to get the answer right myself.  Otis did a thorough write-up in  
"Lucene in Action".  Lucene's javadocs also cover these factors here:

    <http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexWriter.html>

look at the setters, particularly setMaxMergeDocs.

    Erik


On Apr 23, 2006, at 9:47 PM, John Paige wrote:

> Thanks for the responses. For fault tolerance, we have decided to  
> set the
> "mergeFactor" to 1, ie, we want to update the on-disk index every  
> time a
> document is added via addDocument(). My question was that will this  
> create a
> new segment every time? Or is there a separate "segmentFactor",  
> such that an
> incremental index update updates an existing segment *on disk*, only
> starting a new segment once a given number of documents have been  
> added to
> the index?
>
> Thanks,
> John
>
> On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> If you use the compound format, all "files" are kept inside a single
>> filesystem file.
>>
>>         Erik
>>
>>
>> On Apr 23, 2006, at 2:13 PM, John Paige wrote:
>>
>>> So, if I use one indexwriter instance to index one document, will
>>> it create
>>> a segment per document?
>>> How many files per segment get added if I use compound index file
>>> format?
>>>
>>> Thanks,
>>> John
>>>
>>> On 4/23/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>>>
>>>> If you use the compound index file format (the default since Lucene
>>>> 1.4) you'll avoid the file descriptors issue.  If you add 10
>>>> documents at one time with a single IndexWriter, you will not  
>>>> create
>>>> 10 segments, only one segment (generally speaking, based on the
>>>> default segment factors).
>>>>
>>>>         Erik
>>>>
>>>>
>>>> On Apr 23, 2006, at 9:48 AM, John Paige wrote:
>>>>
>>>>> Hello all,
>>>>>    In my application it is required to build an index for each
>>>>> user. We need
>>>>> to add documents to the existing index frequently.
>>>>> We cannot use RAMDirectory to create a RAM index and merge it
>>>>> with the
>>>>> FSDirectory index later on based on the mergefactor. We need to  
>>>>> add
>>>>> each
>>>>> document in the FSDirectory based index.
>>>>> We are afraid of getting into the "out of file descriptors"  
>>>>> issue ,
>>>>> so my
>>>>> question is, does lucene create a segment for each document that
>>>>> gets added
>>>>> to the FS based index i.e. will adding 10 documents to the  
>>>>> existing
>>>>> index
>>>>> create 10 segments?
>>>>>
>>>>> Thanks,
>>>>> John
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 24 18:32:58 2006
Return-Path: <java-user-return-20316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28356 invoked from network); 24 Apr 2006 18:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Apr 2006 18:32:58 -0000
Received: (qmail 98228 invoked by uid 500); 24 Apr 2006 18:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98208 invoked by uid 500); 24 Apr 2006 18:32:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98197 invoked by uid 99); 24 Apr 2006 18:32:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 11:32:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 11:32:51 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.6/8.13.6) with ESMTP id k3OIWUw7066371
	for <java-user@lucene.apache.org>; Mon, 24 Apr 2006 20:32:30 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: using boolean operators with the PhraseQuery
Date: Mon, 24 Apr 2006 20:32:29 +0200
User-Agent: KMail/1.8.2
References: <f742a72b0604181900n3014a325j3ab58854f2611df8@mail.gmail.com> <200604221028.33146.paul.elschot@xs4all.nl> <f742a72b0604240724t5bb9578brd27cf4cf44cdf53@mail.gmail.com>
In-Reply-To: <f742a72b0604240724t5bb9578brd27cf4cf44cdf53@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604242032.29584.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 24 April 2006 16:24, Vishal Bathija wrote:
> How do I get the spans (getSpans()) if I use the SpanNearQuery as a
> clause (subquery) in a BooleanQuery

You can't normally. The Spans of the subqueries are used to compute the scores
of each matching document, via SpanScorer and BooleanScorer2.
Boolean queries do not have Spans.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 03:19:07 2006
Return-Path: <java-user-return-20317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80731 invoked from network); 25 Apr 2006 03:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 03:19:06 -0000
Received: (qmail 76255 invoked by uid 500); 25 Apr 2006 03:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75470 invoked by uid 500); 25 Apr 2006 03:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75459 invoked by uid 99); 25 Apr 2006 03:19:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 20:19:01 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE,RCVD_IN_NJABL_PROXY,RCVD_IN_SORBS_SOCKS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.198.147] (HELO web31601.mail.mud.yahoo.com) (68.142.198.147)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Apr 2006 20:19:00 -0700
Received: (qmail 54510 invoked by uid 60001); 25 Apr 2006 03:18:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=WSlfyyeVpR+IF4Muxz5g0RpSMeo4qppJuRVenC/fVs4MFjjPLPqiwYKcNnBQJCBTycyoLN4lc9dM8UH0SidURRarkVMnQSfp0QkStzeQEIQXgS1bqeLOpVchj+1gjRCzjL7kZVAJ01LK19gNxQ8D0Kf2rHBgUv1rL6GPDlwEc7c=  ;
Message-ID: <20060425031839.54508.qmail@web31601.mail.mud.yahoo.com>
Received: from [61.17.47.4] by web31601.mail.mud.yahoo.com via HTTP; Mon, 24 Apr 2006 20:18:39 PDT
Date: Mon, 24 Apr 2006 20:18:39 -0700 (PDT)
From: viswanadh yanamandra <meetvissuatnet@yahoo.com>
Subject: searching files and folders using lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1028132873-1145935119=:52811"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1028132873-1145935119=:52811
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I am new to lucene how can i write code to search files or folders using lucene.
   
   
   

		
---------------------------------
Blab-away for as little as 1/min. Make  PC-to-Phone Calls using Yahoo! Messenger with Voice.
--0-1028132873-1145935119=:52811--

From java-user-return-20318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 06:03:08 2006
Return-Path: <java-user-return-20318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48550 invoked from network); 25 Apr 2006 06:03:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 06:03:07 -0000
Received: (qmail 11414 invoked by uid 500); 25 Apr 2006 06:03:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10982 invoked by uid 500); 25 Apr 2006 06:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10962 invoked by uid 99); 25 Apr 2006 06:03:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 23:03:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Apr 2006 23:03:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A192F33CAB1; Tue, 25 Apr 2006 02:02:39 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 595B733CAAE
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 02:02:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060425031839.54508.qmail@web31601.mail.mud.yahoo.com>
References: <20060425031839.54508.qmail@web31601.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <16FF9C97-F5E6-4271-9D99-B41D0C03BA4D@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: searching files and folders using lucene
Date: Tue, 25 Apr 2006 02:02:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have a look at the first two programs mentioned in Chapter 1 of =20
"Lucene in Action".   The code is freely available at http://=20
www.lucenebook.com.  Specifically look at Indexer.java and =20
Searcher.java.

	Erik


On Apr 24, 2006, at 11:18 PM, viswanadh yanamandra wrote:

> I am new to lucene how can i write code to search files or folders =20
> using lucene.
>
>
>
>
> 	=09
> ---------------------------------
> Blab-away for as little as 1=A2/min. Make  PC-to-Phone Calls using =20
> Yahoo! Messenger with Voice.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 08:19:38 2006
Return-Path: <java-user-return-20319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16507 invoked from network); 25 Apr 2006 08:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 08:19:35 -0000
Received: (qmail 29633 invoked by uid 500); 25 Apr 2006 08:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29603 invoked by uid 500); 25 Apr 2006 08:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29592 invoked by uid 99); 25 Apr 2006 08:19:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 01:19:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.136.41.129] (HELO ringhals.agent25.se) (213.136.41.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 01:19:26 -0700
Subject: Accessing fields during search
From: Oskar Berger <oskar.berger@agent25.se>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 25 Apr 2006 10:18:58 +0200
Message-Id: <1145953138.8274.7.camel@murmansk>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello masters,

What is the most efficient approach to access field values during a
search?

I am only interested in accessing a couple of fields for counting, and
am thus not in need of storing the values as if sorting on the fields.

Where to look?

Regards,
/oskar


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 14:41:23 2006
Return-Path: <java-user-return-20322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21298 invoked from network); 25 Apr 2006 14:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 14:41:20 -0000
Received: (qmail 54341 invoked by uid 500); 25 Apr 2006 14:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54318 invoked by uid 500); 25 Apr 2006 14:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54307 invoked by uid 99); 25 Apr 2006 14:33:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 07:33:13 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 07:33:12 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15285838@mailer.syr.edu>; Tue, 25 Apr 2006 10:32:47 -0400
Message-ID: <444E330F.7010502@syr.edu>
Date: Tue, 25 Apr 2006 10:32:47 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene, TREC, and WT10G
References: <20060425141229.69949.qmail@web37814.mail.mud.yahoo.com>
In-Reply-To: <20060425141229.69949.qmail@web37814.mail.mud.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is up to you to create a program to do this, but it is relatively 
easy.  You may want to search the web, chances are someone has posted 
code to do this, as a number of people have used Lucene in TREC in the past.

Good luck,
Grant

thanh nguyen wrote:
> Hi trupti,
>
> Thank for your response. I have another question.
> Whether Lucene can receive a topic file  like "<TOP>
> <NUM> 1 <TITLE>  abc def </TOP>" and produce a
> result_file  which we can use  with trec_eval program
> (trec_eval relevant_file result_file , relevant_file
> is the judgement file of TREC for these topic) ??
>
> Thank you in advance,
> Thanh.
>
>
> --- trupti mulajkar <acp05tm@sheffield.ac.uk> 
> vit:  
>
>   
>> Lucene can index the trec documents, but depends how
>> you want to index them.
>> If you want to index the sub files in the TREC DAtA
>> then you have to modify the
>> IndexFiles.java to read the tags else you can index
>> them normally.
>>  
>> cheers,
>> trupti mulajkar
>>
>> Quoting thanh nguyen <ngay01032006@yahoo.com.vn>:
>>
>>     
>>> Hi all,
>>>
>>> Did anyone use Lucene to index WT10G? Can it index
>>> WT10G in compressed format (.gz) or we have to
>>>       
>> unzip
>>     
>>> it first?
>>>
>>> Further more, does Lucene support TREC format? I
>>>       
>> mean
>>     
>>> can it receive a topic file like "<TOP> <NUM> 1
>>> <TITLE>  abc def </TOP>" and produce a results
>>>       
>> file
>>     
>>> which we can use  with trec_eval program?
>>>
>>> Any help will be appretiated,
>>> Thanh
>>>
>>>
>>>
>>> 	
>>>
>>>
>>> 	
>>> 		
>>>
>>>       
> ________________________________________________________
>   
>>> Bn c s dng Yahoo! khng? 
>>> Hy xem th trang ch Yahoo!
>>>       
>> Vit Nam! 
>>     
>>> http://vn.yahoo.com
>>>
>>>
>>>       
> ---------------------------------------------------------------------
>   
>>> To unsubscribe, e-mail:
>>>       
>> java-user-unsubscribe@lucene.apache.org
>>     
>>> For additional commands, e-mail:
>>>       
>> java-user-help@lucene.apache.org
>>     
>>>       
>>     
> ---------------------------------------------------------------------
>   
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>>     
>
>
> __________________________________________________
> Bn C S Dng Yahoo! Khng?
> Mt mi v th rc?  Yahoo! Th c chng trnh bo v chng th rc hu hiu nht trn mng 
> http://vn.mail.yahoo.com 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 14:42:42 2006
Return-Path: <java-user-return-20320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22885 invoked from network); 25 Apr 2006 14:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 14:42:31 -0000
Received: (qmail 10569 invoked by uid 500); 25 Apr 2006 14:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10535 invoked by uid 500); 25 Apr 2006 14:12:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10519 invoked by uid 99); 25 Apr 2006 14:12:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 07:12:52 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FROM_ENDS_IN_NUMS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.191.87.127] (HELO web37814.mail.mud.yahoo.com) (209.191.87.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Apr 2006 07:12:50 -0700
Received: (qmail 69951 invoked by uid 60001); 25 Apr 2006 14:12:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.vn;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=R7MWFsy2ERw/NYAbGfjZ1N/P+UlnD+LABF9gYbHXvoTr5SxgM/MbXtn7rrxw35T9QDzCmx+VbrvXZMAer4ZCXiwD9p6JAU/ENkavnW+S17MFSDkPTNy/DuwVyeYW7dKFhsXZ342AIHhk/myffZvi41va+DM5mdoI6CTAH3D/Ffs=  ;
Message-ID: <20060425141229.69949.qmail@web37814.mail.mud.yahoo.com>
Received: from [193.49.172.146] by web37814.mail.mud.yahoo.com via HTTP; Tue, 25 Apr 2006 21:12:29 ICT
Date: Tue, 25 Apr 2006 21:12:29 +0700 (ICT)
From: thanh nguyen <ngay01032006@yahoo.com.vn>
Subject: Re: Lucene, TREC, and WT10G 
To: java-user@lucene.apache.org
In-Reply-To: <1145640662.444916d6c79fb@webmail.shef.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi trupti,

Thank for your response. I have another question.
Whether Lucene can receive a topic file  like "<TOP>
<NUM> 1 <TITLE>  abc def </TOP>" and produce a
result_file  which we can use  with trec_eval program
(trec_eval relevant_file result_file , relevant_file
is the judgement file of TREC for these topic) ??

Thank you in advance,
Thanh.


--- trupti mulajkar <acp05tm@sheffield.ac.uk> 
vit:  

> Lucene can index the trec documents, but depends how
> you want to index them.
> If you want to index the sub files in the TREC DAtA
> then you have to modify the
> IndexFiles.java to read the tags else you can index
> them normally.
>  
> cheers,
> trupti mulajkar
> 
> Quoting thanh nguyen <ngay01032006@yahoo.com.vn>:
> 
> > Hi all,
> > 
> > Did anyone use Lucene to index WT10G? Can it index
> > WT10G in compressed format (.gz) or we have to
> unzip
> > it first?
> > 
> > Further more, does Lucene support TREC format? I
> mean
> > can it receive a topic file like "<TOP> <NUM> 1
> > <TITLE>  abc def </TOP>" and produce a results
> file
> > which we can use  with trec_eval program?
> > 
> > Any help will be appretiated,
> > Thanh
> > 
> > 
> > 
> > 	
> > 
> > 
> > 	
> > 		
> >
>
________________________________________________________
> 
> > Bn c s dng Yahoo! khng? 
> > Hy xem th trang ch Yahoo!
> Vit Nam! 
> > http://vn.yahoo.com
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> > 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Bn C S Dng Yahoo! Khng?
Mt mi v th rc?  Yahoo! Th c chng trnh bo v chng th rc hu hiu nht trn mng 
http://vn.mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 14:51:36 2006
Return-Path: <java-user-return-20321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35397 invoked from network); 25 Apr 2006 14:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 14:51:36 -0000
Received: (qmail 31102 invoked by uid 500); 25 Apr 2006 14:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30775 invoked by uid 500); 25 Apr 2006 14:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30760 invoked by uid 99); 25 Apr 2006 14:22:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 07:22:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 07:22:10 -0700
Received: by pproxy.gmail.com with SMTP id m51so2157732pye
        for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 07:21:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hblvVu3KV19vlda6ys8CLRjk+b7HKa2LijzuB8S0xpRL5fUAT1y2V2g4858MPHye8OqirHbzs7lvPIyVhMqY1uNqCDLR4ky4oCkUMswhb3dub1jnkHmEzFlWwcR2CcN5C5oC5KeDLZXTaKnTCpgYszAuK23ARYOeD3fAyQ8V0Hg=
Received: by 10.35.87.8 with SMTP id p8mr151866pyl;
        Tue, 25 Apr 2006 07:21:49 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Tue, 25 Apr 2006 07:21:49 -0700 (PDT)
Message-ID: <c68e39170604250721u3b6483c0jd9d55a2fa47fd000@mail.gmail.com>
Date: Tue, 25 Apr 2006 10:21:49 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Accessing fields during search
In-Reply-To: <1145953138.8274.7.camel@murmansk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1145953138.8274.7.camel@murmansk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/25/06, Oskar Berger <oskar.berger@agent25.se> wrote:
> What is the most efficient approach to access field values during a
> search?

If you are implementing a hit collector, and want to know a field
value for each document coming in, you can use the FieldCache if the
field is indexed and not tokenized.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 16:13:23 2006
Return-Path: <java-user-return-20323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4113 invoked from network); 25 Apr 2006 16:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 16:13:22 -0000
Received: (qmail 26252 invoked by uid 500); 25 Apr 2006 16:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26227 invoked by uid 500); 25 Apr 2006 16:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26216 invoked by uid 99); 25 Apr 2006 16:13:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:13:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:13:15 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FYQ9m-0002TM-Uf
	for java-user@lucene.apache.org; Tue, 25 Apr 2006 09:12:55 -0700
Message-ID: <4084844.post@talk.nabble.com>
Date: Tue, 25 Apr 2006 08:54:07 -0700 (PDT)
From: April06 <aprilsonne2004@yahoo.de>
To: java-user@lucene.apache.org
Subject: search problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11726_16525298.1145981574944"
X-Nabble-Sender: aprilsonne2004@yahoo.de
X-Nabble-From: April06 <aprilsonne2004@yahoo.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_11726_16525298.1145981574944
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


We indexed several logfiles which contain for example a timestamp, an ip and
additional information (all defined as a field) all in one line.
A logfile itself contains many of these lines.

We used a BooleanQuery (timestamp / ip) to search for a ip between a defined
range of time. 

Problem: while there is a hit, only the timestamp and ip of the very first
line in the logfile are shown, but not the "matching" ip and timestamp later
in the logfile. Any suggestions how to get to the "right entries" ? 

Thank you very much.
--
View this message in context: http://www.nabble.com/search-problem-t1506294.html#a4084844
Sent from the Lucene - Java Users forum at Nabble.com.

------=_Part_11726_16525298.1145981574944--


From java-user-return-20324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 16:26:07 2006
Return-Path: <java-user-return-20324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11994 invoked from network); 25 Apr 2006 16:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 16:26:06 -0000
Received: (qmail 50467 invoked by uid 500); 25 Apr 2006 16:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50427 invoked by uid 500); 25 Apr 2006 16:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50416 invoked by uid 99); 25 Apr 2006 16:25:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:25:59 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.129 as permitted sender)
Received: from [152.163.225.129] (HELO omr-r01.mail.aol.com) (152.163.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:25:58 -0700
Received: from aol.com (10.146.144.225)
  by omr-r01.mail.aol.com with ESMTP; 25 Apr 2006 12:25:37 -0400
Message-ID: <444E4D7F.7080406@aol.com>
Date: Tue, 25 Apr 2006 21:55:35 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc4 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search algo for the postings ( or TermFreqs)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Given a  term "myterm", what kind of search algorithm lucene uses to  
get to the postings list(i.e. the term-frequency location in .frq file) 
?  From what I understood by looking into the lucene fileformat, is that 
it keeps the whole of .tii file in memory and and does a skipped linear 
search of the TermInfoIndex(present in .tii file) for the term "myterm".

I have gone through Doug's article titled "Space Optimizations for Total 
Ranking", but that seems to talk mainly about efficiently calculating 
the score by parallely merging the different posting streams. I didnt 
find any reference in that article on how to get to the postings, or may 
be I overlooked something there ?

Any pointers will be greatly appreciated.

thanks,
prasen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 16:59:31 2006
Return-Path: <java-user-return-20325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26559 invoked from network); 25 Apr 2006 16:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 16:59:30 -0000
Received: (qmail 94224 invoked by uid 500); 25 Apr 2006 16:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93930 invoked by uid 500); 25 Apr 2006 16:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93919 invoked by uid 99); 25 Apr 2006 16:59:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:59:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.177] (HELO hnexfe11.hetnet.nl) (195.121.6.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 09:59:23 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe11.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Tue, 25 Apr 2006 18:59:00 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <4084844.post@talk.nabble.com>
References: <4084844.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <232A6CF7-798D-4524-86C2-00922D18CB29@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: search problem
Date: Tue, 25 Apr 2006 19:01:42 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 25 Apr 2006 16:59:00.0804 (UTC) FILETIME=[8CC31040:01C66889]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


25 apr 2006 kl. 17.54 skrev April06:

>
> We indexed several logfiles which contain for example a timestamp,  
> an ip and
> additional information (all defined as a field) all in one line.
> A logfile itself contains many of these lines.
>
> We used a BooleanQuery (timestamp / ip) to search for a ip between  
> a defined
> range of time.
>
> Problem: while there is a hit, only the timestamp and ip of the  
> very first
> line in the logfile are shown, but not the "matching" ip and  
> timestamp later
> in the logfile. Any suggestions how to get to the "right entries" ?

First inspect your index using Luke and see if it the expected data  
is there. If not, take a look at your index writing code. Else take a  
look at how you retrieve the data from your index. If you can't  
figure it out, post the code and tell us what the index contains and  
how you expected it to look like.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 17:34:20 2006
Return-Path: <java-user-return-20326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43980 invoked from network); 25 Apr 2006 17:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 17:34:20 -0000
Received: (qmail 50474 invoked by uid 500); 25 Apr 2006 17:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50446 invoked by uid 500); 25 Apr 2006 17:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50435 invoked by uid 99); 25 Apr 2006 17:34:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:34:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:34:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D54DA5B770; Tue, 25 Apr 2006 10:33:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C8FA67F403;
	Tue, 25 Apr 2006 10:33:42 -0700 (PDT)
Date: Tue, 25 Apr 2006 10:33:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Cc: Aodh <aodholionaird@hotmail.com>
Subject: Re: Lucene Eclipse Integration
In-Reply-To: <4078945.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0604251029430.8448@hal.rescomp.berkeley.edu>
References: <4078945.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


First off: i've changed the reply to be the java-user@lucene list ... that
is the appropriate place to ask questions about using the Lucene APIs.

Second: once you have a test index built, and you can do some test
searches to verify it contains what you think it does (take a look at Luke
to be sure) read up on the IndexReader.terms method and the TermEnum class
-- it's the easiest way to get a list of every term in your index.  Then
takes a look at IndexReader.termDocs and the TermDocs class -- that's how
you can get a list of every document that matches a particular term

: Date: Tue, 25 Apr 2006 02:01:16 -0700 (PDT)
: From: Aodh <aodholionaird@hotmail.com>
: Reply-To: java-dev@lucene.apache.org
: To: java-dev@lucene.apache.org
: Subject: Lucene Eclipse Integration
:
:
: Hi, I want to create a back-of-book type index for Eclipse help (not
: available by default). This index will list all indexed terms such that the
: indexed term may be clicked and the original document displayed (as in MS
: style help systems).
:
: Where should I begin? The first thing I suppose would be, how do I access
: the indexed terms (using Lucene's API) and have them e.g. display on a HTML
: page with hyperlinks to the original doc.
:
: Any help appreciated.
: --
: View this message in context: http://www.nabble.com/Lucene-Eclipse-Integration-t1504322.html#a4078945
: Sent from the Lucene - Java Developer forum at Nabble.com.
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-dev-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 17:42:13 2006
Return-Path: <java-user-return-20327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49293 invoked from network); 25 Apr 2006 17:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 17:42:12 -0000
Received: (qmail 71041 invoked by uid 500); 25 Apr 2006 17:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71014 invoked by uid 500); 25 Apr 2006 17:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71003 invoked by uid 99); 25 Apr 2006 17:42:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:42:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:42:05 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7B27C5B770; Tue, 25 Apr 2006 10:41:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 767B87F403
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 10:41:45 -0700 (PDT)
Date: Tue, 25 Apr 2006 10:41:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: search problem
In-Reply-To: <4084844.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0604251036190.8448@hal.rescomp.berkeley.edu>
References: <4084844.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Problem: while there is a hit, only the timestamp and ip of the very first
: line in the logfile are shown, but not the "matching" ip and timestamp later
: in the logfile. Any suggestions how to get to the "right entries" ?

It sounds like you are creating one Document per logfile, and then using
either Document.get(fieldName) or Document.getField(fieldName) to pull out
the stored ip and timestamps.

(if i'm wrong please clarify)

Assuming you are putting all of the timestamps and ips from the logfile
into your Document when you index it, you could get all of the unique
valeues for field using Document.getValues(fieldName) or
Document.getFields(fieldName) -- but that oesn't really solve your problem
of knowing which one corrisponds to the line that matched.  Lucene can't
tell you that.

If the smallest unit of data you want information about is a single line
from your logfile, then perhaps you should make one document per logline
-- that way when you get a hit, you'll knoew exactly why you got that hit.

if sometimes you do queries where you want to know the specifics from the
logline, and in other cases you just want to know which files match, then
you can allways have two different kinds of documents -- one representing
a logfile and another representing a logline.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 17:49:15 2006
Return-Path: <java-user-return-20328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52662 invoked from network); 25 Apr 2006 17:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 17:48:25 -0000
Received: (qmail 80924 invoked by uid 500); 25 Apr 2006 17:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80898 invoked by uid 500); 25 Apr 2006 17:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80887 invoked by uid 99); 25 Apr 2006 17:47:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:47:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paige.john@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO pproxy.gmail.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 10:47:35 -0700
Received: by pproxy.gmail.com with SMTP id m51so2220261pye
        for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 10:47:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=L164hHwnIMmB/kbbp+6LJaXDj2QvCZ2Phw8uRDkt3L2/Xalk9r1yGLwOHBIQMijYmqrMY6+nFFBj0pbQtogJLQiS+tOyF/A7MoBKpiylkMzI51VpupUpyguyd/iiC3w9g5FXeOLgyj1L47akjB0yFOxWres4ZdTYwXPJg+73YxM=
Received: by 10.35.34.20 with SMTP id m20mr445336pyj;
        Tue, 25 Apr 2006 10:47:14 -0700 (PDT)
Received: by 10.35.116.20 with HTTP; Tue, 25 Apr 2006 10:47:14 -0700 (PDT)
Message-ID: <40d07eb40604251047h511f9835r5aeb81591ab09a15@mail.gmail.com>
Date: Tue, 25 Apr 2006 13:47:14 -0400
From: "John Paige" <paige.john@gmail.com>
To: java-user@lucene.apache.org
Subject: Clucene document parsers
Cc: clucene-developers@lists.sourceforge.net
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26837_6401452.1145987234014"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26837_6401452.1145987234014
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,
       Can somebody tell me what document parsers are available that can be
used with CLucene? I know for lucene, XML->Text, pdf->Text, doc->Text,
html->Text and RTF->Text all parsers are avilable. Have all of these been
ported to CLucene?

Thanks,
John

------=_Part_26837_6401452.1145987234014--

From java-user-return-20329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 18:17:44 2006
Return-Path: <java-user-return-20329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68101 invoked from network); 25 Apr 2006 18:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 18:17:24 -0000
Received: (qmail 29622 invoked by uid 500); 25 Apr 2006 18:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29592 invoked by uid 500); 25 Apr 2006 18:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29581 invoked by uid 99); 25 Apr 2006 18:17:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 11:17:13 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Apr 2006 11:17:12 -0700
Received: (qmail 57395 invoked by uid 60001); 25 Apr 2006 18:16:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=Fi/rNh2/4cctPFOjbpP0sDSFScfTzW99ELWbwAZxQTc7blsdrGWhYyWFQWbiZUg4S/2eAQ3pF68jK6G4/DLQjYYHx0AoOaIeGBZoSN7GIzb/vq4sw/iGrlNU7D1Q1cDO9XtwnCfLa7xhOqaRXis0FdavOxX/U7IWF9E2zPGfsVc=  ;
Message-ID: <20060425181648.57393.qmail@web50306.mail.yahoo.com>
Date: Tue, 25 Apr 2006 11:16:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Eclipse Integration
To: java-user@lucene.apache.org
Cc: aodholionaird@hotmail.com
In-Reply-To: <Pine.LNX.4.58.0604251029430.8448@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also, this question may be better for one of the Eclipse groups, because Eclipse already uses Lucene for indexing (of help? code?), so they will be able to tell you how to integrate Eclipse and Lucene.

Otis

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Cc: Aodh <aodholionaird@hotmail.com>
Sent: Tuesday, April 25, 2006 1:33:42 PM
Subject: Re: Lucene Eclipse Integration


First off: i've changed the reply to be the java-user@lucene list ... that
is the appropriate place to ask questions about using the Lucene APIs.

Second: once you have a test index built, and you can do some test
searches to verify it contains what you think it does (take a look at Luke
to be sure) read up on the IndexReader.terms method and the TermEnum class
-- it's the easiest way to get a list of every term in your index.  Then
takes a look at IndexReader.termDocs and the TermDocs class -- that's how
you can get a list of every document that matches a particular term

: Date: Tue, 25 Apr 2006 02:01:16 -0700 (PDT)
: From: Aodh <aodholionaird@hotmail.com>
: Reply-To: java-dev@lucene.apache.org
: To: java-dev@lucene.apache.org
: Subject: Lucene Eclipse Integration
:
:
: Hi, I want to create a back-of-book type index for Eclipse help (not
: available by default). This index will list all indexed terms such that the
: indexed term may be clicked and the original document displayed (as in MS
: style help systems).
:
: Where should I begin? The first thing I suppose would be, how do I access
: the indexed terms (using Lucene's API) and have them e.g. display on a HTML
: page with hyperlinks to the original doc.
:
: Any help appreciated.
: --
: View this message in context: http://www.nabble.com/Lucene-Eclipse-Integration-t1504322.html#a4078945
: Sent from the Lucene - Java Developer forum at Nabble.com.
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-dev-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 22:53:59 2006
Return-Path: <java-user-return-20330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22455 invoked from network); 25 Apr 2006 22:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 22:53:56 -0000
Received: (qmail 65804 invoked by uid 500); 25 Apr 2006 22:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65528 invoked by uid 500); 25 Apr 2006 22:53:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65511 invoked by uid 99); 25 Apr 2006 22:53:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 15:53:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 15:53:49 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id k3PMrRwK006260
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 15:53:27 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k3PMrPD8008536
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 15:53:27 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <373A3DE3-8DBA-4EF2-AFC9-906AF8C04BA0@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Alphanumeric model ids
Date: Tue, 25 Apr 2006 16:53:24 -0600
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am trying to search by a number of fields including an alphanumeric  
model id.

This is just the model id that comes from manufacturers.  I've tried  
to use a StandardAnalyzer and a SnowballAnalyzer to index the data.   
Then I search with the associated analyzer using a  
MultiFieldQueryParser.  Going through the debug into the attached  
Lucene source, I see that all a MultiFieldQueryParser does is make a  
bunch of queries and link them together with a Boolean query with  
SHOULD values.  I see that it is getting the right field, "model",  
and has the right query in there, e.g. "XPHP", but it returns no  
results.

When I index it, I do the following:
modelField = new Field("model", (product.getModelNumber() == null) ?  
"" : product.getModelNumber(), Field.Store.NO,  
Field.Index.UN_TOKENIZED);
...
document.add(modelField);
...
indexWriter.addDocument(document);

So it shouldn't be messing with the model id retrieved from the  
database when it puts it in the index (UN_TOKENIZED).

The weird thing is that it finds those model ids that are only  
numeric (including punctuation, e.g. "40603-38").  But it cannot find  
the "XPHP" model id.  On the command line SQL interface, I can do a  
select * from product where model = 'XPHP'; and it comes back with  
the single result.

Anyone have any idea as to why the numeric ones would come up and the  
alphanumeric ones would not find the right values in the index?

Thanks much,
Jeremy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 23:03:18 2006
Return-Path: <java-user-return-20331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25708 invoked from network); 25 Apr 2006 23:03:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 23:03:07 -0000
Received: (qmail 76977 invoked by uid 500); 25 Apr 2006 23:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76946 invoked by uid 500); 25 Apr 2006 23:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76934 invoked by uid 99); 25 Apr 2006 23:02:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 16:02:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 16:02:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7BF1B5B77A; Tue, 25 Apr 2006 16:02:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 726AD7F403
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 16:02:32 -0700 (PDT)
Date: Tue, 25 Apr 2006 16:02:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Alphanumeric model ids
In-Reply-To: <373A3DE3-8DBA-4EF2-AFC9-906AF8C04BA0@mac.com>
Message-ID: <Pine.LNX.4.58.0604251557220.25278@hal.rescomp.berkeley.edu>
References: <373A3DE3-8DBA-4EF2-AFC9-906AF8C04BA0@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I bet that if you look at the toString() of the query you get back from
your query parser, you'll see that the non numeric part numbers have been
stemmed.

You took the right steps when you indexed the field as UN_TOKENIZED, but
at query time your query parser doesn't know about that -- take a look at
the PerFieldAnalyzerWrapper and the KeywordAnalyzer as a way to make sure
your query parser doesn't do any processing on the terms you search for in
non-tockenized fields.

Or ... prepare for shameless plug ... check out the Solr project.  Solr
adds a very flexible schema layer on top of lucene, that lets you specify
field types, and map fields (explicitly named or dynamicaly created based
on field name patters) to field types -- every field type can have a
differnet analyzer, two acctually: one used when indexing and one used
when quering...
	http://incubator.apache.org/solr/


: Date: Tue, 25 Apr 2006 16:53:24 -0600
: From: Jeremy Hanna <jeremy_hanna@mac.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Alphanumeric model ids
:
: I am trying to search by a number of fields including an alphanumeric
: model id.
:
: This is just the model id that comes from manufacturers.  I've tried
: to use a StandardAnalyzer and a SnowballAnalyzer to index the data.
: Then I search with the associated analyzer using a
: MultiFieldQueryParser.  Going through the debug into the attached
: Lucene source, I see that all a MultiFieldQueryParser does is make a
: bunch of queries and link them together with a Boolean query with
: SHOULD values.  I see that it is getting the right field, "model",
: and has the right query in there, e.g. "XPHP", but it returns no
: results.
:
: When I index it, I do the following:
: modelField = new Field("model", (product.getModelNumber() == null) ?
: "" : product.getModelNumber(), Field.Store.NO,
: Field.Index.UN_TOKENIZED);
: ...
: document.add(modelField);
: ...
: indexWriter.addDocument(document);
:
: So it shouldn't be messing with the model id retrieved from the
: database when it puts it in the index (UN_TOKENIZED).
:
: The weird thing is that it finds those model ids that are only
: numeric (including punctuation, e.g. "40603-38").  But it cannot find
: the "XPHP" model id.  On the command line SQL interface, I can do a
: select * from product where model = 'XPHP'; and it comes back with
: the single result.
:
: Anyone have any idea as to why the numeric ones would come up and the
: alphanumeric ones would not find the right values in the index?
:
: Thanks much,
: Jeremy
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 25 23:22:50 2006
Return-Path: <java-user-return-20332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34817 invoked from network); 25 Apr 2006 23:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Apr 2006 23:22:44 -0000
Received: (qmail 5255 invoked by uid 500); 25 Apr 2006 23:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5188 invoked by uid 500); 25 Apr 2006 23:22:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5145 invoked by uid 99); 25 Apr 2006 23:22:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 16:22:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.15] (HELO web86503.mail.ukl.yahoo.com) (217.12.13.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Apr 2006 16:22:29 -0700
Received: (qmail 46781 invoked by uid 60001); 25 Apr 2006 23:22:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RNGuEICTj11K8MtvOiDL5m3WmbqidT4rIdYKow0HuuWn7HvV/1jf5FIrCqjw5NbI1Ylki61W+bC5YulYQuS1oK3mgThqBDyuCTGkiAbzmBuWCoaUcEMAYFUzCqhSLwhj/dC1j+PVMUYfYheCQpA7oK05U7/l+l0RJa3je/ovAbI=  ;
Message-ID: <20060425232206.46779.qmail@web86503.mail.ukl.yahoo.com>
Received: from [86.130.72.22] by web86503.mail.ukl.yahoo.com via HTTP; Wed, 26 Apr 2006 00:22:06 BST
Date: Wed, 26 Apr 2006 00:22:06 +0100 (BST)
From: RONALD MANTAY <ronald.mantay@btinternet.com>
Subject: performance differences between 1.4.3 and 1.9.1
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1288511854-1146007326=:45968"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1288511854-1146007326=:45968
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi chaps ,
   
  I ran the same search code with lucene-1.4.3.jar and then with lucene-core-1.9.1.jar
   
  The good news is there appeared to be a performance improvement with 1.9.1 both with single index searching both exact and fuzzy mode, 
   
  However when searching muliple indexes with multiSearcher and with a FuzzyQuery with a prefixLength of 1. The search against 3.7m documents spread over 23 indexes (due to the natural grouping of the data) the time changed from 800ms to 4500 ms.
   
  Has any one else had similar observations ? any Ideas on how to address it ?
   
  Regards

--0-1288511854-1146007326=:45968--

From java-user-return-20333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 00:00:30 2006
Return-Path: <java-user-return-20333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50189 invoked from network); 26 Apr 2006 00:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 00:00:28 -0000
Received: (qmail 41561 invoked by uid 500); 26 Apr 2006 00:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41524 invoked by uid 500); 26 Apr 2006 00:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41513 invoked by uid 99); 26 Apr 2006 00:00:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 17:00:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.184] (HELO smtpout.mac.com) (17.250.248.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 17:00:19 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout14/MantshX 4.0) with ESMTP id k3PNxuEk018214
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 16:59:58 -0700 (PDT)
Received: from [10.1.59.7] (mail.rcwilley.com [216.20.231.196])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id k3PNxsbA007053
	for <java-user@lucene.apache.org>; Tue, 25 Apr 2006 16:59:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <Pine.LNX.4.58.0604251557220.25278@hal.rescomp.berkeley.edu>
References: <373A3DE3-8DBA-4EF2-AFC9-906AF8C04BA0@mac.com> <Pine.LNX.4.58.0604251557220.25278@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <601BB9AB-32B7-4DBA-B771-299B6B6A752B@mac.com>
Content-Transfer-Encoding: 7bit
From: Jeremy Hanna <jeremy_hanna@mac.com>
Subject: Re: Alphanumeric model ids
Date: Tue, 25 Apr 2006 17:59:53 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris, it works like a champ now.  I had thought I looked at  
the queries themselves with toString but in any case, the queries  
actually work now.  I didn't realize that Lucene was customizable on  
so many levels - when you create the analyzer, when you create the  
index, when you perform each query.  Kinda cool.

On Apr 25, 2006, at 5:02 PM, Chris Hostetter wrote:

>
> I bet that if you look at the toString() of the query you get back  
> from
> your query parser, you'll see that the non numeric part numbers  
> have been
> stemmed.
>
> You took the right steps when you indexed the field as  
> UN_TOKENIZED, but
> at query time your query parser doesn't know about that -- take a  
> look at
> the PerFieldAnalyzerWrapper and the KeywordAnalyzer as a way to  
> make sure
> your query parser doesn't do any processing on the terms you search  
> for in
> non-tockenized fields.
>
> Or ... prepare for shameless plug ... check out the Solr project.   
> Solr
> adds a very flexible schema layer on top of lucene, that lets you  
> specify
> field types, and map fields (explicitly named or dynamicaly created  
> based
> on field name patters) to field types -- every field type can have a
> differnet analyzer, two acctually: one used when indexing and one used
> when quering...
> 	http://incubator.apache.org/solr/
>
>
> : Date: Tue, 25 Apr 2006 16:53:24 -0600
> : From: Jeremy Hanna <jeremy_hanna@mac.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Alphanumeric model ids
> :
> : I am trying to search by a number of fields including an  
> alphanumeric
> : model id.
> :
> : This is just the model id that comes from manufacturers.  I've tried
> : to use a StandardAnalyzer and a SnowballAnalyzer to index the data.
> : Then I search with the associated analyzer using a
> : MultiFieldQueryParser.  Going through the debug into the attached
> : Lucene source, I see that all a MultiFieldQueryParser does is make a
> : bunch of queries and link them together with a Boolean query with
> : SHOULD values.  I see that it is getting the right field, "model",
> : and has the right query in there, e.g. "XPHP", but it returns no
> : results.
> :
> : When I index it, I do the following:
> : modelField = new Field("model", (product.getModelNumber() == null) ?
> : "" : product.getModelNumber(), Field.Store.NO,
> : Field.Index.UN_TOKENIZED);
> : ...
> : document.add(modelField);
> : ...
> : indexWriter.addDocument(document);
> :
> : So it shouldn't be messing with the model id retrieved from the
> : database when it puts it in the index (UN_TOKENIZED).
> :
> : The weird thing is that it finds those model ids that are only
> : numeric (including punctuation, e.g. "40603-38").  But it cannot  
> find
> : the "XPHP" model id.  On the command line SQL interface, I can do a
> : select * from product where model = 'XPHP'; and it comes back with
> : the single result.
> :
> : Anyone have any idea as to why the numeric ones would come up and  
> the
> : alphanumeric ones would not find the right values in the index?
> :
> : Thanks much,
> : Jeremy
> :
> :  
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 02:53:45 2006
Return-Path: <java-user-return-20334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13644 invoked from network); 26 Apr 2006 02:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 02:53:43 -0000
Received: (qmail 62030 invoked by uid 500); 26 Apr 2006 02:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62001 invoked by uid 500); 26 Apr 2006 02:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61986 invoked by uid 99); 26 Apr 2006 02:53:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 19:53:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Apr 2006 19:53:36 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6C5CFB735C
	for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 12:53:06 +1000 (EST)
Message-ID: <444EE15D.5020500@nuix.com.au>
Date: Wed, 26 Apr 2006 12:56:29 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing with SnowballAnalyzer and multiple languages in a single
 index
References: <9778DA4F3D53D04B9AE80AC64AC073A305745B4D@corpx.corp.dicarta.com>
In-Reply-To: <9778DA4F3D53D04B9AE80AC64AC073A305745B4D@corpx.corp.dicarta.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

jwang@dicarta.com wrote:
> You can have multiple languages in the same index.  Just make sure that
> your language identification process is consistent.
> 
> You might still get some false positives, for example, if there's a
> German root that has the same letters as a French root, but means
> something different, then it might still show up.  Personally, I don't
> really know how many times that actually happens.
> 
> Lucene treats all _post-analyze_ tokens the same, it is pretty much
> language ignorant, so as long as the UTF characters are the same, it
> treats the tokens as the same.

I suppose one could work around that by prepending the language code to 
every token.  Then those two words won't match each other, while 
stemming is preserved.

The real problem as I see it is when two languages have an *identical* 
word, and the user types that in as their search query.  Then you have 
to wonder which language it's from... perhaps you would just expand this 
to match multiple languages in the event of multiple matches.  Or 
perhaps you would just add a little drop-down to the place they enter 
their query, where they can indicate what language the query is in.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 07:13:58 2006
Return-Path: <java-user-return-20335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89789 invoked from network); 26 Apr 2006 07:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 07:13:57 -0000
Received: (qmail 96054 invoked by uid 500); 26 Apr 2006 07:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96027 invoked by uid 500); 26 Apr 2006 07:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96016 invoked by uid 99); 26 Apr 2006 07:13:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 00:13:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 00:13:49 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FYeC8-0003K8-0z
	for java-user@lucene.apache.org; Wed, 26 Apr 2006 00:12:17 -0700
Message-ID: <4096490.post@talk.nabble.com>
Date: Wed, 26 Apr 2006 00:12:13 -0700 (PDT)
From: April06 <aprilsonne2004@yahoo.de>
To: java-user@lucene.apache.org
Subject: Re: search problem
In-Reply-To: <Pine.LNX.4.58.0604251036190.8448@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: aprilsonne2004@yahoo.de
X-Nabble-From: April06 <aprilsonne2004@yahoo.de>
References: <4084844.post@talk.nabble.com> <Pine.LNX.4.58.0604251036190.8448@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I guess that fixes the problem.
Thanx
--
View this message in context: http://www.nabble.com/search-problem-t1506294.html#a4096490
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 08:10:07 2006
Return-Path: <java-user-return-20336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28042 invoked from network); 26 Apr 2006 08:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 08:09:58 -0000
Received: (qmail 85580 invoked by uid 500); 26 Apr 2006 08:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85549 invoked by uid 500); 26 Apr 2006 08:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85538 invoked by uid 99); 26 Apr 2006 08:09:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 01:09:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of qixiangnj@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 01:09:46 -0700
Received: by nz-out-0102.google.com with SMTP id n29so1531122nzf
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 01:09:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=GZmxvomq30zJKSYTCIVdyO98AUGBFl8Pahx+PHMAjtLWM7RxpvgA+vXjjbyorLm/fc016lDluh9SlGBtxJKiYAaSjEjgSwSRM4cVsqrET/ZXwW80+axGSyNmUZCqhJ3on9220W/iGAxwbUULgk0OiMVIgb8DrTmpVIKGAMEngxY=
Received: by 10.65.240.7 with SMTP id s7mr1795493qbr;
        Wed, 26 Apr 2006 01:09:25 -0700 (PDT)
Received: by 10.65.182.1 with HTTP; Wed, 26 Apr 2006 01:09:25 -0700 (PDT)
Message-ID: <7ae4395e0604260109u12d98cb1l76784b823f73e940@mail.gmail.com>
Date: Wed, 26 Apr 2006 16:09:25 +0800
From: "=?GB2312?B?0rvWu9ChwuzSzw==?=" <qixiangnj@gmail.com>
To: java-user@lucene.apache.org
Subject: Cannot save index to 'index' directory, please delete it first
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50141_19100339.1146038965501"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_50141_19100339.1146038965501
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBoYXZlIG1ldCBhIGVycm9yIGxpa2UgdGhpczoiQ2Fubm90IHNhdmUgaW5kZXggdG8gJ2luZGV4
JyBkaXJlY3RvcnksIHBsZWFzZQpkZWxldGUgaXQgZmlyc3QiIHdoZW4gSSBydW4gdGhlIGRlbW8g
aW4gbHVjZW5lMS45LjEuCnBsZWFzZSB0ZWxsIG1lIHdoeT8KaSBoYXZhIHNldCBjbGFzc3BhdGgh
CgotLQqhusOmw6bCtcK1ICAgoe8gICDCtcK1zt7OqqG7CgqhqqGqoaqhqtK71rvQocLs0s+hqqGq
oaqhqgpodHRwOi8vYmxvZy5jc2RuLm5ldC9xaXhpYW5nX25qCg==
------=_Part_50141_19100339.1146038965501--

From java-user-return-20337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 13:20:26 2006
Return-Path: <java-user-return-20337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17237 invoked from network); 26 Apr 2006 13:20:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 13:20:26 -0000
Received: (qmail 50751 invoked by uid 500); 26 Apr 2006 13:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50721 invoked by uid 500); 26 Apr 2006 13:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50709 invoked by uid 99); 26 Apr 2006 13:20:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 06:20:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.206.151.161] (HELO mailrelay2.torstar.net) (192.206.151.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 06:20:17 -0700
Received: from [Masked] by mailrelay2.thestar.ca with ESMTP id appbazba for
 java-user@lucene.apache.org; Wed, 26 Apr 2006 09:19:55 -0400
Received: from tmg-mail2.torstar.net ([150.150.14.46]) by tmg-smtp.torstar.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 26 Apr 2006 09:19:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C66934.1BD61061"
Subject: java.io.IOException: Stale NFS file handle
Date: Wed, 26 Apr 2006 09:19:55 -0400
Message-ID: <FBEF1EF7B7E5B649AB1C684991223C6E02643852@tmg-mail2.torstar.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: java.io.IOException: Stale NFS file handle
Thread-Index: AcZpNBvMJGmsPEXzTLOHsxyowBt1Zw==
From: "Schwenker, Stephen" <SSchwenker@thestar.ca>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Apr 2006 13:19:55.0897 (UTC) FILETIME=[1C332E90:01C66934]
X-AuthenticatedSender: SSchwenker@thestar.ca
X-AntiVirus: Checked for viruses by Gordano's AntiVirus Software
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C66934.1BD61061
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hey,
=20
I'm running into this exception with my lucene searching.  We have a =
cluster of 2 servers that execute searches and one server in the back =
end that writes to the index.  I thought that setting up the external =
boxes on nfs would be alright since searching doesn't require locking.  =
Can anyone tell me why this may be happening and possibly suggest a fix =
for the solution?  I've already tried setting =
-Dorg.apache.lucene.lockDir=3D/tmp in the JVM args but it doesn't seem =
to do the job.
=20
I have also considdered local filesystems on each cluster member but the =
index is updated frequently and would need to be mirrored too often for =
it to be worth while.  Any suggestions would be helpful.
=20
Thank you,
=20
=20
Steve.
=20
=20
Here is the stack trace in case you need it.
=20
2006-04-26 08:57:36,160 INFO  [STDOUT] java.io.IOException: Stale NFS =
file handle
2006-04-26 08:57:36,163 INFO  [STDOUT]  at =
java.io.RandomAccessFile.readBytes(Native Method)
2006-04-26 08:57:36,164 INFO  [STDOUT]  at =
java.io.RandomAccessFile.read(RandomAccessFile.java:315)
2006-04-26 08:57:36,164 INFO  [STDOUT]  at =
org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:449)
2006-04-26 08:57:36,165 INFO  [STDOUT]  at =
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.j=
ava:45)
2006-04-26 08:57:36,166 INFO  [STDOUT]  at =
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Comp=
oundFileReader.java:219)
2006-04-26 08:57:36,166 INFO  [STDOUT]  at =
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java=
:64)
2006-04-26 08:57:36,167 INFO  [STDOUT]  at =
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.ja=
va:33)
2006-04-26 08:57:36,167 INFO  [STDOUT]  at =
org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
2006-04-26 08:57:36,168 INFO  [STDOUT]  at =
org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
2006-04-26 08:57:36,169 INFO  [STDOUT]  at =
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
2006-04-26 08:57:36,170 INFO  [STDOUT]  at =
org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
2006-04-26 08:57:36,170 INFO  [STDOUT]  at =
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:157=
)
2006-04-26 08:57:36,171 INFO  [STDOUT]  at =
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
2006-04-26 08:57:36,172 INFO  [STDOUT]  at =
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:300)
2006-04-26 08:57:36,173 INFO  [STDOUT]  at =
org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:78)
2006-04-26 08:57:36,173 INFO  [STDOUT]  at =
org.apache.lucene.search.Similarity.idf(Similarity.java:255)
2006-04-26 08:57:36,174 INFO  [STDOUT]  at =
org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java:43)
2006-04-26 08:57:36,175 INFO  [STDOUT]  at =
org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:142)
2006-04-26 08:57:36,175 INFO  [STDOUT]  at =
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(BooleanQuery.j=
ava:203)
2006-04-26 08:57:36,176 INFO  [STDOUT]  at =
org.apache.lucene.search.BooleanQuery$BooleanWeight2.<init>(BooleanQuery.=
java:330)
2006-04-26 08:57:36,177 INFO  [STDOUT]  at =
org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:372)=

2006-04-26 08:57:36,177 INFO  [STDOUT]  at =
org.apache.lucene.search.Query.weight(Query.java:93)
2006-04-26 08:57:36,178 INFO  [STDOUT]  at =
org.apache.lucene.search.Hits.<init>(Hits.java:48)
2006-04-26 08:57:36,179 INFO  [STDOUT]  at =
org.apache.lucene.search.Searcher.search(Searcher.java:53)

------_=_NextPart_001_01C66934.1BD61061--

From java-user-return-20338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 13:37:13 2006
Return-Path: <java-user-return-20338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34858 invoked from network); 26 Apr 2006 13:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 13:37:10 -0000
Received: (qmail 86210 invoked by uid 500); 26 Apr 2006 13:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86142 invoked by uid 500); 26 Apr 2006 13:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86093 invoked by uid 99); 26 Apr 2006 13:37:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 06:37:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of anton.feldmann@uni-bielefeld.de designates 129.70.4.97 as permitted sender)
Received: from [129.70.4.97] (HELO smtp-relay1.uni-bielefeld.de) (129.70.4.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 06:37:01 -0700
Received: from pmxchannel-daemon.mail1.hrz.uni-bielefeld.de by
 mail1.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 id <0IYC00H3S0GLGD@mail1.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 26 Apr 2006 15:36:21 +0200 (MEST)
Received: from [212.201.81.62] ([212.201.81.62]) by mail1.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 with ESMTPPA id <0IYC00H050GK1S@mail1.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 26 Apr 2006 15:36:20 +0200 (MEST)
Date: Wed, 26 Apr 2006 15:36:17 +0200
From: anton feldmann <anton.feldmann@uni-bielefeld.de>
Subject: Highlight
To: java-user@lucene.apache.org
Message-id: <444F7751.3020003@uni-bielefeld.de>
MIME-version: 1.0
Content-type: multipart/mixed; boundary="Boundary_(ID_wGFqFZUDNesxGBkP7CqOmA)"
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
X-Spam-Level:
X-UniBi-Spam-Level: , 7%
X-UniBi-Spam-Rules: __CP_NOT_1 0, __CT 0, __CTYPE_HAS_BOUNDARY 0,
 __CTYPE_MULTIPART 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0,
 __SANE_MSGID 0, __USER_AGENT 0
X-UniBi-Deliver: Tag
X-UniBi-EnvFrom: anton.feldmann@uni-bielefeld.de
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1,
 Antispam-Data: 2006.4.26.61106, vscan3.hrz.uni-bielefeld.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Boundary_(ID_wGFqFZUDNesxGBkP7CqOmA)
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Content-transfer-encoding: 7BIT

Hi

 I wrote a program that make a pdf document to an Lucene document. The 
field ate "contents", "sentence", ....:

How do i display the sentence the query String is in? and how do I 
Highlight the String?

cheers

anton feldmann


--Boundary_(ID_wGFqFZUDNesxGBkP7CqOmA)
Content-type: text/java; name=Sentence2Document.java; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT
Content-disposition: inline; filename=Sentence2Document.java

package de.coli.seek.lucene;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.io.StringWriter;
import java.util.Calendar;
import java.util.StringTokenizer;

import java.net.URL;
import java.net.URLConnection;

import java.util.Date;

import org.apache.lucene.document.DateTools;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.PDDocumentInformation;

import org.pdfbox.exceptions.CryptographyException;
import org.pdfbox.exceptions.InvalidPasswordException;

import org.pdfbox.util.PDFTextStripper;

public final class Sentence2Document
{
    private static final char FILE_SEPARATOR = System.getProperty("file.separator").charAt(0);

    // given caveat of increased search times when using
    //MICROSECOND, only use SECOND by default
    private DateTools.Resolution dateTimeResolution = DateTools.Resolution.SECOND;
    
    /**
     * accessor
     * @return current date/time resolution
     */
    public DateTools.Resolution getDateTimeResolution()
    {
        return dateTimeResolution;
    }
    
    /**
     * mutator
     * @param resolution set new date/time resolution
     */
    public void setDateTimeResolution( DateTools.Resolution resolution )
    {
        dateTimeResolution = resolution;
    }
    
    //
    // compatibility methods for lucene-1.9+
    //
    private String timeToString( long time )
    {
        return DateTools.timeToString( time, dateTimeResolution );
    }
    
    private static void addKeywordField( Document document, String name, String value )
    {
        if ( value != null ) 
        {
            document.add( new Field( name, value, Field.Store.YES, Field.Index.UN_TOKENIZED ) );
        }
    }
    
    private static void addTextField( Document document, String name, Reader value )
    {
        if ( value != null ) 
        {
            document.add( new Field( name, value ) );
        }
    }
    
    private static void addTextField( Document document, String name, String value )
    {
        if ( value != null ) 
        {
            document.add( new Field( name, value, Field.Store.YES, Field.Index.TOKENIZED ) );
        }
    }
    
    private void addTextField( Document document, String name, Date value )
    {
        if ( value != null ) 
        {
            addTextField( document, name, DateTools.dateToString( value, dateTimeResolution ) );
        }
    }
    
    private void addTextField( Document document, String name, Calendar value )
    {
        if ( value != null ) 
        {
            addTextField( document, name, value.getTime() );
        }
    }
    
    private static void addUnindexedField( Document document, String name, String value )
    {
        if ( value != null ) 
        {
            document.add( new Field( name, value, Field.Store.YES, Field.Index.NO ) );
        }
    }
    
    private static void addUnstoredKeywordField( Document document, String name, String value )
    {
        if ( value != null ) 
        {
            document.add( new Field( name, value, Field.Store.NO, Field.Index.UN_TOKENIZED ) );
        }
    }

    /**
     * private constructor because there are only static methods.
     */
    private Sentence2Document()
    {
        //utility class should not be instantiated
    }
    
    /**
     * This will get a lucene document from a PDF file.
     *
     * @param is The stream to read the PDF from.
     *
     * @return The lucene document.
     *
     * @throws IOException If there is an error parsing or indexing the document.
     */
    public static Document getDocument( InputStream is ) throws IOException
    {
    	Sentence2Document converter = new Sentence2Document();
        return converter.convertDocument( is );
    }
    
    /**
     * Convert the PDF stream to a lucene document.
     * 
     * @param is The input stream.
     * @return The input stream converted to a lucene document.
     * @throws IOException If there is an error converting the PDF.
     */
    public Document convertDocument( InputStream is ) throws IOException
    {
        Document document = new Document();
        addContent( document, is, "<inputstream>" );
        return document;
        
    }
    
    /**
     * This will take a reference to a PDF document and create a lucene document.
     * 
     * @param file A reference to a PDF document.
     * @return The converted lucene document.
     * 
     * @throws IOException If there is an exception while converting the document.
     */
    public Document convertDocument( File file ) throws IOException
    {
        Document document = new Document();

        // Add the url as a field named "url".  Use an UnIndexed field, so
        // that the url is just stored with the document, but is not searchable.
        addUnindexedField( document, "path", file.getPath() );
        addUnindexedField( document, "url", file.getPath().replace(FILE_SEPARATOR, '/') );

        // Add the last modified date of the file a field named "modified".  Use a
        // Keyword field, so that it's searchable, but so that no attempt is made
        // to tokenize the field into words.
        addKeywordField( document, "modified", timeToString( file.lastModified() ) );

        String uid = file.getPath().replace(FILE_SEPARATOR,'\u0000')
                     + "\u0000" 
                     + timeToString( file.lastModified() )
                     ;

        // Add the uid as a field, so that index can be incrementally maintained.
        // This field is not stored with document, it is indexed, but it is not
        // tokenized prior to indexing.
        addUnstoredKeywordField ( document, "uid", uid );

        FileInputStream input = null;
        try
        {
            input = new FileInputStream( file );
            addContent( document, input, file.getPath() );
        }
        finally
        {
            if( input != null )
            {
                input.close();
            }
        }


        // return the document

        return document;
    }
    
    /**
     * Convert the document from a PDF to a lucene document.
     * 
     * @param url A url to a PDF document.
     * @return The PDF converted to a lucene document.
     * @throws IOException If there is an error while converting the document.
     */
    public Document convertDocument( URL url ) throws IOException
    {
        Document document = new Document();
        URLConnection connection = url.openConnection();
        connection.connect();
        // Add the url as a field named "url".  Use an UnIndexed field, so
        // that the url is just stored with the document, but is not searchable.
        addUnindexedField( document, "url", url.toExternalForm() );

        // Add the last modified date of the file a field named "modified".  Use a
        // Keyword field, so that it's searchable, but so that no attempt is made
        // to tokenize the field into words.
        addKeywordField( document, "modified", timeToString(connection.getLastModified() ) );

        String uid = url.toExternalForm().replace(FILE_SEPARATOR, '\u0000')
                     + "\u0000" 
                     + timeToString( connection.getLastModified() );

        // Add the uid as a field, so that index can be incrementally maintained.
        // This field is not stored with document, it is indexed, but it is not
        // tokenized prior to indexing.
        addUnstoredKeywordField( document, "uid", uid );

        InputStream input = null;
        try
        {
            input = connection.getInputStream();
            addContent( document, input,url.toExternalForm() );
        }
        finally
        {
            if( input != null )
            {
                input.close();
            }
        }

        // return the document
        return document;
    }

    /**
     * This will get a lucene document from a PDF file.
     *
     * @param file The file to get the document for.
     *
     * @return The lucene document.
     *
     * @throws IOException If there is an error parsing or indexing the document.
     */
    public static Document getDocument( File file ) throws IOException
    {
    	Sentence2Document converter = new Sentence2Document();
        return converter.convertDocument( file );
    }

    /**
     * This will get a lucene document from a PDF file.
     *
     * @param url The file to get the document for.
     *
     * @return The lucene document.
     *
     * @throws IOException If there is an error parsing or indexing the document.
     */
    public static Document getDocument( URL url ) throws IOException
    {
    	Sentence2Document converter = new Sentence2Document();
        return converter.convertDocument( url );
    }

    /**
     * This will add the contents to the lucene document.
     *
     * @param document The document to add the contents to.
     * @param is The stream to get the contents from.
     * @param documentLocation The location of the document, used just for debug messages.
     *
     * @throws IOException If there is an error parsing the document.
     */
    private void addContent( Document document, InputStream is, String documentLocation ) throws IOException
    {
        PDDocument pdfDocument = null;
        try
        {
            pdfDocument = PDDocument.load( is );

            if( pdfDocument.isEncrypted() )
            {
                //Just try using the default password and move on
                pdfDocument.decrypt( "" );
            }

            StringWriter writer = new StringWriter();
            PDFTextStripper textStripper = new PDFTextStripper();
            textStripper.writeText( pdfDocument, writer );

            String contents = writer.getBuffer().toString();

            StringReader reader = new StringReader( contents );

            addTextField( document, "contents", reader );
            
            StringTokenizer token = new StringTokenizer(contents , ". ");
            while(token.hasMoreTokens()){
            	addTextField(document, "sentence", token.nextToken());
            }
            	
            PDDocumentInformation info = pdfDocument.getDocumentInformation();
            if ( info != null ) {
                addTextField( document, "Author", info.getAuthor() );
                addTextField( document, "CreationDate", info.getCreationDate() );
                addTextField( document, "Creator", info.getCreator() );
                addTextField( document, "Keywords", info.getKeywords() );
                addTextField( document, "ModificationDate", info.getModificationDate() );
                addTextField( document, "Producer", info.getProducer() );
                addTextField( document, "Subject", info.getSubject() );
                addTextField( document, "Title", info.getTitle() );
                addTextField( document, "Trapped", info.getTrapped() );
            }
            int summarySize = Math.min( contents.length(), 500 );
            String summary = contents.substring( 0, summarySize );
            // Add the summary as an UnIndexed field, so that it is stored and returned
            // with hit documents for display.
            addUnindexedField( document, "summary", summary );
        }
        catch( CryptographyException e )
        {
            throw new IOException( "Error decrypting document(" + documentLocation + "): " + e );
        }
        catch( InvalidPasswordException e )
        {
            //they didn't suppply a password and the default of "" was wrong.
            throw new IOException( "Error: The document(" + documentLocation + ") is encrypted and will not be indexed." );
        }
        finally
        {
            if( pdfDocument != null )
            {
                pdfDocument.close();
            }
        }
    }

    /**
     * This will test creating a document.
     *
     * usage: java pdfparser.searchengine.lucene.LucenePDFDocument &lt;pdf-document&gt;
     *
     * @param args command line arguments.
     *
     * @throws IOException If there is an error.
     */
    public static void main( String[] args ) throws IOException
    {
        if( args.length != 1 )
        {
            String us = Sentence2Document.class.getName();
            System.err.println( "usage: java " + us + "<pdf-document>" );
            System.exit( 1 );
        }
        System.out.println( "Document=" + getDocument( new File( args[0] ) ) );
    }

}


--Boundary_(ID_wGFqFZUDNesxGBkP7CqOmA)
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--Boundary_(ID_wGFqFZUDNesxGBkP7CqOmA)--

From java-user-return-20339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 13:51:20 2006
Return-Path: <java-user-return-20339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41794 invoked from network); 26 Apr 2006 13:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 13:51:19 -0000
Received: (qmail 20661 invoked by uid 500); 26 Apr 2006 13:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20630 invoked by uid 500); 26 Apr 2006 13:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20619 invoked by uid 99); 26 Apr 2006 13:51:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 06:51:13 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.238] (HELO web60815.mail.yahoo.com) (209.73.178.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Apr 2006 06:51:12 -0700
Received: (qmail 4837 invoked by uid 60001); 26 Apr 2006 13:50:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=rQ2vTjh+yN1llo0IRTnODGgxQl30ZzlbHMCK3q2FgijF6bC+sHayDgo+ddXpPIZ0aaw6/LZjor/4eKMgXz9SjR1l6Vkg9LKIyDa6WpkyiHuWtN58MDePsQrOHJBceJy7hvhrBH4FpqHKehqsxrHQ51YKo9T3l7t/zh+Kz5JFlLk=  ;
Message-ID: <20060426135051.4835.qmail@web60815.mail.yahoo.com>
Received: from [212.179.71.70] by web60815.mail.yahoo.com via HTTP; Wed, 26 Apr 2006 06:50:51 PDT
Date: Wed, 26 Apr 2006 06:50:51 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: RAM Directory / querying Performance issue
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-260731248-1146059451=:3034"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-260731248-1146059451=:3034
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I've rewritten the RAM DIR to supprt 64 bit (still havent had time to add this to lucene, hopefully in the coming months when i have a free second)
   
  My question:
   
  i have a machine with 4 GB RAM
   
  i have a 3GB index file,
   
  i successfully load the 3GB index into memory,
   
  the first few queries run with normal response time,
   
  but very quickly response time becomes unbearably slow (webloading with 1 con user), 
   
  how are queries expanded in memory when run (how much memory do they use up)?
   
  could this be an issue of the queries themselves talking up large chunks of RAM?
   
   
   
   
   

		
---------------------------------
Blab-away for as little as 1/min. Make  PC-to-Phone Calls using Yahoo! Messenger with Voice.
--0-260731248-1146059451=:3034--

From java-user-return-20340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 15:23:26 2006
Return-Path: <java-user-return-20340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6018 invoked from network); 26 Apr 2006 15:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 15:23:25 -0000
Received: (qmail 69734 invoked by uid 500); 26 Apr 2006 15:23:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69681 invoked by uid 500); 26 Apr 2006 15:23:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69666 invoked by uid 500); 26 Apr 2006 15:23:16 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 69662 invoked by uid 99); 26 Apr 2006 15:23:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:23:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO pproxy.gmail.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:23:15 -0700
Received: by pproxy.gmail.com with SMTP id t32so1625135pyc
        for <lucene-user@jakarta.apache.org>; Wed, 26 Apr 2006 08:22:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JMneoS+36lkJstq0Gw/+37ixF70OKoXeAZzZSgobn02yTgtNPDIL6E9OtKS0VZY3kabq6X+Js6Sl4vqcIaQDsIvLJNArxknUOgmdpMRKUFK2gzUwiQbpgV/qJia6iLW1LDn/YVVVWvZ09Yl1/SCP2oNGft4xiZSMMyRFT94YVfA=
Received: by 10.35.88.17 with SMTP id q17mr3269217pyl;
        Wed, 26 Apr 2006 08:22:55 -0700 (PDT)
Received: by 10.35.131.16 with HTTP; Wed, 26 Apr 2006 08:22:55 -0700 (PDT)
Message-ID: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
Date: Wed, 26 Apr 2006 17:22:55 +0200
From: jm <jmuguruza@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: MatchAllDocsQuery, MultiSearcher and a custom HitCollector throwing exception
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have encountered an issue with lucene1.9.1. It involves
MatchAllDocsQuery, MultiSearcher and a custom HitCollector. The
following code throws  java.lang.UnsupportedOperationException.

If I remove the MatchAllDocsQuery  condition (comment whole //1
block), or if I dont use the custom hitcollector (ms.search(mbq);
instead of ms.search(mbq, allcoll);) the exception goes away. By
stepping into the source I can see it seems due to MatchAllDocsQuery
no implementing extractTerms()....
I never looked at lucene internals before, any help as to what
extractTerms() should do, or any other hint to overcome this?

thanks,


            Searcher searcher =3D new
IndexSearcher("c:\\projects\\mig\\runtime\\index\\01Aug16\\");
            Searchable[] indexes =3D new IndexSearcher[1];
            indexes[0] =3D searcher;
            MultiSearcher ms =3D new MultiSearcher(indexes);

            AllCollector allcoll =3D new AllCollector(ms);

            BooleanQuery mbq =3D new BooleanQuery();
            mbq.add(new TermQuery(new Term("body", "value1")),
BooleanClause.Occur.MUST_NOT);
// 1
            MatchAllDocsQuery alld =3D new MatchAllDocsQuery();
            mbq.add(alld, BooleanClause.Occur.MUST);
//

            System.out.println("Query: " + mbq.toString());

            // 2
            ms.search(mbq, allcoll);
            //ms.search(mbq);

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 15:28:21 2006
Return-Path: <java-user-return-20341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11071 invoked from network); 26 Apr 2006 15:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 15:28:20 -0000
Received: (qmail 85586 invoked by uid 500); 26 Apr 2006 15:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85552 invoked by uid 500); 26 Apr 2006 15:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85541 invoked by uid 500); 26 Apr 2006 15:28:12 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 85537 invoked by uid 99); 26 Apr 2006 15:28:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:28:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:28:11 -0700
Received: by pproxy.gmail.com with SMTP id t32so1626529pyc
        for <lucene-user@jakarta.apache.org>; Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sWm6H6noFWdHuVgqLR1tlcw3Mle1LDPimaA9hyqfMyg7gmrlSAtMDpx9xrHGK5D25RohA45IR53uWrGJNFghceltQIGT1M3AOw8z4xHahRQoiNkiJIWJ9EsLB605ElZ6c32KYE0ucjPwjIhfQG8MALYLXJGXmhfXjzOzHBr4x3Q=
Received: by 10.35.99.5 with SMTP id b5mr1610387pym;
        Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
Message-ID: <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
Date: Wed, 26 Apr 2006 11:27:50 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery, MultiSearcher and a custom HitCollector throwing exception
Cc: "Lucene Users List" <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jim,

This went to the old mailing list...
Could you email this to java-user@lucene.apache.org
and maybe open a JIRA bug for it?

-Yonik

On 4/26/06, jm <jmuguruza@gmail.com> wrote:
> Hi,
>
> I have encountered an issue with lucene1.9.1. It involves
> MatchAllDocsQuery, MultiSearcher and a custom HitCollector. The
> following code throws  java.lang.UnsupportedOperationException.
>
> If I remove the MatchAllDocsQuery  condition (comment whole //1
> block), or if I dont use the custom hitcollector (ms.search(mbq);
> instead of ms.search(mbq, allcoll);) the exception goes away. By
> stepping into the source I can see it seems due to MatchAllDocsQuery
> no implementing extractTerms()....
> I never looked at lucene internals before, any help as to what
> extractTerms() should do, or any other hint to overcome this?
>
> thanks,
>
>
>             Searcher searcher =3D new
> IndexSearcher("c:\\projects\\mig\\runtime\\index\\01Aug16\\");
>             Searchable[] indexes =3D new IndexSearcher[1];
>             indexes[0] =3D searcher;
>             MultiSearcher ms =3D new MultiSearcher(indexes);
>
>             AllCollector allcoll =3D new AllCollector(ms);
>
>             BooleanQuery mbq =3D new BooleanQuery();
>             mbq.add(new TermQuery(new Term("body", "value1")),
> BooleanClause.Occur.MUST_NOT);
> // 1
>             MatchAllDocsQuery alld =3D new MatchAllDocsQuery();
>             mbq.add(alld, BooleanClause.Occur.MUST);
> //
>
>             System.out.println("Query: " + mbq.toString());
>
>             // 2
>             ms.search(mbq, allcoll);
>             //ms.search(mbq);
>


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 15:28:30 2006
Return-Path: <java-user-return-20342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11180 invoked from network); 26 Apr 2006 15:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 15:28:29 -0000
Received: (qmail 86013 invoked by uid 500); 26 Apr 2006 15:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85920 invoked by uid 500); 26 Apr 2006 15:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85882 invoked by uid 99); 26 Apr 2006 15:28:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:28:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:28:11 -0700
Received: by pproxy.gmail.com with SMTP id m51so2508200pye
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sWm6H6noFWdHuVgqLR1tlcw3Mle1LDPimaA9hyqfMyg7gmrlSAtMDpx9xrHGK5D25RohA45IR53uWrGJNFghceltQIGT1M3AOw8z4xHahRQoiNkiJIWJ9EsLB605ElZ6c32KYE0ucjPwjIhfQG8MALYLXJGXmhfXjzOzHBr4x3Q=
Received: by 10.35.99.5 with SMTP id b5mr1610387pym;
        Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Wed, 26 Apr 2006 08:27:50 -0700 (PDT)
Message-ID: <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
Date: Wed, 26 Apr 2006 11:27:50 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery, MultiSearcher and a custom HitCollector throwing exception
Cc: "Lucene Users List" <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jim,

This went to the old mailing list...
Could you email this to java-user@lucene.apache.org
and maybe open a JIRA bug for it?

-Yonik

On 4/26/06, jm <jmuguruza@gmail.com> wrote:
> Hi,
>
> I have encountered an issue with lucene1.9.1. It involves
> MatchAllDocsQuery, MultiSearcher and a custom HitCollector. The
> following code throws  java.lang.UnsupportedOperationException.
>
> If I remove the MatchAllDocsQuery  condition (comment whole //1
> block), or if I dont use the custom hitcollector (ms.search(mbq);
> instead of ms.search(mbq, allcoll);) the exception goes away. By
> stepping into the source I can see it seems due to MatchAllDocsQuery
> no implementing extractTerms()....
> I never looked at lucene internals before, any help as to what
> extractTerms() should do, or any other hint to overcome this?
>
> thanks,
>
>
>             Searcher searcher =3D new
> IndexSearcher("c:\\projects\\mig\\runtime\\index\\01Aug16\\");
>             Searchable[] indexes =3D new IndexSearcher[1];
>             indexes[0] =3D searcher;
>             MultiSearcher ms =3D new MultiSearcher(indexes);
>
>             AllCollector allcoll =3D new AllCollector(ms);
>
>             BooleanQuery mbq =3D new BooleanQuery();
>             mbq.add(new TermQuery(new Term("body", "value1")),
> BooleanClause.Occur.MUST_NOT);
> // 1
>             MatchAllDocsQuery alld =3D new MatchAllDocsQuery();
>             mbq.add(alld, BooleanClause.Occur.MUST);
> //
>
>             System.out.println("Query: " + mbq.toString());
>
>             // 2
>             ms.search(mbq, allcoll);
>             //ms.search(mbq);
>


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 15:30:50 2006
Return-Path: <java-user-return-20343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12569 invoked from network); 26 Apr 2006 15:30:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 15:30:50 -0000
Received: (qmail 91937 invoked by uid 500); 26 Apr 2006 15:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91909 invoked by uid 500); 26 Apr 2006 15:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91898 invoked by uid 99); 26 Apr 2006 15:30:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:30:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO pproxy.gmail.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:30:42 -0700
Received: by pproxy.gmail.com with SMTP id m51so2509050pye
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 08:30:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ASxiSH+TfVBupMCdEoefT4aI6YpNiJAfHd/WuMkjpjznc+HNPSYX0wS1ot49EejiK3uWMvewIBUk5k3YD6YyjppMQKbHKsTh1ArZ7lI6mRwJ26yJjGzfH8YIFliwl3leN+OFfr2uchn4M47D3dbOPFUcqtaX25pdylbyAfFbvkc=
Received: by 10.35.50.9 with SMTP id c9mr938544pyk;
        Wed, 26 Apr 2006 08:30:20 -0700 (PDT)
Received: by 10.35.131.16 with HTTP; Wed, 26 Apr 2006 08:30:20 -0700 (PDT)
Message-ID: <f071061b0604260830u3918a862nc69a472359cb7511@mail.gmail.com>
Date: Wed, 26 Apr 2006 17:30:20 +0200
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery, MultiSearcher and a custom HitCollector throwing exception
In-Reply-To: <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
	 <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/26/06, Yonik Seeley <yseeley@gmail.com> wrote:
> Hi Jim,
>
> This went to the old mailing list...
> Could you email this to java-user@lucene.apache.org
> and maybe open a JIRA bug for it?
>
> -Yonik
>
> On 4/26/06, jm <jmuguruza@gmail.com> wrote:
> > Hi,
> >
> > I have encountered an issue with lucene1.9.1. It involves
> > MatchAllDocsQuery, MultiSearcher and a custom HitCollector. The
> > following code throws  java.lang.UnsupportedOperationException.
> >
> > If I remove the MatchAllDocsQuery  condition (comment whole //1
> > block), or if I dont use the custom hitcollector (ms.search(mbq);
> > instead of ms.search(mbq, allcoll);) the exception goes away. By
> > stepping into the source I can see it seems due to MatchAllDocsQuery
> > no implementing extractTerms()....
> > I never looked at lucene internals before, any help as to what
> > extractTerms() should do, or any other hint to overcome this?
> >
> > thanks,
> >
> >
> >             Searcher searcher =3D new
> > IndexSearcher("c:\\projects\\mig\\runtime\\index\\01Aug16\\");
> >             Searchable[] indexes =3D new IndexSearcher[1];
> >             indexes[0] =3D searcher;
> >             MultiSearcher ms =3D new MultiSearcher(indexes);
> >
> >             AllCollector allcoll =3D new AllCollector(ms);
> >
> >             BooleanQuery mbq =3D new BooleanQuery();
> >             mbq.add(new TermQuery(new Term("body", "value1")),
> > BooleanClause.Occur.MUST_NOT);
> > // 1
> >             MatchAllDocsQuery alld =3D new MatchAllDocsQuery();
> >             mbq.add(alld, BooleanClause.Occur.MUST);
> > //
> >
> >             System.out.println("Query: " + mbq.toString());
> >
> >             // 2
> >             ms.search(mbq, allcoll);
> >             //ms.search(mbq);
> >
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search serv=
er
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 15:38:30 2006
Return-Path: <java-user-return-20344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19328 invoked from network); 26 Apr 2006 15:38:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 15:38:29 -0000
Received: (qmail 18261 invoked by uid 500); 26 Apr 2006 15:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18232 invoked by uid 500); 26 Apr 2006 15:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18218 invoked by uid 99); 26 Apr 2006 15:38:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:38:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO pproxy.gmail.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 08:38:20 -0700
Received: by pproxy.gmail.com with SMTP id m51so2511450pye
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 08:37:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AqpgPUFrkTBJwZMRZEpJokMQUziZ/QOw0C54LupmVHdA5SQhxEeupZXTQxOy2sUyXHOSftdZHN0P9zyV9IDqzPbs6dsU7qeN4EydM1WBONm2PAzhxptSrfMMLEvv6bmeT5+kytuDsVO9Z3Tzl7ZSvEaY0w60F665Hxerv0MEg80=
Received: by 10.35.121.2 with SMTP id y2mr3200305pym;
        Wed, 26 Apr 2006 08:37:59 -0700 (PDT)
Received: by 10.35.131.16 with HTTP; Wed, 26 Apr 2006 08:37:59 -0700 (PDT)
Message-ID: <f071061b0604260837m6eb3ae76ma32f880d4f722cb9@mail.gmail.com>
Date: Wed, 26 Apr 2006 17:37:59 +0200
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery, MultiSearcher and a custom HitCollector throwing exception
In-Reply-To: <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0604260822w5b2c9ff7ie6b2c4729d3c12a3@mail.gmail.com>
	 <c68e39170604260827v1c1ea266na33554b03a940fec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok, thanks for letting me know.

I entered a bug, 556.
javi

On 4/26/06, Yonik Seeley <yseeley@gmail.com> wrote:
> Hi Jim,
>
> This went to the old mailing list...
> Could you email this to java-user@lucene.apache.org
> and maybe open a JIRA bug for it?
>
> -Yonik
>
> On 4/26/06, jm <jmuguruza@gmail.com> wrote:
> > Hi,
> >
> > I have encountered an issue with lucene1.9.1. It involves
> > MatchAllDocsQuery, MultiSearcher and a custom HitCollector. The
> > following code throws  java.lang.UnsupportedOperationException.
> >
> > If I remove the MatchAllDocsQuery  condition (comment whole //1
> > block), or if I dont use the custom hitcollector (ms.search(mbq);
> > instead of ms.search(mbq, allcoll);) the exception goes away. By
> > stepping into the source I can see it seems due to MatchAllDocsQuery
> > no implementing extractTerms()....
> > I never looked at lucene internals before, any help as to what
> > extractTerms() should do, or any other hint to overcome this?
> >
> > thanks,
> >
> >
> >             Searcher searcher =3D new
> > IndexSearcher("c:\\projects\\mig\\runtime\\index\\01Aug16\\");
> >             Searchable[] indexes =3D new IndexSearcher[1];
> >             indexes[0] =3D searcher;
> >             MultiSearcher ms =3D new MultiSearcher(indexes);
> >
> >             AllCollector allcoll =3D new AllCollector(ms);
> >
> >             BooleanQuery mbq =3D new BooleanQuery();
> >             mbq.add(new TermQuery(new Term("body", "value1")),
> > BooleanClause.Occur.MUST_NOT);
> > // 1
> >             MatchAllDocsQuery alld =3D new MatchAllDocsQuery();
> >             mbq.add(alld, BooleanClause.Occur.MUST);
> > //
> >
> >             System.out.println("Query: " + mbq.toString());
> >
> >             // 2
> >             ms.search(mbq, allcoll);
> >             //ms.search(mbq);
> >
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search serv=
er
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 16:20:50 2006
Return-Path: <java-user-return-20345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48008 invoked from network); 26 Apr 2006 16:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 16:20:49 -0000
Received: (qmail 27124 invoked by uid 500); 26 Apr 2006 16:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27093 invoked by uid 500); 26 Apr 2006 16:20:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27078 invoked by uid 99); 26 Apr 2006 16:20:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 09:20:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Eric.Isakson@sas.com designates 149.173.6.148 as permitted sender)
Received: from [149.173.6.148] (HELO mercav05.na.sas.com) (149.173.6.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 09:20:42 -0700
Received: from MERC23.na.sas.com ([10.19.9.179]) by mercav05.na.sas.com with InterScan Message Security Suite; Wed, 26 Apr 2006 12:20:20 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Partial token matches
Date: Wed, 26 Apr 2006 12:20:19 -0400
Message-ID: <BFF5F6DFB538074B8A3FCD685C0DBE3601A77B67@MERC23.na.sas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial token matches
Thread-Index: AcZpTU+IBSn9LyVIRB2AE3plmuhhwg==
From: "Eric Isakson" <Eric.Isakson@sas.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

Just wanted to throw out something I'm working on. It is working well =
for me, but I wanted to see if anyone can suggest any other alternatives =
that might perform better than what I'm doing now.

I have a field in my index that contains keywords (back of the book =
index terms) and a UI feature that allows the user to find documents =
that contain a partial keyword supplied by the user. So a particular =
document in my index might have the token "informat" in the keywords =
field and the user may supply "form" in the UI and I should get a match.

My old implementation does not use Lucene and just uses String.matches =
with a regular expression that looks like ".*form.*". I reimplemented =
using Lucene and just tokenize the field so I get the tokens

informat
nformat
format
ormat
rmat
mat
at
t

Then I use a prefix query to find hits. Both implementations ignore case =
in the search and the hit order is controlled by another field that I'm =
sorting on, so relevance ranking is not important in this use case. =
Search time performance is crucial, time to create the index and index =
size are not really important. The index is created statically at =
application startup or possibly delivered to the application and is not =
updated while the application is using it.

Thanks for any suggestions,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 16:31:13 2006
Return-Path: <java-user-return-20346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57922 invoked from network); 26 Apr 2006 16:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 16:31:12 -0000
Received: (qmail 54207 invoked by uid 500); 26 Apr 2006 16:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54176 invoked by uid 500); 26 Apr 2006 16:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54165 invoked by uid 99); 26 Apr 2006 16:31:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 09:31:05 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Apr 2006 09:31:05 -0700
Received: (qmail 26041 invoked by uid 60001); 26 Apr 2006 16:30:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=bEMCkARLFri4Kzwzq5X6ViKNvJjR+7bJfPM7KO+iaarduC9qTSiOjAtAxWjJ13Avlubb7h/aB1rwvfasOENv+txiFqfSf3GVWDlZOyY1EJm6rh/nJRsdILHIIg7t2TAQ6+z8Fo92uQH2gWGiCYE7+cVUGia3yd5g6UZ+32tp7jA=  ;
Message-ID: <20060426163040.26039.qmail@web50303.mail.yahoo.com>
Date: Wed, 26 Apr 2006 09:30:40 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: java.io.IOException: Stale NFS file handle
To: java-user@lucene.apache.org
In-Reply-To: <FBEF1EF7B7E5B649AB1C684991223C6E02643852@tmg-mail2.torstar.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steve,

There are some locks involved in search, like the one that gets written to the FS before the readers reads all the segment/index files listed in segments file.  Once they are all read, the lock is released.  Setting lock dir to the local /tmp doesn't sound good, as locks have to be in the common location in order for them to have the desired locking effect.

As for suggestion for large frequently updated indices - have you considered NAS?

Otis

----- Original Message ----
From: "Schwenker, Stephen" <SSchwenker@thestar.ca>
To: java-user@lucene.apache.org
Sent: Wednesday, April 26, 2006 9:19:55 AM
Subject: java.io.IOException: Stale NFS file handle

Hey,
 
I'm running into this exception with my lucene searching.  We have a cluster of 2 servers that execute searches and one server in the back end that writes to the index.  I thought that setting up the external boxes on nfs would be alright since searching doesn't require locking.  Can anyone tell me why this may be happening and possibly suggest a fix for the solution?  I've already tried setting -Dorg.apache.lucene.lockDir=/tmp in the JVM args but it doesn't seem to do the job.
 
I have also considdered local filesystems on each cluster member but the index is updated frequently and would need to be mirrored too often for it to be worth while.  Any suggestions would be helpful.
 
Thank you,
 
 
Steve.
 
 
Here is the stack trace in case you need it.
 
2006-04-26 08:57:36,160 INFO  [STDOUT] java.io.IOException: Stale NFS file handle
2006-04-26 08:57:36,163 INFO  [STDOUT]  at java.io.RandomAccessFile.readBytes(Native Method)
2006-04-26 08:57:36,164 INFO  [STDOUT]  at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
2006-04-26 08:57:36,164 INFO  [STDOUT]  at org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:449)
2006-04-26 08:57:36,165 INFO  [STDOUT]  at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:45)
2006-04-26 08:57:36,166 INFO  [STDOUT]  at org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:219)
2006-04-26 08:57:36,166 INFO  [STDOUT]  at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:64)
2006-04-26 08:57:36,167 INFO  [STDOUT]  at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
2006-04-26 08:57:36,167 INFO  [STDOUT]  at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:56)
2006-04-26 08:57:36,168 INFO  [STDOUT]  at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:62)
2006-04-26 08:57:36,169 INFO  [STDOUT]  at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:117)
2006-04-26 08:57:36,170 INFO  [STDOUT]  at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:148)
2006-04-26 08:57:36,170 INFO  [STDOUT]  at org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:157)
2006-04-26 08:57:36,171 INFO  [STDOUT]  at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:151)
2006-04-26 08:57:36,172 INFO  [STDOUT]  at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:300)
2006-04-26 08:57:36,173 INFO  [STDOUT]  at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:78)
2006-04-26 08:57:36,173 INFO  [STDOUT]  at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
2006-04-26 08:57:36,174 INFO  [STDOUT]  at org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java:43)
2006-04-26 08:57:36,175 INFO  [STDOUT]  at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:142)
2006-04-26 08:57:36,175 INFO  [STDOUT]  at org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(BooleanQuery.java:203)
2006-04-26 08:57:36,176 INFO  [STDOUT]  at org.apache.lucene.search.BooleanQuery$BooleanWeight2.<init>(BooleanQuery.java:330)
2006-04-26 08:57:36,177 INFO  [STDOUT]  at org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:372)
2006-04-26 08:57:36,177 INFO  [STDOUT]  at org.apache.lucene.search.Query.weight(Query.java:93)
2006-04-26 08:57:36,178 INFO  [STDOUT]  at org.apache.lucene.search.Hits.<init>(Hits.java:48)
2006-04-26 08:57:36,179 INFO  [STDOUT]  at org.apache.lucene.search.Searcher.search(Searcher.java:53)




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 16:34:38 2006
Return-Path: <java-user-return-20347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60087 invoked from network); 26 Apr 2006 16:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 16:34:37 -0000
Received: (qmail 60529 invoked by uid 500); 26 Apr 2006 16:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60335 invoked by uid 500); 26 Apr 2006 16:34:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60324 invoked by uid 99); 26 Apr 2006 16:34:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 09:34:31 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Apr 2006 09:34:29 -0700
Received: (qmail 13428 invoked by uid 60001); 26 Apr 2006 16:34:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=QNg7xj+1/OcDZDTYLc5BTtThXE+aKhKW/puzqEQs9Hzoj9DQMvG8rUx0PmrxEpcYY+bTTVYkLdobKG4A03/0AqZHp9Fyu1TqU3XVWc+pxrby2pjrXMeA1a26RYS1mHMuA6ymbuAseCKdSzOCbfWkzVTzc+ATxaKoCd+P6eqUlHs=  ;
Message-ID: <20060426163408.13426.qmail@web50304.mail.yahoo.com>
Date: Wed, 26 Apr 2006 09:34:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Lucene search benchmark/stress test tool
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm about to write a little command-line Lucene search benchmark tool.  I'm interested in benchmarking search performance and the ability to specify concurrency level (# of parallel search threads) and response timing, so I can calculate min, max, average, and mean times.  Something like 'ab' (Apache Benchmark) tool, but for Lucene.

Has anyone already written something like this?

Thanks,
Otis




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 17:46:26 2006
Return-Path: <java-user-return-20348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1885 invoked from network); 26 Apr 2006 17:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 17:46:25 -0000
Received: (qmail 10442 invoked by uid 500); 26 Apr 2006 17:46:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10274 invoked by uid 500); 26 Apr 2006 17:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10263 invoked by uid 99); 26 Apr 2006 17:46:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 10:46:19 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO pproxy.gmail.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 10:46:18 -0700
Received: by pproxy.gmail.com with SMTP id m51so2547915pye
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 10:45:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ni4wG/FVebXesW3IgaE2+ZCNvq3nyqC7XspszDn3Z/Q49gD1hNslmWi5VT3RsVc4vDeMm+jfgzRtlwyunsjCcb06eTdbA3VcRkrPFZgV9hp8INPD2/FB2M9fe4iKxJ+Z6+JUnvPy7PNKQCtTQA46mSP9jpo6E19+JJY1ccfvhXI=
Received: by 10.35.123.2 with SMTP id a2mr3340871pyn;
        Wed, 26 Apr 2006 10:45:58 -0700 (PDT)
Received: by 10.35.17.4 with HTTP; Wed, 26 Apr 2006 10:45:58 -0700 (PDT)
Message-ID: <359a92830604261045o1e898e03jadde2a3fa57e057@mail.gmail.com>
Date: Wed, 26 Apr 2006 13:45:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Partial token matches
In-Reply-To: <BFF5F6DFB538074B8A3FCD685C0DBE3601A77B67@MERC23.na.sas.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9742_15434138.1146073558072"
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601A77B67@MERC23.na.sas.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9742_15434138.1146073558072
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm sure the guys will chime in, but I think you're in significant danger o=
f
getting a "too many clauses" exception thrown. Try searching on, say, "an".
Under the covers, Lucene expands your query to have a clause for *every*
item in your index that starts with "an", so there's a clause for "an" "ana=
"
"anb", "anaa", "anab", ....... The shorter your term, the more there'll be,
and if there are more than 1024, you'll get the exception above. You can se=
t
the number of clauses to a bigger number, but that may not scale well.

Consider writing a filter (see Lucene In Action). The filter will return a
bitset with a bit turned on for each potential match, and avoid this issue.
RegexTermEnum helps a lot here.

Try searching the archive for a thread started by me, titled "I just don't
get wildcards at all" for an exposition by the guys on this sort of thing.
That thread centers on wildcard queries, but I'm pretty sure PrefixQuery
suffers from the same issue.

Chris, Erik, Yonik... Do I have this right????

Erick

------=_Part_9742_15434138.1146073558072--

From java-user-return-20349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:04:46 2006
Return-Path: <java-user-return-20349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12121 invoked from network); 26 Apr 2006 18:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:04:45 -0000
Received: (qmail 54879 invoked by uid 500); 26 Apr 2006 18:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54814 invoked by uid 500); 26 Apr 2006 18:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54803 invoked by uid 99); 26 Apr 2006 18:04:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:04:39 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.205 as permitted sender)
Received: from [66.249.82.205] (HELO xproxy.gmail.com) (66.249.82.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:04:38 -0700
Received: by xproxy.gmail.com with SMTP id i26so1910249wxd
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 11:04:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PGcDz/b8otNMmIFJlLh3Oh0AcwbOfJ/NQboa4BaMsqKHbC66oPhv8Kwxgm8QGyslDoqjrztbh+hQmNQLUN42Kc7avI+nWXF7DoKPV6mZcHZiiNa30lEnDUOpu5v0JdNbe9Najy4NOMmAAK7TWW51L4JFm41QnMUjCF8IHh0udDs=
Received: by 10.70.76.19 with SMTP id y19mr1477608wxa;
        Wed, 26 Apr 2006 11:04:18 -0700 (PDT)
Received: by 10.70.90.1 with HTTP; Wed, 26 Apr 2006 11:04:18 -0700 (PDT)
Message-ID: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
Date: Wed, 26 Apr 2006 14:04:18 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: DateTools question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18801_11413212.1146074658248"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18801_11413212.1146074658248
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

Why does DateTools.dateToString() return a String representation of my Date=
,
but in a different TimeZone. Does it use its own Calendar/TimeZone settings=
?

F.I.

DateFormat format =3D new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.SSS");
System.out.println(DateTools.dateToString(format.parse("2006-04-26 07:29:
52.581"),DateTools.Resolution.MINUTE));

will print out

200604261129

Why the 4 hour difference?

Thanks!

--Bill

------=_Part_18801_11413212.1146074658248--

From java-user-return-20350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:16:42 2006
Return-Path: <java-user-return-20350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18824 invoked from network); 26 Apr 2006 18:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:16:41 -0000
Received: (qmail 78700 invoked by uid 500); 26 Apr 2006 18:16:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78671 invoked by uid 500); 26 Apr 2006 18:16:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78660 invoked by uid 99); 26 Apr 2006 18:16:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:16:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:16:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6C89C5B777; Wed, 26 Apr 2006 11:16:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6762C7F403
	for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 11:16:14 -0700 (PDT)
Date: Wed, 26 Apr 2006 11:16:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: DateTools question
In-Reply-To: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604261110100.23677@hal.rescomp.berkeley.edu>
References: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Why does DateTools.dateToString() return a String representation of my Date,
: but in a different TimeZone. Does it use its own Calendar/TimeZone settings?

Yes, DateTime is hardcoded to use GMT for it's string representations.

It wouldn't be safe for DateTools to use your current TimeZone/Locale,
because once you've indexed the value, your index might be used by another
application (or another instance of your application) running in a
differnet locale.

The important thing is not what string DateTools.dateToString returns,
it's whether you get an equivilent date back (based on the resolution you
specified)) when you do something like this...

  Date a = ...;
  DateTools.Resolution r = ...;
  Date b = DateTools.stringToDate(DateTools.dateToString(a,r));
  System.out.println("Is '"+a+"' the same as '"+b+"' with "+r+" resolution?");


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:30:31 2006
Return-Path: <java-user-return-20351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26934 invoked from network); 26 Apr 2006 18:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:30:30 -0000
Received: (qmail 491 invoked by uid 500); 26 Apr 2006 18:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 468 invoked by uid 500); 26 Apr 2006 18:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 456 invoked by uid 99); 26 Apr 2006 18:30:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:30:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:30:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 70D655B777; Wed, 26 Apr 2006 11:30:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 687777F403
	for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 11:30:02 -0700 (PDT)
Date: Wed, 26 Apr 2006 11:30:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Partial token matches
In-Reply-To: <359a92830604261045o1e898e03jadde2a3fa57e057@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604261120400.23677@hal.rescomp.berkeley.edu>
References: <BFF5F6DFB538074B8A3FCD685C0DBE3601A77B67@MERC23.na.sas.com>
 <359a92830604261045o1e898e03jadde2a3fa57e057@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm sure the guys will chime in, but I think you're in significant danger of
: getting a "too many clauses" exception thrown. Try searching on, say, "an".
: Under the covers, Lucene expands your query to have a clause for *every*
: item in your index that starts with "an", so there's a clause for "an" "ana"
: "anb", "anaa", "anab", ....... The shorter your term, the more there'll be,
: and if there are more than 1024, you'll get the exception above. You can set
: the number of clauses to a bigger number, but that may not scale well.

When using any of the queries that expand into a BooleanQuery, there is
almost allways the possibility of hitting TooManyClauses -- but this
approach of using PrefixQuery is definitely safer/faster then a straight
use of WildCardQuery -- at the expense of a Bigger index.

The idea mentioned in this thread is basically the same as an idea Erik
Hatcher has suggested in the past, which i've taken to refering to as
"wildcard term rotating"...
  http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12261.html

: Consider writing a filter (see Lucene In Action). The filter will return a
: bitset with a bit turned on for each potential match, and avoid this issue.

very true -- but at the expense of scoring information (ie: how many times
does the term appear in the document?) ... it's all a question of
priorities.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:30:49 2006
Return-Path: <java-user-return-20352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27202 invoked from network); 26 Apr 2006 18:30:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:30:48 -0000
Received: (qmail 1912 invoked by uid 500); 26 Apr 2006 18:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1881 invoked by uid 500); 26 Apr 2006 18:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1869 invoked by uid 99); 26 Apr 2006 18:30:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:30:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tremerson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nproxy.gmail.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:30:42 -0700
Received: by nproxy.gmail.com with SMTP id c29so1208733nfb
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 11:30:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=EE4rElLiFUcRk7PW/+91qcU2szM4DlTiPHKCxEnlZ9cWWe+fe6zn4GrYRs6sHjEk90LDK5vO5UHbMrJ7jtkNofbnU0DtGPqWE2K+B82GeO/oiORgiD6Hpexx7oxU9cYb/tmVYR9eNxsOSf1wocMWa/7vPLf3tC/l7WWtUajd15E=
Received: by 10.49.90.16 with SMTP id s16mr556601nfl;
        Wed, 26 Apr 2006 11:30:19 -0700 (PDT)
Received: by 10.49.21.4 with HTTP; Wed, 26 Apr 2006 11:30:19 -0700 (PDT)
Message-ID: <cefddd100604261130n281895dw32b29f4eea2eee3@mail.gmail.com>
Date: Wed, 26 Apr 2006 14:30:19 -0400
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Filter operation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36878_704580.1146076219313"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_36878_704580.1146076219313
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

R3JlZXRpbmdzLAoKSWYgSSB3cml0ZSBhIGZpbHRlciwgZG9lcyB0aGlzIHJ1biBvdmVyIHRoZSBk
b2N1bWVudHMgaW4gdGhlIGluZGV4ICpiZWZvcmUqCmEgc2VhcmNoIGlzIG1hZGUgKGkuZS4sIGV2
ZXJ5IGRvY3VtZW50IGluIHRoZSBpbmRleCBpcyB0b3VjaGVkKSBvciBvbiB0aGUKcmVzdWx0IHNl
dCBhZnRlciB0aGUgc2VhcmNoPyBJZiBpdCBpcyBydW4gb3ZlciBhbGwgb2YgdGhlIGRvY3VtZW50
cywgZG9lc24ndAp0aGlzIGJlY29tZSBhIHBlcmZvcm1hbmNlIGJvdHRsZW5lY2sgb24gYW55IG5v
bi10cml2aWFsIGZpbHRlcj8KCi0tClRvbSBFbWVyc29uCnRyZW1lcnNvbkBnbWFpbC5jb20KaHR0
cDovL3d3dy5kcmVhbWVyc3JlYWxtLm5ldC9+dHJlZQo=
------=_Part_36878_704580.1146076219313--

From java-user-return-20353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:31:10 2006
Return-Path: <java-user-return-20353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27357 invoked from network); 26 Apr 2006 18:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:31:09 -0000
Received: (qmail 3385 invoked by uid 500); 26 Apr 2006 18:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3354 invoked by uid 500); 26 Apr 2006 18:31:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3343 invoked by uid 99); 26 Apr 2006 18:31:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:31:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.183] (HELO moutng.kundenserver.de) (212.227.126.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:31:02 -0700
Received: from [84.131.39.3] (helo=[192.168.115.23])
	by mrelayeu.kundenserver.de (node=mrelayeu6) with ESMTP (Nemesis),
	id 0ML29c-1FYome0BTD-0000aN; Wed, 26 Apr 2006 20:30:40 +0200
Message-ID: <444FBB8A.6000304@rc.ag>
Date: Wed, 26 Apr 2006 20:27:22 +0200
From: Hannes Carl Meyer <developers@rc.ag>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Dealing with acronyms
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I would like enable users to do an acronym search on my index.
My idea is the following:

1.) Extract acronyms (ABS, ESP, VCG etc.) from the given document (which 
is going to be indexed)

2.) Store the extracted acronyms in a field, for example called "case"

3.) On search, asking the user to use case:"ABS" to search for acronyms

Any experience with this kind of pattern? Other ideas or best practices?

Thank you in advance and best regards

Hannes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:38:36 2006
Return-Path: <java-user-return-20354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31506 invoked from network); 26 Apr 2006 18:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:38:35 -0000
Received: (qmail 24924 invoked by uid 500); 26 Apr 2006 18:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24884 invoked by uid 500); 26 Apr 2006 18:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24873 invoked by uid 99); 26 Apr 2006 18:38:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:38:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of anton.feldmann@uni-bielefeld.de designates 129.70.4.98 as permitted sender)
Received: from [129.70.4.98] (HELO smtp-relay2.uni-bielefeld.de) (129.70.4.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:38:28 -0700
Received: from pmxchannel-daemon.mail2.hrz.uni-bielefeld.de by
 mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 id <0IYC00901EFJVS@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 26 Apr 2006 20:38:07 +0200 (MEST)
Received: from [212.201.81.62] ([212.201.81.62]) by mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 with ESMTPPA id <0IYC006CFEFI5O@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Wed, 26 Apr 2006 20:38:06 +0200 (MEST)
Date: Wed, 26 Apr 2006 20:38:02 +0200
From: anton feldmann <anton.feldmann@uni-bielefeld.de>
Subject: How to display a field value
In-reply-to: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <444FBE0A.4060809@uni-bielefeld.de>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
X-Spam-Level:
X-UniBi-Spam-Level: , 7%
X-UniBi-Spam-Rules: __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0,
 __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0
X-UniBi-Deliver: Tag
X-UniBi-EnvFrom: anton.feldmann@uni-bielefeld.de
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1,
 Antispam-Data: 2006.4.26.111106, vscan1.hrz.uni-bielefeld.de
References: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

how do i display the whole field value of an document the query string 
is found?

cheers

anton

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:40:42 2006
Return-Path: <java-user-return-20355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32386 invoked from network); 26 Apr 2006 18:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:40:41 -0000
Received: (qmail 32002 invoked by uid 500); 26 Apr 2006 18:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31969 invoked by uid 500); 26 Apr 2006 18:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31953 invoked by uid 99); 26 Apr 2006 18:40:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:40:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of stefan.will@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Apr 2006 11:40:34 -0700
Received: (qmail invoked by alias); 26 Apr 2006 18:40:12 -0000
Received: from adsl-67-123-81-118.dsl.snfc21.pacbell.net (EHLO [127.0.0.1]) [67.123.81.118]
  by mail.gmx.net (mp036) with SMTP; 26 Apr 2006 20:40:12 +0200
X-Authenticated: #2748410
Message-ID: <444FBF86.8070500@gmx.net>
Date: Wed, 26 Apr 2006 11:44:22 -0700
From: Stefan Will <stefan.will@gmx.net>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Dealing with acronyms
References: <444FBB8A.6000304@rc.ag>
In-Reply-To: <444FBB8A.6000304@rc.ag>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This makes perfect sense to me. Of course the hard part will be how to 
extract the acronyms.

-- Stefan

Hannes Carl Meyer wrote:
> Hi All,
>
> I would like enable users to do an acronym search on my index.
> My idea is the following:
>
> 1.) Extract acronyms (ABS, ESP, VCG etc.) from the given document 
> (which is going to be indexed)
>
> 2.) Store the extracted acronyms in a field, for example called "case"
>
> 3.) On search, asking the user to use case:"ABS" to search for acronyms
>
> Any experience with this kind of pattern? Other ideas or best practices?
>
> Thank you in advance and best regards
>
> Hannes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 18:50:54 2006
Return-Path: <java-user-return-20356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37497 invoked from network); 26 Apr 2006 18:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 18:50:54 -0000
Received: (qmail 54877 invoked by uid 500); 26 Apr 2006 18:50:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54851 invoked by uid 500); 26 Apr 2006 18:50:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54840 invoked by uid 99); 26 Apr 2006 18:50:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:50:47 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.32] (HELO ylpvm01.prodigy.net) (207.115.57.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 11:50:46 -0700
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm01.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3QIoKFm015285
	for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 14:50:21 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout6-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3QIoLD1076170;
	Wed, 26 Apr 2006 14:50:22 -0400
Message-ID: <444FC0ED.4070602@apache.org>
Date: Wed, 26 Apr 2006 11:50:21 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: RAM Directory / querying Performance issue
References: <20060426135051.4835.qmail@web60815.mail.yahoo.com>
In-Reply-To: <20060426135051.4835.qmail@web60815.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is this markedly faster than using an MMapDirectory?  Copying all this 
data into the Java heap (as RAMDirectory does) puts a tremendous burden 
on the garbage collector.  MMapDirectory should be nearly as fast, but 
keeps the index out of the Java heap.

Doug

zzzzz shalev wrote:
> I've rewritten the RAM DIR to supprt 64 bit (still havent had time to add this to lucene, hopefully in the coming months when i have a free second)
>    
>   My question:
>    
>   i have a machine with 4 GB RAM
>    
>   i have a 3GB index file,
>    
>   i successfully load the 3GB index into memory,
>    
>   the first few queries run with normal response time,
>    
>   but very quickly response time becomes unbearably slow (webloading with 1 con user), 
>    
>   how are queries expanded in memory when run (how much memory do they use up)?
>    
>   could this be an issue of the queries themselves talking up large chunks of RAM?
>    
>    
>    
>    
>    
> 
> 		
> ---------------------------------
> Blab-away for as little as 1/min. Make  PC-to-Phone Calls using Yahoo! Messenger with Voice.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 19:43:17 2006
Return-Path: <java-user-return-20357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79529 invoked from network); 26 Apr 2006 19:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 19:43:17 -0000
Received: (qmail 89632 invoked by uid 500); 26 Apr 2006 19:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89604 invoked by uid 500); 26 Apr 2006 19:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89593 invoked by uid 99); 26 Apr 2006 19:43:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:43:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:43:09 -0700
Received: by nz-out-0102.google.com with SMTP id 4so1401666nzn
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 12:42:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MDkzGWOV4RQ3hvQhj9UB6vJVBKpdl+YeJW8gcfSgmj19bxg34V7iLNA3c3uM0EASDYSYMT+uFRhVms74ulXCRncxXYlDv3w7cT4tlY7WLli4z5dBeYaC5KgJwyNEYUHZvX+OmK+qRS378BP4lc8EQLBtqKSDNA95jM2hApM7p38=
Received: by 10.65.83.16 with SMTP id k16mr1053637qbl;
        Wed, 26 Apr 2006 12:42:49 -0700 (PDT)
Received: by 10.65.182.19 with HTTP; Wed, 26 Apr 2006 12:42:49 -0700 (PDT)
Message-ID: <abe188f20604261242n23775198ye05da02a7ecc472f@mail.gmail.com>
Date: Wed, 26 Apr 2006 14:42:49 -0500
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Dealing with acronyms
In-Reply-To: <444FBB8A.6000304@rc.ag>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3490_9050946.1146080569215"
References: <444FBB8A.6000304@rc.ag>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3490_9050946.1146080569215
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 4/26/06, Hannes Carl Meyer <developers@rc.ag> wrote:
>
> Hi All,
>
> I would like enable users to do an acronym search on my index.
> My idea is the following:
>
> 1.) Extract acronyms (ABS, ESP, VCG etc.) from the given document (which
> is going to be indexed)


In case you havent already looked at, you might find this useful.
http://www.cs.waikato.ac.nz/~nzdl/publications/1999/Yeates-Auto-Extract.pdf


2.) Store the extracted acronyms in a field, for example called "case"
>
> 3.) On search, asking the user to use case:"ABS" to search for acronyms


I would rather store them in the same field with others, so that you can do
phrase queries. Store the acronyms just like you would store synonyms. More
information on how to store synonyms is in "Lucene in Action" book. This
would facilitate queries like "USA President". If you store "USA" in a
separate field, you wouldn't be able to match this query.

Any experience with this kind of pattern? Other ideas or best practices?

I would also look at HMMs/CRFs to extract acronyms. You need to come up wit=
h
a list of features to identify a potential acronym. For ex:
- All Caps
- The acronym appears repeatedly in the rest of the text
- Found in the acronym dictionary...etc

Hope this helps,

--Rajesh Munavalli
Blog: http://munavalli.blogspot.com

------=_Part_3490_9050946.1146080569215--

From java-user-return-20358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 19:50:37 2006
Return-Path: <java-user-return-20358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85015 invoked from network); 26 Apr 2006 19:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 19:50:37 -0000
Received: (qmail 17069 invoked by uid 500); 26 Apr 2006 19:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17038 invoked by uid 500); 26 Apr 2006 19:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17027 invoked by uid 99); 26 Apr 2006 19:50:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:50:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:50:29 -0700
Received: from [84.131.39.3] (helo=[192.168.115.23])
	by mrelayeu.kundenserver.de (node=mrelayeu1) with ESMTP (Nemesis),
	id 0MKwpI-1FYq1W0ug3-0002KU; Wed, 26 Apr 2006 21:50:06 +0200
Message-ID: <444FCE28.7050704@rc.ag>
Date: Wed, 26 Apr 2006 21:46:48 +0200
From: Hannes Carl Meyer <developers@rc.ag>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Dealing with acronyms
References: <444FBB8A.6000304@rc.ag> <abe188f20604261242n23775198ye05da02a7ecc472f@mail.gmail.com>
In-Reply-To: <abe188f20604261242n23775198ye05da02a7ecc472f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajesh Munavalli schrieb:
> On 4/26/06, Hannes Carl Meyer <developers@rc.ag> wrote:
>   
>> Hi All,
>>
>> I would like enable users to do an acronym search on my index.
>> My idea is the following:
>>
>> 1.) Extract acronyms (ABS, ESP, VCG etc.) from the given document (which
>> is going to be indexed)
>>     
>
>
> In case you havent already looked at, you might find this useful.
> http://www.cs.waikato.ac.nz/~nzdl/publications/1999/Yeates-Auto-Extract.pdf
>
>
> 2.) Store the extracted acronyms in a field, for example called "case"
>   
>> 3.) On search, asking the user to use case:"ABS" to search for acronyms
>>     
>
>
> I would rather store them in the same field with others, so that you can do
> phrase queries. Store the acronyms just like you would store synonyms. More
> information on how to store synonyms is in "Lucene in Action" book. This
> would facilitate queries like "USA President". If you store "USA" in a
> separate field, you wouldn't be able to match this query.
>
> Any experience with this kind of pattern? Other ideas or best practices?
>
> I would also look at HMMs/CRFs to extract acronyms. You need to come up with
> a list of features to identify a potential acronym. For ex:
> - All Caps
> - The acronym appears repeatedly in the rest of the text
> - Found in the acronym dictionary...etc
>
> Hope this helps,
>
> --Rajesh Munavalli
> Blog: http://munavalli.blogspot.com
>
>   
Hi,

thank you, thats a good advice - I don't have the Lucene in Action Book, 
but I think its worth taking a look at it.

So I guess its done by writing or extending an anylzer?

H.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 19:56:48 2006
Return-Path: <java-user-return-20359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88551 invoked from network); 26 Apr 2006 19:56:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 19:56:48 -0000
Received: (qmail 32022 invoked by uid 500); 26 Apr 2006 19:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31998 invoked by uid 500); 26 Apr 2006 19:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31987 invoked by uid 99); 26 Apr 2006 19:56:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:56:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 12:56:41 -0700
Received: by nz-out-0102.google.com with SMTP id n29so1691558nzf
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 12:56:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=j5IWY8SVk1v96UyP5DU3GJl3erwrAA4IEjtTqCq06Ba6TUinOy2/8gLx0UrewZrmjxEvxL/7rS6W6BUua3nWCayehm6tbxlh0722Vi8YzctfhEEBSGpIzE5d3WW/RLe5zn+I1ApZOOIB9j5wiWtFZk7bGATzOQBXp8S922W/HUo=
Received: by 10.65.250.10 with SMTP id c10mr1698168qbs;
        Wed, 26 Apr 2006 12:56:20 -0700 (PDT)
Received: by 10.65.182.19 with HTTP; Wed, 26 Apr 2006 12:56:20 -0700 (PDT)
Message-ID: <abe188f20604261256m454d8976gaf2557c270cddf6a@mail.gmail.com>
Date: Wed, 26 Apr 2006 14:56:20 -0500
From: "Rajesh Munavalli" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Dealing with acronyms
In-Reply-To: <444FCE28.7050704@rc.ag>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3702_27579431.1146081380865"
References: <444FBB8A.6000304@rc.ag>
	 <abe188f20604261242n23775198ye05da02a7ecc472f@mail.gmail.com>
	 <444FCE28.7050704@rc.ag>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3702_27579431.1146081380865
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

>
>
> So I guess its done by writing or extending an anylzer?
>
Yes...thats correct.

--Rajesh Munavalli
Blog: http://munavalli.blogspot.com

------=_Part_3702_27579431.1146081380865--

From java-user-return-20360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 20:03:38 2006
Return-Path: <java-user-return-20360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92569 invoked from network); 26 Apr 2006 20:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 20:03:38 -0000
Received: (qmail 43725 invoked by uid 500); 26 Apr 2006 20:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43171 invoked by uid 500); 26 Apr 2006 20:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43149 invoked by uid 99); 26 Apr 2006 20:03:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 13:03:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 13:03:30 -0700
Received: (qmail 2238 invoked from network); 26 Apr 2006 20:03:07 -0000
Received: from unknown (HELO p5496da1d.dip.t-dialin.net) ([pbs]695637@[84.150.218.29])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 26 Apr 2006 20:03:07 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: performance differences between 1.4.3 and 1.9.1
Date: Wed, 26 Apr 2006 22:04:38 +0200
User-Agent: KMail/1.8.2
References: <20060425232206.46779.qmail@web86503.mail.ukl.yahoo.com>
In-Reply-To: <20060425232206.46779.qmail@web86503.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <200604262204.38903@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 26 April 2006 01:22, RONALD MANTAY wrote:

>   However when searching muliple indexes with multiSearcher and with a
> FuzzyQuery with a prefixLength of 1. The search against 3.7m documents
> spread over 23 indexes (due to the natural grouping of the data) the
> time changed from 800ms to 4500 ms.

MultiSearcher in Lucene 1.4 had a broken ranking implementation. This has 
been fixed in Lucene 1.9, but this might have bad effects on performance. 
23 indexes is quite much, maybe you can speed up things greatly be using a 
smaller number of indexes.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 26 22:20:39 2006
Return-Path: <java-user-return-20361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61180 invoked from network); 26 Apr 2006 22:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Apr 2006 22:20:38 -0000
Received: (qmail 12843 invoked by uid 500); 26 Apr 2006 22:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12805 invoked by uid 500); 26 Apr 2006 22:20:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12760 invoked by uid 99); 26 Apr 2006 22:20:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 15:20:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of anton.feldmann@uni-bielefeld.de designates 129.70.4.98 as permitted sender)
Received: from [129.70.4.98] (HELO smtp-relay2.uni-bielefeld.de) (129.70.4.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 15:20:26 -0700
Received: from pmxchannel-daemon.mail2.hrz.uni-bielefeld.de by
 mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 id <0IYC00D01OPH9P@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 27 Apr 2006 00:20:05 +0200 (MEST)
Received: from [212.201.81.114] ([212.201.81.114])
 by mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 with ESMTPPA id <0IYC00ANOOPGPG@mail2.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 27 Apr 2006 00:20:04 +0200 (MEST)
Date: Thu, 27 Apr 2006 00:20:00 +0200
From: anton feldmann <anton.feldmann@uni-bielefeld.de>
Subject: Re: How to serach in sentence and dispaly the whole sentence
In-reply-to: <444BE559.4080804@syr.edu>
To: java-user@lucene.apache.org
Message-id: <444FF210.8020901@uni-bielefeld.de>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Content-transfer-encoding: 7BIT
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
X-Spam-Level:
X-UniBi-Spam-Level: , 7%
X-UniBi-Spam-Rules: __CP_NOT_1 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0,
 __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0,
 __STOCK_CRUFT 0, __USER_AGENT 0
X-UniBi-Deliver: Tag
X-UniBi-EnvFrom: anton.feldmann@uni-bielefeld.de
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1,
 Antispam-Data: 2006.4.26.145108, vscan1.hrz.uni-bielefeld.de
References: <444BCBD0.3000609@uni-bielefeld.de> <444BE559.4080804@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are the names of a field in a document unique or can i make a field with 
the name "sentence" for each sentence in an text document?

Grant Ingersoll schrieb:
> Anton,
>
> I think there are at least a couple of ways of doing this.  I assume 
> you have a program that does sentence detection already, as Lucene 
> does not provide this.  If not, I am sure a search of the web will 
> find one that has high accuracy.
> You can:
> 1. Index each sentence as a separate Document.  You will need a field 
> on the Document relating it back to the overall file so you can 
> reconstruct it.
> 2. As you index, insert sentence/paragraph boundary markers into your 
> index and then use the SpanQuery functionality.  Search this mail 
> archive for sentence boundary detection and Span Query (try the dev 
> list too).  I think there was a discussion between me, Doug and Hoss 
> on how to do this.
> 3. Do search as you do now and then post process to figure out what 
> sentence it came from.  This will be inefficient, but I don't know 
> what your requirements are that way, so it may work for you.
>
> There are probably other ways too.
>
> anton feldmann wrote:
>> I intend, to make a search, to find a word or a word pair
>> in  a sentence or a paragraph. But then the sentence should be indicated
>> as a whole. The question relates to the fact, that I need to extend 
>> Lucene
>> in such a way that this is possible. But where to I make a start, 
>> because
>> I have no idea, how I have to change the IndexFile, whether that 
>> conforms with the Lucene Team.
>>
>> cheers
>>
>> anton feldmann
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 00:19:11 2006
Return-Path: <java-user-return-20362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8549 invoked from network); 27 Apr 2006 00:19:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 00:19:10 -0000
Received: (qmail 2430 invoked by uid 500); 27 Apr 2006 00:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1879 invoked by uid 500); 27 Apr 2006 00:19:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1868 invoked by uid 99); 27 Apr 2006 00:19:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 17:19:04 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of goodell@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 17:19:03 -0700
Received: by nz-out-0102.google.com with SMTP id 4so1457333nzn
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 17:18:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ko84o43vEvPtck7ECLwd+qkS3GRauelPDLbbrvk/BmBQTI95wUo5QFo165YJSnbjFt0BnBI3+wKKy95Ncu1+euY6v95eDO6me5PxHbwKyPzAdWdR+QEDqiQHYPUOoGwJdctJ7YEW+vpef7Q17mydTiaxnBjPdxZcMTTgyTjTUcs=
Received: by 10.65.107.18 with SMTP id j18mr61708qbm;
        Wed, 26 Apr 2006 17:18:40 -0700 (PDT)
Received: by 10.65.148.10 with HTTP; Wed, 26 Apr 2006 17:18:40 -0700 (PDT)
Message-ID: <55b2c6b90604261718u224fbbb3v2dff6f44170ac25@mail.gmail.com>
Date: Wed, 26 Apr 2006 17:18:40 -0700
From: "Andy Goodell" <agoodell@discoverymining.com>
Sender: goodell@gmail.com
To: java-user@lucene.apache.org
Subject: Re: performance differences between 1.4.3 and 1.9.1
In-Reply-To: <200604262204.38903@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060425232206.46779.qmail@web86503.mail.ukl.yahoo.com>
	 <200604262204.38903@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For my application we have several hundred indexes, different subsets
of which are searched depending on the situation.  Aside from not
upgrading to lucene 1.9, or making a big index for every possible
subset, do you have any ideas for how can we maintain fast
performance?

- andy g

On 4/26/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
> MultiSearcher in Lucene 1.4 had a broken ranking implementation. This has
> been fixed in Lucene 1.9, but this might have bad effects on performance.
> 23 indexes is quite much, maybe you can speed up things greatly be using =
a
> smaller number of indexes.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 01:10:57 2006
Return-Path: <java-user-return-20363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28020 invoked from network); 27 Apr 2006 01:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 01:10:57 -0000
Received: (qmail 45520 invoked by uid 500); 27 Apr 2006 01:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45493 invoked by uid 500); 27 Apr 2006 01:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45475 invoked by uid 99); 27 Apr 2006 01:10:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 18:10:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 18:10:48 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 27 Apr 2006 03:10:24 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <55b2c6b90604261718u224fbbb3v2dff6f44170ac25@mail.gmail.com>
References: <20060425232206.46779.qmail@web86503.mail.ukl.yahoo.com> <200604262204.38903@danielnaber.de> <55b2c6b90604261718u224fbbb3v2dff6f44170ac25@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1A5EE885-8C27-4DA0-A75B-3C17678F254F@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: performance differences between 1.4.3 and 1.9.1
Date: Thu, 27 Apr 2006 03:13:03 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 01:10:24.0712 (UTC) FILETIME=[5CF42480:01C66997]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 02.18 skrev Andy Goodell:

> For my application we have several hundred indexes, different subsets
> of which are searched depending on the situation.  Aside from not
> upgrading to lucene 1.9, or making a big index for every possible
> subset, do you have any ideas for how can we maintain fast
> performance?

You probably need to explain the reason for splitting them up in  
order to get a good answer to that. And how big are they?

Without knowing anything about your application I say: merge them all  
to one and add a field you apply to a boolean clause.
But with a few hundred indices it sounds like you have a design plan  
that don't work with above.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 02:16:39 2006
Return-Path: <java-user-return-20364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56103 invoked from network); 27 Apr 2006 02:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 02:16:39 -0000
Received: (qmail 6549 invoked by uid 500); 27 Apr 2006 02:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6470 invoked by uid 500); 27 Apr 2006 02:16:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6459 invoked by uid 99); 27 Apr 2006 02:16:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 19:16:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wsnyder6@gmail.com designates 66.249.82.202 as permitted sender)
Received: from [66.249.82.202] (HELO xproxy.gmail.com) (66.249.82.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 19:16:33 -0700
Received: by xproxy.gmail.com with SMTP id i26so1973481wxd
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 19:16:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KoppCA3Ze5qR8Naf/CsEkHNJQcdjHfPCsumO4CUR8GM/8vDS3VyG02jQ6GlmrK2BOmvAtc6snohZiM+jIbRt7Gc0Dw/9H8igSF4M53AC1qhvj25AukZ+BC75iIKEepsV53Iishk031lVwNjviPC/U0vDqmYgMbetsp8WH8VN7tg=
Received: by 10.70.70.5 with SMTP id s5mr207758wxa;
        Wed, 26 Apr 2006 19:16:12 -0700 (PDT)
Received: by 10.70.90.1 with HTTP; Wed, 26 Apr 2006 19:16:12 -0700 (PDT)
Message-ID: <e465bf5d0604261916n4ff33407ueade580d0fd2dd64@mail.gmail.com>
Date: Wed, 26 Apr 2006 22:16:12 -0400
From: "Bill Snyder" <wsnyder6@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DateTools question
In-Reply-To: <Pine.LNX.4.58.0604261110100.23677@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23271_14199949.1146104172290"
References: <e465bf5d0604261104g4e0fa4f3u5cf812382accd633@mail.gmail.com>
	 <Pine.LNX.4.58.0604261110100.23677@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23271_14199949.1146104172290
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Makes sense. Thanks for the response!

--Bill

On 4/26/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Why does DateTools.dateToString() return a String representation of my
> Date,
> : but in a different TimeZone. Does it use its own Calendar/TimeZone
> settings?
>
> Yes, DateTime is hardcoded to use GMT for it's string representations.
>
> It wouldn't be safe for DateTools to use your current TimeZone/Locale,
> because once you've indexed the value, your index might be used by anothe=
r
> application (or another instance of your application) running in a
> differnet locale.
>
> The important thing is not what string DateTools.dateToString returns,
> it's whether you get an equivilent date back (based on the resolution you
> specified)) when you do something like this...
>
>   Date a =3D ...;
>   DateTools.Resolution r =3D ...;
>   Date b =3D DateTools.stringToDate(DateTools.dateToString(a,r));
>   System.out.println("Is '"+a+"' the same as '"+b+"' with "+r+"
> resolution?");
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23271_14199949.1146104172290--

From java-user-return-20365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 05:13:10 2006
Return-Path: <java-user-return-20365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47564 invoked from network); 27 Apr 2006 05:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 05:13:10 -0000
Received: (qmail 14402 invoked by uid 500); 27 Apr 2006 05:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13945 invoked by uid 500); 27 Apr 2006 05:13:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13933 invoked by uid 99); 27 Apr 2006 05:13:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 22:13:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of pksunilpk@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO nz-out-0102.google.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Apr 2006 22:13:02 -0700
Received: by nz-out-0102.google.com with SMTP id x7so1863638nzc
        for <java-user@lucene.apache.org>; Wed, 26 Apr 2006 22:12:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BI0LozMZNSTxrJR4NyqYWyB4uyKCl6fRh2QTl5Czib/k1SprV7C8BmE9l4157EMLSrnCHOJh15NLnqz6Z9P6rYpNeOz9tNHXbxtJ4URXr6bLItrtORCoz5xecNPUE77Cq1YpMjDCplErKQaP08gAJ7YPjVitoqkeWMnJEbvqV3g=
Received: by 10.36.227.3 with SMTP id z3mr673153nzg;
        Wed, 26 Apr 2006 22:12:41 -0700 (PDT)
Received: by 10.36.79.2 with HTTP; Wed, 26 Apr 2006 22:12:41 -0700 (PDT)
Message-ID: <a9893f800604262212n31a7c4eo1c637add8ec31077@mail.gmail.com>
Date: Thu, 27 Apr 2006 10:42:41 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene search benchmark/stress test tool
In-Reply-To: <20060426163408.13426.qmail@web50304.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5377_27767557.1146114761326"
References: <20060426163408.13426.qmail@web50304.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5377_27767557.1146114761326
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have added some code in the Lucene 1.9 - source code for Lucene
RemoteParallelMultisearcher performance benchmark.

 I have recorded the time to execute the  'searchables[i].docFreq(term)' (i=
n
MultiSearcher.java) method in both client and server, and for  '
searchable.search' (in ParallelMultiSearcher.java) method also.i have also
recorded the total time taken to get hits object.

I have tested different complex boolean queries and taken the average time
for each queries.  But while doing this i am stucked with some doubts.
Please find my doubts listed below.

What I have understood from Lucene Remote Parallel Multi Searcher Search
Procedure is first compute the weight for the Query in each Index
sequentially (one by one, eg: - calculate "query weight" of index1 first an=
d
then index2) and then perform searching of each index one by one and merge
the results.

I want to know is there any possibility or method to merge the weight
calculation of index 1 and its search in a single RPC instead of doing the
both function in separate steps.

Another query I have to clear is In RemoteParallelMultiSearcher the method
"docFreq (Term term)" is not parallelized, why it is not
parallelized, and please specify any reason for that.


Regards

Sunil


On 4/26/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Hi,
>
> I'm about to write a little command-line Lucene search benchmark
> tool.  I'm interested in benchmarking search performance and the ability =
to
> specify concurrency level (# of parallel search threads) and response
> timing, so I can calculate min, max, average, and mean times.  Something
> like 'ab' (Apache Benchmark) tool, but for Lucene.
>
> Has anyone already written something like this?
>
> Thanks,
> Otis
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5377_27767557.1146114761326--

From java-user-return-20366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 08:06:27 2006
Return-Path: <java-user-return-20366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40942 invoked from network); 27 Apr 2006 08:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 08:06:17 -0000
Received: (qmail 8468 invoked by uid 500); 27 Apr 2006 08:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8430 invoked by uid 500); 27 Apr 2006 08:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8419 invoked by uid 99); 27 Apr 2006 08:06:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:06:07 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:06:06 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id JAA20479
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 09:05:48 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma020476; Thu, 27 Apr 06 09:05:45 +0100
In-Reply-To: <BFF5F6DFB538074B8A3FCD685C0DBE3601A77B67@MERC23.na.sas.com>
Subject: Re: Partial token matches
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF62CDFCA8.E199329E-ON8025715D.002B971E-8025715D.002C776A@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Thu, 27 Apr 2006 09:05:40 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 27/04/2006 09:05:40
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






Another approach maybe to use n-grams. Index each word as follows

2 gram field
in  nf  fo  or rm  ma  at

3 gram field
inf  nfo  for  orm rma  mat

4 gram field
info nfor form orm rmat

and so on.

To search for term "form" simply search the 4 gram field.

The prefix query approach may suffer from the too many clauses exception if
you have lots of words beginning with, in your exmaple, "form". The
approach above would avoid this but will obviously have a much bigger index
size.

Regards

Paul I.



                                                                           
             "Eric Isakson"                                                
             <Eric.Isakson@sas                                             
             .com>                                                      To 
                                       <java-user@lucene.apache.org>       
             26/04/2006 17:20                                           cc 
                                                                           
                                                                   Subject 
             Please respond to         Partial token matches               
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           




Hi All,

Just wanted to throw out something I'm working on. It is working well for
me, but I wanted to see if anyone can suggest any other alternatives that
might perform better than what I'm doing now.

I have a field in my index that contains keywords (back of the book index
terms) and a UI feature that allows the user to find documents that contain
a partial keyword supplied by the user. So a particular document in my
index might have the token "informat" in the keywords field and the user
may supply "form" in the UI and I should get a match.

My old implementation does not use Lucene and just uses String.matches with
a regular expression that looks like ".*form.*". I reimplemented using
Lucene and just tokenize the field so I get the tokens

informat
nformat
format
ormat
rmat
mat
at
t

Then I use a prefix query to find hits. Both implementations ignore case in
the search and the hit order is controlled by another field that I'm
sorting on, so relevance ranking is not important in this use case. Search
time performance is crucial, time to create the index and index size are
not really important. The index is created statically at application
startup or possibly delivered to the application and is not updated while
the application is using it.

Thanks for any suggestions,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 08:16:42 2006
Return-Path: <java-user-return-20367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46390 invoked from network); 27 Apr 2006 08:16:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 08:16:31 -0000
Received: (qmail 24056 invoked by uid 500); 27 Apr 2006 08:16:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24001 invoked by uid 500); 27 Apr 2006 08:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23965 invoked by uid 99); 27 Apr 2006 08:16:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:16:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.174] (HELO hnexfe08.hetnet.nl) (195.121.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:16:07 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe08.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 27 Apr 2006 10:15:44 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <OF62CDFCA8.E199329E-ON8025715D.002B971E-8025715D.002C776A@SAAConsultants.com>
References: <OF62CDFCA8.E199329E-ON8025715D.002B971E-8025715D.002C776A@SAAConsultants.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ECB5A9DC-4DE3-42EA-A1EA-4BBD8E33310C@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Partial token matches
Date: Thu, 27 Apr 2006 10:18:23 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 08:15:44.0936 (UTC) FILETIME=[C8314A80:01C669D2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 10.05 skrev Paul.Illingworth@saaconsultants.com:
>
> Another approach maybe to use n-grams.

The spell checker in contrib could probably be used as a code base  
for that.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 08:21:25 2006
Return-Path: <java-user-return-20368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49186 invoked from network); 27 Apr 2006 08:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 08:21:19 -0000
Received: (qmail 34265 invoked by uid 500); 27 Apr 2006 08:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34238 invoked by uid 500); 27 Apr 2006 08:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34227 invoked by uid 99); 27 Apr 2006 08:21:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:21:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 01:21:04 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FZ1ff-0005vl-Hs
	for java-user@lucene.apache.org; Thu, 27 Apr 2006 01:16:23 -0700
Message-ID: <4116400.post@talk.nabble.com>
Date: Thu, 27 Apr 2006 01:16:19 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: fuzzy sentence search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Is it possible to search sentences, more than one word at a time, or phrases
with fuzzy search?

I have implemented fuzzy search, if I only search one single word it works
fine, but if I start searching more than one word or a sentence it does not
find anything...strange, when I set the relevance for fuzzy search to 20% or
very low, something is found but not really that what I want...with
relevance set to 80%, nothing is found when I do fuzzy search with multiple
words...
--
View this message in context: http://www.nabble.com/fuzzy-sentence-search-t1516604.html#a4116400
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 09:23:25 2006
Return-Path: <java-user-return-20369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86067 invoked from network); 27 Apr 2006 09:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 09:23:23 -0000
Received: (qmail 31232 invoked by uid 500); 27 Apr 2006 09:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31116 invoked by uid 500); 27 Apr 2006 09:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31088 invoked by uid 99); 27 Apr 2006 09:23:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 02:23:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.176] (HELO hnexfe10.hetnet.nl) (195.121.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 02:23:08 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe10.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 27 Apr 2006 11:22:46 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <4116400.post@talk.nabble.com>
References: <4116400.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE017719-CCB9-4BEC-8E5D-F7917C65EB71@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: fuzzy sentence search
Date: Thu, 27 Apr 2006 11:25:24 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 09:22:46.0605 (UTC) FILETIME=[254B47D0:01C669DC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 10.16 skrev Fisheye:

>
> Is it possible to search sentences, more than one word at a time,  
> or phrases
> with fuzzy search?
>
> I have implemented fuzzy search, if I only search one single word  
> it works
> fine, but if I start searching more than one word or a sentence it  
> does not
> find anything...strange, when I set the relevance for fuzzy search  
> to 20% or
> very low, something is found but not really that what I want...with
> relevance set to 80%, nothing is found when I do fuzzy search with  
> multiple
> words...

I've implemented a SpanFuzzyQuery. Beware, it is really slow and  
can't be made faster. Nothing you want in the hands of the user.

http://issues.apache.org/jira/browse/LUCENE-522


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 10:45:58 2006
Return-Path: <java-user-return-20370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32628 invoked from network); 27 Apr 2006 10:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 10:45:57 -0000
Received: (qmail 68808 invoked by uid 500); 27 Apr 2006 10:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68778 invoked by uid 500); 27 Apr 2006 10:45:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68767 invoked by uid 99); 27 Apr 2006 10:45:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 03:45:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 03:45:48 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FZ3zy-00007W-SY
	for java-user@lucene.apache.org; Thu, 27 Apr 2006 03:45:26 -0700
Message-ID: <4118600.post@talk.nabble.com>
Date: Thu, 27 Apr 2006 03:45:26 -0700 (PDT)
From: Fisheye <dessan@gmx.ch>
To: java-user@lucene.apache.org
Subject: Re: fuzzy sentence search
In-Reply-To: <DE017719-CCB9-4BEC-8E5D-F7917C65EB71@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: dessan@gmx.ch
X-Nabble-From: Fisheye <dessan@gmx.ch>
References: <4116400.post@talk.nabble.com> <DE017719-CCB9-4BEC-8E5D-F7917C65EB71@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


ok, thanks for the link. I will have a look and see...but if this is really
as slow as you describe it, I probably have to accept it like it is and let
it.
--
View this message in context: http://www.nabble.com/fuzzy-sentence-search-t1516604.html#a4118600
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 11:10:45 2006
Return-Path: <java-user-return-20371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42299 invoked from network); 27 Apr 2006 11:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 11:10:44 -0000
Received: (qmail 6445 invoked by uid 500); 27 Apr 2006 11:10:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6040 invoked by uid 500); 27 Apr 2006 11:10:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6029 invoked by uid 99); 27 Apr 2006 11:10:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 04:10:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.14.176.14] (HELO klaipeda.balt.net) (195.14.176.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 04:10:36 -0700
Received: (qmail 16555 invoked from network); 27 Apr 2006 11:10:14 -0000
Received: from unknown (HELO audrius) (195.14.170.178)
  by klaipeda.balt.net with SMTP; 27 Apr 2006 11:10:14 -0000
Message-ID: <008101c669eb$3390da80$6b00a8c0@audrius>
From: "Audrius Peseckis" <audrius@ivs.lt>
To: <java-user@lucene.apache.org>
Subject: Lucene DB indexing and searching Question (1.9.1)
Date: Thu, 27 Apr 2006 14:10:31 +0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_007E_01C66A04.58076190"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_007E_01C66A04.58076190
Content-Type: text/plain;
	charset="windows-1257"
Content-Transfer-Encoding: quoted-printable

Hello,

What I'm trying to do is to index database with lucene. Each row =
returned by SQL query is represented as document, and document contains =
fields (values of columns). I'm adding those fields to document by doing =
the following:
Field fld =3D new Field("COLUMN_NAME", column.value());=20

Now when I'm trying to search the index, I only get the values of the =
column text (default field name).
Searcher searcher =3D new IndexSearcher(DIR);
QueryParser qp =3D new QueryParser("text", new StandardAnalyzer());
Query query =3D qp.parse("a*");

How to query a search engine, if I want to get results from all indexed =
fields, not only default provided?

Thanks in advance,
Audrius
------=_NextPart_000_007E_01C66A04.58076190--


From java-user-return-20372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 12:32:44 2006
Return-Path: <java-user-return-20372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91374 invoked from network); 27 Apr 2006 12:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 12:32:43 -0000
Received: (qmail 17759 invoked by uid 500); 27 Apr 2006 12:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17714 invoked by uid 500); 27 Apr 2006 12:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17701 invoked by uid 99); 27 Apr 2006 12:32:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:32:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:32:34 -0700
Received: from beetext09 ([70.81.32.231]) by VL-MO-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0IYD003JPS5QSO10@VL-MO-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Thu, 27 Apr 2006 08:32:14 -0400 (EDT)
Date: Thu, 27 Apr 2006 08:32:11 -0400
From: "Philippe Deslauriers (Beetext)" <deslauriers@beetext.com>
Subject: TermFreqVector and performance, index size
To: java-user@lucene.apache.org
Message-id: <02ed01c669f6$9b998a40$800101df@beetext09>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Mailer: Microsoft Office Outlook 11
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AcZp9f1IEludMaqJQhKM6LlI9nNfLwAAHeiA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

We are upgrading from 1.3 to 1.9.
We planned to use the Highlight package for highlighting, replacing our =
in
house highlight classes.

>From what I can read, HighLight package requires the use of the
TermFreqVector to be added to the index. I will get into the Highlight
package later, but right now I am trying to understand the =
TermFreqVector
uses and impacts.

When adding the =93content=94 field, I did a few tests with the =
different
options, to calculate the indexation time and size of the index, as we =
are
working with HUGE indexes (1Gb ++). For the test I used roughly 4500 =
random
text documents.

With lucene 1.3, time to index 2:05, index size 13.0 mb

With lucene 1.9

Field.TermVector NO=A0 (time 1m:45s, index size 7.1 mb)
Field.TermVector WITH_POSITIONS_OFFSETS =A0-> (index size 25 mb !!!, =
time
2m:45s)
Field.TermVector YES NO=A0 (time 2m:01s, index size 13.3 mb mb)

What are the OFFSETS and POSITIONS used for? Do I need it for =
Highlighting?
Can I create the TermFreqVector on the fly for a document, or do I have =
to
include them in the index?


Philippe=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 12:39:15 2006
Return-Path: <java-user-return-20373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93574 invoked from network); 27 Apr 2006 12:39:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 12:39:13 -0000
Received: (qmail 26238 invoked by uid 500); 27 Apr 2006 12:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26211 invoked by uid 500); 27 Apr 2006 12:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26200 invoked by uid 99); 27 Apr 2006 12:39:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:39:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.143.2.192] (HELO fork2.mail.virginia.edu) (128.143.2.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:39:05 -0700
Received: from localhost (localhost [127.0.0.1])
	by fork2.mail.virginia.edu (Postfix) with ESMTP id 54B571C207
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 08:38:43 -0400 (EDT)
Received: from fork2.mail.virginia.edu ([127.0.0.1])
 by localhost (fork2.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 29255-02-6 for <java-user@lucene.apache.org>;
 Thu, 27 Apr 2006 08:38:42 -0400 (EDT)
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by fork2.mail.virginia.edu (Postfix) with ESMTP id 623091C125
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 08:38:42 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <444FF210.8020901@uni-bielefeld.de>
References: <444BCBD0.3000609@uni-bielefeld.de> <444BE559.4080804@syr.edu> <444FF210.8020901@uni-bielefeld.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0A525CCD-797D-40D8-B13B-5C2ACBC35811@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to serach in sentence and dispaly the whole sentence
Date: Thu, 27 Apr 2006 08:38:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-UVA-Virus-Scanned: by amavisd-new at fork2.mail.virginia.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 26, 2006, at 6:20 PM, anton feldmann wrote:
> Are the names of a field in a document unique or can i make a field  
> with the name "sentence" for each sentence in an text document?

The names of a field in a document are unique, but you can add  
multiple instances of the same field name.  You can retrieve the  
array of them, if they are stored, as well.  You do have to be  
careful though - a phrase query can match across these field  
instances unless you specify a positional gap between them large  
enough to prevent it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 12:40:46 2006
Return-Path: <java-user-return-20374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94320 invoked from network); 27 Apr 2006 12:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 12:40:35 -0000
Received: (qmail 29488 invoked by uid 500); 27 Apr 2006 12:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29216 invoked by uid 500); 27 Apr 2006 12:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29205 invoked by uid 99); 27 Apr 2006 12:40:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:40:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 05:40:15 -0700
Received: from beetext09 ([70.81.32.231]) by VL-MH-MR002.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0IYD00ID7SIGJI40@VL-MH-MR002.ip.videotron.ca> for
 java-user@lucene.apache.org; Thu, 27 Apr 2006 08:39:52 -0400 (EDT)
Date: Thu, 27 Apr 2006 08:39:49 -0400
From: "Philippe Deslauriers (Beetext)" <deslauriers@beetext.com>
Subject: Occurence (freq) and ordering
To: java-user@lucene.apache.org
Message-id: <02ee01c669f7$ac889a70$800101df@beetext09>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Mailer: Microsoft Office Outlook 11
Content-type: multipart/alternative;
 boundary="Boundary_(ID_bDAS6VUMkr/eNOOP3q/2Tw)"
Thread-index: AcZp96xD6jqOS+5tQniJbt1zMmVhDg==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Boundary_(ID_bDAS6VUMkr/eNOOP3q/2Tw)
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT

Hi again,

 

Upgrading from lucene 1.3 to 1.9.

 

We need to order the result in order of occurrences (score of a doc = sum of
occurrences of all Query).

In lucene 1.3 we did rewrite all the Query classes (BooleanQuery,
PhraseQuery, etc..) to reach our goals, but is there an easier way to do it
in 1.9?

 

I am just starting to read on Similarity, weights etc.

 

Can someone give me a heads up?

 

Thanks!

 

Philippe Deslauriers

 


--Boundary_(ID_bDAS6VUMkr/eNOOP3q/2Tw)--

From java-user-return-20375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 15:06:15 2006
Return-Path: <java-user-return-20375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92567 invoked from network); 27 Apr 2006 15:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 15:05:44 -0000
Received: (qmail 74092 invoked by uid 500); 27 Apr 2006 15:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73867 invoked by uid 500); 27 Apr 2006 15:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73792 invoked by uid 99); 27 Apr 2006 15:05:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:05:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of anton.feldmann@uni-bielefeld.de designates 129.70.4.98 as permitted sender)
Received: from [129.70.4.98] (HELO smtp-relay2.uni-bielefeld.de) (129.70.4.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:05:08 -0700
Received: from pmxchannel-daemon.mail2.hrz.uni-bielefeld.de by
 mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 id <0IYD00801Z7Y6D@mail2.hrz.uni-bielefeld.de>; Thu,
 27 Apr 2006 17:04:47 +0200 (MEST)
Received: from salomon.dhcp.uni-bielefeld.de ([129.70.104.114])
 by mail2.hrz.uni-bielefeld.de
 (iPlanet Messaging Server 5.2 HotFix 2.09 (built Nov 18 2005))
 with ESMTPPA id <0IYD005RAZ7YV8@mail2.hrz.uni-bielefeld.de>; Thu,
 27 Apr 2006 17:04:46 +0200 (MEST)
Date: Thu, 27 Apr 2006 17:04:47 +0200
From: Anton Feldmann <anton.feldmann@uni-bielefeld.de>
Subject: lucene search sentence
To: java-dev@lucene.apache.org, java-user@lucene.apache.org
Message-id: <1146150287.10876.12.camel@salomon>
MIME-version: 1.0
X-Mailer: Evolution 2.4.0
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT
X-Spam-Level:
X-UniBi-Spam-Level: , 7%
X-UniBi-Spam-Rules: __CP_NOT_1 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0,
 __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0,
 __SANE_MSGID 0
X-UniBi-Deliver: Tag
X-UniBi-EnvFrom: anton.feldmann@uni-bielefeld.de
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.3.0.1,
 Antispam-Data: 2006.4.27.73108, vscan2.hrz.uni-bielefeld.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I wrote a Indexer which is indexing all the contents of a text and the
sentence are seperated in an other Document.

"Document document = new Document(new Field ("contents", reader ));
            
        StringTokenizer token = new StringTokenizer(contents.replaceAll(". ", "\\.x\\") , "\\.x\\");
while(token.hasMoreTokens()){
       	Document doc = new Document();
      	doc.add(new Field ("sentence", token.nextToken(),Field.Store.YES, Field.Index.TOKENIZED) );
}"

1) How do I write a Lucene Search and display all the hits in an
document?
2) How do I display the sentence the hit is in? and color the hit.
3) How do I display the sentence before and after the sentence the hit
is in?

Cherrs

anton


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 15:10:29 2006
Return-Path: <java-user-return-20376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95658 invoked from network); 27 Apr 2006 15:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 15:10:27 -0000
Received: (qmail 85990 invoked by uid 500); 27 Apr 2006 15:10:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85968 invoked by uid 500); 27 Apr 2006 15:10:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85957 invoked by uid 99); 27 Apr 2006 15:10:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:10:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:10:13 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id k3RF9pXR028038
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 08:09:51 -0700 (PDT)
Received: from [131.111.248.102] (md403.quns.cam.ac.uk [131.111.248.102])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k3RF9mal021250
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 08:09:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
Content-Transfer-Encoding: 7bit
Message-Id: <92BA9B69-C5E3-45FD-945E-C64581190D0B@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Mailing List <java-user@lucene.apache.org>
From: Michael Dodson <mgdodson@mac.com>
Subject: re: multiple indexes
Date: Thu, 27 Apr 2006 16:09:45 +0100
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know it is possible to query against multiple indexes, but is it  
possible to create a composite query in which part of the query is  
against one index and part is against another (similar to querying  
against a default and a second field)?

for example  index1:query1 AND index2:query2

I thought about querying them separately and combining the scores but  
would like to use lucene's scoring formula all the way through for  
consistency and for evaluation purposes.

Thanks,

Mike D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 15:16:42 2006
Return-Path: <java-user-return-20377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98993 invoked from network); 27 Apr 2006 15:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 15:16:33 -0000
Received: (qmail 94991 invoked by uid 500); 27 Apr 2006 15:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94959 invoked by uid 500); 27 Apr 2006 15:16:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94946 invoked by uid 99); 27 Apr 2006 15:16:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:16:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:16:25 -0700
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.152A8066@mailer.syr.edu>; Thu, 27 Apr 2006 11:16:03 -0400
Message-ID: <4450E033.3000106@syr.edu>
Date: Thu, 27 Apr 2006 11:16:03 -0400
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene search sentence
References: <1146150287.10876.12.camel@salomon>
In-Reply-To: <1146150287.10876.12.camel@salomon>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anton,

Please don't cross post "How do I..." questions to the dev list, it 
doesn't get you anywhere and just annoys those most likely to help you.

See below.

-Grant
Anton Feldmann wrote:
> Hi
>
> I wrote a Indexer which is indexing all the contents of a text and the
> sentence are seperated in an other Document.
>
> "Document document = new Document(new Field ("contents", reader ));
>             
>         StringTokenizer token = new StringTokenizer(contents.replaceAll(". ", "\\.x\\") , "\\.x\\");
> while(token.hasMoreTokens()){
>        	Document doc = new Document();
>       	doc.add(new Field ("sentence", token.nextToken(),Field.Store.YES, Field.Index.TOKENIZED) );
> }"
>
> 1) How do I write a Lucene Search and display all the hits in an
> document?
>   
SpanQuery can give you information about where matches take place.  If 
you are looking for a more basic answer, then refer to the demo on how 
to do a search that returns Hits or the well-written "Lucene In Action".

> 2) How do I display the sentence the hit is in? and color the hit.
>   
Use the Highlighter contrib package.

> 3) How do I display the sentence before and after the sentence the hit
> is in?
>   
Not sure.  You probably need some way of keeping track of where the 
sentences occur.  See my previous answer to a similar question you asked 
about how to index and search sentences.  I, personally, think you need 
to have a Document per sentence, with some metadata fields about where 
that sentence takes place, but others may have alternate ideas.  You 
_could_, instead of having each field be named "sentence", have the 
field name reflect which sentence it is, along with a catch all field, 
but this would make querying a lot harder.

> Cherrs
>
> anton
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 

Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
335 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 15:42:50 2006
Return-Path: <java-user-return-20378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18329 invoked from network); 27 Apr 2006 15:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 15:42:47 -0000
Received: (qmail 66000 invoked by uid 500); 27 Apr 2006 15:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65973 invoked by uid 500); 27 Apr 2006 15:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65961 invoked by uid 99); 27 Apr 2006 15:42:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:42:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:42:23 -0700
Received: from [128.230.38.212] (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.152A85DE@mailer.syr.edu>; Thu, 27 Apr 2006 11:42:02 -0400
Message-ID: <4450E64A.5080305@syr.edu>
Date: Thu, 27 Apr 2006 11:42:02 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5 (Windows/20060113)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene search sentence
References: <1146150287.10876.12.camel@salomon>
In-Reply-To: <1146150287.10876.12.camel@salomon>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anton Feldmann wrote:
> 3) How do I display the sentence before and after the sentence the hit
> is in?

You could:

1. Make your Lucene Document be a set of three sentences (before, 
searchable, after), which you store, but write a custom Analyzer which 
only returns tokens for the "searchable" central sentence.

2. Store the full document contents outside of Lucene, and make your 
Lucene Document be a single sentence, the tokens from which you will 
index, but also include offset and length Fields for the previous and 
next sentences with the Document, corresponding to the windows from the 
full document that you want to display with the hit.  This one will 
likely work better with the Highlighter package.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 15:55:34 2006
Return-Path: <java-user-return-20379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28072 invoked from network); 27 Apr 2006 15:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 15:55:24 -0000
Received: (qmail 98963 invoked by uid 500); 27 Apr 2006 15:55:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98940 invoked by uid 500); 27 Apr 2006 15:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98929 invoked by uid 99); 27 Apr 2006 15:55:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:55:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO nz-out-0102.google.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 08:55:16 -0700
Received: by nz-out-0102.google.com with SMTP id n29so1900830nzf
        for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 08:54:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UC8hoH9AL4nrPjT9GDaX5ba6ZSDGLB/aaIMfBBPxEWpQ9LOsEPgwEhbNJH17xA2kHYKbJZijFrcFvA5M7wTuhInUvhwVHZ6F0IkvIhszE+g5+dFTggoZ9wlQAmMtAJlgH9C14+3MmjWx1NLg0eWuQ5FG++mfxIp0sr8bpOjEvh0=
Received: by 10.65.185.9 with SMTP id m9mr799403qbp;
        Thu, 27 Apr 2006 08:54:54 -0700 (PDT)
Received: by 10.65.84.17 with HTTP; Thu, 27 Apr 2006 08:54:54 -0700 (PDT)
Message-ID: <6e3ae6310604270854j5c732f42kee180a8c76c79cd@mail.gmail.com>
Date: Thu, 27 Apr 2006 08:54:54 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene DB indexing and searching Question (1.9.1)
In-Reply-To: <008101c669eb$3390da80$6b00a8c0@audrius>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <008101c669eb$3390da80$6b00a8c0@audrius>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to use MultiFieldQueryParser

http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/MultiF=
ieldQueryParser.html

Sincerely,
Chris Lu
---------
Full-text search on Any Databases/Applications
http://www.dbsight.net


On 4/27/06, Audrius Peseckis <audrius@ivs.lt> wrote:
> Hello,
>
> What I'm trying to do is to index database with lucene. Each row returned=
 by SQL query is represented as document, and document contains fields (val=
ues of columns). I'm adding those fields to document by doing the following=
:
> Field fld =3D new Field("COLUMN_NAME", column.value());
>
> Now when I'm trying to search the index, I only get the values of the col=
umn text (default field name).
> Searcher searcher =3D new IndexSearcher(DIR);
> QueryParser qp =3D new QueryParser("text", new StandardAnalyzer());
> Query query =3D qp.parse("a*");
>
> How to query a search engine, if I want to get results from all indexed f=
ields, not only default provided?
>
> Thanks in advance,
> Audrius
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 17:07:34 2006
Return-Path: <java-user-return-20380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76588 invoked from network); 27 Apr 2006 17:07:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 17:07:32 -0000
Received: (qmail 84611 invoked by uid 500); 27 Apr 2006 17:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84483 invoked by uid 500); 27 Apr 2006 17:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84472 invoked by uid 99); 27 Apr 2006 17:07:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 10:07:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.173] (HELO hnexfe07.hetnet.nl) (195.121.6.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 10:07:22 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe07.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 27 Apr 2006 19:06:56 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <4118600.post@talk.nabble.com>
References: <4116400.post@talk.nabble.com> <DE017719-CCB9-4BEC-8E5D-F7917C65EB71@snigel.net> <4118600.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C423B147-2779-4D80-9909-DE8D7D877DDF@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: fuzzy sentence search
Date: Thu, 27 Apr 2006 19:09:33 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 17:06:56.0614 (UTC) FILETIME=[FD316860:01C66A1C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 12.45 skrev Fisheye:

>
> ok, thanks for the link. I will have a look and see...but if this  
> is really
> as slow as you describe it, I probably have to accept it like it is  
> and let
> it.

You might find this thread interesting:

http://www.nabble.com/Contextual-suggestions-t1372611.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 18:08:42 2006
Return-Path: <java-user-return-20381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10323 invoked from network); 27 Apr 2006 18:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 18:08:42 -0000
Received: (qmail 35691 invoked by uid 500); 27 Apr 2006 18:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35663 invoked by uid 500); 27 Apr 2006 18:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35652 invoked by uid 99); 27 Apr 2006 18:08:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:08:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:08:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DCF5D5B766; Thu, 27 Apr 2006 11:08:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D85817F403
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 11:08:13 -0700 (PDT)
Date: Thu, 27 Apr 2006 11:08:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene DB indexing and searching Question (1.9.1)
In-Reply-To: <6e3ae6310604270854j5c732f42kee180a8c76c79cd@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0604271106180.31055@hal.rescomp.berkeley.edu>
References: <008101c669eb$3390da80$6b00a8c0@audrius>
 <6e3ae6310604270854j5c732f42kee180a8c76c79cd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: You need to use MultiFieldQueryParser
:
: http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/MultiFieldQueryParser.html

or put the text from all of your fields into one uber catchall field and
make that the default...

  foreach (column) {
     Field f = new Field(column.name, column.value);
     Field c = new Field("catchall", column.value);
     doc.add(f);
     doc.add(c);
  }



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 18:14:49 2006
Return-Path: <java-user-return-20382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12846 invoked from network); 27 Apr 2006 18:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 18:14:49 -0000
Received: (qmail 44717 invoked by uid 500); 27 Apr 2006 18:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44678 invoked by uid 500); 27 Apr 2006 18:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44666 invoked by uid 99); 27 Apr 2006 18:14:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:14:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:14:41 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5286E5B773; Thu, 27 Apr 2006 11:14:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4D66D7F403
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 11:14:21 -0700 (PDT)
Date: Thu, 27 Apr 2006 11:14:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: re: multiple indexes
In-Reply-To: <92BA9B69-C5E3-45FD-945E-C64581190D0B@mac.com>
Message-ID: <Pine.LNX.4.58.0604271111260.31055@hal.rescomp.berkeley.edu>
References: <92BA9B69-C5E3-45FD-945E-C64581190D0B@mac.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


can you provide a little more clarification as to what it is you are
trying to achieve (not just the way you hope to achieve it)

Specificly: I can't make sense of what you would expect to get back with a
query like this...

    index1:query1 AND index2:query2

...traditionally, a query for "A and B" means that only documents qhich
match both clause A and clause B can be returned, but if you are
suggesting that clause A would only be searched against index1, and clause
B would only be searched against index2, then how could any document match
your resulting query?

: I know it is possible to query against multiple indexes, but is it
: possible to create a composite query in which part of the query is
: against one index and part is against another (similar to querying
: against a default and a second field)?
:
: for example  index1:query1 AND index2:query2
:
: I thought about querying them separately and combining the scores but
: would like to use lucene's scoring formula all the way through for
: consistency and for evaluation purposes.
:
: Thanks,
:
: Mike D



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 18:21:56 2006
Return-Path: <java-user-return-20383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18556 invoked from network); 27 Apr 2006 18:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 18:21:55 -0000
Received: (qmail 71539 invoked by uid 500); 27 Apr 2006 18:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71488 invoked by uid 500); 27 Apr 2006 18:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71460 invoked by uid 99); 27 Apr 2006 18:21:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:21:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:21:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 657BA5B773; Thu, 27 Apr 2006 11:21:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5AD147F403
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 11:21:19 -0700 (PDT)
Date: Thu, 27 Apr 2006 11:21:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Occurence (freq) and ordering
In-Reply-To: <02ee01c669f7$ac889a70$800101df@beetext09>
Message-ID: <Pine.LNX.4.58.0604271115110.31055@hal.rescomp.berkeley.edu>
References: <02ee01c669f7$ac889a70$800101df@beetext09>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Upgrading from lucene 1.3 to 1.9.

: We need to order the result in order of occurrences (score of a doc = sum of
: occurrences of all Query).

: I am just starting to read on Similarity, weights etc.

You are definitely on the right track with Similarity.  What you want is a
Similarity implimentation where the values returned by most methods are
either 0 or 1, except for the tf(int) and tf(float) which should be an
identify function.

If you *allways* want *every* query to work this way, then you may also
want to look at using the new Field.setOmitNorms(true) option when you
index your documents.  It not only removes the lengthNorm from the scoring
equation, but it can help to reduce the size of your index (which i seem
to recall you were concerned with an another thread)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 18:45:40 2006
Return-Path: <java-user-return-20384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29797 invoked from network); 27 Apr 2006 18:45:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 18:45:39 -0000
Received: (qmail 9503 invoked by uid 500); 27 Apr 2006 18:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9477 invoked by uid 500); 27 Apr 2006 18:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9466 invoked by uid 99); 27 Apr 2006 18:45:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:45:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: error (asf.osuosl.org: local policy)
Received: from [63.240.77.81] (HELO sccrmhc11.comcast.net) (63.240.77.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 11:45:32 -0700
Received: from jean (c-24-4-71-167.hsd1.ca.comcast.net[24.4.71.167])
          by comcast.net (sccrmhc11) with SMTP
          id <2006042718445001100r515fe>; Thu, 27 Apr 2006 18:44:51 +0000
Reply-To: <jean@activeweave.com>
From: "Jean Sini" <jean@activeweave.com>
To: <java-user@lucene.apache.org>
Subject: Efficiently paginating results.
Date: Thu, 27 Apr 2006 11:44:44 -0700
Organization: Activeweave Inc.
Message-ID: <008501c66a2a$a767b480$6700a8c0@Jean>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0086_01C669EF.FB08DC80"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcZqKqZmk3ZMG558SsyOQjLUhbK8wg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0086_01C669EF.FB08DC80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

Our application presents search results in a paginated form.

We were unable to find Searcher methods that would return, say, 'n'
(typically, 10) hits after a start offset 'k'.

So we're currently using the Hits collection returned by Searcher.search,
and using its Hits.doc(i) method to get the ith hit, with i between k and
k+n. Is that the most efficient way to do that? Is there a better way (e.g.
some form of Filter on the query itself)? 

Thanks,

Jean

 

 

 


------=_NextPart_000_0086_01C669EF.FB08DC80--


From java-user-return-20385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 19:07:22 2006
Return-Path: <java-user-return-20385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45293 invoked from network); 27 Apr 2006 19:07:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 19:07:22 -0000
Received: (qmail 71121 invoked by uid 500); 27 Apr 2006 19:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71070 invoked by uid 500); 27 Apr 2006 19:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71041 invoked by uid 99); 27 Apr 2006 19:07:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 12:07:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.177] (HELO hnexfe11.hetnet.nl) (195.121.6.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 12:07:17 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe11.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Thu, 27 Apr 2006 21:06:53 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <008501c66a2a$a767b480$6700a8c0@Jean>
References: <008501c66a2a$a767b480$6700a8c0@Jean>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6593229B-2F14-46A7-A3E6-C76E6C487F15@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Efficiently paginating results.
Date: Thu, 27 Apr 2006 21:09:28 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 19:06:53.0441 (UTC) FILETIME=[BED60F10:01C66A2D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 20.44 skrev Jean Sini:
> Our application presents search results in a paginated form.
>
> We were unable to find Searcher methods that would return, say, 'n'
> (typically, 10) hits after a start offset 'k'.
>
> So we're currently using the Hits collection returned by  
> Searcher.search,
> and using its Hits.doc(i) method to get the ith hit, with i between  
> k and
> k+n. Is that the most efficient way to do that? Is there a better  
> way (e.g.
> some form of Filter on the query itself)?

You probably want to do it just the way you do.

But cache the Hits somehow. Perhaps in a session, perhaps globally  
in  /your/ searcher. Perhaps the session points at the global cache  
so it doesn't change within a session when you flush the cache on  
index update.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 19:09:19 2006
Return-Path: <java-user-return-20386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46409 invoked from network); 27 Apr 2006 19:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 19:09:18 -0000
Received: (qmail 78616 invoked by uid 500); 27 Apr 2006 19:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78590 invoked by uid 500); 27 Apr 2006 19:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78579 invoked by uid 99); 27 Apr 2006 19:09:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 12:09:11 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO pproxy.gmail.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 12:09:10 -0700
Received: by pproxy.gmail.com with SMTP id m51so2924518pye
        for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 12:08:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nVw+Ej7xIAuEeBNpTpSthmIySBJiIoNnT7hfQnnGEsOt8LF0EArhnLZzjTJb/JCxPHD3IKsPaJ0ZDnovIBvbJVgps4H6Q+sG728ShIRGiEswJNlPNEIT6Lp8M/v6B0FKNjChAy712EdnNtmaKLttzoZVk8Y1vdCS+fcp74CturI=
Received: by 10.35.15.11 with SMTP id s11mr2619129pyi;
        Thu, 27 Apr 2006 12:08:45 -0700 (PDT)
Received: by 10.35.107.3 with HTTP; Thu, 27 Apr 2006 12:08:45 -0700 (PDT)
Message-ID: <c68e39170604271208w47da2e20q3140ee23cbade685@mail.gmail.com>
Date: Thu, 27 Apr 2006 15:08:45 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org, jean@activeweave.com
Subject: Re: Efficiently paginating results.
In-Reply-To: <008501c66a2a$a767b480$6700a8c0@Jean>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <008501c66a2a$a767b480$6700a8c0@Jean>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 4/27/06, Jean Sini <jean@activeweave.com> wrote:
> We were unable to find Searcher methods that would return, say, 'n'
> (typically, 10) hits after a start offset 'k'.

Yes, that's because to find results k through k+n, Lucene must first
find results 0 through k+n.

> So we're currently using the Hits collection returned by Searcher.search,
> and using its Hits.doc(i) method to get the ith hit, with i between k and
> k+n. Is that the most efficient way to do that?

You can use the lower level search functions that return TopDocs or
TopFieldDocs to get more explicit control over "n", when you search
for the top "n" documents.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 20:09:41 2006
Return-Path: <java-user-return-20387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84896 invoked from network); 27 Apr 2006 20:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 20:09:41 -0000
Received: (qmail 82256 invoked by uid 500); 27 Apr 2006 20:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82212 invoked by uid 500); 27 Apr 2006 20:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82195 invoked by uid 99); 27 Apr 2006 20:09:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 13:09:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 13:09:31 -0700
Received: (qmail 3134 invoked from network); 27 Apr 2006 20:09:08 -0000
Received: from unknown (HELO p5496df52.dip.t-dialin.net) ([pbs]695637@[84.150.223.82])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 27 Apr 2006 20:09:08 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: TermFreqVector and performance, index size
Date: Thu, 27 Apr 2006 22:10:45 +0200
User-Agent: KMail/1.8.2
References: <02ed01c669f6$9b998a40$800101df@beetext09>
In-Reply-To: <02ed01c669f6$9b998a40$800101df@beetext09>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200604272210.45914@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Donnerstag 27 April 2006 14:32, Philippe Deslauriers (Beetext) wrote:

> What are the OFFSETS and POSITIONS used for? Do I need it for
> Highlighting?

No, you can provide an analyzer to Highlight.getBestFragment() and it will 
re-analyze your text without the need for term vectors.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 21:40:10 2006
Return-Path: <java-user-return-20388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33992 invoked from network); 27 Apr 2006 21:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 21:40:09 -0000
Received: (qmail 34081 invoked by uid 500); 27 Apr 2006 21:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34041 invoked by uid 500); 27 Apr 2006 21:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34029 invoked by uid 99); 27 Apr 2006 21:40:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 14:40:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.200.82] (HELO sccrmhc12.comcast.net) (204.127.200.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 14:40:01 -0700
Received: from jean (c-24-4-71-167.hsd1.ca.comcast.net[24.4.71.167])
          by comcast.net (sccrmhc12) with SMTP
          id <2006042721393901200mg39re>; Thu, 27 Apr 2006 21:39:39 +0000
Reply-To: <jean@activeweave.com>
From: "Jean Sini" <jean@activeweave.com>
To: <java-user@lucene.apache.org>
Subject: RE: Efficiently paginating results.
Date: Thu, 27 Apr 2006 14:39:32 -0700
Organization: Activeweave Inc.
Message-ID: <00eb01c66a43$12bd8080$6700a8c0@Jean>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcZqMpGUwwkbwvBQRampeRWej0YikwAD2SNg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <6593229B-2F14-46A7-A3E6-C76E6C487F15@snigel.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.
One of the trade-offs we are considering, along the lines of what you
mentioned, has to do with whether or not to cache the Hits. The benefit
being that we'd avoid re-running the search if requests for hits past the
first page do come in, the cost being that we'd have to keep around all the
hits, that are unlikely to be requested.
So far, we have been leaning toward a stateless approach: we are re-running
the search with no prior knowledge of whether or not it ran before, and
serving up the hits at the requested offset. I could see caching a fixed
list of search results, and only re-running the search if it has been
evicted from that cache.
Jean 

-----Original Message-----
From: karl wettin [mailto:kalle@snigel.net] 
Sent: Thursday, April 27, 2006 12:09 PM
To: java-user@lucene.apache.org
Subject: Re: Efficiently paginating results.


27 apr 2006 kl. 20.44 skrev Jean Sini:
> Our application presents search results in a paginated form.
>
> We were unable to find Searcher methods that would return, say, 'n'
> (typically, 10) hits after a start offset 'k'.
>
> So we're currently using the Hits collection returned by  
> Searcher.search,
> and using its Hits.doc(i) method to get the ith hit, with i between  
> k and
> k+n. Is that the most efficient way to do that? Is there a better  
> way (e.g.
> some form of Filter on the query itself)?

You probably want to do it just the way you do.

But cache the Hits somehow. Perhaps in a session, perhaps globally  
in  /your/ searcher. Perhaps the session points at the global cache  
so it doesn't change within a session when you flush the cache on  
index update.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 21:55:07 2006
Return-Path: <java-user-return-20389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40199 invoked from network); 27 Apr 2006 21:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 21:55:06 -0000
Received: (qmail 60392 invoked by uid 500); 27 Apr 2006 21:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60364 invoked by uid 500); 27 Apr 2006 21:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60353 invoked by uid 99); 27 Apr 2006 21:55:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 14:55:00 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 14:54:58 -0700
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net [207.115.4.147])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3RLsRbL017544
	for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 17:54:27 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout7-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3RLsZXs096748;
	Thu, 27 Apr 2006 17:54:36 -0400
Message-ID: <44513D9A.7070507@apache.org>
Date: Thu, 27 Apr 2006 14:54:34 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search benchmark/stress test tool
References: <20060426163408.13426.qmail@web50304.mail.yahoo.com> <a9893f800604262212n31a7c4eo1c637add8ec31077@mail.gmail.com>
In-Reply-To: <a9893f800604262212n31a7c4eo1c637add8ec31077@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sunil Kumar PK wrote:
> I want to know is there any possibility or method to merge the weight
> calculation of index 1 and its search in a single RPC instead of doing the
> both function in separate steps.

To score correctly, weights from all indexes must be created before any 
can be searched.  This is to compute a global IDF used in all searches.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 27 22:57:28 2006
Return-Path: <java-user-return-20390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68661 invoked from network); 27 Apr 2006 22:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Apr 2006 22:57:27 -0000
Received: (qmail 58097 invoked by uid 500); 27 Apr 2006 22:57:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57939 invoked by uid 500); 27 Apr 2006 22:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57927 invoked by uid 99); 27 Apr 2006 22:57:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 15:57:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.121.6.175] (HELO hnexfe09.hetnet.nl) (195.121.6.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 15:57:19 -0700
Received: from [192.168.0.100] ([86.85.154.64]) by hnexfe09.hetnet.nl with Microsoft SMTPSVC(5.0.2195.6874);
	 Fri, 28 Apr 2006 00:56:30 +0200
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <00eb01c66a43$12bd8080$6700a8c0@Jean>
References: <00eb01c66a43$12bd8080$6700a8c0@Jean>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DD6C34CF-09E7-4BD2-8F95-0831CF7A9765@snigel.net>
Content-Transfer-Encoding: 7bit
From: karl wettin <kalle@snigel.net>
Subject: Re: Efficiently paginating results.
Date: Fri, 28 Apr 2006 00:58:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-OriginalArrivalTime: 27 Apr 2006 22:56:31.0525 (UTC) FILETIME=[D336D550:01C66A4D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


27 apr 2006 kl. 23.39 skrev Jean Sini:
>> 27 apr 2006 kl. 20.44 skrev Jean Sini:
>>> Our application presents search results in a paginated form.
>>>
>>> We were unable to find Searcher methods that would return, say, 'n'
>>> (typically, 10) hits after a start offset 'k'.
>>>
>>> So we're currently using the Hits collection returned by
>>> Searcher.search and using its Hits.doc(i) method to get the hit
>>
>> You probably want to do it just the way you do.
>>
>> But cache the Hits somehow.

> One of the trade-offs we are considering, along the lines of what you
> mentioned, has to do with whether or not to cache the Hits. The  
> benefit
> being that we'd avoid re-running the search if requests for hits  
> past the
> first page do come in, the cost being that we'd have to keep around  
> all the
> hits, that are unlikely to be requested.

Have you done any tests to compare? In one case I keep about 20 000  
Hits (10 minutes) in cache until it is flushed. About 60% of the  
results are fetched from the cache. The processor goes from 10% to  
80% idle. It consumes virtually no memory.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 05:55:22 2006
Return-Path: <java-user-return-20391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32572 invoked from network); 28 Apr 2006 05:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 05:55:22 -0000
Received: (qmail 54116 invoked by uid 500); 28 Apr 2006 05:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53957 invoked by uid 500); 28 Apr 2006 05:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53944 invoked by uid 99); 28 Apr 2006 05:55:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 22:55:13 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Apr 2006 22:55:13 -0700
Received: by xproxy.gmail.com with SMTP id i26so2166973wxd
        for <java-user@lucene.apache.org>; Thu, 27 Apr 2006 22:54:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ouPtswalIHPltTEfVv3OaNabOQFejPA0NYJBjZH50C67ahFATVTW+hJjYFoeHi9qXUK4TIponNT33BKh1Hjz10og2LEtbpbIpNQERvS6953dAy+aQoxIW0mGQg7gjEHSxo8mpjFYHof6KE2D4yJNFQzZr4WcC/uvJ68RRnCHlEk=
Received: by 10.70.50.1 with SMTP id x1mr1499922wxx;
        Thu, 27 Apr 2006 22:54:51 -0700 (PDT)
Received: by 10.70.38.2 with HTTP; Thu, 27 Apr 2006 22:54:51 -0700 (PDT)
Message-ID: <277d4c5d0604272254m70fe2551o435dc5217e671442@mail.gmail.com>
Date: Fri, 28 Apr 2006 13:54:51 +0800
From: jason <gingerons@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: for the similarity measure
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41553_27873701.1146203691399"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_41553_27873701.1146203691399
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

After reading the code, I found the similarity measure in Lucene is not the
same as the cosine coefficient measure commonly used. I dont know it is
correct. And I wonder whether i can use the cosine coefficient measure in
lucene or maybe the Dice's coefficient, Jaccard's coefficient and overlap
coefficient measure.

------=_Part_41553_27873701.1146203691399--

From java-user-return-20392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 09:36:25 2006
Return-Path: <java-user-return-20392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35645 invoked from network); 28 Apr 2006 09:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 09:36:21 -0000
Received: (qmail 94997 invoked by uid 500); 28 Apr 2006 09:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94944 invoked by uid 500); 28 Apr 2006 09:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94928 invoked by uid 99); 28 Apr 2006 09:36:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 02:36:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 02:36:08 -0700
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k3S9ZXKe017396
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 11:35:33 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.385 [268.5.1/326]); Fri, 28 Apr 2006 11:35:29 +0200
Message-ID: <4451E1E1.9030902@isb-sib.ch>
Date: Fri, 28 Apr 2006 11:35:29 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Preventing phrase queries from matching across lines
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What is the best way to prevent a phrase query such as "eggs white" 
matching "fried eggs\nwhite snow"?

Two possibilities I have thought about:

1. Replace all line breaks with a special string, e.g. "newline".
2. Have an analyzer somehow increment the position of a term for each line 
break it encounters.

Latter seems a bit more complicated to implement, but it would also be more 
efficient, right? Or are there better options?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 09:57:57 2006
Return-Path: <java-user-return-20393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45698 invoked from network); 28 Apr 2006 09:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 09:57:42 -0000
Received: (qmail 25816 invoked by uid 500); 28 Apr 2006 09:57:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25784 invoked by uid 500); 28 Apr 2006 09:57:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25773 invoked by uid 99); 28 Apr 2006 09:57:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 02:57:20 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wproxy.gmail.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 02:57:20 -0700
Received: by wproxy.gmail.com with SMTP id i30so1753992wra
        for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 02:56:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=fikKA/X8oLKDOpI7XCNKhP14JxIbzFMWMdklgd0wsfax/EgoZspvoJh6hEeAZSXlMH2z+6pTL63fqJxQK3ftsdH3MqtH96tjoI0BSUr8wvs18T55ELZUkqRvG0FFobvi63VNer7UAdxQrG9l5KANkkkzm+fTax4Um1dDwueKt8U=
Received: by 10.64.251.17 with SMTP id y17mr6164649qbh;
        Fri, 28 Apr 2006 02:56:59 -0700 (PDT)
Received: by 10.64.151.11 with HTTP; Fri, 28 Apr 2006 02:56:59 -0700 (PDT)
Message-ID: <4f2c7c9b0604280256k7c733d78i6b02eb23e593cd58@mail.gmail.com>
Date: Fri, 28 Apr 2006 17:56:59 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Ask for a better solution for the case
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44281_5023398.1146218219582"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44281_5023398.1146218219582
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, I hava an application that need mark the retrieved documents  which hav=
e
been read. So the next time I needn't read the marked documents again.

    I have an idea  that adding a particular field into the indexed
document. But as lucene have no update method, I have to delete that
document, and add it again.  I think it seems a little stupid. Or I can use
a database to satisfy the mark requirement, but how does the database relat=
e
to lucene index, especially when i want to retrieve document that I have
read? Maybe there is a better idea.

    Any suggestion will be greatly appreciated.

------=_Part_44281_5023398.1146218219582--

From java-user-return-20394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 10:40:55 2006
Return-Path: <java-user-return-20394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66432 invoked from network); 28 Apr 2006 10:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 10:40:11 -0000
Received: (qmail 82492 invoked by uid 500); 28 Apr 2006 10:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82386 invoked by uid 500); 28 Apr 2006 10:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82352 invoked by uid 99); 28 Apr 2006 10:39:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 03:39:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.167.1.4] (HELO marmot.shef.ac.uk) (143.167.1.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 03:39:53 -0700
Received: from drake.shef.ac.uk ([143.167.2.64])
	by marmot.shef.ac.uk with esmtp (Exim 4.52)
	id 1FZQNo-000369-1d
	for java-user@lucene.apache.org; Fri, 28 Apr 2006 11:39:32 +0100
Received: from http by drake.shef.ac.uk with local (Exim 4.42)
	id 1FZQNn-0003cU-Vf
	for java-user@lucene.apache.org; Fri, 28 Apr 2006 11:39:31 +0100
Received: from drake.shef.ac.uk (drake.shef.ac.uk [143.167.2.64]) 
	by 143.167.2.64 (IMP) with HTTP 
	for <acp05tm@localhost>; Fri, 28 Apr 2006 11:39:31 +0100
Message-ID: <1146220771.4451f0e3e5865@webmail.shef.ac.uk>
Date: Fri, 28 Apr 2006 11:39:31 +0100
From: trupti mulajkar <acp05tm@sheffield.ac.uk>
To: java-user@lucene.apache.org
Subject: Vector space model
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
Organization: University of Sheffield
X-Originating-IP: 143.167.2.64
X-S0phie-Scan: no
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi

i am trying to implement the vector space model for lucene.
i did find some code for generating the vectors, but can any1 suggest a better
way of creating the IndexReader object as it is the only way that can return
the index created.

cheers,
trupti mulajkar
MSc Advanced Computer Science




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 10:47:28 2006
Return-Path: <java-user-return-20395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70573 invoked from network); 28 Apr 2006 10:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 10:47:28 -0000
Received: (qmail 91645 invoked by uid 500); 28 Apr 2006 10:47:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91616 invoked by uid 500); 28 Apr 2006 10:47:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91605 invoked by uid 99); 28 Apr 2006 10:47:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 03:47:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gingerons@gmail.com designates 66.249.82.202 as permitted sender)
Received: from [66.249.82.202] (HELO xproxy.gmail.com) (66.249.82.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 03:47:21 -0700
Received: by xproxy.gmail.com with SMTP id i26so2196388wxd
        for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 03:47:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZnqYGwi3U4UeESQHcKeBpE4GHkNvZMKkoGobL2qjZjAf/YUyabEqFfQy46Z+VGd+WKaZbej/KNvIR+Zkdzhts1wzJnejJUF9vPVZO70Nil5G1QP85xs6RV8ZWDQVao43QPPCCy8DqL+z7f/+OMYAGkSBDXGfiLNNozIQEPW2rpY=
Received: by 10.70.46.20 with SMTP id t20mr2601494wxt;
        Fri, 28 Apr 2006 03:47:01 -0700 (PDT)
Received: by 10.70.38.2 with HTTP; Fri, 28 Apr 2006 03:47:01 -0700 (PDT)
Message-ID: <277d4c5d0604280347q7fc16f29n5a8cce6259007b26@mail.gmail.com>
Date: Fri, 28 Apr 2006 18:47:01 +0800
From: jason <gingerons@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Vector space model
In-Reply-To: <1146220771.4451f0e3e5865@webmail.shef.ac.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_233_28681320.1146221221086"
References: <1146220771.4451f0e3e5865@webmail.shef.ac.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_233_28681320.1146221221086
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I am also interested in this problem.

Regards
Jason

On 4/28/06, trupti mulajkar <acp05tm@sheffield.ac.uk> wrote:
>
> hi
>
> i am trying to implement the vector space model for lucene.
> i did find some code for generating the vectors, but can any1 suggest a
> better
> way of creating the IndexReader object as it is the only way that can
> return
> the index created.
>
> cheers,
> trupti mulajkar
> MSc Advanced Computer Science
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_233_28681320.1146221221086--

From java-user-return-20396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 14:37:08 2006
Return-Path: <java-user-return-20396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2899 invoked from network); 28 Apr 2006 14:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 14:36:40 -0000
Received: (qmail 2983 invoked by uid 500); 28 Apr 2006 14:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2947 invoked by uid 500); 28 Apr 2006 14:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2936 invoked by uid 99); 28 Apr 2006 14:36:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:36:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO pproxy.gmail.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:36:30 -0700
Received: by pproxy.gmail.com with SMTP id m51so3189738pye
        for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 07:36:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tNJ2riOLOHn6ued7NI+xDFBeco1PvaREyKWYJzZeu6nen8UOa2E0uA2Pnhx44xrQjnLOn4AnILUg0lCcm0QBFjsPekF1KIMYj3vWgc/F7Gw4Dy4IaXEXO955b5SwZoV3KB/8UKl9gTHt8JvZRZ2D3Vz8p5vSnGPl8Qk7/AU7z8U=
Received: by 10.35.111.7 with SMTP id o7mr870075pym;
        Fri, 28 Apr 2006 07:36:09 -0700 (PDT)
Received: by 10.35.17.5 with HTTP; Fri, 28 Apr 2006 07:36:09 -0700 (PDT)
Message-ID: <359a92830604280736q4626d6a2p173c5d05c80b471a@mail.gmail.com>
Date: Fri, 28 Apr 2006 10:36:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ask for a better solution for the case
In-Reply-To: <4f2c7c9b0604280256k7c733d78i6b02eb23e593cd58@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9602_8279460.1146234969434"
References: <4f2c7c9b0604280256k7c733d78i6b02eb23e593cd58@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9602_8279460.1146234969434
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

This one's fairly wild, I'm interested to see what the gurus think...

You could create a bitset and mark each document retrieved by the
appropriate bit position (using the Lucene document id). Persist this bitse=
t
(assuming you need it across sessions). Be careful, I wouldn't persist it
via the toString(), persist it as a binary entity. It depends on how many
docs we're talking about I guess....

Anyway, let's say you have accumulated one of these. Create a filter with
the XOR of the persisted bitset, and pass that filter on to subsequent
searches...... When the search comes back, set the bits in your (persisted)
bitset and save it away. Repeat as needed....

I have no idea if this would help in your particular situation... And, any
time your index changed, any persisted bitsets would be invalid.

Anyway, it may even work. See the Filters in Lucene for what filters are al=
l
about.

Erick

------=_Part_9602_8279460.1146234969434--

From java-user-return-20397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 14:41:21 2006
Return-Path: <java-user-return-20397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5717 invoked from network); 28 Apr 2006 14:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 14:41:12 -0000
Received: (qmail 13020 invoked by uid 500); 28 Apr 2006 14:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12988 invoked by uid 500); 28 Apr 2006 14:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12975 invoked by uid 99); 28 Apr 2006 14:41:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:41:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.24] (HELO web36607.mail.mud.yahoo.com) (209.191.85.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Apr 2006 07:41:03 -0700
Received: (qmail 41442 invoked by uid 60001); 28 Apr 2006 14:40:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1Ct20AqE7ZRv19k/2YaQdUEBScmkPv9I5f9XDPab+IXJAm8/ysRVBkrFhbPha0MtXxcogtV82eVpVrijbrIvGJWiD+/HO2hsZzztihqlIsFqGbNS2Ow5zaq7HzPpGAIsNTiVseHQ0XW06YwvRBPW+Vvu/PvY/6TeSjeGlapu/x0=  ;
Message-ID: <20060428144039.41440.qmail@web36607.mail.mud.yahoo.com>
Received: from [193.130.68.19] by web36607.mail.mud.yahoo.com via HTTP; Fri, 28 Apr 2006 15:40:39 BST
Date: Fri, 28 Apr 2006 15:40:39 +0100 (BST)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: Re: Efficiently paginating results.
To: java-user@lucene.apache.org
In-Reply-To: <6593229B-2F14-46A7-A3E6-C76E6C487F15@snigel.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I read somewhere recently (maybe even on this list) a
recommendation to requery each time for successive
pages as this avoids some of the complexity involved
in session management. Whats peoples view of this?

Marc


--- karl wettin <kalle@snigel.net> wrote:

> 
> 27 apr 2006 kl. 20.44 skrev Jean Sini:
> > Our application presents search results in a
> paginated form.
> >
> > We were unable to find Searcher methods that would
> return, say, 'n'
> > (typically, 10) hits after a start offset 'k'.
> >
> > So we're currently using the Hits collection
> returned by  
> > Searcher.search,
> > and using its Hits.doc(i) method to get the ith
> hit, with i between  
> > k and
> > k+n. Is that the most efficient way to do that? Is
> there a better  
> > way (e.g.
> > some form of Filter on the query itself)?
> 
> You probably want to do it just the way you do.
> 
> But cache the Hits somehow. Perhaps in a session,
> perhaps globally  
> in  /your/ searcher. Perhaps the session points at
> the global cache  
> so it doesn't change within a session when you flush
> the cache on  
> index update.
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
___________________________________________________________ 
Yahoo! Photos  NEW, now offering a quality print service from just 7p a photo http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 14:48:22 2006
Return-Path: <java-user-return-20398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9109 invoked from network); 28 Apr 2006 14:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 14:48:18 -0000
Received: (qmail 20792 invoked by uid 500); 28 Apr 2006 14:48:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20768 invoked by uid 500); 28 Apr 2006 14:48:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20747 invoked by uid 99); 28 Apr 2006 14:48:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:48:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.177] (HELO moutng.kundenserver.de) (212.227.126.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:48:11 -0700
Received: from [84.131.40.234] (helo=[192.168.115.23])
	by mrelayeu.kundenserver.de (node=mrelayeu9) with ESMTP (Nemesis),
	id 0ML2xA-1FZUG510U8-0000ea; Fri, 28 Apr 2006 16:47:49 +0200
Message-ID: <44522A4D.1090505@rc.ag>
Date: Fri, 28 Apr 2006 16:44:29 +0200
From: Hannes Carl Meyer <developers@rc.ag>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Efficiently paginating results.
References: <20060428144039.41440.qmail@web36607.mail.mud.yahoo.com>
In-Reply-To: <20060428144039.41440.qmail@web36607.mail.mud.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Marc,

I'm using this method for a web-application. I'm storing only the 
current viewable set of documents in the session and re-query if the user
scrolls to the next page. This method is pretty fast and has a minimal 
session- and processing-footprint. But, if your index is changed during
scrolling and that affects the query and you're re-querying, you will 
maybe get confused about new docs :-)

Hannes

Marc Dauncey schrieb:
> I read somewhere recently (maybe even on this list) a
> recommendation to requery each time for successive
> pages as this avoids some of the complexity involved
> in session management. Whats peoples view of this?
>
> Marc
>
>
> --- karl wettin <kalle@snigel.net> wrote:
>
>   
>> 27 apr 2006 kl. 20.44 skrev Jean Sini:
>>     
>>> Our application presents search results in a
>>>       
>> paginated form.
>>     
>>> We were unable to find Searcher methods that would
>>>       
>> return, say, 'n'
>>     
>>> (typically, 10) hits after a start offset 'k'.
>>>
>>> So we're currently using the Hits collection
>>>       
>> returned by  
>>     
>>> Searcher.search,
>>> and using its Hits.doc(i) method to get the ith
>>>       
>> hit, with i between  
>>     
>>> k and
>>> k+n. Is that the most efficient way to do that? Is
>>>       
>> there a better  
>>     
>>> way (e.g.
>>> some form of Filter on the query itself)?
>>>       
>> You probably want to do it just the way you do.
>>
>> But cache the Hits somehow. Perhaps in a session,
>> perhaps globally  
>> in  /your/ searcher. Perhaps the session points at
>> the global cache  
>> so it doesn't change within a session when you flush
>> the cache on  
>> index update.
>>
>>
>>     
> ---------------------------------------------------------------------
>   
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
> 		
> ___________________________________________________________ 
> Yahoo! Photos  NEW, now offering a quality print service from just 7p a photo http://uk.photos.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 14:55:21 2006
Return-Path: <java-user-return-20399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12953 invoked from network); 28 Apr 2006 14:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 14:55:21 -0000
Received: (qmail 33781 invoked by uid 500); 28 Apr 2006 14:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33524 invoked by uid 500); 28 Apr 2006 14:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33513 invoked by uid 99); 28 Apr 2006 14:55:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:55:14 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.20] (HELO web36603.mail.mud.yahoo.com) (209.191.85.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Apr 2006 07:55:13 -0700
Received: (qmail 17242 invoked by uid 60001); 28 Apr 2006 14:54:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KVxdG1pT00iQbX/+9LUmyVfiLGe8GTVtqfY+/DmF0vMhrbQXwSzHkwXMwl79PvxnhENNu0sODjUr8v79LVMxhRYKaYIuwU9kXcoVkz6IFu68f14/1gJ0S1B2TLZXT6hWhRI9mn+s9In34phyPNz3R3PcnXRenHxUNnN66vFXkMc=  ;
Message-ID: <20060428145449.17240.qmail@web36603.mail.mud.yahoo.com>
Received: from [193.130.68.19] by web36603.mail.mud.yahoo.com via HTTP; Fri, 28 Apr 2006 15:54:49 BST
Date: Fri, 28 Apr 2006 15:54:49 +0100 (BST)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: Re: Efficiently paginating results.
To: java-user@lucene.apache.org
In-Reply-To: <44522A4D.1090505@rc.ag>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, I was thinking about index updates. 

Getting a different result set when you go back to a
previous page might be an issue -   could always cache
each page as its opened rather than the entire result
set.  



--- Hannes Carl Meyer <developers@rc.ag> wrote:

> Hi Marc,
> 
> I'm using this method for a web-application. I'm
> storing only the 
> current viewable set of documents in the session and
> re-query if the user
> scrolls to the next page. This method is pretty fast
> and has a minimal 
> session- and processing-footprint. But, if your
> index is changed during
> scrolling and that affects the query and you're
> re-querying, you will 
> maybe get confused about new docs :-)
> 
> Hannes
> 
> Marc Dauncey schrieb:
> > I read somewhere recently (maybe even on this
> list) a
> > recommendation to requery each time for successive
> > pages as this avoids some of the complexity
> involved
> > in session management. Whats peoples view of this?
> >
> > Marc
> >
> >
> > --- karl wettin <kalle@snigel.net> wrote:
> >
> >   
> >> 27 apr 2006 kl. 20.44 skrev Jean Sini:
> >>     
> >>> Our application presents search results in a
> >>>       
> >> paginated form.
> >>     
> >>> We were unable to find Searcher methods that
> would
> >>>       
> >> return, say, 'n'
> >>     
> >>> (typically, 10) hits after a start offset 'k'.
> >>>
> >>> So we're currently using the Hits collection
> >>>       
> >> returned by  
> >>     
> >>> Searcher.search,
> >>> and using its Hits.doc(i) method to get the ith
> >>>       
> >> hit, with i between  
> >>     
> >>> k and
> >>> k+n. Is that the most efficient way to do that?
> Is
> >>>       
> >> there a better  
> >>     
> >>> way (e.g.
> >>> some form of Filter on the query itself)?
> >>>       
> >> You probably want to do it just the way you do.
> >>
> >> But cache the Hits somehow. Perhaps in a session,
> >> perhaps globally  
> >> in  /your/ searcher. Perhaps the session points
> at
> >> the global cache  
> >> so it doesn't change within a session when you
> flush
> >> the cache on  
> >> index update.
> >>
> >>
> >>     
> >
>
---------------------------------------------------------------------
> >   
> >> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >>
> >>
> >>     
> >
> >
> >
> > 		
> >
>
___________________________________________________________
> 
> > Yahoo! Photos  NEW, now offering a quality print
> service from just 7p a photo
> http://uk.photos.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >   
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 14:57:53 2006
Return-Path: <java-user-return-20400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14611 invoked from network); 28 Apr 2006 14:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 14:57:53 -0000
Received: (qmail 39418 invoked by uid 500); 28 Apr 2006 14:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39388 invoked by uid 500); 28 Apr 2006 14:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39377 invoked by uid 99); 28 Apr 2006 14:57:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:57:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 07:57:46 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D68CE33C0CE; Fri, 28 Apr 2006 10:57:25 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3B56933C0CE
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 10:57:22 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <4451E1E1.9030902@isb-sib.ch>
References: <4451E1E1.9030902@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E64CA04-3224-464C-83D4-DEF79B070221@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Preventing phrase queries from matching across lines
Date: Fri, 28 Apr 2006 10:57:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 28, 2006, at 5:35 AM, Eric Jain wrote:
> What is the best way to prevent a phrase query such as "eggs white"  
> matching "fried eggs\nwhite snow"?
>
> Two possibilities I have thought about:
>
> 1. Replace all line breaks with a special string, e.g. "newline".
> 2. Have an analyzer somehow increment the position of a term for  
> each line break it encounters.
>
> Latter seems a bit more complicated to implement, but it would also  
> be more efficient, right? Or are there better options?

#2 shouldn't be too hard to implement, but you'll need to catch new  
lines in the initial tokenizer.  I'm not sure about the efficiency,  
both options would require a tokenizer detecting new lines and either  
injecting a new term or setting a flag such that the next term gets a  
position increment bump.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 15:04:53 2006
Return-Path: <java-user-return-20401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17987 invoked from network); 28 Apr 2006 15:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 15:04:52 -0000
Received: (qmail 53875 invoked by uid 500); 28 Apr 2006 15:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53826 invoked by uid 500); 28 Apr 2006 15:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53792 invoked by uid 99); 28 Apr 2006 15:04:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:04:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:04:37 -0700
Received: from [84.131.40.234] (helo=[192.168.115.23])
	by mrelayeu.kundenserver.de (node=mrelayeu1) with ESMTP (Nemesis),
	id 0MKwpI-1FZUVy1Mlr-0002EN; Fri, 28 Apr 2006 17:04:15 +0200
Message-ID: <44522E22.90509@rc.ag>
Date: Fri, 28 Apr 2006 17:00:50 +0200
From: Hannes Carl Meyer <developers@rc.ag>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Efficiently paginating results.
References: <20060428145449.17240.qmail@web36603.mail.mud.yahoo.com>
In-Reply-To: <20060428145449.17240.qmail@web36603.mail.mud.yahoo.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

p.s. To avoid that issue you could store the result-sets document ids in 
the session.

Marc Dauncey schrieb:
> Yes, I was thinking about index updates. 
>
> Getting a different result set when you go back to a
> previous page might be an issue -   could always cache
> each page as its opened rather than the entire result
> set.  
>
>
>
> --- Hannes Carl Meyer <developers@rc.ag> wrote:
>
>   
>> Hi Marc,
>>
>> I'm using this method for a web-application. I'm
>> storing only the 
>> current viewable set of documents in the session and
>> re-query if the user
>> scrolls to the next page. This method is pretty fast
>> and has a minimal 
>> session- and processing-footprint. But, if your
>> index is changed during
>> scrolling and that affects the query and you're
>> re-querying, you will 
>> maybe get confused about new docs :-)
>>
>> Hannes
>>
>> Marc Dauncey schrieb:
>>     
>>> I read somewhere recently (maybe even on this
>>>       
>> list) a
>>     
>>> recommendation to requery each time for successive
>>> pages as this avoids some of the complexity
>>>       
>> involved
>>     
>>> in session management. Whats peoples view of this?
>>>
>>> Marc
>>>
>>>
>>> --- karl wettin <kalle@snigel.net> wrote:
>>>
>>>   
>>>       
>>>> 27 apr 2006 kl. 20.44 skrev Jean Sini:
>>>>     
>>>>         
>>>>> Our application presents search results in a
>>>>>       
>>>>>           
>>>> paginated form.
>>>>     
>>>>         
>>>>> We were unable to find Searcher methods that
>>>>>           
>> would
>>     
>>>>>       
>>>>>           
>>>> return, say, 'n'
>>>>     
>>>>         
>>>>> (typically, 10) hits after a start offset 'k'.
>>>>>
>>>>> So we're currently using the Hits collection
>>>>>       
>>>>>           
>>>> returned by  
>>>>     
>>>>         
>>>>> Searcher.search,
>>>>> and using its Hits.doc(i) method to get the ith
>>>>>       
>>>>>           
>>>> hit, with i between  
>>>>     
>>>>         
>>>>> k and
>>>>> k+n. Is that the most efficient way to do that?
>>>>>           
>> Is
>>     
>>>>>       
>>>>>           
>>>> there a better  
>>>>     
>>>>         
>>>>> way (e.g.
>>>>> some form of Filter on the query itself)?
>>>>>       
>>>>>           
>>>> You probably want to do it just the way you do.
>>>>
>>>> But cache the Hits somehow. Perhaps in a session,
>>>> perhaps globally  
>>>> in  /your/ searcher. Perhaps the session points
>>>>         
>> at
>>     
>>>> the global cache  
>>>> so it doesn't change within a session when you
>>>>         
>> flush
>>     
>>>> the cache on  
>>>> index update.
>>>>
>>>>
>>>>     
>>>>         
> ---------------------------------------------------------------------
>   
>>>   
>>>       
>>>> To unsubscribe, e-mail:
>>>> java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail:
>>>> java-user-help@lucene.apache.org
>>>>
>>>>
>>>>     
>>>>         
>>>
>>> 		
>>>
>>>       
> ___________________________________________________________
>   
>>> Yahoo! Photos  NEW, now offering a quality print
>>>       
>> service from just 7p a photo
>> http://uk.photos.yahoo.com
>>     
>>>       
> ---------------------------------------------------------------------
>   
>>> To unsubscribe, e-mail:
>>>       
>> java-user-unsubscribe@lucene.apache.org
>>     
>>> For additional commands, e-mail:
>>>       
>> java-user-help@lucene.apache.org
>>     
>>>   
>>>       
>>
>>     
> ---------------------------------------------------------------------
>   
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>>     
>
>
> Send instant messages to your online friends http://uk.messenger.yahoo.com 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 15:19:24 2006
Return-Path: <java-user-return-20402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25602 invoked from network); 28 Apr 2006 15:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 15:19:23 -0000
Received: (qmail 76216 invoked by uid 500); 28 Apr 2006 15:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75902 invoked by uid 500); 28 Apr 2006 15:19:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75890 invoked by uid 99); 28 Apr 2006 15:19:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:19:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Eric.Isakson@sas.com designates 149.173.6.152 as permitted sender)
Received: from [149.173.6.152] (HELO mercav04.na.sas.com) (149.173.6.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:19:16 -0700
Received: from MERC23.na.sas.com ([10.19.9.179]) by mercav04.na.sas.com with InterScan Message Security Suite; Fri, 28 Apr 2006 11:18:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Partial token matches
Date: Fri, 28 Apr 2006 11:18:54 -0400
Message-ID: <BFF5F6DFB538074B8A3FCD685C0DBE3601AA410C@MERC23.na.sas.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial token matches
Thread-Index: AcZp0XQRARp3uGj2T3uKDxlfkc9UIgAUod0A
From: "Eric Isakson" <Eric.Isakson@sas.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you all for the ideas and thanks to the developers for producing =
such a great tool. I hadn't considered the "too many clauses" problem in =
my original implementation and I'm definitely hitting it.

I decided to use a bi-gram tokenization approach combined with a =
PhraseQuery to get the "terms containing" feature. This keeps me from =
needing N fields each with different length n-grams at the expense of a =
little more work at query time. My indexed field ends up looking like:

in  nf  fo  or rm  ma  at

and my query for "form" looks like:

"fo or rm"

I build the query using the PhraseQuery object and my bi-gram tokenizer. =
I haven't tried to solve single character queries yet, but I don't =
expect that to be too much trouble. I'll probably just use a single =
character tokenization strategy in another field of the index and make =
that a special case.

This bi-gram approach actually produces an index smaller than the one I =
was getting with my previous algorithm and the search performance is =
great.

I also had the "too many clauses" problem in my "terms starting with" =
feature which used PrefixQuery. I solved this case using this same =
bi-gram tokenized field. For this case, I need the user supplied text at =
the beginning of the field. So I build a SpanNearQuery with the tokens =
to get a phrase like query using spans and then a SpanFirstQuery with =
the number of tokens to force the query to only match at the start of =
the field. So a "starts with" query for "form" looks like

SpanQuery fo =3D new SpanTermQuery(new Term(FIELD_CONTAINS, "fo");
SpanQuery or =3D new SpanTermQuery(new Term(FIELD_CONTAINS, "or");
SpanQuery rm =3D new SpanTermQuery(new Term(FIELD_CONTAINS, "rm");
SpanQuery form =3D new SpanNearQuery(new SpanQuery[] {fo, or, rm}, 0, =
true);
SpanQuery query =3D new SpanFirstQuery(form, 3);

>From what I read, this strategy will not perform as fast as a prefix =
query, but it will allow me to use arbitrarily short query text without =
running into the "too many clauses" problem.

Thanks again for the suggestions!
Eric

-----Original Message-----
From: Paul.Illingworth@saaconsultants.com =
[mailto:Paul.Illingworth@saaconsultants.com]=20
Sent: Thursday, April 27, 2006 4:06 AM
To: java-user@lucene.apache.org
Subject: Re: Partial token matches






Another approach maybe to use n-grams. Index each word as follows

2 gram field
in  nf  fo  or rm  ma  at

3 gram field
inf  nfo  for  orm rma  mat

4 gram field
info nfor form orm rmat

and so on.

To search for term "form" simply search the 4 gram field.

The prefix query approach may suffer from the too many clauses exception =
if you have lots of words beginning with, in your exmaple, "form". The =
approach above would avoid this but will obviously have a much bigger =
index size.

Regards

Paul I.



                                                                         =
 =20
             "Eric Isakson"                                              =
 =20
             <Eric.Isakson@sas                                           =
 =20
             .com>                                                      =
To=20
                                       <java-user@lucene.apache.org>     =
 =20
             26/04/2006 17:20                                           =
cc=20
                                                                         =
 =20
                                                                   =
Subject=20
             Please respond to         Partial token matches             =
 =20
             java-user@lucene.                                           =
 =20
                apache.org                                               =
 =20
                                                                         =
 =20
                                                                         =
 =20
                                                                         =
 =20
                                                                         =
 =20




Hi All,

Just wanted to throw out something I'm working on. It is working well =
for me, but I wanted to see if anyone can suggest any other alternatives =
that might perform better than what I'm doing now.

I have a field in my index that contains keywords (back of the book =
index
terms) and a UI feature that allows the user to find documents that =
contain a partial keyword supplied by the user. So a particular document =
in my index might have the token "informat" in the keywords field and =
the user may supply "form" in the UI and I should get a match.

My old implementation does not use Lucene and just uses String.matches =
with a regular expression that looks like ".*form.*". I reimplemented =
using Lucene and just tokenize the field so I get the tokens

informat
nformat
format
ormat
rmat
mat
at
t

Then I use a prefix query to find hits. Both implementations ignore case =
in the search and the hit order is controlled by another field that I'm =
sorting on, so relevance ranking is not important in this use case. =
Search time performance is crucial, time to create the index and index =
size are not really important. The index is created statically at =
application startup or possibly delivered to the application and is not =
updated while the application is using it.

Thanks for any suggestions,
Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 15:29:27 2006
Return-Path: <java-user-return-20403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34817 invoked from network); 28 Apr 2006 15:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 15:29:26 -0000
Received: (qmail 10432 invoked by uid 500); 28 Apr 2006 15:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10407 invoked by uid 500); 28 Apr 2006 15:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10396 invoked by uid 99); 28 Apr 2006 15:29:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:29:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 08:29:16 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 3B9CE14143C; Fri, 28 Apr 2006 18:28:53 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 7D7EB1AFA1
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 18:28:51 +0300 (EEST)
Message-ID: <445234B3.5020807@i-hypergrid.com>
Date: Fri, 28 Apr 2006 18:28:51 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Efficiently paginating results.
References: <20060428144039.41440.qmail@web36607.mail.mud.yahoo.com>
In-Reply-To: <20060428144039.41440.qmail@web36607.mail.mud.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------010507030804020309010308"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------010507030804020309010308
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I'm caching hits by query. When accessing more documents Lucene 
automatically re-quering index to retrieve more document.
When index changes then I reopen IndexReader and clear cache.

Marc Dauncey wrote:
> I read somewhere recently (maybe even on this list) a
> recommendation to requery each time for successive
> pages as this avoids some of the complexity involved
> in session management. Whats peoples view of this?
>
> Marc
>
>
> --- karl wettin <kalle@snigel.net> wrote:
>
>   
>> 27 apr 2006 kl. 20.44 skrev Jean Sini:
>>     
>>> Our application presents search results in a
>>>       
>> paginated form.
>>     
>>> We were unable to find Searcher methods that would
>>>       
>> return, say, 'n'
>>     
>>> (typically, 10) hits after a start offset 'k'.
>>>
>>> So we're currently using the Hits collection
>>>       
>> returned by  
>>     
>>> Searcher.search,
>>> and using its Hits.doc(i) method to get the ith
>>>       
>> hit, with i between  
>>     
>>> k and
>>> k+n. Is that the most efficient way to do that? Is
>>>       
>> there a better  
>>     
>>> way (e.g.
>>> some form of Filter on the query itself)?
>>>       
>> You probably want to do it just the way you do.
>>
>> But cache the Hits somehow. Perhaps in a session,
>> perhaps globally  
>> in  /your/ searcher. Perhaps the session points at
>> the global cache  
>> so it doesn't change within a session when you flush
>> the cache on  
>> index update.
>>
>>
>>     
> ---------------------------------------------------------------------
>   
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>
> 		
> ___________________________________________________________ 
> Yahoo! Photos -- NEW, now offering a quality print service from just 7p a photo http://uk.photos.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
regards,
Volodymyr Bychkoviak


--------------010507030804020309010308--

From java-user-return-20404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 16:21:14 2006
Return-Path: <java-user-return-20404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67872 invoked from network); 28 Apr 2006 16:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 16:21:13 -0000
Received: (qmail 24700 invoked by uid 500); 28 Apr 2006 16:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24638 invoked by uid 500); 28 Apr 2006 16:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24621 invoked by uid 99); 28 Apr 2006 16:21:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 09:21:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 202.54.110.230 is neither permitted nor denied by domain of Kinnar.Sen@hcl.in)
Received: from [202.54.110.230] (HELO ngate.noida.hcltech.com) (202.54.110.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 09:21:05 -0700
Received: from HSDLNTD1110010.noida.hcltech.com (hsdlntd1110010 [10.112.8.20])
	by ngate.noida.hcltech.com (8.12.5/8.12.5) with ESMTP id k3SGSnOV031966
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 21:59:42 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Efficiently paginating results.
Date: Fri, 28 Apr 2006 21:47:36 +0530
Message-ID: <539C0A297AA0C74581CB5AF82D5372916D38D8@HSDLNTD1110010.noida.hcltech.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Efficiently paginating results.
Thread-Index: AcZq2NFY6q9vcKtVSBSdHIZ2rI8BNAABZ1nw
From: "Kinnar Kumar Sen, Noida" <Kinnar.Sen@hcl.in>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Marc

Can you give some statistics about the amount of data you are indexing ?
Do you not think requering for pagination will increase the time taken
for bringing the hits. Rather than bringing the entire hits once in the
memory then displaying it as and when the user is clicking on the next
button. It would be very kind of you if you give me a detailed view
about this..

Regards,

Kinnar


-----Original Message-----
From: Marc Dauncey [mailto:marc_dauncey@yahoo.com]=20
Sent: Friday, April 28, 2006 8:25 PM
To: java-user@lucene.apache.org
Subject: Re: Efficiently paginating results.

Yes, I was thinking about index updates.=20

Getting a different result set when you go back to a
previous page might be an issue -   could always cache
each page as its opened rather than the entire result
set. =20



--- Hannes Carl Meyer <developers@rc.ag> wrote:

> Hi Marc,
>=20
> I'm using this method for a web-application. I'm
> storing only the=20
> current viewable set of documents in the session and
> re-query if the user
> scrolls to the next page. This method is pretty fast
> and has a minimal=20
> session- and processing-footprint. But, if your
> index is changed during
> scrolling and that affects the query and you're
> re-querying, you will=20
> maybe get confused about new docs :-)
>=20
> Hannes
>=20
> Marc Dauncey schrieb:
> > I read somewhere recently (maybe even on this
> list) a
> > recommendation to requery each time for successive
> > pages as this avoids some of the complexity
> involved
> > in session management. Whats peoples view of this?
> >
> > Marc
> >
> >
> > --- karl wettin <kalle@snigel.net> wrote:
> >
> >  =20
> >> 27 apr 2006 kl. 20.44 skrev Jean Sini:
> >>    =20
> >>> Our application presents search results in a
> >>>      =20
> >> paginated form.
> >>    =20
> >>> We were unable to find Searcher methods that
> would
> >>>      =20
> >> return, say, 'n'
> >>    =20
> >>> (typically, 10) hits after a start offset 'k'.
> >>>
> >>> So we're currently using the Hits collection
> >>>      =20
> >> returned by =20
> >>    =20
> >>> Searcher.search,
> >>> and using its Hits.doc(i) method to get the ith
> >>>      =20
> >> hit, with i between =20
> >>    =20
> >>> k and
> >>> k+n. Is that the most efficient way to do that?
> Is
> >>>      =20
> >> there a better =20
> >>    =20
> >>> way (e.g.
> >>> some form of Filter on the query itself)?
> >>>      =20
> >> You probably want to do it just the way you do.
> >>
> >> But cache the Hits somehow. Perhaps in a session,
> >> perhaps globally =20
> >> in  /your/ searcher. Perhaps the session points
> at
> >> the global cache =20
> >> so it doesn't change within a session when you
> flush
> >> the cache on =20
> >> index update.
> >>
> >>
> >>    =20
> >
>
---------------------------------------------------------------------
> >  =20
> >> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >>
> >>
> >>    =20
> >
> >
> >
> > 	=09
> >
>
___________________________________________________________
>=20
> > Yahoo! Photos - NEW, now offering a quality print
> service from just 7p a photo
> http://uk.photos.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >  =20
>=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20


Send instant messages to your online friends
http://uk.messenger.yahoo.com=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 18:38:38 2006
Return-Path: <java-user-return-20405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30908 invoked from network); 28 Apr 2006 18:38:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 18:38:38 -0000
Received: (qmail 27794 invoked by uid 500); 28 Apr 2006 18:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27754 invoked by uid 500); 28 Apr 2006 18:38:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27742 invoked by uid 99); 28 Apr 2006 18:38:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 11:38:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.24] (HELO web36607.mail.mud.yahoo.com) (209.191.85.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Apr 2006 11:38:29 -0700
Received: (qmail 43958 invoked by uid 60001); 28 Apr 2006 18:38:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=My4sQtpY8Gm1+1Yr6oOFgIlxXwctMihxohXevqrjgxjX40bXIqDGDe5gjR34WKFw+ROP8QlYbK18m7pBO8ihVQF3gwpE6mZXClosM9ctfhDo865eo+BbNSig8bVdzPXC0CW4ShWez4eQBsz0q5DWLRolsqY2PB5P9penaZHMrWo=  ;
Message-ID: <20060428183805.43956.qmail@web36607.mail.mud.yahoo.com>
Received: from [86.139.55.191] by web36607.mail.mud.yahoo.com via HTTP; Fri, 28 Apr 2006 19:38:05 BST
Date: Fri, 28 Apr 2006 19:38:05 +0100 (BST)
From: Marc Dauncey <marc_dauncey@yahoo.com>
Subject: RE: Efficiently paginating results.
To: java-user@lucene.apache.org
In-Reply-To: <539C0A297AA0C74581CB5AF82D5372916D38D8@HSDLNTD1110010.noida.hcltech.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Kinnar,

Well, I have quite a few indexes, some of which get
updated infrequently with large loads (quartley) and
then some indexes which will have approx 2000
additions a day.

Originally I planned to store the results on the
session - but I have to design for growth, both in
users and in data - I feel that eventually too much
memory will be taken up by this (which can be
mitigated by having multiple search servers) and I'll
end up timing out the session earlier than is useful.

I'm sure I read something in LIA the other day where
Eric recommended requerying, but I don't yet have any
fixed ideas about which way to go. What do you think?

Marc

--- "Kinnar Kumar Sen, Noida" <Kinnar.Sen@hcl.in>
wrote:

> Hi Marc
> 
> Can you give some statistics about the amount of
> data you are indexing ?
> Do you not think requering for pagination will
> increase the time taken
> for bringing the hits. Rather than bringing the
> entire hits once in the
> memory then displaying it as and when the user is
> clicking on the next
> button. It would be very kind of you if you give me
> a detailed view
> about this..
> 
> Regards,
> 
> Kinnar
> 
> 
> -----Original Message-----
> From: Marc Dauncey [mailto:marc_dauncey@yahoo.com] 
> Sent: Friday, April 28, 2006 8:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: Efficiently paginating results.
> 
> Yes, I was thinking about index updates. 
> 
> Getting a different result set when you go back to a
> previous page might be an issue -   could always
> cache
> each page as its opened rather than the entire
> result
> set.  
> 
> 
> 
> --- Hannes Carl Meyer <developers@rc.ag> wrote:
> 
> > Hi Marc,
> > 
> > I'm using this method for a web-application. I'm
> > storing only the 
> > current viewable set of documents in the session
> and
> > re-query if the user
> > scrolls to the next page. This method is pretty
> fast
> > and has a minimal 
> > session- and processing-footprint. But, if your
> > index is changed during
> > scrolling and that affects the query and you're
> > re-querying, you will 
> > maybe get confused about new docs :-)
> > 
> > Hannes
> > 
> > Marc Dauncey schrieb:
> > > I read somewhere recently (maybe even on this
> > list) a
> > > recommendation to requery each time for
> successive
> > > pages as this avoids some of the complexity
> > involved
> > > in session management. Whats peoples view of
> this?
> > >
> > > Marc
> > >
> > >
> > > --- karl wettin <kalle@snigel.net> wrote:
> > >
> > >   
> > >> 27 apr 2006 kl. 20.44 skrev Jean Sini:
> > >>     
> > >>> Our application presents search results in a
> > >>>       
> > >> paginated form.
> > >>     
> > >>> We were unable to find Searcher methods that
> > would
> > >>>       
> > >> return, say, 'n'
> > >>     
> > >>> (typically, 10) hits after a start offset 'k'.
> > >>>
> > >>> So we're currently using the Hits collection
> > >>>       
> > >> returned by  
> > >>     
> > >>> Searcher.search,
> > >>> and using its Hits.doc(i) method to get the
> ith
> > >>>       
> > >> hit, with i between  
> > >>     
> > >>> k and
> > >>> k+n. Is that the most efficient way to do
> that?
> > Is
> > >>>       
> > >> there a better  
> > >>     
> > >>> way (e.g.
> > >>> some form of Filter on the query itself)?
> > >>>       
> > >> You probably want to do it just the way you do.
> > >>
> > >> But cache the Hits somehow. Perhaps in a
> session,
> > >> perhaps globally  
> > >> in  /your/ searcher. Perhaps the session points
> > at
> > >> the global cache  
> > >> so it doesn't change within a session when you
> > flush
> > >> the cache on  
> > >> index update.
> > >>
> > >>
> > >>     
> > >
> >
>
---------------------------------------------------------------------
> > >   
> > >> To unsubscribe, e-mail:
> > >> java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail:
> > >> java-user-help@lucene.apache.org
> > >>
> > >>
> > >>     
> > >
> > >
> > >
> > > 		
> > >
> >
>
___________________________________________________________
> > 
> > > Yahoo! Photos - NEW, now offering a quality
> print
> > service from just 7p a photo
> > http://uk.photos.yahoo.com
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >   
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> Send instant messages to your online friends
> http://uk.messenger.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



		
___________________________________________________________ 
NEW Yahoo! Cars - sell your car and browse thousands of new and used cars online! http://uk.cars.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 18:58:04 2006
Return-Path: <java-user-return-20406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38859 invoked from network); 28 Apr 2006 18:58:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 18:58:04 -0000
Received: (qmail 53513 invoked by uid 500); 28 Apr 2006 18:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53487 invoked by uid 500); 28 Apr 2006 18:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53476 invoked by uid 99); 28 Apr 2006 18:57:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 11:57:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.169.158.23] (HELO mail.aurisp.de) (81.169.158.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 11:57:56 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id BF27CB806
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 20:57:34 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 04819-02-4 for <java-user@lucene.apache.org>;
	Fri, 28 Apr 2006 20:57:24 +0200 (CEST)
Received: from localhost (p50887097.dip.t-dialin.net [80.136.112.151])
	by mail.aurisp.de (Postfix) with ESMTP id 027B2B814
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 20:57:22 +0200 (CEST)
Date: Fri, 28 Apr 2006 20:57:21 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: for the similarity measure
Message-ID: <20060428185721.GD757@amok.priv>
References: <277d4c5d0604272254m70fe2551o435dc5217e671442@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <277d4c5d0604272254m70fe2551o435dc5217e671442@mail.gmail.com>
User-Agent: Mutt/1.4i
X-Virus-Scanned: amavisd-new at mail.aurisp.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, Apr 28, 2006 at 01:54:51PM +0800, jason wrote:
> After reading the code, I found the similarity measure in Lucene is not the
> same as the cosine coefficient measure commonly used. I dont know it is
> correct. And I wonder whether i can use the cosine coefficient measure in
> lucene or maybe the Dice's coefficient, Jaccard's coefficient and overlap
> coefficient measure.

Noone seems to have answered this yet, so I guess I'll have a go.

I wrote down the following a while ago; I'm omitting boosts and coords
here, since you don't have to use them. It assumes that you are using
DefaultSimilarity and not a custom similarity implementation. You will
have to pick through the LaTeX code; it's rather difficult to render
formulas in ASCII.


Lucene uses a
modified vector-space model; the main scoring formula is
\begin{equation}
\label{eq:lucenescore}
\score(\qu, \doc) = \frac{\sum_{\term\in\qu} \sqrt{\tf(\term, \doc)} \cdot
  \idf(\term)^2}{\sqrt{\sum_{\term\in\qu} \idf(\term)^2} 
  \sqrt{\vphantom{\sum_{\term\in\qu} \idf(\term)^2}\sum_{\term\in\doc} \tf(\term, \doc)}} 
\end{equation}
where 
\[ \idf(\term) = \log\frac{|\Doc|}{\docfreq(\term) + 1} + 1 \]
Scores are normalized to fall in a range of 0.0 to 1.0.

This weighting scheme is easily related to the standard vector-space
model by using \(\sqrt{\tf(\term, \doc)}\) instead of \(\tf(\term, \doc)\)
and defining \(\tf(\term,\qu)\equiv 1\). Then
\begin{align*}
  \score(\qu, \doc) &= \cos\angle(\vec{\qu}, \vec{\doc}) =
  \frac{\vec{\qu}\cdot\vec{\doc}}{\|\vec{\qu}\|\cdot \|\vec{\doc}\|}\\
  &= \frac{\sum_{\term\in\Term} \left(\sqrt{\tf(\term, \qu)}
      \idf(\term)\right)\left(\sqrt{\tf(\term, \doc)}
      \idf(\term)\right)}{ \sqrt{\sum_{\term\in\Term}
      \left(\sqrt{\tf(\term, \qu)} \idf(\term)\right)^2}
    \sqrt{\sum_{\term\in\Term} \left(\sqrt{\tf(\term, \doc)}
        \idf(\term)\right)^2}}\\
  &= \frac{\sum_{\term\in\qu} \sqrt{\tf(\term, \doc)}
    \idf(\term)^2}{\sqrt{\sum_{\term\in\qu} \idf(\term)^2}
    \sqrt{\sum_{\term\in\doc} \tf(\term, \doc) \idf(\term)^2}}
\end{align*} 
By omitting the term \(\idf(\term)^2\) from the term
\(\sqrt{\sum_{\term\in\doc} \tf(\term, \doc) \idf(\term)^2}\) in the
denominator, one arrives at the main scoring formula in
equation~(\ref{eq:lucenescore}).  Omitting the inverse document
frequency from the document normalization factor allows one to
precompute this factor and store it in the index; otherwise it would
be necessary to recompute the normalization factors every time a
document is added or deleted from the index.

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 19:11:44 2006
Return-Path: <java-user-return-20407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43270 invoked from network); 28 Apr 2006 19:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 19:11:44 -0000
Received: (qmail 70998 invoked by uid 500); 28 Apr 2006 19:11:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70942 invoked by uid 500); 28 Apr 2006 19:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70889 invoked by uid 99); 28 Apr 2006 19:11:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 12:11:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 12:11:27 -0700
Received: from pimout6-ext.prodigy.net (pimout6-int.prodigy.net [207.115.4.22])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id k3SJBGci031535
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 15:11:16 -0400
X-ORBL: [69.228.218.244]
Received: from [192.168.168.15] (adsl-69-228-218-244.dsl.pltn13.pacbell.net [69.228.218.244])
	by pimout6-ext.prodigy.net (8.13.6 out.dk/8.13.6) with ESMTP id k3SJB4Jx211884;
	Fri, 28 Apr 2006 15:11:04 -0400
Message-ID: <445268C7.6080102@apache.org>
Date: Fri, 28 Apr 2006 12:11:03 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20051013)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Ask for a better solution for the case
References: <4f2c7c9b0604280256k7c733d78i6b02eb23e593cd58@mail.gmail.com>
In-Reply-To: <4f2c7c9b0604280256k7c733d78i6b02eb23e593cd58@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hu andy wrote:
> Hi, I hava an application that need mark the retrieved documents  which have
> been read. So the next time I needn't read the marked documents again.

You could mark the documents as deleted, then later clear deletions.  So 
long as you don't close the IndexReader, the deletions will never be 
flushed to disk.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 21:09:55 2006
Return-Path: <java-user-return-20408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5978 invoked from network); 28 Apr 2006 21:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 21:09:55 -0000
Received: (qmail 51311 invoked by uid 500); 28 Apr 2006 21:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51260 invoked by uid 500); 28 Apr 2006 21:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51249 invoked by uid 99); 28 Apr 2006 21:09:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 14:09:48 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of captaincrunch2002@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wproxy.gmail.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 14:09:47 -0700
Received: by wproxy.gmail.com with SMTP id i30so1874635wra
        for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 14:09:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FQcDyEJrKJ6ZlP9MDNy0L+UYIBTjI3q0ncToHtpU6w5sHnZsAQuGhLtXRsEXeOdaX//qDa46wBtrZnEKDXZy4NuBTAx/ErBSNFfEGS3ZrNbrzdpPrcjt5DoS5N1W8YS69Oyf0y+ZJmbIk3t/JiacUZWTI0AwVTZkJDG7YHfKUbc=
Received: by 10.65.72.11 with SMTP id z11mr3808758qbk;
        Fri, 28 Apr 2006 14:09:26 -0700 (PDT)
Received: by 10.65.163.20 with HTTP; Fri, 28 Apr 2006 14:09:26 -0700 (PDT)
Message-ID: <11a4d6c20604281409p32e7333wd99c4eff8090278a@mail.gmail.com>
Date: Fri, 28 Apr 2006 17:09:26 -0400
From: "Daniel Shane" <captaincrunch2002@gmail.com>
To: java-user@lucene.apache.org
Subject: Tips on building a better BooleanQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6915_18291768.1146258566710"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6915_18291768.1146258566710
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi!

[I'm sorry for also posting this on the dev mailing list, but I was not sur=
e
in which one it would be best, so if there is a moderator, please kill
either one.]

I'm planning on contributing to Lucene by adding a new kind of query. I don=
t
know how to call it yet, but it would be a mix of BooleanQuery and
ExactPhraseQuery.

I would like to have a Query that is a BooleanQuery, but with a slight touc=
h
where it would boost results if it finds the query terms in a an exact
phrase.

For example, if I have terms A, B and C and I do a simple boolean search : =
A
B C, I would like to have a query that behaves a bit like if I rewrote this
query as such :

+A +B +C "A B" "B C" "A B C"

This would boost results where the exact string "A B C" or any substring
like "A B" or "B C" are found.

Of course I could rewrite all the queries, but it takes way too long to
search which this algorithm. I wanted to know if anyone has any ideas in
what direction I should go, or if its easy or not to implement this idea by
modifying or extending some already existing Query classes.

I'm fairly new to Lucene although I know a bit about search engines, idf,
etc... but I've tried to understand BooleanQuery and ExactPhraseQuery to se=
e
how I could modify them and I'm having a bit of a problem understanding it
all on my own I guess.

Any help or comments would be appreciated, and if it works well I do think
it would be a good addition to the Lucene code base (I think this query
should be used as a default in the QueryParser if it works ok instead of a
simple BooleanQuery).

Thanks in advance for your help,
Daniel Shane

------=_Part_6915_18291768.1146258566710--

From java-user-return-20409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 23:29:15 2006
Return-Path: <java-user-return-20409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55079 invoked from network); 28 Apr 2006 23:29:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 23:29:15 -0000
Received: (qmail 2870 invoked by uid 500); 28 Apr 2006 23:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2809 invoked by uid 500); 28 Apr 2006 23:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2798 invoked by uid 99); 28 Apr 2006 23:29:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 16:29:09 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Apr 2006 16:29:08 -0700
Received: (qmail 51718 invoked by uid 60001); 28 Apr 2006 23:28:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=dSuYrmopnNUWZumaLxJ1q99osPGO7o1O+s0I6KDcEkdYDeSthd2GzDaqNJYPf8pi6ro4dOIFbCl2rtQT+TPDDca9BfhCFuxnfpaaH+EC8ToMxkLtv87eHVLA30PSoEDbBbI8gzyy7Ri68yEPBoypuR/Md3O9pBg7VVmM073VIYQ=  ;
Message-ID: <20060428232847.51716.qmail@web50305.mail.yahoo.com>
Date: Fri, 28 Apr 2006 16:28:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Scoring without floating point calculations
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Apparently Sun's Niagara servers have a weak FPU, and I don't need my matches to contain floating point scores, so I would like to avoid floating point calculations when scoring, if possible.

Doing a quick `grep -R ' float ' *` in the source tree shows a number of places where floats are used: various *Score and *Scorer classes, various Query classes, Similarity, etc.

What would be the easiest way to plug in my own non-float scoring?

Thanks,
Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 28 23:34:58 2006
Return-Path: <java-user-return-20410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56599 invoked from network); 28 Apr 2006 23:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Apr 2006 23:34:58 -0000
Received: (qmail 10218 invoked by uid 500); 28 Apr 2006 23:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10188 invoked by uid 500); 28 Apr 2006 23:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10176 invoked by uid 99); 28 Apr 2006 23:34:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 16:34:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.201] (HELO smtp102.sbc.mail.mud.yahoo.com) (68.142.198.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Apr 2006 16:34:52 -0700
Received: (qmail 5861 invoked from network); 28 Apr 2006 23:34:30 -0000
Received: from unknown (HELO ?192.168.1.101?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp102.sbc.mail.mud.yahoo.com with SMTP; 28 Apr 2006 23:34:29 -0000
Mime-Version: 1.0
Message-Id: <p0623091ac07856a53b68@[192.168.1.101]>
In-Reply-To: <20060428232847.51716.qmail@web50305.mail.yahoo.com>
References: <20060428232847.51716.qmail@web50305.mail.yahoo.com>
Date: Fri, 28 Apr 2006 16:34:16 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Scoring without floating point calculations
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Apparently Sun's Niagara servers have a weak FPU, and I don't need 
>my matches to contain floating point scores, so I would like to 
>avoid floating point calculations when scoring, if possible.
>
>Doing a quick `grep -R ' float ' *` in the source tree shows a 
>number of places where floats are used: various *Score and *Scorer 
>classes, various Query classes, Similarity, etc.
>
>What would be the easiest way to plug in my own non-float scoring?

I'd briefly thought about this same issue (for the same reason), but 
didn't see an easy way to plug in a different scoring algorithm.

You can always add the log of the score versus doing a 
multiplication, but that would still involve a lot of source code 
changes.

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"Find Code, Find Answers"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 01:37:36 2006
Return-Path: <java-user-return-20411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94729 invoked from network); 29 Apr 2006 01:37:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 01:37:35 -0000
Received: (qmail 5317 invoked by uid 500); 29 Apr 2006 01:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5289 invoked by uid 500); 29 Apr 2006 01:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5278 invoked by uid 99); 29 Apr 2006 01:37:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 18:37:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 18:37:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BAE4C5B775; Fri, 28 Apr 2006 18:36:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AC3957F403
	for <java-user@lucene.apache.org>; Fri, 28 Apr 2006 18:36:59 -0700 (PDT)
Date: Fri, 28 Apr 2006 18:36:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: SpanFirstQuery and SpanNotQuery
Message-ID: <Pine.LNX.4.58.0604281805080.1058@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm looking at SpanQueries as I work on new test cases for LUCENE-557, and
I'm confused by the implimentation of SpanFirstQuery.getSpans().

In the Anonymous Spans instance returned, start() and end() are allways
the start() and end() of the inner SpanQuery for the current doc --
shouldn't the start() be "0" indicating that the span starts at the
begining of the document?

Because of the current implimentation, there doesn't seem to be any way to
use SpanNot with SpanFirst to ensure that a given SpanQuery X allways
occurs in the first N positions, and that SpanQuery Z does not appear
before it.

In other words, this...
   int N = ...
   SpanQuery X =...;
   SpanQuery Z =...;
   SpanQuery first = new SpanFirstQuery(X,N);
   SpanQuery q = new SpanNotQuery(first, Z);

...seems to be functionally equivilent to...
   int N = ...
   SpanQuery X =...;
   //SpanQuery Z =...;
   SpanQuery first = new SpanFirstQuery(X,N);
   SpanQuery q = first;

...is that how it's suppose to work, or am i missunderstanding something?

Here's a small addition to "TestBasics" which shows how i was
expecting things to work...

  public void testSpanNotFirst() throws Exception {
    SpanTermQuery term40 = new SpanTermQuery(new Term("field", "forty"));
    SpanFirstQuery first = new SpanFirstQuery(term40, 5);
    SpanTermQuery hun = new SpanTermQuery(new Term("field", "hundred"));
    SpanNotQuery not = new SpanNotQuery(first, hun);

    checkHits(not, new int[]{40,41,42,43,44,45,46,47,48,49});

  }


...but the results contain every number with a 4 in the tens digit



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 06:00:43 2006
Return-Path: <java-user-return-20412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62845 invoked from network); 29 Apr 2006 06:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 06:00:42 -0000
Received: (qmail 44033 invoked by uid 500); 29 Apr 2006 06:00:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43966 invoked by uid 500); 29 Apr 2006 06:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43945 invoked by uid 99); 29 Apr 2006 06:00:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 23:00:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.76.63.210] (HELO mailserver.exis.com.gr) (80.76.63.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 23:00:36 -0700
Received: from [10.10.10.2] (helo=[10.10.10.2])
	by rottweiler.exis.com.gr with esmtp (Exim 4.43)
	id 1FZiUv-0007bO-4e
	for java-user@lucene.apache.org; Sat, 29 Apr 2006 09:00:12 +0300
Message-ID: <445300DB.4060302@exis.com.gr>
Date: Sat, 29 Apr 2006 08:59:55 +0300
From: Marios Skounakis <mscoon@exis.com.gr>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Highlighter and complex queries
Content-Type: text/plain; charset=ISO-8859-7; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -1.4 (-)
X-Spam-Report: 	-1.4 ALL_TRUSTED            Passed through trusted hosts only via SMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

  Hi all,

Suppose the user enters the following query using a textbox interface: 
"rate based optimization" (as a phrase query, including the quotes). The 
query is parsed using QueryParser, then it is rewritten, and given to 
the highlighter. Then, method getBestTextFragments is called.

The method returns some fragments which contain only one of the words in 
the search phrase. Isn't this wrong? Since this is a phrase query, 
shouldn't the highlighter look for fragments which contain all three 
words, and even more, only for fragments in which the three words are 
adjascent (based on the token stream returned by the analyzer)?

Thanks in advance,
Marios

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 06:11:22 2006
Return-Path: <java-user-return-20413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65161 invoked from network); 29 Apr 2006 06:11:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 06:11:22 -0000
Received: (qmail 53017 invoked by uid 500); 29 Apr 2006 06:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52979 invoked by uid 500); 29 Apr 2006 06:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52968 invoked by uid 99); 29 Apr 2006 06:11:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 23:11:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 202.54.110.230 is neither permitted nor denied by domain of Kinnar.Sen@hcl.in)
Received: from [202.54.110.230] (HELO ngate.noida.hcltech.com) (202.54.110.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Apr 2006 23:11:15 -0700
Received: from HSDLNTD1110010.noida.hcltech.com (hsdlntd1110010 [10.112.8.20])
	by ngate.noida.hcltech.com (8.12.5/8.12.5) with ESMTP id k3T6GpNv017646
	for <java-user@lucene.apache.org>; Sat, 29 Apr 2006 11:50:03 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Efficiently paginating results.
Date: Sat, 29 Apr 2006 11:40:06 +0530
Message-ID: <539C0A297AA0C74581CB5AF82D5372916D399A@HSDLNTD1110010.noida.hcltech.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Efficiently paginating results.
Thread-Index: AcZq8va7Cql/KJ4CQ2mtx/9Ti69djQAXvNwA
From: "Kinnar Kumar Sen, Noida" <Kinnar.Sen@hcl.in>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Marc
   I have basically gone through the book Lucene in Action  where it
suggest requerying would be better, but I believe it depends on the kind
of application you have. In my case I need to rank the hits according to
some other parameters so I need the total hits at a time then rank it
accordingly. Then while paginating displaying the results in batches.=20
   Can you suggest me some other way to do the same? In my case the
ranking is an absolute must and I can't put the ranking parameters
inside lucene index along with each data.

Regards
Kinnar


-----Original Message-----
From: Marc Dauncey [mailto:marc_dauncey@yahoo.com]=20
Sent: Saturday, April 29, 2006 12:08 AM
To: java-user@lucene.apache.org
Subject: RE: Efficiently paginating results.

Hi Kinnar,

Well, I have quite a few indexes, some of which get
updated infrequently with large loads (quartley) and
then some indexes which will have approx 2000
additions a day.

Originally I planned to store the results on the
session - but I have to design for growth, both in
users and in data - I feel that eventually too much
memory will be taken up by this (which can be
mitigated by having multiple search servers) and I'll
end up timing out the session earlier than is useful.

I'm sure I read something in LIA the other day where
Eric recommended requerying, but I don't yet have any
fixed ideas about which way to go. What do you think?

Marc

--- "Kinnar Kumar Sen, Noida" <Kinnar.Sen@hcl.in>
wrote:

> Hi Marc
>=20
> Can you give some statistics about the amount of
> data you are indexing ?
> Do you not think requering for pagination will
> increase the time taken
> for bringing the hits. Rather than bringing the
> entire hits once in the
> memory then displaying it as and when the user is
> clicking on the next
> button. It would be very kind of you if you give me
> a detailed view
> about this..
>=20
> Regards,
>=20
> Kinnar
>=20
>=20
> -----Original Message-----
> From: Marc Dauncey [mailto:marc_dauncey@yahoo.com]=20
> Sent: Friday, April 28, 2006 8:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: Efficiently paginating results.
>=20
> Yes, I was thinking about index updates.=20
>=20
> Getting a different result set when you go back to a
> previous page might be an issue -   could always
> cache
> each page as its opened rather than the entire
> result
> set. =20
>=20
>=20
>=20
> --- Hannes Carl Meyer <developers@rc.ag> wrote:
>=20
> > Hi Marc,
> >=20
> > I'm using this method for a web-application. I'm
> > storing only the=20
> > current viewable set of documents in the session
> and
> > re-query if the user
> > scrolls to the next page. This method is pretty
> fast
> > and has a minimal=20
> > session- and processing-footprint. But, if your
> > index is changed during
> > scrolling and that affects the query and you're
> > re-querying, you will=20
> > maybe get confused about new docs :-)
> >=20
> > Hannes
> >=20
> > Marc Dauncey schrieb:
> > > I read somewhere recently (maybe even on this
> > list) a
> > > recommendation to requery each time for
> successive
> > > pages as this avoids some of the complexity
> > involved
> > > in session management. Whats peoples view of
> this?
> > >
> > > Marc
> > >
> > >
> > > --- karl wettin <kalle@snigel.net> wrote:
> > >
> > >  =20
> > >> 27 apr 2006 kl. 20.44 skrev Jean Sini:
> > >>    =20
> > >>> Our application presents search results in a
> > >>>      =20
> > >> paginated form.
> > >>    =20
> > >>> We were unable to find Searcher methods that
> > would
> > >>>      =20
> > >> return, say, 'n'
> > >>    =20
> > >>> (typically, 10) hits after a start offset 'k'.
> > >>>
> > >>> So we're currently using the Hits collection
> > >>>      =20
> > >> returned by =20
> > >>    =20
> > >>> Searcher.search,
> > >>> and using its Hits.doc(i) method to get the
> ith
> > >>>      =20
> > >> hit, with i between =20
> > >>    =20
> > >>> k and
> > >>> k+n. Is that the most efficient way to do
> that?
> > Is
> > >>>      =20
> > >> there a better =20
> > >>    =20
> > >>> way (e.g.
> > >>> some form of Filter on the query itself)?
> > >>>      =20
> > >> You probably want to do it just the way you do.
> > >>
> > >> But cache the Hits somehow. Perhaps in a
> session,
> > >> perhaps globally =20
> > >> in  /your/ searcher. Perhaps the session points
> > at
> > >> the global cache =20
> > >> so it doesn't change within a session when you
> > flush
> > >> the cache on =20
> > >> index update.
> > >>
> > >>
> > >>    =20
> > >
> >
>
---------------------------------------------------------------------
> > >  =20
> > >> To unsubscribe, e-mail:
> > >> java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail:
> > >> java-user-help@lucene.apache.org
> > >>
> > >>
> > >>    =20
> > >
> > >
> > >
> > > 	=09
> > >
> >
>
___________________________________________________________
> >=20
> > > Yahoo! Photos - NEW, now offering a quality
> print
> > service from just 7p a photo
> > http://uk.photos.yahoo.com
> > >
> > >
> >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >  =20
> >=20
> >=20
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >=20
> >=20
>=20
>=20
> Send instant messages to your online friends
> http://uk.messenger.yahoo.com=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20



	=09
___________________________________________________________=20
NEW Yahoo! Cars - sell your car and browse thousands of new and used
cars online! http://uk.cars.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 07:07:26 2006
Return-Path: <java-user-return-20414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77092 invoked from network); 29 Apr 2006 07:07:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 07:07:26 -0000
Received: (qmail 75755 invoked by uid 500); 29 Apr 2006 07:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75722 invoked by uid 500); 29 Apr 2006 07:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75711 invoked by uid 99); 29 Apr 2006 07:07:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 00:07:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 00:07:19 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2AAD833C641; Sat, 29 Apr 2006 03:06:58 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id DB30733C640
	for <java-user@lucene.apache.org>; Sat, 29 Apr 2006 03:06:54 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <445300DB.4060302@exis.com.gr>
References: <445300DB.4060302@exis.com.gr>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7B43F267-F179-4E12-A208-CB40820872BD@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Highlighter and complex queries
Date: Sat, 29 Apr 2006 03:06:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 29, 2006, at 1:59 AM, Marios Skounakis wrote:
> Suppose the user enters the following query using a textbox  
> interface: "rate based optimization" (as a phrase query, including  
> the quotes). The query is parsed using QueryParser, then it is  
> rewritten, and given to the highlighter. Then, method  
> getBestTextFragments is called.
>
> The method returns some fragments which contain only one of the  
> words in the search phrase. Isn't this wrong? Since this is a  
> phrase query, shouldn't the highlighter look for fragments which  
> contain all three words, and even more, only for fragments in which  
> the three words are adjascent (based on the token stream returned  
> by the analyzer)?

"wrong" is subjective in this case.  I personally prefer exact  
highlighting based on what matched, not just individual term  
extraction.  I have, in one project, converted all queries to a  
SpanQuery and used getSpans() to do highlighting in an accurate way.   
This particular code is not generalizable easily and was written  
under contract, so I cannot share it, but it actually was not very  
complex to do.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 11:56:53 2006
Return-Path: <java-user-return-20415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58440 invoked from network); 29 Apr 2006 11:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 11:56:53 -0000
Received: (qmail 12926 invoked by uid 500); 29 Apr 2006 11:56:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12884 invoked by uid 500); 29 Apr 2006 11:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12873 invoked by uid 99); 29 Apr 2006 11:56:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 04:56:47 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.33] (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 29 Apr 2006 04:56:46 -0700
Received: (qmail 4764 invoked from network); 29 Apr 2006 11:56:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=5P5nlrg2L3FKnxUlu+uCshfvRTXSuuiNNW5OuEGanFs12Sj/LdKLz8QBFwGP8EaXE5sZOjFiHDzTB5/mrSngCTMFehOmybvkBoGzSsYCR3e3zk9fEsXmHYogBprmrJt8IR+CKeDg8amcq87A5W6ZjASp4+dxRQyiocFEnDaetcc=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 29 Apr 2006 11:56:25 -0000
Message-ID: <44535464.2080707@yahoo.co.uk>
Date: Sat, 29 Apr 2006 12:56:20 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter and complex queries
References: <445300DB.4060302@exis.com.gr>
In-Reply-To: <445300DB.4060302@exis.com.gr>
Content-Type: text/plain; charset=ISO-8859-7; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Marios.

 >>Isn't this wrong?
Yes but this is an itch that no one has been suffficently been bothered 
by to fix yet.
I still haven't had the time or a desperate need to implement this so it 
will probably remain that way until someone feels strongly enough about 
the problem to fix it. Highlighting is not a straight forward problem if 
your goal is to exactly reflect the query logic- especially if you also 
try to summarise large texts AND you are dealing with complex queries 
containing Spans, "NOT" clauses and nested Boolean logic etc Some 
compromises have to be made.

My suggestion as to how this might best be approached and links to some 
related code is here:

http://marc.theaimsgroup.com/?l=lucene-user&m=112496111224218&w=2


This post highlights some of the intricacies involved.

http://www.gossamer-threads.com/lists/lucene/java-dev/23592#23592


Cheers
Mark



Marios Skounakis wrote:

>  Hi all,
>
> Suppose the user enters the following query using a textbox interface: 
> "rate based optimization" (as a phrase query, including the quotes). 
> The query is parsed using QueryParser, then it is rewritten, and given 
> to the highlighter. Then, method getBestTextFragments is called.
>
> The method returns some fragments which contain only one of the words 
> in the search phrase. Isn't this wrong? Since this is a phrase query, 
> shouldn't the highlighter look for fragments which contain all three 
> words, and even more, only for fragments in which the three words are 
> adjascent (based on the token stream returned by the analyzer)?
>
> Thanks in advance,
> Marios
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 29 12:28:32 2006
Return-Path: <java-user-return-20416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68751 invoked from network); 29 Apr 2006 12:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Apr 2006 12:28:31 -0000
Received: (qmail 36919 invoked by uid 500); 29 Apr 2006 12:28:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36754 invoked by uid 500); 29 Apr 2006 12:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36743 invoked by uid 99); 29 Apr 2006 12:28:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 05:28:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 05:28:25 -0700
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k3TCRpKe019384
	for <java-user@lucene.apache.org>; Sat, 29 Apr 2006 14:27:52 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.385 [268.5.1/327]); Sat, 29 Apr 2006 14:27:48 +0200
Message-ID: <44535BC3.2010502@isb-sib.ch>
Date: Sat, 29 Apr 2006 14:27:47 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Preventing phrase queries from matching across lines
References: <4451E1E1.9030902@isb-sib.ch> <7E64CA04-3224-464C-83D4-DEF79B070221@ehatchersolutions.com>
In-Reply-To: <7E64CA04-3224-464C-83D4-DEF79B070221@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-MailScanner-Information: Please contact the ISP for more information
X-sib-MailScanner: Found to be clean
X-sib-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> On Apr 28, 2006, at 5:35 AM, Eric Jain wrote:
>> What is the best way to prevent a phrase query such as "eggs white" 
>> matching "fried eggs\nwhite snow"?
>>
>> Two possibilities I have thought about:
>>
>> 1. Replace all line breaks with a special string, e.g. "newline".
>> 2. Have an analyzer somehow increment the position of a term for each 
>> line break it encounters.
>>
>> Latter seems a bit more complicated to implement, but it would also be 
>> more efficient, right? Or are there better options?
> 
> #2 shouldn't be too hard to implement, but you'll need to catch new 
> lines in the initial tokenizer.  I'm not sure about the efficiency, both 
> options would require a tokenizer detecting new lines and either 
> injecting a new term or setting a flag such that the next term gets a 
> position increment bump.

Thanks, #2 turned out to be easier to implement than expected. I should 
have precised that the "efficiency" I was concerned about was not the 
efficiency of the tokenization, but the impact of having all those 
additional "newline" term (positions) in the index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 30 03:45:30 2006
Return-Path: <java-user-return-20417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25768 invoked from network); 30 Apr 2006 03:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2006 03:45:30 -0000
Received: (qmail 79584 invoked by uid 500); 30 Apr 2006 03:45:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79543 invoked by uid 500); 30 Apr 2006 03:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79531 invoked by uid 99); 30 Apr 2006 03:45:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 20:45:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prettykely@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 20:45:23 -0700
Received: by nz-out-0102.google.com with SMTP id x7so2571753nzc
        for <java-user@lucene.apache.org>; Sat, 29 Apr 2006 20:45:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=qKuK1lfIL/SVx3bBlb0oB9Y2iVJtOB2nF+epEKqUM4ajEGvkEqOb1/C5TjgcdUXBvusyW4bdYFEeuSWkZyVCNfLL+lWetYZIqu+i8L72kOg10SMie3d/8xy8L3ZgjMk7MZg43Cw9g6F2H8kyTYgKrJYwFQTHQrq9SY4d3tnz5xg=
Received: by 10.36.81.7 with SMTP id e7mr3937133nzb;
        Sat, 29 Apr 2006 20:45:02 -0700 (PDT)
Received: by 10.36.104.13 with HTTP; Sat, 29 Apr 2006 20:45:02 -0700 (PDT)
Message-ID: <8fa7a78e0604292045p2b8c8b8bn5e5cd1116f167c9c@mail.gmail.com>
Date: Sun, 30 Apr 2006 11:45:02 +0800
From: "=?GB2312?B?1cXoqg==?=" <jimijin@jimijin.com>
Reply-To: jimijin@jimijin.com
Sender: prettykely@gmail.com
To: java-user@lucene.apache.org
Subject: In a index there are two same record,how do I get a unique record?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12612_14760047.1146368702603"
X-Google-Sender-Auth: d31d146748db08cd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12612_14760047.1146368702603
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGVsbG8sCiAqICAgIHR3byBmaWVsZDogbmFtZSxjb250ZW50cy50aGVyZSBhcmUgdHdvIHJlY29y
ZCBhcyBiZWxvdzoqCiogICAgUmVjb3JkIDGjum5hbWUqOmtlbHkgKmNvbnRlbnRzOiogSSBhbSBm
cm9tIEFtZXJpY2EsSSBhbSBnbGFkIHRvIG1lZXQKeW91LgogICAgKlJlY29yZCAyo7puYW1lKjpr
ZWx5ICpjb250ZW50czoqIEkgYW0gYSBoaWdoIHNjaG9vbC4KICAgIEkgIGFkZCB0aGUgdHdvIHJl
Y29yZHMgdG8gbHVjZW5lIGluZGV4Lm5hbWUgdXNlIGtldHdvcmQuYnV0IFdoZW4gSQpzZWFyY2gg
a2VseSxJIG9ubHkgbmVlZCBhIHJlY29yZCBpbmNsdWRpbmcga2VseS4KICAgIFBsZWFzZSB0ZWxs
IG1lIGhvdyBJIHNob3VsZCAgZG8/CiAgICBXaHkgZG8gSSBkbyBsaWtlIHRoZT9CZWNhdXNlIFdo
ZW4gSSBtb2RpZnkgdGhlIGRhdGEsSSBvbmx5IGFkZCBpdCB0aGUKaW5kZXgsSSBkb24ndCBkZWxl
dGUgaXQgaW1tZWRpYXRlbHkuSSBjYW4gZGVsZXRlIHdoZW4gdGhlIE9zIGlzIGlkbGVzc2UgLgog
ICAgVGhhbmtzIHZlcnkgbXVjaCEKICAgIE15IG1zbjo/cHJldHR5c2lub0Bob21haWwuY29tCg==
------=_Part_12612_14760047.1146368702603--

From java-user-return-20418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 30 03:46:34 2006
Return-Path: <java-user-return-20418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25977 invoked from network); 30 Apr 2006 03:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2006 03:46:34 -0000
Received: (qmail 81421 invoked by uid 500); 30 Apr 2006 03:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81034 invoked by uid 500); 30 Apr 2006 03:46:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81023 invoked by uid 99); 30 Apr 2006 03:46:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 20:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prettykely@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Apr 2006 20:46:28 -0700
Received: by nz-out-0102.google.com with SMTP id x7so2571819nzc
        for <java-user@lucene.apache.org>; Sat, 29 Apr 2006 20:46:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WE5bRSlmniHtOd2w4AcR2qt9nQq8DG278b2kZ6TM142WPe+Vx7OkVny6hfctygv0wcqdf0tIm5pjWr77ABAMTEN/OFir4ojNiLQf/gXoI8i0mbjwmhrbLxekCl+LuTRb+aO+GM0ld9EJ4qRyDpnyQWE8/+qOvVxFRyRHBJX3mRE=
Received: by 10.36.48.11 with SMTP id v11mr1021750nzv;
        Sat, 29 Apr 2006 20:46:07 -0700 (PDT)
Received: by 10.36.104.13 with HTTP; Sat, 29 Apr 2006 20:46:07 -0700 (PDT)
Message-ID: <8fa7a78e0604292046u47daa92dnd414ebbd30628bf5@mail.gmail.com>
Date: Sun, 30 Apr 2006 11:46:07 +0800
From: kely <prettykely@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: In a index there are two same record,how do I get a unique record?
In-Reply-To: <8fa7a78e0604292045p2b8c8b8bn5e5cd1116f167c9c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12620_25294240.1146368767826"
References: <8fa7a78e0604292045p2b8c8b8bn5e5cd1116f167c9c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12620_25294240.1146368767826
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

IEhlbGxvLAogKiAgICB0d28gZmllbGQ6IG5hbWUsY29udGVudHMudGhlcmUgYXJlIHR3byByZWNv
cmQgYXMgYmVsb3c6KgoqICAgIFJlY29yZCAxo7puYW1lKjprZWx5ICpjb250ZW50czoqIEkgYW0g
ZnJvbSBBbWVyaWNhLEkgYW0gZ2xhZCB0byBtZWV0CnlvdS4KICAgICpSZWNvcmQgMqO6bmFtZSo6
a2VseSAqY29udGVudHM6KiBJIGFtIGEgaGlnaCBzY2hvb2wuCiAgICBJICBhZGQgdGhlIHR3byBy
ZWNvcmRzIHRvIGx1Y2VuZSBpbmRleC5uYW1lIHVzZSBrZXR3b3JkLmJ1dCBXaGVuIEkKc2VhcmNo
IGtlbHksSSBvbmx5IG5lZWQgYSByZWNvcmQgaW5jbHVkaW5nIGtlbHkuCiAgICBQbGVhc2UgdGVs
bCBtZSBob3cgSSBzaG91bGQgIGRvPwogICAgV2h5IGRvIEkgZG8gbGlrZSB0aGU/QmVjYXVzZSBX
aGVuIEkgbW9kaWZ5IHRoZSBkYXRhLEkgb25seSBhZGQgaXQgdGhlCmluZGV4LEkgZG9uJ3QgZGVs
ZXRlIGl0IGltbWVkaWF0ZWx5LkkgY2FuIGRlbGV0ZSB3aGVuIHRoZSBPcyBpcyBpZGxlc3NlIC4K
ICAgIFRoYW5rcyB2ZXJ5IG11Y2ghCiAgICBNeSBtc246P3ByZXR0eXNpbm9AaG9tYWlsLmNvbQo=
------=_Part_12620_25294240.1146368767826--

From java-user-return-20419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 30 10:43:25 2006
Return-Path: <java-user-return-20419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21337 invoked from network); 30 Apr 2006 10:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2006 10:43:24 -0000
Received: (qmail 30497 invoked by uid 500); 30 Apr 2006 10:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30449 invoked by uid 500); 30 Apr 2006 10:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30438 invoked by uid 99); 30 Apr 2006 10:43:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 03:43:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kvelentz@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nproxy.gmail.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 03:43:16 -0700
Received: by nproxy.gmail.com with SMTP id c29so1751912nfb
        for <java-user@lucene.apache.org>; Sun, 30 Apr 2006 03:42:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole:message-id;
        b=gdGLrWwPqs5HoNx19xDRg/cmboIaF769/P6PoP73FukkIKvR1p7WPZ8yPgrEfL3rQp3W/+jFowKabIc1kuv3GElfUNse6pqrfGBCJ9hwaTpGsc1U3CdcboAZfnoeZMGHuU0fzN+KHTrr5KdSo2yBsOYJP9OfLQiOKxvXgqMGgh4=
Received: by 10.49.26.17 with SMTP id d17mr1086658nfj;
        Sun, 30 Apr 2006 03:42:55 -0700 (PDT)
Received: from frozenhell ( [62.1.244.119])
        by mx.gmail.com with ESMTP id c1sm20978nfe.2006.04.30.03.42.49;
        Sun, 30 Apr 2006 03:42:53 -0700 (PDT)
From: "Kostas V." <kvelentz@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index all the files in a directory
Date: Sun, 30 Apr 2006 13:42:37 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcZj5IrbqxXtonsLRKi0pgeqwWXQ5gIXTTiw
In-Reply-To: <359a92830604191207h451a3eb0w5d21a5a60f22c20f@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-ID: <445494ad.55bfe1fd.280e.08a3@mx.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Erick (and everyone who might read my post) hi and thank you very much
for your help.
I've tried your program but I do something wrong and it is only index the
last txt in the directory. If you could see my problem because I am new to
Java and Lucene as well. 
Thanks in advance

Kostas


public void parseAll() throws Exception {
            String sParentDir = "/database";

        indexTree(new File(sParentDir));
        }

        private void indexTree(File file) throws Exception {
            
        if (file.canRead()) {
        if (file.isDirectory()) {
        String[] files = file.list();
        if (files != null) {
        for (int idx = 0; idx < files.length; idx++) {
        indexTree(new File(file, files[idx]));
        }
        }
        } else {
        if (file.getName().toLowerCase().indexOf(".txt") == -1)
        return;
        String indexPath = "/portal-index";
        IndexWriter writer;
        GreekAnalyzer ana = new GreekAnalyzer();
        try {
            writer = new IndexWriter(indexPath, ana, true);
            
                 File indexFile = new File(""+file);
                 InputStream fis = new FileInputStream(indexFile);
                 
                Document doc = new Document();

                doc.add(Field.UnIndexed("path", indexFile.getPath()));
                doc.add(Field.UnIndexed("length",
                                        Long.toString(indexFile.length())));
                doc.add(Field.UnIndexed("modified",
                                        new Date(indexFile.lastModified()).
                                        toString()));
                doc.add(Field.Text("text", (Reader)new    
                               InputStreamReader(fis)));

                writer.addDocument(doc);
                writer.optimize();
                fis.close();
            
            writer.close();

    } catch (IOException ioe) {
            System.out.println(ioe);

        }
        }
        }
        }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 30 11:56:19 2006
Return-Path: <java-user-return-20420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42220 invoked from network); 30 Apr 2006 11:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2006 11:56:18 -0000
Received: (qmail 60217 invoked by uid 500); 30 Apr 2006 11:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60191 invoked by uid 500); 30 Apr 2006 11:56:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60180 invoked by uid 99); 30 Apr 2006 11:56:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 04:56:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 04:56:12 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 62A1133C65E; Sun, 30 Apr 2006 07:55:51 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.sprint-hsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 876C833C65C
	for <java-user@lucene.apache.org>; Sun, 30 Apr 2006 07:55:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <445494ad.55bfe1fd.280e.08a3@mx.gmail.com>
References: <445494ad.55bfe1fd.280e.08a3@mx.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3506B1E-C6C9-4F87-8E2C-9A00D64FBC75@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Index all the files in a directory
Date: Sun, 30 Apr 2006 07:55:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You are opening a new overwriting IndexWriter for every file, so only  
the last one is indexed.  You should open your IndexWriter outside  
the loop and close it afterwards.

	Erik


On Apr 30, 2006, at 6:42 AM, Kostas V. wrote:

> Dear Erick (and everyone who might read my post) hi and thank you  
> very much
> for your help.
> I've tried your program but I do something wrong and it is only  
> index the
> last txt in the directory. If you could see my problem because I am  
> new to
> Java and Lucene as well.
> Thanks in advance
>
> Kostas
>
>
> public void parseAll() throws Exception {
>             String sParentDir = "/database";
>
>         indexTree(new File(sParentDir));
>         }
>
>         private void indexTree(File file) throws Exception {
>
>         if (file.canRead()) {
>         if (file.isDirectory()) {
>         String[] files = file.list();
>         if (files != null) {
>         for (int idx = 0; idx < files.length; idx++) {
>         indexTree(new File(file, files[idx]));
>         }
>         }
>         } else {
>         if (file.getName().toLowerCase().indexOf(".txt") == -1)
>         return;
>         String indexPath = "/portal-index";
>         IndexWriter writer;
>         GreekAnalyzer ana = new GreekAnalyzer();
>         try {
>             writer = new IndexWriter(indexPath, ana, true);
>
>                  File indexFile = new File(""+file);
>                  InputStream fis = new FileInputStream(indexFile);
>
>                 Document doc = new Document();
>
>                 doc.add(Field.UnIndexed("path", indexFile.getPath()));
>                 doc.add(Field.UnIndexed("length",
>                                         Long.toString 
> (indexFile.length())));
>                 doc.add(Field.UnIndexed("modified",
>                                         new Date 
> (indexFile.lastModified()).
>                                         toString()));
>                 doc.add(Field.Text("text", (Reader)new
>                                InputStreamReader(fis)));
>
>                 writer.addDocument(doc);
>                 writer.optimize();
>                 fis.close();
>
>             writer.close();
>
>     } catch (IOException ioe) {
>             System.out.println(ioe);
>
>         }
>         }
>         }
>         }
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 30 23:10:25 2006
Return-Path: <java-user-return-20421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34567 invoked from network); 30 Apr 2006 23:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Apr 2006 23:10:25 -0000
Received: (qmail 50644 invoked by uid 500); 30 Apr 2006 23:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50600 invoked by uid 500); 30 Apr 2006 23:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50575 invoked by uid 99); 30 Apr 2006 23:10:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 16:10:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of smooth.way@gmail.com designates 66.249.82.201 as permitted sender)
Received: from [66.249.82.201] (HELO xproxy.gmail.com) (66.249.82.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 16:10:14 -0700
Received: by xproxy.gmail.com with SMTP id i26so2490679wxd
        for <java-user@lucene.apache.org>; Sun, 30 Apr 2006 16:09:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KwFzYDA6apIeKKN24mstYwJ+txlaYmiUuab6TQ8Kxvx3OZ8BPNq62ss2taEy9yMnAMN7jOYB111QRxs8a8KKIWvkCUwEUiIGNGWFKCiB9ZvikJiqMiWB6RRp7ZZeNuV4vKXjVwsZWtjW+nke9ecXjKzPygTchvIRZqsYoXkOpUE=
Received: by 10.70.130.6 with SMTP id c6mr148266wxd;
        Sun, 30 Apr 2006 16:09:48 -0700 (PDT)
Received: by 10.70.68.8 with HTTP; Sun, 30 Apr 2006 16:09:48 -0700 (PDT)
Message-ID: <3c401e00604301609k1b404606m79a2a735329e0e46@mail.gmail.com>
Date: Sun, 30 Apr 2006 16:09:48 -0700
From: "Mary Smith" <smooth.way@gmail.com>
To: java-user@lucene.apache.org
Subject: integrate TREC with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

This is an old question, but I am not able to find the solution yet.

I want to integrate TREC with Lucene.
Any hint?


Mary

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-20422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon May 01 00:28:50 2006
Return-Path: <java-user-return-20422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57755 invoked from network); 1 May 2006 00:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 May 2006 00:28:50 -0000
Received: (qmail 975 invoked by uid 500); 1 May 2006 00:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 881 invoked by uid 500); 1 May 2006 00:28:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 851 invoked by uid 99); 1 May 2006 00:28:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 17:28:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Apr 2006 17:28:43 -0700
Received: from [67.189.26.9] (helo=[10.0.1.3])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1FaMJK-000EqV-Nl
	for java-user@lucene.apache.org; Sun, 30 Apr 2006 17:30:46 -0700
Mime-Version: 1.0 (Apple Message framework v749.3)
In-Reply-To: <20060426163408.13426.qmail@web50304.mail.yahoo.com>
References: <20060426163408.13426.qmail@web50304.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C0FD8673-6CB8-481A-A18E-19689CB2453F@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Lucene search benchmark/stress test tool
Date: Sun, 30 Apr 2006 17:28:20 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.749.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Apr 26, 2006, at 9:34 AM, Otis Gospodnetic wrote:

> I'm about to write a little command-line Lucene search benchmark  
> tool.  I'm interested in benchmarking search performance and the  
> ability to specify concurrency level (# of parallel search threads)  
> and response timing, so I can calculate min, max, average, and mean  
> times.  Something like 'ab' (Apache Benchmark) tool, but for Lucene.
>
> Has anyone already written something like this?

I'm about to.  The predecessor to the indexing benchmarker tests I  
recently published results for was enormously helpful while  
streamlining the indexing process.  Now that I'm considering  
modifications to search logic and file format which may have a  
substantial impact on search-time performance, I'll need a search  
benchmarker to complement the indexing benchmarker.  I'll be writing  
a both a Perl/KinoSearch and a Java Lucene version, and they will use  
the Reuters corpus.

Where are you at with your app?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


